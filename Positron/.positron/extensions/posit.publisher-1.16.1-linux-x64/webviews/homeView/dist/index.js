var Fc=Object.defineProperty;var Lc=(t,e,n)=>e in t?Fc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Nn=(t,e,n)=>Lc(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();/**
* @vue/shared v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function $r(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const ue={},Sn=[],yt=()=>{},Bc=()=>!1,Ki=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ir=t=>t.startsWith("onUpdate:"),ze=Object.assign,Or=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Vc=Object.prototype.hasOwnProperty,fe=(t,e)=>Vc.call(t,e),q=Array.isArray,xn=t=>es(t)==="[object Map]",Nl=t=>es(t)==="[object Set]",Q=t=>typeof t=="function",Pe=t=>typeof t=="string",jt=t=>typeof t=="symbol",Ee=t=>t!==null&&typeof t=="object",Fl=t=>(Ee(t)||Q(t))&&Q(t.then)&&Q(t.catch),Ll=Object.prototype.toString,es=t=>Ll.call(t),Hc=t=>es(t).slice(8,-1),Bl=t=>es(t)==="[object Object]",Rr=t=>Pe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Wn=$r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ts=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},jc=/-(\w)/g,ut=ts(t=>t.replace(jc,(e,n)=>n?n.toUpperCase():"")),Uc=/\B([A-Z])/g,Ut=ts(t=>t.replace(Uc,"-$1").toLowerCase()),ns=ts(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ii=ts(t=>t?`on${ns(t)}`:""),nt=(t,e)=>!Object.is(t,e),Oi=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Vl=(t,e,n,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:n})},rr=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let ko;const is=()=>ko||(ko=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ss(t){if(q(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],s=Pe(i)?Yc(i):ss(i);if(s)for(const r in s)e[r]=s[r]}return e}else if(Pe(t)||Ee(t))return t}const zc=/;(?![^(]*\))/g,qc=/:([^]+)/,Wc=/\/\*[^]*?\*\//g;function Yc(t){const e={};return t.replace(Wc,"").split(zc).forEach(n=>{if(n){const i=n.split(qc);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function De(t){let e="";if(Pe(t))e=t;else if(q(t))for(let n=0;n<t.length;n++){const i=De(t[n]);i&&(e+=i+" ")}else if(Ee(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Gc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Jc=$r(Gc);function Hl(t){return!!t||t===""}const jl=t=>!!(t&&t.__v_isRef===!0),xe=t=>Pe(t)?t:t==null?"":q(t)||Ee(t)&&(t.toString===Ll||!Q(t.toString))?jl(t)?xe(t.value):JSON.stringify(t,Ul,2):String(t),Ul=(t,e)=>jl(e)?Ul(t,e.value):xn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,s],r)=>(n[As(i,r)+" =>"]=s,n),{})}:Nl(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>As(n))}:jt(e)?As(e):Ee(e)&&!q(e)&&!Bl(e)?String(e):e,As=(t,e="")=>{var n;return jt(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let qe;class zl{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=qe,!e&&qe&&(this.index=(qe.scopes||(qe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=qe;try{return qe=this,e()}finally{qe=n}}}on(){++this._on===1&&(this.prevScope=qe,qe=this)}off(){this._on>0&&--this._on===0&&(qe=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function ql(t){return new zl(t)}function Wl(){return qe}function Qc(t,e=!1){qe&&qe.cleanups.push(t)}let Se;const Ps=new WeakSet;class Yl{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,qe&&qe.active&&qe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ps.has(this)&&(Ps.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Jl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Eo(this),Ql(this);const e=Se,n=St;Se=this,St=!0;try{return this.fn()}finally{Xl(this),Se=e,St=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Tr(e);this.deps=this.depsTail=void 0,Eo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ps.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){or(this)&&this.run()}get dirty(){return or(this)}}let Gl=0,Yn,Gn;function Jl(t,e=!1){if(t.flags|=8,e){t.next=Gn,Gn=t;return}t.next=Yn,Yn=t}function Ar(){Gl++}function Pr(){if(--Gl>0)return;if(Gn){let e=Gn;for(Gn=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Yn;){let e=Yn;for(Yn=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){t||(t=i)}e=n}}if(t)throw t}function Ql(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Xl(t){let e,n=t.depsTail,i=n;for(;i;){const s=i.prevDep;i.version===-1?(i===n&&(n=s),Tr(i),Xc(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}t.deps=e,t.depsTail=n}function or(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Zl(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Zl(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===si)||(t.globalVersion=si,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!or(t))))return;t.flags|=2;const e=t.dep,n=Se,i=St;Se=t,St=!0;try{Ql(t);const s=t.fn(t._value);(e.version===0||nt(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Se=n,St=i,Xl(t),t.flags&=-3}}function Tr(t,e=!1){const{dep:n,prevSub:i,nextSub:s}=t;if(i&&(i.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=i,t.nextSub=void 0),n.subs===t&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Tr(r,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Xc(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let St=!0;const Kl=[];function Bt(){Kl.push(St),St=!1}function Vt(){const t=Kl.pop();St=t===void 0?!0:t}function Eo(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Se;Se=void 0;try{e()}finally{Se=n}}}let si=0;class Zc{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class rs{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Se||!St||Se===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Se)n=this.activeLink=new Zc(Se,this),Se.deps?(n.prevDep=Se.depsTail,Se.depsTail.nextDep=n,Se.depsTail=n):Se.deps=Se.depsTail=n,ea(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=Se.depsTail,n.nextDep=void 0,Se.depsTail.nextDep=n,Se.depsTail=n,Se.deps===n&&(Se.deps=i)}return n}trigger(e){this.version++,si++,this.notify(e)}notify(e){Ar();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Pr()}}}function ea(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)ea(i)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Bi=new WeakMap,un=Symbol(""),lr=Symbol(""),ri=Symbol("");function We(t,e,n){if(St&&Se){let i=Bi.get(t);i||Bi.set(t,i=new Map);let s=i.get(n);s||(i.set(n,s=new rs),s.map=i,s.key=n),s.track()}}function Dt(t,e,n,i,s,r){const o=Bi.get(t);if(!o){si++;return}const l=a=>{a&&a.trigger()};if(Ar(),e==="clear")o.forEach(l);else{const a=q(t),u=a&&Rr(n);if(a&&n==="length"){const c=Number(i);o.forEach((h,p)=>{(p==="length"||p===ri||!jt(p)&&p>=c)&&l(h)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),u&&l(o.get(ri)),e){case"add":a?u&&l(o.get("length")):(l(o.get(un)),xn(t)&&l(o.get(lr)));break;case"delete":a||(l(o.get(un)),xn(t)&&l(o.get(lr)));break;case"set":xn(t)&&l(o.get(un));break}}Pr()}function Kc(t,e){const n=Bi.get(t);return n&&n.get(e)}function pn(t){const e=oe(t);return e===t?e:(We(e,"iterate",ri),pt(t)?e:e.map(je))}function os(t){return We(t=oe(t),"iterate",ri),t}const eu={__proto__:null,[Symbol.iterator](){return Ts(this,Symbol.iterator,je)},concat(...t){return pn(this).concat(...t.map(e=>q(e)?pn(e):e))},entries(){return Ts(this,"entries",t=>(t[1]=je(t[1]),t))},every(t,e){return At(this,"every",t,e,void 0,arguments)},filter(t,e){return At(this,"filter",t,e,n=>n.map(je),arguments)},find(t,e){return At(this,"find",t,e,je,arguments)},findIndex(t,e){return At(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return At(this,"findLast",t,e,je,arguments)},findLastIndex(t,e){return At(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return At(this,"forEach",t,e,void 0,arguments)},includes(...t){return Ds(this,"includes",t)},indexOf(...t){return Ds(this,"indexOf",t)},join(t){return pn(this).join(t)},lastIndexOf(...t){return Ds(this,"lastIndexOf",t)},map(t,e){return At(this,"map",t,e,void 0,arguments)},pop(){return Fn(this,"pop")},push(...t){return Fn(this,"push",t)},reduce(t,...e){return $o(this,"reduce",t,e)},reduceRight(t,...e){return $o(this,"reduceRight",t,e)},shift(){return Fn(this,"shift")},some(t,e){return At(this,"some",t,e,void 0,arguments)},splice(...t){return Fn(this,"splice",t)},toReversed(){return pn(this).toReversed()},toSorted(t){return pn(this).toSorted(t)},toSpliced(...t){return pn(this).toSpliced(...t)},unshift(...t){return Fn(this,"unshift",t)},values(){return Ts(this,"values",je)}};function Ts(t,e,n){const i=os(t),s=i[e]();return i!==t&&!pt(t)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=n(r.value)),r}),s}const tu=Array.prototype;function At(t,e,n,i,s,r){const o=os(t),l=o!==t&&!pt(t),a=o[e];if(a!==tu[e]){const h=a.apply(t,r);return l?je(h):h}let u=n;o!==t&&(l?u=function(h,p){return n.call(this,je(h),p,t)}:n.length>2&&(u=function(h,p){return n.call(this,h,p,t)}));const c=a.call(o,u,i);return l&&s?s(c):c}function $o(t,e,n,i){const s=os(t);let r=n;return s!==t&&(pt(t)?n.length>3&&(r=function(o,l,a){return n.call(this,o,l,a,t)}):r=function(o,l,a){return n.call(this,o,je(l),a,t)}),s[e](r,...i)}function Ds(t,e,n){const i=oe(t);We(i,"iterate",ri);const s=i[e](...n);return(s===-1||s===!1)&&Nr(n[0])?(n[0]=oe(n[0]),i[e](...n)):s}function Fn(t,e,n=[]){Bt(),Ar();const i=oe(t)[e].apply(t,n);return Pr(),Vt(),i}const nu=$r("__proto__,__v_isRef,__isVue"),ta=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(jt));function iu(t){jt(t)||(t=String(t));const e=oe(this);return We(e,"has",t),e.hasOwnProperty(t)}class na{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,i){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return i===(s?r?hu:oa:r?ra:sa).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=q(e);if(!s){let a;if(o&&(a=eu[n]))return a;if(n==="hasOwnProperty")return iu}const l=Reflect.get(e,n,Ae(e)?e:i);return(jt(n)?ta.has(n):nu(n))||(s||We(e,"get",n),r)?l:Ae(l)?o&&Rr(n)?l:l.value:Ee(l)?s?aa(l):ls(l):l}}class ia extends na{constructor(e=!1){super(!1,e)}set(e,n,i,s){let r=e[n];if(!this._isShallow){const a=en(r);if(!pt(i)&&!en(i)&&(r=oe(r),i=oe(i)),!q(e)&&Ae(r)&&!Ae(i))return a?!1:(r.value=i,!0)}const o=q(e)&&Rr(n)?Number(n)<e.length:fe(e,n),l=Reflect.set(e,n,i,Ae(e)?e:s);return e===oe(s)&&(o?nt(i,r)&&Dt(e,"set",n,i):Dt(e,"add",n,i)),l}deleteProperty(e,n){const i=fe(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&i&&Dt(e,"delete",n,void 0),s}has(e,n){const i=Reflect.has(e,n);return(!jt(n)||!ta.has(n))&&We(e,"has",n),i}ownKeys(e){return We(e,"iterate",q(e)?"length":un),Reflect.ownKeys(e)}}class su extends na{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const ru=new ia,ou=new su,lu=new ia(!0);const ar=t=>t,Si=t=>Reflect.getPrototypeOf(t);function au(t,e,n){return function(...i){const s=this.__v_raw,r=oe(s),o=xn(r),l=t==="entries"||t===Symbol.iterator&&o,a=t==="keys"&&o,u=s[t](...i),c=n?ar:e?Vi:je;return!e&&We(r,"iterate",a?lr:un),{next(){const{value:h,done:p}=u.next();return p?{value:h,done:p}:{value:l?[c(h[0]),c(h[1])]:c(h),done:p}},[Symbol.iterator](){return this}}}}function xi(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function cu(t,e){const n={get(s){const r=this.__v_raw,o=oe(r),l=oe(s);t||(nt(s,l)&&We(o,"get",s),We(o,"get",l));const{has:a}=Si(o),u=e?ar:t?Vi:je;if(a.call(o,s))return u(r.get(s));if(a.call(o,l))return u(r.get(l));r!==o&&r.get(s)},get size(){const s=this.__v_raw;return!t&&We(oe(s),"iterate",un),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,o=oe(r),l=oe(s);return t||(nt(s,l)&&We(o,"has",s),We(o,"has",l)),s===l?r.has(s):r.has(s)||r.has(l)},forEach(s,r){const o=this,l=o.__v_raw,a=oe(l),u=e?ar:t?Vi:je;return!t&&We(a,"iterate",un),l.forEach((c,h)=>s.call(r,u(c),u(h),o))}};return ze(n,t?{add:xi("add"),set:xi("set"),delete:xi("delete"),clear:xi("clear")}:{add(s){!e&&!pt(s)&&!en(s)&&(s=oe(s));const r=oe(this);return Si(r).has.call(r,s)||(r.add(s),Dt(r,"add",s,s)),this},set(s,r){!e&&!pt(r)&&!en(r)&&(r=oe(r));const o=oe(this),{has:l,get:a}=Si(o);let u=l.call(o,s);u||(s=oe(s),u=l.call(o,s));const c=a.call(o,s);return o.set(s,r),u?nt(r,c)&&Dt(o,"set",s,r):Dt(o,"add",s,r),this},delete(s){const r=oe(this),{has:o,get:l}=Si(r);let a=o.call(r,s);a||(s=oe(s),a=o.call(r,s)),l&&l.call(r,s);const u=r.delete(s);return a&&Dt(r,"delete",s,void 0),u},clear(){const s=oe(this),r=s.size!==0,o=s.clear();return r&&Dt(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=au(s,t,e)}),n}function Dr(t,e){const n=cu(t,e);return(i,s,r)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?i:Reflect.get(fe(n,s)&&s in i?n:i,s,r)}const uu={get:Dr(!1,!1)},du={get:Dr(!1,!0)},fu={get:Dr(!0,!1)};const sa=new WeakMap,ra=new WeakMap,oa=new WeakMap,hu=new WeakMap;function pu(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function gu(t){return t.__v_skip||!Object.isExtensible(t)?0:pu(Hc(t))}function ls(t){return en(t)?t:Mr(t,!1,ru,uu,sa)}function la(t){return Mr(t,!1,lu,du,ra)}function aa(t){return Mr(t,!0,ou,fu,oa)}function Mr(t,e,n,i,s){if(!Ee(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=gu(t);if(r===0)return t;const o=s.get(t);if(o)return o;const l=new Proxy(t,r===2?i:n);return s.set(t,l),l}function Kt(t){return en(t)?Kt(t.__v_raw):!!(t&&t.__v_isReactive)}function en(t){return!!(t&&t.__v_isReadonly)}function pt(t){return!!(t&&t.__v_isShallow)}function Nr(t){return t?!!t.__v_raw:!1}function oe(t){const e=t&&t.__v_raw;return e?oe(e):t}function as(t){return!fe(t,"__v_skip")&&Object.isExtensible(t)&&Vl(t,"__v_skip",!0),t}const je=t=>Ee(t)?ls(t):t,Vi=t=>Ee(t)?aa(t):t;function Ae(t){return t?t.__v_isRef===!0:!1}function re(t){return vu(t,!1)}function vu(t,e){return Ae(t)?t:new mu(t,e)}class mu{constructor(e,n){this.dep=new rs,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:oe(e),this._value=n?e:je(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,i=this.__v_isShallow||pt(e)||en(e);e=i?e:oe(e),nt(e,n)&&(this._rawValue=e,this._value=i?e:je(e),this.dep.trigger())}}function L(t){return Ae(t)?t.value:t}const bu={get:(t,e,n)=>e==="__v_raw"?t:L(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const s=t[e];return Ae(s)&&!Ae(n)?(s.value=n,!0):Reflect.set(t,e,n,i)}};function ca(t){return Kt(t)?t:new Proxy(t,bu)}class yu{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new rs,{get:i,set:s}=e(n.track.bind(n),n.trigger.bind(n));this._get=i,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function Su(t){return new yu(t)}function xu(t){const e=q(t)?new Array(t.length):{};for(const n in t)e[n]=_u(t,n);return e}class wu{constructor(e,n,i){this._object=e,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Kc(oe(this._object),this._key)}}function _u(t,e,n){const i=t[e];return Ae(i)?i:new wu(t,e,n)}class Cu{constructor(e,n,i){this.fn=e,this.setter=n,this._value=void 0,this.dep=new rs(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=si-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Se!==this)return Jl(this,!0),!0}get value(){const e=this.dep.track();return Zl(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function ku(t,e,n=!1){let i,s;return Q(t)?i=t:(i=t.get,s=t.set),new Cu(i,s,n)}const wi={},Hi=new WeakMap;let cn;function Eu(t,e=!1,n=cn){if(n){let i=Hi.get(n);i||Hi.set(n,i=[]),i.push(t)}}function $u(t,e,n=ue){const{immediate:i,deep:s,once:r,scheduler:o,augmentJob:l,call:a}=n,u=C=>s?C:pt(C)||s===!1||s===0?Mt(C,1):Mt(C);let c,h,p,v,$=!1,k=!1;if(Ae(t)?(h=()=>t.value,$=pt(t)):Kt(t)?(h=()=>u(t),$=!0):q(t)?(k=!0,$=t.some(C=>Kt(C)||pt(C)),h=()=>t.map(C=>{if(Ae(C))return C.value;if(Kt(C))return u(C);if(Q(C))return a?a(C,2):C()})):Q(t)?e?h=a?()=>a(t,2):t:h=()=>{if(p){Bt();try{p()}finally{Vt()}}const C=cn;cn=c;try{return a?a(t,3,[v]):t(v)}finally{cn=C}}:h=yt,e&&s){const C=h,J=s===!0?1/0:s;h=()=>Mt(C(),J)}const E=Wl(),N=()=>{c.stop(),E&&E.active&&Or(E.effects,c)};if(r&&e){const C=e;e=(...J)=>{C(...J),N()}}let U=k?new Array(t.length).fill(wi):wi;const W=C=>{if(!(!(c.flags&1)||!c.dirty&&!C))if(e){const J=c.run();if(s||$||(k?J.some((Te,ce)=>nt(Te,U[ce])):nt(J,U))){p&&p();const Te=cn;cn=c;try{const ce=[J,U===wi?void 0:k&&U[0]===wi?[]:U,v];a?a(e,3,ce):e(...ce),U=J}finally{cn=Te}}}else c.run()};return l&&l(W),c=new Yl(h),c.scheduler=o?()=>o(W,!1):W,v=C=>Eu(C,!1,c),p=c.onStop=()=>{const C=Hi.get(c);if(C){if(a)a(C,4);else for(const J of C)J();Hi.delete(c)}},e?i?W(!0):U=c.run():o?o(W.bind(null,!0),!0):c.run(),N.pause=c.pause.bind(c),N.resume=c.resume.bind(c),N.stop=N,N}function Mt(t,e=1/0,n){if(e<=0||!Ee(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Ae(t))Mt(t.value,e,n);else if(q(t))for(let i=0;i<t.length;i++)Mt(t[i],e,n);else if(Nl(t)||xn(t))t.forEach(i=>{Mt(i,e,n)});else if(Bl(t)){for(const i in t)Mt(t[i],e,n);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&Mt(t[i],e,n)}return t}/**
* @vue/runtime-core v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function gi(t,e,n,i){try{return i?t(...i):t()}catch(s){cs(s,e,n)}}function Ot(t,e,n,i){if(Q(t)){const s=gi(t,e,n,i);return s&&Fl(s)&&s.catch(r=>{cs(r,e,n)}),s}if(q(t)){const s=[];for(let r=0;r<t.length;r++)s.push(Ot(t[r],e,n,i));return s}}function cs(t,e,n,i=!0){const s=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ue;if(e){let l=e.parent;const a=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const c=l.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](t,a,u)===!1)return}l=l.parent}if(r){Bt(),gi(r,null,10,[t,a,u]),Vt();return}}Iu(t,n,s,i,o)}function Iu(t,e,n,i=!0,s=!1){if(s)throw t;console.error(t)}const Ze=[];let $t=-1;const wn=[];let Xt=null,vn=0;const ua=Promise.resolve();let ji=null;function vi(t){const e=ji||ua;return t?e.then(this?t.bind(this):t):e}function Ou(t){let e=$t+1,n=Ze.length;for(;e<n;){const i=e+n>>>1,s=Ze[i],r=oi(s);r<t||r===t&&s.flags&2?e=i+1:n=i}return e}function Fr(t){if(!(t.flags&1)){const e=oi(t),n=Ze[Ze.length-1];!n||!(t.flags&2)&&e>=oi(n)?Ze.push(t):Ze.splice(Ou(e),0,t),t.flags|=1,da()}}function da(){ji||(ji=ua.then(pa))}function fa(t){q(t)?wn.push(...t):Xt&&t.id===-1?Xt.splice(vn+1,0,t):t.flags&1||(wn.push(t),t.flags|=1),da()}function Io(t,e,n=$t+1){for(;n<Ze.length;n++){const i=Ze[n];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;Ze.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function ha(t){if(wn.length){const e=[...new Set(wn)].sort((n,i)=>oi(n)-oi(i));if(wn.length=0,Xt){Xt.push(...e);return}for(Xt=e,vn=0;vn<Xt.length;vn++){const n=Xt[vn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Xt=null,vn=0}}const oi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function pa(t){try{for($t=0;$t<Ze.length;$t++){const e=Ze[$t];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),gi(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;$t<Ze.length;$t++){const e=Ze[$t];e&&(e.flags&=-2)}$t=-1,Ze.length=0,ha(),ji=null,(Ze.length||wn.length)&&pa()}}let Fe=null,us=null;function Ui(t){const e=Fe;return Fe=t,us=t&&t.type.__scopeId||null,e}function Ru(t){us=t}function Au(){us=null}const Pu=t=>Me;function Me(t,e=Fe,n){if(!e||t._n)return t;const i=(...s)=>{i._d&&Lo(-1);const r=Ui(e);let o;try{o=t(...s)}finally{Ui(r),i._d&&Lo(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function mi(t,e){if(Fe===null)return t;const n=vs(Fe),i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[r,o,l,a=ue]=e[s];r&&(Q(r)&&(r={mounted:r,updated:r}),r.deep&&Mt(o),i.push({dir:r,instance:n,value:o,oldValue:void 0,arg:l,modifiers:a}))}return t}function on(t,e,n,i){const s=t.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const l=s[o];r&&(l.oldValue=r[o].value);let a=l.dir[i];a&&(Bt(),Ot(a,n,8,[t.el,l,t,e]),Vt())}}const Tu=Symbol("_vte"),Du=t=>t.__isTeleport;function Lr(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Lr(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Ne(t,e){return Q(t)?ze({name:t.name},e,{setup:t}):t}function ga(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function zi(t,e,n,i,s=!1){if(q(t)){t.forEach(($,k)=>zi($,e&&(q(e)?e[k]:e),n,i,s));return}if(_n(i)&&!s){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&zi(t,e,n,i.component.subTree);return}const r=i.shapeFlag&4?vs(i.component):i.el,o=s?null:r,{i:l,r:a}=t,u=e&&e.r,c=l.refs===ue?l.refs={}:l.refs,h=l.setupState,p=oe(h),v=h===ue?()=>!1:$=>fe(p,$);if(u!=null&&u!==a&&(Pe(u)?(c[u]=null,v(u)&&(h[u]=null)):Ae(u)&&(u.value=null)),Q(a))gi(a,l,12,[o,c]);else{const $=Pe(a),k=Ae(a);if($||k){const E=()=>{if(t.f){const N=$?v(a)?h[a]:c[a]:a.value;s?q(N)&&Or(N,r):q(N)?N.includes(r)||N.push(r):$?(c[a]=[r],v(a)&&(h[a]=c[a])):(a.value=[r],t.k&&(c[t.k]=a.value))}else $?(c[a]=o,v(a)&&(h[a]=o)):k&&(a.value=o,t.k&&(c[t.k]=o))};o?(E.id=-1,ot(E,n)):E()}}}is().requestIdleCallback;is().cancelIdleCallback;const _n=t=>!!t.type.__asyncLoader,va=t=>t.type.__isKeepAlive;function Mu(t,e){ma(t,"a",e)}function Nu(t,e){ma(t,"da",e)}function ma(t,e,n=Ve){const i=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(ds(e,i,n),n){let s=n.parent;for(;s&&s.parent;)va(s.parent.vnode)&&Fu(i,e,n,s),s=s.parent}}function Fu(t,e,n,i){const s=ds(e,t,i,!0);fs(()=>{Or(i[e],s)},n)}function ds(t,e,n=Ve,i=!1){if(n){const s=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{Bt();const l=bi(n),a=Ot(e,n,t,o);return l(),Vt(),a});return i?s.unshift(r):s.push(r),r}}const zt=t=>(e,n=Ve)=>{(!ci||t==="sp")&&ds(t,(...i)=>e(...i),n)},Lu=zt("bm"),Br=zt("m"),ba=zt("bu"),Bu=zt("u"),Vu=zt("bum"),fs=zt("um"),Hu=zt("sp"),ju=zt("rtg"),Uu=zt("rtc");function zu(t,e=Ve){ds("ec",t,e)}const Vr="components",qu="directives";function Hr(t,e){return jr(Vr,t,!0,e)||t}const ya=Symbol.for("v-ndc");function Oo(t){return Pe(t)?jr(Vr,t,!1)||t:t||ya}function Wu(t){return jr(qu,t)}function jr(t,e,n=!0,i=!1){const s=Fe||Ve;if(s){const r=s.type;if(t===Vr){const l=Td(r,!1);if(l&&(l===e||l===ut(e)||l===ns(ut(e))))return r}const o=Ro(s[t]||r[t],e)||Ro(s.appContext[t],e);return!o&&i?r:o}}function Ro(t,e){return t&&(t[e]||t[ut(e)]||t[ns(ut(e))])}function qt(t,e,n,i){let s;const r=n,o=q(t);if(o||Pe(t)){const l=o&&Kt(t);let a=!1,u=!1;l&&(a=!pt(t),u=en(t),t=os(t)),s=new Array(t.length);for(let c=0,h=t.length;c<h;c++)s[c]=e(a?u?Vi(je(t[c])):je(t[c]):t[c],c,void 0,r)}else if(typeof t=="number"){s=new Array(t);for(let l=0;l<t;l++)s[l]=e(l+1,l,void 0,r)}else if(Ee(t))if(t[Symbol.iterator])s=Array.from(t,(l,a)=>e(l,a,void 0,r));else{const l=Object.keys(t);s=new Array(l.length);for(let a=0,u=l.length;a<u;a++){const c=l[a];s[a]=e(t[c],c,a,r)}}else s=[];return s}function lt(t,e,n={},i,s){if(Fe.ce||Fe.parent&&_n(Fe.parent)&&Fe.parent.ce)return e!=="default"&&(n.name=e),m(),we(le,null,[se("slot",n,i)],64);let r=t[e];r&&r._c&&(r._d=!1),m();const o=r&&Sa(r(n)),l=n.key||o&&o.key,a=we(le,{key:(l&&!jt(l)?l:`_${e}`)+""},o||[],o&&t._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function Sa(t){return t.some(e=>Wr(e)?!(e.type===Ht||e.type===le&&!Sa(e.children)):!0)?t:null}function li(t,e){const n={};for(const i in t)n[e&&/[A-Z]/.test(i)?`on:${i}`:Ii(i)]=t[i];return n}const cr=t=>t?Ha(t)?vs(t):cr(t.parent):null,Jn=ze(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>cr(t.parent),$root:t=>cr(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>_a(t),$forceUpdate:t=>t.f||(t.f=()=>{Fr(t.update)}),$nextTick:t=>t.n||(t.n=vi.bind(t.proxy)),$watch:t=>md.bind(t)}),Ms=(t,e)=>t!==ue&&!t.__isScriptSetup&&fe(t,e),Yu={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:i,data:s,props:r,accessCache:o,type:l,appContext:a}=t;let u;if(e[0]!=="$"){const v=o[e];if(v!==void 0)switch(v){case 1:return i[e];case 2:return s[e];case 4:return n[e];case 3:return r[e]}else{if(Ms(i,e))return o[e]=1,i[e];if(s!==ue&&fe(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&fe(u,e))return o[e]=3,r[e];if(n!==ue&&fe(n,e))return o[e]=4,n[e];ur&&(o[e]=0)}}const c=Jn[e];let h,p;if(c)return e==="$attrs"&&We(t.attrs,"get",""),c(t);if((h=l.__cssModules)&&(h=h[e]))return h;if(n!==ue&&fe(n,e))return o[e]=4,n[e];if(p=a.config.globalProperties,fe(p,e))return p[e]},set({_:t},e,n){const{data:i,setupState:s,ctx:r}=t;return Ms(s,e)?(s[e]=n,!0):i!==ue&&fe(i,e)?(i[e]=n,!0):fe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:s,propsOptions:r}},o){let l;return!!n[o]||t!==ue&&fe(t,o)||Ms(e,o)||(l=r[0])&&fe(l,o)||fe(i,o)||fe(Jn,o)||fe(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:fe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function xa(){return Gu().slots}function Gu(){const t=Gr();return t.setupContext||(t.setupContext=Ua(t))}function qi(t){return q(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function fn(t,e){return!t||!e?t||e:q(t)&&q(e)?t.concat(e):ze({},qi(t),qi(e))}let ur=!0;function Ju(t){const e=_a(t),n=t.proxy,i=t.ctx;ur=!1,e.beforeCreate&&Ao(e.beforeCreate,t,"bc");const{data:s,computed:r,methods:o,watch:l,provide:a,inject:u,created:c,beforeMount:h,mounted:p,beforeUpdate:v,updated:$,activated:k,deactivated:E,beforeDestroy:N,beforeUnmount:U,destroyed:W,unmounted:C,render:J,renderTracked:Te,renderTriggered:ce,errorCaptured:z,serverPrefetch:X,expose:B,inheritAttrs:pe,components:ne,directives:ge,filters:Je}=e;if(u&&Qu(u,i,null),o)for(const S in o){const b=o[S];Q(b)&&(i[S]=b.bind(n))}if(s){const S=s.call(n,n);Ee(S)&&(t.data=ls(S))}if(ur=!0,r)for(const S in r){const b=r[S],Ie=Q(b)?b.bind(n,n):Q(b.get)?b.get.bind(n,n):yt,Qe=!Q(b)&&Q(b.set)?b.set.bind(n):yt,Le=I({get:Ie,set:Qe});Object.defineProperty(i,S,{enumerable:!0,configurable:!0,get:()=>Le.value,set:Oe=>Le.value=Oe})}if(l)for(const S in l)wa(l[S],i,n,S);if(a){const S=Q(a)?a.call(n):a;Reflect.ownKeys(S).forEach(b=>{nd(b,S[b])})}c&&Ao(c,t,"c");function Z(S,b){q(b)?b.forEach(Ie=>S(Ie.bind(n))):b&&S(b.bind(n))}if(Z(Lu,h),Z(Br,p),Z(ba,v),Z(Bu,$),Z(Mu,k),Z(Nu,E),Z(zu,z),Z(Uu,Te),Z(ju,ce),Z(Vu,U),Z(fs,C),Z(Hu,X),q(B))if(B.length){const S=t.exposed||(t.exposed={});B.forEach(b=>{Object.defineProperty(S,b,{get:()=>n[b],set:Ie=>n[b]=Ie})})}else t.exposed||(t.exposed={});J&&t.render===yt&&(t.render=J),pe!=null&&(t.inheritAttrs=pe),ne&&(t.components=ne),ge&&(t.directives=ge),X&&ga(t)}function Qu(t,e,n=yt){q(t)&&(t=dr(t));for(const i in t){const s=t[i];let r;Ee(s)?"default"in s?r=Qn(s.from||i,s.default,!0):r=Qn(s.from||i):r=Qn(s),Ae(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function Ao(t,e,n){Ot(q(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function wa(t,e,n,i){let s=i.includes(".")?Ma(n,i):()=>n[i];if(Pe(t)){const r=e[t];Q(r)&&Nt(s,r)}else if(Q(t))Nt(s,t.bind(n));else if(Ee(t))if(q(t))t.forEach(r=>wa(r,e,n,i));else{const r=Q(t.handler)?t.handler.bind(n):e[t.handler];Q(r)&&Nt(s,r,t)}}function _a(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,l=r.get(e);let a;return l?a=l:!s.length&&!n&&!i?a=e:(a={},s.length&&s.forEach(u=>Wi(a,u,o,!0)),Wi(a,e,o)),Ee(e)&&r.set(e,a),a}function Wi(t,e,n,i=!1){const{mixins:s,extends:r}=e;r&&Wi(t,r,n,!0),s&&s.forEach(o=>Wi(t,o,n,!0));for(const o in e)if(!(i&&o==="expose")){const l=Xu[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const Xu={data:Po,props:To,emits:To,methods:qn,computed:qn,beforeCreate:Xe,created:Xe,beforeMount:Xe,mounted:Xe,beforeUpdate:Xe,updated:Xe,beforeDestroy:Xe,beforeUnmount:Xe,destroyed:Xe,unmounted:Xe,activated:Xe,deactivated:Xe,errorCaptured:Xe,serverPrefetch:Xe,components:qn,directives:qn,watch:Ku,provide:Po,inject:Zu};function Po(t,e){return e?t?function(){return ze(Q(t)?t.call(this,this):t,Q(e)?e.call(this,this):e)}:e:t}function Zu(t,e){return qn(dr(t),dr(e))}function dr(t){if(q(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Xe(t,e){return t?[...new Set([].concat(t,e))]:e}function qn(t,e){return t?ze(Object.create(null),t,e):e}function To(t,e){return t?q(t)&&q(e)?[...new Set([...t,...e])]:ze(Object.create(null),qi(t),qi(e??{})):e}function Ku(t,e){if(!t)return e;if(!e)return t;const n=ze(Object.create(null),t);for(const i in e)n[i]=Xe(t[i],e[i]);return n}function Ca(){return{app:null,config:{isNativeTag:Bc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ed=0;function td(t,e){return function(i,s=null){Q(i)||(i=ze({},i)),s!=null&&!Ee(s)&&(s=null);const r=Ca(),o=new WeakSet,l=[];let a=!1;const u=r.app={_uid:ed++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:Md,get config(){return r.config},set config(c){},use(c,...h){return o.has(c)||(c&&Q(c.install)?(o.add(c),c.install(u,...h)):Q(c)&&(o.add(c),c(u,...h))),u},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),u},component(c,h){return h?(r.components[c]=h,u):r.components[c]},directive(c,h){return h?(r.directives[c]=h,u):r.directives[c]},mount(c,h,p){if(!a){const v=u._ceVNode||se(i,s);return v.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),t(v,c,p),a=!0,u._container=c,c.__vue_app__=u,vs(v.component)}},onUnmount(c){l.push(c)},unmount(){a&&(Ot(l,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,h){return r.provides[c]=h,u},runWithContext(c){const h=dn;dn=u;try{return c()}finally{dn=h}}};return u}}let dn=null;function nd(t,e){if(Ve){let n=Ve.provides;const i=Ve.parent&&Ve.parent.provides;i===n&&(n=Ve.provides=Object.create(i)),n[t]=e}}function Qn(t,e,n=!1){const i=Ve||Fe;if(i||dn){const s=dn?dn._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Q(e)?e.call(i&&i.proxy):e}}function id(){return!!(Ve||Fe||dn)}const ka={},Ea=()=>Object.create(ka),$a=t=>Object.getPrototypeOf(t)===ka;function sd(t,e,n,i=!1){const s={},r=Ea();t.propsDefaults=Object.create(null),Ia(t,e,s,r);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=i?s:la(s):t.type.props?t.props=s:t.props=r,t.attrs=r}function rd(t,e,n,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=t,l=oe(s),[a]=t.propsOptions;let u=!1;if((i||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let h=0;h<c.length;h++){let p=c[h];if(ps(t.emitsOptions,p))continue;const v=e[p];if(a)if(fe(r,p))v!==r[p]&&(r[p]=v,u=!0);else{const $=ut(p);s[$]=fr(a,l,$,v,t,!1)}else v!==r[p]&&(r[p]=v,u=!0)}}}else{Ia(t,e,s,r)&&(u=!0);let c;for(const h in l)(!e||!fe(e,h)&&((c=Ut(h))===h||!fe(e,c)))&&(a?n&&(n[h]!==void 0||n[c]!==void 0)&&(s[h]=fr(a,l,h,void 0,t,!0)):delete s[h]);if(r!==l)for(const h in r)(!e||!fe(e,h))&&(delete r[h],u=!0)}u&&Dt(t.attrs,"set","")}function Ia(t,e,n,i){const[s,r]=t.propsOptions;let o=!1,l;if(e)for(let a in e){if(Wn(a))continue;const u=e[a];let c;s&&fe(s,c=ut(a))?!r||!r.includes(c)?n[c]=u:(l||(l={}))[c]=u:ps(t.emitsOptions,a)||(!(a in i)||u!==i[a])&&(i[a]=u,o=!0)}if(r){const a=oe(n),u=l||ue;for(let c=0;c<r.length;c++){const h=r[c];n[h]=fr(s,a,h,u[h],t,!fe(u,h))}}return o}function fr(t,e,n,i,s,r){const o=t[n];if(o!=null){const l=fe(o,"default");if(l&&i===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&Q(a)){const{propsDefaults:u}=s;if(n in u)i=u[n];else{const c=bi(s);i=u[n]=a.call(null,e),c()}}else i=a;s.ce&&s.ce._setProp(n,i)}o[0]&&(r&&!l?i=!1:o[1]&&(i===""||i===Ut(n))&&(i=!0))}return i}const od=new WeakMap;function Oa(t,e,n=!1){const i=n?od:e.propsCache,s=i.get(t);if(s)return s;const r=t.props,o={},l=[];let a=!1;if(!Q(t)){const c=h=>{a=!0;const[p,v]=Oa(h,e,!0);ze(o,p),v&&l.push(...v)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!r&&!a)return Ee(t)&&i.set(t,Sn),Sn;if(q(r))for(let c=0;c<r.length;c++){const h=ut(r[c]);Do(h)&&(o[h]=ue)}else if(r)for(const c in r){const h=ut(c);if(Do(h)){const p=r[c],v=o[h]=q(p)||Q(p)?{type:p}:ze({},p),$=v.type;let k=!1,E=!0;if(q($))for(let N=0;N<$.length;++N){const U=$[N],W=Q(U)&&U.name;if(W==="Boolean"){k=!0;break}else W==="String"&&(E=!1)}else k=Q($)&&$.name==="Boolean";v[0]=k,v[1]=E,(k||fe(v,"default"))&&l.push(h)}}const u=[o,l];return Ee(t)&&i.set(t,u),u}function Do(t){return t[0]!=="$"&&!Wn(t)}const Ur=t=>t[0]==="_"||t==="$stable",zr=t=>q(t)?t.map(It):[It(t)],ld=(t,e,n)=>{if(e._n)return e;const i=Me((...s)=>zr(e(...s)),n);return i._c=!1,i},Ra=(t,e,n)=>{const i=t._ctx;for(const s in t){if(Ur(s))continue;const r=t[s];if(Q(r))e[s]=ld(s,r,i);else if(r!=null){const o=zr(r);e[s]=()=>o}}},Aa=(t,e)=>{const n=zr(e);t.slots.default=()=>n},Pa=(t,e,n)=>{for(const i in e)(n||!Ur(i))&&(t[i]=e[i])},ad=(t,e,n)=>{const i=t.slots=Ea();if(t.vnode.shapeFlag&32){const s=e._;s?(Pa(i,e,n),n&&Vl(i,"_",s,!0)):Ra(e,i)}else e&&Aa(t,e)},cd=(t,e,n)=>{const{vnode:i,slots:s}=t;let r=!0,o=ue;if(i.shapeFlag&32){const l=e._;l?n&&l===1?r=!1:Pa(s,e,n):(r=!e.$stable,Ra(e,s)),o=e}else e&&(Aa(t,e),o={default:1});if(r)for(const l in s)!Ur(l)&&o[l]==null&&delete s[l]},ot=_d;function ud(t){return dd(t)}function dd(t,e){const n=is();n.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:l,createComment:a,setText:u,setElementText:c,parentNode:h,nextSibling:p,setScopeId:v=yt,insertStaticContent:$}=t,k=(d,f,g,w=null,y=null,x=null,T=void 0,A=null,O=!!f.dynamicChildren)=>{if(d===f)return;d&&!Ln(d,f)&&(w=ee(d),Oe(d,y,x,!0),d=null),f.patchFlag===-2&&(O=!1,f.dynamicChildren=null);const{type:_,ref:H,shapeFlag:D}=f;switch(_){case gs:E(d,f,g,w);break;case Ht:N(d,f,g,w);break;case Ri:d==null&&U(f,g,w,T);break;case le:ne(d,f,g,w,y,x,T,A,O);break;default:D&1?J(d,f,g,w,y,x,T,A,O):D&6?ge(d,f,g,w,y,x,T,A,O):(D&64||D&128)&&_.process(d,f,g,w,y,x,T,A,O,Gt)}H!=null&&y&&zi(H,d&&d.ref,x,f||d,!f)},E=(d,f,g,w)=>{if(d==null)i(f.el=l(f.children),g,w);else{const y=f.el=d.el;f.children!==d.children&&u(y,f.children)}},N=(d,f,g,w)=>{d==null?i(f.el=a(f.children||""),g,w):f.el=d.el},U=(d,f,g,w)=>{[d.el,d.anchor]=$(d.children,f,g,w,d.el,d.anchor)},W=({el:d,anchor:f},g,w)=>{let y;for(;d&&d!==f;)y=p(d),i(d,g,w),d=y;i(f,g,w)},C=({el:d,anchor:f})=>{let g;for(;d&&d!==f;)g=p(d),s(d),d=g;s(f)},J=(d,f,g,w,y,x,T,A,O)=>{f.type==="svg"?T="svg":f.type==="math"&&(T="mathml"),d==null?Te(f,g,w,y,x,T,A,O):X(d,f,y,x,T,A,O)},Te=(d,f,g,w,y,x,T,A)=>{let O,_;const{props:H,shapeFlag:D,transition:V,dirs:Y}=d;if(O=d.el=o(d.type,x,H&&H.is,H),D&8?c(O,d.children):D&16&&z(d.children,O,null,w,y,Ns(d,x),T,A),Y&&on(d,null,w,"created"),ce(O,d,d.scopeId,T,w),H){for(const be in H)be!=="value"&&!Wn(be)&&r(O,be,null,H[be],x,w);"value"in H&&r(O,"value",null,H.value,x),(_=H.onVnodeBeforeMount)&&Et(_,w,d)}Y&&on(d,null,w,"beforeMount");const te=fd(y,V);te&&V.beforeEnter(O),i(O,f,g),((_=H&&H.onVnodeMounted)||te||Y)&&ot(()=>{_&&Et(_,w,d),te&&V.enter(O),Y&&on(d,null,w,"mounted")},y)},ce=(d,f,g,w,y)=>{if(g&&v(d,g),w)for(let x=0;x<w.length;x++)v(d,w[x]);if(y){let x=y.subTree;if(f===x||La(x.type)&&(x.ssContent===f||x.ssFallback===f)){const T=y.vnode;ce(d,T,T.scopeId,T.slotScopeIds,y.parent)}}},z=(d,f,g,w,y,x,T,A,O=0)=>{for(let _=O;_<d.length;_++){const H=d[_]=A?Zt(d[_]):It(d[_]);k(null,H,f,g,w,y,x,T,A)}},X=(d,f,g,w,y,x,T)=>{const A=f.el=d.el;let{patchFlag:O,dynamicChildren:_,dirs:H}=f;O|=d.patchFlag&16;const D=d.props||ue,V=f.props||ue;let Y;if(g&&ln(g,!1),(Y=V.onVnodeBeforeUpdate)&&Et(Y,g,f,d),H&&on(f,d,g,"beforeUpdate"),g&&ln(g,!0),(D.innerHTML&&V.innerHTML==null||D.textContent&&V.textContent==null)&&c(A,""),_?B(d.dynamicChildren,_,A,g,w,Ns(f,y),x):T||b(d,f,A,null,g,w,Ns(f,y),x,!1),O>0){if(O&16)pe(A,D,V,g,y);else if(O&2&&D.class!==V.class&&r(A,"class",null,V.class,y),O&4&&r(A,"style",D.style,V.style,y),O&8){const te=f.dynamicProps;for(let be=0;be<te.length;be++){const ve=te[be],st=D[ve],tt=V[ve];(tt!==st||ve==="value")&&r(A,ve,st,tt,y,g)}}O&1&&d.children!==f.children&&c(A,f.children)}else!T&&_==null&&pe(A,D,V,g,y);((Y=V.onVnodeUpdated)||H)&&ot(()=>{Y&&Et(Y,g,f,d),H&&on(f,d,g,"updated")},w)},B=(d,f,g,w,y,x,T)=>{for(let A=0;A<f.length;A++){const O=d[A],_=f[A],H=O.el&&(O.type===le||!Ln(O,_)||O.shapeFlag&70)?h(O.el):g;k(O,_,H,null,w,y,x,T,!0)}},pe=(d,f,g,w,y)=>{if(f!==g){if(f!==ue)for(const x in f)!Wn(x)&&!(x in g)&&r(d,x,f[x],null,y,w);for(const x in g){if(Wn(x))continue;const T=g[x],A=f[x];T!==A&&x!=="value"&&r(d,x,A,T,y,w)}"value"in g&&r(d,"value",f.value,g.value,y)}},ne=(d,f,g,w,y,x,T,A,O)=>{const _=f.el=d?d.el:l(""),H=f.anchor=d?d.anchor:l("");let{patchFlag:D,dynamicChildren:V,slotScopeIds:Y}=f;Y&&(A=A?A.concat(Y):Y),d==null?(i(_,g,w),i(H,g,w),z(f.children||[],g,H,y,x,T,A,O)):D>0&&D&64&&V&&d.dynamicChildren?(B(d.dynamicChildren,V,g,y,x,T,A),(f.key!=null||y&&f===y.subTree)&&Ta(d,f,!0)):b(d,f,g,H,y,x,T,A,O)},ge=(d,f,g,w,y,x,T,A,O)=>{f.slotScopeIds=A,d==null?f.shapeFlag&512?y.ctx.activate(f,g,w,T,O):Je(f,g,w,y,x,T,O):dt(d,f,O)},Je=(d,f,g,w,y,x,T)=>{const A=d.component=Od(d,w,y);if(va(d)&&(A.ctx.renderer=Gt),Rd(A,!1,T),A.asyncDep){if(y&&y.registerDep(A,Z,T),!d.el){const O=A.subTree=se(Ht);N(null,O,f,g)}}else Z(A,d,f,g,y,x,T)},dt=(d,f,g)=>{const w=f.component=d.component;if(xd(d,f,g))if(w.asyncDep&&!w.asyncResolved){S(w,f,g);return}else w.next=f,w.update();else f.el=d.el,w.vnode=f},Z=(d,f,g,w,y,x,T)=>{const A=()=>{if(d.isMounted){let{next:D,bu:V,u:Y,parent:te,vnode:be}=d;{const Ct=Da(d);if(Ct){D&&(D.el=be.el,S(d,D,T)),Ct.asyncDep.then(()=>{d.isUnmounted||A()});return}}let ve=D,st;ln(d,!1),D?(D.el=be.el,S(d,D,T)):D=be,V&&Oi(V),(st=D.props&&D.props.onVnodeBeforeUpdate)&&Et(st,te,D,be),ln(d,!0);const tt=No(d),_t=d.subTree;d.subTree=tt,k(_t,tt,h(_t.el),ee(_t),d,y,x),D.el=tt.el,ve===null&&wd(d,tt.el),Y&&ot(Y,y),(st=D.props&&D.props.onVnodeUpdated)&&ot(()=>Et(st,te,D,be),y)}else{let D;const{el:V,props:Y}=f,{bm:te,m:be,parent:ve,root:st,type:tt}=d,_t=_n(f);ln(d,!1),te&&Oi(te),!_t&&(D=Y&&Y.onVnodeBeforeMount)&&Et(D,ve,f),ln(d,!0);{st.ce&&st.ce._injectChildStyle(tt);const Ct=d.subTree=No(d);k(null,Ct,g,w,d,y,x),f.el=Ct.el}if(be&&ot(be,y),!_t&&(D=Y&&Y.onVnodeMounted)){const Ct=f;ot(()=>Et(D,ve,Ct),y)}(f.shapeFlag&256||ve&&_n(ve.vnode)&&ve.vnode.shapeFlag&256)&&d.a&&ot(d.a,y),d.isMounted=!0,f=g=w=null}};d.scope.on();const O=d.effect=new Yl(A);d.scope.off();const _=d.update=O.run.bind(O),H=d.job=O.runIfDirty.bind(O);H.i=d,H.id=d.uid,O.scheduler=()=>Fr(H),ln(d,!0),_()},S=(d,f,g)=>{f.component=d;const w=d.vnode.props;d.vnode=f,d.next=null,rd(d,f.props,w,g),cd(d,f.children,g),Bt(),Io(d),Vt()},b=(d,f,g,w,y,x,T,A,O=!1)=>{const _=d&&d.children,H=d?d.shapeFlag:0,D=f.children,{patchFlag:V,shapeFlag:Y}=f;if(V>0){if(V&128){Qe(_,D,g,w,y,x,T,A,O);return}else if(V&256){Ie(_,D,g,w,y,x,T,A,O);return}}Y&8?(H&16&&ie(_,y,x),D!==_&&c(g,D)):H&16?Y&16?Qe(_,D,g,w,y,x,T,A,O):ie(_,y,x,!0):(H&8&&c(g,""),Y&16&&z(D,g,w,y,x,T,A,O))},Ie=(d,f,g,w,y,x,T,A,O)=>{d=d||Sn,f=f||Sn;const _=d.length,H=f.length,D=Math.min(_,H);let V;for(V=0;V<D;V++){const Y=f[V]=O?Zt(f[V]):It(f[V]);k(d[V],Y,g,null,y,x,T,A,O)}_>H?ie(d,y,x,!0,!1,D):z(f,g,w,y,x,T,A,O,D)},Qe=(d,f,g,w,y,x,T,A,O)=>{let _=0;const H=f.length;let D=d.length-1,V=H-1;for(;_<=D&&_<=V;){const Y=d[_],te=f[_]=O?Zt(f[_]):It(f[_]);if(Ln(Y,te))k(Y,te,g,null,y,x,T,A,O);else break;_++}for(;_<=D&&_<=V;){const Y=d[D],te=f[V]=O?Zt(f[V]):It(f[V]);if(Ln(Y,te))k(Y,te,g,null,y,x,T,A,O);else break;D--,V--}if(_>D){if(_<=V){const Y=V+1,te=Y<H?f[Y].el:w;for(;_<=V;)k(null,f[_]=O?Zt(f[_]):It(f[_]),g,te,y,x,T,A,O),_++}}else if(_>V)for(;_<=D;)Oe(d[_],y,x,!0),_++;else{const Y=_,te=_,be=new Map;for(_=te;_<=V;_++){const rt=f[_]=O?Zt(f[_]):It(f[_]);rt.key!=null&&be.set(rt.key,_)}let ve,st=0;const tt=V-te+1;let _t=!1,Ct=0;const Mn=new Array(tt);for(_=0;_<tt;_++)Mn[_]=0;for(_=Y;_<=D;_++){const rt=d[_];if(st>=tt){Oe(rt,y,x,!0);continue}let kt;if(rt.key!=null)kt=be.get(rt.key);else for(ve=te;ve<=V;ve++)if(Mn[ve-te]===0&&Ln(rt,f[ve])){kt=ve;break}kt===void 0?Oe(rt,y,x,!0):(Mn[kt-te]=_+1,kt>=Ct?Ct=kt:_t=!0,k(rt,f[kt],g,null,y,x,T,A,O),st++)}const _o=_t?hd(Mn):Sn;for(ve=_o.length-1,_=tt-1;_>=0;_--){const rt=te+_,kt=f[rt],Co=rt+1<H?f[rt+1].el:w;Mn[_]===0?k(null,kt,g,Co,y,x,T,A,O):_t&&(ve<0||_!==_o[ve]?Le(kt,g,Co,2):ve--)}}},Le=(d,f,g,w,y=null)=>{const{el:x,type:T,transition:A,children:O,shapeFlag:_}=d;if(_&6){Le(d.component.subTree,f,g,w);return}if(_&128){d.suspense.move(f,g,w);return}if(_&64){T.move(d,f,g,Gt);return}if(T===le){i(x,f,g);for(let D=0;D<O.length;D++)Le(O[D],f,g,w);i(d.anchor,f,g);return}if(T===Ri){W(d,f,g);return}if(w!==2&&_&1&&A)if(w===0)A.beforeEnter(x),i(x,f,g),ot(()=>A.enter(x),y);else{const{leave:D,delayLeave:V,afterLeave:Y}=A,te=()=>{d.ctx.isUnmounted?s(x):i(x,f,g)},be=()=>{D(x,()=>{te(),Y&&Y()})};V?V(x,te,be):be()}else i(x,f,g)},Oe=(d,f,g,w=!1,y=!1)=>{const{type:x,props:T,ref:A,children:O,dynamicChildren:_,shapeFlag:H,patchFlag:D,dirs:V,cacheIndex:Y}=d;if(D===-2&&(y=!1),A!=null&&(Bt(),zi(A,null,g,d,!0),Vt()),Y!=null&&(f.renderCache[Y]=void 0),H&256){f.ctx.deactivate(d);return}const te=H&1&&V,be=!_n(d);let ve;if(be&&(ve=T&&T.onVnodeBeforeUnmount)&&Et(ve,f,d),H&6)G(d.component,g,w);else{if(H&128){d.suspense.unmount(g,w);return}te&&on(d,null,f,"beforeUnmount"),H&64?d.type.remove(d,f,g,Gt,w):_&&!_.hasOnce&&(x!==le||D>0&&D&64)?ie(_,f,g,!1,!0):(x===le&&D&384||!y&&H&16)&&ie(O,f,g),w&&yi(d)}(be&&(ve=T&&T.onVnodeUnmounted)||te)&&ot(()=>{ve&&Et(ve,f,d),te&&on(d,null,f,"unmounted")},g)},yi=d=>{const{type:f,el:g,anchor:w,transition:y}=d;if(f===le){ft(g,w);return}if(f===Ri){C(d);return}const x=()=>{s(g),y&&!y.persisted&&y.afterLeave&&y.afterLeave()};if(d.shapeFlag&1&&y&&!y.persisted){const{leave:T,delayLeave:A}=y,O=()=>T(g,x);A?A(d.el,x,O):O()}else x()},ft=(d,f)=>{let g;for(;d!==f;)g=p(d),s(d),d=g;s(f)},G=(d,f,g)=>{const{bum:w,scope:y,job:x,subTree:T,um:A,m:O,a:_,parent:H,slots:{__:D}}=d;Mo(O),Mo(_),w&&Oi(w),H&&q(D)&&D.forEach(V=>{H.renderCache[V]=void 0}),y.stop(),x&&(x.flags|=8,Oe(T,d,f,g)),A&&ot(A,f),ot(()=>{d.isUnmounted=!0},f),f&&f.pendingBranch&&!f.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===f.pendingId&&(f.deps--,f.deps===0&&f.resolve())},ie=(d,f,g,w=!1,y=!1,x=0)=>{for(let T=x;T<d.length;T++)Oe(d[T],f,g,w,y)},ee=d=>{if(d.shapeFlag&6)return ee(d.component.subTree);if(d.shapeFlag&128)return d.suspense.next();const f=p(d.anchor||d.el),g=f&&f[Tu];return g?p(g):f};let Ce=!1;const Yt=(d,f,g)=>{d==null?f._vnode&&Oe(f._vnode,null,null,!0):k(f._vnode||null,d,f,null,null,null,g),f._vnode=d,Ce||(Ce=!0,Io(),ha(),Ce=!1)},Gt={p:k,um:Oe,m:Le,r:yi,mt:Je,mc:z,pc:b,pbc:B,n:ee,o:t};return{render:Yt,hydrate:void 0,createApp:td(Yt)}}function Ns({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ln({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function fd(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Ta(t,e,n=!1){const i=t.children,s=e.children;if(q(i)&&q(s))for(let r=0;r<i.length;r++){const o=i[r];let l=s[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[r]=Zt(s[r]),l.el=o.el),!n&&l.patchFlag!==-2&&Ta(o,l)),l.type===gs&&(l.el=o.el),l.type===Ht&&!l.el&&(l.el=o.el)}}function hd(t){const e=t.slice(),n=[0];let i,s,r,o,l;const a=t.length;for(i=0;i<a;i++){const u=t[i];if(u!==0){if(s=n[n.length-1],t[s]<u){e[i]=s,n.push(i);continue}for(r=0,o=n.length-1;r<o;)l=r+o>>1,t[n[l]]<u?r=l+1:o=l;u<t[n[r]]&&(r>0&&(e[i]=n[r-1]),n[r]=i)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}function Da(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Da(e)}function Mo(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const pd=Symbol.for("v-scx"),gd=()=>Qn(pd);function vd(t,e){return qr(t,null,{flush:"sync"})}function Nt(t,e,n){return qr(t,e,n)}function qr(t,e,n=ue){const{immediate:i,deep:s,flush:r,once:o}=n,l=ze({},n),a=e&&i||!e&&r!=="post";let u;if(ci){if(r==="sync"){const v=gd();u=v.__watcherHandles||(v.__watcherHandles=[])}else if(!a){const v=()=>{};return v.stop=yt,v.resume=yt,v.pause=yt,v}}const c=Ve;l.call=(v,$,k)=>Ot(v,c,$,k);let h=!1;r==="post"?l.scheduler=v=>{ot(v,c&&c.suspense)}:r!=="sync"&&(h=!0,l.scheduler=(v,$)=>{$?v():Fr(v)}),l.augmentJob=v=>{e&&(v.flags|=4),h&&(v.flags|=2,c&&(v.id=c.uid,v.i=c))};const p=$u(t,e,l);return ci&&(u?u.push(p):a&&p()),p}function md(t,e,n){const i=this.proxy,s=Pe(t)?t.includes(".")?Ma(i,t):()=>i[t]:t.bind(i,i);let r;Q(e)?r=e:(r=e.handler,n=e);const o=bi(this),l=qr(s,r.bind(i),n);return o(),l}function Ma(t,e){const n=e.split(".");return()=>{let i=t;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}function hs(t,e,n=ue){const i=Gr(),s=ut(e),r=Ut(e),o=Na(t,s),l=Su((a,u)=>{let c,h=ue,p;return vd(()=>{const v=t[s];nt(c,v)&&(c=v,u())}),{get(){return a(),n.get?n.get(c):c},set(v){const $=n.set?n.set(v):v;if(!nt($,c)&&!(h!==ue&&nt(v,h)))return;const k=i.vnode.props;k&&(e in k||s in k||r in k)&&(`onUpdate:${e}`in k||`onUpdate:${s}`in k||`onUpdate:${r}`in k)||(c=v,u()),i.emit(`update:${e}`,$),nt(v,$)&&nt(v,h)&&!nt($,p)&&u(),h=v,p=$}}});return l[Symbol.iterator]=()=>{let a=0;return{next(){return a<2?{value:a++?o||ue:l,done:!1}:{done:!0}}}},l}const Na=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${ut(e)}Modifiers`]||t[`${Ut(e)}Modifiers`];function bd(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||ue;let s=n;const r=e.startsWith("update:"),o=r&&Na(i,e.slice(7));o&&(o.trim&&(s=n.map(c=>Pe(c)?c.trim():c)),o.number&&(s=n.map(rr)));let l,a=i[l=Ii(e)]||i[l=Ii(ut(e))];!a&&r&&(a=i[l=Ii(Ut(e))]),a&&Ot(a,t,6,s);const u=i[l+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Ot(u,t,6,s)}}function Fa(t,e,n=!1){const i=e.emitsCache,s=i.get(t);if(s!==void 0)return s;const r=t.emits;let o={},l=!1;if(!Q(t)){const a=u=>{const c=Fa(u,e,!0);c&&(l=!0,ze(o,c))};!n&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!r&&!l?(Ee(t)&&i.set(t,null),null):(q(r)?r.forEach(a=>o[a]=null):ze(o,r),Ee(t)&&i.set(t,o),o)}function ps(t,e){return!t||!Ki(e)?!1:(e=e.slice(2).replace(/Once$/,""),fe(t,e[0].toLowerCase()+e.slice(1))||fe(t,Ut(e))||fe(t,e))}function No(t){const{type:e,vnode:n,proxy:i,withProxy:s,propsOptions:[r],slots:o,attrs:l,emit:a,render:u,renderCache:c,props:h,data:p,setupState:v,ctx:$,inheritAttrs:k}=t,E=Ui(t);let N,U;try{if(n.shapeFlag&4){const C=s||i,J=C;N=It(u.call(J,C,c,h,v,p,$)),U=l}else{const C=e;N=It(C.length>1?C(h,{attrs:l,slots:o,emit:a}):C(h,null)),U=e.props?l:yd(l)}}catch(C){Xn.length=0,cs(C,t,1),N=se(Ht)}let W=N;if(U&&k!==!1){const C=Object.keys(U),{shapeFlag:J}=W;C.length&&J&7&&(r&&C.some(Ir)&&(U=Sd(U,r)),W=$n(W,U,!1,!0))}return n.dirs&&(W=$n(W,null,!1,!0),W.dirs=W.dirs?W.dirs.concat(n.dirs):n.dirs),n.transition&&Lr(W,n.transition),N=W,Ui(E),N}const yd=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ki(n))&&((e||(e={}))[n]=t[n]);return e},Sd=(t,e)=>{const n={};for(const i in t)(!Ir(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function xd(t,e,n){const{props:i,children:s,component:r}=t,{props:o,children:l,patchFlag:a}=e,u=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return i?Fo(i,o,u):!!o;if(a&8){const c=e.dynamicProps;for(let h=0;h<c.length;h++){const p=c[h];if(o[p]!==i[p]&&!ps(u,p))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:i===o?!1:i?o?Fo(i,o,u):!0:!!o;return!1}function Fo(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(e[r]!==t[r]&&!ps(n,r))return!0}return!1}function wd({vnode:t,parent:e},n){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=n,e=e.parent;else break}}const La=t=>t.__isSuspense;function _d(t,e){e&&e.pendingBranch?q(t)?e.effects.push(...t):e.effects.push(t):fa(t)}const le=Symbol.for("v-fgt"),gs=Symbol.for("v-txt"),Ht=Symbol.for("v-cmt"),Ri=Symbol.for("v-stc"),Xn=[];let at=null;function m(t=!1){Xn.push(at=t?null:[])}function Cd(){Xn.pop(),at=Xn[Xn.length-1]||null}let ai=1;function Lo(t,e=!1){ai+=t,t<0&&at&&e&&(at.hasOnce=!0)}function Ba(t){return t.dynamicChildren=ai>0?at||Sn:null,Cd(),ai>0&&at&&at.push(t),t}function R(t,e,n,i,s,r){return Ba(M(t,e,n,i,s,r,!0))}function we(t,e,n,i,s){return Ba(se(t,e,n,i,s,!0))}function Wr(t){return t?t.__v_isVNode===!0:!1}function Ln(t,e){return t.type===e.type&&t.key===e.key}const Va=({key:t})=>t??null,Ai=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Pe(t)||Ae(t)||Q(t)?{i:Fe,r:t,k:e,f:!!n}:t:null);function M(t,e=null,n=null,i=0,s=null,r=t===le?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Va(e),ref:e&&Ai(e),scopeId:us,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Fe};return l?(Yr(a,n),r&128&&t.normalize(a)):n&&(a.shapeFlag|=Pe(n)?8:16),ai>0&&!o&&at&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&at.push(a),a}const se=kd;function kd(t,e=null,n=null,i=0,s=null,r=!1){if((!t||t===ya)&&(t=Ht),Wr(t)){const l=$n(t,e,!0);return n&&Yr(l,n),ai>0&&!r&&at&&(l.shapeFlag&6?at[at.indexOf(t)]=l:at.push(l)),l.patchFlag=-2,l}if(Dd(t)&&(t=t.__vccOpts),e){e=Ed(e);let{class:l,style:a}=e;l&&!Pe(l)&&(e.class=De(l)),Ee(a)&&(Nr(a)&&!q(a)&&(a=ze({},a)),e.style=ss(a))}const o=Pe(t)?1:La(t)?128:Du(t)?64:Ee(t)?4:Q(t)?2:0;return M(t,e,n,i,s,o,r,!0)}function Ed(t){return t?Nr(t)||$a(t)?ze({},t):t:null}function $n(t,e,n=!1,i=!1){const{props:s,ref:r,patchFlag:o,children:l,transition:a}=t,u=e?In(s||{},e):s,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Va(u),ref:e&&e.ref?n&&r?q(r)?r.concat(Ai(e)):[r,Ai(e)]:Ai(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==le?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&$n(t.ssContent),ssFallback:t.ssFallback&&$n(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&i&&Lr(c,a.clone(c)),c}function ye(t=" ",e=0){return se(gs,null,t,e)}function K(t="",e=!1){return e?(m(),we(Ht,null,t)):se(Ht,null,t)}function It(t){return t==null||typeof t=="boolean"?se(Ht):q(t)?se(le,null,t.slice()):Wr(t)?Zt(t):se(gs,null,String(t))}function Zt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:$n(t)}function Yr(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(q(e))n=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),Yr(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!$a(e)?e._ctx=Fe:s===3&&Fe&&(Fe.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Q(e)?(e={default:e,_ctx:Fe},n=32):(e=String(e),i&64?(n=16,e=[ye(e)]):n=8);t.children=e,t.shapeFlag|=n}function In(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=De([e.class,i.class]));else if(s==="style")e.style=ss([e.style,i.style]);else if(Ki(s)){const r=e[s],o=i[s];o&&r!==o&&!(q(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=i[s])}return e}function Et(t,e,n,i=null){Ot(t,e,7,[n,i])}const $d=Ca();let Id=0;function Od(t,e,n){const i=t.type,s=(e?e.appContext:t.appContext)||$d,r={uid:Id++,vnode:t,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new zl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Oa(i,s),emitsOptions:Fa(i,s),emit:null,emitted:null,propsDefaults:ue,inheritAttrs:i.inheritAttrs,ctx:ue,data:ue,props:ue,attrs:ue,slots:ue,refs:ue,setupState:ue,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=bd.bind(null,r),t.ce&&t.ce(r),r}let Ve=null;const Gr=()=>Ve||Fe;let Yi,hr;{const t=is(),e=(n,i)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(i),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};Yi=e("__VUE_INSTANCE_SETTERS__",n=>Ve=n),hr=e("__VUE_SSR_SETTERS__",n=>ci=n)}const bi=t=>{const e=Ve;return Yi(t),t.scope.on(),()=>{t.scope.off(),Yi(e)}},Bo=()=>{Ve&&Ve.scope.off(),Yi(null)};function Ha(t){return t.vnode.shapeFlag&4}let ci=!1;function Rd(t,e=!1,n=!1){e&&hr(e);const{props:i,children:s}=t.vnode,r=Ha(t);sd(t,i,r,e),ad(t,s,n||e);const o=r?Ad(t,e):void 0;return e&&hr(!1),o}function Ad(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Yu);const{setup:i}=n;if(i){Bt();const s=t.setupContext=i.length>1?Ua(t):null,r=bi(t),o=gi(i,t,0,[t.props,s]),l=Fl(o);if(Vt(),r(),(l||t.sp)&&!_n(t)&&ga(t),l){if(o.then(Bo,Bo),e)return o.then(a=>{Vo(t,a)}).catch(a=>{cs(a,t,0)});t.asyncDep=o}else Vo(t,o)}else ja(t)}function Vo(t,e,n){Q(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ee(e)&&(t.setupState=ca(e)),ja(t)}function ja(t,e,n){const i=t.type;t.render||(t.render=i.render||yt);{const s=bi(t);Bt();try{Ju(t)}finally{Vt(),s()}}}const Pd={get(t,e){return We(t,"get",""),t[e]}};function Ua(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Pd),slots:t.slots,emit:t.emit,expose:e}}function vs(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(ca(as(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Jn)return Jn[n](t)},has(e,n){return n in e||n in Jn}})):t.proxy}function Td(t,e=!0){return Q(t)?t.displayName||t.name:t.name||e&&t.__name}function Dd(t){return Q(t)&&"__vccOpts"in t}const I=(t,e)=>ku(t,e,ci),Md="3.5.14";/**
* @vue/runtime-dom v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let pr;const Ho=typeof window<"u"&&window.trustedTypes;if(Ho)try{pr=Ho.createPolicy("vue",{createHTML:t=>t})}catch{}const za=pr?t=>pr.createHTML(t):t=>t,Nd="http://www.w3.org/2000/svg",Fd="http://www.w3.org/1998/Math/MathML",Tt=typeof document<"u"?document:null,jo=Tt&&Tt.createElement("template"),Ld={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const s=e==="svg"?Tt.createElementNS(Nd,t):e==="mathml"?Tt.createElementNS(Fd,t):n?Tt.createElement(t,{is:n}):Tt.createElement(t);return t==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:t=>Tt.createTextNode(t),createComment:t=>Tt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Tt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,s,r){const o=n?n.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{jo.innerHTML=za(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const l=jo.content;if(i==="svg"||i==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Bd=Symbol("_vtc");function Vd(t,e,n){const i=t[Bd];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Gi=Symbol("_vod"),qa=Symbol("_vsh"),Jr={beforeMount(t,{value:e},{transition:n}){t[Gi]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Bn(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:i}){!e!=!n&&(i?e?(i.beforeEnter(t),Bn(t,!0),i.enter(t)):i.leave(t,()=>{Bn(t,!1)}):Bn(t,e))},beforeUnmount(t,{value:e}){Bn(t,e)}};function Bn(t,e){t.style.display=e?t[Gi]:"none",t[qa]=!e}const Wa=Symbol("");function Ya(t){const e=Gr();if(!e)return;const n=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(r=>Ji(r,s))},i=()=>{const s=t(e.proxy);e.ce?Ji(e.ce,s):gr(e.subTree,s),n(s)};ba(()=>{fa(i)}),Br(()=>{Nt(i,yt,{flush:"post"});const s=new MutationObserver(i);s.observe(e.subTree.el.parentNode,{childList:!0}),fs(()=>s.disconnect())})}function gr(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{gr(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)Ji(t.el,e);else if(t.type===le)t.children.forEach(n=>gr(n,e));else if(t.type===Ri){let{el:n,anchor:i}=t;for(;n&&(Ji(n,e),n!==i);)n=n.nextSibling}}function Ji(t,e){if(t.nodeType===1){const n=t.style;let i="";for(const s in e)n.setProperty(`--${s}`,e[s]),i+=`--${s}: ${e[s]};`;n[Wa]=i}}const Hd=/(^|;)\s*display\s*:/;function jd(t,e,n){const i=t.style,s=Pe(n);let r=!1;if(n&&!s){if(e)if(Pe(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Pi(i,l,"")}else for(const o in e)n[o]==null&&Pi(i,o,"");for(const o in n)o==="display"&&(r=!0),Pi(i,o,n[o])}else if(s){if(e!==n){const o=i[Wa];o&&(n+=";"+o),i.cssText=n,r=Hd.test(n)}}else e&&t.removeAttribute("style");Gi in t&&(t[Gi]=r?i.display:"",t[qa]&&(i.display="none"))}const Uo=/\s*!important$/;function Pi(t,e,n){if(q(n))n.forEach(i=>Pi(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=Ud(t,e);Uo.test(n)?t.setProperty(Ut(i),n.replace(Uo,""),"important"):t[i]=n}}const zo=["Webkit","Moz","ms"],Fs={};function Ud(t,e){const n=Fs[e];if(n)return n;let i=ut(e);if(i!=="filter"&&i in t)return Fs[e]=i;i=ns(i);for(let s=0;s<zo.length;s++){const r=zo[s]+i;if(r in t)return Fs[e]=r}return e}const qo="http://www.w3.org/1999/xlink";function Wo(t,e,n,i,s,r=Jc(e)){i&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(qo,e.slice(6,e.length)):t.setAttributeNS(qo,e,n):n==null||r&&!Hl(n)?t.removeAttribute(e):t.setAttribute(e,r?"":jt(n)?String(n):n)}function Yo(t,e,n,i,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?za(n):n);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?t.getAttribute("value")||"":t.value,a=n==null?t.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in t))&&(t.value=a),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Hl(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function mn(t,e,n,i){t.addEventListener(e,n,i)}function zd(t,e,n,i){t.removeEventListener(e,n,i)}const Go=Symbol("_vei");function qd(t,e,n,i,s=null){const r=t[Go]||(t[Go]={}),o=r[e];if(i&&o)o.value=i;else{const[l,a]=Wd(e);if(i){const u=r[e]=Jd(i,s);mn(t,l,u,a)}else o&&(zd(t,l,o,a),r[e]=void 0)}}const Jo=/(?:Once|Passive|Capture)$/;function Wd(t){let e;if(Jo.test(t)){e={};let i;for(;i=t.match(Jo);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ut(t.slice(2)),e]}let Ls=0;const Yd=Promise.resolve(),Gd=()=>Ls||(Yd.then(()=>Ls=0),Ls=Date.now());function Jd(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Ot(Qd(i,n.value),e,5,[i])};return n.value=t,n.attached=Gd(),n}function Qd(t,e){if(q(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const Qo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Xd=(t,e,n,i,s,r)=>{const o=s==="svg";e==="class"?Vd(t,i,o):e==="style"?jd(t,n,i):Ki(e)?Ir(e)||qd(t,e,n,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Zd(t,e,i,o))?(Yo(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Wo(t,e,i,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Pe(i))?Yo(t,ut(e),i,r,e):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),Wo(t,e,i,o))};function Zd(t,e,n,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&Qo(e)&&Q(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Qo(e)&&Pe(n)?!1:e in t}const Xo=t=>{const e=t.props["onUpdate:modelValue"]||!1;return q(e)?n=>Oi(e,n):e};function Kd(t){t.target.composing=!0}function Zo(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Bs=Symbol("_assign"),ef={created(t,{modifiers:{lazy:e,trim:n,number:i}},s){t[Bs]=Xo(s);const r=i||s.props&&s.props.type==="number";mn(t,e?"change":"input",o=>{if(o.target.composing)return;let l=t.value;n&&(l=l.trim()),r&&(l=rr(l)),t[Bs](l)}),n&&mn(t,"change",()=>{t.value=t.value.trim()}),e||(mn(t,"compositionstart",Kd),mn(t,"compositionend",Zo),mn(t,"change",Zo))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:i,trim:s,number:r}},o){if(t[Bs]=Xo(o),t.composing)return;const l=(r||t.type==="number")&&!/^0\d/.test(t.value)?rr(t.value):t.value,a=e??"";l!==a&&(document.activeElement===t&&t.type!=="range"&&(i&&e===n||s&&t.value.trim()===a)||(t.value=a))}},tf=["ctrl","shift","alt","meta"],nf={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>tf.some(n=>t[`${n}Key`]&&!e.includes(n))},Qi=(t,e)=>{const n=t._withMods||(t._withMods={}),i=e.join(".");return n[i]||(n[i]=(s,...r)=>{for(let o=0;o<e.length;o++){const l=nf[e[o]];if(l&&l(s,e))return}return t(s,...r)})},sf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ui=(t,e)=>{const n=t._withKeys||(t._withKeys={}),i=e.join(".");return n[i]||(n[i]=s=>{if(!("key"in s))return;const r=Ut(s.key);if(e.some(o=>o===r||sf[o]===r))return t(s)})},rf=ze({patchProp:Xd},Ld);let Ko;function of(){return Ko||(Ko=ud(rf))}const lf=(...t)=>{const e=of().createApp(...t),{mount:n}=e;return e.mount=i=>{const s=cf(i);if(!s)return;const r=e._component;!Q(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,af(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function af(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function cf(t){return Pe(t)?document.querySelector(t):t}function uf(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);var n=t.indexOf("Trident/");if(n>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}var s=t.indexOf("Edge/");return s>0?parseInt(t.substring(s+5,t.indexOf(".",s)),10):-1}let Ti;function vr(){vr.init||(vr.init=!0,Ti=uf()!==-1)}var ms={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){vr(),vi(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const t=document.createElement("object");this._resizeObject=t,t.setAttribute("aria-hidden","true"),t.setAttribute("tabindex",-1),t.onload=this.addResizeHandlers,t.type="text/html",Ti&&this.$el.appendChild(t),t.data="about:blank",Ti||this.$el.appendChild(t)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!Ti&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const df=Pu();Ru("data-v-b329ee4c");const ff={class:"resize-observer",tabindex:"-1"};Au();const hf=df((t,e,n,i,s,r)=>(m(),we("div",ff)));ms.render=hf;ms.__scopeId="data-v-b329ee4c";ms.__file="src/components/ResizeObserver.vue";function Di(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Di=function(e){return typeof e}:Di=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Di(t)}function pf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gf(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function vf(t,e,n){return e&&gf(t.prototype,e),t}function el(t){return mf(t)||bf(t)||yf(t)||Sf()}function mf(t){if(Array.isArray(t))return mr(t)}function bf(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function yf(t,e){if(t){if(typeof t=="string")return mr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mr(t,e)}}function mr(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Sf(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xf(t){var e;return typeof t=="function"?e={callback:t}:e=t,e}function wf(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,r,o=function(a){for(var u=arguments.length,c=new Array(u>1?u-1:0),h=1;h<u;h++)c[h-1]=arguments[h];if(r=c,!(i&&a===s)){var p=n.leading;typeof p=="function"&&(p=p(a,s)),(!i||a!==s)&&p&&t.apply(void 0,[a].concat(el(r))),s=a,clearTimeout(i),i=setTimeout(function(){t.apply(void 0,[a].concat(el(r))),i=0},e)}};return o._clear=function(){clearTimeout(i),i=null},o}function Ga(t,e){if(t===e)return!0;if(Di(t)==="object"){for(var n in t)if(!Ga(t[n],e[n]))return!1;return!0}return!1}var _f=function(){function t(e,n,i){pf(this,t),this.el=e,this.observer=null,this.frozen=!1,this.createObserver(n,i)}return vf(t,[{key:"createObserver",value:function(n,i){var s=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=xf(n),this.callback=function(l,a){s.options.callback(l,a),l&&s.options.once&&(s.frozen=!0,s.destroyObserver())},this.callback&&this.options.throttle){var r=this.options.throttleOptions||{},o=r.leading;this.callback=wf(this.callback,this.options.throttle,{leading:function(a){return o==="both"||o==="visible"&&a||o==="hidden"&&!a}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(l){var a=l[0];if(l.length>1){var u=l.find(function(h){return h.isIntersecting});u&&(a=u)}if(s.callback){var c=a.isIntersecting&&a.intersectionRatio>=s.threshold;if(c===s.oldResult)return;s.oldResult=c,s.callback(c,a)}},this.options.intersection),vi(function(){s.observer&&s.observer.observe(s.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),t}();function Ja(t,e,n){var i=e.value;if(i)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var s=new _f(t,i,n);t._vue_visibilityState=s}}function Cf(t,e,n){var i=e.value,s=e.oldValue;if(!Ga(i,s)){var r=t._vue_visibilityState;if(!i){Qa(t);return}r?r.createObserver(i,n):Ja(t,{value:i},n)}}function Qa(t){var e=t._vue_visibilityState;e&&(e.destroyObserver(),delete t._vue_visibilityState)}var kf={beforeMount:Ja,updated:Cf,unmounted:Qa},Ef={itemsLimit:1e3},$f=/(auto|scroll)/;function Xa(t,e){return t.parentNode===null?e:Xa(t.parentNode,e.concat([t]))}var Vs=function(e,n){return getComputedStyle(e,null).getPropertyValue(n)},If=function(e){return Vs(e,"overflow")+Vs(e,"overflow-y")+Vs(e,"overflow-x")},Of=function(e){return $f.test(If(e))};function tl(t){if(t instanceof HTMLElement||t instanceof SVGElement){for(var e=Xa(t.parentNode,[]),n=0;n<e.length;n+=1)if(Of(e[n]))return e[n];return document.scrollingElement||document.documentElement}}function br(t){"@babel/helpers - typeof";return br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},br(t)}var Rf={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(e){return["vertical","horizontal"].includes(e)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function Af(){return this.items.length&&br(this.items[0])!=="object"}var yr=!1;if(typeof window<"u"){yr=!1;try{var Pf=Object.defineProperty({},"passive",{get:function(){yr=!0}});window.addEventListener("test",null,Pf)}catch{}}let Tf=0;var Qr={name:"RecycleScroller",components:{ResizeObserver:ms},directives:{ObserveVisibility:kf},props:{...Rf,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const t={"-1":{accumulator:0}},e=this.items,n=this.sizeField,i=this.minItemSize;let s=1e4,r=0,o;for(let l=0,a=e.length;l<a;l++)o=e[l][n]||i,o<s&&(s=o),r+=o,t[l]={accumulator:r,size:o};return this.$_computedMinItemSize=s,t}return[]},simpleArray:Af,itemIndexByKey(){const{keyField:t,items:e}=this,n={};for(let i=0,s=e.length;i<s;i++)n[e[i][t]]=i;return n}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const t=this.$_lastUpdateScrollPosition;typeof t=="number"&&this.$nextTick(()=>{this.scrollToPosition(t)})},beforeUnmount(){this.removeListeners()},methods:{addView(t,e,n,i,s){const r=as({id:Tf++,index:e,used:!0,key:i,type:s}),o=la({item:n,position:0,nr:r});return t.push(o),o},unuseView(t,e=!1){const n=this.$_unusedViews,i=t.nr.type;let s=n.get(i);s||(s=[],n.set(i,s)),s.push(t),e||(t.nr.used=!1,t.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(t){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const e=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:n}=this.updateVisibleItems(!1,!0);n||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});e(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&e()},this.updateInterval))}},handleVisibilityChange(t,e){this.ready&&(t||e.boundingClientRect.width!==0||e.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(t,e=!1){const n=this.itemSize,i=this.gridItems||1,s=this.itemSecondarySize||n,r=this.$_computedMinItemSize,o=this.typeField,l=this.simpleArray?null:this.keyField,a=this.items,u=a.length,c=this.sizes,h=this.$_views,p=this.$_unusedViews,v=this.pool,$=this.itemIndexByKey;let k,E,N,U,W;if(!u)k=E=U=W=N=0;else if(this.$_prerender)k=U=0,E=W=Math.min(this.prerender,a.length),N=null;else{const B=this.getScroll();if(e){let ge=B.start-this.$_lastUpdateScrollPosition;if(ge<0&&(ge=-ge),n===null&&ge<r||ge<n)return{continuous:!0}}this.$_lastUpdateScrollPosition=B.start;const pe=this.buffer;B.start-=pe,B.end+=pe;let ne=0;if(this.$refs.before&&(ne=this.$refs.before.scrollHeight,B.start-=ne),this.$refs.after){const ge=this.$refs.after.scrollHeight;B.end+=ge}if(n===null){let ge,Je=0,dt=u-1,Z=~~(u/2),S;do S=Z,ge=c[Z].accumulator,ge<B.start?Je=Z:Z<u-1&&c[Z+1].accumulator>B.start&&(dt=Z),Z=~~((Je+dt)/2);while(Z!==S);for(Z<0&&(Z=0),k=Z,N=c[u-1].accumulator,E=Z;E<u&&c[E].accumulator<B.end;E++);for(E===-1?E=a.length-1:(E++,E>u&&(E=u)),U=k;U<u&&ne+c[U].accumulator<B.start;U++);for(W=U;W<u&&ne+c[W].accumulator<B.end;W++);}else{k=~~(B.start/n*i);const ge=k%i;k-=ge,E=Math.ceil(B.end/n*i),U=Math.max(0,Math.floor((B.start-ne)/n*i)),W=Math.floor((B.end-ne)/n*i),k<0&&(k=0),E>u&&(E=u),U<0&&(U=0),W>u&&(W=u),N=Math.ceil(u/i)*n}}E-k>Ef.itemsLimit&&this.itemsLimitError(),this.totalSize=N;let C;const J=k<=this.$_endIndex&&E>=this.$_startIndex;if(J)for(let B=0,pe=v.length;B<pe;B++)C=v[B],C.nr.used&&(t&&(C.nr.index=$[C.item[l]]),(C.nr.index==null||C.nr.index<k||C.nr.index>=E)&&this.unuseView(C));const Te=J?null:new Map;let ce,z,X;for(let B=k;B<E;B++){ce=a[B];const pe=l?ce[l]:ce;if(pe==null)throw new Error(`Key is ${pe} on item (keyField is '${l}')`);if(C=h.get(pe),!n&&!c[B].size){C&&this.unuseView(C);continue}z=ce[o];let ne=p.get(z),ge=!1;if(!C)J?ne&&ne.length?C=ne.pop():C=this.addView(v,B,ce,pe,z):(X=Te.get(z)||0,(!ne||X>=ne.length)&&(C=this.addView(v,B,ce,pe,z),this.unuseView(C,!0),ne=p.get(z)),C=ne[X],Te.set(z,X+1)),h.delete(C.nr.key),C.nr.used=!0,C.nr.index=B,C.nr.key=pe,C.nr.type=z,h.set(pe,C),ge=!0;else if(!C.nr.used&&(C.nr.used=!0,ge=!0,ne)){const Je=ne.indexOf(C);Je!==-1&&ne.splice(Je,1)}C.item=ce,ge&&(B===a.length-1&&this.$emit("scroll-end"),B===0&&this.$emit("scroll-start")),n===null?(C.position=c[B-1].accumulator,C.offset=0):(C.position=Math.floor(B/i)*n,C.offset=B%i*s)}return this.$_startIndex=k,this.$_endIndex=E,this.emitUpdate&&this.$emit("update",k,E,U,W),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:J}},getListenerTarget(){let t=tl(this.$el);return window.document&&(t===window.document.documentElement||t===window.document.body)&&(t=window),t},getScroll(){const{$el:t,direction:e}=this,n=e==="vertical";let i;if(this.pageMode){const s=t.getBoundingClientRect(),r=n?s.height:s.width;let o=-(n?s.top:s.left),l=n?window.innerHeight:window.innerWidth;o<0&&(l+=o,o=0),o+l>r&&(l=r-o),i={start:o,end:o+l}}else n?i={start:t.scrollTop,end:t.scrollTop+t.clientHeight}:i={start:t.scrollLeft,end:t.scrollLeft+t.clientWidth};return i},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,yr?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(t){let e;const n=this.gridItems||1;this.itemSize===null?e=t>0?this.sizes[t-1].accumulator:0:e=Math.floor(t/n)*this.itemSize,this.scrollToPosition(e)},scrollToPosition(t){const e=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let n,i,s;if(this.pageMode){const r=tl(this.$el),o=r.tagName==="HTML"?0:r[e.scroll],l=r.getBoundingClientRect(),u=this.$el.getBoundingClientRect()[e.start]-l[e.start];n=r,i=e.scroll,s=t+o+u}else n=this.$el,i=e.scroll,s=t;n[i]=s},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((t,e)=>t.nr.index-e.nr.index)}}};const Df={key:0,ref:"before",class:"vue-recycle-scroller__slot"},Mf={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function Nf(t,e,n,i,s,r){const o=Hr("ResizeObserver"),l=Wu("observe-visibility");return mi((m(),R("div",{class:De(["vue-recycle-scroller",{ready:s.ready,"page-mode":n.pageMode,[`direction-${t.direction}`]:!0}]),onScrollPassive:e[0]||(e[0]=(...a)=>r.handleScroll&&r.handleScroll(...a))},[t.$slots.before?(m(),R("div",Df,[lt(t.$slots,"before")],512)):K("v-if",!0),(m(),we(Oo(n.listTag),{ref:"wrapper",style:ss({[t.direction==="vertical"?"minHeight":"minWidth"]:s.totalSize+"px"}),class:De(["vue-recycle-scroller__item-wrapper",n.listClass])},{default:Me(()=>[(m(!0),R(le,null,qt(s.pool,a=>(m(),we(Oo(n.itemTag),In({key:a.nr.id,style:s.ready?{transform:`translate${t.direction==="vertical"?"Y":"X"}(${a.position}px) translate${t.direction==="vertical"?"X":"Y"}(${a.offset}px)`,width:n.gridItems?`${t.direction==="vertical"&&n.itemSecondarySize||n.itemSize}px`:void 0,height:n.gridItems?`${t.direction==="horizontal"&&n.itemSecondarySize||n.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[n.itemClass,{hover:!n.skipHover&&s.hoverKey===a.nr.key}]]},li(n.skipHover?{}:{mouseenter:()=>{s.hoverKey=a.nr.key},mouseleave:()=>{s.hoverKey=null}})),{default:Me(()=>[lt(t.$slots,"default",{item:a.item,index:a.nr.index,active:a.nr.used})]),_:2},1040,["style","class"]))),128)),lt(t.$slots,"empty")]),_:3},8,["style","class"])),t.$slots.after?(m(),R("div",Mf,[lt(t.$slots,"after")],512)):K("v-if",!0),se(o,{onNotify:r.handleResize},null,8,["onNotify"])],34)),[[l,r.handleVisibilityChange]])}Qr.render=Nf;Qr.__file="src/components/RecycleScroller.vue";/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Za;const bs=t=>Za=t,Ka=Symbol();function Sr(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Zn;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Zn||(Zn={}));function Ff(){const t=ql(!0),e=t.run(()=>re({}));let n=[],i=[];const s=as({install(r){bs(s),s._a=r,r.provide(Ka,s),r.config.globalProperties.$pinia=s,i.forEach(o=>n.push(o)),i=[]},use(r){return this._a?n.push(r):i.push(r),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const ec=()=>{};function nl(t,e,n,i=ec){t.push(e);const s=()=>{const r=t.indexOf(e);r>-1&&(t.splice(r,1),i())};return!n&&Wl()&&Qc(s),s}function gn(t,...e){t.slice().forEach(n=>{n(...e)})}const Lf=t=>t(),il=Symbol(),Hs=Symbol();function xr(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,i)=>t.set(i,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const i=e[n],s=t[n];Sr(s)&&Sr(i)&&t.hasOwnProperty(n)&&!Ae(i)&&!Kt(i)?t[n]=xr(s,i):t[n]=i}return t}const Bf=Symbol();function Vf(t){return!Sr(t)||!t.hasOwnProperty(Bf)}const{assign:Jt}=Object;function Hf(t){return!!(Ae(t)&&t.effect)}function jf(t,e,n,i){const{state:s,actions:r,getters:o}=e,l=n.state.value[t];let a;function u(){l||(n.state.value[t]=s?s():{});const c=xu(n.state.value[t]);return Jt(c,r,Object.keys(o||{}).reduce((h,p)=>(h[p]=as(I(()=>{bs(n);const v=n._s.get(t);return o[p].call(v,v)})),h),{}))}return a=tc(t,u,e,n,i,!0),a}function tc(t,e,n={},i,s,r){let o;const l=Jt({actions:{}},n),a={deep:!0};let u,c,h=[],p=[],v;const $=i.state.value[t];!r&&!$&&(i.state.value[t]={}),re({});let k;function E(z){let X;u=c=!1,typeof z=="function"?(z(i.state.value[t]),X={type:Zn.patchFunction,storeId:t,events:v}):(xr(i.state.value[t],z),X={type:Zn.patchObject,payload:z,storeId:t,events:v});const B=k=Symbol();vi().then(()=>{k===B&&(u=!0)}),c=!0,gn(h,X,i.state.value[t])}const N=r?function(){const{state:X}=n,B=X?X():{};this.$patch(pe=>{Jt(pe,B)})}:ec;function U(){o.stop(),h=[],p=[],i._s.delete(t)}const W=(z,X="")=>{if(il in z)return z[Hs]=X,z;const B=function(){bs(i);const pe=Array.from(arguments),ne=[],ge=[];function Je(S){ne.push(S)}function dt(S){ge.push(S)}gn(p,{args:pe,name:B[Hs],store:J,after:Je,onError:dt});let Z;try{Z=z.apply(this&&this.$id===t?this:J,pe)}catch(S){throw gn(ge,S),S}return Z instanceof Promise?Z.then(S=>(gn(ne,S),S)).catch(S=>(gn(ge,S),Promise.reject(S))):(gn(ne,Z),Z)};return B[il]=!0,B[Hs]=X,B},C={_p:i,$id:t,$onAction:nl.bind(null,p),$patch:E,$reset:N,$subscribe(z,X={}){const B=nl(h,z,X.detached,()=>pe()),pe=o.run(()=>Nt(()=>i.state.value[t],ne=>{(X.flush==="sync"?c:u)&&z({storeId:t,type:Zn.direct,events:v},ne)},Jt({},a,X)));return B},$dispose:U},J=ls(C);i._s.set(t,J);const ce=(i._a&&i._a.runWithContext||Lf)(()=>i._e.run(()=>(o=ql()).run(()=>e({action:W}))));for(const z in ce){const X=ce[z];if(Ae(X)&&!Hf(X)||Kt(X))r||($&&Vf(X)&&(Ae(X)?X.value=$[z]:xr(X,$[z])),i.state.value[t][z]=X);else if(typeof X=="function"){const B=W(X,z);ce[z]=B,l.actions[z]=X}}return Jt(J,ce),Jt(oe(J),ce),Object.defineProperty(J,"$state",{get:()=>i.state.value[t],set:z=>{E(X=>{Jt(X,z)})}}),i._p.forEach(z=>{Jt(J,o.run(()=>z({store:J,app:i._a,pinia:i,options:l})))}),$&&r&&n.hydrate&&n.hydrate(J.$state,$),u=!0,c=!0,J}/*! #__NO_SIDE_EFFECTS__ */function nc(t,e,n){let i,s;const r=typeof e=="function";typeof t=="string"?(i=t,s=r?n:e):(s=t,i=t.id);function o(l,a){const u=id();return l=l||(u?Qn(Ka,null):null),l&&bs(l),l=Za,l._s.has(i)||(r?tc(i,e,s,l):jf(i,s,l)),l._s.get(i)}return o.$id=i,o}const tn=function(){if(typeof globalThis<"u")return globalThis;if(typeof global<"u")return global;if(typeof self<"u")return self;if(typeof window<"u")return window;try{return new Function("return this")()}catch{return{}}}();tn.trustedTypes===void 0&&(tn.trustedTypes={createPolicy:(t,e)=>e});const ic={configurable:!1,enumerable:!1,writable:!1};tn.FAST===void 0&&Reflect.defineProperty(tn,"FAST",Object.assign({value:Object.create(null)},ic));const di=tn.FAST;if(di.getById===void 0){const t=Object.create(null);Reflect.defineProperty(di,"getById",Object.assign({value(e,n){let i=t[e];return i===void 0&&(i=n?t[e]=n():null),i}},ic))}const Kn=Object.freeze([]);function sc(){const t=new WeakMap;return function(e){let n=t.get(e);if(n===void 0){let i=Reflect.getPrototypeOf(e);for(;n===void 0&&i!==null;)n=t.get(i),i=Reflect.getPrototypeOf(i);n=n===void 0?[]:n.slice(0),t.set(e,n)}return n}}const js=tn.FAST.getById(1,()=>{const t=[],e=[];function n(){if(e.length)throw e.shift()}function i(o){try{o.call()}catch(l){e.push(l),setTimeout(n,0)}}function s(){let l=0;for(;l<t.length;)if(i(t[l]),l++,l>1024){for(let a=0,u=t.length-l;a<u;a++)t[a]=t[a+l];t.length-=l,l=0}t.length=0}function r(o){t.length<1&&tn.requestAnimationFrame(s),t.push(o)}return Object.freeze({enqueue:r,process:s})}),rc=tn.trustedTypes.createPolicy("fast-html",{createHTML:t=>t});let Us=rc;const ei=`fast-${Math.random().toString(36).substring(2,8)}`,oc=`${ei}{`,Xr=`}${ei}`,he=Object.freeze({supportsAdoptedStyleSheets:Array.isArray(document.adoptedStyleSheets)&&"replace"in CSSStyleSheet.prototype,setHTMLPolicy(t){if(Us!==rc)throw new Error("The HTML policy can only be set once.");Us=t},createHTML(t){return Us.createHTML(t)},isMarker(t){return t&&t.nodeType===8&&t.data.startsWith(ei)},extractDirectiveIndexFromMarker(t){return parseInt(t.data.replace(`${ei}:`,""))},createInterpolationPlaceholder(t){return`${oc}${t}${Xr}`},createCustomAttributePlaceholder(t,e){return`${t}="${this.createInterpolationPlaceholder(e)}"`},createBlockPlaceholder(t){return`<!--${ei}:${t}-->`},queueUpdate:js.enqueue,processUpdates:js.process,nextUpdate(){return new Promise(js.enqueue)},setAttribute(t,e,n){n==null?t.removeAttribute(e):t.setAttribute(e,n)},setBooleanAttribute(t,e,n){n?t.setAttribute(e,""):t.removeAttribute(e)},removeChildNodes(t){for(let e=t.firstChild;e!==null;e=t.firstChild)t.removeChild(e)},createTemplateWalker(t){return document.createTreeWalker(t,133,null,!1)}});class wr{constructor(e,n){this.sub1=void 0,this.sub2=void 0,this.spillover=void 0,this.source=e,this.sub1=n}has(e){return this.spillover===void 0?this.sub1===e||this.sub2===e:this.spillover.indexOf(e)!==-1}subscribe(e){const n=this.spillover;if(n===void 0){if(this.has(e))return;if(this.sub1===void 0){this.sub1=e;return}if(this.sub2===void 0){this.sub2=e;return}this.spillover=[this.sub1,this.sub2,e],this.sub1=void 0,this.sub2=void 0}else n.indexOf(e)===-1&&n.push(e)}unsubscribe(e){const n=this.spillover;if(n===void 0)this.sub1===e?this.sub1=void 0:this.sub2===e&&(this.sub2=void 0);else{const i=n.indexOf(e);i!==-1&&n.splice(i,1)}}notify(e){const n=this.spillover,i=this.source;if(n===void 0){const s=this.sub1,r=this.sub2;s!==void 0&&s.handleChange(i,e),r!==void 0&&r.handleChange(i,e)}else for(let s=0,r=n.length;s<r;++s)n[s].handleChange(i,e)}}class lc{constructor(e){this.subscribers={},this.sourceSubscribers=null,this.source=e}notify(e){var n;const i=this.subscribers[e];i!==void 0&&i.notify(e),(n=this.sourceSubscribers)===null||n===void 0||n.notify(e)}subscribe(e,n){var i;if(n){let s=this.subscribers[n];s===void 0&&(this.subscribers[n]=s=new wr(this.source)),s.subscribe(e)}else this.sourceSubscribers=(i=this.sourceSubscribers)!==null&&i!==void 0?i:new wr(this.source),this.sourceSubscribers.subscribe(e)}unsubscribe(e,n){var i;if(n){const s=this.subscribers[n];s!==void 0&&s.unsubscribe(e)}else(i=this.sourceSubscribers)===null||i===void 0||i.unsubscribe(e)}}const de=di.getById(2,()=>{const t=/(:|&&|\|\||if)/,e=new WeakMap,n=he.queueUpdate;let i,s=u=>{throw new Error("Must call enableArrayObservation before observing arrays.")};function r(u){let c=u.$fastController||e.get(u);return c===void 0&&(Array.isArray(u)?c=s(u):e.set(u,c=new lc(u))),c}const o=sc();class l{constructor(c){this.name=c,this.field=`_${c}`,this.callback=`${c}Changed`}getValue(c){return i!==void 0&&i.watch(c,this.name),c[this.field]}setValue(c,h){const p=this.field,v=c[p];if(v!==h){c[p]=h;const $=c[this.callback];typeof $=="function"&&$.call(c,v,h),r(c).notify(this.name)}}}class a extends wr{constructor(c,h,p=!1){super(c,h),this.binding=c,this.isVolatileBinding=p,this.needsRefresh=!0,this.needsQueue=!0,this.first=this,this.last=null,this.propertySource=void 0,this.propertyName=void 0,this.notifier=void 0,this.next=void 0}observe(c,h){this.needsRefresh&&this.last!==null&&this.disconnect();const p=i;i=this.needsRefresh?this:void 0,this.needsRefresh=this.isVolatileBinding;const v=this.binding(c,h);return i=p,v}disconnect(){if(this.last!==null){let c=this.first;for(;c!==void 0;)c.notifier.unsubscribe(this,c.propertyName),c=c.next;this.last=null,this.needsRefresh=this.needsQueue=!0}}watch(c,h){const p=this.last,v=r(c),$=p===null?this.first:{};if($.propertySource=c,$.propertyName=h,$.notifier=v,v.subscribe(this,h),p!==null){if(!this.needsRefresh){let k;i=void 0,k=p.propertySource[p.propertyName],i=this,c===k&&(this.needsRefresh=!0)}p.next=$}this.last=$}handleChange(){this.needsQueue&&(this.needsQueue=!1,n(this))}call(){this.last!==null&&(this.needsQueue=!0,this.notify(this))}records(){let c=this.first;return{next:()=>{const h=c;return h===void 0?{value:void 0,done:!0}:(c=c.next,{value:h,done:!1})},[Symbol.iterator]:function(){return this}}}}return Object.freeze({setArrayObserverFactory(u){s=u},getNotifier:r,track(u,c){i!==void 0&&i.watch(u,c)},trackVolatile(){i!==void 0&&(i.needsRefresh=!0)},notify(u,c){r(u).notify(c)},defineProperty(u,c){typeof c=="string"&&(c=new l(c)),o(u).push(c),Reflect.defineProperty(u,c.name,{enumerable:!0,get:function(){return c.getValue(this)},set:function(h){c.setValue(this,h)}})},getAccessors:o,binding(u,c,h=this.isVolatileBinding(u)){return new a(u,c,h)},isVolatileBinding(u){return t.test(u.toString())}})});function ae(t,e){de.defineProperty(t,e)}function Uf(t,e,n){return Object.assign({},n,{get:function(){return de.trackVolatile(),n.get.apply(this)}})}const sl=di.getById(3,()=>{let t=null;return{get(){return t},set(e){t=e}}});class fi{constructor(){this.index=0,this.length=0,this.parent=null,this.parentContext=null}get event(){return sl.get()}get isEven(){return this.index%2===0}get isOdd(){return this.index%2!==0}get isFirst(){return this.index===0}get isInMiddle(){return!this.isFirst&&!this.isLast}get isLast(){return this.index===this.length-1}static setEvent(e){sl.set(e)}}de.defineProperty(fi.prototype,"index");de.defineProperty(fi.prototype,"length");const ti=Object.seal(new fi);class Zr{constructor(){this.targetIndex=0}}class ac extends Zr{constructor(){super(...arguments),this.createPlaceholder=he.createInterpolationPlaceholder}}class cc extends Zr{constructor(e,n,i){super(),this.name=e,this.behavior=n,this.options=i}createPlaceholder(e){return he.createCustomAttributePlaceholder(this.name,e)}createBehavior(e){return new this.behavior(e,this.options)}}function zf(t,e){this.source=t,this.context=e,this.bindingObserver===null&&(this.bindingObserver=de.binding(this.binding,this,this.isBindingVolatile)),this.updateTarget(this.bindingObserver.observe(t,e))}function qf(t,e){this.source=t,this.context=e,this.target.addEventListener(this.targetName,this)}function Wf(){this.bindingObserver.disconnect(),this.source=null,this.context=null}function Yf(){this.bindingObserver.disconnect(),this.source=null,this.context=null;const t=this.target.$fastView;t!==void 0&&t.isComposed&&(t.unbind(),t.needsBindOnly=!0)}function Gf(){this.target.removeEventListener(this.targetName,this),this.source=null,this.context=null}function Jf(t){he.setAttribute(this.target,this.targetName,t)}function Qf(t){he.setBooleanAttribute(this.target,this.targetName,t)}function Xf(t){if(t==null&&(t=""),t.create){this.target.textContent="";let e=this.target.$fastView;e===void 0?e=t.create():this.target.$fastTemplate!==t&&(e.isComposed&&(e.remove(),e.unbind()),e=t.create()),e.isComposed?e.needsBindOnly&&(e.needsBindOnly=!1,e.bind(this.source,this.context)):(e.isComposed=!0,e.bind(this.source,this.context),e.insertBefore(this.target),this.target.$fastView=e,this.target.$fastTemplate=t)}else{const e=this.target.$fastView;e!==void 0&&e.isComposed&&(e.isComposed=!1,e.remove(),e.needsBindOnly?e.needsBindOnly=!1:e.unbind()),this.target.textContent=t}}function Zf(t){this.target[this.targetName]=t}function Kf(t){const e=this.classVersions||Object.create(null),n=this.target;let i=this.version||0;if(t!=null&&t.length){const s=t.split(/\s+/);for(let r=0,o=s.length;r<o;++r){const l=s[r];l!==""&&(e[l]=i,n.classList.add(l))}}if(this.classVersions=e,this.version=i+1,i!==0){i-=1;for(const s in e)e[s]===i&&n.classList.remove(s)}}class Kr extends ac{constructor(e){super(),this.binding=e,this.bind=zf,this.unbind=Wf,this.updateTarget=Jf,this.isBindingVolatile=de.isVolatileBinding(this.binding)}get targetName(){return this.originalTargetName}set targetName(e){if(this.originalTargetName=e,e!==void 0)switch(e[0]){case":":if(this.cleanedTargetName=e.substr(1),this.updateTarget=Zf,this.cleanedTargetName==="innerHTML"){const n=this.binding;this.binding=(i,s)=>he.createHTML(n(i,s))}break;case"?":this.cleanedTargetName=e.substr(1),this.updateTarget=Qf;break;case"@":this.cleanedTargetName=e.substr(1),this.bind=qf,this.unbind=Gf;break;default:this.cleanedTargetName=e,e==="class"&&(this.updateTarget=Kf);break}}targetAtContent(){this.updateTarget=Xf,this.unbind=Yf}createBehavior(e){return new eh(e,this.binding,this.isBindingVolatile,this.bind,this.unbind,this.updateTarget,this.cleanedTargetName)}}class eh{constructor(e,n,i,s,r,o,l){this.source=null,this.context=null,this.bindingObserver=null,this.target=e,this.binding=n,this.isBindingVolatile=i,this.bind=s,this.unbind=r,this.updateTarget=o,this.targetName=l}handleChange(){this.updateTarget(this.bindingObserver.observe(this.source,this.context))}handleEvent(e){fi.setEvent(e);const n=this.binding(this.source,this.context);fi.setEvent(null),n!==!0&&e.preventDefault()}}let zs=null;class eo{addFactory(e){e.targetIndex=this.targetIndex,this.behaviorFactories.push(e)}captureContentBinding(e){e.targetAtContent(),this.addFactory(e)}reset(){this.behaviorFactories=[],this.targetIndex=-1}release(){zs=this}static borrow(e){const n=zs||new eo;return n.directives=e,n.reset(),zs=null,n}}function th(t){if(t.length===1)return t[0];let e;const n=t.length,i=t.map(o=>typeof o=="string"?()=>o:(e=o.targetName||e,o.binding)),s=(o,l)=>{let a="";for(let u=0;u<n;++u)a+=i[u](o,l);return a},r=new Kr(s);return r.targetName=e,r}const nh=Xr.length;function uc(t,e){const n=e.split(oc);if(n.length===1)return null;const i=[];for(let s=0,r=n.length;s<r;++s){const o=n[s],l=o.indexOf(Xr);let a;if(l===-1)a=o;else{const u=parseInt(o.substring(0,l));i.push(t.directives[u]),a=o.substring(l+nh)}a!==""&&i.push(a)}return i}function rl(t,e,n=!1){const i=e.attributes;for(let s=0,r=i.length;s<r;++s){const o=i[s],l=o.value,a=uc(t,l);let u=null;a===null?n&&(u=new Kr(()=>l),u.targetName=o.name):u=th(a),u!==null&&(e.removeAttributeNode(o),s--,r--,t.addFactory(u))}}function ih(t,e,n){const i=uc(t,e.textContent);if(i!==null){let s=e;for(let r=0,o=i.length;r<o;++r){const l=i[r],a=r===0?e:s.parentNode.insertBefore(document.createTextNode(""),s.nextSibling);typeof l=="string"?a.textContent=l:(a.textContent=" ",t.captureContentBinding(l)),s=a,t.targetIndex++,a!==e&&n.nextNode()}t.targetIndex--}}function sh(t,e){const n=t.content;document.adoptNode(n);const i=eo.borrow(e);rl(i,t,!0);const s=i.behaviorFactories;i.reset();const r=he.createTemplateWalker(n);let o;for(;o=r.nextNode();)switch(i.targetIndex++,o.nodeType){case 1:rl(i,o);break;case 3:ih(i,o,r);break;case 8:he.isMarker(o)&&i.addFactory(e[he.extractDirectiveIndexFromMarker(o)])}let l=0;(he.isMarker(n.firstChild)||n.childNodes.length===1&&e.length)&&(n.insertBefore(document.createComment(""),n.firstChild),l=-1);const a=i.behaviorFactories;return i.release(),{fragment:n,viewBehaviorFactories:a,hostBehaviorFactories:s,targetOffset:l}}const qs=document.createRange();class rh{constructor(e,n){this.fragment=e,this.behaviors=n,this.source=null,this.context=null,this.firstChild=e.firstChild,this.lastChild=e.lastChild}appendTo(e){e.appendChild(this.fragment)}insertBefore(e){if(this.fragment.hasChildNodes())e.parentNode.insertBefore(this.fragment,e);else{const n=this.lastChild;if(e.previousSibling===n)return;const i=e.parentNode;let s=this.firstChild,r;for(;s!==n;)r=s.nextSibling,i.insertBefore(s,e),s=r;i.insertBefore(n,e)}}remove(){const e=this.fragment,n=this.lastChild;let i=this.firstChild,s;for(;i!==n;)s=i.nextSibling,e.appendChild(i),i=s;e.appendChild(n)}dispose(){const e=this.firstChild.parentNode,n=this.lastChild;let i=this.firstChild,s;for(;i!==n;)s=i.nextSibling,e.removeChild(i),i=s;e.removeChild(n);const r=this.behaviors,o=this.source;for(let l=0,a=r.length;l<a;++l)r[l].unbind(o)}bind(e,n){const i=this.behaviors;if(this.source!==e)if(this.source!==null){const s=this.source;this.source=e,this.context=n;for(let r=0,o=i.length;r<o;++r){const l=i[r];l.unbind(s),l.bind(e,n)}}else{this.source=e,this.context=n;for(let s=0,r=i.length;s<r;++s)i[s].bind(e,n)}}unbind(){if(this.source===null)return;const e=this.behaviors,n=this.source;for(let i=0,s=e.length;i<s;++i)e[i].unbind(n);this.source=null}static disposeContiguousBatch(e){if(e.length!==0){qs.setStartBefore(e[0].firstChild),qs.setEndAfter(e[e.length-1].lastChild),qs.deleteContents();for(let n=0,i=e.length;n<i;++n){const s=e[n],r=s.behaviors,o=s.source;for(let l=0,a=r.length;l<a;++l)r[l].unbind(o)}}}}class ol{constructor(e,n){this.behaviorCount=0,this.hasHostBehaviors=!1,this.fragment=null,this.targetOffset=0,this.viewBehaviorFactories=null,this.hostBehaviorFactories=null,this.html=e,this.directives=n}create(e){if(this.fragment===null){let u;const c=this.html;if(typeof c=="string"){u=document.createElement("template"),u.innerHTML=he.createHTML(c);const p=u.content.firstElementChild;p!==null&&p.tagName==="TEMPLATE"&&(u=p)}else u=c;const h=sh(u,this.directives);this.fragment=h.fragment,this.viewBehaviorFactories=h.viewBehaviorFactories,this.hostBehaviorFactories=h.hostBehaviorFactories,this.targetOffset=h.targetOffset,this.behaviorCount=this.viewBehaviorFactories.length+this.hostBehaviorFactories.length,this.hasHostBehaviors=this.hostBehaviorFactories.length>0}const n=this.fragment.cloneNode(!0),i=this.viewBehaviorFactories,s=new Array(this.behaviorCount),r=he.createTemplateWalker(n);let o=0,l=this.targetOffset,a=r.nextNode();for(let u=i.length;o<u;++o){const c=i[o],h=c.targetIndex;for(;a!==null;)if(l===h){s[o]=c.createBehavior(a);break}else a=r.nextNode(),l++}if(this.hasHostBehaviors){const u=this.hostBehaviorFactories;for(let c=0,h=u.length;c<h;++c,++o)s[o]=u[c].createBehavior(e)}return new rh(n,s)}render(e,n,i){typeof n=="string"&&(n=document.getElementById(n)),i===void 0&&(i=n);const s=this.create(i);return s.bind(e,ti),s.appendTo(n),s}}const oh=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function ct(t,...e){const n=[];let i="";for(let s=0,r=t.length-1;s<r;++s){const o=t[s];let l=e[s];if(i+=o,l instanceof ol){const a=l;l=()=>a}if(typeof l=="function"&&(l=new Kr(l)),l instanceof ac){const a=oh.exec(o);a!==null&&(l.targetName=a[2])}l instanceof Zr?(i+=l.createPlaceholder(n.length),n.push(l)):i+=l}return i+=t[t.length-1],new ol(i,n)}class it{constructor(){this.targets=new WeakSet}addStylesTo(e){this.targets.add(e)}removeStylesFrom(e){this.targets.delete(e)}isAttachedTo(e){return this.targets.has(e)}withBehaviors(...e){return this.behaviors=this.behaviors===null?e:this.behaviors.concat(e),this}}it.create=(()=>{if(he.supportsAdoptedStyleSheets){const t=new Map;return e=>new lh(e,t)}return t=>new uh(t)})();function to(t){return t.map(e=>e instanceof it?to(e.styles):[e]).reduce((e,n)=>e.concat(n),[])}function dc(t){return t.map(e=>e instanceof it?e.behaviors:null).reduce((e,n)=>n===null?e:(e===null&&(e=[]),e.concat(n)),null)}const fc=Symbol("prependToAdoptedStyleSheets");function hc(t){const e=[],n=[];return t.forEach(i=>(i[fc]?e:n).push(i)),{prepend:e,append:n}}let pc=(t,e)=>{const{prepend:n,append:i}=hc(e);t.adoptedStyleSheets=[...n,...t.adoptedStyleSheets,...i]},gc=(t,e)=>{t.adoptedStyleSheets=t.adoptedStyleSheets.filter(n=>e.indexOf(n)===-1)};if(he.supportsAdoptedStyleSheets)try{document.adoptedStyleSheets.push(),document.adoptedStyleSheets.splice(),pc=(t,e)=>{const{prepend:n,append:i}=hc(e);t.adoptedStyleSheets.splice(0,0,...n),t.adoptedStyleSheets.push(...i)},gc=(t,e)=>{for(const n of e){const i=t.adoptedStyleSheets.indexOf(n);i!==-1&&t.adoptedStyleSheets.splice(i,1)}}}catch{}class lh extends it{constructor(e,n){super(),this.styles=e,this.styleSheetCache=n,this._styleSheets=void 0,this.behaviors=dc(e)}get styleSheets(){if(this._styleSheets===void 0){const e=this.styles,n=this.styleSheetCache;this._styleSheets=to(e).map(i=>{if(i instanceof CSSStyleSheet)return i;let s=n.get(i);return s===void 0&&(s=new CSSStyleSheet,s.replaceSync(i),n.set(i,s)),s})}return this._styleSheets}addStylesTo(e){pc(e,this.styleSheets),super.addStylesTo(e)}removeStylesFrom(e){gc(e,this.styleSheets),super.removeStylesFrom(e)}}let ah=0;function ch(){return`fast-style-class-${++ah}`}class uh extends it{constructor(e){super(),this.styles=e,this.behaviors=null,this.behaviors=dc(e),this.styleSheets=to(e),this.styleClass=ch()}addStylesTo(e){const n=this.styleSheets,i=this.styleClass;e=this.normalizeTarget(e);for(let s=0;s<n.length;s++){const r=document.createElement("style");r.innerHTML=n[s],r.className=i,e.append(r)}super.addStylesTo(e)}removeStylesFrom(e){e=this.normalizeTarget(e);const n=e.querySelectorAll(`.${this.styleClass}`);for(let i=0,s=n.length;i<s;++i)e.removeChild(n[i]);super.removeStylesFrom(e)}isAttachedTo(e){return super.isAttachedTo(this.normalizeTarget(e))}normalizeTarget(e){return e===document?document.body:e}}const Xi=Object.freeze({locate:sc()}),vc={toView(t){return t?"true":"false"},fromView(t){return!(t==null||t==="false"||t===!1||t===0)}},ys={toView(t){if(t==null)return null;const e=t*1;return isNaN(e)?null:e.toString()},fromView(t){if(t==null)return null;const e=t*1;return isNaN(e)?null:e}};class Zi{constructor(e,n,i=n.toLowerCase(),s="reflect",r){this.guards=new Set,this.Owner=e,this.name=n,this.attribute=i,this.mode=s,this.converter=r,this.fieldName=`_${n}`,this.callbackName=`${n}Changed`,this.hasCallback=this.callbackName in e.prototype,s==="boolean"&&r===void 0&&(this.converter=vc)}setValue(e,n){const i=e[this.fieldName],s=this.converter;s!==void 0&&(n=s.fromView(n)),i!==n&&(e[this.fieldName]=n,this.tryReflectToAttribute(e),this.hasCallback&&e[this.callbackName](i,n),e.$fastController.notify(this.name))}getValue(e){return de.track(e,this.name),e[this.fieldName]}onAttributeChangedCallback(e,n){this.guards.has(e)||(this.guards.add(e),this.setValue(e,n),this.guards.delete(e))}tryReflectToAttribute(e){const n=this.mode,i=this.guards;i.has(e)||n==="fromView"||he.queueUpdate(()=>{i.add(e);const s=e[this.fieldName];switch(n){case"reflect":const r=this.converter;he.setAttribute(e,this.attribute,r!==void 0?r.toView(s):s);break;case"boolean":he.setBooleanAttribute(e,this.attribute,s);break}i.delete(e)})}static collect(e,...n){const i=[];n.push(Xi.locate(e));for(let s=0,r=n.length;s<r;++s){const o=n[s];if(o!==void 0)for(let l=0,a=o.length;l<a;++l){const u=o[l];typeof u=="string"?i.push(new Zi(e,u)):i.push(new Zi(e,u.property,u.attribute,u.mode,u.converter))}}return i}}function j(t,e){let n;function i(s,r){arguments.length>1&&(n.property=r),Xi.locate(s.constructor).push(n)}if(arguments.length>1){n={},i(t,e);return}return n=t===void 0?{}:t,i}const ll={mode:"open"},al={},_r=di.getById(4,()=>{const t=new Map;return Object.freeze({register(e){return t.has(e.type)?!1:(t.set(e.type,e),!0)},getByType(e){return t.get(e)}})});class Ss{constructor(e,n=e.definition){typeof n=="string"&&(n={name:n}),this.type=e,this.name=n.name,this.template=n.template;const i=Zi.collect(e,n.attributes),s=new Array(i.length),r={},o={};for(let l=0,a=i.length;l<a;++l){const u=i[l];s[l]=u.attribute,r[u.name]=u,o[u.attribute]=u}this.attributes=i,this.observedAttributes=s,this.propertyLookup=r,this.attributeLookup=o,this.shadowOptions=n.shadowOptions===void 0?ll:n.shadowOptions===null?void 0:Object.assign(Object.assign({},ll),n.shadowOptions),this.elementOptions=n.elementOptions===void 0?al:Object.assign(Object.assign({},al),n.elementOptions),this.styles=n.styles===void 0?void 0:Array.isArray(n.styles)?it.create(n.styles):n.styles instanceof it?n.styles:it.create([n.styles])}get isDefined(){return!!_r.getByType(this.type)}define(e=customElements){const n=this.type;if(_r.register(this)){const i=this.attributes,s=n.prototype;for(let r=0,o=i.length;r<o;++r)de.defineProperty(s,i[r]);Reflect.defineProperty(n,"observedAttributes",{value:this.observedAttributes,enumerable:!0})}return e.get(this.name)||e.define(this.name,n,this.elementOptions),this}}Ss.forType=_r.getByType;const mc=new WeakMap,dh={bubbles:!0,composed:!0,cancelable:!0};function Ws(t){return t.shadowRoot||mc.get(t)||null}class no extends lc{constructor(e,n){super(e),this.boundObservables=null,this.behaviors=null,this.needsInitialization=!0,this._template=null,this._styles=null,this._isConnected=!1,this.$fastController=this,this.view=null,this.element=e,this.definition=n;const i=n.shadowOptions;if(i!==void 0){const r=e.attachShadow(i);i.mode==="closed"&&mc.set(e,r)}const s=de.getAccessors(e);if(s.length>0){const r=this.boundObservables=Object.create(null);for(let o=0,l=s.length;o<l;++o){const a=s[o].name,u=e[a];u!==void 0&&(delete e[a],r[a]=u)}}}get isConnected(){return de.track(this,"isConnected"),this._isConnected}setIsConnected(e){this._isConnected=e,de.notify(this,"isConnected")}get template(){return this._template}set template(e){this._template!==e&&(this._template=e,this.needsInitialization||this.renderTemplate(e))}get styles(){return this._styles}set styles(e){this._styles!==e&&(this._styles!==null&&this.removeStyles(this._styles),this._styles=e,!this.needsInitialization&&e!==null&&this.addStyles(e))}addStyles(e){const n=Ws(this.element)||this.element.getRootNode();if(e instanceof HTMLStyleElement)n.append(e);else if(!e.isAttachedTo(n)){const i=e.behaviors;e.addStylesTo(n),i!==null&&this.addBehaviors(i)}}removeStyles(e){const n=Ws(this.element)||this.element.getRootNode();if(e instanceof HTMLStyleElement)n.removeChild(e);else if(e.isAttachedTo(n)){const i=e.behaviors;e.removeStylesFrom(n),i!==null&&this.removeBehaviors(i)}}addBehaviors(e){const n=this.behaviors||(this.behaviors=new Map),i=e.length,s=[];for(let r=0;r<i;++r){const o=e[r];n.has(o)?n.set(o,n.get(o)+1):(n.set(o,1),s.push(o))}if(this._isConnected){const r=this.element;for(let o=0;o<s.length;++o)s[o].bind(r,ti)}}removeBehaviors(e,n=!1){const i=this.behaviors;if(i===null)return;const s=e.length,r=[];for(let o=0;o<s;++o){const l=e[o];if(i.has(l)){const a=i.get(l)-1;a===0||n?i.delete(l)&&r.push(l):i.set(l,a)}}if(this._isConnected){const o=this.element;for(let l=0;l<r.length;++l)r[l].unbind(o)}}onConnectedCallback(){if(this._isConnected)return;const e=this.element;this.needsInitialization?this.finishInitialization():this.view!==null&&this.view.bind(e,ti);const n=this.behaviors;if(n!==null)for(const[i]of n)i.bind(e,ti);this.setIsConnected(!0)}onDisconnectedCallback(){if(!this._isConnected)return;this.setIsConnected(!1);const e=this.view;e!==null&&e.unbind();const n=this.behaviors;if(n!==null){const i=this.element;for(const[s]of n)s.unbind(i)}}onAttributeChangedCallback(e,n,i){const s=this.definition.attributeLookup[e];s!==void 0&&s.onAttributeChangedCallback(this.element,i)}emit(e,n,i){return this._isConnected?this.element.dispatchEvent(new CustomEvent(e,Object.assign(Object.assign({detail:n},dh),i))):!1}finishInitialization(){const e=this.element,n=this.boundObservables;if(n!==null){const s=Object.keys(n);for(let r=0,o=s.length;r<o;++r){const l=s[r];e[l]=n[l]}this.boundObservables=null}const i=this.definition;this._template===null&&(this.element.resolveTemplate?this._template=this.element.resolveTemplate():i.template&&(this._template=i.template||null)),this._template!==null&&this.renderTemplate(this._template),this._styles===null&&(this.element.resolveStyles?this._styles=this.element.resolveStyles():i.styles&&(this._styles=i.styles||null)),this._styles!==null&&this.addStyles(this._styles),this.needsInitialization=!1}renderTemplate(e){const n=this.element,i=Ws(n)||n;this.view!==null?(this.view.dispose(),this.view=null):this.needsInitialization||he.removeChildNodes(i),e&&(this.view=e.render(n,i,n))}static forCustomElement(e){const n=e.$fastController;if(n!==void 0)return n;const i=Ss.forType(e.constructor);if(i===void 0)throw new Error("Missing FASTElement definition.");return e.$fastController=new no(e,i)}}function cl(t){return class extends t{constructor(){super(),no.forCustomElement(this)}$emit(e,n,i){return this.$fastController.emit(e,n,i)}connectedCallback(){this.$fastController.onConnectedCallback()}disconnectedCallback(){this.$fastController.onDisconnectedCallback()}attributeChangedCallback(e,n,i){this.$fastController.onAttributeChangedCallback(e,n,i)}}}const xs=Object.assign(cl(HTMLElement),{from(t){return cl(t)},define(t,e){return new Ss(t,e).define().type}});class bc{createCSS(){return""}createBehavior(){}}function fh(t,e){const n=[];let i="";const s=[];for(let r=0,o=t.length-1;r<o;++r){i+=t[r];let l=e[r];if(l instanceof bc){const a=l.createBehavior();l=l.createCSS(),a&&s.push(a)}l instanceof it||l instanceof CSSStyleSheet?(i.trim()!==""&&(n.push(i),i=""),n.push(l)):i+=l}return i+=t[t.length-1],i.trim()!==""&&n.push(i),{styles:n,behaviors:s}}function Rt(t,...e){const{styles:n,behaviors:i}=fh(t,e),s=it.create(n);return i.length&&s.withBehaviors(...i),s}class hh{constructor(e,n){this.target=e,this.propertyName=n}bind(e){e[this.propertyName]=this.target}unbind(){}}function xt(t){return new cc("fast-ref",hh,t)}const yc=t=>typeof t=="function",ph=()=>null;function ul(t){return t===void 0?ph:yc(t)?t:()=>t}function Sc(t,e,n){const i=yc(t)?t:()=>t,s=ul(e),r=ul(n);return(o,l)=>i(o,l)?s(o,l):r(o,l)}class gh{constructor(e,n){this.target=e,this.options=n,this.source=null}bind(e){const n=this.options.property;this.shouldUpdate=de.getAccessors(e).some(i=>i.name===n),this.source=e,this.updateTarget(this.computeNodes()),this.shouldUpdate&&this.observe()}unbind(){this.updateTarget(Kn),this.source=null,this.shouldUpdate&&this.disconnect()}handleEvent(){this.updateTarget(this.computeNodes())}computeNodes(){let e=this.getNodes();return this.options.filter!==void 0&&(e=e.filter(this.options.filter)),e}updateTarget(e){this.source[this.options.property]=e}}class vh extends gh{constructor(e,n){super(e,n)}observe(){this.target.addEventListener("slotchange",this)}disconnect(){this.target.removeEventListener("slotchange",this)}getNodes(){return this.target.assignedNodes(this.options)}}function ws(t){return typeof t=="string"&&(t={property:t}),new cc("fast-slotted",vh,t)}class io{handleStartContentChange(){this.startContainer.classList.toggle("start",this.start.assignedNodes().length>0)}handleEndContentChange(){this.endContainer.classList.toggle("end",this.end.assignedNodes().length>0)}}const so=(t,e)=>ct`
    <span
        part="end"
        ${xt("endContainer")}
        class=${n=>e.end?"end":void 0}
    >
        <slot name="end" ${xt("end")} @slotchange="${n=>n.handleEndContentChange()}">
            ${e.end||""}
        </slot>
    </span>
`,ro=(t,e)=>ct`
    <span
        part="start"
        ${xt("startContainer")}
        class="${n=>e.start?"start":void 0}"
    >
        <slot
            name="start"
            ${xt("start")}
            @slotchange="${n=>n.handleStartContentChange()}"
        >
            ${e.start||""}
        </slot>
    </span>
`;ct`
    <span part="end" ${xt("endContainer")}>
        <slot
            name="end"
            ${xt("end")}
            @slotchange="${t=>t.handleEndContentChange()}"
        ></slot>
    </span>
`;ct`
    <span part="start" ${xt("startContainer")}>
        <slot
            name="start"
            ${xt("start")}
            @slotchange="${t=>t.handleStartContentChange()}"
        ></slot>
    </span>
`;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function P(t,e,n,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,e,n,i);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(r=(s<3?o(r):s>3?o(e,n,r):o(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r}const Ys=new Map;"metadata"in Reflect||(Reflect.metadata=function(t,e){return function(n){Reflect.defineMetadata(t,e,n)}},Reflect.defineMetadata=function(t,e,n){let i=Ys.get(n);i===void 0&&Ys.set(n,i=new Map),i.set(t,e)},Reflect.getOwnMetadata=function(t,e){const n=Ys.get(e);if(n!==void 0)return n.get(t)});class mh{constructor(e,n){this.container=e,this.key=n}instance(e){return this.registerResolver(0,e)}singleton(e){return this.registerResolver(1,e)}transient(e){return this.registerResolver(2,e)}callback(e){return this.registerResolver(3,e)}cachedCallback(e){return this.registerResolver(3,wc(e))}aliasTo(e){return this.registerResolver(5,e)}registerResolver(e,n){const{container:i,key:s}=this;return this.container=this.key=void 0,i.registerResolver(s,new ht(s,e,n))}}function Vn(t){const e=t.slice(),n=Object.keys(t),i=n.length;let s;for(let r=0;r<i;++r)s=n[r],_c(s)||(e[s]=t[s]);return e}const bh=Object.freeze({none(t){throw Error(`${t.toString()} not registered, did you forget to add @singleton()?`)},singleton(t){return new ht(t,1,t)},transient(t){return new ht(t,2,t)}}),Gs=Object.freeze({default:Object.freeze({parentLocator:()=>null,responsibleForOwnerRequests:!1,defaultResolver:bh.singleton})}),dl=new Map;function fl(t){return e=>Reflect.getOwnMetadata(t,e)}let hl=null;const ke=Object.freeze({createContainer(t){return new ni(null,Object.assign({},Gs.default,t))},findResponsibleContainer(t){const e=t.$$container$$;return e&&e.responsibleForOwnerRequests?e:ke.findParentContainer(t)},findParentContainer(t){const e=new CustomEvent(xc,{bubbles:!0,composed:!0,cancelable:!0,detail:{container:void 0}});return t.dispatchEvent(e),e.detail.container||ke.getOrCreateDOMContainer()},getOrCreateDOMContainer(t,e){return t?t.$$container$$||new ni(t,Object.assign({},Gs.default,e,{parentLocator:ke.findParentContainer})):hl||(hl=new ni(null,Object.assign({},Gs.default,e,{parentLocator:()=>null})))},getDesignParamtypes:fl("design:paramtypes"),getAnnotationParamtypes:fl("di:paramtypes"),getOrCreateAnnotationParamTypes(t){let e=this.getAnnotationParamtypes(t);return e===void 0&&Reflect.defineMetadata("di:paramtypes",e=[],t),e},getDependencies(t){let e=dl.get(t);if(e===void 0){const n=t.inject;if(n===void 0){const i=ke.getDesignParamtypes(t),s=ke.getAnnotationParamtypes(t);if(i===void 0)if(s===void 0){const r=Object.getPrototypeOf(t);typeof r=="function"&&r!==Function.prototype?e=Vn(ke.getDependencies(r)):e=[]}else e=Vn(s);else if(s===void 0)e=Vn(i);else{e=Vn(i);let r=s.length,o;for(let u=0;u<r;++u)o=s[u],o!==void 0&&(e[u]=o);const l=Object.keys(s);r=l.length;let a;for(let u=0;u<r;++u)a=l[u],_c(a)||(e[a]=s[a])}}else e=Vn(n);dl.set(t,e)}return e},defineProperty(t,e,n,i=!1){const s=`$di_${e}`;Reflect.defineProperty(t,e,{get:function(){let r=this[s];if(r===void 0&&(r=(this instanceof HTMLElement?ke.findResponsibleContainer(this):ke.getOrCreateDOMContainer()).get(n),this[s]=r,i&&this instanceof xs)){const l=this.$fastController,a=()=>{const c=ke.findResponsibleContainer(this).get(n),h=this[s];c!==h&&(this[s]=r,l.notify(e))};l.subscribe({handleChange:a},"isConnected")}return r}})},createInterface(t,e){const n=typeof t=="function"?t:e,i=typeof t=="string"?t:t&&"friendlyName"in t&&t.friendlyName||ml,s=typeof t=="string"?!1:t&&"respectConnection"in t&&t.respectConnection||!1,r=function(o,l,a){if(o==null||new.target!==void 0)throw new Error(`No registration for interface: '${r.friendlyName}'`);if(l)ke.defineProperty(o,l,r,s);else{const u=ke.getOrCreateAnnotationParamTypes(o);u[a]=r}};return r.$isInterface=!0,r.friendlyName=i??"(anonymous)",n!=null&&(r.register=function(o,l){return n(new mh(o,l??r))}),r.toString=function(){return`InterfaceSymbol<${r.friendlyName}>`},r},inject(...t){return function(e,n,i){if(typeof i=="number"){const s=ke.getOrCreateAnnotationParamTypes(e),r=t[0];r!==void 0&&(s[i]=r)}else if(n)ke.defineProperty(e,n,t[0]);else{const s=i?ke.getOrCreateAnnotationParamTypes(i.value):ke.getOrCreateAnnotationParamTypes(e);let r;for(let o=0;o<t.length;++o)r=t[o],r!==void 0&&(s[o]=r)}}},transient(t){return t.register=function(n){return hi.transient(t,t).register(n)},t.registerInRequestor=!1,t},singleton(t,e=Sh){return t.register=function(i){return hi.singleton(t,t).register(i)},t.registerInRequestor=e.scoped,t}}),yh=ke.createInterface("Container");ke.inject;const Sh={scoped:!1};class ht{constructor(e,n,i){this.key=e,this.strategy=n,this.state=i,this.resolving=!1}get $isResolver(){return!0}register(e){return e.registerResolver(this.key,this)}resolve(e,n){switch(this.strategy){case 0:return this.state;case 1:{if(this.resolving)throw new Error(`Cyclic dependency found: ${this.state.name}`);return this.resolving=!0,this.state=e.getFactory(this.state).construct(n),this.strategy=0,this.resolving=!1,this.state}case 2:{const i=e.getFactory(this.state);if(i===null)throw new Error(`Resolver for ${String(this.key)} returned a null factory`);return i.construct(n)}case 3:return this.state(e,n,this);case 4:return this.state[0].resolve(e,n);case 5:return n.get(this.state);default:throw new Error(`Invalid resolver strategy specified: ${this.strategy}.`)}}getFactory(e){var n,i,s;switch(this.strategy){case 1:case 2:return e.getFactory(this.state);case 5:return(s=(i=(n=e.getResolver(this.state))===null||n===void 0?void 0:n.getFactory)===null||i===void 0?void 0:i.call(n,e))!==null&&s!==void 0?s:null;default:return null}}}function pl(t){return this.get(t)}function xh(t,e){return e(t)}class wh{constructor(e,n){this.Type=e,this.dependencies=n,this.transformers=null}construct(e,n){let i;return n===void 0?i=new this.Type(...this.dependencies.map(pl,e)):i=new this.Type(...this.dependencies.map(pl,e),...n),this.transformers==null?i:this.transformers.reduce(xh,i)}registerTransformer(e){(this.transformers||(this.transformers=[])).push(e)}}const _h={$isResolver:!0,resolve(t,e){return e}};function Mi(t){return typeof t.register=="function"}function Ch(t){return Mi(t)&&typeof t.registerInRequestor=="boolean"}function gl(t){return Ch(t)&&t.registerInRequestor}function kh(t){return t.prototype!==void 0}const Eh=new Set(["Array","ArrayBuffer","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet"]),xc="__DI_LOCATE_PARENT__",Js=new Map;class ni{constructor(e,n){this.owner=e,this.config=n,this._parent=void 0,this.registerDepth=0,this.context=null,e!==null&&(e.$$container$$=this),this.resolvers=new Map,this.resolvers.set(yh,_h),e instanceof Node&&e.addEventListener(xc,i=>{i.composedPath()[0]!==this.owner&&(i.detail.container=this,i.stopImmediatePropagation())})}get parent(){return this._parent===void 0&&(this._parent=this.config.parentLocator(this.owner)),this._parent}get depth(){return this.parent===null?0:this.parent.depth+1}get responsibleForOwnerRequests(){return this.config.responsibleForOwnerRequests}registerWithContext(e,...n){return this.context=e,this.register(...n),this.context=null,this}register(...e){if(++this.registerDepth===100)throw new Error("Unable to autoregister dependency");let n,i,s,r,o;const l=this.context;for(let a=0,u=e.length;a<u;++a)if(n=e[a],!!bl(n))if(Mi(n))n.register(this,l);else if(kh(n))hi.singleton(n,n).register(this);else for(i=Object.keys(n),r=0,o=i.length;r<o;++r)s=n[i[r]],bl(s)&&(Mi(s)?s.register(this,l):this.register(s));return--this.registerDepth,this}registerResolver(e,n){_i(e);const i=this.resolvers,s=i.get(e);return s==null?i.set(e,n):s instanceof ht&&s.strategy===4?s.state.push(n):i.set(e,new ht(e,4,[s,n])),n}registerTransformer(e,n){const i=this.getResolver(e);if(i==null)return!1;if(i.getFactory){const s=i.getFactory(this);return s==null?!1:(s.registerTransformer(n),!0)}return!1}getResolver(e,n=!0){if(_i(e),e.resolve!==void 0)return e;let i=this,s;for(;i!=null;)if(s=i.resolvers.get(e),s==null){if(i.parent==null){const r=gl(e)?this:i;return n?this.jitRegister(e,r):null}i=i.parent}else return s;return null}has(e,n=!1){return this.resolvers.has(e)?!0:n&&this.parent!=null?this.parent.has(e,!0):!1}get(e){if(_i(e),e.$isResolver)return e.resolve(this,this);let n=this,i;for(;n!=null;)if(i=n.resolvers.get(e),i==null){if(n.parent==null){const s=gl(e)?this:n;return i=this.jitRegister(e,s),i.resolve(n,this)}n=n.parent}else return i.resolve(n,this);throw new Error(`Unable to resolve key: ${String(e)}`)}getAll(e,n=!1){_i(e);const i=this;let s=i,r;if(n){let o=Kn;for(;s!=null;)r=s.resolvers.get(e),r!=null&&(o=o.concat(vl(r,s,i))),s=s.parent;return o}else for(;s!=null;)if(r=s.resolvers.get(e),r==null){if(s=s.parent,s==null)return Kn}else return vl(r,s,i);return Kn}getFactory(e){let n=Js.get(e);if(n===void 0){if($h(e))throw new Error(`${e.name} is a native function and therefore cannot be safely constructed by DI. If this is intentional, please use a callback or cachedCallback resolver.`);Js.set(e,n=new wh(e,ke.getDependencies(e)))}return n}registerFactory(e,n){Js.set(e,n)}createChild(e){return new ni(null,Object.assign({},this.config,e,{parentLocator:()=>this}))}jitRegister(e,n){if(typeof e!="function")throw new Error(`Attempted to jitRegister something that is not a constructor: '${e}'. Did you forget to register this dependency?`);if(Eh.has(e.name))throw new Error(`Attempted to jitRegister an intrinsic type: ${e.name}. Did you forget to add @inject(Key)`);if(Mi(e)){const i=e.register(n);if(!(i instanceof Object)||i.resolve==null){const s=n.resolvers.get(e);if(s!=null)return s;throw new Error("A valid resolver was not returned from the static register method")}return i}else{if(e.$isInterface)throw new Error(`Attempted to jitRegister an interface: ${e.friendlyName}`);{const i=this.config.defaultResolver(e,n);return n.resolvers.set(e,i),i}}}}const Qs=new WeakMap;function wc(t){return function(e,n,i){if(Qs.has(i))return Qs.get(i);const s=t(e,n,i);return Qs.set(i,s),s}}const hi=Object.freeze({instance(t,e){return new ht(t,0,e)},singleton(t,e){return new ht(t,1,e)},transient(t,e){return new ht(t,2,e)},callback(t,e){return new ht(t,3,e)},cachedCallback(t,e){return new ht(t,3,wc(e))},aliasTo(t,e){return new ht(e,5,t)}});function _i(t){if(t==null)throw new Error("key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?")}function vl(t,e,n){if(t instanceof ht&&t.strategy===4){const i=t.state;let s=i.length;const r=new Array(s);for(;s--;)r[s]=i[s].resolve(e,n);return r}return[t.resolve(e,n)]}const ml="(anonymous)";function bl(t){return typeof t=="object"&&t!==null||typeof t=="function"}const $h=function(){const t=new WeakMap;let e=!1,n="",i=0;return function(s){return e=t.get(s),e===void 0&&(n=s.toString(),i=n.length,e=i>=29&&i<=100&&n.charCodeAt(i-1)===125&&n.charCodeAt(i-2)<=32&&n.charCodeAt(i-3)===93&&n.charCodeAt(i-4)===101&&n.charCodeAt(i-5)===100&&n.charCodeAt(i-6)===111&&n.charCodeAt(i-7)===99&&n.charCodeAt(i-8)===32&&n.charCodeAt(i-9)===101&&n.charCodeAt(i-10)===118&&n.charCodeAt(i-11)===105&&n.charCodeAt(i-12)===116&&n.charCodeAt(i-13)===97&&n.charCodeAt(i-14)===110&&n.charCodeAt(i-15)===88,t.set(s,e)),e}}(),Ci={};function _c(t){switch(typeof t){case"number":return t>=0&&(t|0)===t;case"string":{const e=Ci[t];if(e!==void 0)return e;const n=t.length;if(n===0)return Ci[t]=!1;let i=0;for(let s=0;s<n;++s)if(i=t.charCodeAt(s),s===0&&i===48&&n>1||i<48||i>57)return Ci[t]=!1;return Ci[t]=!0}default:return!1}}function yl(t){return`${t.toLowerCase()}:presentation`}const ki=new Map,Cc=Object.freeze({define(t,e,n){const i=yl(t);ki.get(i)===void 0?ki.set(i,e):ki.set(i,!1),n.register(hi.instance(i,e))},forTag(t,e){const n=yl(t),i=ki.get(n);return i===!1?ke.findResponsibleContainer(e).get(n):i||null}});class Ih{constructor(e,n){this.template=e||null,this.styles=n===void 0?null:Array.isArray(n)?it.create(n):n instanceof it?n:it.create([n])}applyTo(e){const n=e.$fastController;n.template===null&&(n.template=this.template),n.styles===null&&(n.styles=this.styles)}}class vt extends xs{constructor(){super(...arguments),this._presentation=void 0}get $presentation(){return this._presentation===void 0&&(this._presentation=Cc.forTag(this.tagName,this)),this._presentation}templateChanged(){this.template!==void 0&&(this.$fastController.template=this.template)}stylesChanged(){this.styles!==void 0&&(this.$fastController.styles=this.styles)}connectedCallback(){this.$presentation!==null&&this.$presentation.applyTo(this),super.connectedCallback()}static compose(e){return(n={})=>new Oh(this===vt?class extends vt{}:this,e,n)}}P([ae],vt.prototype,"template",void 0);P([ae],vt.prototype,"styles",void 0);function Hn(t,e,n){return typeof t=="function"?t(e,n):t}class Oh{constructor(e,n,i){this.type=e,this.elementDefinition=n,this.overrideDefinition=i,this.definition=Object.assign(Object.assign({},this.elementDefinition),this.overrideDefinition)}register(e,n){const i=this.definition,s=this.overrideDefinition,o=`${i.prefix||n.elementPrefix}-${i.baseName}`;n.tryDefineElement({name:o,type:this.type,baseClass:this.elementDefinition.baseClass,callback:l=>{const a=new Ih(Hn(i.template,l,i),Hn(i.styles,l,i));l.definePresentation(a);let u=Hn(i.shadowOptions,l,i);l.shadowRootMode&&(u?s.shadowOptions||(u.mode=l.shadowRootMode):u!==null&&(u={mode:l.shadowRootMode})),l.defineElement({elementOptions:Hn(i.elementOptions,l,i),shadowOptions:u,attributes:Hn(i.attributes,l,i)})}})}}function sn(t,...e){const n=Xi.locate(t);e.forEach(i=>{Object.getOwnPropertyNames(i.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(t.prototype,r,Object.getOwnPropertyDescriptor(i.prototype,r))}),Xi.locate(i).forEach(r=>n.push(r))})}const Rh={horizontal:"horizontal"};function Ah(t,e){let n=t.length;for(;n--;)if(e(t[n],n,t))return n;return-1}function Ph(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Th(...t){return t.every(e=>e instanceof HTMLElement)}function Dh(){const t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}let an;function Mh(){if(typeof an=="boolean")return an;if(!Ph())return an=!1,an;const t=document.createElement("style"),e=Dh();e!==null&&t.setAttribute("nonce",e),document.head.appendChild(t);try{t.sheet.insertRule("foo:focus-visible {color:inherit}",0),an=!0}catch{an=!1}finally{document.head.removeChild(t)}return an}var Sl;(function(t){t[t.alt=18]="alt",t[t.arrowDown=40]="arrowDown",t[t.arrowLeft=37]="arrowLeft",t[t.arrowRight=39]="arrowRight",t[t.arrowUp=38]="arrowUp",t[t.back=8]="back",t[t.backSlash=220]="backSlash",t[t.break=19]="break",t[t.capsLock=20]="capsLock",t[t.closeBracket=221]="closeBracket",t[t.colon=186]="colon",t[t.colon2=59]="colon2",t[t.comma=188]="comma",t[t.ctrl=17]="ctrl",t[t.delete=46]="delete",t[t.end=35]="end",t[t.enter=13]="enter",t[t.equals=187]="equals",t[t.equals2=61]="equals2",t[t.equals3=107]="equals3",t[t.escape=27]="escape",t[t.forwardSlash=191]="forwardSlash",t[t.function1=112]="function1",t[t.function10=121]="function10",t[t.function11=122]="function11",t[t.function12=123]="function12",t[t.function2=113]="function2",t[t.function3=114]="function3",t[t.function4=115]="function4",t[t.function5=116]="function5",t[t.function6=117]="function6",t[t.function7=118]="function7",t[t.function8=119]="function8",t[t.function9=120]="function9",t[t.home=36]="home",t[t.insert=45]="insert",t[t.menu=93]="menu",t[t.minus=189]="minus",t[t.minus2=109]="minus2",t[t.numLock=144]="numLock",t[t.numPad0=96]="numPad0",t[t.numPad1=97]="numPad1",t[t.numPad2=98]="numPad2",t[t.numPad3=99]="numPad3",t[t.numPad4=100]="numPad4",t[t.numPad5=101]="numPad5",t[t.numPad6=102]="numPad6",t[t.numPad7=103]="numPad7",t[t.numPad8=104]="numPad8",t[t.numPad9=105]="numPad9",t[t.numPadDivide=111]="numPadDivide",t[t.numPadDot=110]="numPadDot",t[t.numPadMinus=109]="numPadMinus",t[t.numPadMultiply=106]="numPadMultiply",t[t.numPadPlus=107]="numPadPlus",t[t.openBracket=219]="openBracket",t[t.pageDown=34]="pageDown",t[t.pageUp=33]="pageUp",t[t.period=190]="period",t[t.print=44]="print",t[t.quote=222]="quote",t[t.scrollLock=145]="scrollLock",t[t.shift=16]="shift",t[t.space=32]="space",t[t.tab=9]="tab",t[t.tilde=192]="tilde",t[t.windowsLeft=91]="windowsLeft",t[t.windowsOpera=219]="windowsOpera",t[t.windowsRight=92]="windowsRight"})(Sl||(Sl={}));const oo="ArrowDown";const lo="ArrowUp",ao="Enter",co="Escape",uo="Home",fo="End";const _s=" ",ho="Tab";function Ei(t,e,n=0){return[e,n]=[e,n].sort((i,s)=>i-s),e<=t&&t<n}let Nh=0;function kc(t=""){return`${t}${Nh++}`}class $e{}P([j({attribute:"aria-atomic"})],$e.prototype,"ariaAtomic",void 0);P([j({attribute:"aria-busy"})],$e.prototype,"ariaBusy",void 0);P([j({attribute:"aria-controls"})],$e.prototype,"ariaControls",void 0);P([j({attribute:"aria-current"})],$e.prototype,"ariaCurrent",void 0);P([j({attribute:"aria-describedby"})],$e.prototype,"ariaDescribedby",void 0);P([j({attribute:"aria-details"})],$e.prototype,"ariaDetails",void 0);P([j({attribute:"aria-disabled"})],$e.prototype,"ariaDisabled",void 0);P([j({attribute:"aria-errormessage"})],$e.prototype,"ariaErrormessage",void 0);P([j({attribute:"aria-flowto"})],$e.prototype,"ariaFlowto",void 0);P([j({attribute:"aria-haspopup"})],$e.prototype,"ariaHaspopup",void 0);P([j({attribute:"aria-hidden"})],$e.prototype,"ariaHidden",void 0);P([j({attribute:"aria-invalid"})],$e.prototype,"ariaInvalid",void 0);P([j({attribute:"aria-keyshortcuts"})],$e.prototype,"ariaKeyshortcuts",void 0);P([j({attribute:"aria-label"})],$e.prototype,"ariaLabel",void 0);P([j({attribute:"aria-labelledby"})],$e.prototype,"ariaLabelledby",void 0);P([j({attribute:"aria-live"})],$e.prototype,"ariaLive",void 0);P([j({attribute:"aria-owns"})],$e.prototype,"ariaOwns",void 0);P([j({attribute:"aria-relevant"})],$e.prototype,"ariaRelevant",void 0);P([j({attribute:"aria-roledescription"})],$e.prototype,"ariaRoledescription",void 0);const Fh=(t,e)=>ct`
    <button
        class="control"
        part="control"
        ?autofocus="${n=>n.autofocus}"
        ?disabled="${n=>n.disabled}"
        form="${n=>n.formId}"
        formaction="${n=>n.formaction}"
        formenctype="${n=>n.formenctype}"
        formmethod="${n=>n.formmethod}"
        formnovalidate="${n=>n.formnovalidate}"
        formtarget="${n=>n.formtarget}"
        name="${n=>n.name}"
        type="${n=>n.type}"
        value="${n=>n.value}"
        aria-atomic="${n=>n.ariaAtomic}"
        aria-busy="${n=>n.ariaBusy}"
        aria-controls="${n=>n.ariaControls}"
        aria-current="${n=>n.ariaCurrent}"
        aria-describedby="${n=>n.ariaDescribedby}"
        aria-details="${n=>n.ariaDetails}"
        aria-disabled="${n=>n.ariaDisabled}"
        aria-errormessage="${n=>n.ariaErrormessage}"
        aria-expanded="${n=>n.ariaExpanded}"
        aria-flowto="${n=>n.ariaFlowto}"
        aria-haspopup="${n=>n.ariaHaspopup}"
        aria-hidden="${n=>n.ariaHidden}"
        aria-invalid="${n=>n.ariaInvalid}"
        aria-keyshortcuts="${n=>n.ariaKeyshortcuts}"
        aria-label="${n=>n.ariaLabel}"
        aria-labelledby="${n=>n.ariaLabelledby}"
        aria-live="${n=>n.ariaLive}"
        aria-owns="${n=>n.ariaOwns}"
        aria-pressed="${n=>n.ariaPressed}"
        aria-relevant="${n=>n.ariaRelevant}"
        aria-roledescription="${n=>n.ariaRoledescription}"
        ${xt("control")}
    >
        ${ro(t,e)}
        <span class="content" part="content">
            <slot ${ws("defaultSlottedContent")}></slot>
        </span>
        ${so(t,e)}
    </button>
`,xl="form-associated-proxy",wl="ElementInternals",_l=wl in window&&"setFormValue"in window[wl].prototype,Cl=new WeakMap;function po(t){const e=class extends t{constructor(...n){super(...n),this.dirtyValue=!1,this.disabled=!1,this.proxyEventsToBlock=["change","click"],this.proxyInitialized=!1,this.required=!1,this.initialValue=this.initialValue||"",this.elementInternals||(this.formResetCallback=this.formResetCallback.bind(this))}static get formAssociated(){return _l}get validity(){return this.elementInternals?this.elementInternals.validity:this.proxy.validity}get form(){return this.elementInternals?this.elementInternals.form:this.proxy.form}get validationMessage(){return this.elementInternals?this.elementInternals.validationMessage:this.proxy.validationMessage}get willValidate(){return this.elementInternals?this.elementInternals.willValidate:this.proxy.willValidate}get labels(){if(this.elementInternals)return Object.freeze(Array.from(this.elementInternals.labels));if(this.proxy instanceof HTMLElement&&this.proxy.ownerDocument&&this.id){const n=this.proxy.labels,i=Array.from(this.proxy.getRootNode().querySelectorAll(`[for='${this.id}']`)),s=n?i.concat(Array.from(n)):i;return Object.freeze(s)}else return Kn}valueChanged(n,i){this.dirtyValue=!0,this.proxy instanceof HTMLElement&&(this.proxy.value=this.value),this.currentValue=this.value,this.setFormValue(this.value),this.validate()}currentValueChanged(){this.value=this.currentValue}initialValueChanged(n,i){this.dirtyValue||(this.value=this.initialValue,this.dirtyValue=!1)}disabledChanged(n,i){this.proxy instanceof HTMLElement&&(this.proxy.disabled=this.disabled),he.queueUpdate(()=>this.classList.toggle("disabled",this.disabled))}nameChanged(n,i){this.proxy instanceof HTMLElement&&(this.proxy.name=this.name)}requiredChanged(n,i){this.proxy instanceof HTMLElement&&(this.proxy.required=this.required),he.queueUpdate(()=>this.classList.toggle("required",this.required)),this.validate()}get elementInternals(){if(!_l)return null;let n=Cl.get(this);return n||(n=this.attachInternals(),Cl.set(this,n)),n}connectedCallback(){super.connectedCallback(),this.addEventListener("keypress",this._keypressHandler),this.value||(this.value=this.initialValue,this.dirtyValue=!1),this.elementInternals||(this.attachProxy(),this.form&&this.form.addEventListener("reset",this.formResetCallback))}disconnectedCallback(){super.disconnectedCallback(),this.proxyEventsToBlock.forEach(n=>this.proxy.removeEventListener(n,this.stopPropagation)),!this.elementInternals&&this.form&&this.form.removeEventListener("reset",this.formResetCallback)}checkValidity(){return this.elementInternals?this.elementInternals.checkValidity():this.proxy.checkValidity()}reportValidity(){return this.elementInternals?this.elementInternals.reportValidity():this.proxy.reportValidity()}setValidity(n,i,s){this.elementInternals?this.elementInternals.setValidity(n,i,s):typeof i=="string"&&this.proxy.setCustomValidity(i)}formDisabledCallback(n){this.disabled=n}formResetCallback(){this.value=this.initialValue,this.dirtyValue=!1}attachProxy(){var n;this.proxyInitialized||(this.proxyInitialized=!0,this.proxy.style.display="none",this.proxyEventsToBlock.forEach(i=>this.proxy.addEventListener(i,this.stopPropagation)),this.proxy.disabled=this.disabled,this.proxy.required=this.required,typeof this.name=="string"&&(this.proxy.name=this.name),typeof this.value=="string"&&(this.proxy.value=this.value),this.proxy.setAttribute("slot",xl),this.proxySlot=document.createElement("slot"),this.proxySlot.setAttribute("name",xl)),(n=this.shadowRoot)===null||n===void 0||n.appendChild(this.proxySlot),this.appendChild(this.proxy)}detachProxy(){var n;this.removeChild(this.proxy),(n=this.shadowRoot)===null||n===void 0||n.removeChild(this.proxySlot)}validate(n){this.proxy instanceof HTMLElement&&this.setValidity(this.proxy.validity,this.proxy.validationMessage,n)}setFormValue(n,i){this.elementInternals&&this.elementInternals.setFormValue(n,i||n)}_keypressHandler(n){switch(n.key){case ao:if(this.form instanceof HTMLFormElement){const i=this.form.querySelector("[type=submit]");i==null||i.click()}break}}stopPropagation(n){n.stopPropagation()}};return j({mode:"boolean"})(e.prototype,"disabled"),j({mode:"fromView",attribute:"value"})(e.prototype,"initialValue"),j({attribute:"current-value"})(e.prototype,"currentValue"),j(e.prototype,"name"),j({mode:"boolean"})(e.prototype,"required"),ae(e.prototype,"value"),e}function Lh(t){class e extends po(t){}class n extends e{constructor(...s){super(s),this.dirtyChecked=!1,this.checkedAttribute=!1,this.checked=!1,this.dirtyChecked=!1}checkedAttributeChanged(){this.defaultChecked=this.checkedAttribute}defaultCheckedChanged(){this.dirtyChecked||(this.checked=this.defaultChecked,this.dirtyChecked=!1)}checkedChanged(s,r){this.dirtyChecked||(this.dirtyChecked=!0),this.currentChecked=this.checked,this.updateForm(),this.proxy instanceof HTMLInputElement&&(this.proxy.checked=this.checked),s!==void 0&&this.$emit("change"),this.validate()}currentCheckedChanged(s,r){this.checked=this.currentChecked}updateForm(){const s=this.checked?this.value:null;this.setFormValue(s,s)}connectedCallback(){super.connectedCallback(),this.updateForm()}formResetCallback(){super.formResetCallback(),this.checked=!!this.checkedAttribute,this.dirtyChecked=!1}}return j({attribute:"checked",mode:"boolean"})(n.prototype,"checkedAttribute"),j({attribute:"current-checked",converter:vc})(n.prototype,"currentChecked"),ae(n.prototype,"defaultChecked"),ae(n.prototype,"checked"),n}class Bh extends vt{}class Vh extends po(Bh){constructor(){super(...arguments),this.proxy=document.createElement("input")}}let wt=class extends Vh{constructor(){super(...arguments),this.handleClick=e=>{var n;this.disabled&&((n=this.defaultSlottedContent)===null||n===void 0?void 0:n.length)<=1&&e.stopPropagation()},this.handleSubmission=()=>{if(!this.form)return;const e=this.proxy.isConnected;e||this.attachProxy(),typeof this.form.requestSubmit=="function"?this.form.requestSubmit(this.proxy):this.proxy.click(),e||this.detachProxy()},this.handleFormReset=()=>{var e;(e=this.form)===null||e===void 0||e.reset()},this.handleUnsupportedDelegatesFocus=()=>{var e;window.ShadowRoot&&!window.ShadowRoot.prototype.hasOwnProperty("delegatesFocus")&&(!((e=this.$fastController.definition.shadowOptions)===null||e===void 0)&&e.delegatesFocus)&&(this.focus=()=>{this.control.focus()})}}formactionChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formAction=this.formaction)}formenctypeChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formEnctype=this.formenctype)}formmethodChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formMethod=this.formmethod)}formnovalidateChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formNoValidate=this.formnovalidate)}formtargetChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formTarget=this.formtarget)}typeChanged(e,n){this.proxy instanceof HTMLInputElement&&(this.proxy.type=this.type),n==="submit"&&this.addEventListener("click",this.handleSubmission),e==="submit"&&this.removeEventListener("click",this.handleSubmission),n==="reset"&&this.addEventListener("click",this.handleFormReset),e==="reset"&&this.removeEventListener("click",this.handleFormReset)}validate(){super.validate(this.control)}connectedCallback(){var e;super.connectedCallback(),this.proxy.setAttribute("type",this.type),this.handleUnsupportedDelegatesFocus();const n=Array.from((e=this.control)===null||e===void 0?void 0:e.children);n&&n.forEach(i=>{i.addEventListener("click",this.handleClick)})}disconnectedCallback(){var e;super.disconnectedCallback();const n=Array.from((e=this.control)===null||e===void 0?void 0:e.children);n&&n.forEach(i=>{i.removeEventListener("click",this.handleClick)})}};P([j({mode:"boolean"})],wt.prototype,"autofocus",void 0);P([j({attribute:"form"})],wt.prototype,"formId",void 0);P([j],wt.prototype,"formaction",void 0);P([j],wt.prototype,"formenctype",void 0);P([j],wt.prototype,"formmethod",void 0);P([j({mode:"boolean"})],wt.prototype,"formnovalidate",void 0);P([j],wt.prototype,"formtarget",void 0);P([j],wt.prototype,"type",void 0);P([ae],wt.prototype,"defaultSlottedContent",void 0);class Cs{}P([j({attribute:"aria-expanded"})],Cs.prototype,"ariaExpanded",void 0);P([j({attribute:"aria-pressed"})],Cs.prototype,"ariaPressed",void 0);sn(Cs,$e);sn(wt,io,Cs);const Hh=(t,e)=>ct`
    <template
        role="checkbox"
        aria-checked="${n=>n.checked}"
        aria-required="${n=>n.required}"
        aria-disabled="${n=>n.disabled}"
        aria-readonly="${n=>n.readOnly}"
        tabindex="${n=>n.disabled?null:0}"
        @keypress="${(n,i)=>n.keypressHandler(i.event)}"
        @click="${(n,i)=>n.clickHandler(i.event)}"
        class="${n=>n.readOnly?"readonly":""} ${n=>n.checked?"checked":""} ${n=>n.indeterminate?"indeterminate":""}"
    >
        <div part="control" class="control">
            <slot name="checked-indicator">
                ${e.checkedIndicator||""}
            </slot>
            <slot name="indeterminate-indicator">
                ${e.indeterminateIndicator||""}
            </slot>
        </div>
        <label
            part="label"
            class="${n=>n.defaultSlottedNodes&&n.defaultSlottedNodes.length?"label":"label label__hidden"}"
        >
            <slot ${ws("defaultSlottedNodes")}></slot>
        </label>
    </template>
`;class jh extends vt{}class Uh extends Lh(jh){constructor(){super(...arguments),this.proxy=document.createElement("input")}}let ks=class extends Uh{constructor(){super(),this.initialValue="on",this.indeterminate=!1,this.keypressHandler=e=>{if(!this.readOnly)switch(e.key){case _s:this.indeterminate&&(this.indeterminate=!1),this.checked=!this.checked;break}},this.clickHandler=e=>{!this.disabled&&!this.readOnly&&(this.indeterminate&&(this.indeterminate=!1),this.checked=!this.checked)},this.proxy.setAttribute("type","checkbox")}readOnlyChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.readOnly=this.readOnly)}};P([j({attribute:"readonly",mode:"boolean"})],ks.prototype,"readOnly",void 0);P([ae],ks.prototype,"defaultSlottedNodes",void 0);P([ae],ks.prototype,"indeterminate",void 0);function Ec(t){return Th(t)&&(t.getAttribute("role")==="option"||t instanceof HTMLOptionElement)}class Wt extends vt{constructor(e,n,i,s){super(),this.defaultSelected=!1,this.dirtySelected=!1,this.selected=this.defaultSelected,this.dirtyValue=!1,e&&(this.textContent=e),n&&(this.initialValue=n),i&&(this.defaultSelected=i),s&&(this.selected=s),this.proxy=new Option(`${this.textContent}`,this.initialValue,this.defaultSelected,this.selected),this.proxy.disabled=this.disabled}checkedChanged(e,n){if(typeof n=="boolean"){this.ariaChecked=n?"true":"false";return}this.ariaChecked=null}contentChanged(e,n){this.proxy instanceof HTMLOptionElement&&(this.proxy.textContent=this.textContent),this.$emit("contentchange",null,{bubbles:!0})}defaultSelectedChanged(){this.dirtySelected||(this.selected=this.defaultSelected,this.proxy instanceof HTMLOptionElement&&(this.proxy.selected=this.defaultSelected))}disabledChanged(e,n){this.ariaDisabled=this.disabled?"true":"false",this.proxy instanceof HTMLOptionElement&&(this.proxy.disabled=this.disabled)}selectedAttributeChanged(){this.defaultSelected=this.selectedAttribute,this.proxy instanceof HTMLOptionElement&&(this.proxy.defaultSelected=this.defaultSelected)}selectedChanged(){this.ariaSelected=this.selected?"true":"false",this.dirtySelected||(this.dirtySelected=!0),this.proxy instanceof HTMLOptionElement&&(this.proxy.selected=this.selected)}initialValueChanged(e,n){this.dirtyValue||(this.value=this.initialValue,this.dirtyValue=!1)}get label(){var e;return(e=this.value)!==null&&e!==void 0?e:this.text}get text(){var e,n;return(n=(e=this.textContent)===null||e===void 0?void 0:e.replace(/\s+/g," ").trim())!==null&&n!==void 0?n:""}set value(e){const n=`${e??""}`;this._value=n,this.dirtyValue=!0,this.proxy instanceof HTMLOptionElement&&(this.proxy.value=n),de.notify(this,"value")}get value(){var e;return de.track(this,"value"),(e=this._value)!==null&&e!==void 0?e:this.text}get form(){return this.proxy?this.proxy.form:null}}P([ae],Wt.prototype,"checked",void 0);P([ae],Wt.prototype,"content",void 0);P([ae],Wt.prototype,"defaultSelected",void 0);P([j({mode:"boolean"})],Wt.prototype,"disabled",void 0);P([j({attribute:"selected",mode:"boolean"})],Wt.prototype,"selectedAttribute",void 0);P([ae],Wt.prototype,"selected",void 0);P([j({attribute:"value",mode:"fromView"})],Wt.prototype,"initialValue",void 0);class Rn{}P([ae],Rn.prototype,"ariaChecked",void 0);P([ae],Rn.prototype,"ariaPosInSet",void 0);P([ae],Rn.prototype,"ariaSelected",void 0);P([ae],Rn.prototype,"ariaSetSize",void 0);sn(Rn,$e);sn(Wt,io,Rn);class et extends vt{constructor(){super(...arguments),this._options=[],this.selectedIndex=-1,this.selectedOptions=[],this.shouldSkipFocus=!1,this.typeaheadBuffer="",this.typeaheadExpired=!0,this.typeaheadTimeout=-1}get firstSelectedOption(){var e;return(e=this.selectedOptions[0])!==null&&e!==void 0?e:null}get hasSelectableOptions(){return this.options.length>0&&!this.options.every(e=>e.disabled)}get length(){var e,n;return(n=(e=this.options)===null||e===void 0?void 0:e.length)!==null&&n!==void 0?n:0}get options(){return de.track(this,"options"),this._options}set options(e){this._options=e,de.notify(this,"options")}get typeAheadExpired(){return this.typeaheadExpired}set typeAheadExpired(e){this.typeaheadExpired=e}clickHandler(e){const n=e.target.closest("option,[role=option]");if(n&&!n.disabled)return this.selectedIndex=this.options.indexOf(n),!0}focusAndScrollOptionIntoView(e=this.firstSelectedOption){this.contains(document.activeElement)&&e!==null&&(e.focus(),requestAnimationFrame(()=>{e.scrollIntoView({block:"nearest"})}))}focusinHandler(e){!this.shouldSkipFocus&&e.target===e.currentTarget&&(this.setSelectedOptions(),this.focusAndScrollOptionIntoView()),this.shouldSkipFocus=!1}getTypeaheadMatches(){const e=this.typeaheadBuffer.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),n=new RegExp(`^${e}`,"gi");return this.options.filter(i=>i.text.trim().match(n))}getSelectableIndex(e=this.selectedIndex,n){const i=e>n?-1:e<n?1:0,s=e+i;let r=null;switch(i){case-1:{r=this.options.reduceRight((o,l,a)=>!o&&!l.disabled&&a<s?l:o,r);break}case 1:{r=this.options.reduce((o,l,a)=>!o&&!l.disabled&&a>s?l:o,r);break}}return this.options.indexOf(r)}handleChange(e,n){switch(n){case"selected":{et.slottedOptionFilter(e)&&(this.selectedIndex=this.options.indexOf(e)),this.setSelectedOptions();break}}}handleTypeAhead(e){this.typeaheadTimeout&&window.clearTimeout(this.typeaheadTimeout),this.typeaheadTimeout=window.setTimeout(()=>this.typeaheadExpired=!0,et.TYPE_AHEAD_TIMEOUT_MS),!(e.length>1)&&(this.typeaheadBuffer=`${this.typeaheadExpired?"":this.typeaheadBuffer}${e}`)}keydownHandler(e){if(this.disabled)return!0;this.shouldSkipFocus=!1;const n=e.key;switch(n){case uo:{e.shiftKey||(e.preventDefault(),this.selectFirstOption());break}case oo:{e.shiftKey||(e.preventDefault(),this.selectNextOption());break}case lo:{e.shiftKey||(e.preventDefault(),this.selectPreviousOption());break}case fo:{e.preventDefault(),this.selectLastOption();break}case ho:return this.focusAndScrollOptionIntoView(),!0;case ao:case co:return!0;case _s:if(this.typeaheadExpired)return!0;default:return n.length===1&&this.handleTypeAhead(`${n}`),!0}}mousedownHandler(e){return this.shouldSkipFocus=!this.contains(document.activeElement),!0}multipleChanged(e,n){this.ariaMultiSelectable=n?"true":null}selectedIndexChanged(e,n){var i;if(!this.hasSelectableOptions){this.selectedIndex=-1;return}if(!((i=this.options[this.selectedIndex])===null||i===void 0)&&i.disabled&&typeof e=="number"){const s=this.getSelectableIndex(e,n),r=s>-1?s:e;this.selectedIndex=r,n===r&&this.selectedIndexChanged(n,r);return}this.setSelectedOptions()}selectedOptionsChanged(e,n){var i;const s=n.filter(et.slottedOptionFilter);(i=this.options)===null||i===void 0||i.forEach(r=>{const o=de.getNotifier(r);o.unsubscribe(this,"selected"),r.selected=s.includes(r),o.subscribe(this,"selected")})}selectFirstOption(){var e,n;this.disabled||(this.selectedIndex=(n=(e=this.options)===null||e===void 0?void 0:e.findIndex(i=>!i.disabled))!==null&&n!==void 0?n:-1)}selectLastOption(){this.disabled||(this.selectedIndex=Ah(this.options,e=>!e.disabled))}selectNextOption(){!this.disabled&&this.selectedIndex<this.options.length-1&&(this.selectedIndex+=1)}selectPreviousOption(){!this.disabled&&this.selectedIndex>0&&(this.selectedIndex=this.selectedIndex-1)}setDefaultSelectedOption(){var e,n;this.selectedIndex=(n=(e=this.options)===null||e===void 0?void 0:e.findIndex(i=>i.defaultSelected))!==null&&n!==void 0?n:-1}setSelectedOptions(){var e,n,i;!((e=this.options)===null||e===void 0)&&e.length&&(this.selectedOptions=[this.options[this.selectedIndex]],this.ariaActiveDescendant=(i=(n=this.firstSelectedOption)===null||n===void 0?void 0:n.id)!==null&&i!==void 0?i:"",this.focusAndScrollOptionIntoView())}slottedOptionsChanged(e,n){this.options=n.reduce((s,r)=>(Ec(r)&&s.push(r),s),[]);const i=`${this.options.length}`;this.options.forEach((s,r)=>{s.id||(s.id=kc("option-")),s.ariaPosInSet=`${r+1}`,s.ariaSetSize=i}),this.$fastController.isConnected&&(this.setSelectedOptions(),this.setDefaultSelectedOption())}typeaheadBufferChanged(e,n){if(this.$fastController.isConnected){const i=this.getTypeaheadMatches();if(i.length){const s=this.options.indexOf(i[0]);s>-1&&(this.selectedIndex=s)}this.typeaheadExpired=!1}}}et.slottedOptionFilter=t=>Ec(t)&&!t.hidden;et.TYPE_AHEAD_TIMEOUT_MS=1e3;P([j({mode:"boolean"})],et.prototype,"disabled",void 0);P([ae],et.prototype,"selectedIndex",void 0);P([ae],et.prototype,"selectedOptions",void 0);P([ae],et.prototype,"slottedOptions",void 0);P([ae],et.prototype,"typeaheadBuffer",void 0);class hn{}P([ae],hn.prototype,"ariaActiveDescendant",void 0);P([ae],hn.prototype,"ariaDisabled",void 0);P([ae],hn.prototype,"ariaExpanded",void 0);P([ae],hn.prototype,"ariaMultiSelectable",void 0);sn(hn,$e);sn(et,hn);const Xs={above:"above",below:"below"};function Cr(t){const e=t.parentElement;if(e)return e;{const n=t.getRootNode();if(n.host instanceof HTMLElement)return n.host}return null}function zh(t,e){let n=e;for(;n!==null;){if(n===t)return!0;n=Cr(n)}return!1}const Ft=document.createElement("div");function qh(t){return t instanceof xs}class go{setProperty(e,n){he.queueUpdate(()=>this.target.setProperty(e,n))}removeProperty(e){he.queueUpdate(()=>this.target.removeProperty(e))}}class Wh extends go{constructor(e){super();const n=new CSSStyleSheet;n[fc]=!0,this.target=n.cssRules[n.insertRule(":host{}")].style,e.$fastController.addStyles(it.create([n]))}}class Yh extends go{constructor(){super();const e=new CSSStyleSheet;this.target=e.cssRules[e.insertRule(":root{}")].style,document.adoptedStyleSheets=[...document.adoptedStyleSheets,e]}}class Gh extends go{constructor(){super(),this.style=document.createElement("style"),document.head.appendChild(this.style);const{sheet:e}=this.style;if(e){const n=e.insertRule(":root{}",e.cssRules.length);this.target=e.cssRules[n].style}}}class $c{constructor(e){this.store=new Map,this.target=null;const n=e.$fastController;this.style=document.createElement("style"),n.addStyles(this.style),de.getNotifier(n).subscribe(this,"isConnected"),this.handleChange(n,"isConnected")}targetChanged(){if(this.target!==null)for(const[e,n]of this.store.entries())this.target.setProperty(e,n)}setProperty(e,n){this.store.set(e,n),he.queueUpdate(()=>{this.target!==null&&this.target.setProperty(e,n)})}removeProperty(e){this.store.delete(e),he.queueUpdate(()=>{this.target!==null&&this.target.removeProperty(e)})}handleChange(e,n){const{sheet:i}=this.style;if(i){const s=i.insertRule(":host{}",i.cssRules.length);this.target=i.cssRules[s].style}else this.target=null}}P([ae],$c.prototype,"target",void 0);class Jh{constructor(e){this.target=e.style}setProperty(e,n){he.queueUpdate(()=>this.target.setProperty(e,n))}removeProperty(e){he.queueUpdate(()=>this.target.removeProperty(e))}}class Be{setProperty(e,n){Be.properties[e]=n;for(const i of Be.roots.values())yn.getOrCreate(Be.normalizeRoot(i)).setProperty(e,n)}removeProperty(e){delete Be.properties[e];for(const n of Be.roots.values())yn.getOrCreate(Be.normalizeRoot(n)).removeProperty(e)}static registerRoot(e){const{roots:n}=Be;if(!n.has(e)){n.add(e);const i=yn.getOrCreate(this.normalizeRoot(e));for(const s in Be.properties)i.setProperty(s,Be.properties[s])}}static unregisterRoot(e){const{roots:n}=Be;if(n.has(e)){n.delete(e);const i=yn.getOrCreate(Be.normalizeRoot(e));for(const s in Be.properties)i.removeProperty(s)}}static normalizeRoot(e){return e===Ft?document:e}}Be.roots=new Set;Be.properties={};const Zs=new WeakMap,Qh=he.supportsAdoptedStyleSheets?Wh:$c,yn=Object.freeze({getOrCreate(t){if(Zs.has(t))return Zs.get(t);let e;return t===Ft?e=new Be:t instanceof Document?e=he.supportsAdoptedStyleSheets?new Yh:new Gh:qh(t)?e=new Qh(t):e=new Jh(t),Zs.set(t,e),e}});class Ke extends bc{constructor(e){super(),this.subscribers=new WeakMap,this._appliedTo=new Set,this.name=e.name,e.cssCustomPropertyName!==null&&(this.cssCustomProperty=`--${e.cssCustomPropertyName}`,this.cssVar=`var(${this.cssCustomProperty})`),this.id=Ke.uniqueId(),Ke.tokensById.set(this.id,this)}get appliedTo(){return[...this._appliedTo]}static from(e){return new Ke({name:typeof e=="string"?e:e.name,cssCustomPropertyName:typeof e=="string"?e:e.cssCustomPropertyName===void 0?e.name:e.cssCustomPropertyName})}static isCSSDesignToken(e){return typeof e.cssCustomProperty=="string"}static isDerivedDesignTokenValue(e){return typeof e=="function"}static getTokenById(e){return Ke.tokensById.get(e)}getOrCreateSubscriberSet(e=this){return this.subscribers.get(e)||this.subscribers.set(e,new Set)&&this.subscribers.get(e)}createCSS(){return this.cssVar||""}getValueFor(e){const n=Re.getOrCreate(e).get(this);if(n!==void 0)return n;throw new Error(`Value could not be retrieved for token named "${this.name}". Ensure the value is set for ${e} or an ancestor of ${e}.`)}setValueFor(e,n){return this._appliedTo.add(e),n instanceof Ke&&(n=this.alias(n)),Re.getOrCreate(e).set(this,n),this}deleteValueFor(e){return this._appliedTo.delete(e),Re.existsFor(e)&&Re.getOrCreate(e).delete(this),this}withDefault(e){return this.setValueFor(Ft,e),this}subscribe(e,n){const i=this.getOrCreateSubscriberSet(n);n&&!Re.existsFor(n)&&Re.getOrCreate(n),i.has(e)||i.add(e)}unsubscribe(e,n){const i=this.subscribers.get(n||this);i&&i.has(e)&&i.delete(e)}notify(e){const n=Object.freeze({token:this,target:e});this.subscribers.has(this)&&this.subscribers.get(this).forEach(i=>i.handleChange(n)),this.subscribers.has(e)&&this.subscribers.get(e).forEach(i=>i.handleChange(n))}alias(e){return n=>e.getValueFor(n)}}Ke.uniqueId=(()=>{let t=0;return()=>(t++,t.toString(16))})();Ke.tokensById=new Map;class Xh{startReflection(e,n){e.subscribe(this,n),this.handleChange({token:e,target:n})}stopReflection(e,n){e.unsubscribe(this,n),this.remove(e,n)}handleChange(e){const{token:n,target:i}=e;this.add(n,i)}add(e,n){yn.getOrCreate(n).setProperty(e.cssCustomProperty,this.resolveCSSValue(Re.getOrCreate(n).get(e)))}remove(e,n){yn.getOrCreate(n).removeProperty(e.cssCustomProperty)}resolveCSSValue(e){return e&&typeof e.createCSS=="function"?e.createCSS():e}}class Zh{constructor(e,n,i){this.source=e,this.token=n,this.node=i,this.dependencies=new Set,this.observer=de.binding(e,this,!1),this.observer.handleChange=this.observer.call,this.handleChange()}disconnect(){this.observer.disconnect()}handleChange(){try{this.node.store.set(this.token,this.observer.observe(this.node.target,ti))}catch(e){console.error(e)}}}class Kh{constructor(){this.values=new Map}set(e,n){this.values.get(e)!==n&&(this.values.set(e,n),de.getNotifier(this).notify(e.id))}get(e){return de.track(this,e.id),this.values.get(e)}delete(e){this.values.delete(e),de.getNotifier(this).notify(e.id)}all(){return this.values.entries()}}const jn=new WeakMap,Un=new WeakMap;class Re{constructor(e){this.target=e,this.store=new Kh,this.children=[],this.assignedValues=new Map,this.reflecting=new Set,this.bindingObservers=new Map,this.tokenValueChangeHandler={handleChange:(n,i)=>{const s=Ke.getTokenById(i);s&&(s.notify(this.target),this.updateCSSTokenReflection(n,s))}},jn.set(e,this),de.getNotifier(this.store).subscribe(this.tokenValueChangeHandler),e instanceof xs?e.$fastController.addBehaviors([this]):e.isConnected&&this.bind()}static getOrCreate(e){return jn.get(e)||new Re(e)}static existsFor(e){return jn.has(e)}static findParent(e){if(Ft!==e.target){let n=Cr(e.target);for(;n!==null;){if(jn.has(n))return jn.get(n);n=Cr(n)}return Re.getOrCreate(Ft)}return null}static findClosestAssignedNode(e,n){let i=n;do{if(i.has(e))return i;i=i.parent?i.parent:i.target!==Ft?Re.getOrCreate(Ft):null}while(i!==null);return null}get parent(){return Un.get(this)||null}updateCSSTokenReflection(e,n){if(Ke.isCSSDesignToken(n)){const i=this.parent,s=this.isReflecting(n);if(i){const r=i.get(n),o=e.get(n);r!==o&&!s?this.reflectToCSS(n):r===o&&s&&this.stopReflectToCSS(n)}else s||this.reflectToCSS(n)}}has(e){return this.assignedValues.has(e)}get(e){const n=this.store.get(e);if(n!==void 0)return n;const i=this.getRaw(e);if(i!==void 0)return this.hydrate(e,i),this.get(e)}getRaw(e){var n;return this.assignedValues.has(e)?this.assignedValues.get(e):(n=Re.findClosestAssignedNode(e,this))===null||n===void 0?void 0:n.getRaw(e)}set(e,n){Ke.isDerivedDesignTokenValue(this.assignedValues.get(e))&&this.tearDownBindingObserver(e),this.assignedValues.set(e,n),Ke.isDerivedDesignTokenValue(n)?this.setupBindingObserver(e,n):this.store.set(e,n)}delete(e){this.assignedValues.delete(e),this.tearDownBindingObserver(e);const n=this.getRaw(e);n?this.hydrate(e,n):this.store.delete(e)}bind(){const e=Re.findParent(this);e&&e.appendChild(this);for(const n of this.assignedValues.keys())n.notify(this.target)}unbind(){this.parent&&Un.get(this).removeChild(this);for(const e of this.bindingObservers.keys())this.tearDownBindingObserver(e)}appendChild(e){e.parent&&Un.get(e).removeChild(e);const n=this.children.filter(i=>e.contains(i));Un.set(e,this),this.children.push(e),n.forEach(i=>e.appendChild(i)),de.getNotifier(this.store).subscribe(e);for(const[i,s]of this.store.all())e.hydrate(i,this.bindingObservers.has(i)?this.getRaw(i):s),e.updateCSSTokenReflection(e.store,i)}removeChild(e){const n=this.children.indexOf(e);if(n!==-1&&this.children.splice(n,1),de.getNotifier(this.store).unsubscribe(e),e.parent!==this)return!1;const i=Un.delete(e);for(const[s]of this.store.all())e.hydrate(s,e.getRaw(s)),e.updateCSSTokenReflection(e.store,s);return i}contains(e){return zh(this.target,e.target)}reflectToCSS(e){this.isReflecting(e)||(this.reflecting.add(e),Re.cssCustomPropertyReflector.startReflection(e,this.target))}stopReflectToCSS(e){this.isReflecting(e)&&(this.reflecting.delete(e),Re.cssCustomPropertyReflector.stopReflection(e,this.target))}isReflecting(e){return this.reflecting.has(e)}handleChange(e,n){const i=Ke.getTokenById(n);i&&(this.hydrate(i,this.getRaw(i)),this.updateCSSTokenReflection(this.store,i))}hydrate(e,n){if(!this.has(e)){const i=this.bindingObservers.get(e);Ke.isDerivedDesignTokenValue(n)?i?i.source!==n&&(this.tearDownBindingObserver(e),this.setupBindingObserver(e,n)):this.setupBindingObserver(e,n):(i&&this.tearDownBindingObserver(e),this.store.set(e,n))}}setupBindingObserver(e,n){const i=new Zh(n,e,this);return this.bindingObservers.set(e,i),i}tearDownBindingObserver(e){return this.bindingObservers.has(e)?(this.bindingObservers.get(e).disconnect(),this.bindingObservers.delete(e),!0):!1}}Re.cssCustomPropertyReflector=new Xh;P([ae],Re.prototype,"children",void 0);function ep(t){return Ke.from(t)}const Ic=Object.freeze({create:ep,notifyConnection(t){return!t.isConnected||!Re.existsFor(t)?!1:(Re.getOrCreate(t).bind(),!0)},notifyDisconnection(t){return t.isConnected||!Re.existsFor(t)?!1:(Re.getOrCreate(t).unbind(),!0)},registerRoot(t=Ft){Be.registerRoot(t)},unregisterRoot(t=Ft){Be.unregisterRoot(t)}}),Ks=Object.freeze({definitionCallbackOnly:null,ignoreDuplicate:Symbol()}),er=new Map,Ni=new Map;let Cn=null;const zn=ke.createInterface(t=>t.cachedCallback(e=>(Cn===null&&(Cn=new Rc(null,e)),Cn))),Oc=Object.freeze({tagFor(t){return Ni.get(t)},responsibleFor(t){const e=t.$$designSystem$$;return e||ke.findResponsibleContainer(t).get(zn)},getOrCreate(t){if(!t)return Cn===null&&(Cn=ke.getOrCreateDOMContainer().get(zn)),Cn;const e=t.$$designSystem$$;if(e)return e;const n=ke.getOrCreateDOMContainer(t);if(n.has(zn,!1))return n.get(zn);{const i=new Rc(t,n);return n.register(hi.instance(zn,i)),i}}});function tp(t,e,n){return typeof t=="string"?{name:t,type:e,callback:n}:t}class Rc{constructor(e,n){this.owner=e,this.container=n,this.designTokensInitialized=!1,this.prefix="fast",this.shadowRootMode=void 0,this.disambiguate=()=>Ks.definitionCallbackOnly,e!==null&&(e.$$designSystem$$=this)}withPrefix(e){return this.prefix=e,this}withShadowRootMode(e){return this.shadowRootMode=e,this}withElementDisambiguation(e){return this.disambiguate=e,this}withDesignTokenRoot(e){return this.designTokenRoot=e,this}register(...e){const n=this.container,i=[],s=this.disambiguate,r=this.shadowRootMode,o={elementPrefix:this.prefix,tryDefineElement(l,a,u){const c=tp(l,a,u),{name:h,callback:p,baseClass:v}=c;let{type:$}=c,k=h,E=er.get(k),N=!0;for(;E;){const U=s(k,$,E);switch(U){case Ks.ignoreDuplicate:return;case Ks.definitionCallbackOnly:N=!1,E=void 0;break;default:k=U,E=er.get(k);break}}N&&((Ni.has($)||$===vt)&&($=class extends ${}),er.set(k,$),Ni.set($,k),v&&Ni.set(v,k)),i.push(new np(n,k,$,r,p,N))}};this.designTokensInitialized||(this.designTokensInitialized=!0,this.designTokenRoot!==null&&Ic.registerRoot(this.designTokenRoot)),n.registerWithContext(o,...e);for(const l of i)l.callback(l),l.willDefine&&l.definition!==null&&l.definition.define();return this}}class np{constructor(e,n,i,s,r,o){this.container=e,this.name=n,this.type=i,this.shadowRootMode=s,this.callback=r,this.willDefine=o,this.definition=null}definePresentation(e){Cc.define(this.name,e,this.container)}defineElement(e){this.definition=new Ss(this.type,Object.assign(Object.assign({},e),{name:this.name}))}tagFor(e){return Oc.tagFor(e)}}const ip=(t,e)=>ct`
    <template role="${n=>n.role}" aria-orientation="${n=>n.orientation}"></template>
`,sp={separator:"separator"};let vo=class extends vt{constructor(){super(...arguments),this.role=sp.separator,this.orientation=Rh.horizontal}};P([j],vo.prototype,"role",void 0);P([j],vo.prototype,"orientation",void 0);const rp=(t,e)=>ct`
    <template
        aria-checked="${n=>n.ariaChecked}"
        aria-disabled="${n=>n.ariaDisabled}"
        aria-posinset="${n=>n.ariaPosInSet}"
        aria-selected="${n=>n.ariaSelected}"
        aria-setsize="${n=>n.ariaSetSize}"
        class="${n=>[n.checked&&"checked",n.selected&&"selected",n.disabled&&"disabled"].filter(Boolean).join(" ")}"
        role="option"
    >
        ${ro(t,e)}
        <span class="content" part="content">
            <slot ${ws("content")}></slot>
        </span>
        ${so(t,e)}
    </template>
`;class Es extends et{constructor(){super(...arguments),this.activeIndex=-1,this.rangeStartIndex=-1}get activeOption(){return this.options[this.activeIndex]}get checkedOptions(){var e;return(e=this.options)===null||e===void 0?void 0:e.filter(n=>n.checked)}get firstSelectedOptionIndex(){return this.options.indexOf(this.firstSelectedOption)}activeIndexChanged(e,n){var i,s;this.ariaActiveDescendant=(s=(i=this.options[n])===null||i===void 0?void 0:i.id)!==null&&s!==void 0?s:"",this.focusAndScrollOptionIntoView()}checkActiveIndex(){if(!this.multiple)return;const e=this.activeOption;e&&(e.checked=!0)}checkFirstOption(e=!1){e?(this.rangeStartIndex===-1&&(this.rangeStartIndex=this.activeIndex+1),this.options.forEach((n,i)=>{n.checked=Ei(i,this.rangeStartIndex)})):this.uncheckAllOptions(),this.activeIndex=0,this.checkActiveIndex()}checkLastOption(e=!1){e?(this.rangeStartIndex===-1&&(this.rangeStartIndex=this.activeIndex),this.options.forEach((n,i)=>{n.checked=Ei(i,this.rangeStartIndex,this.options.length)})):this.uncheckAllOptions(),this.activeIndex=this.options.length-1,this.checkActiveIndex()}connectedCallback(){super.connectedCallback(),this.addEventListener("focusout",this.focusoutHandler)}disconnectedCallback(){this.removeEventListener("focusout",this.focusoutHandler),super.disconnectedCallback()}checkNextOption(e=!1){e?(this.rangeStartIndex===-1&&(this.rangeStartIndex=this.activeIndex),this.options.forEach((n,i)=>{n.checked=Ei(i,this.rangeStartIndex,this.activeIndex+1)})):this.uncheckAllOptions(),this.activeIndex+=this.activeIndex<this.options.length-1?1:0,this.checkActiveIndex()}checkPreviousOption(e=!1){e?(this.rangeStartIndex===-1&&(this.rangeStartIndex=this.activeIndex),this.checkedOptions.length===1&&(this.rangeStartIndex+=1),this.options.forEach((n,i)=>{n.checked=Ei(i,this.activeIndex,this.rangeStartIndex)})):this.uncheckAllOptions(),this.activeIndex-=this.activeIndex>0?1:0,this.checkActiveIndex()}clickHandler(e){var n;if(!this.multiple)return super.clickHandler(e);const i=(n=e.target)===null||n===void 0?void 0:n.closest("[role=option]");if(!(!i||i.disabled))return this.uncheckAllOptions(),this.activeIndex=this.options.indexOf(i),this.checkActiveIndex(),this.toggleSelectedForAllCheckedOptions(),!0}focusAndScrollOptionIntoView(){super.focusAndScrollOptionIntoView(this.activeOption)}focusinHandler(e){if(!this.multiple)return super.focusinHandler(e);!this.shouldSkipFocus&&e.target===e.currentTarget&&(this.uncheckAllOptions(),this.activeIndex===-1&&(this.activeIndex=this.firstSelectedOptionIndex!==-1?this.firstSelectedOptionIndex:0),this.checkActiveIndex(),this.setSelectedOptions(),this.focusAndScrollOptionIntoView()),this.shouldSkipFocus=!1}focusoutHandler(e){this.multiple&&this.uncheckAllOptions()}keydownHandler(e){if(!this.multiple)return super.keydownHandler(e);if(this.disabled)return!0;const{key:n,shiftKey:i}=e;switch(this.shouldSkipFocus=!1,n){case uo:{this.checkFirstOption(i);return}case oo:{this.checkNextOption(i);return}case lo:{this.checkPreviousOption(i);return}case fo:{this.checkLastOption(i);return}case ho:return this.focusAndScrollOptionIntoView(),!0;case co:return this.uncheckAllOptions(),this.checkActiveIndex(),!0;case _s:if(e.preventDefault(),this.typeAheadExpired){this.toggleSelectedForAllCheckedOptions();return}default:return n.length===1&&this.handleTypeAhead(`${n}`),!0}}mousedownHandler(e){if(e.offsetX>=0&&e.offsetX<=this.scrollWidth)return super.mousedownHandler(e)}multipleChanged(e,n){var i;this.ariaMultiSelectable=n?"true":null,(i=this.options)===null||i===void 0||i.forEach(s=>{s.checked=n?!1:void 0}),this.setSelectedOptions()}setSelectedOptions(){if(!this.multiple){super.setSelectedOptions();return}this.$fastController.isConnected&&this.options&&(this.selectedOptions=this.options.filter(e=>e.selected),this.focusAndScrollOptionIntoView())}sizeChanged(e,n){var i;const s=Math.max(0,parseInt((i=n==null?void 0:n.toFixed())!==null&&i!==void 0?i:"",10));s!==n&&he.queueUpdate(()=>{this.size=s})}toggleSelectedForAllCheckedOptions(){const e=this.checkedOptions.filter(i=>!i.disabled),n=!e.every(i=>i.selected);e.forEach(i=>i.selected=n),this.selectedIndex=this.options.indexOf(e[e.length-1]),this.setSelectedOptions()}typeaheadBufferChanged(e,n){if(!this.multiple){super.typeaheadBufferChanged(e,n);return}if(this.$fastController.isConnected){const i=this.getTypeaheadMatches(),s=this.options.indexOf(i[0]);s>-1&&(this.activeIndex=s,this.uncheckAllOptions(),this.checkActiveIndex()),this.typeAheadExpired=!1}}uncheckAllOptions(e=!1){this.options.forEach(n=>n.checked=this.multiple?!1:void 0),e||(this.rangeStartIndex=-1)}}P([ae],Es.prototype,"activeIndex",void 0);P([j({mode:"boolean"})],Es.prototype,"multiple",void 0);P([j({converter:ys})],Es.prototype,"size",void 0);const kl=44,op=(t,e)=>ct`
    <template
        role="progressbar"
        aria-valuenow="${n=>n.value}"
        aria-valuemin="${n=>n.min}"
        aria-valuemax="${n=>n.max}"
        class="${n=>n.paused?"paused":""}"
    >
        ${Sc(n=>typeof n.value=="number",ct`
                <svg
                    class="progress"
                    part="progress"
                    viewBox="0 0 16 16"
                    slot="determinate"
                >
                    <circle
                        class="background"
                        part="background"
                        cx="8px"
                        cy="8px"
                        r="7px"
                    ></circle>
                    <circle
                        class="determinate"
                        part="determinate"
                        style="stroke-dasharray: ${n=>kl*n.percentComplete/100}px ${kl}px"
                        cx="8px"
                        cy="8px"
                        r="7px"
                    ></circle>
                </svg>
            `,ct`
                <slot name="indeterminate" slot="indeterminate">
                    ${e.indeterminateIndicator||""}
                </slot>
            `)}
    </template>
`;class An extends vt{constructor(){super(...arguments),this.percentComplete=0}valueChanged(){this.$fastController.isConnected&&this.updatePercentComplete()}minChanged(){this.$fastController.isConnected&&this.updatePercentComplete()}maxChanged(){this.$fastController.isConnected&&this.updatePercentComplete()}connectedCallback(){super.connectedCallback(),this.updatePercentComplete()}updatePercentComplete(){const e=typeof this.min=="number"?this.min:0,n=typeof this.max=="number"?this.max:100,i=typeof this.value=="number"?this.value:0,s=n-e;this.percentComplete=s===0?0:Math.fround((i-e)/s*100)}}P([j({converter:ys})],An.prototype,"value",void 0);P([j({converter:ys})],An.prototype,"min",void 0);P([j({converter:ys})],An.prototype,"max",void 0);P([j({mode:"boolean"})],An.prototype,"paused",void 0);P([ae],An.prototype,"percentComplete",void 0);class lp extends Es{}class ap extends po(lp){constructor(){super(...arguments),this.proxy=document.createElement("select")}}class rn extends ap{constructor(){super(...arguments),this.open=!1,this.forcedPosition=!1,this.listboxId=kc("listbox-"),this.maxHeight=0}openChanged(e,n){if(this.collapsible){if(this.open){this.ariaControls=this.listboxId,this.ariaExpanded="true",this.setPositioning(),this.focusAndScrollOptionIntoView(),this.indexWhenOpened=this.selectedIndex,he.queueUpdate(()=>this.focus());return}this.ariaControls="",this.ariaExpanded="false"}}get collapsible(){return!(this.multiple||typeof this.size=="number")}get value(){return de.track(this,"value"),this._value}set value(e){var n,i,s,r,o,l,a;const u=`${this._value}`;if(!((n=this._options)===null||n===void 0)&&n.length){const c=this._options.findIndex(v=>v.value===e),h=(s=(i=this._options[this.selectedIndex])===null||i===void 0?void 0:i.value)!==null&&s!==void 0?s:null,p=(o=(r=this._options[c])===null||r===void 0?void 0:r.value)!==null&&o!==void 0?o:null;(c===-1||h!==p)&&(e="",this.selectedIndex=c),e=(a=(l=this.firstSelectedOption)===null||l===void 0?void 0:l.value)!==null&&a!==void 0?a:e}u!==e&&(this._value=e,super.valueChanged(u,e),de.notify(this,"value"),this.updateDisplayValue())}updateValue(e){var n,i;this.$fastController.isConnected&&(this.value=(i=(n=this.firstSelectedOption)===null||n===void 0?void 0:n.value)!==null&&i!==void 0?i:""),e&&(this.$emit("input"),this.$emit("change",this,{bubbles:!0,composed:void 0}))}selectedIndexChanged(e,n){super.selectedIndexChanged(e,n),this.updateValue()}positionChanged(e,n){this.positionAttribute=n,this.setPositioning()}setPositioning(){const e=this.getBoundingClientRect(),i=window.innerHeight-e.bottom;this.position=this.forcedPosition?this.positionAttribute:e.top>i?Xs.above:Xs.below,this.positionAttribute=this.forcedPosition?this.positionAttribute:this.position,this.maxHeight=this.position===Xs.above?~~e.top:~~i}get displayValue(){var e,n;return de.track(this,"displayValue"),(n=(e=this.firstSelectedOption)===null||e===void 0?void 0:e.text)!==null&&n!==void 0?n:""}disabledChanged(e,n){super.disabledChanged&&super.disabledChanged(e,n),this.ariaDisabled=this.disabled?"true":"false"}formResetCallback(){this.setProxyOptions(),super.setDefaultSelectedOption(),this.selectedIndex===-1&&(this.selectedIndex=0)}clickHandler(e){if(!this.disabled){if(this.open){const n=e.target.closest("option,[role=option]");if(n&&n.disabled)return}return super.clickHandler(e),this.open=this.collapsible&&!this.open,!this.open&&this.indexWhenOpened!==this.selectedIndex&&this.updateValue(!0),!0}}focusoutHandler(e){var n;if(super.focusoutHandler(e),!this.open)return!0;const i=e.relatedTarget;if(this.isSameNode(i)){this.focus();return}!((n=this.options)===null||n===void 0)&&n.includes(i)||(this.open=!1,this.indexWhenOpened!==this.selectedIndex&&this.updateValue(!0))}handleChange(e,n){super.handleChange(e,n),n==="value"&&this.updateValue()}slottedOptionsChanged(e,n){this.options.forEach(i=>{de.getNotifier(i).unsubscribe(this,"value")}),super.slottedOptionsChanged(e,n),this.options.forEach(i=>{de.getNotifier(i).subscribe(this,"value")}),this.setProxyOptions(),this.updateValue()}mousedownHandler(e){var n;return e.offsetX>=0&&e.offsetX<=((n=this.listbox)===null||n===void 0?void 0:n.scrollWidth)?super.mousedownHandler(e):this.collapsible}multipleChanged(e,n){super.multipleChanged(e,n),this.proxy&&(this.proxy.multiple=n)}selectedOptionsChanged(e,n){var i;super.selectedOptionsChanged(e,n),(i=this.options)===null||i===void 0||i.forEach((s,r)=>{var o;const l=(o=this.proxy)===null||o===void 0?void 0:o.options.item(r);l&&(l.selected=s.selected)})}setDefaultSelectedOption(){var e;const n=(e=this.options)!==null&&e!==void 0?e:Array.from(this.children).filter(et.slottedOptionFilter),i=n==null?void 0:n.findIndex(s=>s.hasAttribute("selected")||s.selected||s.value===this.value);if(i!==-1){this.selectedIndex=i;return}this.selectedIndex=0}setProxyOptions(){this.proxy instanceof HTMLSelectElement&&this.options&&(this.proxy.options.length=0,this.options.forEach(e=>{const n=e.proxy||(e instanceof HTMLOptionElement?e.cloneNode():null);n&&this.proxy.options.add(n)}))}keydownHandler(e){super.keydownHandler(e);const n=e.key||e.key.charCodeAt(0);switch(n){case _s:{e.preventDefault(),this.collapsible&&this.typeAheadExpired&&(this.open=!this.open);break}case uo:case fo:{e.preventDefault();break}case ao:{e.preventDefault(),this.open=!this.open;break}case co:{this.collapsible&&this.open&&(e.preventDefault(),this.open=!1);break}case ho:return this.collapsible&&this.open&&(e.preventDefault(),this.open=!1),!0}return!this.open&&this.indexWhenOpened!==this.selectedIndex&&(this.updateValue(!0),this.indexWhenOpened=this.selectedIndex),!(n===oo||n===lo)}connectedCallback(){super.connectedCallback(),this.forcedPosition=!!this.positionAttribute,this.addEventListener("contentchange",this.updateDisplayValue)}disconnectedCallback(){this.removeEventListener("contentchange",this.updateDisplayValue),super.disconnectedCallback()}sizeChanged(e,n){super.sizeChanged(e,n),this.proxy&&(this.proxy.size=n)}updateDisplayValue(){this.collapsible&&de.notify(this,"displayValue")}}P([j({attribute:"open",mode:"boolean"})],rn.prototype,"open",void 0);P([Uf],rn.prototype,"collapsible",null);P([ae],rn.prototype,"control",void 0);P([j({attribute:"position"})],rn.prototype,"positionAttribute",void 0);P([ae],rn.prototype,"position",void 0);P([ae],rn.prototype,"maxHeight",void 0);class mo{}P([ae],mo.prototype,"ariaControls",void 0);sn(mo,hn);sn(rn,io,mo);const cp=(t,e)=>ct`
    <template
        class="${n=>[n.collapsible&&"collapsible",n.collapsible&&n.open&&"open",n.disabled&&"disabled",n.collapsible&&n.position].filter(Boolean).join(" ")}"
        aria-activedescendant="${n=>n.ariaActiveDescendant}"
        aria-controls="${n=>n.ariaControls}"
        aria-disabled="${n=>n.ariaDisabled}"
        aria-expanded="${n=>n.ariaExpanded}"
        aria-haspopup="${n=>n.collapsible?"listbox":null}"
        aria-multiselectable="${n=>n.ariaMultiSelectable}"
        ?open="${n=>n.open}"
        role="combobox"
        tabindex="${n=>n.disabled?null:"0"}"
        @click="${(n,i)=>n.clickHandler(i.event)}"
        @focusin="${(n,i)=>n.focusinHandler(i.event)}"
        @focusout="${(n,i)=>n.focusoutHandler(i.event)}"
        @keydown="${(n,i)=>n.keydownHandler(i.event)}"
        @mousedown="${(n,i)=>n.mousedownHandler(i.event)}"
    >
        ${Sc(n=>n.collapsible,ct`
                <div
                    class="control"
                    part="control"
                    ?disabled="${n=>n.disabled}"
                    ${xt("control")}
                >
                    ${ro(t,e)}
                    <slot name="button-container">
                        <div class="selected-value" part="selected-value">
                            <slot name="selected-value">${n=>n.displayValue}</slot>
                        </div>
                        <div aria-hidden="true" class="indicator" part="indicator">
                            <slot name="indicator">
                                ${e.indicator||""}
                            </slot>
                        </div>
                    </slot>
                    ${so(t,e)}
                </div>
            `)}
        <div
            class="listbox"
            id="${n=>n.listboxId}"
            part="listbox"
            role="listbox"
            ?disabled="${n=>n.disabled}"
            ?hidden="${n=>n.collapsible?!n.open:!1}"
            ${xt("listbox")}
        >
            <slot
                ${ws({filter:et.slottedOptionFilter,flatten:!0,property:"slottedOptions"})}
            ></slot>
        </div>
    </template>
`,pi="not-allowed",up=":host([hidden]){display:none}";function Pn(t){return`${up}:host{display:${t}}`}const nn=Mh()?"focus-visible":"focus";function dp(t){return Oc.getOrCreate(t).withPrefix("vscode")}function fp(t){window.addEventListener("load",()=>{new MutationObserver(()=>{El(t)}).observe(document.body,{attributes:!0,attributeFilter:["class"]}),El(t)})}function El(t){const e=getComputedStyle(document.body),n=document.querySelector("body");if(n){const i=n.getAttribute("data-vscode-theme-kind");for(const[s,r]of t){let o=e.getPropertyValue(s).toString();if(i==="vscode-high-contrast")o.length===0&&r.name.includes("background")&&(o="transparent"),r.name==="button-icon-hover-background"&&(o="transparent");else if(i==="vscode-high-contrast-light"){if(o.length===0&&r.name.includes("background"))switch(r.name){case"button-primary-hover-background":o="#0F4A85";break;case"button-secondary-hover-background":o="transparent";break;case"button-icon-hover-background":o="transparent";break}}else r.name==="contrast-active-border"&&(o="transparent");r.setValueFor(n,o)}}}const $l=new Map;let Il=!1;function F(t,e){const n=Ic.create(t);if(e){if(e.includes("--fake-vscode-token")){const i="id"+Math.random().toString(16).slice(2);e=`${e}-${i}`}$l.set(e,n)}return Il||(fp($l),Il=!0),n}const Cm=F("background","--vscode-editor-background").withDefault("#1e1e1e"),Ue=F("border-width").withDefault(1),hp=F("contrast-active-border","--vscode-contrastActiveBorder").withDefault("#f38518");F("contrast-border","--vscode-contrastBorder").withDefault("#6fc3df");const pp=F("corner-radius").withDefault(0),Fi=F("corner-radius-round").withDefault(2),Ye=F("design-unit").withDefault(4),$s=F("disabled-opacity").withDefault(.4),bt=F("focus-border","--vscode-focusBorder").withDefault("#007fd4"),bo=F("font-family","--vscode-font-family").withDefault("-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol");F("font-weight","--vscode-font-weight").withDefault("400");const Lt=F("foreground","--vscode-foreground").withDefault("#cccccc"),tr=F("input-height").withDefault("26"),gp=F("input-min-width").withDefault("100px"),Is=F("type-ramp-base-font-size","--vscode-font-size").withDefault("13px"),Os=F("type-ramp-base-line-height").withDefault("normal"),km=F("type-ramp-minus1-font-size").withDefault("11px"),Em=F("type-ramp-minus1-line-height").withDefault("16px");F("type-ramp-minus2-font-size").withDefault("9px");F("type-ramp-minus2-line-height").withDefault("16px");F("type-ramp-plus1-font-size").withDefault("16px");F("type-ramp-plus1-line-height").withDefault("24px");const $m=F("scrollbarWidth").withDefault("10px"),Im=F("scrollbarHeight").withDefault("10px"),Om=F("scrollbar-slider-background","--vscode-scrollbarSlider-background").withDefault("#79797966"),Rm=F("scrollbar-slider-hover-background","--vscode-scrollbarSlider-hoverBackground").withDefault("#646464b3"),Am=F("scrollbar-slider-active-background","--vscode-scrollbarSlider-activeBackground").withDefault("#bfbfbf66"),Pm=F("badge-background","--vscode-badge-background").withDefault("#4d4d4d"),Tm=F("badge-foreground","--vscode-badge-foreground").withDefault("#ffffff"),vp=F("button-border","--vscode-button-border").withDefault("transparent"),Ol=F("button-icon-background").withDefault("transparent"),mp=F("button-icon-corner-radius").withDefault("5px"),bp=F("button-icon-outline-offset").withDefault(0),Rl=F("button-icon-hover-background","--fake-vscode-token").withDefault("rgba(90, 93, 94, 0.31)"),yp=F("button-icon-padding").withDefault("3px"),kn=F("button-primary-background","--vscode-button-background").withDefault("#0e639c"),Ac=F("button-primary-foreground","--vscode-button-foreground").withDefault("#ffffff"),Pc=F("button-primary-hover-background","--vscode-button-hoverBackground").withDefault("#1177bb"),nr=F("button-secondary-background","--vscode-button-secondaryBackground").withDefault("#3a3d41"),Sp=F("button-secondary-foreground","--vscode-button-secondaryForeground").withDefault("#ffffff"),xp=F("button-secondary-hover-background","--vscode-button-secondaryHoverBackground").withDefault("#45494e"),wp=F("button-padding-horizontal").withDefault("11px"),_p=F("button-padding-vertical").withDefault("4px"),ir=F("checkbox-background","--vscode-checkbox-background").withDefault("#3c3c3c"),Al=F("checkbox-border","--vscode-checkbox-border").withDefault("#3c3c3c"),Cp=F("checkbox-corner-radius").withDefault(3);F("checkbox-foreground","--vscode-checkbox-foreground").withDefault("#f0f0f0");const bn=F("list-active-selection-background","--vscode-list-activeSelectionBackground").withDefault("#094771"),Li=F("list-active-selection-foreground","--vscode-list-activeSelectionForeground").withDefault("#ffffff"),Dm=F("list-hover-background","--vscode-list-hoverBackground").withDefault("#2a2d2e"),kp=F("divider-background","--vscode-settings-dropdownListBorder").withDefault("#454545"),$i=F("dropdown-background","--vscode-dropdown-background").withDefault("#3c3c3c"),Pl=F("dropdown-border","--vscode-dropdown-border").withDefault("#3c3c3c");F("dropdown-foreground","--vscode-dropdown-foreground").withDefault("#f0f0f0");const Ep=F("dropdown-list-max-height").withDefault("200px"),Mm=F("input-background","--vscode-input-background").withDefault("#3c3c3c"),Nm=F("input-foreground","--vscode-input-foreground").withDefault("#cccccc");F("input-placeholder-foreground","--vscode-input-placeholderForeground").withDefault("#cccccc");const Fm=F("link-active-foreground","--vscode-textLink-activeForeground").withDefault("#3794ff"),Lm=F("link-foreground","--vscode-textLink-foreground").withDefault("#3794ff"),$p=F("progress-background","--vscode-progressBar-background").withDefault("#0e70c0"),Bm=F("panel-tab-active-border","--vscode-panelTitle-activeBorder").withDefault("#e7e7e7"),Vm=F("panel-tab-active-foreground","--vscode-panelTitle-activeForeground").withDefault("#e7e7e7"),Hm=F("panel-tab-foreground","--vscode-panelTitle-inactiveForeground").withDefault("#e7e7e799");F("panel-view-background","--vscode-panel-background").withDefault("#1e1e1e");F("panel-view-border","--vscode-panel-border").withDefault("#80808059");const jm=F("tag-corner-radius").withDefault("2px");function Ip(t,e,n,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,e,n,i);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(r=(s<3?o(r):s>3?o(e,n,r):o(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r}const Op=Rt`
	${Pn("inline-flex")} :host {
		outline: none;
		font-family: ${bo};
		font-size: ${Is};
		line-height: ${Os};
		color: ${Ac};
		background: ${kn};
		border-radius: calc(${Fi} * 1px);
		fill: currentColor;
		cursor: pointer;
	}
	.control {
		background: transparent;
		height: inherit;
		flex-grow: 1;
		box-sizing: border-box;
		display: inline-flex;
		justify-content: center;
		align-items: center;
		padding: ${_p} ${wp};
		white-space: wrap;
		outline: none;
		text-decoration: none;
		border: calc(${Ue} * 1px) solid ${vp};
		color: inherit;
		border-radius: inherit;
		fill: inherit;
		cursor: inherit;
		font-family: inherit;
	}
	:host(:hover) {
		background: ${Pc};
	}
	:host(:active) {
		background: ${kn};
	}
	.control:${nn} {
		outline: calc(${Ue} * 1px) solid ${bt};
		outline-offset: calc(${Ue} * 2px);
	}
	.control::-moz-focus-inner {
		border: 0;
	}
	:host([disabled]) {
		opacity: ${$s};
		background: ${kn};
		cursor: ${pi};
	}
	.content {
		display: flex;
	}
	.start {
		display: flex;
	}
	::slotted(svg),
	::slotted(span) {
		width: calc(${Ye} * 4px);
		height: calc(${Ye} * 4px);
	}
	.start {
		margin-inline-end: 8px;
	}
`,Rp=Rt`
	:host([appearance='primary']) {
		background: ${kn};
		color: ${Ac};
	}
	:host([appearance='primary']:hover) {
		background: ${Pc};
	}
	:host([appearance='primary']:active) .control:active {
		background: ${kn};
	}
	:host([appearance='primary']) .control:${nn} {
		outline: calc(${Ue} * 1px) solid ${bt};
		outline-offset: calc(${Ue} * 2px);
	}
	:host([appearance='primary'][disabled]) {
		background: ${kn};
	}
`,Ap=Rt`
	:host([appearance='secondary']) {
		background: ${nr};
		color: ${Sp};
	}
	:host([appearance='secondary']:hover) {
		background: ${xp};
	}
	:host([appearance='secondary']:active) .control:active {
		background: ${nr};
	}
	:host([appearance='secondary']) .control:${nn} {
		outline: calc(${Ue} * 1px) solid ${bt};
		outline-offset: calc(${Ue} * 2px);
	}
	:host([appearance='secondary'][disabled]) {
		background: ${nr};
	}
`,Pp=Rt`
	:host([appearance='icon']) {
		background: ${Ol};
		border-radius: ${mp};
		color: ${Lt};
	}
	:host([appearance='icon']:hover) {
		background: ${Rl};
		outline: 1px dotted ${hp};
		outline-offset: -1px;
	}
	:host([appearance='icon']) .control {
		padding: ${yp};
		border: none;
	}
	:host([appearance='icon']:active) .control:active {
		background: ${Rl};
	}
	:host([appearance='icon']) .control:${nn} {
		outline: calc(${Ue} * 1px) solid ${bt};
		outline-offset: ${bp};
	}
	:host([appearance='icon'][disabled]) {
		background: ${Ol};
	}
`,Tp=(t,e)=>Rt`
	${Op}
	${Rp}
	${Ap}
	${Pp}
`;class Tc extends wt{connectedCallback(){if(super.connectedCallback(),!this.appearance){const e=this.getAttribute("appearance");this.appearance=e}}attributeChangedCallback(e,n,i){e==="appearance"&&i==="icon"&&(this.getAttribute("aria-label")||(this.ariaLabel="Icon Button")),e==="aria-label"&&(this.ariaLabel=i),e==="disabled"&&(this.disabled=i!==null)}}Ip([j],Tc.prototype,"appearance",void 0);const Dp=Tc.compose({baseName:"button",template:Fh,styles:Tp,shadowOptions:{delegatesFocus:!0}}),Mp=(t,e)=>Rt`
	${Pn("inline-flex")} :host {
		align-items: center;
		outline: none;
		margin: calc(${Ye} * 1px) 0;
		user-select: none;
		font-size: ${Is};
		line-height: ${Os};
	}
	.control {
		position: relative;
		width: calc(${Ye} * 4px + 2px);
		height: calc(${Ye} * 4px + 2px);
		box-sizing: border-box;
		border-radius: calc(${Cp} * 1px);
		border: calc(${Ue} * 1px) solid ${Al};
		background: ${ir};
		outline: none;
		cursor: pointer;
	}
	.label {
		font-family: ${bo};
		color: ${Lt};
		padding-inline-start: calc(${Ye} * 2px + 2px);
		margin-inline-end: calc(${Ye} * 2px + 2px);
		cursor: pointer;
	}
	.label__hidden {
		display: none;
		visibility: hidden;
	}
	.checked-indicator {
		width: 100%;
		height: 100%;
		display: block;
		fill: ${Lt};
		opacity: 0;
		pointer-events: none;
	}
	.indeterminate-indicator {
		border-radius: 2px;
		background: ${Lt};
		position: absolute;
		top: 50%;
		left: 50%;
		width: 50%;
		height: 50%;
		transform: translate(-50%, -50%);
		opacity: 0;
	}
	:host(:enabled) .control:hover {
		background: ${ir};
		border-color: ${Al};
	}
	:host(:enabled) .control:active {
		background: ${ir};
		border-color: ${bt};
	}
	:host(:${nn}) .control {
		border: calc(${Ue} * 1px) solid ${bt};
	}
	:host(.disabled) .label,
	:host(.readonly) .label,
	:host(.readonly) .control,
	:host(.disabled) .control {
		cursor: ${pi};
	}
	:host(.checked:not(.indeterminate)) .checked-indicator,
	:host(.indeterminate) .indeterminate-indicator {
		opacity: 1;
	}
	:host(.disabled) {
		opacity: ${$s};
	}
`;class Np extends ks{connectedCallback(){super.connectedCallback(),this.textContent?this.setAttribute("aria-label",this.textContent):this.setAttribute("aria-label","Checkbox")}}const Fp=Np.compose({baseName:"checkbox",template:Hh,styles:Mp,checkedIndicator:`
		<svg 
			part="checked-indicator"
			class="checked-indicator"
			width="16" 
			height="16" 
			viewBox="0 0 16 16" 
			xmlns="http://www.w3.org/2000/svg" 
			fill="currentColor"
		>
			<path 
				fill-rule="evenodd" 
				clip-rule="evenodd" 
				d="M14.431 3.323l-8.47 10-.79-.036-3.35-4.77.818-.574 2.978 4.24 8.051-9.506.764.646z"
			/>
		</svg>
	`,indeterminateIndicator:`
		<div part="indeterminate-indicator" class="indeterminate-indicator"></div>
	`}),Lp=(t,e)=>Rt`
	${Pn("block")} :host {
		border: none;
		border-top: calc(${Ue} * 1px) solid ${kp};
		box-sizing: content-box;
		height: 0;
		margin: calc(${Ye} * 1px) 0;
		width: 100%;
	}
`;class Bp extends vo{}const Vp=Bp.compose({baseName:"divider",template:ip,styles:Lp}),Hp=(t,e)=>Rt`
	${Pn("inline-flex")} :host {
		background: ${$i};
		border-radius: calc(${Fi} * 1px);
		box-sizing: border-box;
		color: ${Lt};
		contain: contents;
		font-family: ${bo};
		height: calc(${tr} * 1px);
		position: relative;
		user-select: none;
		min-width: ${gp};
		outline: none;
		vertical-align: top;
	}
	.control {
		align-items: center;
		box-sizing: border-box;
		border: calc(${Ue} * 1px) solid ${Pl};
		border-radius: calc(${Fi} * 1px);
		cursor: pointer;
		display: flex;
		font-family: inherit;
		font-size: ${Is};
		line-height: ${Os};
		min-height: 100%;
		padding: 2px 6px 2px 8px;
		width: 100%;
	}
	.listbox {
		background: ${$i};
		border: calc(${Ue} * 1px) solid ${bt};
		border-radius: calc(${Fi} * 1px);
		box-sizing: border-box;
		display: inline-flex;
		flex-direction: column;
		left: 0;
		max-height: ${Ep};
		padding: 0;
		overflow-y: auto;
		position: absolute;
		width: 100%;
		z-index: 1;
	}
	.listbox[hidden] {
		display: none;
	}
	:host(:${nn}) .control {
		border-color: ${bt};
	}
	:host(:not([disabled]):hover) {
		background: ${$i};
		border-color: ${Pl};
	}
	:host(:${nn}) ::slotted([aria-selected="true"][role="option"]:not([disabled])) {
		background: ${bn};
		border: calc(${Ue} * 1px) solid transparent;
		color: ${Li};
	}
	:host([disabled]) {
		cursor: ${pi};
		opacity: ${$s};
	}
	:host([disabled]) .control {
		cursor: ${pi};
		user-select: none;
	}
	:host([disabled]:hover) {
		background: ${$i};
		color: ${Lt};
		fill: currentcolor;
	}
	:host(:not([disabled])) .control:active {
		border-color: ${bt};
	}
	:host(:empty) .listbox {
		display: none;
	}
	:host([open]) .control {
		border-color: ${bt};
	}
	:host([open][position='above']) .listbox {
		border-bottom-left-radius: 0;
		border-bottom-right-radius: 0;
	}
	:host([open][position='below']) .listbox {
		border-top-left-radius: 0;
		border-top-right-radius: 0;
	}
	:host([open][position='above']) .listbox {
		bottom: calc(${tr} * 1px);
	}
	:host([open][position='below']) .listbox {
		top: calc(${tr} * 1px);
	}
	.selected-value {
		flex: 1 1 auto;
		font-family: inherit;
		overflow: hidden;
		text-align: start;
		text-overflow: ellipsis;
		white-space: nowrap;
	}
	.indicator {
		flex: 0 0 auto;
		margin-inline-start: 1em;
	}
	slot[name='listbox'] {
		display: none;
		width: 100%;
	}
	:host([open]) slot[name='listbox'] {
		display: flex;
		position: absolute;
	}
	.end {
		margin-inline-start: auto;
	}
	.start,
	.end,
	.indicator,
	.select-indicator,
	::slotted(svg),
	::slotted(span) {
		fill: currentcolor;
		height: 1em;
		min-height: calc(${Ye} * 4px);
		min-width: calc(${Ye} * 4px);
		width: 1em;
	}
	::slotted([role='option']),
	::slotted(option) {
		flex: 0 0 auto;
	}
`;class jp extends rn{}const Up=jp.compose({baseName:"dropdown",template:cp,styles:Hp,indicator:`
		<svg 
			class="select-indicator"
			part="select-indicator"
			width="16" 
			height="16" 
			viewBox="0 0 16 16" 
			xmlns="http://www.w3.org/2000/svg" 
			fill="currentColor"
		>
			<path 
				fill-rule="evenodd" 
				clip-rule="evenodd" 
				d="M7.976 10.072l4.357-4.357.62.618L8.284 11h-.618L3 6.333l.619-.618 4.357 4.357z"
			/>
		</svg>
	`}),zp=(t,e)=>Rt`
	${Pn("inline-flex")} :host {
		font-family: var(--body-font);
		border-radius: ${pp};
		border: calc(${Ue} * 1px) solid transparent;
		box-sizing: border-box;
		color: ${Lt};
		cursor: pointer;
		fill: currentcolor;
		font-size: ${Is};
		line-height: ${Os};
		margin: 0;
		outline: none;
		overflow: hidden;
		padding: 0 calc((${Ye} / 2) * 1px)
			calc((${Ye} / 4) * 1px);
		user-select: none;
		white-space: nowrap;
	}
	:host(:${nn}) {
		border-color: ${bt};
		background: ${bn};
		color: ${Lt};
	}
	:host([aria-selected='true']) {
		background: ${bn};
		border: calc(${Ue} * 1px) solid transparent;
		color: ${Li};
	}
	:host(:active) {
		background: ${bn};
		color: ${Li};
	}
	:host(:not([aria-selected='true']):hover) {
		background: ${bn};
		border: calc(${Ue} * 1px) solid transparent;
		color: ${Li};
	}
	:host(:not([aria-selected='true']):active) {
		background: ${bn};
		color: ${Lt};
	}
	:host([disabled]) {
		cursor: ${pi};
		opacity: ${$s};
	}
	:host([disabled]:hover) {
		background-color: inherit;
	}
	.content {
		grid-column-start: 2;
		justify-self: start;
		overflow: hidden;
		text-overflow: ellipsis;
	}
`;let qp=class extends Wt{connectedCallback(){super.connectedCallback(),this.textContent?this.setAttribute("aria-label",this.textContent):this.setAttribute("aria-label","Option")}};const Wp=qp.compose({baseName:"option",template:rp,styles:zp}),Yp=(t,e)=>Rt`
	${Pn("flex")} :host {
		align-items: center;
		outline: none;
		height: calc(${Ye} * 7px);
		width: calc(${Ye} * 7px);
		margin: 0;
	}
	.progress {
		height: 100%;
		width: 100%;
	}
	.background {
		fill: none;
		stroke: transparent;
		stroke-width: calc(${Ye} / 2 * 1px);
	}
	.indeterminate-indicator-1 {
		fill: none;
		stroke: ${$p};
		stroke-width: calc(${Ye} / 2 * 1px);
		stroke-linecap: square;
		transform-origin: 50% 50%;
		transform: rotate(-90deg);
		transition: all 0.2s ease-in-out;
		animation: spin-infinite 2s linear infinite;
	}
	@keyframes spin-infinite {
		0% {
			stroke-dasharray: 0.01px 43.97px;
			transform: rotate(0deg);
		}
		50% {
			stroke-dasharray: 21.99px 21.99px;
			transform: rotate(450deg);
		}
		100% {
			stroke-dasharray: 0.01px 43.97px;
			transform: rotate(1080deg);
		}
	}
`;class Gp extends An{connectedCallback(){super.connectedCallback(),this.paused&&(this.paused=!1),this.setAttribute("aria-label","Loading"),this.setAttribute("aria-live","assertive"),this.setAttribute("role","alert")}attributeChangedCallback(e,n,i){e==="value"&&this.removeAttribute("value")}}const Jp=Gp.compose({baseName:"progress-ring",template:op,styles:Yp,indeterminateIndicator:`
		<svg class="progress" part="progress" viewBox="0 0 16 16">
			<circle
				class="background"
				part="background"
				cx="8px"
				cy="8px"
				r="7px"
			></circle>
			<circle
				class="indeterminate-indicator-1"
				part="indeterminate-indicator-1"
				cx="8px"
				cy="8px"
				r="7px"
			></circle>
		</svg>
	`}),Qp={class:"container"},Xp={key:0,class:"overlay"},Zp=Ne({__name:"OverlayableView",props:{activateOverlay:{type:Boolean}},setup(t){return(e,n)=>(m(),R("div",Qp,[e.activateOverlay?(m(),R("div",Xp)):K("",!0),lt(e.$slots,"default",{},void 0,!0)]))}}),mt=(t,e)=>{const n=t.__vccOpts||t;for(const[i,s]of e)n[i]=s;return n},Kp=mt(Zp,[["__scopeId","data-v-882d5437"]]);function Ge(t){return t.error!==void 0}var Dc=(t=>(t.HTML="html",t.JUPYTER_NOTEBOOK="jupyter-notebook",t.JUPYTER_VOILA="jupyter-voila",t.PYTHON_BOKEH="python-bokeh",t.PYTHON_DASH="python-dash",t.PYTHON_FASTAPI="python-fastapi",t.PYTHON_FLASK="python-flask",t.PYTHON_SHINY="python-shiny",t.PYTHON_STREAMLIT="python-streamlit",t.PYTHON_GRADIO="python-gradio",t.QUARTO_SHINY="quarto-shiny",t.QUARTO="quarto",t.QUARTO_STATIC="quarto-static",t.R_PLUMBER="r-plumber",t.R_SHINY="r-shiny",t.RMD_SHINY="rmd-shiny",t.RMD="rmd",t.UNKNOWN="unknown",t))(Dc||{});function Qt(t){return!!(t&&t.state==="new")}var kr=(t=>(t.FILE="file",t.BUILT_IN="built-in",t.PERMISSIONS_ERROR="permissions",t))(kr||{}),yo=(t=>(t[t.EditConfiguration=0]="EditConfiguration",t))(yo||{});function eg(t){return Object.values(yo).includes(t)}const Er=[{detectionStr:"editing your configuration",anchorStr:"editing",buttonStr:"Edit Configuration",actionId:0}];function tg(t){return Er.find(e=>typeof t=="string"?t.includes(e.detectionStr):eg(t)?e.actionId===t:!1)}var me=(t=>(t.DEPLOY="deploy",t.INITIALIZING="initializing",t.EDIT_CONFIGURATION="editConfiguration",t.SHOW_SELECT_CONFIGURATION="showSelectConfiguration",t.NAVIGATE="navigate",t.SAVE_SELECTION_STATE="saveSelectionState",t.VSCODE_OPEN="vsCodeOpen",t.INCLUDE_FILE="includeFile",t.EXCLUDE_FILE="excludeFile",t.REQUEST_FILES_LISTS="requestFilesLists",t.REQUEST_CREDENTIALS="requestCredentials",t.VSCODE_OPEN_RELATIVE="VSCodeOpenRelativeMsg",t.ADD_SECRET="addSecret",t.REFRESH_PYTHON_PACKAGES="RefreshPythonPackagesMsg",t.SCAN_PYTHON_PACKAGE_REQUIREMENTS="ScanPythonPackageRequirementsMsg",t.REFRESH_R_PACKAGES="RefreshRPackagesMsg",t.SCAN_R_PACKAGE_REQUIREMENTS="ScanRPackageRequirementsMsg",t.SELECT_DEPLOYMENT="selectDeployment",t.NEW_DEPLOYMENT="newDeployment",t.NEW_CREDENTIAL_FOR_DEPLOYMENT="newCredentialForDeployment",t.NEW_CREDENTIAL="newCredential",t.VIEW_PUBLISHING_LOG="viewPublishingLog",t.SHOW_ASSOCIATE_GUID="ShowAssociateGUID",t.UPDATE_SELECTION_CREDENTIAL_STATE="UpdateSelectionCredentialStateMsg",t.UPDATE_SELECTION_IS_PRE_CONTENT_RECORD="UpdateSelectionIsPreContentRecordMsg",t))(me||{});const ng=(t,e)=>{let n=e&&Ge(e)||e==null?void 0:e.configuration.title;if(n)return{title:n,problem:!1};if(!t.configurationName)return{title:`Unknown Title Due To Missing Config Entry in ${t.saveName}`,problem:!0};if(!e)return{title:`Unknown Title Due to Missing Config ${t.configurationName}`,problem:!0};if(Ge(e))return{title:`Unknown Title • Error in ${e.configurationName}`,problem:!0};let i=e.configurationName;return i||(i=t.configurationName),i?n=`No Title (in ${i})`:n="No Title available",{title:n,problem:!0}};function Tl(t,{includeTime:e}={includeTime:!0}){const n=new Date(`${t}`).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric"});if(!e)return n;const i=ig(t);return`${n} at ${i}`}function ig(t,{includeSeconds:e}={includeSeconds:!1}){const n={hour:"2-digit",minute:"2-digit"};return e&&(n.second="2-digit"),new Date(`${t}`).toLocaleTimeString("en-US",n)}function sg(t,e){let n=t.filter(i=>!Ge(i));return e&&e!==Dc.UNKNOWN&&(n=n.filter(i=>rg(i,e))),n}function rg(t,e){return e===void 0?!1:t.configuration.type===e}var He=(t=>(t.INITIALIZING_REQUEST_COMPLETE="initializingRequestComplete",t.REFRESH_CONTENTRECORD_DATA="refreshContentRecordData",t.REFRESH_CONFIG_DATA="refreshConfigData",t.REFRESH_CREDENTIAL_DATA="refreshCredentialData",t.PUBLISH_START="publishStart",t.PUBLISH_FINISH_SUCCESS="publishFinishSuccess",t.PUBLISH_FINISH_FAILURE="publishFinishFailure",t.UPDATE_CONTENTRECORD_SELECTION="updateContentRecordSelection",t.SAVE_SELECTION="saveSelection",t.REFRESH_FILES="refreshFiles",t.UPDATE_PYTHON_PACKAGES="updatePythonPackages",t.UPDATE_R_PACKAGES="updateRPackages",t.SHOW_DISABLE_OVERLAY="showDisableOverlay",t.HIDE_DISABLE_OVERLAY="hideDisableOverlay",t.SET_PATH_SEPARATOR="setPathSeparator",t.UPDATE_SERVER_ENVIRONMENT="updateServerEnvironment",t))(He||{});function og(t){return t.kind==="initializingRequestComplete"||t.kind==="refreshContentRecordData"||t.kind==="refreshConfigData"||t.kind==="refreshCredentialData"||t.kind==="publishStart"||t.kind==="publishFinishSuccess"||t.kind==="publishFinishFailure"||t.kind==="updateContentRecordSelection"||t.kind==="saveSelection"||t.kind==="refreshFiles"||t.kind==="updatePythonPackages"||t.kind==="updateRPackages"||t.kind==="showDisableOverlay"||t.kind==="hideDisableOverlay"||t.kind==="setPathSeparator"||t.kind==="updateServerEnvironment"}class lg{constructor(e,n){Nn(this,"externalMsgCB");Nn(this,"rawMsgCB",e=>{if(this.externalMsgCB){const n=JSON.parse(e.data);if(og(n))this.externalMsgCB(n);else{console.error(`HostConduit::rawMsgCB, NonConduitMessage Received: ${JSON.stringify(e)}`);return}}});Nn(this,"onMsg",e=>{this.externalMsgCB=e,this.window.addEventListener("message",this.rawMsgCB)});Nn(this,"sendMsg",e=>{const n=JSON.stringify(e);this.vsCodeApi.postMessage(n)});this.window=e,this.vsCodeApi=n}deactivate(){this.window.removeEventListener("message",this.rawMsgCB)}}const Dl=t=>{let e=t;return e.endsWith("/")||(e+="/"),e},ag=t=>{const e=Object.keys(t);return!!(e.length&&e.includes("code")&&e.includes("msg")&&e.includes("operation"))},So=t=>{if(ag(t)){const e=Object.keys(t);if(e.length&&e.includes("data"))return!0}return!1},cg=t=>So(t)&&!ii(t)&&!Mc(t),ii=t=>So(t)&&(t.code==="invalidTOML"||t.code==="unknownTOMLKey"),Mc=t=>So(t)&&t.code==="deployedContentNotRunning",_e=nc("home",()=>{const t=re("/"),e=re(!1),n=re([]),i=re([]),s=re([]),r=re([]),o=I(()=>r.value.sort((G,ie)=>G.name.localeCompare(ie.name))),l=re(new Set),a=re(new Map),u=I(()=>{const G=new Map,ie=v.value;return ie===void 0||Ge(ie)||Object.entries(ie.configuration.environment||{}).forEach(([ee,Ce])=>{G.set(ee,Ce)}),G}),c=I(()=>{const G=[];return a.value.forEach((ie,ee)=>{u.value.has(ee)&&G.push(ee)}),G}),h=re(!1),p=re(),v=I(()=>{if(!p.value)return;const{configurationName:G,projectDir:ie}=p.value;let ee;return ee=i.value.find(Ce=>Ce.configurationName===G&&Ce.projectDir===ie),ee||(ee=s.value.find(Ce=>Ce.configurationName===G&&Ce.projectDir===ie)),ee});Nt([p,v],([G,ie],[ee])=>{var Gt;const Ce=new Map;if(ie===void 0||Ge(ie)){a.value=Ce;return}const Yt=(G==null?void 0:G.saveName)===(ee==null?void 0:ee.saveName);(Gt=ie.configuration.secrets)==null||Gt.forEach(Dn=>{var d;Yt&&((d=a.value)!=null&&d.has(Dn))?Ce.set(Dn,a.value.get(Dn)):Ce.set(Dn,void 0)}),a.value=Ce},{immediate:!0});const $=I(()=>r.value.find(G=>{var Ce;const ie=G.url.toLowerCase(),ee=(Ce=p.value)==null?void 0:Ce.serverUrl.toLowerCase();return ee?Dl(ie)===Dl(ee):!1})),k=re(),E=re(),N=re(!1),U=re(),W=re(),C=re(),J=re(!1),Te=re(),ce=re(),z=re(),X=re(),B=re(!1);function pe(G){const ie=p.value,ee=v.value,Ce=n.value.find(Yt=>Yt.deploymentPath===(G==null?void 0:G.deploymentPath));return p.value=Ce,ie===p.value&&ee===v.value}function ne(G){n.value.push(G),p.value=G}Nt([$],()=>ge());const ge=()=>{gt().sendMsg({kind:me.UPDATE_SELECTION_CREDENTIAL_STATE,content:{state:$.value!==void 0?"true":"false"}})};Nt([p],()=>Je());const Je=()=>{gt().sendMsg({kind:me.UPDATE_SELECTION_IS_PRE_CONTENT_RECORD,content:{state:Qt(p.value)?"true":"false"}})};Nt([v],()=>dt());const dt=()=>{var ie;const G=gt();if(p.value){const ee={deploymentName:p.value.saveName,projectDir:p.value.projectDir,configurationName:(ie=v.value)==null?void 0:ie.configurationName,deploymentPath:p.value.deploymentPath};G.sendMsg({kind:me.SAVE_SELECTION_STATE,content:{state:ee}})}},Z=(G,ie,ee,Ce)=>{N.value=G,U.value=ie,W.value=ee,C.value=Ce},S=(G,ie,ee,Ce,Yt)=>{J.value=G,Te.value=ie,ce.value=ee,z.value=Ce,X.value=Yt},b=()=>{const G=new Map;a.value.forEach((ie,ee)=>{G.set(ee,void 0)}),a.value=G},Ie=I(()=>Array.from(a.value.values()).filter(G=>G!==void 0).length),Qe={active:{isEmptyRequirements:I(()=>N.value&&W.value&&U.value&&U.value.length===0),isMissingRequirements:I(()=>N.value&&!W.value),isAlertActive:I(()=>Qe.active.isEmptyRequirements.value||Qe.active.isMissingRequirements.value),isInProject:I(()=>N.value)}},Le={active:{isMissingPackageFile:I(()=>J.value&&!ce.value),isEmptyRequirements:I(()=>!!(J.value&&ce.value&&Te.value&&Te.value.length===0)),isAlertActive:I(()=>Le.active.isMissingPackageFile.value||Le.active.isEmptyRequirements.value),isInProject:I(()=>J.value)}},Oe={isAvailable:I(()=>!!o.value.length),active:{isMissing:I(()=>ft.active.isCredentialMissing.value),isAlertActive:I(()=>Oe.active.isMissing.value)}},yi=I(()=>!ft.active.isAlertActive.value&&(Oe.active.isAlertActive.value||Le.active.isAlertActive.value||Qe.active.isAlertActive.value)),ft={active:{isEntryMissing:I(()=>!!(p.value&&!p.value.configurationName)),isMissing:I(()=>{var G;return!!(p.value&&!v.value&&!ft.active.isInErrorList((G=p.value)==null?void 0:G.configurationName)&&!ft.active.isEntryMissing.value)}),isTOMLError:I(()=>!!(v.value&&Ge(v.value)&&ii(v.value.error))),isUnknownType:I(()=>!!(v.value&&!Ge(v.value)&&v.value.configuration.type==="unknown")),isUnknownError:I(()=>!!(v.value&&Ge(v.value)&&cg(v.value.error))),isInErrorList:G=>G?!!s.value.find(ie=>{var ee;return ie.configurationName===((ee=p.value)==null?void 0:ee.configurationName)}):!1,isCredentialMissing:I(()=>!!(p.value&&!$.value)),isAlertActive:I(()=>ft.active.isEntryMissing.value||ft.active.isMissing.value||ft.active.isTOMLError.value||ft.active.isUnknownError.value||ft.active.isCredentialMissing.value)}};return{platformFileSeparator:t,showDisabledOverlay:h,publishInProgress:e,contentRecords:n,configurations:i,configurationsInError:s,credentials:r,sortedCredentials:o,serverSecrets:l,secrets:a,environment:u,duplicatedEnvironmentVariables:c,selectedContentRecord:p,selectedConfiguration:v,serverCredential:$,initializingRequestComplete:B,lastContentRecordResult:k,lastContentRecordMsg:E,pythonProject:N,pythonPackages:U,pythonPackageFile:W,pythonPackageManager:C,rProject:J,rPackages:Te,rPackageFile:ce,anyActiveAlerts:yi,updateSelectedContentRecordBySelector:pe,updateSelectedContentRecordByObject:ne,updateParentViewSelectionState:dt,updatePythonPackages:Z,updateRPackages:S,clearSecretValues:b,secretsWithValueCount:Ie,python:Qe,r:Le,config:ft,credential:Oe}});function Nc(t,e,n=new Array,i=0,s){return t.forEach(r=>{const{files:o,...l}=r,a={...l,indent:i,parent:s};n.push(a),r.files.length>0&&e.has(r.id)&&Nc(r.files,e,n,i+1,r.id)}),n}const xo=nc("file",()=>{const t=_e(),{sendMsg:e}=gt(),n=re(),i=re(new Set),s=I(()=>{var p;return Nc(((p=n.value)==null?void 0:p.files)||[],i.value)}),r=I(()=>{var p,v;return((p=t.selectedContentRecord)==null?void 0:p.state)!=="new"?new Set((v=t.selectedContentRecord)==null?void 0:v.files):new Set});function o(){e({kind:me.REQUEST_FILES_LISTS})}function l({id:p}){e({kind:me.INCLUDE_FILE,content:{path:p}})}function a({id:p}){e({kind:me.EXCLUDE_FILE,content:{path:p}})}function u({id:p}){e({kind:me.VSCODE_OPEN_RELATIVE,content:{relativePath:p}})}function c({id:p}){i.value.add(p)}function h({id:p}){i.value.delete(p)}return{files:n,expandedDirs:i,lastDeployedFiles:r,flatFiles:s,refreshFiles:o,includeFile:l,excludeFile:a,openFile:u,expandDir:c,collapseDir:h}});let sr;const ug=()=>(sr||(sr=acquireVsCodeApi()),sr);let Pt;const dg=ug();function gt(){return Pt||(Pt=new lg(window,dg),Br(()=>Pt&&Pt.onMsg(fg)),fs(()=>Pt&&Pt.deactivate()),_e().initializingRequestComplete=!1,Pt.sendMsg({kind:me.INITIALIZING})),{sendMsg:e=>{if(!Pt){console.error(`HostCondiutService::sendMsg attempted ahead of call to useHostConduitService. Message Dropped: ${JSON.stringify(e)}`);return}return console.debug(`HostConduitService - Sending Msg: ${JSON.stringify(e)}`),Pt.sendMsg(e)}}}const fg=t=>{switch(console.debug(`HostConduitService - Receiving Msg: ${JSON.stringify(t)}`),t.kind){case He.INITIALIZING_REQUEST_COMPLETE:return pg();case He.REFRESH_CONTENTRECORD_DATA:return mg(t);case He.REFRESH_CONFIG_DATA:return bg(t);case He.REFRESH_CREDENTIAL_DATA:return yg(t);case He.PUBLISH_START:return Sg();case He.PUBLISH_FINISH_SUCCESS:return xg();case He.PUBLISH_FINISH_FAILURE:return wg(t);case He.UPDATE_CONTENTRECORD_SELECTION:return _g(t);case He.SAVE_SELECTION:return Cg();case He.REFRESH_FILES:return kg(t);case He.UPDATE_PYTHON_PACKAGES:return Eg(t);case He.UPDATE_R_PACKAGES:return $g(t);case He.SHOW_DISABLE_OVERLAY:return gg();case He.HIDE_DISABLE_OVERLAY:return vg();case He.SET_PATH_SEPARATOR:return hg(t);case He.UPDATE_SERVER_ENVIRONMENT:return Ig(t);default:console.warn(`unexpected command: ${JSON.stringify(t)}`)}},hg=t=>{_e().platformFileSeparator=t.content.separator},pg=()=>{_e().initializingRequestComplete=!0},gg=()=>{_e().showDisabledOverlay=!0},vg=()=>{_e().showDisabledOverlay=!1},mg=t=>{const e=_e();e.contentRecords=t.content.contentRecords;const n=t.content.deploymentSelected;if(n===null){e.selectedContentRecord=void 0;return}if(n===void 0){e.selectedContentRecord&&e.updateSelectedContentRecordBySelector({deploymentPath:e.selectedContentRecord.deploymentPath,deploymentName:e.selectedContentRecord.deploymentName,projectDir:e.selectedContentRecord.projectDir});return}e.updateSelectedContentRecordBySelector(n)},bg=t=>{const e=_e();e.configurations=t.content.configurations,e.configurationsInError=t.content.configurationsInError},yg=t=>{const e=_e();e.credentials=t.content.credentials},Sg=()=>{const t=_e();t.publishInProgress=!0},xg=()=>{const t=_e();t.clearSecretValues(),t.publishInProgress=!1,t.lastContentRecordResult="Last Deployment was Successful",t.lastContentRecordMsg=""},wg=t=>{const e=_e();e.publishInProgress=!1,e.lastContentRecordResult="Last Deployment Failed",e.lastContentRecordMsg=t.content.data.message},_g=t=>{const e=_e();e.updateSelectedContentRecordByObject(t.content.preContentRecord),t.content.saveSelection&&e.updateParentViewSelectionState()},Cg=()=>{_e().updateParentViewSelectionState()},kg=t=>{var n;const e=xo();t.content.files.abs!==((n=e.files)==null?void 0:n.abs)&&(e.expandedDirs=new Set),e.files=t.content.files},Eg=t=>{_e().updatePythonPackages(t.content.pythonProject,t.content.packages,t.content.file,t.content.manager)},$g=t=>{_e().updateRPackages(t.content.rProject,t.content.packages,t.content.file,t.content.manager,t.content.rVersion)},Ig=t=>{const e=_e();e.serverSecrets=new Set(t.content.environment)},Og={class:"quick-pick-option"},Rg={class:"quick-pick-row"},Ag={class:"quick-pick-label-container"},Pg={class:"quick-pick-label"},Tg={key:0,class:"quick-pick-description"},Dg={class:"quick-pick-row"},Mg={key:0,class:"quick-pick-detail"},Ng={key:1,class:"quick-pick-detail"},Fg=Ne({__name:"QuickPickItem",props:{label:{},description:{},details:{},codicon:{}},setup(t){const e=n=>typeof n=="object"&&"icon"in n&&"text"in n;return(n,i)=>(m(),R("div",Og,[M("div",Rg,[n.codicon?(m(),R("div",{key:0,class:De(["quick-pick-icon codicon",n.codicon])},null,2)):K("",!0),M("div",Ag,[M("span",Pg,xe(n.label),1),n.description?(m(),R("span",Tg,xe(n.description),1)):K("",!0)])]),(m(!0),R(le,null,qt(n.details,s=>(m(),R("div",Dg,[e(s)?(m(),R("div",Mg,[M("div",{class:De(["quick-pick-icon codicon",s.icon])},null,2),M("span",null,xe(s.text),1)])):(m(),R("span",Ng,xe(s),1))]))),256))]))}}),Ml=mt(Fg,[["__scopeId","data-v-1ded88e6"]]),Lg={class:"monaco-action-bar"},Bg=["aria-label"],Vg={class:"action-item menu-entry",role:"presentation"},Hg=["title","aria-label","onClick","onKeydown"],jg=["data-vscode-context"],Ug=["title","aria-label"],zg=Ne({__name:"ActionToolbar",props:{title:{},actions:{},contextMenu:{}},setup(t){const e=t,n=re(null),i=r=>{var o,l,a,u;r instanceof PointerEvent?(o=r.target)==null||o.dispatchEvent(new MouseEvent("contextmenu",{bubbles:!0,clientX:r.clientX,clientY:r.clientY})):r instanceof KeyboardEvent&&((u=r.target)==null||u.dispatchEvent(new MouseEvent("contextmenu",{bubbles:!0,clientX:(l=n.value)==null?void 0:l.getBoundingClientRect().x,clientY:(a=n.value)==null?void 0:a.getBoundingClientRect().bottom})))},s=I(()=>{if(e.contextMenu)return JSON.stringify({webviewSection:e.contextMenu,preventDefaultContextMenuItems:!0})});return(r,o)=>(m(),R("div",Lg,[M("ul",{class:"actions-container",role:"toolbar","aria-label":`${r.title} actions`},[(m(!0),R(le,null,qt(r.actions,l=>(m(),R("li",Vg,[M("a",{class:De(["action-label codicon",l.codicon]),role:"button",title:l.label,"aria-label":l.label,tabindex:"0",onClick:Qi(l.fn,["stop"]),onKeydown:ui(l.fn,["enter"])},null,42,Hg)]))),256)),r.contextMenu?(m(),R("li",{key:0,ref_key:"contextMenuButton",ref:n,"data-vscode-context":s.value,class:"action-item menu-entry",role:"presentation"},[M("a",{class:"action-label codicon codicon-ellipsis",role:"button",title:`More ${r.title} actions`,"aria-label":`More ${r.title} actions`,tabindex:"0",onClick:Qi(i,["stop","prevent"]),onKeydown:ui(i,["enter"])},null,40,Ug)],8,jg)):K("",!0)],8,Bg)]))}}),En=mt(zg,[["__scopeId","data-v-86e03dc5"]]),qg=["disabled"],Wg=Ne({__name:"DeployButton",setup(t){const e=_e(),n=gt(),i=I(()=>!!e.selectedContentRecord&&!!e.selectedConfiguration&&!!e.serverCredential),s=()=>{if(!e.selectedContentRecord||!e.selectedConfiguration||!e.serverCredential){console.error("DeployButton::deploy trying to send message with undefined values. Action ignored.");return}const r={};e.secrets.forEach((o,l)=>{o&&(r[l]=o)}),n.sendMsg({kind:me.DEPLOY,content:{deploymentName:e.selectedContentRecord.saveName,configurationName:e.selectedConfiguration.configurationName,credentialName:e.serverCredential.name,projectDir:e.selectedContentRecord.projectDir,secrets:r}})};return(r,o)=>(m(),R("vscode-button",{"data-automation":"deploy-button",disabled:!i.value||L(e).publishInProgress,onClick:s}," Deploy Your Project ",8,qg))}}),Yg=Ne({__name:"TextStringWithAnchor",props:{message:{},splitOptions:{}},emits:["click"],setup(t,{emit:e}){const n=e,i=t,s=I(()=>tg(i.message)),r=I(()=>{if(s.value!==void 0&&s.value.anchorStr){const l=i.message.split(s.value.anchorStr);if(l.length===2)return l}return["",""]}),o=()=>{s.value&&n("click",s.value.actionId)};return(l,a)=>{var u;return s.value?(m(),R("span",{key:0,class:De(l.$attrs.class)},[ye(xe(r.value[0])+" ",1),M("a",{class:"webview-link",role:"button",onClick:a[0]||(a[0]=c=>o())},xe((u=s.value)==null?void 0:u.anchorStr),1),ye(" "+xe(r.value[1]),1)],2)):(m(),R("span",{key:1,class:De(l.$attrs.class)},xe(l.message),3))}}}),Gg={key:0,"data-automation":"publisher-deployment-section"},Jg={class:"label"},Qg={key:1},Xg={key:2,"data-automation":"missing-config"},Zg={key:3,"data-automation":"edit-config"},Kg={key:4},ev={key:5},tv={key:6,"data-automation":"missing-creds"},nv={key:0,class:"deployment-in-progress-container"},iv={class:"flex-grow"},sv={class:"deployment-summary-container"},rv={key:1},ov={class:"deployment-summary-container","data-automation":"deploy-status"},lv={class:"deployment-summary-title"},av={key:0,class:"date-time"},cv={key:0},uv={key:1},dv={key:2,class:"date-time"},fv={key:3,class:"last-deployment-details last-deployment-error"},hv={key:2,class:"last-deployment-details"},pv={key:1},gv=Ne({__name:"EvenEasierDeploy",setup(t){const e=_e(),n=gt(),i=I(()=>{const S=[];return S.push({label:"Add Deployment",codicon:"codicon-add",fn:r}),e.selectedConfiguration&&S.push({label:"Edit Configuration",codicon:"codicon-edit",fn:()=>o(e.selectedConfiguration.configurationPath)}),S}),s=()=>{n.sendMsg({kind:me.SELECT_DEPLOYMENT})},r=()=>{n.sendMsg({kind:me.NEW_DEPLOYMENT})},o=(S,b)=>{n.sendMsg({kind:me.EDIT_CONFIGURATION,content:{configurationPath:S,selection:b}})},l=()=>{n.sendMsg({kind:me.VIEW_PUBLISHING_LOG})},a=I(()=>{var S;return sg(e.configurations,(S=e.selectedContentRecord)==null?void 0:S.type)}),u=I(()=>a.value.length>0?"even-easier-deploy-more-menu-matching-configs":"even-easier-deploy-more-menu-no-matching-configs"),c=I(()=>a.value.length>0?"Select a Configuration":"Create a Configuration"),h=I(()=>e.publishInProgress||Qt(e.selectedContentRecord)?"homeview-active-contentRecord-more-menu":"homeview-last-contentRecord-more-menu"),p=I(()=>e.selectedContentRecord?ng(e.selectedContentRecord,e.selectedConfiguration).title:""),v=I(()=>{const S=[];return S.push({icon:"codicon-server",text:$.value}),k.value&&S.push({icon:"codicon-file",text:k.value}),S}),$=I(()=>{var S,b;return(S=e.serverCredential)!=null&&S.name?`${e.serverCredential.name}`:`Missing Credential for ${(b=e.selectedContentRecord)==null?void 0:b.serverUrl}`}),k=I(()=>{if(e.selectedConfiguration&&!Ge(e.selectedConfiguration)){const S=e.selectedContentRecord,b=e.selectedConfiguration;if(S){let Ie="";return S.projectDir!=="."&&(Ie=`${S.projectDir}${e.platformFileSeparator}`),e.config.active.isUnknownError||(Ie+=b.configuration.entrypoint),Ie}}return"ProjectDir and Entrypoint not determined"}),E=()=>{n.sendMsg({kind:me.SHOW_SELECT_CONFIGURATION})},N=I(()=>{if(e.selectedContentRecord)return C.value?"Last Deployment Dismissed":e.selectedContentRecord.deploymentError?"Last Deployment Failed":Qt(e.selectedContentRecord)?U.value?"Not Yet Updated":"Not Yet Deployed":"Last Deployment Successful"}),U=I(()=>Qt(e.selectedContentRecord)&&!!e.selectedContentRecord.id),W=I(()=>Qt(e.selectedContentRecord)&&!U.value),C=I(()=>{var S;return!!((S=e.selectedContentRecord)!=null&&S.dismissedAt)}),J=I(()=>{var b,Ie,Qe,Le,Oe;let S="unknown";return e.selectedConfiguration&&!Ge(e.selectedConfiguration)&&e.selectedConfiguration.configuration.entrypoint&&(S=e.selectedConfiguration.configuration.entrypoint),`Deployment Details
- Deployment Record: ${((b=e.selectedContentRecord)==null?void 0:b.saveName)||"<undefined>"}
- Configuration File: ${((Ie=e.selectedConfiguration)==null?void 0:Ie.configurationName)||"<undefined>"}
- Credential In Use: ${((Qe=e.serverCredential)==null?void 0:Qe.name)||"<undefined>"}
- Project Dir: ${((Le=e.selectedContentRecord)==null?void 0:Le.projectDir)||"<undefined>"}
- Entrypoint: ${S}
- Server URL: ${((Oe=e.serverCredential)==null?void 0:Oe.url)||"<undefined>"}`}),Te=I(()=>{if(e.selectedConfiguration&&Ge(e.selectedConfiguration)&&ii(e.selectedConfiguration.error))return e.selectedConfiguration.error}),ce=I(()=>{const S=Te.value;return S&&ii(S)?`on line ${S.data.line}`:""}),z=I(()=>{var b;const S=(b=e.selectedContentRecord)==null?void 0:b.deploymentError;return!!(S&&Mc(S))}),X=I(()=>z.value?"View Deployment Logs":"View Content"),B=()=>{const S=Te.value;S&&ii(S)&&o(e.selectedConfiguration.configurationPath,{start:{line:S.data.line-1,character:S.data.column-1}}),console.error("EvenEasierDeploy::onEditConfigurationWithTOMLError, error is not expected type. Ignoring.")},pe=S=>{const b=Er.find(Ie=>Ie.actionId===S);if(!b){console.error("EvenEasierDeploy::onErrorMessageAnchorClick, event does not match options. Ignoring.");return}if(b.actionId===yo.EditConfiguration){o(e.selectedConfiguration.configurationPath);return}},ne=S=>{n.sendMsg({kind:me.NAVIGATE,content:{uriPath:S}})},ge=()=>{n.sendMsg({kind:me.NEW_CREDENTIAL_FOR_DEPLOYMENT})},Je=()=>{n.sendMsg({kind:me.SHOW_ASSOCIATE_GUID})},dt=I(()=>{const S=e.selectedContentRecord;if(S)return(S==null?void 0:S.dashboardUrl)||!Qt(S)&&S.logsUrl}),Z=()=>{const S=e.selectedContentRecord;S&&(z.value&&!Qt(S)?ne(S.logsUrl):S.dashboardUrl&&ne(S.dashboardUrl))};return(S,b)=>{var Ie,Qe,Le;return L(e).initializingRequestComplete?(m(),R("div",Gg,[M("div",Jg,[b[4]||(b[4]=M("span",{class:"text-sm text-sidebar-section-header"},"DEPLOYMENT",-1)),se(En,{title:"Deployment",actions:i.value,"context-menu":L(e).selectedContentRecord?u.value:void 0},null,8,["actions","context-menu"])]),L(e).selectedContentRecord?(m(),R(le,{key:0},[M("div",In({class:"deployment-control"},li({click:s},!0)),[se(Ml,{label:p.value,details:v.value,title:J.value,"data-automation":"entrypoint-label"},null,8,["label","details","title"]),b[5]||(b[5]=M("div",{class:"select-indicator codicon codicon-chevron-right","aria-hidden":"true"},null,-1))],16),L(e).duplicatedEnvironmentVariables.length?(m(),R(le,{key:0},[M("p",null,[L(e).duplicatedEnvironmentVariables.length===1?(m(),R(le,{key:0},[ye(" A variable was set as both a secret and environment variable. It must only be set as one or the other. ")],64)):K("",!0),L(e).duplicatedEnvironmentVariables.length>1?(m(),R(le,{key:1},[ye(" Variables were set as both secrets and environment variables. They must only be set as one or the other. ")],64)):K("",!0),M("a",{class:"webview-link",role:"button",onClick:b[0]||(b[0]=Oe=>o(L(e).selectedConfiguration.configurationPath))},"Edit the Configuration"),b[6]||(b[6]=ye(". "))]),M("p",null,xe(L(e).duplicatedEnvironmentVariables.join(", ")),1),b[7]||(b[7]=M("p",null,null,-1))],64)):K("",!0),L(e).config.active.isEntryMissing?(m(),R("p",Qg,[ye(" No Config Entry in Deployment record - "+xe((Ie=L(e).selectedContentRecord)==null?void 0:Ie.saveName)+". ",1),M("a",{class:"webview-link",role:"button",onClick:E},xe(c.value),1),b[8]||(b[8]=ye(". "))])):K("",!0),L(e).config.active.isMissing?(m(),R("p",Xg,[b[9]||(b[9]=ye(" The last Configuration used for this Deployment was not found. ")),M("a",{class:"webview-link",role:"button",onClick:E,"data-automation":"config-button"},xe(c.value),1),b[10]||(b[10]=ye(". "))])):K("",!0),L(e).config.active.isTOMLError?(m(),R("p",Zg,[ye(" The selected Configuration has a schema error "+xe(ce.value)+". ",1),M("a",{class:"webview-link",role:"button",onClick:b[1]||(b[1]=Oe=>B()),"data-automation":"edit-config-button"},"Edit the Configuration"),b[11]||(b[11]=ye(". "))])):K("",!0),L(e).config.active.isUnknownType?(m(),R("p",Kg,[b[12]||(b[12]=ye(" Please set the framework you are using, for example ")),b[13]||(b[13]=M("code",null,"type = 'python-shiny'",-1)),b[14]||(b[14]=ye(". ")),M("a",{class:"webview-link",role:"button",onClick:b[2]||(b[2]=Oe=>o(L(e).selectedConfiguration.configurationPath))},"Edit the Configuration"),b[15]||(b[15]=ye(". "))])):K("",!0),L(e).config.active.isUnknownError?(m(),R("p",ev,[b[16]||(b[16]=ye(" The selected Configuration has an error. ")),M("a",{class:"webview-link",role:"button",onClick:b[3]||(b[3]=Oe=>o(L(e).selectedConfiguration.configurationPath))},"Edit the Configuration"),b[17]||(b[17]=ye(". "))])):K("",!0),L(e).config.active.isCredentialMissing?(m(),R("p",tv,[b[18]||(b[18]=ye(" A Credential for the Deployment's server URL was not found. ")),M("a",{class:"webview-link",role:"button",onClick:ge,"data-automation":"creds-button"},"Create a new Credential"),b[19]||(b[19]=ye(". "))])):K("",!0),se(Wg,{class:"w-full"})],64)):(m(),R("div",In({key:1,class:"deployment-control"},li({click:s},!0)),[se(Ml,{label:"Select...",details:["(new or existing)"],"data-automation":"select-deployment"}),b[20]||(b[20]=M("div",{class:"select-indicator codicon codicon-chevron-down","aria-hidden":"true"},null,-1))],16)),L(e).selectedContentRecord&&L(e).selectedContentRecord.serverType?(m(),R(le,{key:2},[b[27]||(b[27]=M("vscode-divider",{class:"home-view-divider"},null,-1)),L(e).publishInProgress?(m(),R("div",nv,[b[22]||(b[22]=M("vscode-progress-ring",{class:"progress-ring"},null,-1)),M("div",iv,[M("div",sv,[b[21]||(b[21]=M("div",{class:"progress-container"},[M("div",{class:"progress-desc"},[M("h4",{"data-automation":"deployment-progress",class:"deployment-summary-title"}," Deployment in Progress... ")])],-1)),se(En,{title:"Logs",actions:[],"context-menu":h.value},null,8,["context-menu"])]),M("p",{class:"progress-log-anchor"},[M("a",{class:"webview-link",role:"button",onClick:l}," View Log ")])])])):(m(),R("div",rv,[M("div",ov,[M("h4",lv,xe(N.value),1),se(En,{title:"Logs",actions:[],"context-menu":h.value},null,8,["context-menu"])]),C.value?(m(),R("div",av,xe(L(Tl)(L(e).selectedContentRecord.dismissedAt)),1)):(m(),R(le,{key:1},[W.value?(m(),R("div",cv,[b[23]||(b[23]=ye(" Is this already deployed to a Connect server? You can ")),M("a",{class:"webview-link",role:"button",onClick:Je},"update that previous deployment"),b[24]||(b[24]=ye(". "))])):K("",!0),U.value?(m(),R("div",uv,[M("a",{class:"webview-link",role:"button",onClick:Z},"This deployment"),b[25]||(b[25]=ye(" will be updated when deployed. "))])):K("",!0),L(Qt)(L(e).selectedContentRecord)?K("",!0):(m(),R("div",dv,xe(L(Tl)(L(e).selectedContentRecord.deployedAt)),1)),L(e).selectedContentRecord.deploymentError?(m(),R("div",fv,[b[26]||(b[26]=M("div",{class:"alert-border border-warning text-warning"},[M("span",{class:"codicon codicon-alert"})],-1)),se(Yg,{message:(Le=(Qe=L(e).selectedContentRecord)==null?void 0:Qe.deploymentError)==null?void 0:Le.msg,splitOptions:L(Er),class:"error-message text-description",onClick:pe},null,8,["message","splitOptions"])])):K("",!0)],64)),dt.value?(m(),R("div",hv,[M("vscode-button",{appearance:"secondary",onClick:Z,class:"w-full"},xe(X.value),1)])):K("",!0)]))],64)):K("",!0)])):(m(),R("div",pv,b[28]||(b[28]=[M("div",{class:"progress-container"},[M("div",{class:"progress-desc"},[M("div",null,"Scanning directories...")])],-1)])))}}}),vv=mt(gv,[["__scopeId","data-v-dc961001"]]),mv={class:"count-badge"},bv=Ne({__name:"CountBadge",props:{count:{}},setup(t){return(e,n)=>(m(),R("div",mv,xe(e.count),1))}}),yv=mt(bv,[["__scopeId","data-v-bcab692a"]]),Sv=["onKeydown"],xv={class:"title"},wv={key:0,class:"description"},_v={key:1,class:"description"},Cv={key:0,class:"actions"},kv={key:1,class:"count"},Ev={class:"pane-body"},$v=Ne({__name:"TreeSection",props:fn({title:{},description:{},codicon:{},actions:{},count:{}},{expanded:{required:!1,default:!1},expandedModifiers:{}}),emits:["update:expanded"],setup(t){const e=hs(t,"expanded"),n=()=>{e.value=!e.value};return(i,s)=>(m(),R("div",{class:De(["pane",{expanded:e.value}])},[M("div",{class:De(["pane-header",{expanded:e.value}]),tabindex:"0",onKeydown:ui(Qi(n,["self"]),["enter"])},[M("div",{class:"pane-header-title-container",onClick:n},[M("div",{class:De(["twisty-container codicon",e.value?"codicon-chevron-down":"codicon-chevron-right"])},null,2),M("h3",xv,xe(i.title),1),i.$slots.description?(m(),R("span",wv,[lt(i.$slots,"description",{},void 0,!0)])):i.description?(m(),R("span",_v,xe(i.description),1)):K("",!0),i.codicon&&!e.value?(m(),R("div",{key:2,class:De(["tree-section-icon codicon",i.codicon])},null,2)):K("",!0)]),i.actions?(m(),R("div",Cv,[se(En,{title:i.title,actions:i.actions},null,8,["title","actions"])])):K("",!0),i.count?(m(),R("div",kv,[se(yv,{count:i.count},null,8,["count"])])):K("",!0)],42,Sv),mi(M("div",Ev,[lt(i.$slots,"default",{},void 0,!0)],512),[[Jr,e.value]])],2))}}),Tn=mt($v,[["__scopeId","data-v-16f679f1"]]),Iv=["title"],Ov={class:"indent"},Rv={class:"indent-guide"},Av=["checked","disabled"],Pv={class:"tree-item-title"},Tv={key:0,class:"tree-item-description"},Dv={key:0,class:"actions"},Mv={key:1},Nv={class:"tree-item-children"},Fv=Ne({__name:"TreeItemCheckbox",props:fn({title:{},checked:{type:Boolean},disabled:{type:Boolean},listStyle:{default:"default"},description:{},tooltip:{},alignIconWithTwisty:{type:Boolean},actions:{},indentLevel:{default:1},expandable:{type:Boolean,default:!1},virtualized:{type:Boolean,default:!1},disableOpacity:{type:Boolean,default:!1}},{expanded:{required:!1,default:!1},expandedModifiers:{}}),emits:fn(["check","uncheck","expand","collapse"],["update:expanded"]),setup(t,{emit:e}){Ya(a=>({"0e73e221":a.indentLevel}));const n=hs(t,"expanded"),i=t,s=xa(),r=e,o=()=>{n.value=!n.value,r(n.value?"expand":"collapse")},l=I(()=>!!(s.default||i.expandable));return(a,u)=>(m(),R("div",{class:De(["tree-item",{"align-icon-with-twisty":a.alignIconWithTwisty,collapsible:l.value,"text-list-emphasized":a.listStyle==="emphasized","text-foreground":a.listStyle==="default","text-list-deemphasized":a.listStyle==="deemphasized"}])},[M("div",{class:De(["tree-item-container",a.virtualized?"class-hover":void 0]),title:a.tooltip},[M("div",Ov,[(m(!0),R(le,null,qt(a.indentLevel-1,c=>(m(),R("div",Rv))),256))]),M("div",In({class:["twisty-container text-icon",[{codicon:l.value},a.expandable||a.$slots.default?n.value?"codicon-chevron-down":"codicon-chevron-right":void 0]]},li({click:l.value?o:void 0},!0)),null,16),M("vscode-checkbox",{checked:a.checked,disabled:a.disabled,class:De(["tree-item-checkbox",{"opacity-100":a.disableOpacity}]),onClick:u[0]||(u[0]=c=>a.checked?a.$emit("uncheck"):a.$emit("check"))},[M("span",Pv,xe(a.title),1),a.description?(m(),R("span",Tv,xe(a.description),1)):K("",!0)],10,Av),a.actions?(m(),R("div",Dv,[se(En,{title:a.title,actions:a.actions},null,8,["title","actions"])])):K("",!0),a.$slots.postDecor?(m(),R("div",Mv,[lt(a.$slots,"postDecor",{},void 0,!0)])):K("",!0)],10,Iv),mi(M("div",Nv,[lt(a.$slots,"default",{indentLevel:a.indentLevel+1},void 0,!0)],512),[[Jr,l.value&&n.value]])],2))}}),Lv=mt(Fv,[["__scopeId","data-v-d8e379eb"]]);function Bv(t,{isEntrypoint:e=!1,isPackageFile:n=!1}={}){var s,r;let i=`${t.rel} will be included in the next deployment.`;return t.reason&&(i+=`
The configuration file ${(s=t.reason)==null?void 0:s.fileName} is including it with the pattern '${(r=t.reason)==null?void 0:r.pattern}'`),e&&(i+=`
${t.rel} is the entrypoint. Entrypoints must be included in the configuration 'files' list.`),n&&(i+=`
${t.rel} is a package file. Package files must be included in the configuration 'files' list.`),i}function Vv(t){var n,i;let e=`${t.rel} will be excluded in the next deployment.`;return t.reason?t.reason.source===kr.BUILT_IN?e+=`
This is a built-in exclusion for the pattern: '${t.reason.pattern}' and cannot be overridden.`:t.reason.source===kr.PERMISSIONS_ERROR?e+=`
You don't have permission to access this directory.`:e+=`
The configuration file ${(n=t.reason)==null?void 0:n.fileName} is excluding it with the pattern '${(i=t.reason)==null?void 0:i.pattern}'`:e+=`
It did not match any pattern in the configuration 'files' list.`,e}const Hv=Ne({__name:"ProjectFile",props:{file:{}},setup(t){const e=t,n=_e(),i=xo(),s=I(()=>{var N;const E=(N=e.file.reason)==null?void 0:N.source;return u.value&&r.value||c.value&&r.value||E==="built-in"||E==="permissions"}),r=I(()=>{var E;return((E=e.file.reason)==null?void 0:E.exclude)===!1}),o=I(()=>i.lastDeployedFiles.has(e.file.id)),l=I(()=>e.file.isFile&&r.value&&!o.value),a=I(()=>e.file.isFile&&!r.value&&o.value),u=I(()=>{const E=n.selectedConfiguration;return E!=null&&!Ge(E)?e.file.id===E.configuration.entrypoint:!1}),c=I(()=>h.value||p.value),h=I(()=>{var N;const E=n.selectedConfiguration;return E!=null&&!Ge(E)?e.file.id===((N=E.configuration.python)==null?void 0:N.packageFile):!1}),p=I(()=>{var N;const E=n.selectedConfiguration;return E!=null&&!Ge(E)?e.file.id===((N=E.configuration.r)==null?void 0:N.packageFile):!1}),v=I(()=>u.value?"emphasized":r.value?"default":"deemphasized"),$=I(()=>r.value?Bv(e.file,{isEntrypoint:u.value,isPackageFile:c.value}):Vv(e.file)),k=I(()=>{let E=[];return e.file.isFile&&E.push({label:"Open file",codicon:"codicon-link-external",fn:()=>{i.openFile(e.file)}}),E});return(E,N)=>{const U=Hr("PostDecor");return m(),we(Lv,{title:E.file.base,checked:r.value,disabled:s.value,"list-style":v.value,"disable-opacity":u.value||c.value,"indent-level":E.file.indent+1,expandable:E.file.isDir,tooltip:$.value,actions:k.value,virtualized:!0,onCheck:N[0]||(N[0]=W=>L(i).includeFile(E.file)),onUncheck:N[1]||(N[1]=W=>L(i).excludeFile(E.file)),onExpand:N[2]||(N[2]=W=>L(i).expandDir(E.file)),onCollapse:N[3]||(N[3]=W=>L(i).collapseDir(E.file))},{postDecor:Me(()=>[l.value?(m(),we(U,{key:0,class:"text-git-added","data-automation":`${E.file.id}-decorator`},{default:Me(()=>N[4]||(N[4]=[ye(" A ")])),_:1,__:[4]},8,["data-automation"])):K("",!0),a.value?(m(),we(U,{key:1,class:"text-git-deleted"},{default:Me(()=>N[5]||(N[5]=[ye("R")])),_:1,__:[5]})):K("",!0)]),_:1},8,["title","checked","disabled","list-style","disable-opacity","indent-level","expandable","tooltip","actions"])}}}),jv={key:1},Uv=Ne({__name:"ProjectFiles",setup(t){const e=xo();return(n,i)=>{const s=Hr("RecycleScroller");return m(),we(Tn,{"data-automation":"project-files",title:"Project Files",actions:[{label:"Refresh Project Files",codicon:"codicon-refresh",fn:()=>L(e).refreshFiles}]},{default:Me(()=>[L(e).flatFiles.length?(m(),we(s,{key:0,class:"scroller",items:L(e).flatFiles,"item-size":22},{default:Me(({item:r})=>[se(Hv,{file:r},null,8,["file"])]),_:1},8,["items"])):(m(),R("p",jv,"No files found"))]),_:1},8,["actions"])}}}),zv=mt(Uv,[["__scopeId","data-v-b0723544"]]),qv={},Wv={class:"welcome-view"};function Yv(t,e){return m(),R("div",Wv,[lt(t.$slots,"default")])}const Rs=mt(qv,[["render",Yv]]),Gv=["title"],Jv={class:"indent"},Qv={class:"indent-guide"},Xv={class:"tree-item-label-container"},Zv={class:"tree-item-title","data-automation":"req"},Kv={key:0,class:"tree-item-description"},em={key:1,class:"tree-item-description"},tm={key:1,class:"actions"},nm={key:2},im={class:"tree-item-children"},sm=Ne({__name:"TreeItem",props:fn({title:{},listStyle:{default:"default"},description:{},tooltip:{},alignIconWithTwisty:{type:Boolean},codicon:{},actions:{},indentLevel:{default:1},expandable:{type:Boolean,default:!1},virtualized:{type:Boolean,default:!1}},{expanded:{required:!1,default:!1},expandedModifiers:{}}),emits:fn(["expand","collapse"],["update:expanded"]),setup(t,{emit:e}){Ya(a=>({"8939423a":a.indentLevel}));const n=hs(t,"expanded"),i=t,s=xa(),r=e,o=()=>{n.value=!n.value,r(n.value?"expand":"collapse")},l=I(()=>!!(s.default||i.expandable));return(a,u)=>(m(),R("div",{class:De(["tree-item",{"align-icon-with-twisty":a.alignIconWithTwisty,collapsible:l.value,"text-list-emphasized":a.listStyle==="emphasized","text-foreground":a.listStyle==="default","text-list-deemphasized":a.listStyle==="deemphasized"}])},[M("div",In({class:["tree-item-container",a.virtualized?"class-hover":void 0],title:a.tooltip},li({click:l.value?o:void 0},!0)),[M("div",Jv,[(m(!0),R(le,null,qt(a.indentLevel-1,c=>(m(),R("div",Qv))),256))]),M("div",{class:De(["twisty-container text-icon",[{codicon:l.value},a.expandable||a.$slots.default?n.value?"codicon-chevron-down":"codicon-chevron-right":void 0]])},null,2),a.codicon?(m(),R("div",{key:0,class:De(["tree-item-icon text-icon codicon",a.codicon])},null,2)):K("",!0),M("div",Xv,[M("span",Zv,xe(a.title),1),a.$slots.description?(m(),R("span",Kv,[lt(a.$slots,"description",{},void 0,!0)])):a.description?(m(),R("span",em,xe(a.description),1)):K("",!0)]),a.actions?(m(),R("div",tm,[se(En,{title:a.title,actions:a.actions},null,8,["title","actions"])])):K("",!0),a.$slots.postDecor?(m(),R("div",nm,[lt(a.$slots,"postDecor",{},void 0,!0)])):K("",!0)],16,Gv),mi(M("div",im,[lt(a.$slots,"default",{indentLevel:a.indentLevel+1},void 0,!0)],512),[[Jr,l.value&&n.value]])],2))}}),On=mt(sm,[["__scopeId","data-v-92abc41e"]]),rm=["aria-label"],om=Ne({__name:"SidebarInput",props:fn({label:{}},{modelValue:{},modelModifiers:{}}),emits:fn(["submit","cancel"],["update:modelValue"]),setup(t,{expose:e}){const n=hs(t,"modelValue"),i=t,s=re(null),r=I(()=>`${i.label}. Press Enter to confirm or Escape to cancel.`);return e({select:()=>{var l;(l=s.value)==null||l.select()}}),(l,a)=>mi((m(),R("input",{"onUpdate:modelValue":a[0]||(a[0]=u=>n.value=u),ref_key:"input",ref:s,class:"sidebar-input","aria-label":r.value,onKeydown:[a[1]||(a[1]=ui(Qi(u=>l.$emit("submit"),["prevent"]),["enter"])),a[2]||(a[2]=ui(u=>l.$emit("cancel"),["escape"]))]},null,40,rm)),[[ef,n.value]])}}),lm=mt(om,[["__scopeId","data-v-54352c6e"]]),am=Ne({__name:"Secret",props:{name:{}},setup(t){const e=t,n=re(null),i=re(!1),s=re(),r=_e(),o=I(()=>r.secrets.get(e.name)),l=I(()=>r.serverSecrets.has(e.name)),a=I(()=>!o.value&&!l.value),u=()=>{s.value=o.value,i.value=!0,vi(()=>{var $;return($=n.value)==null?void 0:$.select()})},c=()=>{r.secrets.set(e.name,s.value),i.value=!1},h=I(()=>l.value?o.value?"On the next deploy the secret will be overwritten with the new value.":"The value is set on the server. Set a new value to overwrite it on the next deploy.":o.value?"On the next deploy the secret will be set.":"The secret will not be created on the next deploy without a value. Set a value to set it."),p=I(()=>{if(i.value)return[];const $=[{label:"Edit Value",codicon:"codicon-symbol-string",fn:u}];return o.value&&$.push({label:"Clear Value",codicon:"codicon-remove",fn:()=>{r.secrets.set(e.name,void 0)}}),$}),v=I(()=>JSON.stringify({name:e.name,webviewSection:"secrets-tree-item",preventDefaultContextMenuItems:!0}));return($,k)=>(m(),we(On,{title:$.name,actions:p.value,codicon:a.value?"codicon-warning":o.value?"codicon-cloud-upload":"codicon-check","list-style":a.value||o.value||i.value?"default":"deemphasized",tooltip:h.value,"align-icon-with-twisty":"","data-vscode-context":v.value},{description:Me(()=>[i.value?(m(),we(lm,{key:0,ref_key:"input",ref:n,modelValue:s.value,"onUpdate:modelValue":k[0]||(k[0]=E=>s.value=E),class:"w-full",label:"Type secret value",onSubmit:c,onCancel:k[1]||(k[1]=E=>i.value=!1)},null,8,["modelValue"])):a.value?K("",!0):(m(),R(le,{key:1},[ye("••••••")],64))]),_:1},8,["title","actions","codicon","list-style","tooltip","data-vscode-context"]))}}),cm=Ne({__name:"Secrets",setup(t){const e=_e(),{sendMsg:n}=gt(),i=I(()=>{const s=[{label:"Add Secret",codicon:"codicon-add",fn:()=>{n({kind:me.ADD_SECRET})}}];return e.secretsWithValueCount>0&&s.push({label:"Clear Values for all Secrets",codicon:"codicon-clear-all",fn:()=>{e.secrets.forEach((r,o)=>{e.secrets.set(o,void 0)})}}),s});return(s,r)=>(m(),we(Tn,{title:"Secrets",actions:i.value,count:L(e).secretsWithValueCount},{default:Me(()=>[L(e).secrets.size?(m(!0),R(le,{key:0},qt(L(e).secrets,([o])=>(m(),we(am,{name:o,key:o},null,8,["name"]))),128)):(m(),we(Rs,{key:1},{default:Me(()=>r[0]||(r[0]=[M("p",null,"No secrets have been added to the configuration.",-1)])),_:1,__:[0]}))]),_:1},8,["actions","count"]))}}),um={key:1},dm=Ne({__name:"PythonPackages",setup(t){const e=_e(),n=gt(),i=()=>{n.sendMsg({kind:me.REFRESH_PYTHON_PACKAGES})},s=()=>{n.sendMsg({kind:me.SCAN_PYTHON_PACKAGE_REQUIREMENTS})},r=()=>{e.pythonPackageFile&&n.sendMsg({kind:me.VSCODE_OPEN_RELATIVE,content:{relativePath:e.pythonPackageFile}})},o=I(()=>{const a=[];return e.pythonPackageFile&&a.push({label:"Edit Package Requirements File",codicon:"codicon-edit",fn:r}),a.push({label:"Refresh Packages",codicon:"codicon-refresh",fn:i}),e.pythonPackageFile&&a.push({label:"Scan For Package Requirements",codicon:"codicon-eye",fn:s}),a}),l=I(()=>!e.python.active.isInProject||e.python.active.isEmptyRequirements||e.python.active.isMissingRequirements);return(a,u)=>(m(),we(Tn,{title:"Python Packages","data-automation":"python-packages",actions:o.value,codicon:L(e).python.active.isAlertActive?"codicon-alert":""},{default:Me(()=>[l.value?(m(),we(Rs,{key:0},{default:Me(()=>[L(e).python.active.isMissingRequirements?(m(),R(le,{key:0},[u[2]||(u[2]=M("p",null," To deploy Python content, you need a package file listing any package dependencies, but the file does not exist. Click Scan to create one based on the files in your project and your configuration. ",-1)),M("vscode-button",{onClick:u[0]||(u[0]=c=>s())}," Scan ")],64)):L(e).python.active.isInProject?L(e).python.active.isEmptyRequirements?(m(),R(le,{key:2},[u[3]||(u[3]=M("p",null," This project currently has no Python package requirements. If this is not accurate, click Scan to update based on the files in your project and configuration. ",-1)),M("vscode-button",{onClick:u[1]||(u[1]=c=>s())}," Scan ")],64)):K("",!0):(m(),R("p",um," This project is not configured to use Python. To configure Python, add a [python] section to your configuration file. "))]),_:1})):(m(!0),R(le,{key:1},qt(L(e).pythonPackages,c=>(m(),we(On,{key:c,title:c,codicon:"codicon-package","align-icon-with-twisty":""},null,8,["title"]))),128))]),_:1},8,["actions","codicon"]))}}),fm={key:0},hm={key:1,"data-automation":"r-not-configured"},pm=Ne({__name:"RPackages",setup(t){const e=_e(),n=gt(),i=()=>{n.sendMsg({kind:me.REFRESH_R_PACKAGES})},s=()=>{e.rPackageFile&&n.sendMsg({kind:me.VSCODE_OPEN_RELATIVE,content:{relativePath:e.rPackageFile}})},r=()=>{n.sendMsg({kind:me.NAVIGATE,content:{uriPath:"https://rstudio.github.io/renv/articles/renv.html"}})},o=I(()=>{const c=[];return e.rPackageFile&&c.push({label:"Edit Package Requirements File",codicon:"codicon-edit",fn:s}),c.push({label:"Refresh Packages",codicon:"codicon-refresh",fn:i}),c}),l=I(()=>!e.r.active.isInProject||e.r.active.isEmptyRequirements||e.r.active.isMissingPackageFile),a=I(()=>{var c;if(e.selectedConfiguration&&!Ge(e.selectedConfiguration))return((c=e.selectedConfiguration.configuration.r)==null?void 0:c.packageFile)||"renv.lock"}),u=I(()=>e.r.active.isMissingPackageFile||e.r.active.isEmptyRequirements);return(c,h)=>(m(),we(Tn,{title:"R Packages","data-automation":"r-packages",actions:o.value,codicon:L(e).r.active.isAlertActive?"codicon-alert":""},{default:Me(()=>[l.value?(m(),we(Rs,{key:0},{default:Me(()=>[u.value?(m(),R("p",fm,[ye(" To deploy R content, you need a package file listing any package dependencies, but the file ("+xe(a.value)+") is missing, empty or invalid. ",1),M("a",{class:"webview-link",role:"button",onClick:r}," See the renv documentation for more details.")])):K("",!0),L(e).r.active.isInProject?K("",!0):(m(),R("p",hm," This project is not configured to use R. To configure R, add an [r] section to your configuration file. "))]),_:1})):(m(!0),R(le,{key:1},qt(L(e).rPackages,p=>(m(),we(On,{key:p.package,title:p.package,description:p.version,tooltip:p.source+": "+p.repository,codicon:"codicon-package","align-icon-with-twisty":""},null,8,["title","description","tooltip"]))),128))]),_:1},8,["actions","codicon"]))}}),gm=Ne({__name:"Credentials",setup(t){const e=_e(),{sendMsg:n}=gt(),i=I(()=>[{label:"New Credential",codicon:"codicon-add",fn:()=>{n({kind:me.NEW_CREDENTIAL})}},{label:"Refresh Credentials",codicon:"codicon-refresh",fn:()=>{n({kind:me.REQUEST_CREDENTIALS})}}]),s=r=>JSON.stringify({credentialGUID:r.guid,credentialName:r.name,webviewSection:"credentials-tree-item",preventDefaultContextMenuItems:!0});return(r,o)=>(m(),we(Tn,{title:"Credentials","data-automation":"publisher-credentials-section",actions:i.value,codicon:L(e).credential.active.isAlertActive?"codicon-alert":""},{default:Me(()=>[L(e).credential.isAvailable?(m(!0),R(le,{key:1},qt(L(e).sortedCredentials,l=>(m(),we(On,{title:l.name,description:l.url,"data-automation":`${l.name}-list`,codicon:"codicon-key","align-icon-with-twisty":"","data-vscode-context":s(l)},null,8,["title","description","data-automation","data-vscode-context"]))),256)):(m(),we(Rs,{key:0},{default:Me(()=>o[0]||(o[0]=[M("p",null,"No credentials have been added yet.",-1)])),_:1,__:[0]}))]),_:1},8,["actions","codicon"]))}}),vm=Ne({__name:"HelpAndFeedback",setup(t){const e=gt();return(n,i)=>(m(),we(Tn,{title:"Help and Feedback","data-automation":"publisher-help-section"},{default:Me(()=>[se(On,{title:"Get Started with Posit Publisher",tooltip:"Open Getting Started Documentation","align-icon-with-twisty":"",onClick:i[0]||(i[0]=s=>L(e).sendMsg({kind:L(me).NAVIGATE,content:{uriPath:"https://github.com/posit-dev/publisher/blob/main/docs/index.md"}}))}),se(On,{title:"Provide Feedback",tooltip:"Open GitHub Discussions","align-icon-with-twisty":"",onClick:i[1]||(i[1]=s=>L(e).sendMsg({kind:L(me).NAVIGATE,content:{uriPath:"https://github.com/posit-dev/publisher/discussions"}}))})]),_:1}))}}),mm=Ne({__name:"App",setup(t){gt();const e=_e(),n=re(!0);return(i,s)=>(m(),R("main",null,[se(Kp,{activateOverlay:L(e).showDisabledOverlay},{default:Me(()=>[se(vv,{class:"easy-deploy-container"}),L(e).selectedConfiguration&&!L(Ge)(L(e).selectedConfiguration)?(m(),R(le,{key:0},[se(zv,{expanded:n.value,"onUpdate:expanded":s[0]||(s[0]=r=>n.value=r)},null,8,["expanded"]),se(cm),se(dm),se(pm)],64)):K("",!0),se(gm),se(vm)]),_:1},8,["activateOverlay"])]))}}),bm=mt(mm,[["__scopeId","data-v-f8dfd618"]]);dp().register(Dp(),Up(),Wp(),Jp(),Vp(),Fp());const ym=Ff(),wo=lf(bm);wo.use(ym);wo.component("RecycleScroller",Qr);wo.mount("#app");
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9AdnVlL3NoYXJlZC9kaXN0L3NoYXJlZC5lc20tYnVuZGxlci5qcyIsIi4uL25vZGVfbW9kdWxlcy9AdnVlL3JlYWN0aXZpdHkvZGlzdC9yZWFjdGl2aXR5LmVzbS1idW5kbGVyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0B2dWUvcnVudGltZS1jb3JlL2Rpc3QvcnVudGltZS1jb3JlLmVzbS1idW5kbGVyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0B2dWUvcnVudGltZS1kb20vZGlzdC9ydW50aW1lLWRvbS5lc20tYnVuZGxlci5qcyIsIi4uL25vZGVfbW9kdWxlcy92dWUtcmVzaXplL2Rpc3QvdnVlLXJlc2l6ZS5lc20uanMiLCIuLi9ub2RlX21vZHVsZXMvdnVlLW9ic2VydmUtdmlzaWJpbGl0eS9kaXN0L3Z1ZS1vYnNlcnZlLXZpc2liaWxpdHkuZXNtLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3Z1ZS12aXJ0dWFsLXNjcm9sbGVyL2Rpc3QvdnVlLXZpcnR1YWwtc2Nyb2xsZXIuZXNtLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3BpbmlhL2Rpc3QvcGluaWEubWpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1lbGVtZW50L2Rpc3QvZXNtL3BsYXRmb3JtLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1lbGVtZW50L2Rpc3QvZXNtL2RvbS5qcyIsIi4uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZWxlbWVudC9kaXN0L2VzbS9vYnNlcnZhdGlvbi9ub3RpZmllci5qcyIsIi4uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZWxlbWVudC9kaXN0L2VzbS9vYnNlcnZhdGlvbi9vYnNlcnZhYmxlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1lbGVtZW50L2Rpc3QvZXNtL3RlbXBsYXRpbmcvaHRtbC1kaXJlY3RpdmUuanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnQvZGlzdC9lc20vdGVtcGxhdGluZy9iaW5kaW5nLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1lbGVtZW50L2Rpc3QvZXNtL3RlbXBsYXRpbmcvY29tcGlsZXIuanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnQvZGlzdC9lc20vdGVtcGxhdGluZy92aWV3LmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1lbGVtZW50L2Rpc3QvZXNtL3RlbXBsYXRpbmcvdGVtcGxhdGUuanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnQvZGlzdC9lc20vc3R5bGVzL2VsZW1lbnQtc3R5bGVzLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1lbGVtZW50L2Rpc3QvZXNtL2NvbXBvbmVudHMvYXR0cmlidXRlcy5qcyIsIi4uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZWxlbWVudC9kaXN0L2VzbS9jb21wb25lbnRzL2Zhc3QtZGVmaW5pdGlvbnMuanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnQvZGlzdC9lc20vY29tcG9uZW50cy9jb250cm9sbGVyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1lbGVtZW50L2Rpc3QvZXNtL2NvbXBvbmVudHMvZmFzdC1lbGVtZW50LmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1lbGVtZW50L2Rpc3QvZXNtL3N0eWxlcy9jc3MtZGlyZWN0aXZlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1lbGVtZW50L2Rpc3QvZXNtL3N0eWxlcy9jc3MuanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnQvZGlzdC9lc20vdGVtcGxhdGluZy9yZWYuanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnQvZGlzdC9lc20vaW50ZXJmYWNlcy5qcyIsIi4uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZWxlbWVudC9kaXN0L2VzbS90ZW1wbGF0aW5nL3doZW4uanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnQvZGlzdC9lc20vdGVtcGxhdGluZy9ub2RlLW9ic2VydmF0aW9uLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1lbGVtZW50L2Rpc3QvZXNtL3RlbXBsYXRpbmcvc2xvdHRlZC5qcyIsIi4uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9wYXR0ZXJucy9zdGFydC1lbmQuanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIi4uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9kaS9kaS5qcyIsIi4uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9kZXNpZ24tc3lzdGVtL2NvbXBvbmVudC1wcmVzZW50YXRpb24uanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qcyIsIi4uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS91dGlsaXRpZXMvYXBwbHktbWl4aW5zLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzL2Rpc3QvYXJpYS5qcyIsIi4uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3Qtd2ViLXV0aWxpdGllcy9kaXN0L2FycmF5LmpzIiwiLi4vbm9kZV9tb2R1bGVzL2V4ZW52LWVzNi9kaXN0L2Nhbi11c2UtZG9tLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzL2Rpc3QvZG9tLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzL2Rpc3Qva2V5LWNvZGVzLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzL2Rpc3QvbnVtYmVycy5qcyIsIi4uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3Qtd2ViLXV0aWxpdGllcy9kaXN0L3N0cmluZ3MuanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vcGF0dGVybnMvYXJpYS1nbG9iYWwuanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vYnV0dG9uL2J1dHRvbi50ZW1wbGF0ZS5qcyIsIi4uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9mb3JtLWFzc29jaWF0ZWQvZm9ybS1hc3NvY2lhdGVkLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2J1dHRvbi9idXR0b24uZm9ybS1hc3NvY2lhdGVkLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2J1dHRvbi9idXR0b24uanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vY2hlY2tib3gvY2hlY2tib3gudGVtcGxhdGUuanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vY2hlY2tib3gvY2hlY2tib3guZm9ybS1hc3NvY2lhdGVkLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2NoZWNrYm94L2NoZWNrYm94LmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2xpc3Rib3gtb3B0aW9uL2xpc3Rib3gtb3B0aW9uLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2xpc3Rib3gvbGlzdGJveC5qcyIsIi4uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9zZWxlY3Qvc2VsZWN0Lm9wdGlvbnMuanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vdXRpbGl0aWVzL2NvbXBvc2VkLXBhcmVudC5qcyIsIi4uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS91dGlsaXRpZXMvY29tcG9zZWQtY29udGFpbnMuanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vZGVzaWduLXRva2VuL2N1c3RvbS1wcm9wZXJ0eS1tYW5hZ2VyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2Rlc2lnbi10b2tlbi9kZXNpZ24tdG9rZW4uanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vZGVzaWduLXN5c3RlbS9kZXNpZ24tc3lzdGVtLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL2RpdmlkZXIvZGl2aWRlci50ZW1wbGF0ZS5qcyIsIi4uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9kaXZpZGVyL2RpdmlkZXIub3B0aW9ucy5qcyIsIi4uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9kaXZpZGVyL2RpdmlkZXIuanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vbGlzdGJveC1vcHRpb24vbGlzdGJveC1vcHRpb24udGVtcGxhdGUuanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vbGlzdGJveC9saXN0Ym94LmVsZW1lbnQuanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vcHJvZ3Jlc3MtcmluZy9wcm9ncmVzcy1yaW5nLnRlbXBsYXRlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3Byb2dyZXNzL2Jhc2UtcHJvZ3Jlc3MuanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vc2VsZWN0L3NlbGVjdC5mb3JtLWFzc29jaWF0ZWQuanMiLCIuLi9ub2RlX21vZHVsZXMvQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24vZGlzdC9lc20vc2VsZWN0L3NlbGVjdC5qcyIsIi4uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS9zZWxlY3Qvc2VsZWN0LnRlbXBsYXRlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uL2Rpc3QvZXNtL3V0aWxpdGllcy9zdHlsZS9kaXNhYmxlZC5qcyIsIi4uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS91dGlsaXRpZXMvc3R5bGUvZGlzcGxheS5qcyIsIi4uL25vZGVfbW9kdWxlcy9AbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbi9kaXN0L2VzbS91dGlsaXRpZXMvc3R5bGUvZm9jdXMuanMiLCIuLi9ub2RlX21vZHVsZXMvQHZzY29kZS93ZWJ2aWV3LXVpLXRvb2xraXQvZGlzdC92c2NvZGUtZGVzaWduLXN5c3RlbS5qcyIsIi4uL25vZGVfbW9kdWxlcy9AdnNjb2RlL3dlYnZpZXctdWktdG9vbGtpdC9kaXN0L3V0aWxpdGllcy90aGVtZS9hcHBseVRoZW1lLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0B2c2NvZGUvd2Vidmlldy11aS10b29sa2l0L2Rpc3QvdXRpbGl0aWVzL2Rlc2lnbi10b2tlbnMvY3JlYXRlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0B2c2NvZGUvd2Vidmlldy11aS10b29sa2l0L2Rpc3QvZGVzaWduLXRva2Vucy5qcyIsIi4uL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYubWpzIiwiLi4vbm9kZV9tb2R1bGVzL0B2c2NvZGUvd2Vidmlldy11aS10b29sa2l0L2Rpc3QvYnV0dG9uL2J1dHRvbi5zdHlsZXMuanMiLCIuLi9ub2RlX21vZHVsZXMvQHZzY29kZS93ZWJ2aWV3LXVpLXRvb2xraXQvZGlzdC9idXR0b24vaW5kZXguanMiLCIuLi9ub2RlX21vZHVsZXMvQHZzY29kZS93ZWJ2aWV3LXVpLXRvb2xraXQvZGlzdC9jaGVja2JveC9jaGVja2JveC5zdHlsZXMuanMiLCIuLi9ub2RlX21vZHVsZXMvQHZzY29kZS93ZWJ2aWV3LXVpLXRvb2xraXQvZGlzdC9jaGVja2JveC9pbmRleC5qcyIsIi4uL25vZGVfbW9kdWxlcy9AdnNjb2RlL3dlYnZpZXctdWktdG9vbGtpdC9kaXN0L2RpdmlkZXIvZGl2aWRlci5zdHlsZXMuanMiLCIuLi9ub2RlX21vZHVsZXMvQHZzY29kZS93ZWJ2aWV3LXVpLXRvb2xraXQvZGlzdC9kaXZpZGVyL2luZGV4LmpzIiwiLi4vbm9kZV9tb2R1bGVzL0B2c2NvZGUvd2Vidmlldy11aS10b29sa2l0L2Rpc3QvZHJvcGRvd24vZHJvcGRvd24uc3R5bGVzLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0B2c2NvZGUvd2Vidmlldy11aS10b29sa2l0L2Rpc3QvZHJvcGRvd24vaW5kZXguanMiLCIuLi9ub2RlX21vZHVsZXMvQHZzY29kZS93ZWJ2aWV3LXVpLXRvb2xraXQvZGlzdC9vcHRpb24vb3B0aW9uLnN0eWxlcy5qcyIsIi4uL25vZGVfbW9kdWxlcy9AdnNjb2RlL3dlYnZpZXctdWktdG9vbGtpdC9kaXN0L29wdGlvbi9pbmRleC5qcyIsIi4uL25vZGVfbW9kdWxlcy9AdnNjb2RlL3dlYnZpZXctdWktdG9vbGtpdC9kaXN0L3Byb2dyZXNzLXJpbmcvcHJvZ3Jlc3MtcmluZy5zdHlsZXMuanMiLCIuLi9ub2RlX21vZHVsZXMvQHZzY29kZS93ZWJ2aWV3LXVpLXRvb2xraXQvZGlzdC9wcm9ncmVzcy1yaW5nL2luZGV4LmpzIiwiLi4vLi4vLi4vc3JjL2FwaS90eXBlcy9jb25maWd1cmF0aW9ucy50cyIsIi4uLy4uLy4uL3NyYy9hcGkvdHlwZXMvY29udGVudFJlY29yZHMudHMiLCIuLi8uLi8uLi9zcmMvYXBpL3R5cGVzL2ZpbGVzLnRzIiwiLi4vLi4vLi4vc3JjL3V0aWxzL2Vycm9yRW5oYW5jZXIudHMiLCIuLi8uLi8uLi9zcmMvdHlwZXMvbWVzc2FnZXMvd2Vidmlld1RvSG9zdE1lc3NhZ2VzLnRzIiwiLi4vLi4vLi4vc3JjL3V0aWxzL3RpdGxlcy50cyIsIi4uL3NyYy91dGlscy9kYXRlLnRzIiwiLi4vLi4vLi4vc3JjL3V0aWxzL2ZpbHRlcnMudHMiLCIuLi8uLi8uLi9zcmMvdHlwZXMvbWVzc2FnZXMvaG9zdFRvV2Vidmlld01lc3NhZ2VzLnRzIiwiLi4vc3JjL3V0aWxzL2hvc3RDb25kdWl0LnRzIiwiLi4vLi4vLi4vc3JjL3V0aWxzL3VybC50cyIsIi4uLy4uLy4uL3NyYy9hcGkvdHlwZXMvZXJyb3IudHMiLCIuLi9zcmMvc3RvcmVzL2hvbWUudHMiLCIuLi9zcmMvdXRpbHMvZmlsZXMudHMiLCIuLi9zcmMvc3RvcmVzL2ZpbGUudHMiLCIuLi9zcmMvdnNjb2RlLnRzIiwiLi4vc3JjL0hvc3RDb25kdWl0U2VydmljZS50cyIsIi4uL3NyYy9jb21wb25lbnRzL1F1aWNrUGlja0l0ZW0udnVlIiwiLi4vc3JjL2NvbXBvbmVudHMvQWN0aW9uVG9vbGJhci52dWUiLCIuLi9zcmMvY29tcG9uZW50cy9EZXBsb3lCdXR0b24udnVlIiwiLi4vc3JjL2NvbXBvbmVudHMvVGV4dFN0cmluZ1dpdGhBbmNob3IudnVlIiwiLi4vc3JjL2NvbXBvbmVudHMvRXZlbkVhc2llckRlcGxveS52dWUiLCIuLi9zcmMvY29tcG9uZW50cy90cmVlL1RyZWVTZWN0aW9uLnZ1ZSIsIi4uL3NyYy9jb21wb25lbnRzL3RyZWUvVHJlZUl0ZW1DaGVja2JveC52dWUiLCIuLi9zcmMvY29tcG9uZW50cy92aWV3cy9wcm9qZWN0RmlsZXMvdG9vbHRpcHMudHMiLCIuLi9zcmMvY29tcG9uZW50cy92aWV3cy9wcm9qZWN0RmlsZXMvUHJvamVjdEZpbGUudnVlIiwiLi4vc3JjL2NvbXBvbmVudHMvdmlld3MvcHJvamVjdEZpbGVzL1Byb2plY3RGaWxlcy52dWUiLCIuLi9zcmMvY29tcG9uZW50cy9XZWxjb21lVmlldy52dWUiLCIuLi9zcmMvY29tcG9uZW50cy90cmVlL1RyZWVJdGVtLnZ1ZSIsIi4uL3NyYy9jb21wb25lbnRzL1NpZGViYXJJbnB1dC52dWUiLCIuLi9zcmMvY29tcG9uZW50cy92aWV3cy9zZWNyZXRzL1NlY3JldC52dWUiLCIuLi9zcmMvY29tcG9uZW50cy92aWV3cy9zZWNyZXRzL1NlY3JldHMudnVlIiwiLi4vc3JjL2NvbXBvbmVudHMvdmlld3MvUHl0aG9uUGFja2FnZXMudnVlIiwiLi4vc3JjL2NvbXBvbmVudHMvdmlld3MvUlBhY2thZ2VzLnZ1ZSIsIi4uL3NyYy9jb21wb25lbnRzL3ZpZXdzL0NyZWRlbnRpYWxzLnZ1ZSIsIi4uL3NyYy9jb21wb25lbnRzL3ZpZXdzL0hlbHBBbmRGZWVkYmFjay52dWUiLCIuLi9zcmMvQXBwLnZ1ZSIsIi4uL3NyYy9tYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuKiBAdnVlL3NoYXJlZCB2My41LjE0XG4qIChjKSAyMDE4LXByZXNlbnQgWXV4aSAoRXZhbikgWW91IGFuZCBWdWUgY29udHJpYnV0b3JzXG4qIEBsaWNlbnNlIE1JVFxuKiovXG4vKiEgI19fTk9fU0lERV9FRkZFQ1RTX18gKi9cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5mdW5jdGlvbiBtYWtlTWFwKHN0cikge1xuICBjb25zdCBtYXAgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgZm9yIChjb25zdCBrZXkgb2Ygc3RyLnNwbGl0KFwiLFwiKSkgbWFwW2tleV0gPSAxO1xuICByZXR1cm4gKHZhbCkgPT4gdmFsIGluIG1hcDtcbn1cblxuY29uc3QgRU1QVFlfT0JKID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IE9iamVjdC5mcmVlemUoe30pIDoge307XG5jb25zdCBFTVBUWV9BUlIgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gT2JqZWN0LmZyZWV6ZShbXSkgOiBbXTtcbmNvbnN0IE5PT1AgPSAoKSA9PiB7XG59O1xuY29uc3QgTk8gPSAoKSA9PiBmYWxzZTtcbmNvbnN0IGlzT24gPSAoa2V5KSA9PiBrZXkuY2hhckNvZGVBdCgwKSA9PT0gMTExICYmIGtleS5jaGFyQ29kZUF0KDEpID09PSAxMTAgJiYgLy8gdXBwZXJjYXNlIGxldHRlclxuKGtleS5jaGFyQ29kZUF0KDIpID4gMTIyIHx8IGtleS5jaGFyQ29kZUF0KDIpIDwgOTcpO1xuY29uc3QgaXNNb2RlbExpc3RlbmVyID0gKGtleSkgPT4ga2V5LnN0YXJ0c1dpdGgoXCJvblVwZGF0ZTpcIik7XG5jb25zdCBleHRlbmQgPSBPYmplY3QuYXNzaWduO1xuY29uc3QgcmVtb3ZlID0gKGFyciwgZWwpID0+IHtcbiAgY29uc3QgaSA9IGFyci5pbmRleE9mKGVsKTtcbiAgaWYgKGkgPiAtMSkge1xuICAgIGFyci5zcGxpY2UoaSwgMSk7XG4gIH1cbn07XG5jb25zdCBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5jb25zdCBoYXNPd24gPSAodmFsLCBrZXkpID0+IGhhc093blByb3BlcnR5LmNhbGwodmFsLCBrZXkpO1xuY29uc3QgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5jb25zdCBpc01hcCA9ICh2YWwpID0+IHRvVHlwZVN0cmluZyh2YWwpID09PSBcIltvYmplY3QgTWFwXVwiO1xuY29uc3QgaXNTZXQgPSAodmFsKSA9PiB0b1R5cGVTdHJpbmcodmFsKSA9PT0gXCJbb2JqZWN0IFNldF1cIjtcbmNvbnN0IGlzRGF0ZSA9ICh2YWwpID0+IHRvVHlwZVN0cmluZyh2YWwpID09PSBcIltvYmplY3QgRGF0ZV1cIjtcbmNvbnN0IGlzUmVnRXhwID0gKHZhbCkgPT4gdG9UeXBlU3RyaW5nKHZhbCkgPT09IFwiW29iamVjdCBSZWdFeHBdXCI7XG5jb25zdCBpc0Z1bmN0aW9uID0gKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJmdW5jdGlvblwiO1xuY29uc3QgaXNTdHJpbmcgPSAodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiO1xuY29uc3QgaXNTeW1ib2wgPSAodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcInN5bWJvbFwiO1xuY29uc3QgaXNPYmplY3QgPSAodmFsKSA9PiB2YWwgIT09IG51bGwgJiYgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIjtcbmNvbnN0IGlzUHJvbWlzZSA9ICh2YWwpID0+IHtcbiAgcmV0dXJuIChpc09iamVjdCh2YWwpIHx8IGlzRnVuY3Rpb24odmFsKSkgJiYgaXNGdW5jdGlvbih2YWwudGhlbikgJiYgaXNGdW5jdGlvbih2YWwuY2F0Y2gpO1xufTtcbmNvbnN0IG9iamVjdFRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbmNvbnN0IHRvVHlwZVN0cmluZyA9ICh2YWx1ZSkgPT4gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG5jb25zdCB0b1Jhd1R5cGUgPSAodmFsdWUpID0+IHtcbiAgcmV0dXJuIHRvVHlwZVN0cmluZyh2YWx1ZSkuc2xpY2UoOCwgLTEpO1xufTtcbmNvbnN0IGlzUGxhaW5PYmplY3QgPSAodmFsKSA9PiB0b1R5cGVTdHJpbmcodmFsKSA9PT0gXCJbb2JqZWN0IE9iamVjdF1cIjtcbmNvbnN0IGlzSW50ZWdlcktleSA9IChrZXkpID0+IGlzU3RyaW5nKGtleSkgJiYga2V5ICE9PSBcIk5hTlwiICYmIGtleVswXSAhPT0gXCItXCIgJiYgXCJcIiArIHBhcnNlSW50KGtleSwgMTApID09PSBrZXk7XG5jb25zdCBpc1Jlc2VydmVkUHJvcCA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKFxuICAvLyB0aGUgbGVhZGluZyBjb21tYSBpcyBpbnRlbnRpb25hbCBzbyBlbXB0eSBzdHJpbmcgXCJcIiBpcyBhbHNvIGluY2x1ZGVkXG4gIFwiLGtleSxyZWYscmVmX2ZvcixyZWZfa2V5LG9uVm5vZGVCZWZvcmVNb3VudCxvblZub2RlTW91bnRlZCxvblZub2RlQmVmb3JlVXBkYXRlLG9uVm5vZGVVcGRhdGVkLG9uVm5vZGVCZWZvcmVVbm1vdW50LG9uVm5vZGVVbm1vdW50ZWRcIlxuKTtcbmNvbnN0IGlzQnVpbHRJbkRpcmVjdGl2ZSA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKFxuICBcImJpbmQsY2xvYWssZWxzZS1pZixlbHNlLGZvcixodG1sLGlmLG1vZGVsLG9uLG9uY2UscHJlLHNob3csc2xvdCx0ZXh0LG1lbW9cIlxuKTtcbmNvbnN0IGNhY2hlU3RyaW5nRnVuY3Rpb24gPSAoZm4pID0+IHtcbiAgY29uc3QgY2FjaGUgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgcmV0dXJuIChzdHIpID0+IHtcbiAgICBjb25zdCBoaXQgPSBjYWNoZVtzdHJdO1xuICAgIHJldHVybiBoaXQgfHwgKGNhY2hlW3N0cl0gPSBmbihzdHIpKTtcbiAgfTtcbn07XG5jb25zdCBjYW1lbGl6ZVJFID0gLy0oXFx3KS9nO1xuY29uc3QgY2FtZWxpemUgPSBjYWNoZVN0cmluZ0Z1bmN0aW9uKFxuICAoc3RyKSA9PiB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKGNhbWVsaXplUkUsIChfLCBjKSA9PiBjID8gYy50b1VwcGVyQ2FzZSgpIDogXCJcIik7XG4gIH1cbik7XG5jb25zdCBoeXBoZW5hdGVSRSA9IC9cXEIoW0EtWl0pL2c7XG5jb25zdCBoeXBoZW5hdGUgPSBjYWNoZVN0cmluZ0Z1bmN0aW9uKFxuICAoc3RyKSA9PiBzdHIucmVwbGFjZShoeXBoZW5hdGVSRSwgXCItJDFcIikudG9Mb3dlckNhc2UoKVxuKTtcbmNvbnN0IGNhcGl0YWxpemUgPSBjYWNoZVN0cmluZ0Z1bmN0aW9uKChzdHIpID0+IHtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcbn0pO1xuY29uc3QgdG9IYW5kbGVyS2V5ID0gY2FjaGVTdHJpbmdGdW5jdGlvbihcbiAgKHN0cikgPT4ge1xuICAgIGNvbnN0IHMgPSBzdHIgPyBgb24ke2NhcGl0YWxpemUoc3RyKX1gIDogYGA7XG4gICAgcmV0dXJuIHM7XG4gIH1cbik7XG5jb25zdCBoYXNDaGFuZ2VkID0gKHZhbHVlLCBvbGRWYWx1ZSkgPT4gIU9iamVjdC5pcyh2YWx1ZSwgb2xkVmFsdWUpO1xuY29uc3QgaW52b2tlQXJyYXlGbnMgPSAoZm5zLCAuLi5hcmcpID0+IHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbnMubGVuZ3RoOyBpKyspIHtcbiAgICBmbnNbaV0oLi4uYXJnKTtcbiAgfVxufTtcbmNvbnN0IGRlZiA9IChvYmosIGtleSwgdmFsdWUsIHdyaXRhYmxlID0gZmFsc2UpID0+IHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIHdyaXRhYmxlLFxuICAgIHZhbHVlXG4gIH0pO1xufTtcbmNvbnN0IGxvb3NlVG9OdW1iZXIgPSAodmFsKSA9PiB7XG4gIGNvbnN0IG4gPSBwYXJzZUZsb2F0KHZhbCk7XG4gIHJldHVybiBpc05hTihuKSA/IHZhbCA6IG47XG59O1xuY29uc3QgdG9OdW1iZXIgPSAodmFsKSA9PiB7XG4gIGNvbnN0IG4gPSBpc1N0cmluZyh2YWwpID8gTnVtYmVyKHZhbCkgOiBOYU47XG4gIHJldHVybiBpc05hTihuKSA/IHZhbCA6IG47XG59O1xubGV0IF9nbG9iYWxUaGlzO1xuY29uc3QgZ2V0R2xvYmFsVGhpcyA9ICgpID0+IHtcbiAgcmV0dXJuIF9nbG9iYWxUaGlzIHx8IChfZ2xvYmFsVGhpcyA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsVGhpcyA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge30pO1xufTtcbmNvbnN0IGlkZW50UkUgPSAvXltfJGEtekEtWlxceEEwLVxcdUZGRkZdW18kYS16QS1aMC05XFx4QTAtXFx1RkZGRl0qJC87XG5mdW5jdGlvbiBnZW5Qcm9wc0FjY2Vzc0V4cChuYW1lKSB7XG4gIHJldHVybiBpZGVudFJFLnRlc3QobmFtZSkgPyBgX19wcm9wcy4ke25hbWV9YCA6IGBfX3Byb3BzWyR7SlNPTi5zdHJpbmdpZnkobmFtZSl9XWA7XG59XG5mdW5jdGlvbiBnZW5DYWNoZUtleShzb3VyY2UsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIHNvdXJjZSArIEpTT04uc3RyaW5naWZ5KFxuICAgIG9wdGlvbnMsXG4gICAgKF8sIHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJmdW5jdGlvblwiID8gdmFsLnRvU3RyaW5nKCkgOiB2YWxcbiAgKTtcbn1cblxuY29uc3QgUGF0Y2hGbGFncyA9IHtcbiAgXCJURVhUXCI6IDEsXG4gIFwiMVwiOiBcIlRFWFRcIixcbiAgXCJDTEFTU1wiOiAyLFxuICBcIjJcIjogXCJDTEFTU1wiLFxuICBcIlNUWUxFXCI6IDQsXG4gIFwiNFwiOiBcIlNUWUxFXCIsXG4gIFwiUFJPUFNcIjogOCxcbiAgXCI4XCI6IFwiUFJPUFNcIixcbiAgXCJGVUxMX1BST1BTXCI6IDE2LFxuICBcIjE2XCI6IFwiRlVMTF9QUk9QU1wiLFxuICBcIk5FRURfSFlEUkFUSU9OXCI6IDMyLFxuICBcIjMyXCI6IFwiTkVFRF9IWURSQVRJT05cIixcbiAgXCJTVEFCTEVfRlJBR01FTlRcIjogNjQsXG4gIFwiNjRcIjogXCJTVEFCTEVfRlJBR01FTlRcIixcbiAgXCJLRVlFRF9GUkFHTUVOVFwiOiAxMjgsXG4gIFwiMTI4XCI6IFwiS0VZRURfRlJBR01FTlRcIixcbiAgXCJVTktFWUVEX0ZSQUdNRU5UXCI6IDI1NixcbiAgXCIyNTZcIjogXCJVTktFWUVEX0ZSQUdNRU5UXCIsXG4gIFwiTkVFRF9QQVRDSFwiOiA1MTIsXG4gIFwiNTEyXCI6IFwiTkVFRF9QQVRDSFwiLFxuICBcIkRZTkFNSUNfU0xPVFNcIjogMTAyNCxcbiAgXCIxMDI0XCI6IFwiRFlOQU1JQ19TTE9UU1wiLFxuICBcIkRFVl9ST09UX0ZSQUdNRU5UXCI6IDIwNDgsXG4gIFwiMjA0OFwiOiBcIkRFVl9ST09UX0ZSQUdNRU5UXCIsXG4gIFwiQ0FDSEVEXCI6IC0xLFxuICBcIi0xXCI6IFwiQ0FDSEVEXCIsXG4gIFwiQkFJTFwiOiAtMixcbiAgXCItMlwiOiBcIkJBSUxcIlxufTtcbmNvbnN0IFBhdGNoRmxhZ05hbWVzID0ge1xuICBbMV06IGBURVhUYCxcbiAgWzJdOiBgQ0xBU1NgLFxuICBbNF06IGBTVFlMRWAsXG4gIFs4XTogYFBST1BTYCxcbiAgWzE2XTogYEZVTExfUFJPUFNgLFxuICBbMzJdOiBgTkVFRF9IWURSQVRJT05gLFxuICBbNjRdOiBgU1RBQkxFX0ZSQUdNRU5UYCxcbiAgWzEyOF06IGBLRVlFRF9GUkFHTUVOVGAsXG4gIFsyNTZdOiBgVU5LRVlFRF9GUkFHTUVOVGAsXG4gIFs1MTJdOiBgTkVFRF9QQVRDSGAsXG4gIFsxMDI0XTogYERZTkFNSUNfU0xPVFNgLFxuICBbMjA0OF06IGBERVZfUk9PVF9GUkFHTUVOVGAsXG4gIFstMV06IGBIT0lTVEVEYCxcbiAgWy0yXTogYEJBSUxgXG59O1xuXG5jb25zdCBTaGFwZUZsYWdzID0ge1xuICBcIkVMRU1FTlRcIjogMSxcbiAgXCIxXCI6IFwiRUxFTUVOVFwiLFxuICBcIkZVTkNUSU9OQUxfQ09NUE9ORU5UXCI6IDIsXG4gIFwiMlwiOiBcIkZVTkNUSU9OQUxfQ09NUE9ORU5UXCIsXG4gIFwiU1RBVEVGVUxfQ09NUE9ORU5UXCI6IDQsXG4gIFwiNFwiOiBcIlNUQVRFRlVMX0NPTVBPTkVOVFwiLFxuICBcIlRFWFRfQ0hJTERSRU5cIjogOCxcbiAgXCI4XCI6IFwiVEVYVF9DSElMRFJFTlwiLFxuICBcIkFSUkFZX0NISUxEUkVOXCI6IDE2LFxuICBcIjE2XCI6IFwiQVJSQVlfQ0hJTERSRU5cIixcbiAgXCJTTE9UU19DSElMRFJFTlwiOiAzMixcbiAgXCIzMlwiOiBcIlNMT1RTX0NISUxEUkVOXCIsXG4gIFwiVEVMRVBPUlRcIjogNjQsXG4gIFwiNjRcIjogXCJURUxFUE9SVFwiLFxuICBcIlNVU1BFTlNFXCI6IDEyOCxcbiAgXCIxMjhcIjogXCJTVVNQRU5TRVwiLFxuICBcIkNPTVBPTkVOVF9TSE9VTERfS0VFUF9BTElWRVwiOiAyNTYsXG4gIFwiMjU2XCI6IFwiQ09NUE9ORU5UX1NIT1VMRF9LRUVQX0FMSVZFXCIsXG4gIFwiQ09NUE9ORU5UX0tFUFRfQUxJVkVcIjogNTEyLFxuICBcIjUxMlwiOiBcIkNPTVBPTkVOVF9LRVBUX0FMSVZFXCIsXG4gIFwiQ09NUE9ORU5UXCI6IDYsXG4gIFwiNlwiOiBcIkNPTVBPTkVOVFwiXG59O1xuXG5jb25zdCBTbG90RmxhZ3MgPSB7XG4gIFwiU1RBQkxFXCI6IDEsXG4gIFwiMVwiOiBcIlNUQUJMRVwiLFxuICBcIkRZTkFNSUNcIjogMixcbiAgXCIyXCI6IFwiRFlOQU1JQ1wiLFxuICBcIkZPUldBUkRFRFwiOiAzLFxuICBcIjNcIjogXCJGT1JXQVJERURcIlxufTtcbmNvbnN0IHNsb3RGbGFnc1RleHQgPSB7XG4gIFsxXTogXCJTVEFCTEVcIixcbiAgWzJdOiBcIkRZTkFNSUNcIixcbiAgWzNdOiBcIkZPUldBUkRFRFwiXG59O1xuXG5jb25zdCBHTE9CQUxTX0FMTE9XRUQgPSBcIkluZmluaXR5LHVuZGVmaW5lZCxOYU4saXNGaW5pdGUsaXNOYU4scGFyc2VGbG9hdCxwYXJzZUludCxkZWNvZGVVUkksZGVjb2RlVVJJQ29tcG9uZW50LGVuY29kZVVSSSxlbmNvZGVVUklDb21wb25lbnQsTWF0aCxOdW1iZXIsRGF0ZSxBcnJheSxPYmplY3QsQm9vbGVhbixTdHJpbmcsUmVnRXhwLE1hcCxTZXQsSlNPTixJbnRsLEJpZ0ludCxjb25zb2xlLEVycm9yLFN5bWJvbFwiO1xuY29uc3QgaXNHbG9iYWxseUFsbG93ZWQgPSAvKiBAX19QVVJFX18gKi8gbWFrZU1hcChHTE9CQUxTX0FMTE9XRUQpO1xuY29uc3QgaXNHbG9iYWxseVdoaXRlbGlzdGVkID0gaXNHbG9iYWxseUFsbG93ZWQ7XG5cbmNvbnN0IHJhbmdlID0gMjtcbmZ1bmN0aW9uIGdlbmVyYXRlQ29kZUZyYW1lKHNvdXJjZSwgc3RhcnQgPSAwLCBlbmQgPSBzb3VyY2UubGVuZ3RoKSB7XG4gIHN0YXJ0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oc3RhcnQsIHNvdXJjZS5sZW5ndGgpKTtcbiAgZW5kID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oZW5kLCBzb3VyY2UubGVuZ3RoKSk7XG4gIGlmIChzdGFydCA+IGVuZCkgcmV0dXJuIFwiXCI7XG4gIGxldCBsaW5lcyA9IHNvdXJjZS5zcGxpdCgvKFxccj9cXG4pLyk7XG4gIGNvbnN0IG5ld2xpbmVTZXF1ZW5jZXMgPSBsaW5lcy5maWx0ZXIoKF8sIGlkeCkgPT4gaWR4ICUgMiA9PT0gMSk7XG4gIGxpbmVzID0gbGluZXMuZmlsdGVyKChfLCBpZHgpID0+IGlkeCAlIDIgPT09IDApO1xuICBsZXQgY291bnQgPSAwO1xuICBjb25zdCByZXMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgIGNvdW50ICs9IGxpbmVzW2ldLmxlbmd0aCArIChuZXdsaW5lU2VxdWVuY2VzW2ldICYmIG5ld2xpbmVTZXF1ZW5jZXNbaV0ubGVuZ3RoIHx8IDApO1xuICAgIGlmIChjb3VudCA+PSBzdGFydCkge1xuICAgICAgZm9yIChsZXQgaiA9IGkgLSByYW5nZTsgaiA8PSBpICsgcmFuZ2UgfHwgZW5kID4gY291bnQ7IGorKykge1xuICAgICAgICBpZiAoaiA8IDAgfHwgaiA+PSBsaW5lcy5sZW5ndGgpIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCBsaW5lID0gaiArIDE7XG4gICAgICAgIHJlcy5wdXNoKFxuICAgICAgICAgIGAke2xpbmV9JHtcIiBcIi5yZXBlYXQoTWF0aC5tYXgoMyAtIFN0cmluZyhsaW5lKS5sZW5ndGgsIDApKX18ICAke2xpbmVzW2pdfWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgbGluZUxlbmd0aCA9IGxpbmVzW2pdLmxlbmd0aDtcbiAgICAgICAgY29uc3QgbmV3TGluZVNlcUxlbmd0aCA9IG5ld2xpbmVTZXF1ZW5jZXNbal0gJiYgbmV3bGluZVNlcXVlbmNlc1tqXS5sZW5ndGggfHwgMDtcbiAgICAgICAgaWYgKGogPT09IGkpIHtcbiAgICAgICAgICBjb25zdCBwYWQgPSBzdGFydCAtIChjb3VudCAtIChsaW5lTGVuZ3RoICsgbmV3TGluZVNlcUxlbmd0aCkpO1xuICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IE1hdGgubWF4KFxuICAgICAgICAgICAgMSxcbiAgICAgICAgICAgIGVuZCA+IGNvdW50ID8gbGluZUxlbmd0aCAtIHBhZCA6IGVuZCAtIHN0YXJ0XG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXMucHVzaChgICAgfCAgYCArIFwiIFwiLnJlcGVhdChwYWQpICsgXCJeXCIucmVwZWF0KGxlbmd0aCkpO1xuICAgICAgICB9IGVsc2UgaWYgKGogPiBpKSB7XG4gICAgICAgICAgaWYgKGVuZCA+IGNvdW50KSB7XG4gICAgICAgICAgICBjb25zdCBsZW5ndGggPSBNYXRoLm1heChNYXRoLm1pbihlbmQgLSBjb3VudCwgbGluZUxlbmd0aCksIDEpO1xuICAgICAgICAgICAgcmVzLnB1c2goYCAgIHwgIGAgKyBcIl5cIi5yZXBlYXQobGVuZ3RoKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvdW50ICs9IGxpbmVMZW5ndGggKyBuZXdMaW5lU2VxTGVuZ3RoO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcy5qb2luKFwiXFxuXCIpO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVTdHlsZSh2YWx1ZSkge1xuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBjb25zdCByZXMgPSB7fTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBpdGVtID0gdmFsdWVbaV07XG4gICAgICBjb25zdCBub3JtYWxpemVkID0gaXNTdHJpbmcoaXRlbSkgPyBwYXJzZVN0cmluZ1N0eWxlKGl0ZW0pIDogbm9ybWFsaXplU3R5bGUoaXRlbSk7XG4gICAgICBpZiAobm9ybWFsaXplZCkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBub3JtYWxpemVkKSB7XG4gICAgICAgICAgcmVzW2tleV0gPSBub3JtYWxpemVkW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfSBlbHNlIGlmIChpc1N0cmluZyh2YWx1ZSkgfHwgaXNPYmplY3QodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG5jb25zdCBsaXN0RGVsaW1pdGVyUkUgPSAvOyg/IVteKF0qXFwpKS9nO1xuY29uc3QgcHJvcGVydHlEZWxpbWl0ZXJSRSA9IC86KFteXSspLztcbmNvbnN0IHN0eWxlQ29tbWVudFJFID0gL1xcL1xcKlteXSo/XFwqXFwvL2c7XG5mdW5jdGlvbiBwYXJzZVN0cmluZ1N0eWxlKGNzc1RleHQpIHtcbiAgY29uc3QgcmV0ID0ge307XG4gIGNzc1RleHQucmVwbGFjZShzdHlsZUNvbW1lbnRSRSwgXCJcIikuc3BsaXQobGlzdERlbGltaXRlclJFKS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIGNvbnN0IHRtcCA9IGl0ZW0uc3BsaXQocHJvcGVydHlEZWxpbWl0ZXJSRSk7XG4gICAgICB0bXAubGVuZ3RoID4gMSAmJiAocmV0W3RtcFswXS50cmltKCldID0gdG1wWzFdLnRyaW0oKSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHJldDtcbn1cbmZ1bmN0aW9uIHN0cmluZ2lmeVN0eWxlKHN0eWxlcykge1xuICBpZiAoIXN0eWxlcykgcmV0dXJuIFwiXCI7XG4gIGlmIChpc1N0cmluZyhzdHlsZXMpKSByZXR1cm4gc3R5bGVzO1xuICBsZXQgcmV0ID0gXCJcIjtcbiAgZm9yIChjb25zdCBrZXkgaW4gc3R5bGVzKSB7XG4gICAgY29uc3QgdmFsdWUgPSBzdHlsZXNba2V5XTtcbiAgICBpZiAoaXNTdHJpbmcodmFsdWUpIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZEtleSA9IGtleS5zdGFydHNXaXRoKGAtLWApID8ga2V5IDogaHlwaGVuYXRlKGtleSk7XG4gICAgICByZXQgKz0gYCR7bm9ybWFsaXplZEtleX06JHt2YWx1ZX07YDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUNsYXNzKHZhbHVlKSB7XG4gIGxldCByZXMgPSBcIlwiO1xuICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgcmVzID0gdmFsdWU7XG4gIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplQ2xhc3ModmFsdWVbaV0pO1xuICAgICAgaWYgKG5vcm1hbGl6ZWQpIHtcbiAgICAgICAgcmVzICs9IG5vcm1hbGl6ZWQgKyBcIiBcIjtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgZm9yIChjb25zdCBuYW1lIGluIHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWVbbmFtZV0pIHtcbiAgICAgICAgcmVzICs9IG5hbWUgKyBcIiBcIjtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcy50cmltKCk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVQcm9wcyhwcm9wcykge1xuICBpZiAoIXByb3BzKSByZXR1cm4gbnVsbDtcbiAgbGV0IHsgY2xhc3M6IGtsYXNzLCBzdHlsZSB9ID0gcHJvcHM7XG4gIGlmIChrbGFzcyAmJiAhaXNTdHJpbmcoa2xhc3MpKSB7XG4gICAgcHJvcHMuY2xhc3MgPSBub3JtYWxpemVDbGFzcyhrbGFzcyk7XG4gIH1cbiAgaWYgKHN0eWxlKSB7XG4gICAgcHJvcHMuc3R5bGUgPSBub3JtYWxpemVTdHlsZShzdHlsZSk7XG4gIH1cbiAgcmV0dXJuIHByb3BzO1xufVxuXG5jb25zdCBIVE1MX1RBR1MgPSBcImh0bWwsYm9keSxiYXNlLGhlYWQsbGluayxtZXRhLHN0eWxlLHRpdGxlLGFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxmb290ZXIsaGVhZGVyLGhncm91cCxoMSxoMixoMyxoNCxoNSxoNixuYXYsc2VjdGlvbixkaXYsZGQsZGwsZHQsZmlnY2FwdGlvbixmaWd1cmUscGljdHVyZSxocixpbWcsbGksbWFpbixvbCxwLHByZSx1bCxhLGIsYWJicixiZGksYmRvLGJyLGNpdGUsY29kZSxkYXRhLGRmbixlbSxpLGtiZCxtYXJrLHEscnAscnQscnVieSxzLHNhbXAsc21hbGwsc3BhbixzdHJvbmcsc3ViLHN1cCx0aW1lLHUsdmFyLHdicixhcmVhLGF1ZGlvLG1hcCx0cmFjayx2aWRlbyxlbWJlZCxvYmplY3QscGFyYW0sc291cmNlLGNhbnZhcyxzY3JpcHQsbm9zY3JpcHQsZGVsLGlucyxjYXB0aW9uLGNvbCxjb2xncm91cCx0YWJsZSx0aGVhZCx0Ym9keSx0ZCx0aCx0cixidXR0b24sZGF0YWxpc3QsZmllbGRzZXQsZm9ybSxpbnB1dCxsYWJlbCxsZWdlbmQsbWV0ZXIsb3B0Z3JvdXAsb3B0aW9uLG91dHB1dCxwcm9ncmVzcyxzZWxlY3QsdGV4dGFyZWEsZGV0YWlscyxkaWFsb2csbWVudSxzdW1tYXJ5LHRlbXBsYXRlLGJsb2NrcXVvdGUsaWZyYW1lLHRmb290XCI7XG5jb25zdCBTVkdfVEFHUyA9IFwic3ZnLGFuaW1hdGUsYW5pbWF0ZU1vdGlvbixhbmltYXRlVHJhbnNmb3JtLGNpcmNsZSxjbGlwUGF0aCxjb2xvci1wcm9maWxlLGRlZnMsZGVzYyxkaXNjYXJkLGVsbGlwc2UsZmVCbGVuZCxmZUNvbG9yTWF0cml4LGZlQ29tcG9uZW50VHJhbnNmZXIsZmVDb21wb3NpdGUsZmVDb252b2x2ZU1hdHJpeCxmZURpZmZ1c2VMaWdodGluZyxmZURpc3BsYWNlbWVudE1hcCxmZURpc3RhbnRMaWdodCxmZURyb3BTaGFkb3csZmVGbG9vZCxmZUZ1bmNBLGZlRnVuY0IsZmVGdW5jRyxmZUZ1bmNSLGZlR2F1c3NpYW5CbHVyLGZlSW1hZ2UsZmVNZXJnZSxmZU1lcmdlTm9kZSxmZU1vcnBob2xvZ3ksZmVPZmZzZXQsZmVQb2ludExpZ2h0LGZlU3BlY3VsYXJMaWdodGluZyxmZVNwb3RMaWdodCxmZVRpbGUsZmVUdXJidWxlbmNlLGZpbHRlcixmb3JlaWduT2JqZWN0LGcsaGF0Y2gsaGF0Y2hwYXRoLGltYWdlLGxpbmUsbGluZWFyR3JhZGllbnQsbWFya2VyLG1hc2ssbWVzaCxtZXNoZ3JhZGllbnQsbWVzaHBhdGNoLG1lc2hyb3csbWV0YWRhdGEsbXBhdGgscGF0aCxwYXR0ZXJuLHBvbHlnb24scG9seWxpbmUscmFkaWFsR3JhZGllbnQscmVjdCxzZXQsc29saWRjb2xvcixzdG9wLHN3aXRjaCxzeW1ib2wsdGV4dCx0ZXh0UGF0aCx0aXRsZSx0c3Bhbix1bmtub3duLHVzZSx2aWV3XCI7XG5jb25zdCBNQVRIX1RBR1MgPSBcImFubm90YXRpb24sYW5ub3RhdGlvbi14bWwsbWFjdGlvbixtYWxpZ25ncm91cCxtYWxpZ25tYXJrLG1hdGgsbWVuY2xvc2UsbWVycm9yLG1mZW5jZWQsbWZyYWMsbWZyYWN0aW9uLG1nbHlwaCxtaSxtbGFiZWxlZHRyLG1sb25nZGl2LG1tdWx0aXNjcmlwdHMsbW4sbW8sbW92ZXIsbXBhZGRlZCxtcGhhbnRvbSxtcHJlc2NyaXB0cyxtcm9vdCxtcm93LG1zLG1zY2Fycmllcyxtc2NhcnJ5LG1zZ3JvdXAsbXNsaW5lLG1zcGFjZSxtc3FydCxtc3Jvdyxtc3RhY2ssbXN0eWxlLG1zdWIsbXN1YnN1cCxtc3VwLG10YWJsZSxtdGQsbXRleHQsbXRyLG11bmRlcixtdW5kZXJvdmVyLG5vbmUsc2VtYW50aWNzXCI7XG5jb25zdCBWT0lEX1RBR1MgPSBcImFyZWEsYmFzZSxicixjb2wsZW1iZWQsaHIsaW1nLGlucHV0LGxpbmssbWV0YSxwYXJhbSxzb3VyY2UsdHJhY2ssd2JyXCI7XG5jb25zdCBpc0hUTUxUYWcgPSAvKiBAX19QVVJFX18gKi8gbWFrZU1hcChIVE1MX1RBR1MpO1xuY29uc3QgaXNTVkdUYWcgPSAvKiBAX19QVVJFX18gKi8gbWFrZU1hcChTVkdfVEFHUyk7XG5jb25zdCBpc01hdGhNTFRhZyA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKE1BVEhfVEFHUyk7XG5jb25zdCBpc1ZvaWRUYWcgPSAvKiBAX19QVVJFX18gKi8gbWFrZU1hcChWT0lEX1RBR1MpO1xuXG5jb25zdCBzcGVjaWFsQm9vbGVhbkF0dHJzID0gYGl0ZW1zY29wZSxhbGxvd2Z1bGxzY3JlZW4sZm9ybW5vdmFsaWRhdGUsaXNtYXAsbm9tb2R1bGUsbm92YWxpZGF0ZSxyZWFkb25seWA7XG5jb25zdCBpc1NwZWNpYWxCb29sZWFuQXR0ciA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKHNwZWNpYWxCb29sZWFuQXR0cnMpO1xuY29uc3QgaXNCb29sZWFuQXR0ciA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKFxuICBzcGVjaWFsQm9vbGVhbkF0dHJzICsgYCxhc3luYyxhdXRvZm9jdXMsYXV0b3BsYXksY29udHJvbHMsZGVmYXVsdCxkZWZlcixkaXNhYmxlZCxoaWRkZW4saW5lcnQsbG9vcCxvcGVuLHJlcXVpcmVkLHJldmVyc2VkLHNjb3BlZCxzZWFtbGVzcyxjaGVja2VkLG11dGVkLG11bHRpcGxlLHNlbGVjdGVkYFxuKTtcbmZ1bmN0aW9uIGluY2x1ZGVCb29sZWFuQXR0cih2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSB8fCB2YWx1ZSA9PT0gXCJcIjtcbn1cbmNvbnN0IHVuc2FmZUF0dHJDaGFyUkUgPSAvWz4vPVwiJ1xcdTAwMDlcXHUwMDBhXFx1MDAwY1xcdTAwMjBdLztcbmNvbnN0IGF0dHJWYWxpZGF0aW9uQ2FjaGUgPSB7fTtcbmZ1bmN0aW9uIGlzU1NSU2FmZUF0dHJOYW1lKG5hbWUpIHtcbiAgaWYgKGF0dHJWYWxpZGF0aW9uQ2FjaGUuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICByZXR1cm4gYXR0clZhbGlkYXRpb25DYWNoZVtuYW1lXTtcbiAgfVxuICBjb25zdCBpc1Vuc2FmZSA9IHVuc2FmZUF0dHJDaGFyUkUudGVzdChuYW1lKTtcbiAgaWYgKGlzVW5zYWZlKSB7XG4gICAgY29uc29sZS5lcnJvcihgdW5zYWZlIGF0dHJpYnV0ZSBuYW1lOiAke25hbWV9YCk7XG4gIH1cbiAgcmV0dXJuIGF0dHJWYWxpZGF0aW9uQ2FjaGVbbmFtZV0gPSAhaXNVbnNhZmU7XG59XG5jb25zdCBwcm9wc1RvQXR0ck1hcCA9IHtcbiAgYWNjZXB0Q2hhcnNldDogXCJhY2NlcHQtY2hhcnNldFwiLFxuICBjbGFzc05hbWU6IFwiY2xhc3NcIixcbiAgaHRtbEZvcjogXCJmb3JcIixcbiAgaHR0cEVxdWl2OiBcImh0dHAtZXF1aXZcIlxufTtcbmNvbnN0IGlzS25vd25IdG1sQXR0ciA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKFxuICBgYWNjZXB0LGFjY2VwdC1jaGFyc2V0LGFjY2Vzc2tleSxhY3Rpb24sYWxpZ24sYWxsb3csYWx0LGFzeW5jLGF1dG9jYXBpdGFsaXplLGF1dG9jb21wbGV0ZSxhdXRvZm9jdXMsYXV0b3BsYXksYmFja2dyb3VuZCxiZ2NvbG9yLGJvcmRlcixidWZmZXJlZCxjYXB0dXJlLGNoYWxsZW5nZSxjaGFyc2V0LGNoZWNrZWQsY2l0ZSxjbGFzcyxjb2RlLGNvZGViYXNlLGNvbG9yLGNvbHMsY29sc3Bhbixjb250ZW50LGNvbnRlbnRlZGl0YWJsZSxjb250ZXh0bWVudSxjb250cm9scyxjb29yZHMsY3Jvc3NvcmlnaW4sY3NwLGRhdGEsZGF0ZXRpbWUsZGVjb2RpbmcsZGVmYXVsdCxkZWZlcixkaXIsZGlybmFtZSxkaXNhYmxlZCxkb3dubG9hZCxkcmFnZ2FibGUsZHJvcHpvbmUsZW5jdHlwZSxlbnRlcmtleWhpbnQsZm9yLGZvcm0sZm9ybWFjdGlvbixmb3JtZW5jdHlwZSxmb3JtbWV0aG9kLGZvcm1ub3ZhbGlkYXRlLGZvcm10YXJnZXQsaGVhZGVycyxoZWlnaHQsaGlkZGVuLGhpZ2gsaHJlZixocmVmbGFuZyxodHRwLWVxdWl2LGljb24saWQsaW1wb3J0YW5jZSxpbmVydCxpbnRlZ3JpdHksaXNtYXAsaXRlbXByb3Asa2V5dHlwZSxraW5kLGxhYmVsLGxhbmcsbGFuZ3VhZ2UsbG9hZGluZyxsaXN0LGxvb3AsbG93LG1hbmlmZXN0LG1heCxtYXhsZW5ndGgsbWlubGVuZ3RoLG1lZGlhLG1pbixtdWx0aXBsZSxtdXRlZCxuYW1lLG5vdmFsaWRhdGUsb3BlbixvcHRpbXVtLHBhdHRlcm4scGluZyxwbGFjZWhvbGRlcixwb3N0ZXIscHJlbG9hZCxyYWRpb2dyb3VwLHJlYWRvbmx5LHJlZmVycmVycG9saWN5LHJlbCxyZXF1aXJlZCxyZXZlcnNlZCxyb3dzLHJvd3NwYW4sc2FuZGJveCxzY29wZSxzY29wZWQsc2VsZWN0ZWQsc2hhcGUsc2l6ZSxzaXplcyxzbG90LHNwYW4sc3BlbGxjaGVjayxzcmMsc3JjZG9jLHNyY2xhbmcsc3Jjc2V0LHN0YXJ0LHN0ZXAsc3R5bGUsc3VtbWFyeSx0YWJpbmRleCx0YXJnZXQsdGl0bGUsdHJhbnNsYXRlLHR5cGUsdXNlbWFwLHZhbHVlLHdpZHRoLHdyYXBgXG4pO1xuY29uc3QgaXNLbm93blN2Z0F0dHIgPSAvKiBAX19QVVJFX18gKi8gbWFrZU1hcChcbiAgYHhtbG5zLGFjY2VudC1oZWlnaHQsYWNjdW11bGF0ZSxhZGRpdGl2ZSxhbGlnbm1lbnQtYmFzZWxpbmUsYWxwaGFiZXRpYyxhbXBsaXR1ZGUsYXJhYmljLWZvcm0sYXNjZW50LGF0dHJpYnV0ZU5hbWUsYXR0cmlidXRlVHlwZSxhemltdXRoLGJhc2VGcmVxdWVuY3ksYmFzZWxpbmUtc2hpZnQsYmFzZVByb2ZpbGUsYmJveCxiZWdpbixiaWFzLGJ5LGNhbGNNb2RlLGNhcC1oZWlnaHQsY2xhc3MsY2xpcCxjbGlwUGF0aFVuaXRzLGNsaXAtcGF0aCxjbGlwLXJ1bGUsY29sb3IsY29sb3ItaW50ZXJwb2xhdGlvbixjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnMsY29sb3ItcHJvZmlsZSxjb2xvci1yZW5kZXJpbmcsY29udGVudFNjcmlwdFR5cGUsY29udGVudFN0eWxlVHlwZSxjcm9zc29yaWdpbixjdXJzb3IsY3gsY3ksZCxkZWNlbGVyYXRlLGRlc2NlbnQsZGlmZnVzZUNvbnN0YW50LGRpcmVjdGlvbixkaXNwbGF5LGRpdmlzb3IsZG9taW5hbnQtYmFzZWxpbmUsZHVyLGR4LGR5LGVkZ2VNb2RlLGVsZXZhdGlvbixlbmFibGUtYmFja2dyb3VuZCxlbmQsZXhwb25lbnQsZmlsbCxmaWxsLW9wYWNpdHksZmlsbC1ydWxlLGZpbHRlcixmaWx0ZXJSZXMsZmlsdGVyVW5pdHMsZmxvb2QtY29sb3IsZmxvb2Qtb3BhY2l0eSxmb250LWZhbWlseSxmb250LXNpemUsZm9udC1zaXplLWFkanVzdCxmb250LXN0cmV0Y2gsZm9udC1zdHlsZSxmb250LXZhcmlhbnQsZm9udC13ZWlnaHQsZm9ybWF0LGZyb20sZnIsZngsZnksZzEsZzIsZ2x5cGgtbmFtZSxnbHlwaC1vcmllbnRhdGlvbi1ob3Jpem9udGFsLGdseXBoLW9yaWVudGF0aW9uLXZlcnRpY2FsLGdseXBoUmVmLGdyYWRpZW50VHJhbnNmb3JtLGdyYWRpZW50VW5pdHMsaGFuZ2luZyxoZWlnaHQsaHJlZixocmVmbGFuZyxob3Jpei1hZHYteCxob3Jpei1vcmlnaW4teCxpZCxpZGVvZ3JhcGhpYyxpbWFnZS1yZW5kZXJpbmcsaW4saW4yLGludGVyY2VwdCxrLGsxLGsyLGszLGs0LGtlcm5lbE1hdHJpeCxrZXJuZWxVbml0TGVuZ3RoLGtlcm5pbmcsa2V5UG9pbnRzLGtleVNwbGluZXMsa2V5VGltZXMsbGFuZyxsZW5ndGhBZGp1c3QsbGV0dGVyLXNwYWNpbmcsbGlnaHRpbmctY29sb3IsbGltaXRpbmdDb25lQW5nbGUsbG9jYWwsbWFya2VyLWVuZCxtYXJrZXItbWlkLG1hcmtlci1zdGFydCxtYXJrZXJIZWlnaHQsbWFya2VyVW5pdHMsbWFya2VyV2lkdGgsbWFzayxtYXNrQ29udGVudFVuaXRzLG1hc2tVbml0cyxtYXRoZW1hdGljYWwsbWF4LG1lZGlhLG1ldGhvZCxtaW4sbW9kZSxuYW1lLG51bU9jdGF2ZXMsb2Zmc2V0LG9wYWNpdHksb3BlcmF0b3Isb3JkZXIsb3JpZW50LG9yaWVudGF0aW9uLG9yaWdpbixvdmVyZmxvdyxvdmVybGluZS1wb3NpdGlvbixvdmVybGluZS10aGlja25lc3MscGFub3NlLTEscGFpbnQtb3JkZXIscGF0aCxwYXRoTGVuZ3RoLHBhdHRlcm5Db250ZW50VW5pdHMscGF0dGVyblRyYW5zZm9ybSxwYXR0ZXJuVW5pdHMscGluZyxwb2ludGVyLWV2ZW50cyxwb2ludHMscG9pbnRzQXRYLHBvaW50c0F0WSxwb2ludHNBdFoscHJlc2VydmVBbHBoYSxwcmVzZXJ2ZUFzcGVjdFJhdGlvLHByaW1pdGl2ZVVuaXRzLHIscmFkaXVzLHJlZmVycmVyUG9saWN5LHJlZlgscmVmWSxyZWwscmVuZGVyaW5nLWludGVudCxyZXBlYXRDb3VudCxyZXBlYXREdXIscmVxdWlyZWRFeHRlbnNpb25zLHJlcXVpcmVkRmVhdHVyZXMscmVzdGFydCxyZXN1bHQscm90YXRlLHJ4LHJ5LHNjYWxlLHNlZWQsc2hhcGUtcmVuZGVyaW5nLHNsb3BlLHNwYWNpbmcsc3BlY3VsYXJDb25zdGFudCxzcGVjdWxhckV4cG9uZW50LHNwZWVkLHNwcmVhZE1ldGhvZCxzdGFydE9mZnNldCxzdGREZXZpYXRpb24sc3RlbWgsc3RlbXYsc3RpdGNoVGlsZXMsc3RvcC1jb2xvcixzdG9wLW9wYWNpdHksc3RyaWtldGhyb3VnaC1wb3NpdGlvbixzdHJpa2V0aHJvdWdoLXRoaWNrbmVzcyxzdHJpbmcsc3Ryb2tlLHN0cm9rZS1kYXNoYXJyYXksc3Ryb2tlLWRhc2hvZmZzZXQsc3Ryb2tlLWxpbmVjYXAsc3Ryb2tlLWxpbmVqb2luLHN0cm9rZS1taXRlcmxpbWl0LHN0cm9rZS1vcGFjaXR5LHN0cm9rZS13aWR0aCxzdHlsZSxzdXJmYWNlU2NhbGUsc3lzdGVtTGFuZ3VhZ2UsdGFiaW5kZXgsdGFibGVWYWx1ZXMsdGFyZ2V0LHRhcmdldFgsdGFyZ2V0WSx0ZXh0LWFuY2hvcix0ZXh0LWRlY29yYXRpb24sdGV4dC1yZW5kZXJpbmcsdGV4dExlbmd0aCx0byx0cmFuc2Zvcm0sdHJhbnNmb3JtLW9yaWdpbix0eXBlLHUxLHUyLHVuZGVybGluZS1wb3NpdGlvbix1bmRlcmxpbmUtdGhpY2tuZXNzLHVuaWNvZGUsdW5pY29kZS1iaWRpLHVuaWNvZGUtcmFuZ2UsdW5pdHMtcGVyLWVtLHYtYWxwaGFiZXRpYyx2LWhhbmdpbmcsdi1pZGVvZ3JhcGhpYyx2LW1hdGhlbWF0aWNhbCx2YWx1ZXMsdmVjdG9yLWVmZmVjdCx2ZXJzaW9uLHZlcnQtYWR2LXksdmVydC1vcmlnaW4teCx2ZXJ0LW9yaWdpbi15LHZpZXdCb3gsdmlld1RhcmdldCx2aXNpYmlsaXR5LHdpZHRoLHdpZHRocyx3b3JkLXNwYWNpbmcsd3JpdGluZy1tb2RlLHgseC1oZWlnaHQseDEseDIseENoYW5uZWxTZWxlY3Rvcix4bGluazphY3R1YXRlLHhsaW5rOmFyY3JvbGUseGxpbms6aHJlZix4bGluazpyb2xlLHhsaW5rOnNob3cseGxpbms6dGl0bGUseGxpbms6dHlwZSx4bWxuczp4bGluayx4bWw6YmFzZSx4bWw6bGFuZyx4bWw6c3BhY2UseSx5MSx5Mix5Q2hhbm5lbFNlbGVjdG9yLHosem9vbUFuZFBhbmBcbik7XG5jb25zdCBpc0tub3duTWF0aE1MQXR0ciA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKFxuICBgYWNjZW50LGFjY2VudHVuZGVyLGFjdGlvbnR5cGUsYWxpZ24sYWxpZ25tZW50c2NvcGUsYWx0aW1nLGFsdGltZy1oZWlnaHQsYWx0aW1nLXZhbGlnbixhbHRpbWctd2lkdGgsYWx0dGV4dCxiZXZlbGxlZCxjbG9zZSxjb2x1bW5zYWxpZ24sY29sdW1ubGluZXMsY29sdW1uc3BhbixkZW5vbWFsaWduLGRlcHRoLGRpcixkaXNwbGF5LGRpc3BsYXlzdHlsZSxlbmNvZGluZyxlcXVhbGNvbHVtbnMsZXF1YWxyb3dzLGZlbmNlLGZvbnRzdHlsZSxmb250d2VpZ2h0LGZvcm0sZnJhbWUsZnJhbWVzcGFjaW5nLGdyb3VwYWxpZ24saGVpZ2h0LGhyZWYsaWQsaW5kZW50YWxpZ24saW5kZW50YWxpZ25maXJzdCxpbmRlbnRhbGlnbmxhc3QsaW5kZW50c2hpZnQsaW5kZW50c2hpZnRmaXJzdCxpbmRlbnRzaGlmdGxhc3QsaW5kZXh0eXBlLGp1c3RpZnksbGFyZ2V0b3AsbGFyZ2VvcCxscXVvdGUsbHNwYWNlLG1hdGhiYWNrZ3JvdW5kLG1hdGhjb2xvcixtYXRoc2l6ZSxtYXRodmFyaWFudCxtYXhzaXplLG1pbmxhYmVsc3BhY2luZyxtb2RlLG90aGVyLG92ZXJmbG93LHBvc2l0aW9uLHJvd2FsaWduLHJvd2xpbmVzLHJvd3NwYW4scnF1b3RlLHJzcGFjZSxzY3JpcHRsZXZlbCxzY3JpcHRtaW5zaXplLHNjcmlwdHNpemVtdWx0aXBsaWVyLHNlbGVjdGlvbixzZXBhcmF0b3Isc2VwYXJhdG9ycyxzaGlmdCxzaWRlLHNyYyxzdGFja2FsaWduLHN0cmV0Y2h5LHN1YnNjcmlwdHNoaWZ0LHN1cGVyc2NyaXB0c2hpZnQsc3ltbWV0cmljLHZvZmZzZXQsd2lkdGgsd2lkdGhzLHhsaW5rOmhyZWYseGxpbms6c2hvdyx4bGluazp0eXBlLHhtbG5zYFxuKTtcbmZ1bmN0aW9uIGlzUmVuZGVyYWJsZUF0dHJWYWx1ZSh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gdHlwZSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlID09PSBcIm51bWJlclwiIHx8IHR5cGUgPT09IFwiYm9vbGVhblwiO1xufVxuXG5jb25zdCBlc2NhcGVSRSA9IC9bXCInJjw+XS87XG5mdW5jdGlvbiBlc2NhcGVIdG1sKHN0cmluZykge1xuICBjb25zdCBzdHIgPSBcIlwiICsgc3RyaW5nO1xuICBjb25zdCBtYXRjaCA9IGVzY2FwZVJFLmV4ZWMoc3RyKTtcbiAgaWYgKCFtYXRjaCkge1xuICAgIHJldHVybiBzdHI7XG4gIH1cbiAgbGV0IGh0bWwgPSBcIlwiO1xuICBsZXQgZXNjYXBlZDtcbiAgbGV0IGluZGV4O1xuICBsZXQgbGFzdEluZGV4ID0gMDtcbiAgZm9yIChpbmRleCA9IG1hdGNoLmluZGV4OyBpbmRleCA8IHN0ci5sZW5ndGg7IGluZGV4KyspIHtcbiAgICBzd2l0Y2ggKHN0ci5jaGFyQ29kZUF0KGluZGV4KSkge1xuICAgICAgY2FzZSAzNDpcbiAgICAgICAgZXNjYXBlZCA9IFwiJnF1b3Q7XCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzODpcbiAgICAgICAgZXNjYXBlZCA9IFwiJmFtcDtcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM5OlxuICAgICAgICBlc2NhcGVkID0gXCImIzM5O1wiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNjA6XG4gICAgICAgIGVzY2FwZWQgPSBcIiZsdDtcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDYyOlxuICAgICAgICBlc2NhcGVkID0gXCImZ3Q7XCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChsYXN0SW5kZXggIT09IGluZGV4KSB7XG4gICAgICBodG1sICs9IHN0ci5zbGljZShsYXN0SW5kZXgsIGluZGV4KTtcbiAgICB9XG4gICAgbGFzdEluZGV4ID0gaW5kZXggKyAxO1xuICAgIGh0bWwgKz0gZXNjYXBlZDtcbiAgfVxuICByZXR1cm4gbGFzdEluZGV4ICE9PSBpbmRleCA/IGh0bWwgKyBzdHIuc2xpY2UobGFzdEluZGV4LCBpbmRleCkgOiBodG1sO1xufVxuY29uc3QgY29tbWVudFN0cmlwUkUgPSAvXi0/Pnw8IS0tfC0tPnwtLSE+fDwhLSQvZztcbmZ1bmN0aW9uIGVzY2FwZUh0bWxDb21tZW50KHNyYykge1xuICByZXR1cm4gc3JjLnJlcGxhY2UoY29tbWVudFN0cmlwUkUsIFwiXCIpO1xufVxuY29uc3QgY3NzVmFyTmFtZUVzY2FwZVN5bWJvbHNSRSA9IC9bICFcIiMkJSYnKCkqKywuLzo7PD0+P0BbXFxcXFxcXV5ge3x9fl0vZztcbmZ1bmN0aW9uIGdldEVzY2FwZWRDc3NWYXJOYW1lKGtleSwgZG91YmxlRXNjYXBlKSB7XG4gIHJldHVybiBrZXkucmVwbGFjZShcbiAgICBjc3NWYXJOYW1lRXNjYXBlU3ltYm9sc1JFLFxuICAgIChzKSA9PiBkb3VibGVFc2NhcGUgPyBzID09PSAnXCInID8gJ1xcXFxcXFxcXFxcXFwiJyA6IGBcXFxcXFxcXCR7c31gIDogYFxcXFwke3N9YFxuICApO1xufVxuXG5mdW5jdGlvbiBsb29zZUNvbXBhcmVBcnJheXMoYSwgYikge1xuICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gIGxldCBlcXVhbCA9IHRydWU7XG4gIGZvciAobGV0IGkgPSAwOyBlcXVhbCAmJiBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgIGVxdWFsID0gbG9vc2VFcXVhbChhW2ldLCBiW2ldKTtcbiAgfVxuICByZXR1cm4gZXF1YWw7XG59XG5mdW5jdGlvbiBsb29zZUVxdWFsKGEsIGIpIHtcbiAgaWYgKGEgPT09IGIpIHJldHVybiB0cnVlO1xuICBsZXQgYVZhbGlkVHlwZSA9IGlzRGF0ZShhKTtcbiAgbGV0IGJWYWxpZFR5cGUgPSBpc0RhdGUoYik7XG4gIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcbiAgICByZXR1cm4gYVZhbGlkVHlwZSAmJiBiVmFsaWRUeXBlID8gYS5nZXRUaW1lKCkgPT09IGIuZ2V0VGltZSgpIDogZmFsc2U7XG4gIH1cbiAgYVZhbGlkVHlwZSA9IGlzU3ltYm9sKGEpO1xuICBiVmFsaWRUeXBlID0gaXNTeW1ib2woYik7XG4gIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcbiAgICByZXR1cm4gYSA9PT0gYjtcbiAgfVxuICBhVmFsaWRUeXBlID0gaXNBcnJheShhKTtcbiAgYlZhbGlkVHlwZSA9IGlzQXJyYXkoYik7XG4gIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcbiAgICByZXR1cm4gYVZhbGlkVHlwZSAmJiBiVmFsaWRUeXBlID8gbG9vc2VDb21wYXJlQXJyYXlzKGEsIGIpIDogZmFsc2U7XG4gIH1cbiAgYVZhbGlkVHlwZSA9IGlzT2JqZWN0KGEpO1xuICBiVmFsaWRUeXBlID0gaXNPYmplY3QoYik7XG4gIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcbiAgICBpZiAoIWFWYWxpZFR5cGUgfHwgIWJWYWxpZFR5cGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgYUtleXNDb3VudCA9IE9iamVjdC5rZXlzKGEpLmxlbmd0aDtcbiAgICBjb25zdCBiS2V5c0NvdW50ID0gT2JqZWN0LmtleXMoYikubGVuZ3RoO1xuICAgIGlmIChhS2V5c0NvdW50ICE9PSBiS2V5c0NvdW50KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IGluIGEpIHtcbiAgICAgIGNvbnN0IGFIYXNLZXkgPSBhLmhhc093blByb3BlcnR5KGtleSk7XG4gICAgICBjb25zdCBiSGFzS2V5ID0gYi5oYXNPd25Qcm9wZXJ0eShrZXkpO1xuICAgICAgaWYgKGFIYXNLZXkgJiYgIWJIYXNLZXkgfHwgIWFIYXNLZXkgJiYgYkhhc0tleSB8fCAhbG9vc2VFcXVhbChhW2tleV0sIGJba2V5XSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gU3RyaW5nKGEpID09PSBTdHJpbmcoYik7XG59XG5mdW5jdGlvbiBsb29zZUluZGV4T2YoYXJyLCB2YWwpIHtcbiAgcmV0dXJuIGFyci5maW5kSW5kZXgoKGl0ZW0pID0+IGxvb3NlRXF1YWwoaXRlbSwgdmFsKSk7XG59XG5cbmNvbnN0IGlzUmVmID0gKHZhbCkgPT4ge1xuICByZXR1cm4gISEodmFsICYmIHZhbFtcIl9fdl9pc1JlZlwiXSA9PT0gdHJ1ZSk7XG59O1xuY29uc3QgdG9EaXNwbGF5U3RyaW5nID0gKHZhbCkgPT4ge1xuICByZXR1cm4gaXNTdHJpbmcodmFsKSA/IHZhbCA6IHZhbCA9PSBudWxsID8gXCJcIiA6IGlzQXJyYXkodmFsKSB8fCBpc09iamVjdCh2YWwpICYmICh2YWwudG9TdHJpbmcgPT09IG9iamVjdFRvU3RyaW5nIHx8ICFpc0Z1bmN0aW9uKHZhbC50b1N0cmluZykpID8gaXNSZWYodmFsKSA/IHRvRGlzcGxheVN0cmluZyh2YWwudmFsdWUpIDogSlNPTi5zdHJpbmdpZnkodmFsLCByZXBsYWNlciwgMikgOiBTdHJpbmcodmFsKTtcbn07XG5jb25zdCByZXBsYWNlciA9IChfa2V5LCB2YWwpID0+IHtcbiAgaWYgKGlzUmVmKHZhbCkpIHtcbiAgICByZXR1cm4gcmVwbGFjZXIoX2tleSwgdmFsLnZhbHVlKTtcbiAgfSBlbHNlIGlmIChpc01hcCh2YWwpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIFtgTWFwKCR7dmFsLnNpemV9KWBdOiBbLi4udmFsLmVudHJpZXMoKV0ucmVkdWNlKFxuICAgICAgICAoZW50cmllcywgW2tleSwgdmFsMl0sIGkpID0+IHtcbiAgICAgICAgICBlbnRyaWVzW3N0cmluZ2lmeVN5bWJvbChrZXksIGkpICsgXCIgPT5cIl0gPSB2YWwyO1xuICAgICAgICAgIHJldHVybiBlbnRyaWVzO1xuICAgICAgICB9LFxuICAgICAgICB7fVxuICAgICAgKVxuICAgIH07XG4gIH0gZWxzZSBpZiAoaXNTZXQodmFsKSkge1xuICAgIHJldHVybiB7XG4gICAgICBbYFNldCgke3ZhbC5zaXplfSlgXTogWy4uLnZhbC52YWx1ZXMoKV0ubWFwKCh2KSA9PiBzdHJpbmdpZnlTeW1ib2wodikpXG4gICAgfTtcbiAgfSBlbHNlIGlmIChpc1N5bWJvbCh2YWwpKSB7XG4gICAgcmV0dXJuIHN0cmluZ2lmeVN5bWJvbCh2YWwpO1xuICB9IGVsc2UgaWYgKGlzT2JqZWN0KHZhbCkgJiYgIWlzQXJyYXkodmFsKSAmJiAhaXNQbGFpbk9iamVjdCh2YWwpKSB7XG4gICAgcmV0dXJuIFN0cmluZyh2YWwpO1xuICB9XG4gIHJldHVybiB2YWw7XG59O1xuY29uc3Qgc3RyaW5naWZ5U3ltYm9sID0gKHYsIGkgPSBcIlwiKSA9PiB7XG4gIHZhciBfYTtcbiAgcmV0dXJuIChcbiAgICAvLyBTeW1ib2wuZGVzY3JpcHRpb24gaW4gZXMyMDE5KyBzbyB3ZSBuZWVkIHRvIGNhc3QgaGVyZSB0byBwYXNzXG4gICAgLy8gdGhlIGxpYjogZXMyMDE2IGNoZWNrXG4gICAgaXNTeW1ib2wodikgPyBgU3ltYm9sKCR7KF9hID0gdi5kZXNjcmlwdGlvbikgIT0gbnVsbCA/IF9hIDogaX0pYCA6IHZcbiAgKTtcbn07XG5cbmV4cG9ydCB7IEVNUFRZX0FSUiwgRU1QVFlfT0JKLCBOTywgTk9PUCwgUGF0Y2hGbGFnTmFtZXMsIFBhdGNoRmxhZ3MsIFNoYXBlRmxhZ3MsIFNsb3RGbGFncywgY2FtZWxpemUsIGNhcGl0YWxpemUsIGNzc1Zhck5hbWVFc2NhcGVTeW1ib2xzUkUsIGRlZiwgZXNjYXBlSHRtbCwgZXNjYXBlSHRtbENvbW1lbnQsIGV4dGVuZCwgZ2VuQ2FjaGVLZXksIGdlblByb3BzQWNjZXNzRXhwLCBnZW5lcmF0ZUNvZGVGcmFtZSwgZ2V0RXNjYXBlZENzc1Zhck5hbWUsIGdldEdsb2JhbFRoaXMsIGhhc0NoYW5nZWQsIGhhc093biwgaHlwaGVuYXRlLCBpbmNsdWRlQm9vbGVhbkF0dHIsIGludm9rZUFycmF5Rm5zLCBpc0FycmF5LCBpc0Jvb2xlYW5BdHRyLCBpc0J1aWx0SW5EaXJlY3RpdmUsIGlzRGF0ZSwgaXNGdW5jdGlvbiwgaXNHbG9iYWxseUFsbG93ZWQsIGlzR2xvYmFsbHlXaGl0ZWxpc3RlZCwgaXNIVE1MVGFnLCBpc0ludGVnZXJLZXksIGlzS25vd25IdG1sQXR0ciwgaXNLbm93bk1hdGhNTEF0dHIsIGlzS25vd25TdmdBdHRyLCBpc01hcCwgaXNNYXRoTUxUYWcsIGlzTW9kZWxMaXN0ZW5lciwgaXNPYmplY3QsIGlzT24sIGlzUGxhaW5PYmplY3QsIGlzUHJvbWlzZSwgaXNSZWdFeHAsIGlzUmVuZGVyYWJsZUF0dHJWYWx1ZSwgaXNSZXNlcnZlZFByb3AsIGlzU1NSU2FmZUF0dHJOYW1lLCBpc1NWR1RhZywgaXNTZXQsIGlzU3BlY2lhbEJvb2xlYW5BdHRyLCBpc1N0cmluZywgaXNTeW1ib2wsIGlzVm9pZFRhZywgbG9vc2VFcXVhbCwgbG9vc2VJbmRleE9mLCBsb29zZVRvTnVtYmVyLCBtYWtlTWFwLCBub3JtYWxpemVDbGFzcywgbm9ybWFsaXplUHJvcHMsIG5vcm1hbGl6ZVN0eWxlLCBvYmplY3RUb1N0cmluZywgcGFyc2VTdHJpbmdTdHlsZSwgcHJvcHNUb0F0dHJNYXAsIHJlbW92ZSwgc2xvdEZsYWdzVGV4dCwgc3RyaW5naWZ5U3R5bGUsIHRvRGlzcGxheVN0cmluZywgdG9IYW5kbGVyS2V5LCB0b051bWJlciwgdG9SYXdUeXBlLCB0b1R5cGVTdHJpbmcgfTtcbiIsIi8qKlxuKiBAdnVlL3JlYWN0aXZpdHkgdjMuNS4xNFxuKiAoYykgMjAxOC1wcmVzZW50IFl1eGkgKEV2YW4pIFlvdSBhbmQgVnVlIGNvbnRyaWJ1dG9yc1xuKiBAbGljZW5zZSBNSVRcbioqL1xuaW1wb3J0IHsgZXh0ZW5kLCBoYXNDaGFuZ2VkLCBpc0FycmF5LCBpc0ludGVnZXJLZXksIGlzU3ltYm9sLCBpc01hcCwgaGFzT3duLCBtYWtlTWFwLCBpc09iamVjdCwgY2FwaXRhbGl6ZSwgdG9SYXdUeXBlLCBkZWYsIGlzRnVuY3Rpb24sIEVNUFRZX09CSiwgaXNTZXQsIGlzUGxhaW5PYmplY3QsIHJlbW92ZSwgTk9PUCB9IGZyb20gJ0B2dWUvc2hhcmVkJztcblxuZnVuY3Rpb24gd2Fybihtc2csIC4uLmFyZ3MpIHtcbiAgY29uc29sZS53YXJuKGBbVnVlIHdhcm5dICR7bXNnfWAsIC4uLmFyZ3MpO1xufVxuXG5sZXQgYWN0aXZlRWZmZWN0U2NvcGU7XG5jbGFzcyBFZmZlY3RTY29wZSB7XG4gIGNvbnN0cnVjdG9yKGRldGFjaGVkID0gZmFsc2UpIHtcbiAgICB0aGlzLmRldGFjaGVkID0gZGV0YWNoZWQ7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5fYWN0aXZlID0gdHJ1ZTtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWwgdHJhY2sgYG9uYCBjYWxscywgYWxsb3cgYG9uYCBjYWxsIG11bHRpcGxlIHRpbWVzXG4gICAgICovXG4gICAgdGhpcy5fb24gPSAwO1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMuZWZmZWN0cyA9IFtdO1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMuY2xlYW51cHMgPSBbXTtcbiAgICB0aGlzLl9pc1BhdXNlZCA9IGZhbHNlO1xuICAgIHRoaXMucGFyZW50ID0gYWN0aXZlRWZmZWN0U2NvcGU7XG4gICAgaWYgKCFkZXRhY2hlZCAmJiBhY3RpdmVFZmZlY3RTY29wZSkge1xuICAgICAgdGhpcy5pbmRleCA9IChhY3RpdmVFZmZlY3RTY29wZS5zY29wZXMgfHwgKGFjdGl2ZUVmZmVjdFNjb3BlLnNjb3BlcyA9IFtdKSkucHVzaChcbiAgICAgICAgdGhpc1xuICAgICAgKSAtIDE7XG4gICAgfVxuICB9XG4gIGdldCBhY3RpdmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FjdGl2ZTtcbiAgfVxuICBwYXVzZSgpIHtcbiAgICBpZiAodGhpcy5fYWN0aXZlKSB7XG4gICAgICB0aGlzLl9pc1BhdXNlZCA9IHRydWU7XG4gICAgICBsZXQgaSwgbDtcbiAgICAgIGlmICh0aGlzLnNjb3Blcykge1xuICAgICAgICBmb3IgKGkgPSAwLCBsID0gdGhpcy5zY29wZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5zY29wZXNbaV0ucGF1c2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChpID0gMCwgbCA9IHRoaXMuZWZmZWN0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdGhpcy5lZmZlY3RzW2ldLnBhdXNlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZXN1bWVzIHRoZSBlZmZlY3Qgc2NvcGUsIGluY2x1ZGluZyBhbGwgY2hpbGQgc2NvcGVzIGFuZCBlZmZlY3RzLlxuICAgKi9cbiAgcmVzdW1lKCkge1xuICAgIGlmICh0aGlzLl9hY3RpdmUpIHtcbiAgICAgIGlmICh0aGlzLl9pc1BhdXNlZCkge1xuICAgICAgICB0aGlzLl9pc1BhdXNlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgaSwgbDtcbiAgICAgICAgaWYgKHRoaXMuc2NvcGVzKSB7XG4gICAgICAgICAgZm9yIChpID0gMCwgbCA9IHRoaXMuc2NvcGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5zY29wZXNbaV0ucmVzdW1lKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmVmZmVjdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5lZmZlY3RzW2ldLnJlc3VtZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJ1bihmbikge1xuICAgIGlmICh0aGlzLl9hY3RpdmUpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRFZmZlY3RTY29wZSA9IGFjdGl2ZUVmZmVjdFNjb3BlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYWN0aXZlRWZmZWN0U2NvcGUgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZm4oKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGFjdGl2ZUVmZmVjdFNjb3BlID0gY3VycmVudEVmZmVjdFNjb3BlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgd2FybihgY2Fubm90IHJ1biBhbiBpbmFjdGl2ZSBlZmZlY3Qgc2NvcGUuYCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBUaGlzIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBvbiBub24tZGV0YWNoZWQgc2NvcGVzXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgb24oKSB7XG4gICAgaWYgKCsrdGhpcy5fb24gPT09IDEpIHtcbiAgICAgIHRoaXMucHJldlNjb3BlID0gYWN0aXZlRWZmZWN0U2NvcGU7XG4gICAgICBhY3RpdmVFZmZlY3RTY29wZSA9IHRoaXM7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBUaGlzIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBvbiBub24tZGV0YWNoZWQgc2NvcGVzXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgb2ZmKCkge1xuICAgIGlmICh0aGlzLl9vbiA+IDAgJiYgLS10aGlzLl9vbiA9PT0gMCkge1xuICAgICAgYWN0aXZlRWZmZWN0U2NvcGUgPSB0aGlzLnByZXZTY29wZTtcbiAgICAgIHRoaXMucHJldlNjb3BlID0gdm9pZCAwO1xuICAgIH1cbiAgfVxuICBzdG9wKGZyb21QYXJlbnQpIHtcbiAgICBpZiAodGhpcy5fYWN0aXZlKSB7XG4gICAgICB0aGlzLl9hY3RpdmUgPSBmYWxzZTtcbiAgICAgIGxldCBpLCBsO1xuICAgICAgZm9yIChpID0gMCwgbCA9IHRoaXMuZWZmZWN0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdGhpcy5lZmZlY3RzW2ldLnN0b3AoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZWZmZWN0cy5sZW5ndGggPSAwO1xuICAgICAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2xlYW51cHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHRoaXMuY2xlYW51cHNbaV0oKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2xlYW51cHMubGVuZ3RoID0gMDtcbiAgICAgIGlmICh0aGlzLnNjb3Blcykge1xuICAgICAgICBmb3IgKGkgPSAwLCBsID0gdGhpcy5zY29wZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5zY29wZXNbaV0uc3RvcCh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjb3Blcy5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmRldGFjaGVkICYmIHRoaXMucGFyZW50ICYmICFmcm9tUGFyZW50KSB7XG4gICAgICAgIGNvbnN0IGxhc3QgPSB0aGlzLnBhcmVudC5zY29wZXMucG9wKCk7XG4gICAgICAgIGlmIChsYXN0ICYmIGxhc3QgIT09IHRoaXMpIHtcbiAgICAgICAgICB0aGlzLnBhcmVudC5zY29wZXNbdGhpcy5pbmRleF0gPSBsYXN0O1xuICAgICAgICAgIGxhc3QuaW5kZXggPSB0aGlzLmluZGV4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLnBhcmVudCA9IHZvaWQgMDtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGVmZmVjdFNjb3BlKGRldGFjaGVkKSB7XG4gIHJldHVybiBuZXcgRWZmZWN0U2NvcGUoZGV0YWNoZWQpO1xufVxuZnVuY3Rpb24gZ2V0Q3VycmVudFNjb3BlKCkge1xuICByZXR1cm4gYWN0aXZlRWZmZWN0U2NvcGU7XG59XG5mdW5jdGlvbiBvblNjb3BlRGlzcG9zZShmbiwgZmFpbFNpbGVudGx5ID0gZmFsc2UpIHtcbiAgaWYgKGFjdGl2ZUVmZmVjdFNjb3BlKSB7XG4gICAgYWN0aXZlRWZmZWN0U2NvcGUuY2xlYW51cHMucHVzaChmbik7XG4gIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhZmFpbFNpbGVudGx5KSB7XG4gICAgd2FybihcbiAgICAgIGBvblNjb3BlRGlzcG9zZSgpIGlzIGNhbGxlZCB3aGVuIHRoZXJlIGlzIG5vIGFjdGl2ZSBlZmZlY3Qgc2NvcGUgdG8gYmUgYXNzb2NpYXRlZCB3aXRoLmBcbiAgICApO1xuICB9XG59XG5cbmxldCBhY3RpdmVTdWI7XG5jb25zdCBFZmZlY3RGbGFncyA9IHtcbiAgXCJBQ1RJVkVcIjogMSxcbiAgXCIxXCI6IFwiQUNUSVZFXCIsXG4gIFwiUlVOTklOR1wiOiAyLFxuICBcIjJcIjogXCJSVU5OSU5HXCIsXG4gIFwiVFJBQ0tJTkdcIjogNCxcbiAgXCI0XCI6IFwiVFJBQ0tJTkdcIixcbiAgXCJOT1RJRklFRFwiOiA4LFxuICBcIjhcIjogXCJOT1RJRklFRFwiLFxuICBcIkRJUlRZXCI6IDE2LFxuICBcIjE2XCI6IFwiRElSVFlcIixcbiAgXCJBTExPV19SRUNVUlNFXCI6IDMyLFxuICBcIjMyXCI6IFwiQUxMT1dfUkVDVVJTRVwiLFxuICBcIlBBVVNFRFwiOiA2NCxcbiAgXCI2NFwiOiBcIlBBVVNFRFwiLFxuICBcIkVWQUxVQVRFRFwiOiAxMjgsXG4gIFwiMTI4XCI6IFwiRVZBTFVBVEVEXCJcbn07XG5jb25zdCBwYXVzZWRRdWV1ZUVmZmVjdHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtTZXQoKTtcbmNsYXNzIFJlYWN0aXZlRWZmZWN0IHtcbiAgY29uc3RydWN0b3IoZm4pIHtcbiAgICB0aGlzLmZuID0gZm47XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5kZXBzID0gdm9pZCAwO1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMuZGVwc1RhaWwgPSB2b2lkIDA7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5mbGFncyA9IDEgfCA0O1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMubmV4dCA9IHZvaWQgMDtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0aGlzLmNsZWFudXAgPSB2b2lkIDA7XG4gICAgdGhpcy5zY2hlZHVsZXIgPSB2b2lkIDA7XG4gICAgaWYgKGFjdGl2ZUVmZmVjdFNjb3BlICYmIGFjdGl2ZUVmZmVjdFNjb3BlLmFjdGl2ZSkge1xuICAgICAgYWN0aXZlRWZmZWN0U2NvcGUuZWZmZWN0cy5wdXNoKHRoaXMpO1xuICAgIH1cbiAgfVxuICBwYXVzZSgpIHtcbiAgICB0aGlzLmZsYWdzIHw9IDY0O1xuICB9XG4gIHJlc3VtZSgpIHtcbiAgICBpZiAodGhpcy5mbGFncyAmIDY0KSB7XG4gICAgICB0aGlzLmZsYWdzICY9IC02NTtcbiAgICAgIGlmIChwYXVzZWRRdWV1ZUVmZmVjdHMuaGFzKHRoaXMpKSB7XG4gICAgICAgIHBhdXNlZFF1ZXVlRWZmZWN0cy5kZWxldGUodGhpcyk7XG4gICAgICAgIHRoaXMudHJpZ2dlcigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBub3RpZnkoKSB7XG4gICAgaWYgKHRoaXMuZmxhZ3MgJiAyICYmICEodGhpcy5mbGFncyAmIDMyKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoISh0aGlzLmZsYWdzICYgOCkpIHtcbiAgICAgIGJhdGNoKHRoaXMpO1xuICAgIH1cbiAgfVxuICBydW4oKSB7XG4gICAgaWYgKCEodGhpcy5mbGFncyAmIDEpKSB7XG4gICAgICByZXR1cm4gdGhpcy5mbigpO1xuICAgIH1cbiAgICB0aGlzLmZsYWdzIHw9IDI7XG4gICAgY2xlYW51cEVmZmVjdCh0aGlzKTtcbiAgICBwcmVwYXJlRGVwcyh0aGlzKTtcbiAgICBjb25zdCBwcmV2RWZmZWN0ID0gYWN0aXZlU3ViO1xuICAgIGNvbnN0IHByZXZTaG91bGRUcmFjayA9IHNob3VsZFRyYWNrO1xuICAgIGFjdGl2ZVN1YiA9IHRoaXM7XG4gICAgc2hvdWxkVHJhY2sgPSB0cnVlO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gdGhpcy5mbigpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBhY3RpdmVTdWIgIT09IHRoaXMpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICBcIkFjdGl2ZSBlZmZlY3Qgd2FzIG5vdCByZXN0b3JlZCBjb3JyZWN0bHkgLSB0aGlzIGlzIGxpa2VseSBhIFZ1ZSBpbnRlcm5hbCBidWcuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGNsZWFudXBEZXBzKHRoaXMpO1xuICAgICAgYWN0aXZlU3ViID0gcHJldkVmZmVjdDtcbiAgICAgIHNob3VsZFRyYWNrID0gcHJldlNob3VsZFRyYWNrO1xuICAgICAgdGhpcy5mbGFncyAmPSAtMztcbiAgICB9XG4gIH1cbiAgc3RvcCgpIHtcbiAgICBpZiAodGhpcy5mbGFncyAmIDEpIHtcbiAgICAgIGZvciAobGV0IGxpbmsgPSB0aGlzLmRlcHM7IGxpbms7IGxpbmsgPSBsaW5rLm5leHREZXApIHtcbiAgICAgICAgcmVtb3ZlU3ViKGxpbmspO1xuICAgICAgfVxuICAgICAgdGhpcy5kZXBzID0gdGhpcy5kZXBzVGFpbCA9IHZvaWQgMDtcbiAgICAgIGNsZWFudXBFZmZlY3QodGhpcyk7XG4gICAgICB0aGlzLm9uU3RvcCAmJiB0aGlzLm9uU3RvcCgpO1xuICAgICAgdGhpcy5mbGFncyAmPSAtMjtcbiAgICB9XG4gIH1cbiAgdHJpZ2dlcigpIHtcbiAgICBpZiAodGhpcy5mbGFncyAmIDY0KSB7XG4gICAgICBwYXVzZWRRdWV1ZUVmZmVjdHMuYWRkKHRoaXMpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuc2NoZWR1bGVyKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucnVuSWZEaXJ0eSgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBydW5JZkRpcnR5KCkge1xuICAgIGlmIChpc0RpcnR5KHRoaXMpKSB7XG4gICAgICB0aGlzLnJ1bigpO1xuICAgIH1cbiAgfVxuICBnZXQgZGlydHkoKSB7XG4gICAgcmV0dXJuIGlzRGlydHkodGhpcyk7XG4gIH1cbn1cbmxldCBiYXRjaERlcHRoID0gMDtcbmxldCBiYXRjaGVkU3ViO1xubGV0IGJhdGNoZWRDb21wdXRlZDtcbmZ1bmN0aW9uIGJhdGNoKHN1YiwgaXNDb21wdXRlZCA9IGZhbHNlKSB7XG4gIHN1Yi5mbGFncyB8PSA4O1xuICBpZiAoaXNDb21wdXRlZCkge1xuICAgIHN1Yi5uZXh0ID0gYmF0Y2hlZENvbXB1dGVkO1xuICAgIGJhdGNoZWRDb21wdXRlZCA9IHN1YjtcbiAgICByZXR1cm47XG4gIH1cbiAgc3ViLm5leHQgPSBiYXRjaGVkU3ViO1xuICBiYXRjaGVkU3ViID0gc3ViO1xufVxuZnVuY3Rpb24gc3RhcnRCYXRjaCgpIHtcbiAgYmF0Y2hEZXB0aCsrO1xufVxuZnVuY3Rpb24gZW5kQmF0Y2goKSB7XG4gIGlmICgtLWJhdGNoRGVwdGggPiAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChiYXRjaGVkQ29tcHV0ZWQpIHtcbiAgICBsZXQgZSA9IGJhdGNoZWRDb21wdXRlZDtcbiAgICBiYXRjaGVkQ29tcHV0ZWQgPSB2b2lkIDA7XG4gICAgd2hpbGUgKGUpIHtcbiAgICAgIGNvbnN0IG5leHQgPSBlLm5leHQ7XG4gICAgICBlLm5leHQgPSB2b2lkIDA7XG4gICAgICBlLmZsYWdzICY9IC05O1xuICAgICAgZSA9IG5leHQ7XG4gICAgfVxuICB9XG4gIGxldCBlcnJvcjtcbiAgd2hpbGUgKGJhdGNoZWRTdWIpIHtcbiAgICBsZXQgZSA9IGJhdGNoZWRTdWI7XG4gICAgYmF0Y2hlZFN1YiA9IHZvaWQgMDtcbiAgICB3aGlsZSAoZSkge1xuICAgICAgY29uc3QgbmV4dCA9IGUubmV4dDtcbiAgICAgIGUubmV4dCA9IHZvaWQgMDtcbiAgICAgIGUuZmxhZ3MgJj0gLTk7XG4gICAgICBpZiAoZS5mbGFncyAmIDEpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICA7XG4gICAgICAgICAgZS50cmlnZ2VyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGlmICghZXJyb3IpIGVycm9yID0gZXJyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlID0gbmV4dDtcbiAgICB9XG4gIH1cbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbn1cbmZ1bmN0aW9uIHByZXBhcmVEZXBzKHN1Yikge1xuICBmb3IgKGxldCBsaW5rID0gc3ViLmRlcHM7IGxpbms7IGxpbmsgPSBsaW5rLm5leHREZXApIHtcbiAgICBsaW5rLnZlcnNpb24gPSAtMTtcbiAgICBsaW5rLnByZXZBY3RpdmVMaW5rID0gbGluay5kZXAuYWN0aXZlTGluaztcbiAgICBsaW5rLmRlcC5hY3RpdmVMaW5rID0gbGluaztcbiAgfVxufVxuZnVuY3Rpb24gY2xlYW51cERlcHMoc3ViKSB7XG4gIGxldCBoZWFkO1xuICBsZXQgdGFpbCA9IHN1Yi5kZXBzVGFpbDtcbiAgbGV0IGxpbmsgPSB0YWlsO1xuICB3aGlsZSAobGluaykge1xuICAgIGNvbnN0IHByZXYgPSBsaW5rLnByZXZEZXA7XG4gICAgaWYgKGxpbmsudmVyc2lvbiA9PT0gLTEpIHtcbiAgICAgIGlmIChsaW5rID09PSB0YWlsKSB0YWlsID0gcHJldjtcbiAgICAgIHJlbW92ZVN1YihsaW5rKTtcbiAgICAgIHJlbW92ZURlcChsaW5rKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGVhZCA9IGxpbms7XG4gICAgfVxuICAgIGxpbmsuZGVwLmFjdGl2ZUxpbmsgPSBsaW5rLnByZXZBY3RpdmVMaW5rO1xuICAgIGxpbmsucHJldkFjdGl2ZUxpbmsgPSB2b2lkIDA7XG4gICAgbGluayA9IHByZXY7XG4gIH1cbiAgc3ViLmRlcHMgPSBoZWFkO1xuICBzdWIuZGVwc1RhaWwgPSB0YWlsO1xufVxuZnVuY3Rpb24gaXNEaXJ0eShzdWIpIHtcbiAgZm9yIChsZXQgbGluayA9IHN1Yi5kZXBzOyBsaW5rOyBsaW5rID0gbGluay5uZXh0RGVwKSB7XG4gICAgaWYgKGxpbmsuZGVwLnZlcnNpb24gIT09IGxpbmsudmVyc2lvbiB8fCBsaW5rLmRlcC5jb21wdXRlZCAmJiAocmVmcmVzaENvbXB1dGVkKGxpbmsuZGVwLmNvbXB1dGVkKSB8fCBsaW5rLmRlcC52ZXJzaW9uICE9PSBsaW5rLnZlcnNpb24pKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgaWYgKHN1Yi5fZGlydHkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiByZWZyZXNoQ29tcHV0ZWQoY29tcHV0ZWQpIHtcbiAgaWYgKGNvbXB1dGVkLmZsYWdzICYgNCAmJiAhKGNvbXB1dGVkLmZsYWdzICYgMTYpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbXB1dGVkLmZsYWdzICY9IC0xNztcbiAgaWYgKGNvbXB1dGVkLmdsb2JhbFZlcnNpb24gPT09IGdsb2JhbFZlcnNpb24pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29tcHV0ZWQuZ2xvYmFsVmVyc2lvbiA9IGdsb2JhbFZlcnNpb247XG4gIGlmICghY29tcHV0ZWQuaXNTU1IgJiYgY29tcHV0ZWQuZmxhZ3MgJiAxMjggJiYgKCFjb21wdXRlZC5kZXBzICYmICFjb21wdXRlZC5fZGlydHkgfHwgIWlzRGlydHkoY29tcHV0ZWQpKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb21wdXRlZC5mbGFncyB8PSAyO1xuICBjb25zdCBkZXAgPSBjb21wdXRlZC5kZXA7XG4gIGNvbnN0IHByZXZTdWIgPSBhY3RpdmVTdWI7XG4gIGNvbnN0IHByZXZTaG91bGRUcmFjayA9IHNob3VsZFRyYWNrO1xuICBhY3RpdmVTdWIgPSBjb21wdXRlZDtcbiAgc2hvdWxkVHJhY2sgPSB0cnVlO1xuICB0cnkge1xuICAgIHByZXBhcmVEZXBzKGNvbXB1dGVkKTtcbiAgICBjb25zdCB2YWx1ZSA9IGNvbXB1dGVkLmZuKGNvbXB1dGVkLl92YWx1ZSk7XG4gICAgaWYgKGRlcC52ZXJzaW9uID09PSAwIHx8IGhhc0NoYW5nZWQodmFsdWUsIGNvbXB1dGVkLl92YWx1ZSkpIHtcbiAgICAgIGNvbXB1dGVkLmZsYWdzIHw9IDEyODtcbiAgICAgIGNvbXB1dGVkLl92YWx1ZSA9IHZhbHVlO1xuICAgICAgZGVwLnZlcnNpb24rKztcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGRlcC52ZXJzaW9uKys7XG4gICAgdGhyb3cgZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIGFjdGl2ZVN1YiA9IHByZXZTdWI7XG4gICAgc2hvdWxkVHJhY2sgPSBwcmV2U2hvdWxkVHJhY2s7XG4gICAgY2xlYW51cERlcHMoY29tcHV0ZWQpO1xuICAgIGNvbXB1dGVkLmZsYWdzICY9IC0zO1xuICB9XG59XG5mdW5jdGlvbiByZW1vdmVTdWIobGluaywgc29mdCA9IGZhbHNlKSB7XG4gIGNvbnN0IHsgZGVwLCBwcmV2U3ViLCBuZXh0U3ViIH0gPSBsaW5rO1xuICBpZiAocHJldlN1Yikge1xuICAgIHByZXZTdWIubmV4dFN1YiA9IG5leHRTdWI7XG4gICAgbGluay5wcmV2U3ViID0gdm9pZCAwO1xuICB9XG4gIGlmIChuZXh0U3ViKSB7XG4gICAgbmV4dFN1Yi5wcmV2U3ViID0gcHJldlN1YjtcbiAgICBsaW5rLm5leHRTdWIgPSB2b2lkIDA7XG4gIH1cbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgZGVwLnN1YnNIZWFkID09PSBsaW5rKSB7XG4gICAgZGVwLnN1YnNIZWFkID0gbmV4dFN1YjtcbiAgfVxuICBpZiAoZGVwLnN1YnMgPT09IGxpbmspIHtcbiAgICBkZXAuc3VicyA9IHByZXZTdWI7XG4gICAgaWYgKCFwcmV2U3ViICYmIGRlcC5jb21wdXRlZCkge1xuICAgICAgZGVwLmNvbXB1dGVkLmZsYWdzICY9IC01O1xuICAgICAgZm9yIChsZXQgbCA9IGRlcC5jb21wdXRlZC5kZXBzOyBsOyBsID0gbC5uZXh0RGVwKSB7XG4gICAgICAgIHJlbW92ZVN1YihsLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKCFzb2Z0ICYmICEtLWRlcC5zYyAmJiBkZXAubWFwKSB7XG4gICAgZGVwLm1hcC5kZWxldGUoZGVwLmtleSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHJlbW92ZURlcChsaW5rKSB7XG4gIGNvbnN0IHsgcHJldkRlcCwgbmV4dERlcCB9ID0gbGluaztcbiAgaWYgKHByZXZEZXApIHtcbiAgICBwcmV2RGVwLm5leHREZXAgPSBuZXh0RGVwO1xuICAgIGxpbmsucHJldkRlcCA9IHZvaWQgMDtcbiAgfVxuICBpZiAobmV4dERlcCkge1xuICAgIG5leHREZXAucHJldkRlcCA9IHByZXZEZXA7XG4gICAgbGluay5uZXh0RGVwID0gdm9pZCAwO1xuICB9XG59XG5mdW5jdGlvbiBlZmZlY3QoZm4sIG9wdGlvbnMpIHtcbiAgaWYgKGZuLmVmZmVjdCBpbnN0YW5jZW9mIFJlYWN0aXZlRWZmZWN0KSB7XG4gICAgZm4gPSBmbi5lZmZlY3QuZm47XG4gIH1cbiAgY29uc3QgZSA9IG5ldyBSZWFjdGl2ZUVmZmVjdChmbik7XG4gIGlmIChvcHRpb25zKSB7XG4gICAgZXh0ZW5kKGUsIG9wdGlvbnMpO1xuICB9XG4gIHRyeSB7XG4gICAgZS5ydW4oKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgZS5zdG9wKCk7XG4gICAgdGhyb3cgZXJyO1xuICB9XG4gIGNvbnN0IHJ1bm5lciA9IGUucnVuLmJpbmQoZSk7XG4gIHJ1bm5lci5lZmZlY3QgPSBlO1xuICByZXR1cm4gcnVubmVyO1xufVxuZnVuY3Rpb24gc3RvcChydW5uZXIpIHtcbiAgcnVubmVyLmVmZmVjdC5zdG9wKCk7XG59XG5sZXQgc2hvdWxkVHJhY2sgPSB0cnVlO1xuY29uc3QgdHJhY2tTdGFjayA9IFtdO1xuZnVuY3Rpb24gcGF1c2VUcmFja2luZygpIHtcbiAgdHJhY2tTdGFjay5wdXNoKHNob3VsZFRyYWNrKTtcbiAgc2hvdWxkVHJhY2sgPSBmYWxzZTtcbn1cbmZ1bmN0aW9uIGVuYWJsZVRyYWNraW5nKCkge1xuICB0cmFja1N0YWNrLnB1c2goc2hvdWxkVHJhY2spO1xuICBzaG91bGRUcmFjayA9IHRydWU7XG59XG5mdW5jdGlvbiByZXNldFRyYWNraW5nKCkge1xuICBjb25zdCBsYXN0ID0gdHJhY2tTdGFjay5wb3AoKTtcbiAgc2hvdWxkVHJhY2sgPSBsYXN0ID09PSB2b2lkIDAgPyB0cnVlIDogbGFzdDtcbn1cbmZ1bmN0aW9uIG9uRWZmZWN0Q2xlYW51cChmbiwgZmFpbFNpbGVudGx5ID0gZmFsc2UpIHtcbiAgaWYgKGFjdGl2ZVN1YiBpbnN0YW5jZW9mIFJlYWN0aXZlRWZmZWN0KSB7XG4gICAgYWN0aXZlU3ViLmNsZWFudXAgPSBmbjtcbiAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFmYWlsU2lsZW50bHkpIHtcbiAgICB3YXJuKFxuICAgICAgYG9uRWZmZWN0Q2xlYW51cCgpIHdhcyBjYWxsZWQgd2hlbiB0aGVyZSB3YXMgbm8gYWN0aXZlIGVmZmVjdCB0byBhc3NvY2lhdGUgd2l0aC5gXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gY2xlYW51cEVmZmVjdChlKSB7XG4gIGNvbnN0IHsgY2xlYW51cCB9ID0gZTtcbiAgZS5jbGVhbnVwID0gdm9pZCAwO1xuICBpZiAoY2xlYW51cCkge1xuICAgIGNvbnN0IHByZXZTdWIgPSBhY3RpdmVTdWI7XG4gICAgYWN0aXZlU3ViID0gdm9pZCAwO1xuICAgIHRyeSB7XG4gICAgICBjbGVhbnVwKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGFjdGl2ZVN1YiA9IHByZXZTdWI7XG4gICAgfVxuICB9XG59XG5cbmxldCBnbG9iYWxWZXJzaW9uID0gMDtcbmNsYXNzIExpbmsge1xuICBjb25zdHJ1Y3RvcihzdWIsIGRlcCkge1xuICAgIHRoaXMuc3ViID0gc3ViO1xuICAgIHRoaXMuZGVwID0gZGVwO1xuICAgIHRoaXMudmVyc2lvbiA9IGRlcC52ZXJzaW9uO1xuICAgIHRoaXMubmV4dERlcCA9IHRoaXMucHJldkRlcCA9IHRoaXMubmV4dFN1YiA9IHRoaXMucHJldlN1YiA9IHRoaXMucHJldkFjdGl2ZUxpbmsgPSB2b2lkIDA7XG4gIH1cbn1cbmNsYXNzIERlcCB7XG4gIGNvbnN0cnVjdG9yKGNvbXB1dGVkKSB7XG4gICAgdGhpcy5jb21wdXRlZCA9IGNvbXB1dGVkO1xuICAgIHRoaXMudmVyc2lvbiA9IDA7XG4gICAgLyoqXG4gICAgICogTGluayBiZXR3ZWVuIHRoaXMgZGVwIGFuZCB0aGUgY3VycmVudCBhY3RpdmUgZWZmZWN0XG4gICAgICovXG4gICAgdGhpcy5hY3RpdmVMaW5rID0gdm9pZCAwO1xuICAgIC8qKlxuICAgICAqIERvdWJseSBsaW5rZWQgbGlzdCByZXByZXNlbnRpbmcgdGhlIHN1YnNjcmliaW5nIGVmZmVjdHMgKHRhaWwpXG4gICAgICovXG4gICAgdGhpcy5zdWJzID0gdm9pZCAwO1xuICAgIC8qKlxuICAgICAqIEZvciBvYmplY3QgcHJvcGVydHkgZGVwcyBjbGVhbnVwXG4gICAgICovXG4gICAgdGhpcy5tYXAgPSB2b2lkIDA7XG4gICAgdGhpcy5rZXkgPSB2b2lkIDA7XG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlciBjb3VudGVyXG4gICAgICovXG4gICAgdGhpcy5zYyA9IDA7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIHRoaXMuc3Vic0hlYWQgPSB2b2lkIDA7XG4gICAgfVxuICB9XG4gIHRyYWNrKGRlYnVnSW5mbykge1xuICAgIGlmICghYWN0aXZlU3ViIHx8ICFzaG91bGRUcmFjayB8fCBhY3RpdmVTdWIgPT09IHRoaXMuY29tcHV0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IGxpbmsgPSB0aGlzLmFjdGl2ZUxpbms7XG4gICAgaWYgKGxpbmsgPT09IHZvaWQgMCB8fCBsaW5rLnN1YiAhPT0gYWN0aXZlU3ViKSB7XG4gICAgICBsaW5rID0gdGhpcy5hY3RpdmVMaW5rID0gbmV3IExpbmsoYWN0aXZlU3ViLCB0aGlzKTtcbiAgICAgIGlmICghYWN0aXZlU3ViLmRlcHMpIHtcbiAgICAgICAgYWN0aXZlU3ViLmRlcHMgPSBhY3RpdmVTdWIuZGVwc1RhaWwgPSBsaW5rO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGluay5wcmV2RGVwID0gYWN0aXZlU3ViLmRlcHNUYWlsO1xuICAgICAgICBhY3RpdmVTdWIuZGVwc1RhaWwubmV4dERlcCA9IGxpbms7XG4gICAgICAgIGFjdGl2ZVN1Yi5kZXBzVGFpbCA9IGxpbms7XG4gICAgICB9XG4gICAgICBhZGRTdWIobGluayk7XG4gICAgfSBlbHNlIGlmIChsaW5rLnZlcnNpb24gPT09IC0xKSB7XG4gICAgICBsaW5rLnZlcnNpb24gPSB0aGlzLnZlcnNpb247XG4gICAgICBpZiAobGluay5uZXh0RGVwKSB7XG4gICAgICAgIGNvbnN0IG5leHQgPSBsaW5rLm5leHREZXA7XG4gICAgICAgIG5leHQucHJldkRlcCA9IGxpbmsucHJldkRlcDtcbiAgICAgICAgaWYgKGxpbmsucHJldkRlcCkge1xuICAgICAgICAgIGxpbmsucHJldkRlcC5uZXh0RGVwID0gbmV4dDtcbiAgICAgICAgfVxuICAgICAgICBsaW5rLnByZXZEZXAgPSBhY3RpdmVTdWIuZGVwc1RhaWw7XG4gICAgICAgIGxpbmsubmV4dERlcCA9IHZvaWQgMDtcbiAgICAgICAgYWN0aXZlU3ViLmRlcHNUYWlsLm5leHREZXAgPSBsaW5rO1xuICAgICAgICBhY3RpdmVTdWIuZGVwc1RhaWwgPSBsaW5rO1xuICAgICAgICBpZiAoYWN0aXZlU3ViLmRlcHMgPT09IGxpbmspIHtcbiAgICAgICAgICBhY3RpdmVTdWIuZGVwcyA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgYWN0aXZlU3ViLm9uVHJhY2spIHtcbiAgICAgIGFjdGl2ZVN1Yi5vblRyYWNrKFxuICAgICAgICBleHRlbmQoXG4gICAgICAgICAge1xuICAgICAgICAgICAgZWZmZWN0OiBhY3RpdmVTdWJcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRlYnVnSW5mb1xuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gbGluaztcbiAgfVxuICB0cmlnZ2VyKGRlYnVnSW5mbykge1xuICAgIHRoaXMudmVyc2lvbisrO1xuICAgIGdsb2JhbFZlcnNpb24rKztcbiAgICB0aGlzLm5vdGlmeShkZWJ1Z0luZm8pO1xuICB9XG4gIG5vdGlmeShkZWJ1Z0luZm8pIHtcbiAgICBzdGFydEJhdGNoKCk7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgIGZvciAobGV0IGhlYWQgPSB0aGlzLnN1YnNIZWFkOyBoZWFkOyBoZWFkID0gaGVhZC5uZXh0U3ViKSB7XG4gICAgICAgICAgaWYgKGhlYWQuc3ViLm9uVHJpZ2dlciAmJiAhKGhlYWQuc3ViLmZsYWdzICYgOCkpIHtcbiAgICAgICAgICAgIGhlYWQuc3ViLm9uVHJpZ2dlcihcbiAgICAgICAgICAgICAgZXh0ZW5kKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGVmZmVjdDogaGVhZC5zdWJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlYnVnSW5mb1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgbGluayA9IHRoaXMuc3ViczsgbGluazsgbGluayA9IGxpbmsucHJldlN1Yikge1xuICAgICAgICBpZiAobGluay5zdWIubm90aWZ5KCkpIHtcbiAgICAgICAgICA7XG4gICAgICAgICAgbGluay5zdWIuZGVwLm5vdGlmeSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGVuZEJhdGNoKCk7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBhZGRTdWIobGluaykge1xuICBsaW5rLmRlcC5zYysrO1xuICBpZiAobGluay5zdWIuZmxhZ3MgJiA0KSB7XG4gICAgY29uc3QgY29tcHV0ZWQgPSBsaW5rLmRlcC5jb21wdXRlZDtcbiAgICBpZiAoY29tcHV0ZWQgJiYgIWxpbmsuZGVwLnN1YnMpIHtcbiAgICAgIGNvbXB1dGVkLmZsYWdzIHw9IDQgfCAxNjtcbiAgICAgIGZvciAobGV0IGwgPSBjb21wdXRlZC5kZXBzOyBsOyBsID0gbC5uZXh0RGVwKSB7XG4gICAgICAgIGFkZFN1YihsKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY3VycmVudFRhaWwgPSBsaW5rLmRlcC5zdWJzO1xuICAgIGlmIChjdXJyZW50VGFpbCAhPT0gbGluaykge1xuICAgICAgbGluay5wcmV2U3ViID0gY3VycmVudFRhaWw7XG4gICAgICBpZiAoY3VycmVudFRhaWwpIGN1cnJlbnRUYWlsLm5leHRTdWIgPSBsaW5rO1xuICAgIH1cbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBsaW5rLmRlcC5zdWJzSGVhZCA9PT0gdm9pZCAwKSB7XG4gICAgICBsaW5rLmRlcC5zdWJzSGVhZCA9IGxpbms7XG4gICAgfVxuICAgIGxpbmsuZGVwLnN1YnMgPSBsaW5rO1xuICB9XG59XG5jb25zdCB0YXJnZXRNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IElURVJBVEVfS0VZID0gU3ltYm9sKFxuICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gXCJPYmplY3QgaXRlcmF0ZVwiIDogXCJcIlxuKTtcbmNvbnN0IE1BUF9LRVlfSVRFUkFURV9LRVkgPSBTeW1ib2woXG4gICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBcIk1hcCBrZXlzIGl0ZXJhdGVcIiA6IFwiXCJcbik7XG5jb25zdCBBUlJBWV9JVEVSQVRFX0tFWSA9IFN5bWJvbChcbiAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IFwiQXJyYXkgaXRlcmF0ZVwiIDogXCJcIlxuKTtcbmZ1bmN0aW9uIHRyYWNrKHRhcmdldCwgdHlwZSwga2V5KSB7XG4gIGlmIChzaG91bGRUcmFjayAmJiBhY3RpdmVTdWIpIHtcbiAgICBsZXQgZGVwc01hcCA9IHRhcmdldE1hcC5nZXQodGFyZ2V0KTtcbiAgICBpZiAoIWRlcHNNYXApIHtcbiAgICAgIHRhcmdldE1hcC5zZXQodGFyZ2V0LCBkZXBzTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSk7XG4gICAgfVxuICAgIGxldCBkZXAgPSBkZXBzTWFwLmdldChrZXkpO1xuICAgIGlmICghZGVwKSB7XG4gICAgICBkZXBzTWFwLnNldChrZXksIGRlcCA9IG5ldyBEZXAoKSk7XG4gICAgICBkZXAubWFwID0gZGVwc01hcDtcbiAgICAgIGRlcC5rZXkgPSBrZXk7XG4gICAgfVxuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICBkZXAudHJhY2soe1xuICAgICAgICB0YXJnZXQsXG4gICAgICAgIHR5cGUsXG4gICAgICAgIGtleVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlcC50cmFjaygpO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gdHJpZ2dlcih0YXJnZXQsIHR5cGUsIGtleSwgbmV3VmFsdWUsIG9sZFZhbHVlLCBvbGRUYXJnZXQpIHtcbiAgY29uc3QgZGVwc01hcCA9IHRhcmdldE1hcC5nZXQodGFyZ2V0KTtcbiAgaWYgKCFkZXBzTWFwKSB7XG4gICAgZ2xvYmFsVmVyc2lvbisrO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBydW4gPSAoZGVwKSA9PiB7XG4gICAgaWYgKGRlcCkge1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgZGVwLnRyaWdnZXIoe1xuICAgICAgICAgIHRhcmdldCxcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIGtleSxcbiAgICAgICAgICBuZXdWYWx1ZSxcbiAgICAgICAgICBvbGRWYWx1ZSxcbiAgICAgICAgICBvbGRUYXJnZXRcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZXAudHJpZ2dlcigpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgc3RhcnRCYXRjaCgpO1xuICBpZiAodHlwZSA9PT0gXCJjbGVhclwiKSB7XG4gICAgZGVwc01hcC5mb3JFYWNoKHJ1bik7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgdGFyZ2V0SXNBcnJheSA9IGlzQXJyYXkodGFyZ2V0KTtcbiAgICBjb25zdCBpc0FycmF5SW5kZXggPSB0YXJnZXRJc0FycmF5ICYmIGlzSW50ZWdlcktleShrZXkpO1xuICAgIGlmICh0YXJnZXRJc0FycmF5ICYmIGtleSA9PT0gXCJsZW5ndGhcIikge1xuICAgICAgY29uc3QgbmV3TGVuZ3RoID0gTnVtYmVyKG5ld1ZhbHVlKTtcbiAgICAgIGRlcHNNYXAuZm9yRWFjaCgoZGVwLCBrZXkyKSA9PiB7XG4gICAgICAgIGlmIChrZXkyID09PSBcImxlbmd0aFwiIHx8IGtleTIgPT09IEFSUkFZX0lURVJBVEVfS0VZIHx8ICFpc1N5bWJvbChrZXkyKSAmJiBrZXkyID49IG5ld0xlbmd0aCkge1xuICAgICAgICAgIHJ1bihkZXApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGtleSAhPT0gdm9pZCAwIHx8IGRlcHNNYXAuaGFzKHZvaWQgMCkpIHtcbiAgICAgICAgcnVuKGRlcHNNYXAuZ2V0KGtleSkpO1xuICAgICAgfVxuICAgICAgaWYgKGlzQXJyYXlJbmRleCkge1xuICAgICAgICBydW4oZGVwc01hcC5nZXQoQVJSQVlfSVRFUkFURV9LRVkpKTtcbiAgICAgIH1cbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIFwiYWRkXCI6XG4gICAgICAgICAgaWYgKCF0YXJnZXRJc0FycmF5KSB7XG4gICAgICAgICAgICBydW4oZGVwc01hcC5nZXQoSVRFUkFURV9LRVkpKTtcbiAgICAgICAgICAgIGlmIChpc01hcCh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgIHJ1bihkZXBzTWFwLmdldChNQVBfS0VZX0lURVJBVEVfS0VZKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5SW5kZXgpIHtcbiAgICAgICAgICAgIHJ1bihkZXBzTWFwLmdldChcImxlbmd0aFwiKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiZGVsZXRlXCI6XG4gICAgICAgICAgaWYgKCF0YXJnZXRJc0FycmF5KSB7XG4gICAgICAgICAgICBydW4oZGVwc01hcC5nZXQoSVRFUkFURV9LRVkpKTtcbiAgICAgICAgICAgIGlmIChpc01hcCh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgIHJ1bihkZXBzTWFwLmdldChNQVBfS0VZX0lURVJBVEVfS0VZKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwic2V0XCI6XG4gICAgICAgICAgaWYgKGlzTWFwKHRhcmdldCkpIHtcbiAgICAgICAgICAgIHJ1bihkZXBzTWFwLmdldChJVEVSQVRFX0tFWSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZW5kQmF0Y2goKTtcbn1cbmZ1bmN0aW9uIGdldERlcEZyb21SZWFjdGl2ZShvYmplY3QsIGtleSkge1xuICBjb25zdCBkZXBNYXAgPSB0YXJnZXRNYXAuZ2V0KG9iamVjdCk7XG4gIHJldHVybiBkZXBNYXAgJiYgZGVwTWFwLmdldChrZXkpO1xufVxuXG5mdW5jdGlvbiByZWFjdGl2ZVJlYWRBcnJheShhcnJheSkge1xuICBjb25zdCByYXcgPSB0b1JhdyhhcnJheSk7XG4gIGlmIChyYXcgPT09IGFycmF5KSByZXR1cm4gcmF3O1xuICB0cmFjayhyYXcsIFwiaXRlcmF0ZVwiLCBBUlJBWV9JVEVSQVRFX0tFWSk7XG4gIHJldHVybiBpc1NoYWxsb3coYXJyYXkpID8gcmF3IDogcmF3Lm1hcCh0b1JlYWN0aXZlKTtcbn1cbmZ1bmN0aW9uIHNoYWxsb3dSZWFkQXJyYXkoYXJyKSB7XG4gIHRyYWNrKGFyciA9IHRvUmF3KGFyciksIFwiaXRlcmF0ZVwiLCBBUlJBWV9JVEVSQVRFX0tFWSk7XG4gIHJldHVybiBhcnI7XG59XG5jb25zdCBhcnJheUluc3RydW1lbnRhdGlvbnMgPSB7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgcmV0dXJuIGl0ZXJhdG9yKHRoaXMsIFN5bWJvbC5pdGVyYXRvciwgdG9SZWFjdGl2ZSk7XG4gIH0sXG4gIGNvbmNhdCguLi5hcmdzKSB7XG4gICAgcmV0dXJuIHJlYWN0aXZlUmVhZEFycmF5KHRoaXMpLmNvbmNhdChcbiAgICAgIC4uLmFyZ3MubWFwKCh4KSA9PiBpc0FycmF5KHgpID8gcmVhY3RpdmVSZWFkQXJyYXkoeCkgOiB4KVxuICAgICk7XG4gIH0sXG4gIGVudHJpZXMoKSB7XG4gICAgcmV0dXJuIGl0ZXJhdG9yKHRoaXMsIFwiZW50cmllc1wiLCAodmFsdWUpID0+IHtcbiAgICAgIHZhbHVlWzFdID0gdG9SZWFjdGl2ZSh2YWx1ZVsxXSk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSk7XG4gIH0sXG4gIGV2ZXJ5KGZuLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIGFwcGx5KHRoaXMsIFwiZXZlcnlcIiwgZm4sIHRoaXNBcmcsIHZvaWQgMCwgYXJndW1lbnRzKTtcbiAgfSxcbiAgZmlsdGVyKGZuLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIGFwcGx5KHRoaXMsIFwiZmlsdGVyXCIsIGZuLCB0aGlzQXJnLCAodikgPT4gdi5tYXAodG9SZWFjdGl2ZSksIGFyZ3VtZW50cyk7XG4gIH0sXG4gIGZpbmQoZm4sIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gYXBwbHkodGhpcywgXCJmaW5kXCIsIGZuLCB0aGlzQXJnLCB0b1JlYWN0aXZlLCBhcmd1bWVudHMpO1xuICB9LFxuICBmaW5kSW5kZXgoZm4sIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gYXBwbHkodGhpcywgXCJmaW5kSW5kZXhcIiwgZm4sIHRoaXNBcmcsIHZvaWQgMCwgYXJndW1lbnRzKTtcbiAgfSxcbiAgZmluZExhc3QoZm4sIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gYXBwbHkodGhpcywgXCJmaW5kTGFzdFwiLCBmbiwgdGhpc0FyZywgdG9SZWFjdGl2ZSwgYXJndW1lbnRzKTtcbiAgfSxcbiAgZmluZExhc3RJbmRleChmbiwgdGhpc0FyZykge1xuICAgIHJldHVybiBhcHBseSh0aGlzLCBcImZpbmRMYXN0SW5kZXhcIiwgZm4sIHRoaXNBcmcsIHZvaWQgMCwgYXJndW1lbnRzKTtcbiAgfSxcbiAgLy8gZmxhdCwgZmxhdE1hcCBjb3VsZCBiZW5lZml0IGZyb20gQVJSQVlfSVRFUkFURSBidXQgYXJlIG5vdCBzdHJhaWdodC1mb3J3YXJkIHRvIGltcGxlbWVudFxuICBmb3JFYWNoKGZuLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIGFwcGx5KHRoaXMsIFwiZm9yRWFjaFwiLCBmbiwgdGhpc0FyZywgdm9pZCAwLCBhcmd1bWVudHMpO1xuICB9LFxuICBpbmNsdWRlcyguLi5hcmdzKSB7XG4gICAgcmV0dXJuIHNlYXJjaFByb3h5KHRoaXMsIFwiaW5jbHVkZXNcIiwgYXJncyk7XG4gIH0sXG4gIGluZGV4T2YoLi4uYXJncykge1xuICAgIHJldHVybiBzZWFyY2hQcm94eSh0aGlzLCBcImluZGV4T2ZcIiwgYXJncyk7XG4gIH0sXG4gIGpvaW4oc2VwYXJhdG9yKSB7XG4gICAgcmV0dXJuIHJlYWN0aXZlUmVhZEFycmF5KHRoaXMpLmpvaW4oc2VwYXJhdG9yKTtcbiAgfSxcbiAgLy8ga2V5cygpIGl0ZXJhdG9yIG9ubHkgcmVhZHMgYGxlbmd0aGAsIG5vIG9wdGltaXNhdGlvbiByZXF1aXJlZFxuICBsYXN0SW5kZXhPZiguLi5hcmdzKSB7XG4gICAgcmV0dXJuIHNlYXJjaFByb3h5KHRoaXMsIFwibGFzdEluZGV4T2ZcIiwgYXJncyk7XG4gIH0sXG4gIG1hcChmbiwgdGhpc0FyZykge1xuICAgIHJldHVybiBhcHBseSh0aGlzLCBcIm1hcFwiLCBmbiwgdGhpc0FyZywgdm9pZCAwLCBhcmd1bWVudHMpO1xuICB9LFxuICBwb3AoKSB7XG4gICAgcmV0dXJuIG5vVHJhY2tpbmcodGhpcywgXCJwb3BcIik7XG4gIH0sXG4gIHB1c2goLi4uYXJncykge1xuICAgIHJldHVybiBub1RyYWNraW5nKHRoaXMsIFwicHVzaFwiLCBhcmdzKTtcbiAgfSxcbiAgcmVkdWNlKGZuLCAuLi5hcmdzKSB7XG4gICAgcmV0dXJuIHJlZHVjZSh0aGlzLCBcInJlZHVjZVwiLCBmbiwgYXJncyk7XG4gIH0sXG4gIHJlZHVjZVJpZ2h0KGZuLCAuLi5hcmdzKSB7XG4gICAgcmV0dXJuIHJlZHVjZSh0aGlzLCBcInJlZHVjZVJpZ2h0XCIsIGZuLCBhcmdzKTtcbiAgfSxcbiAgc2hpZnQoKSB7XG4gICAgcmV0dXJuIG5vVHJhY2tpbmcodGhpcywgXCJzaGlmdFwiKTtcbiAgfSxcbiAgLy8gc2xpY2UgY291bGQgdXNlIEFSUkFZX0lURVJBVEUgYnV0IGFsc28gc2VlbXMgdG8gYmVnIGZvciByYW5nZSB0cmFja2luZ1xuICBzb21lKGZuLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIGFwcGx5KHRoaXMsIFwic29tZVwiLCBmbiwgdGhpc0FyZywgdm9pZCAwLCBhcmd1bWVudHMpO1xuICB9LFxuICBzcGxpY2UoLi4uYXJncykge1xuICAgIHJldHVybiBub1RyYWNraW5nKHRoaXMsIFwic3BsaWNlXCIsIGFyZ3MpO1xuICB9LFxuICB0b1JldmVyc2VkKCkge1xuICAgIHJldHVybiByZWFjdGl2ZVJlYWRBcnJheSh0aGlzKS50b1JldmVyc2VkKCk7XG4gIH0sXG4gIHRvU29ydGVkKGNvbXBhcmVyKSB7XG4gICAgcmV0dXJuIHJlYWN0aXZlUmVhZEFycmF5KHRoaXMpLnRvU29ydGVkKGNvbXBhcmVyKTtcbiAgfSxcbiAgdG9TcGxpY2VkKC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gcmVhY3RpdmVSZWFkQXJyYXkodGhpcykudG9TcGxpY2VkKC4uLmFyZ3MpO1xuICB9LFxuICB1bnNoaWZ0KC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gbm9UcmFja2luZyh0aGlzLCBcInVuc2hpZnRcIiwgYXJncyk7XG4gIH0sXG4gIHZhbHVlcygpIHtcbiAgICByZXR1cm4gaXRlcmF0b3IodGhpcywgXCJ2YWx1ZXNcIiwgdG9SZWFjdGl2ZSk7XG4gIH1cbn07XG5mdW5jdGlvbiBpdGVyYXRvcihzZWxmLCBtZXRob2QsIHdyYXBWYWx1ZSkge1xuICBjb25zdCBhcnIgPSBzaGFsbG93UmVhZEFycmF5KHNlbGYpO1xuICBjb25zdCBpdGVyID0gYXJyW21ldGhvZF0oKTtcbiAgaWYgKGFyciAhPT0gc2VsZiAmJiAhaXNTaGFsbG93KHNlbGYpKSB7XG4gICAgaXRlci5fbmV4dCA9IGl0ZXIubmV4dDtcbiAgICBpdGVyLm5leHQgPSAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBpdGVyLl9uZXh0KCk7XG4gICAgICBpZiAocmVzdWx0LnZhbHVlKSB7XG4gICAgICAgIHJlc3VsdC52YWx1ZSA9IHdyYXBWYWx1ZShyZXN1bHQudmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9XG4gIHJldHVybiBpdGVyO1xufVxuY29uc3QgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTtcbmZ1bmN0aW9uIGFwcGx5KHNlbGYsIG1ldGhvZCwgZm4sIHRoaXNBcmcsIHdyYXBwZWRSZXRGbiwgYXJncykge1xuICBjb25zdCBhcnIgPSBzaGFsbG93UmVhZEFycmF5KHNlbGYpO1xuICBjb25zdCBuZWVkc1dyYXAgPSBhcnIgIT09IHNlbGYgJiYgIWlzU2hhbGxvdyhzZWxmKTtcbiAgY29uc3QgbWV0aG9kRm4gPSBhcnJbbWV0aG9kXTtcbiAgaWYgKG1ldGhvZEZuICE9PSBhcnJheVByb3RvW21ldGhvZF0pIHtcbiAgICBjb25zdCByZXN1bHQyID0gbWV0aG9kRm4uYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgcmV0dXJuIG5lZWRzV3JhcCA/IHRvUmVhY3RpdmUocmVzdWx0MikgOiByZXN1bHQyO1xuICB9XG4gIGxldCB3cmFwcGVkRm4gPSBmbjtcbiAgaWYgKGFyciAhPT0gc2VsZikge1xuICAgIGlmIChuZWVkc1dyYXApIHtcbiAgICAgIHdyYXBwZWRGbiA9IGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIHRvUmVhY3RpdmUoaXRlbSksIGluZGV4LCBzZWxmKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChmbi5sZW5ndGggPiAyKSB7XG4gICAgICB3cmFwcGVkRm4gPSBmdW5jdGlvbihpdGVtLCBpbmRleCkge1xuICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBpdGVtLCBpbmRleCwgc2VsZik7XG4gICAgICB9O1xuICAgIH1cbiAgfVxuICBjb25zdCByZXN1bHQgPSBtZXRob2RGbi5jYWxsKGFyciwgd3JhcHBlZEZuLCB0aGlzQXJnKTtcbiAgcmV0dXJuIG5lZWRzV3JhcCAmJiB3cmFwcGVkUmV0Rm4gPyB3cmFwcGVkUmV0Rm4ocmVzdWx0KSA6IHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHJlZHVjZShzZWxmLCBtZXRob2QsIGZuLCBhcmdzKSB7XG4gIGNvbnN0IGFyciA9IHNoYWxsb3dSZWFkQXJyYXkoc2VsZik7XG4gIGxldCB3cmFwcGVkRm4gPSBmbjtcbiAgaWYgKGFyciAhPT0gc2VsZikge1xuICAgIGlmICghaXNTaGFsbG93KHNlbGYpKSB7XG4gICAgICB3cmFwcGVkRm4gPSBmdW5jdGlvbihhY2MsIGl0ZW0sIGluZGV4KSB7XG4gICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGFjYywgdG9SZWFjdGl2ZShpdGVtKSwgaW5kZXgsIHNlbGYpO1xuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGZuLmxlbmd0aCA+IDMpIHtcbiAgICAgIHdyYXBwZWRGbiA9IGZ1bmN0aW9uKGFjYywgaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgYWNjLCBpdGVtLCBpbmRleCwgc2VsZik7XG4gICAgICB9O1xuICAgIH1cbiAgfVxuICByZXR1cm4gYXJyW21ldGhvZF0od3JhcHBlZEZuLCAuLi5hcmdzKTtcbn1cbmZ1bmN0aW9uIHNlYXJjaFByb3h5KHNlbGYsIG1ldGhvZCwgYXJncykge1xuICBjb25zdCBhcnIgPSB0b1JhdyhzZWxmKTtcbiAgdHJhY2soYXJyLCBcIml0ZXJhdGVcIiwgQVJSQVlfSVRFUkFURV9LRVkpO1xuICBjb25zdCByZXMgPSBhcnJbbWV0aG9kXSguLi5hcmdzKTtcbiAgaWYgKChyZXMgPT09IC0xIHx8IHJlcyA9PT0gZmFsc2UpICYmIGlzUHJveHkoYXJnc1swXSkpIHtcbiAgICBhcmdzWzBdID0gdG9SYXcoYXJnc1swXSk7XG4gICAgcmV0dXJuIGFyclttZXRob2RdKC4uLmFyZ3MpO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiBub1RyYWNraW5nKHNlbGYsIG1ldGhvZCwgYXJncyA9IFtdKSB7XG4gIHBhdXNlVHJhY2tpbmcoKTtcbiAgc3RhcnRCYXRjaCgpO1xuICBjb25zdCByZXMgPSB0b1JhdyhzZWxmKVttZXRob2RdLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICBlbmRCYXRjaCgpO1xuICByZXNldFRyYWNraW5nKCk7XG4gIHJldHVybiByZXM7XG59XG5cbmNvbnN0IGlzTm9uVHJhY2thYmxlS2V5cyA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKGBfX3Byb3RvX18sX192X2lzUmVmLF9faXNWdWVgKTtcbmNvbnN0IGJ1aWx0SW5TeW1ib2xzID0gbmV3IFNldChcbiAgLyogQF9fUFVSRV9fICovIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKFN5bWJvbCkuZmlsdGVyKChrZXkpID0+IGtleSAhPT0gXCJhcmd1bWVudHNcIiAmJiBrZXkgIT09IFwiY2FsbGVyXCIpLm1hcCgoa2V5KSA9PiBTeW1ib2xba2V5XSkuZmlsdGVyKGlzU3ltYm9sKVxuKTtcbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KGtleSkge1xuICBpZiAoIWlzU3ltYm9sKGtleSkpIGtleSA9IFN0cmluZyhrZXkpO1xuICBjb25zdCBvYmogPSB0b1Jhdyh0aGlzKTtcbiAgdHJhY2sob2JqLCBcImhhc1wiLCBrZXkpO1xuICByZXR1cm4gb2JqLmhhc093blByb3BlcnR5KGtleSk7XG59XG5jbGFzcyBCYXNlUmVhY3RpdmVIYW5kbGVyIHtcbiAgY29uc3RydWN0b3IoX2lzUmVhZG9ubHkgPSBmYWxzZSwgX2lzU2hhbGxvdyA9IGZhbHNlKSB7XG4gICAgdGhpcy5faXNSZWFkb25seSA9IF9pc1JlYWRvbmx5O1xuICAgIHRoaXMuX2lzU2hhbGxvdyA9IF9pc1NoYWxsb3c7XG4gIH1cbiAgZ2V0KHRhcmdldCwga2V5LCByZWNlaXZlcikge1xuICAgIGlmIChrZXkgPT09IFwiX192X3NraXBcIikgcmV0dXJuIHRhcmdldFtcIl9fdl9za2lwXCJdO1xuICAgIGNvbnN0IGlzUmVhZG9ubHkyID0gdGhpcy5faXNSZWFkb25seSwgaXNTaGFsbG93MiA9IHRoaXMuX2lzU2hhbGxvdztcbiAgICBpZiAoa2V5ID09PSBcIl9fdl9pc1JlYWN0aXZlXCIpIHtcbiAgICAgIHJldHVybiAhaXNSZWFkb25seTI7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09IFwiX192X2lzUmVhZG9ubHlcIikge1xuICAgICAgcmV0dXJuIGlzUmVhZG9ubHkyO1xuICAgIH0gZWxzZSBpZiAoa2V5ID09PSBcIl9fdl9pc1NoYWxsb3dcIikge1xuICAgICAgcmV0dXJuIGlzU2hhbGxvdzI7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09IFwiX192X3Jhd1wiKSB7XG4gICAgICBpZiAocmVjZWl2ZXIgPT09IChpc1JlYWRvbmx5MiA/IGlzU2hhbGxvdzIgPyBzaGFsbG93UmVhZG9ubHlNYXAgOiByZWFkb25seU1hcCA6IGlzU2hhbGxvdzIgPyBzaGFsbG93UmVhY3RpdmVNYXAgOiByZWFjdGl2ZU1hcCkuZ2V0KHRhcmdldCkgfHwgLy8gcmVjZWl2ZXIgaXMgbm90IHRoZSByZWFjdGl2ZSBwcm94eSwgYnV0IGhhcyB0aGUgc2FtZSBwcm90b3R5cGVcbiAgICAgIC8vIHRoaXMgbWVhbnMgdGhlIHJlY2VpdmVyIGlzIGEgdXNlciBwcm94eSBvZiB0aGUgcmVhY3RpdmUgcHJveHlcbiAgICAgIE9iamVjdC5nZXRQcm90b3R5cGVPZih0YXJnZXQpID09PSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocmVjZWl2ZXIpKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRhcmdldElzQXJyYXkgPSBpc0FycmF5KHRhcmdldCk7XG4gICAgaWYgKCFpc1JlYWRvbmx5Mikge1xuICAgICAgbGV0IGZuO1xuICAgICAgaWYgKHRhcmdldElzQXJyYXkgJiYgKGZuID0gYXJyYXlJbnN0cnVtZW50YXRpb25zW2tleV0pKSB7XG4gICAgICAgIHJldHVybiBmbjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXkgPT09IFwiaGFzT3duUHJvcGVydHlcIikge1xuICAgICAgICByZXR1cm4gaGFzT3duUHJvcGVydHk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IFJlZmxlY3QuZ2V0KFxuICAgICAgdGFyZ2V0LFxuICAgICAga2V5LFxuICAgICAgLy8gaWYgdGhpcyBpcyBhIHByb3h5IHdyYXBwaW5nIGEgcmVmLCByZXR1cm4gbWV0aG9kcyB1c2luZyB0aGUgcmF3IHJlZlxuICAgICAgLy8gYXMgcmVjZWl2ZXIgc28gdGhhdCB3ZSBkb24ndCBoYXZlIHRvIGNhbGwgYHRvUmF3YCBvbiB0aGUgcmVmIGluIGFsbFxuICAgICAgLy8gaXRzIGNsYXNzIG1ldGhvZHNcbiAgICAgIGlzUmVmKHRhcmdldCkgPyB0YXJnZXQgOiByZWNlaXZlclxuICAgICk7XG4gICAgaWYgKGlzU3ltYm9sKGtleSkgPyBidWlsdEluU3ltYm9scy5oYXMoa2V5KSA6IGlzTm9uVHJhY2thYmxlS2V5cyhrZXkpKSB7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBpZiAoIWlzUmVhZG9ubHkyKSB7XG4gICAgICB0cmFjayh0YXJnZXQsIFwiZ2V0XCIsIGtleSk7XG4gICAgfVxuICAgIGlmIChpc1NoYWxsb3cyKSB7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBpZiAoaXNSZWYocmVzKSkge1xuICAgICAgcmV0dXJuIHRhcmdldElzQXJyYXkgJiYgaXNJbnRlZ2VyS2V5KGtleSkgPyByZXMgOiByZXMudmFsdWU7XG4gICAgfVxuICAgIGlmIChpc09iamVjdChyZXMpKSB7XG4gICAgICByZXR1cm4gaXNSZWFkb25seTIgPyByZWFkb25seShyZXMpIDogcmVhY3RpdmUocmVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxufVxuY2xhc3MgTXV0YWJsZVJlYWN0aXZlSGFuZGxlciBleHRlbmRzIEJhc2VSZWFjdGl2ZUhhbmRsZXIge1xuICBjb25zdHJ1Y3Rvcihpc1NoYWxsb3cyID0gZmFsc2UpIHtcbiAgICBzdXBlcihmYWxzZSwgaXNTaGFsbG93Mik7XG4gIH1cbiAgc2V0KHRhcmdldCwga2V5LCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgICBsZXQgb2xkVmFsdWUgPSB0YXJnZXRba2V5XTtcbiAgICBpZiAoIXRoaXMuX2lzU2hhbGxvdykge1xuICAgICAgY29uc3QgaXNPbGRWYWx1ZVJlYWRvbmx5ID0gaXNSZWFkb25seShvbGRWYWx1ZSk7XG4gICAgICBpZiAoIWlzU2hhbGxvdyh2YWx1ZSkgJiYgIWlzUmVhZG9ubHkodmFsdWUpKSB7XG4gICAgICAgIG9sZFZhbHVlID0gdG9SYXcob2xkVmFsdWUpO1xuICAgICAgICB2YWx1ZSA9IHRvUmF3KHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmICghaXNBcnJheSh0YXJnZXQpICYmIGlzUmVmKG9sZFZhbHVlKSAmJiAhaXNSZWYodmFsdWUpKSB7XG4gICAgICAgIGlmIChpc09sZFZhbHVlUmVhZG9ubHkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb2xkVmFsdWUudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBoYWRLZXkgPSBpc0FycmF5KHRhcmdldCkgJiYgaXNJbnRlZ2VyS2V5KGtleSkgPyBOdW1iZXIoa2V5KSA8IHRhcmdldC5sZW5ndGggOiBoYXNPd24odGFyZ2V0LCBrZXkpO1xuICAgIGNvbnN0IHJlc3VsdCA9IFJlZmxlY3Quc2V0KFxuICAgICAgdGFyZ2V0LFxuICAgICAga2V5LFxuICAgICAgdmFsdWUsXG4gICAgICBpc1JlZih0YXJnZXQpID8gdGFyZ2V0IDogcmVjZWl2ZXJcbiAgICApO1xuICAgIGlmICh0YXJnZXQgPT09IHRvUmF3KHJlY2VpdmVyKSkge1xuICAgICAgaWYgKCFoYWRLZXkpIHtcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiYWRkXCIsIGtleSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChoYXNDaGFuZ2VkKHZhbHVlLCBvbGRWYWx1ZSkpIHtcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwic2V0XCIsIGtleSwgdmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBkZWxldGVQcm9wZXJ0eSh0YXJnZXQsIGtleSkge1xuICAgIGNvbnN0IGhhZEtleSA9IGhhc093bih0YXJnZXQsIGtleSk7XG4gICAgY29uc3Qgb2xkVmFsdWUgPSB0YXJnZXRba2V5XTtcbiAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KHRhcmdldCwga2V5KTtcbiAgICBpZiAocmVzdWx0ICYmIGhhZEtleSkge1xuICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiZGVsZXRlXCIsIGtleSwgdm9pZCAwLCBvbGRWYWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgaGFzKHRhcmdldCwga2V5KSB7XG4gICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5oYXModGFyZ2V0LCBrZXkpO1xuICAgIGlmICghaXNTeW1ib2woa2V5KSB8fCAhYnVpbHRJblN5bWJvbHMuaGFzKGtleSkpIHtcbiAgICAgIHRyYWNrKHRhcmdldCwgXCJoYXNcIiwga2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBvd25LZXlzKHRhcmdldCkge1xuICAgIHRyYWNrKFxuICAgICAgdGFyZ2V0LFxuICAgICAgXCJpdGVyYXRlXCIsXG4gICAgICBpc0FycmF5KHRhcmdldCkgPyBcImxlbmd0aFwiIDogSVRFUkFURV9LRVlcbiAgICApO1xuICAgIHJldHVybiBSZWZsZWN0Lm93bktleXModGFyZ2V0KTtcbiAgfVxufVxuY2xhc3MgUmVhZG9ubHlSZWFjdGl2ZUhhbmRsZXIgZXh0ZW5kcyBCYXNlUmVhY3RpdmVIYW5kbGVyIHtcbiAgY29uc3RydWN0b3IoaXNTaGFsbG93MiA9IGZhbHNlKSB7XG4gICAgc3VwZXIodHJ1ZSwgaXNTaGFsbG93Mik7XG4gIH1cbiAgc2V0KHRhcmdldCwga2V5KSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIHdhcm4oXG4gICAgICAgIGBTZXQgb3BlcmF0aW9uIG9uIGtleSBcIiR7U3RyaW5nKGtleSl9XCIgZmFpbGVkOiB0YXJnZXQgaXMgcmVhZG9ubHkuYCxcbiAgICAgICAgdGFyZ2V0XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBkZWxldGVQcm9wZXJ0eSh0YXJnZXQsIGtleSkge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICB3YXJuKFxuICAgICAgICBgRGVsZXRlIG9wZXJhdGlvbiBvbiBrZXkgXCIke1N0cmluZyhrZXkpfVwiIGZhaWxlZDogdGFyZ2V0IGlzIHJlYWRvbmx5LmAsXG4gICAgICAgIHRhcmdldFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbmNvbnN0IG11dGFibGVIYW5kbGVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTXV0YWJsZVJlYWN0aXZlSGFuZGxlcigpO1xuY29uc3QgcmVhZG9ubHlIYW5kbGVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgUmVhZG9ubHlSZWFjdGl2ZUhhbmRsZXIoKTtcbmNvbnN0IHNoYWxsb3dSZWFjdGl2ZUhhbmRsZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBNdXRhYmxlUmVhY3RpdmVIYW5kbGVyKHRydWUpO1xuY29uc3Qgc2hhbGxvd1JlYWRvbmx5SGFuZGxlcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFJlYWRvbmx5UmVhY3RpdmVIYW5kbGVyKHRydWUpO1xuXG5jb25zdCB0b1NoYWxsb3cgPSAodmFsdWUpID0+IHZhbHVlO1xuY29uc3QgZ2V0UHJvdG8gPSAodikgPT4gUmVmbGVjdC5nZXRQcm90b3R5cGVPZih2KTtcbmZ1bmN0aW9uIGNyZWF0ZUl0ZXJhYmxlTWV0aG9kKG1ldGhvZCwgaXNSZWFkb25seTIsIGlzU2hhbGxvdzIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgICBjb25zdCB0YXJnZXQgPSB0aGlzW1wiX192X3Jhd1wiXTtcbiAgICBjb25zdCByYXdUYXJnZXQgPSB0b1Jhdyh0YXJnZXQpO1xuICAgIGNvbnN0IHRhcmdldElzTWFwID0gaXNNYXAocmF3VGFyZ2V0KTtcbiAgICBjb25zdCBpc1BhaXIgPSBtZXRob2QgPT09IFwiZW50cmllc1wiIHx8IG1ldGhvZCA9PT0gU3ltYm9sLml0ZXJhdG9yICYmIHRhcmdldElzTWFwO1xuICAgIGNvbnN0IGlzS2V5T25seSA9IG1ldGhvZCA9PT0gXCJrZXlzXCIgJiYgdGFyZ2V0SXNNYXA7XG4gICAgY29uc3QgaW5uZXJJdGVyYXRvciA9IHRhcmdldFttZXRob2RdKC4uLmFyZ3MpO1xuICAgIGNvbnN0IHdyYXAgPSBpc1NoYWxsb3cyID8gdG9TaGFsbG93IDogaXNSZWFkb25seTIgPyB0b1JlYWRvbmx5IDogdG9SZWFjdGl2ZTtcbiAgICAhaXNSZWFkb25seTIgJiYgdHJhY2soXG4gICAgICByYXdUYXJnZXQsXG4gICAgICBcIml0ZXJhdGVcIixcbiAgICAgIGlzS2V5T25seSA/IE1BUF9LRVlfSVRFUkFURV9LRVkgOiBJVEVSQVRFX0tFWVxuICAgICk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIGl0ZXJhdG9yIHByb3RvY29sXG4gICAgICBuZXh0KCkge1xuICAgICAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBpbm5lckl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgcmV0dXJuIGRvbmUgPyB7IHZhbHVlLCBkb25lIH0gOiB7XG4gICAgICAgICAgdmFsdWU6IGlzUGFpciA/IFt3cmFwKHZhbHVlWzBdKSwgd3JhcCh2YWx1ZVsxXSldIDogd3JhcCh2YWx1ZSksXG4gICAgICAgICAgZG9uZVxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIC8vIGl0ZXJhYmxlIHByb3RvY29sXG4gICAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlYWRvbmx5TWV0aG9kKHR5cGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgY29uc3Qga2V5ID0gYXJnc1swXSA/IGBvbiBrZXkgXCIke2FyZ3NbMF19XCIgYCA6IGBgO1xuICAgICAgd2FybihcbiAgICAgICAgYCR7Y2FwaXRhbGl6ZSh0eXBlKX0gb3BlcmF0aW9uICR7a2V5fWZhaWxlZDogdGFyZ2V0IGlzIHJlYWRvbmx5LmAsXG4gICAgICAgIHRvUmF3KHRoaXMpXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZSA9PT0gXCJkZWxldGVcIiA/IGZhbHNlIDogdHlwZSA9PT0gXCJjbGVhclwiID8gdm9pZCAwIDogdGhpcztcbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUluc3RydW1lbnRhdGlvbnMocmVhZG9ubHksIHNoYWxsb3cpIHtcbiAgY29uc3QgaW5zdHJ1bWVudGF0aW9ucyA9IHtcbiAgICBnZXQoa2V5KSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSB0aGlzW1wiX192X3Jhd1wiXTtcbiAgICAgIGNvbnN0IHJhd1RhcmdldCA9IHRvUmF3KHRhcmdldCk7XG4gICAgICBjb25zdCByYXdLZXkgPSB0b1JhdyhrZXkpO1xuICAgICAgaWYgKCFyZWFkb25seSkge1xuICAgICAgICBpZiAoaGFzQ2hhbmdlZChrZXksIHJhd0tleSkpIHtcbiAgICAgICAgICB0cmFjayhyYXdUYXJnZXQsIFwiZ2V0XCIsIGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJhY2socmF3VGFyZ2V0LCBcImdldFwiLCByYXdLZXkpO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBoYXMgfSA9IGdldFByb3RvKHJhd1RhcmdldCk7XG4gICAgICBjb25zdCB3cmFwID0gc2hhbGxvdyA/IHRvU2hhbGxvdyA6IHJlYWRvbmx5ID8gdG9SZWFkb25seSA6IHRvUmVhY3RpdmU7XG4gICAgICBpZiAoaGFzLmNhbGwocmF3VGFyZ2V0LCBrZXkpKSB7XG4gICAgICAgIHJldHVybiB3cmFwKHRhcmdldC5nZXQoa2V5KSk7XG4gICAgICB9IGVsc2UgaWYgKGhhcy5jYWxsKHJhd1RhcmdldCwgcmF3S2V5KSkge1xuICAgICAgICByZXR1cm4gd3JhcCh0YXJnZXQuZ2V0KHJhd0tleSkpO1xuICAgICAgfSBlbHNlIGlmICh0YXJnZXQgIT09IHJhd1RhcmdldCkge1xuICAgICAgICB0YXJnZXQuZ2V0KGtleSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXNbXCJfX3ZfcmF3XCJdO1xuICAgICAgIXJlYWRvbmx5ICYmIHRyYWNrKHRvUmF3KHRhcmdldCksIFwiaXRlcmF0ZVwiLCBJVEVSQVRFX0tFWSk7XG4gICAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBcInNpemVcIiwgdGFyZ2V0KTtcbiAgICB9LFxuICAgIGhhcyhrZXkpIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXNbXCJfX3ZfcmF3XCJdO1xuICAgICAgY29uc3QgcmF3VGFyZ2V0ID0gdG9SYXcodGFyZ2V0KTtcbiAgICAgIGNvbnN0IHJhd0tleSA9IHRvUmF3KGtleSk7XG4gICAgICBpZiAoIXJlYWRvbmx5KSB7XG4gICAgICAgIGlmIChoYXNDaGFuZ2VkKGtleSwgcmF3S2V5KSkge1xuICAgICAgICAgIHRyYWNrKHJhd1RhcmdldCwgXCJoYXNcIiwga2V5KTtcbiAgICAgICAgfVxuICAgICAgICB0cmFjayhyYXdUYXJnZXQsIFwiaGFzXCIsIHJhd0tleSk7XG4gICAgICB9XG4gICAgICByZXR1cm4ga2V5ID09PSByYXdLZXkgPyB0YXJnZXQuaGFzKGtleSkgOiB0YXJnZXQuaGFzKGtleSkgfHwgdGFyZ2V0LmhhcyhyYXdLZXkpO1xuICAgIH0sXG4gICAgZm9yRWFjaChjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgY29uc3Qgb2JzZXJ2ZWQgPSB0aGlzO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gb2JzZXJ2ZWRbXCJfX3ZfcmF3XCJdO1xuICAgICAgY29uc3QgcmF3VGFyZ2V0ID0gdG9SYXcodGFyZ2V0KTtcbiAgICAgIGNvbnN0IHdyYXAgPSBzaGFsbG93ID8gdG9TaGFsbG93IDogcmVhZG9ubHkgPyB0b1JlYWRvbmx5IDogdG9SZWFjdGl2ZTtcbiAgICAgICFyZWFkb25seSAmJiB0cmFjayhyYXdUYXJnZXQsIFwiaXRlcmF0ZVwiLCBJVEVSQVRFX0tFWSk7XG4gICAgICByZXR1cm4gdGFyZ2V0LmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgd3JhcCh2YWx1ZSksIHdyYXAoa2V5KSwgb2JzZXJ2ZWQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuICBleHRlbmQoXG4gICAgaW5zdHJ1bWVudGF0aW9ucyxcbiAgICByZWFkb25seSA/IHtcbiAgICAgIGFkZDogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJhZGRcIiksXG4gICAgICBzZXQ6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwic2V0XCIpLFxuICAgICAgZGVsZXRlOiBjcmVhdGVSZWFkb25seU1ldGhvZChcImRlbGV0ZVwiKSxcbiAgICAgIGNsZWFyOiBjcmVhdGVSZWFkb25seU1ldGhvZChcImNsZWFyXCIpXG4gICAgfSA6IHtcbiAgICAgIGFkZCh2YWx1ZSkge1xuICAgICAgICBpZiAoIXNoYWxsb3cgJiYgIWlzU2hhbGxvdyh2YWx1ZSkgJiYgIWlzUmVhZG9ubHkodmFsdWUpKSB7XG4gICAgICAgICAgdmFsdWUgPSB0b1Jhdyh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gdG9SYXcodGhpcyk7XG4gICAgICAgIGNvbnN0IHByb3RvID0gZ2V0UHJvdG8odGFyZ2V0KTtcbiAgICAgICAgY29uc3QgaGFkS2V5ID0gcHJvdG8uaGFzLmNhbGwodGFyZ2V0LCB2YWx1ZSk7XG4gICAgICAgIGlmICghaGFkS2V5KSB7XG4gICAgICAgICAgdGFyZ2V0LmFkZCh2YWx1ZSk7XG4gICAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiYWRkXCIsIHZhbHVlLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKCFzaGFsbG93ICYmICFpc1NoYWxsb3codmFsdWUpICYmICFpc1JlYWRvbmx5KHZhbHVlKSkge1xuICAgICAgICAgIHZhbHVlID0gdG9SYXcodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHRvUmF3KHRoaXMpO1xuICAgICAgICBjb25zdCB7IGhhcywgZ2V0IH0gPSBnZXRQcm90byh0YXJnZXQpO1xuICAgICAgICBsZXQgaGFkS2V5ID0gaGFzLmNhbGwodGFyZ2V0LCBrZXkpO1xuICAgICAgICBpZiAoIWhhZEtleSkge1xuICAgICAgICAgIGtleSA9IHRvUmF3KGtleSk7XG4gICAgICAgICAgaGFkS2V5ID0gaGFzLmNhbGwodGFyZ2V0LCBrZXkpO1xuICAgICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBjaGVja0lkZW50aXR5S2V5cyh0YXJnZXQsIGhhcywga2V5KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IGdldC5jYWxsKHRhcmdldCwga2V5KTtcbiAgICAgICAgdGFyZ2V0LnNldChrZXksIHZhbHVlKTtcbiAgICAgICAgaWYgKCFoYWRLZXkpIHtcbiAgICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJhZGRcIiwga2V5LCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaGFzQ2hhbmdlZCh2YWx1ZSwgb2xkVmFsdWUpKSB7XG4gICAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwic2V0XCIsIGtleSwgdmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICBkZWxldGUoa2V5KSB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHRvUmF3KHRoaXMpO1xuICAgICAgICBjb25zdCB7IGhhcywgZ2V0IH0gPSBnZXRQcm90byh0YXJnZXQpO1xuICAgICAgICBsZXQgaGFkS2V5ID0gaGFzLmNhbGwodGFyZ2V0LCBrZXkpO1xuICAgICAgICBpZiAoIWhhZEtleSkge1xuICAgICAgICAgIGtleSA9IHRvUmF3KGtleSk7XG4gICAgICAgICAgaGFkS2V5ID0gaGFzLmNhbGwodGFyZ2V0LCBrZXkpO1xuICAgICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBjaGVja0lkZW50aXR5S2V5cyh0YXJnZXQsIGhhcywga2V5KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IGdldCA/IGdldC5jYWxsKHRhcmdldCwga2V5KSA6IHZvaWQgMDtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGFyZ2V0LmRlbGV0ZShrZXkpO1xuICAgICAgICBpZiAoaGFkS2V5KSB7XG4gICAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiZGVsZXRlXCIsIGtleSwgdm9pZCAwLCBvbGRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0sXG4gICAgICBjbGVhcigpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gdG9SYXcodGhpcyk7XG4gICAgICAgIGNvbnN0IGhhZEl0ZW1zID0gdGFyZ2V0LnNpemUgIT09IDA7XG4gICAgICAgIGNvbnN0IG9sZFRhcmdldCA9ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBpc01hcCh0YXJnZXQpID8gbmV3IE1hcCh0YXJnZXQpIDogbmV3IFNldCh0YXJnZXQpIDogdm9pZCAwO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0YXJnZXQuY2xlYXIoKTtcbiAgICAgICAgaWYgKGhhZEl0ZW1zKSB7XG4gICAgICAgICAgdHJpZ2dlcihcbiAgICAgICAgICAgIHRhcmdldCxcbiAgICAgICAgICAgIFwiY2xlYXJcIixcbiAgICAgICAgICAgIHZvaWQgMCxcbiAgICAgICAgICAgIHZvaWQgMCxcbiAgICAgICAgICAgIG9sZFRhcmdldFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9XG4gICk7XG4gIGNvbnN0IGl0ZXJhdG9yTWV0aG9kcyA9IFtcbiAgICBcImtleXNcIixcbiAgICBcInZhbHVlc1wiLFxuICAgIFwiZW50cmllc1wiLFxuICAgIFN5bWJvbC5pdGVyYXRvclxuICBdO1xuICBpdGVyYXRvck1ldGhvZHMuZm9yRWFjaCgobWV0aG9kKSA9PiB7XG4gICAgaW5zdHJ1bWVudGF0aW9uc1ttZXRob2RdID0gY3JlYXRlSXRlcmFibGVNZXRob2QobWV0aG9kLCByZWFkb25seSwgc2hhbGxvdyk7XG4gIH0pO1xuICByZXR1cm4gaW5zdHJ1bWVudGF0aW9ucztcbn1cbmZ1bmN0aW9uIGNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlcihpc1JlYWRvbmx5Miwgc2hhbGxvdykge1xuICBjb25zdCBpbnN0cnVtZW50YXRpb25zID0gY3JlYXRlSW5zdHJ1bWVudGF0aW9ucyhpc1JlYWRvbmx5Miwgc2hhbGxvdyk7XG4gIHJldHVybiAodGFyZ2V0LCBrZXksIHJlY2VpdmVyKSA9PiB7XG4gICAgaWYgKGtleSA9PT0gXCJfX3ZfaXNSZWFjdGl2ZVwiKSB7XG4gICAgICByZXR1cm4gIWlzUmVhZG9ubHkyO1xuICAgIH0gZWxzZSBpZiAoa2V5ID09PSBcIl9fdl9pc1JlYWRvbmx5XCIpIHtcbiAgICAgIHJldHVybiBpc1JlYWRvbmx5MjtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfcmF3XCIpIHtcbiAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuICAgIHJldHVybiBSZWZsZWN0LmdldChcbiAgICAgIGhhc093bihpbnN0cnVtZW50YXRpb25zLCBrZXkpICYmIGtleSBpbiB0YXJnZXQgPyBpbnN0cnVtZW50YXRpb25zIDogdGFyZ2V0LFxuICAgICAga2V5LFxuICAgICAgcmVjZWl2ZXJcbiAgICApO1xuICB9O1xufVxuY29uc3QgbXV0YWJsZUNvbGxlY3Rpb25IYW5kbGVycyA9IHtcbiAgZ2V0OiAvKiBAX19QVVJFX18gKi8gY3JlYXRlSW5zdHJ1bWVudGF0aW9uR2V0dGVyKGZhbHNlLCBmYWxzZSlcbn07XG5jb25zdCBzaGFsbG93Q29sbGVjdGlvbkhhbmRsZXJzID0ge1xuICBnZXQ6IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIoZmFsc2UsIHRydWUpXG59O1xuY29uc3QgcmVhZG9ubHlDb2xsZWN0aW9uSGFuZGxlcnMgPSB7XG4gIGdldDogLyogQF9fUFVSRV9fICovIGNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlcih0cnVlLCBmYWxzZSlcbn07XG5jb25zdCBzaGFsbG93UmVhZG9ubHlDb2xsZWN0aW9uSGFuZGxlcnMgPSB7XG4gIGdldDogLyogQF9fUFVSRV9fICovIGNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlcih0cnVlLCB0cnVlKVxufTtcbmZ1bmN0aW9uIGNoZWNrSWRlbnRpdHlLZXlzKHRhcmdldCwgaGFzLCBrZXkpIHtcbiAgY29uc3QgcmF3S2V5ID0gdG9SYXcoa2V5KTtcbiAgaWYgKHJhd0tleSAhPT0ga2V5ICYmIGhhcy5jYWxsKHRhcmdldCwgcmF3S2V5KSkge1xuICAgIGNvbnN0IHR5cGUgPSB0b1Jhd1R5cGUodGFyZ2V0KTtcbiAgICB3YXJuKFxuICAgICAgYFJlYWN0aXZlICR7dHlwZX0gY29udGFpbnMgYm90aCB0aGUgcmF3IGFuZCByZWFjdGl2ZSB2ZXJzaW9ucyBvZiB0aGUgc2FtZSBvYmplY3Qke3R5cGUgPT09IGBNYXBgID8gYCBhcyBrZXlzYCA6IGBgfSwgd2hpY2ggY2FuIGxlYWQgdG8gaW5jb25zaXN0ZW5jaWVzLiBBdm9pZCBkaWZmZXJlbnRpYXRpbmcgYmV0d2VlbiB0aGUgcmF3IGFuZCByZWFjdGl2ZSB2ZXJzaW9ucyBvZiBhbiBvYmplY3QgYW5kIG9ubHkgdXNlIHRoZSByZWFjdGl2ZSB2ZXJzaW9uIGlmIHBvc3NpYmxlLmBcbiAgICApO1xuICB9XG59XG5cbmNvbnN0IHJlYWN0aXZlTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5jb25zdCBzaGFsbG93UmVhY3RpdmVNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHJlYWRvbmx5TWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5jb25zdCBzaGFsbG93UmVhZG9ubHlNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHRhcmdldFR5cGVNYXAocmF3VHlwZSkge1xuICBzd2l0Y2ggKHJhd1R5cGUpIHtcbiAgICBjYXNlIFwiT2JqZWN0XCI6XG4gICAgY2FzZSBcIkFycmF5XCI6XG4gICAgICByZXR1cm4gMSAvKiBDT01NT04gKi87XG4gICAgY2FzZSBcIk1hcFwiOlxuICAgIGNhc2UgXCJTZXRcIjpcbiAgICBjYXNlIFwiV2Vha01hcFwiOlxuICAgIGNhc2UgXCJXZWFrU2V0XCI6XG4gICAgICByZXR1cm4gMiAvKiBDT0xMRUNUSU9OICovO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gMCAvKiBJTlZBTElEICovO1xuICB9XG59XG5mdW5jdGlvbiBnZXRUYXJnZXRUeXBlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZVtcIl9fdl9za2lwXCJdIHx8ICFPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSA/IDAgLyogSU5WQUxJRCAqLyA6IHRhcmdldFR5cGVNYXAodG9SYXdUeXBlKHZhbHVlKSk7XG59XG5mdW5jdGlvbiByZWFjdGl2ZSh0YXJnZXQpIHtcbiAgaWYgKGlzUmVhZG9ubHkodGFyZ2V0KSkge1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KFxuICAgIHRhcmdldCxcbiAgICBmYWxzZSxcbiAgICBtdXRhYmxlSGFuZGxlcnMsXG4gICAgbXV0YWJsZUNvbGxlY3Rpb25IYW5kbGVycyxcbiAgICByZWFjdGl2ZU1hcFxuICApO1xufVxuZnVuY3Rpb24gc2hhbGxvd1JlYWN0aXZlKHRhcmdldCkge1xuICByZXR1cm4gY3JlYXRlUmVhY3RpdmVPYmplY3QoXG4gICAgdGFyZ2V0LFxuICAgIGZhbHNlLFxuICAgIHNoYWxsb3dSZWFjdGl2ZUhhbmRsZXJzLFxuICAgIHNoYWxsb3dDb2xsZWN0aW9uSGFuZGxlcnMsXG4gICAgc2hhbGxvd1JlYWN0aXZlTWFwXG4gICk7XG59XG5mdW5jdGlvbiByZWFkb25seSh0YXJnZXQpIHtcbiAgcmV0dXJuIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KFxuICAgIHRhcmdldCxcbiAgICB0cnVlLFxuICAgIHJlYWRvbmx5SGFuZGxlcnMsXG4gICAgcmVhZG9ubHlDb2xsZWN0aW9uSGFuZGxlcnMsXG4gICAgcmVhZG9ubHlNYXBcbiAgKTtcbn1cbmZ1bmN0aW9uIHNoYWxsb3dSZWFkb25seSh0YXJnZXQpIHtcbiAgcmV0dXJuIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KFxuICAgIHRhcmdldCxcbiAgICB0cnVlLFxuICAgIHNoYWxsb3dSZWFkb25seUhhbmRsZXJzLFxuICAgIHNoYWxsb3dSZWFkb25seUNvbGxlY3Rpb25IYW5kbGVycyxcbiAgICBzaGFsbG93UmVhZG9ubHlNYXBcbiAgKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KHRhcmdldCwgaXNSZWFkb25seTIsIGJhc2VIYW5kbGVycywgY29sbGVjdGlvbkhhbmRsZXJzLCBwcm94eU1hcCkge1xuICBpZiAoIWlzT2JqZWN0KHRhcmdldCkpIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgd2FybihcbiAgICAgICAgYHZhbHVlIGNhbm5vdCBiZSBtYWRlICR7aXNSZWFkb25seTIgPyBcInJlYWRvbmx5XCIgOiBcInJlYWN0aXZlXCJ9OiAke1N0cmluZyhcbiAgICAgICAgICB0YXJnZXRcbiAgICAgICAgKX1gXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIGlmICh0YXJnZXRbXCJfX3ZfcmF3XCJdICYmICEoaXNSZWFkb25seTIgJiYgdGFyZ2V0W1wiX192X2lzUmVhY3RpdmVcIl0pKSB7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICBjb25zdCB0YXJnZXRUeXBlID0gZ2V0VGFyZ2V0VHlwZSh0YXJnZXQpO1xuICBpZiAodGFyZ2V0VHlwZSA9PT0gMCAvKiBJTlZBTElEICovKSB7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICBjb25zdCBleGlzdGluZ1Byb3h5ID0gcHJveHlNYXAuZ2V0KHRhcmdldCk7XG4gIGlmIChleGlzdGluZ1Byb3h5KSB7XG4gICAgcmV0dXJuIGV4aXN0aW5nUHJveHk7XG4gIH1cbiAgY29uc3QgcHJveHkgPSBuZXcgUHJveHkoXG4gICAgdGFyZ2V0LFxuICAgIHRhcmdldFR5cGUgPT09IDIgLyogQ09MTEVDVElPTiAqLyA/IGNvbGxlY3Rpb25IYW5kbGVycyA6IGJhc2VIYW5kbGVyc1xuICApO1xuICBwcm94eU1hcC5zZXQodGFyZ2V0LCBwcm94eSk7XG4gIHJldHVybiBwcm94eTtcbn1cbmZ1bmN0aW9uIGlzUmVhY3RpdmUodmFsdWUpIHtcbiAgaWYgKGlzUmVhZG9ubHkodmFsdWUpKSB7XG4gICAgcmV0dXJuIGlzUmVhY3RpdmUodmFsdWVbXCJfX3ZfcmF3XCJdKTtcbiAgfVxuICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWVbXCJfX3ZfaXNSZWFjdGl2ZVwiXSk7XG59XG5mdW5jdGlvbiBpc1JlYWRvbmx5KHZhbHVlKSB7XG4gIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZVtcIl9fdl9pc1JlYWRvbmx5XCJdKTtcbn1cbmZ1bmN0aW9uIGlzU2hhbGxvdyh2YWx1ZSkge1xuICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWVbXCJfX3ZfaXNTaGFsbG93XCJdKTtcbn1cbmZ1bmN0aW9uIGlzUHJveHkodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID8gISF2YWx1ZVtcIl9fdl9yYXdcIl0gOiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHRvUmF3KG9ic2VydmVkKSB7XG4gIGNvbnN0IHJhdyA9IG9ic2VydmVkICYmIG9ic2VydmVkW1wiX192X3Jhd1wiXTtcbiAgcmV0dXJuIHJhdyA/IHRvUmF3KHJhdykgOiBvYnNlcnZlZDtcbn1cbmZ1bmN0aW9uIG1hcmtSYXcodmFsdWUpIHtcbiAgaWYgKCFoYXNPd24odmFsdWUsIFwiX192X3NraXBcIikgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWx1ZSkpIHtcbiAgICBkZWYodmFsdWUsIFwiX192X3NraXBcIiwgdHJ1ZSk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuY29uc3QgdG9SZWFjdGl2ZSA9ICh2YWx1ZSkgPT4gaXNPYmplY3QodmFsdWUpID8gcmVhY3RpdmUodmFsdWUpIDogdmFsdWU7XG5jb25zdCB0b1JlYWRvbmx5ID0gKHZhbHVlKSA9PiBpc09iamVjdCh2YWx1ZSkgPyByZWFkb25seSh2YWx1ZSkgOiB2YWx1ZTtcblxuZnVuY3Rpb24gaXNSZWYocikge1xuICByZXR1cm4gciA/IHJbXCJfX3ZfaXNSZWZcIl0gPT09IHRydWUgOiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHJlZih2YWx1ZSkge1xuICByZXR1cm4gY3JlYXRlUmVmKHZhbHVlLCBmYWxzZSk7XG59XG5mdW5jdGlvbiBzaGFsbG93UmVmKHZhbHVlKSB7XG4gIHJldHVybiBjcmVhdGVSZWYodmFsdWUsIHRydWUpO1xufVxuZnVuY3Rpb24gY3JlYXRlUmVmKHJhd1ZhbHVlLCBzaGFsbG93KSB7XG4gIGlmIChpc1JlZihyYXdWYWx1ZSkpIHtcbiAgICByZXR1cm4gcmF3VmFsdWU7XG4gIH1cbiAgcmV0dXJuIG5ldyBSZWZJbXBsKHJhd1ZhbHVlLCBzaGFsbG93KTtcbn1cbmNsYXNzIFJlZkltcGwge1xuICBjb25zdHJ1Y3Rvcih2YWx1ZSwgaXNTaGFsbG93Mikge1xuICAgIHRoaXMuZGVwID0gbmV3IERlcCgpO1xuICAgIHRoaXNbXCJfX3ZfaXNSZWZcIl0gPSB0cnVlO1xuICAgIHRoaXNbXCJfX3ZfaXNTaGFsbG93XCJdID0gZmFsc2U7XG4gICAgdGhpcy5fcmF3VmFsdWUgPSBpc1NoYWxsb3cyID8gdmFsdWUgOiB0b1Jhdyh2YWx1ZSk7XG4gICAgdGhpcy5fdmFsdWUgPSBpc1NoYWxsb3cyID8gdmFsdWUgOiB0b1JlYWN0aXZlKHZhbHVlKTtcbiAgICB0aGlzW1wiX192X2lzU2hhbGxvd1wiXSA9IGlzU2hhbGxvdzI7XG4gIH1cbiAgZ2V0IHZhbHVlKCkge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICB0aGlzLmRlcC50cmFjayh7XG4gICAgICAgIHRhcmdldDogdGhpcyxcbiAgICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgICAga2V5OiBcInZhbHVlXCJcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRlcC50cmFjaygpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gIH1cbiAgc2V0IHZhbHVlKG5ld1ZhbHVlKSB7XG4gICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLl9yYXdWYWx1ZTtcbiAgICBjb25zdCB1c2VEaXJlY3RWYWx1ZSA9IHRoaXNbXCJfX3ZfaXNTaGFsbG93XCJdIHx8IGlzU2hhbGxvdyhuZXdWYWx1ZSkgfHwgaXNSZWFkb25seShuZXdWYWx1ZSk7XG4gICAgbmV3VmFsdWUgPSB1c2VEaXJlY3RWYWx1ZSA/IG5ld1ZhbHVlIDogdG9SYXcobmV3VmFsdWUpO1xuICAgIGlmIChoYXNDaGFuZ2VkKG5ld1ZhbHVlLCBvbGRWYWx1ZSkpIHtcbiAgICAgIHRoaXMuX3Jhd1ZhbHVlID0gbmV3VmFsdWU7XG4gICAgICB0aGlzLl92YWx1ZSA9IHVzZURpcmVjdFZhbHVlID8gbmV3VmFsdWUgOiB0b1JlYWN0aXZlKG5ld1ZhbHVlKTtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgIHRoaXMuZGVwLnRyaWdnZXIoe1xuICAgICAgICAgIHRhcmdldDogdGhpcyxcbiAgICAgICAgICB0eXBlOiBcInNldFwiLFxuICAgICAgICAgIGtleTogXCJ2YWx1ZVwiLFxuICAgICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICAgIG9sZFZhbHVlXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kZXAudHJpZ2dlcigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gdHJpZ2dlclJlZihyZWYyKSB7XG4gIGlmIChyZWYyLmRlcCkge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICByZWYyLmRlcC50cmlnZ2VyKHtcbiAgICAgICAgdGFyZ2V0OiByZWYyLFxuICAgICAgICB0eXBlOiBcInNldFwiLFxuICAgICAgICBrZXk6IFwidmFsdWVcIixcbiAgICAgICAgbmV3VmFsdWU6IHJlZjIuX3ZhbHVlXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVmMi5kZXAudHJpZ2dlcigpO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gdW5yZWYocmVmMikge1xuICByZXR1cm4gaXNSZWYocmVmMikgPyByZWYyLnZhbHVlIDogcmVmMjtcbn1cbmZ1bmN0aW9uIHRvVmFsdWUoc291cmNlKSB7XG4gIHJldHVybiBpc0Z1bmN0aW9uKHNvdXJjZSkgPyBzb3VyY2UoKSA6IHVucmVmKHNvdXJjZSk7XG59XG5jb25zdCBzaGFsbG93VW53cmFwSGFuZGxlcnMgPSB7XG4gIGdldDogKHRhcmdldCwga2V5LCByZWNlaXZlcikgPT4ga2V5ID09PSBcIl9fdl9yYXdcIiA/IHRhcmdldCA6IHVucmVmKFJlZmxlY3QuZ2V0KHRhcmdldCwga2V5LCByZWNlaXZlcikpLFxuICBzZXQ6ICh0YXJnZXQsIGtleSwgdmFsdWUsIHJlY2VpdmVyKSA9PiB7XG4gICAgY29uc3Qgb2xkVmFsdWUgPSB0YXJnZXRba2V5XTtcbiAgICBpZiAoaXNSZWYob2xkVmFsdWUpICYmICFpc1JlZih2YWx1ZSkpIHtcbiAgICAgIG9sZFZhbHVlLnZhbHVlID0gdmFsdWU7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFJlZmxlY3Quc2V0KHRhcmdldCwga2V5LCB2YWx1ZSwgcmVjZWl2ZXIpO1xuICAgIH1cbiAgfVxufTtcbmZ1bmN0aW9uIHByb3h5UmVmcyhvYmplY3RXaXRoUmVmcykge1xuICByZXR1cm4gaXNSZWFjdGl2ZShvYmplY3RXaXRoUmVmcykgPyBvYmplY3RXaXRoUmVmcyA6IG5ldyBQcm94eShvYmplY3RXaXRoUmVmcywgc2hhbGxvd1Vud3JhcEhhbmRsZXJzKTtcbn1cbmNsYXNzIEN1c3RvbVJlZkltcGwge1xuICBjb25zdHJ1Y3RvcihmYWN0b3J5KSB7XG4gICAgdGhpc1tcIl9fdl9pc1JlZlwiXSA9IHRydWU7XG4gICAgdGhpcy5fdmFsdWUgPSB2b2lkIDA7XG4gICAgY29uc3QgZGVwID0gdGhpcy5kZXAgPSBuZXcgRGVwKCk7XG4gICAgY29uc3QgeyBnZXQsIHNldCB9ID0gZmFjdG9yeShkZXAudHJhY2suYmluZChkZXApLCBkZXAudHJpZ2dlci5iaW5kKGRlcCkpO1xuICAgIHRoaXMuX2dldCA9IGdldDtcbiAgICB0aGlzLl9zZXQgPSBzZXQ7XG4gIH1cbiAgZ2V0IHZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZSA9IHRoaXMuX2dldCgpO1xuICB9XG4gIHNldCB2YWx1ZShuZXdWYWwpIHtcbiAgICB0aGlzLl9zZXQobmV3VmFsKTtcbiAgfVxufVxuZnVuY3Rpb24gY3VzdG9tUmVmKGZhY3RvcnkpIHtcbiAgcmV0dXJuIG5ldyBDdXN0b21SZWZJbXBsKGZhY3RvcnkpO1xufVxuZnVuY3Rpb24gdG9SZWZzKG9iamVjdCkge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhaXNQcm94eShvYmplY3QpKSB7XG4gICAgd2FybihgdG9SZWZzKCkgZXhwZWN0cyBhIHJlYWN0aXZlIG9iamVjdCBidXQgcmVjZWl2ZWQgYSBwbGFpbiBvbmUuYCk7XG4gIH1cbiAgY29uc3QgcmV0ID0gaXNBcnJheShvYmplY3QpID8gbmV3IEFycmF5KG9iamVjdC5sZW5ndGgpIDoge307XG4gIGZvciAoY29uc3Qga2V5IGluIG9iamVjdCkge1xuICAgIHJldFtrZXldID0gcHJvcGVydHlUb1JlZihvYmplY3QsIGtleSk7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cbmNsYXNzIE9iamVjdFJlZkltcGwge1xuICBjb25zdHJ1Y3Rvcihfb2JqZWN0LCBfa2V5LCBfZGVmYXVsdFZhbHVlKSB7XG4gICAgdGhpcy5fb2JqZWN0ID0gX29iamVjdDtcbiAgICB0aGlzLl9rZXkgPSBfa2V5O1xuICAgIHRoaXMuX2RlZmF1bHRWYWx1ZSA9IF9kZWZhdWx0VmFsdWU7XG4gICAgdGhpc1tcIl9fdl9pc1JlZlwiXSA9IHRydWU7XG4gICAgdGhpcy5fdmFsdWUgPSB2b2lkIDA7XG4gIH1cbiAgZ2V0IHZhbHVlKCkge1xuICAgIGNvbnN0IHZhbCA9IHRoaXMuX29iamVjdFt0aGlzLl9rZXldO1xuICAgIHJldHVybiB0aGlzLl92YWx1ZSA9IHZhbCA9PT0gdm9pZCAwID8gdGhpcy5fZGVmYXVsdFZhbHVlIDogdmFsO1xuICB9XG4gIHNldCB2YWx1ZShuZXdWYWwpIHtcbiAgICB0aGlzLl9vYmplY3RbdGhpcy5fa2V5XSA9IG5ld1ZhbDtcbiAgfVxuICBnZXQgZGVwKCkge1xuICAgIHJldHVybiBnZXREZXBGcm9tUmVhY3RpdmUodG9SYXcodGhpcy5fb2JqZWN0KSwgdGhpcy5fa2V5KTtcbiAgfVxufVxuY2xhc3MgR2V0dGVyUmVmSW1wbCB7XG4gIGNvbnN0cnVjdG9yKF9nZXR0ZXIpIHtcbiAgICB0aGlzLl9nZXR0ZXIgPSBfZ2V0dGVyO1xuICAgIHRoaXNbXCJfX3ZfaXNSZWZcIl0gPSB0cnVlO1xuICAgIHRoaXNbXCJfX3ZfaXNSZWFkb25seVwiXSA9IHRydWU7XG4gICAgdGhpcy5fdmFsdWUgPSB2b2lkIDA7XG4gIH1cbiAgZ2V0IHZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZSA9IHRoaXMuX2dldHRlcigpO1xuICB9XG59XG5mdW5jdGlvbiB0b1JlZihzb3VyY2UsIGtleSwgZGVmYXVsdFZhbHVlKSB7XG4gIGlmIChpc1JlZihzb3VyY2UpKSB7XG4gICAgcmV0dXJuIHNvdXJjZTtcbiAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHNvdXJjZSkpIHtcbiAgICByZXR1cm4gbmV3IEdldHRlclJlZkltcGwoc291cmNlKTtcbiAgfSBlbHNlIGlmIChpc09iamVjdChzb3VyY2UpICYmIGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgcmV0dXJuIHByb3BlcnR5VG9SZWYoc291cmNlLCBrZXksIGRlZmF1bHRWYWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHJlZihzb3VyY2UpO1xuICB9XG59XG5mdW5jdGlvbiBwcm9wZXJ0eVRvUmVmKHNvdXJjZSwga2V5LCBkZWZhdWx0VmFsdWUpIHtcbiAgY29uc3QgdmFsID0gc291cmNlW2tleV07XG4gIHJldHVybiBpc1JlZih2YWwpID8gdmFsIDogbmV3IE9iamVjdFJlZkltcGwoc291cmNlLCBrZXksIGRlZmF1bHRWYWx1ZSk7XG59XG5cbmNsYXNzIENvbXB1dGVkUmVmSW1wbCB7XG4gIGNvbnN0cnVjdG9yKGZuLCBzZXR0ZXIsIGlzU1NSKSB7XG4gICAgdGhpcy5mbiA9IGZuO1xuICAgIHRoaXMuc2V0dGVyID0gc2V0dGVyO1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMuX3ZhbHVlID0gdm9pZCAwO1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMuZGVwID0gbmV3IERlcCh0aGlzKTtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0aGlzLl9fdl9pc1JlZiA9IHRydWU7XG4gICAgLy8gVE9ETyBpc29sYXRlZERlY2xhcmF0aW9ucyBcIl9fdl9pc1JlYWRvbmx5XCJcbiAgICAvLyBBIGNvbXB1dGVkIGlzIGFsc28gYSBzdWJzY3JpYmVyIHRoYXQgdHJhY2tzIG90aGVyIGRlcHNcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0aGlzLmRlcHMgPSB2b2lkIDA7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5kZXBzVGFpbCA9IHZvaWQgMDtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0aGlzLmZsYWdzID0gMTY7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5nbG9iYWxWZXJzaW9uID0gZ2xvYmFsVmVyc2lvbiAtIDE7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5uZXh0ID0gdm9pZCAwO1xuICAgIC8vIGZvciBiYWNrd2FyZHMgY29tcGF0XG4gICAgdGhpcy5lZmZlY3QgPSB0aGlzO1xuICAgIHRoaXNbXCJfX3ZfaXNSZWFkb25seVwiXSA9ICFzZXR0ZXI7XG4gICAgdGhpcy5pc1NTUiA9IGlzU1NSO1xuICB9XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIG5vdGlmeSgpIHtcbiAgICB0aGlzLmZsYWdzIHw9IDE2O1xuICAgIGlmICghKHRoaXMuZmxhZ3MgJiA4KSAmJiAvLyBhdm9pZCBpbmZpbml0ZSBzZWxmIHJlY3Vyc2lvblxuICAgIGFjdGl2ZVN1YiAhPT0gdGhpcykge1xuICAgICAgYmF0Y2godGhpcywgdHJ1ZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIDtcbiAgfVxuICBnZXQgdmFsdWUoKSB7XG4gICAgY29uc3QgbGluayA9ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyB0aGlzLmRlcC50cmFjayh7XG4gICAgICB0YXJnZXQ6IHRoaXMsXG4gICAgICB0eXBlOiBcImdldFwiLFxuICAgICAga2V5OiBcInZhbHVlXCJcbiAgICB9KSA6IHRoaXMuZGVwLnRyYWNrKCk7XG4gICAgcmVmcmVzaENvbXB1dGVkKHRoaXMpO1xuICAgIGlmIChsaW5rKSB7XG4gICAgICBsaW5rLnZlcnNpb24gPSB0aGlzLmRlcC52ZXJzaW9uO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gIH1cbiAgc2V0IHZhbHVlKG5ld1ZhbHVlKSB7XG4gICAgaWYgKHRoaXMuc2V0dGVyKSB7XG4gICAgICB0aGlzLnNldHRlcihuZXdWYWx1ZSk7XG4gICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICB3YXJuKFwiV3JpdGUgb3BlcmF0aW9uIGZhaWxlZDogY29tcHV0ZWQgdmFsdWUgaXMgcmVhZG9ubHlcIik7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBjb21wdXRlZChnZXR0ZXJPck9wdGlvbnMsIGRlYnVnT3B0aW9ucywgaXNTU1IgPSBmYWxzZSkge1xuICBsZXQgZ2V0dGVyO1xuICBsZXQgc2V0dGVyO1xuICBpZiAoaXNGdW5jdGlvbihnZXR0ZXJPck9wdGlvbnMpKSB7XG4gICAgZ2V0dGVyID0gZ2V0dGVyT3JPcHRpb25zO1xuICB9IGVsc2Uge1xuICAgIGdldHRlciA9IGdldHRlck9yT3B0aW9ucy5nZXQ7XG4gICAgc2V0dGVyID0gZ2V0dGVyT3JPcHRpb25zLnNldDtcbiAgfVxuICBjb25zdCBjUmVmID0gbmV3IENvbXB1dGVkUmVmSW1wbChnZXR0ZXIsIHNldHRlciwgaXNTU1IpO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBkZWJ1Z09wdGlvbnMgJiYgIWlzU1NSKSB7XG4gICAgY1JlZi5vblRyYWNrID0gZGVidWdPcHRpb25zLm9uVHJhY2s7XG4gICAgY1JlZi5vblRyaWdnZXIgPSBkZWJ1Z09wdGlvbnMub25UcmlnZ2VyO1xuICB9XG4gIHJldHVybiBjUmVmO1xufVxuXG5jb25zdCBUcmFja09wVHlwZXMgPSB7XG4gIFwiR0VUXCI6IFwiZ2V0XCIsXG4gIFwiSEFTXCI6IFwiaGFzXCIsXG4gIFwiSVRFUkFURVwiOiBcIml0ZXJhdGVcIlxufTtcbmNvbnN0IFRyaWdnZXJPcFR5cGVzID0ge1xuICBcIlNFVFwiOiBcInNldFwiLFxuICBcIkFERFwiOiBcImFkZFwiLFxuICBcIkRFTEVURVwiOiBcImRlbGV0ZVwiLFxuICBcIkNMRUFSXCI6IFwiY2xlYXJcIlxufTtcbmNvbnN0IFJlYWN0aXZlRmxhZ3MgPSB7XG4gIFwiU0tJUFwiOiBcIl9fdl9za2lwXCIsXG4gIFwiSVNfUkVBQ1RJVkVcIjogXCJfX3ZfaXNSZWFjdGl2ZVwiLFxuICBcIklTX1JFQURPTkxZXCI6IFwiX192X2lzUmVhZG9ubHlcIixcbiAgXCJJU19TSEFMTE9XXCI6IFwiX192X2lzU2hhbGxvd1wiLFxuICBcIlJBV1wiOiBcIl9fdl9yYXdcIixcbiAgXCJJU19SRUZcIjogXCJfX3ZfaXNSZWZcIlxufTtcblxuY29uc3QgV2F0Y2hFcnJvckNvZGVzID0ge1xuICBcIldBVENIX0dFVFRFUlwiOiAyLFxuICBcIjJcIjogXCJXQVRDSF9HRVRURVJcIixcbiAgXCJXQVRDSF9DQUxMQkFDS1wiOiAzLFxuICBcIjNcIjogXCJXQVRDSF9DQUxMQkFDS1wiLFxuICBcIldBVENIX0NMRUFOVVBcIjogNCxcbiAgXCI0XCI6IFwiV0FUQ0hfQ0xFQU5VUFwiXG59O1xuY29uc3QgSU5JVElBTF9XQVRDSEVSX1ZBTFVFID0ge307XG5jb25zdCBjbGVhbnVwTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5sZXQgYWN0aXZlV2F0Y2hlciA9IHZvaWQgMDtcbmZ1bmN0aW9uIGdldEN1cnJlbnRXYXRjaGVyKCkge1xuICByZXR1cm4gYWN0aXZlV2F0Y2hlcjtcbn1cbmZ1bmN0aW9uIG9uV2F0Y2hlckNsZWFudXAoY2xlYW51cEZuLCBmYWlsU2lsZW50bHkgPSBmYWxzZSwgb3duZXIgPSBhY3RpdmVXYXRjaGVyKSB7XG4gIGlmIChvd25lcikge1xuICAgIGxldCBjbGVhbnVwcyA9IGNsZWFudXBNYXAuZ2V0KG93bmVyKTtcbiAgICBpZiAoIWNsZWFudXBzKSBjbGVhbnVwTWFwLnNldChvd25lciwgY2xlYW51cHMgPSBbXSk7XG4gICAgY2xlYW51cHMucHVzaChjbGVhbnVwRm4pO1xuICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWZhaWxTaWxlbnRseSkge1xuICAgIHdhcm4oXG4gICAgICBgb25XYXRjaGVyQ2xlYW51cCgpIHdhcyBjYWxsZWQgd2hlbiB0aGVyZSB3YXMgbm8gYWN0aXZlIHdhdGNoZXIgdG8gYXNzb2NpYXRlIHdpdGguYFxuICAgICk7XG4gIH1cbn1cbmZ1bmN0aW9uIHdhdGNoKHNvdXJjZSwgY2IsIG9wdGlvbnMgPSBFTVBUWV9PQkopIHtcbiAgY29uc3QgeyBpbW1lZGlhdGUsIGRlZXAsIG9uY2UsIHNjaGVkdWxlciwgYXVnbWVudEpvYiwgY2FsbCB9ID0gb3B0aW9ucztcbiAgY29uc3Qgd2FybkludmFsaWRTb3VyY2UgPSAocykgPT4ge1xuICAgIChvcHRpb25zLm9uV2FybiB8fCB3YXJuKShcbiAgICAgIGBJbnZhbGlkIHdhdGNoIHNvdXJjZTogYCxcbiAgICAgIHMsXG4gICAgICBgQSB3YXRjaCBzb3VyY2UgY2FuIG9ubHkgYmUgYSBnZXR0ZXIvZWZmZWN0IGZ1bmN0aW9uLCBhIHJlZiwgYSByZWFjdGl2ZSBvYmplY3QsIG9yIGFuIGFycmF5IG9mIHRoZXNlIHR5cGVzLmBcbiAgICApO1xuICB9O1xuICBjb25zdCByZWFjdGl2ZUdldHRlciA9IChzb3VyY2UyKSA9PiB7XG4gICAgaWYgKGRlZXApIHJldHVybiBzb3VyY2UyO1xuICAgIGlmIChpc1NoYWxsb3coc291cmNlMikgfHwgZGVlcCA9PT0gZmFsc2UgfHwgZGVlcCA9PT0gMClcbiAgICAgIHJldHVybiB0cmF2ZXJzZShzb3VyY2UyLCAxKTtcbiAgICByZXR1cm4gdHJhdmVyc2Uoc291cmNlMik7XG4gIH07XG4gIGxldCBlZmZlY3Q7XG4gIGxldCBnZXR0ZXI7XG4gIGxldCBjbGVhbnVwO1xuICBsZXQgYm91bmRDbGVhbnVwO1xuICBsZXQgZm9yY2VUcmlnZ2VyID0gZmFsc2U7XG4gIGxldCBpc011bHRpU291cmNlID0gZmFsc2U7XG4gIGlmIChpc1JlZihzb3VyY2UpKSB7XG4gICAgZ2V0dGVyID0gKCkgPT4gc291cmNlLnZhbHVlO1xuICAgIGZvcmNlVHJpZ2dlciA9IGlzU2hhbGxvdyhzb3VyY2UpO1xuICB9IGVsc2UgaWYgKGlzUmVhY3RpdmUoc291cmNlKSkge1xuICAgIGdldHRlciA9ICgpID0+IHJlYWN0aXZlR2V0dGVyKHNvdXJjZSk7XG4gICAgZm9yY2VUcmlnZ2VyID0gdHJ1ZTtcbiAgfSBlbHNlIGlmIChpc0FycmF5KHNvdXJjZSkpIHtcbiAgICBpc011bHRpU291cmNlID0gdHJ1ZTtcbiAgICBmb3JjZVRyaWdnZXIgPSBzb3VyY2Uuc29tZSgocykgPT4gaXNSZWFjdGl2ZShzKSB8fCBpc1NoYWxsb3cocykpO1xuICAgIGdldHRlciA9ICgpID0+IHNvdXJjZS5tYXAoKHMpID0+IHtcbiAgICAgIGlmIChpc1JlZihzKSkge1xuICAgICAgICByZXR1cm4gcy52YWx1ZTtcbiAgICAgIH0gZWxzZSBpZiAoaXNSZWFjdGl2ZShzKSkge1xuICAgICAgICByZXR1cm4gcmVhY3RpdmVHZXR0ZXIocyk7XG4gICAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24ocykpIHtcbiAgICAgICAgcmV0dXJuIGNhbGwgPyBjYWxsKHMsIDIpIDogcygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuSW52YWxpZFNvdXJjZShzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHNvdXJjZSkpIHtcbiAgICBpZiAoY2IpIHtcbiAgICAgIGdldHRlciA9IGNhbGwgPyAoKSA9PiBjYWxsKHNvdXJjZSwgMikgOiBzb3VyY2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdldHRlciA9ICgpID0+IHtcbiAgICAgICAgaWYgKGNsZWFudXApIHtcbiAgICAgICAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgcmVzZXRUcmFja2luZygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjdXJyZW50RWZmZWN0ID0gYWN0aXZlV2F0Y2hlcjtcbiAgICAgICAgYWN0aXZlV2F0Y2hlciA9IGVmZmVjdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gY2FsbCA/IGNhbGwoc291cmNlLCAzLCBbYm91bmRDbGVhbnVwXSkgOiBzb3VyY2UoYm91bmRDbGVhbnVwKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBhY3RpdmVXYXRjaGVyID0gY3VycmVudEVmZmVjdDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZ2V0dGVyID0gTk9PUDtcbiAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm5JbnZhbGlkU291cmNlKHNvdXJjZSk7XG4gIH1cbiAgaWYgKGNiICYmIGRlZXApIHtcbiAgICBjb25zdCBiYXNlR2V0dGVyID0gZ2V0dGVyO1xuICAgIGNvbnN0IGRlcHRoID0gZGVlcCA9PT0gdHJ1ZSA/IEluZmluaXR5IDogZGVlcDtcbiAgICBnZXR0ZXIgPSAoKSA9PiB0cmF2ZXJzZShiYXNlR2V0dGVyKCksIGRlcHRoKTtcbiAgfVxuICBjb25zdCBzY29wZSA9IGdldEN1cnJlbnRTY29wZSgpO1xuICBjb25zdCB3YXRjaEhhbmRsZSA9ICgpID0+IHtcbiAgICBlZmZlY3Quc3RvcCgpO1xuICAgIGlmIChzY29wZSAmJiBzY29wZS5hY3RpdmUpIHtcbiAgICAgIHJlbW92ZShzY29wZS5lZmZlY3RzLCBlZmZlY3QpO1xuICAgIH1cbiAgfTtcbiAgaWYgKG9uY2UgJiYgY2IpIHtcbiAgICBjb25zdCBfY2IgPSBjYjtcbiAgICBjYiA9ICguLi5hcmdzKSA9PiB7XG4gICAgICBfY2IoLi4uYXJncyk7XG4gICAgICB3YXRjaEhhbmRsZSgpO1xuICAgIH07XG4gIH1cbiAgbGV0IG9sZFZhbHVlID0gaXNNdWx0aVNvdXJjZSA/IG5ldyBBcnJheShzb3VyY2UubGVuZ3RoKS5maWxsKElOSVRJQUxfV0FUQ0hFUl9WQUxVRSkgOiBJTklUSUFMX1dBVENIRVJfVkFMVUU7XG4gIGNvbnN0IGpvYiA9IChpbW1lZGlhdGVGaXJzdFJ1bikgPT4ge1xuICAgIGlmICghKGVmZmVjdC5mbGFncyAmIDEpIHx8ICFlZmZlY3QuZGlydHkgJiYgIWltbWVkaWF0ZUZpcnN0UnVuKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjYikge1xuICAgICAgY29uc3QgbmV3VmFsdWUgPSBlZmZlY3QucnVuKCk7XG4gICAgICBpZiAoZGVlcCB8fCBmb3JjZVRyaWdnZXIgfHwgKGlzTXVsdGlTb3VyY2UgPyBuZXdWYWx1ZS5zb21lKCh2LCBpKSA9PiBoYXNDaGFuZ2VkKHYsIG9sZFZhbHVlW2ldKSkgOiBoYXNDaGFuZ2VkKG5ld1ZhbHVlLCBvbGRWYWx1ZSkpKSB7XG4gICAgICAgIGlmIChjbGVhbnVwKSB7XG4gICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cnJlbnRXYXRjaGVyID0gYWN0aXZlV2F0Y2hlcjtcbiAgICAgICAgYWN0aXZlV2F0Y2hlciA9IGVmZmVjdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBhcmdzID0gW1xuICAgICAgICAgICAgbmV3VmFsdWUsXG4gICAgICAgICAgICAvLyBwYXNzIHVuZGVmaW5lZCBhcyB0aGUgb2xkIHZhbHVlIHdoZW4gaXQncyBjaGFuZ2VkIGZvciB0aGUgZmlyc3QgdGltZVxuICAgICAgICAgICAgb2xkVmFsdWUgPT09IElOSVRJQUxfV0FUQ0hFUl9WQUxVRSA/IHZvaWQgMCA6IGlzTXVsdGlTb3VyY2UgJiYgb2xkVmFsdWVbMF0gPT09IElOSVRJQUxfV0FUQ0hFUl9WQUxVRSA/IFtdIDogb2xkVmFsdWUsXG4gICAgICAgICAgICBib3VuZENsZWFudXBcbiAgICAgICAgICBdO1xuICAgICAgICAgIGNhbGwgPyBjYWxsKGNiLCAzLCBhcmdzKSA6IChcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgIGNiKC4uLmFyZ3MpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBvbGRWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGFjdGl2ZVdhdGNoZXIgPSBjdXJyZW50V2F0Y2hlcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBlZmZlY3QucnVuKCk7XG4gICAgfVxuICB9O1xuICBpZiAoYXVnbWVudEpvYikge1xuICAgIGF1Z21lbnRKb2Ioam9iKTtcbiAgfVxuICBlZmZlY3QgPSBuZXcgUmVhY3RpdmVFZmZlY3QoZ2V0dGVyKTtcbiAgZWZmZWN0LnNjaGVkdWxlciA9IHNjaGVkdWxlciA/ICgpID0+IHNjaGVkdWxlcihqb2IsIGZhbHNlKSA6IGpvYjtcbiAgYm91bmRDbGVhbnVwID0gKGZuKSA9PiBvbldhdGNoZXJDbGVhbnVwKGZuLCBmYWxzZSwgZWZmZWN0KTtcbiAgY2xlYW51cCA9IGVmZmVjdC5vblN0b3AgPSAoKSA9PiB7XG4gICAgY29uc3QgY2xlYW51cHMgPSBjbGVhbnVwTWFwLmdldChlZmZlY3QpO1xuICAgIGlmIChjbGVhbnVwcykge1xuICAgICAgaWYgKGNhbGwpIHtcbiAgICAgICAgY2FsbChjbGVhbnVwcywgNCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGNvbnN0IGNsZWFudXAyIG9mIGNsZWFudXBzKSBjbGVhbnVwMigpO1xuICAgICAgfVxuICAgICAgY2xlYW51cE1hcC5kZWxldGUoZWZmZWN0KTtcbiAgICB9XG4gIH07XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgZWZmZWN0Lm9uVHJhY2sgPSBvcHRpb25zLm9uVHJhY2s7XG4gICAgZWZmZWN0Lm9uVHJpZ2dlciA9IG9wdGlvbnMub25UcmlnZ2VyO1xuICB9XG4gIGlmIChjYikge1xuICAgIGlmIChpbW1lZGlhdGUpIHtcbiAgICAgIGpvYih0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2xkVmFsdWUgPSBlZmZlY3QucnVuKCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHNjaGVkdWxlcikge1xuICAgIHNjaGVkdWxlcihqb2IuYmluZChudWxsLCB0cnVlKSwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgZWZmZWN0LnJ1bigpO1xuICB9XG4gIHdhdGNoSGFuZGxlLnBhdXNlID0gZWZmZWN0LnBhdXNlLmJpbmQoZWZmZWN0KTtcbiAgd2F0Y2hIYW5kbGUucmVzdW1lID0gZWZmZWN0LnJlc3VtZS5iaW5kKGVmZmVjdCk7XG4gIHdhdGNoSGFuZGxlLnN0b3AgPSB3YXRjaEhhbmRsZTtcbiAgcmV0dXJuIHdhdGNoSGFuZGxlO1xufVxuZnVuY3Rpb24gdHJhdmVyc2UodmFsdWUsIGRlcHRoID0gSW5maW5pdHksIHNlZW4pIHtcbiAgaWYgKGRlcHRoIDw9IDAgfHwgIWlzT2JqZWN0KHZhbHVlKSB8fCB2YWx1ZVtcIl9fdl9za2lwXCJdKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHNlZW4gPSBzZWVuIHx8IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIGlmIChzZWVuLmhhcyh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgc2Vlbi5hZGQodmFsdWUpO1xuICBkZXB0aC0tO1xuICBpZiAoaXNSZWYodmFsdWUpKSB7XG4gICAgdHJhdmVyc2UodmFsdWUudmFsdWUsIGRlcHRoLCBzZWVuKTtcbiAgfSBlbHNlIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRyYXZlcnNlKHZhbHVlW2ldLCBkZXB0aCwgc2Vlbik7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzU2V0KHZhbHVlKSB8fCBpc01hcCh2YWx1ZSkpIHtcbiAgICB2YWx1ZS5mb3JFYWNoKCh2KSA9PiB7XG4gICAgICB0cmF2ZXJzZSh2LCBkZXB0aCwgc2Vlbik7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiB2YWx1ZSkge1xuICAgICAgdHJhdmVyc2UodmFsdWVba2V5XSwgZGVwdGgsIHNlZW4pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHZhbHVlKSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh2YWx1ZSwga2V5KSkge1xuICAgICAgICB0cmF2ZXJzZSh2YWx1ZVtrZXldLCBkZXB0aCwgc2Vlbik7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZXhwb3J0IHsgQVJSQVlfSVRFUkFURV9LRVksIEVmZmVjdEZsYWdzLCBFZmZlY3RTY29wZSwgSVRFUkFURV9LRVksIE1BUF9LRVlfSVRFUkFURV9LRVksIFJlYWN0aXZlRWZmZWN0LCBSZWFjdGl2ZUZsYWdzLCBUcmFja09wVHlwZXMsIFRyaWdnZXJPcFR5cGVzLCBXYXRjaEVycm9yQ29kZXMsIGNvbXB1dGVkLCBjdXN0b21SZWYsIGVmZmVjdCwgZWZmZWN0U2NvcGUsIGVuYWJsZVRyYWNraW5nLCBnZXRDdXJyZW50U2NvcGUsIGdldEN1cnJlbnRXYXRjaGVyLCBpc1Byb3h5LCBpc1JlYWN0aXZlLCBpc1JlYWRvbmx5LCBpc1JlZiwgaXNTaGFsbG93LCBtYXJrUmF3LCBvbkVmZmVjdENsZWFudXAsIG9uU2NvcGVEaXNwb3NlLCBvbldhdGNoZXJDbGVhbnVwLCBwYXVzZVRyYWNraW5nLCBwcm94eVJlZnMsIHJlYWN0aXZlLCByZWFjdGl2ZVJlYWRBcnJheSwgcmVhZG9ubHksIHJlZiwgcmVzZXRUcmFja2luZywgc2hhbGxvd1JlYWN0aXZlLCBzaGFsbG93UmVhZEFycmF5LCBzaGFsbG93UmVhZG9ubHksIHNoYWxsb3dSZWYsIHN0b3AsIHRvUmF3LCB0b1JlYWN0aXZlLCB0b1JlYWRvbmx5LCB0b1JlZiwgdG9SZWZzLCB0b1ZhbHVlLCB0cmFjaywgdHJhdmVyc2UsIHRyaWdnZXIsIHRyaWdnZXJSZWYsIHVucmVmLCB3YXRjaCB9O1xuIiwiLyoqXG4qIEB2dWUvcnVudGltZS1jb3JlIHYzLjUuMTRcbiogKGMpIDIwMTgtcHJlc2VudCBZdXhpIChFdmFuKSBZb3UgYW5kIFZ1ZSBjb250cmlidXRvcnNcbiogQGxpY2Vuc2UgTUlUXG4qKi9cbmltcG9ydCB7IHBhdXNlVHJhY2tpbmcsIHJlc2V0VHJhY2tpbmcsIGlzUmVmLCB0b1JhdywgdHJhdmVyc2UsIHNoYWxsb3dSZWYsIHJlYWRvbmx5LCBpc1JlYWN0aXZlLCByZWYsIGlzU2hhbGxvdywgaXNSZWFkb25seSwgc2hhbGxvd1JlYWRBcnJheSwgdG9SZWFkb25seSwgdG9SZWFjdGl2ZSwgc2hhbGxvd1JlYWRvbmx5LCB0cmFjaywgcmVhY3RpdmUsIHNoYWxsb3dSZWFjdGl2ZSwgdHJpZ2dlciwgUmVhY3RpdmVFZmZlY3QsIHdhdGNoIGFzIHdhdGNoJDEsIGN1c3RvbVJlZiwgaXNQcm94eSwgcHJveHlSZWZzLCBtYXJrUmF3LCBFZmZlY3RTY29wZSwgY29tcHV0ZWQgYXMgY29tcHV0ZWQkMSB9IGZyb20gJ0B2dWUvcmVhY3Rpdml0eSc7XG5leHBvcnQgeyBFZmZlY3RTY29wZSwgUmVhY3RpdmVFZmZlY3QsIFRyYWNrT3BUeXBlcywgVHJpZ2dlck9wVHlwZXMsIGN1c3RvbVJlZiwgZWZmZWN0LCBlZmZlY3RTY29wZSwgZ2V0Q3VycmVudFNjb3BlLCBnZXRDdXJyZW50V2F0Y2hlciwgaXNQcm94eSwgaXNSZWFjdGl2ZSwgaXNSZWFkb25seSwgaXNSZWYsIGlzU2hhbGxvdywgbWFya1Jhdywgb25TY29wZURpc3Bvc2UsIG9uV2F0Y2hlckNsZWFudXAsIHByb3h5UmVmcywgcmVhY3RpdmUsIHJlYWRvbmx5LCByZWYsIHNoYWxsb3dSZWFjdGl2ZSwgc2hhbGxvd1JlYWRvbmx5LCBzaGFsbG93UmVmLCBzdG9wLCB0b1JhdywgdG9SZWYsIHRvUmVmcywgdG9WYWx1ZSwgdHJpZ2dlclJlZiwgdW5yZWYgfSBmcm9tICdAdnVlL3JlYWN0aXZpdHknO1xuaW1wb3J0IHsgaXNTdHJpbmcsIGlzRnVuY3Rpb24sIEVNUFRZX09CSiwgaXNQcm9taXNlLCBpc0FycmF5LCBOT09QLCBnZXRHbG9iYWxUaGlzLCBleHRlbmQsIGlzQnVpbHRJbkRpcmVjdGl2ZSwgaGFzT3duLCByZW1vdmUsIGRlZiwgaXNPbiwgaXNSZXNlcnZlZFByb3AsIG5vcm1hbGl6ZUNsYXNzLCBzdHJpbmdpZnlTdHlsZSwgbm9ybWFsaXplU3R5bGUsIGlzS25vd25TdmdBdHRyLCBpc0Jvb2xlYW5BdHRyLCBpc0tub3duSHRtbEF0dHIsIGluY2x1ZGVCb29sZWFuQXR0ciwgaXNSZW5kZXJhYmxlQXR0clZhbHVlLCBnZXRFc2NhcGVkQ3NzVmFyTmFtZSwgaXNPYmplY3QsIGlzUmVnRXhwLCBpbnZva2VBcnJheUZucywgdG9IYW5kbGVyS2V5LCBjYW1lbGl6ZSwgY2FwaXRhbGl6ZSwgaXNTeW1ib2wsIGlzR2xvYmFsbHlBbGxvd2VkLCBOTywgRU1QVFlfQVJSLCBoeXBoZW5hdGUsIG1ha2VNYXAsIHRvUmF3VHlwZSwgaGFzQ2hhbmdlZCwgbG9vc2VUb051bWJlciwgaXNNb2RlbExpc3RlbmVyLCB0b051bWJlciB9IGZyb20gJ0B2dWUvc2hhcmVkJztcbmV4cG9ydCB7IGNhbWVsaXplLCBjYXBpdGFsaXplLCBub3JtYWxpemVDbGFzcywgbm9ybWFsaXplUHJvcHMsIG5vcm1hbGl6ZVN0eWxlLCB0b0Rpc3BsYXlTdHJpbmcsIHRvSGFuZGxlcktleSB9IGZyb20gJ0B2dWUvc2hhcmVkJztcblxuY29uc3Qgc3RhY2sgPSBbXTtcbmZ1bmN0aW9uIHB1c2hXYXJuaW5nQ29udGV4dCh2bm9kZSkge1xuICBzdGFjay5wdXNoKHZub2RlKTtcbn1cbmZ1bmN0aW9uIHBvcFdhcm5pbmdDb250ZXh0KCkge1xuICBzdGFjay5wb3AoKTtcbn1cbmxldCBpc1dhcm5pbmcgPSBmYWxzZTtcbmZ1bmN0aW9uIHdhcm4kMShtc2csIC4uLmFyZ3MpIHtcbiAgaWYgKGlzV2FybmluZykgcmV0dXJuO1xuICBpc1dhcm5pbmcgPSB0cnVlO1xuICBwYXVzZVRyYWNraW5nKCk7XG4gIGNvbnN0IGluc3RhbmNlID0gc3RhY2subGVuZ3RoID8gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0uY29tcG9uZW50IDogbnVsbDtcbiAgY29uc3QgYXBwV2FybkhhbmRsZXIgPSBpbnN0YW5jZSAmJiBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZy53YXJuSGFuZGxlcjtcbiAgY29uc3QgdHJhY2UgPSBnZXRDb21wb25lbnRUcmFjZSgpO1xuICBpZiAoYXBwV2FybkhhbmRsZXIpIHtcbiAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcoXG4gICAgICBhcHBXYXJuSGFuZGxlcixcbiAgICAgIGluc3RhbmNlLFxuICAgICAgMTEsXG4gICAgICBbXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgICBtc2cgKyBhcmdzLm1hcCgoYSkgPT4ge1xuICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgcmV0dXJuIChfYiA9IChfYSA9IGEudG9TdHJpbmcpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jYWxsKGEpKSAhPSBudWxsID8gX2IgOiBKU09OLnN0cmluZ2lmeShhKTtcbiAgICAgICAgfSkuam9pbihcIlwiKSxcbiAgICAgICAgaW5zdGFuY2UgJiYgaW5zdGFuY2UucHJveHksXG4gICAgICAgIHRyYWNlLm1hcChcbiAgICAgICAgICAoeyB2bm9kZSB9KSA9PiBgYXQgPCR7Zm9ybWF0Q29tcG9uZW50TmFtZShpbnN0YW5jZSwgdm5vZGUudHlwZSl9PmBcbiAgICAgICAgKS5qb2luKFwiXFxuXCIpLFxuICAgICAgICB0cmFjZVxuICAgICAgXVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3Qgd2FybkFyZ3MgPSBbYFtWdWUgd2Fybl06ICR7bXNnfWAsIC4uLmFyZ3NdO1xuICAgIGlmICh0cmFjZS5sZW5ndGggJiYgLy8gYXZvaWQgc3BhbW1pbmcgY29uc29sZSBkdXJpbmcgdGVzdHNcbiAgICB0cnVlKSB7XG4gICAgICB3YXJuQXJncy5wdXNoKGBcbmAsIC4uLmZvcm1hdFRyYWNlKHRyYWNlKSk7XG4gICAgfVxuICAgIGNvbnNvbGUud2FybiguLi53YXJuQXJncyk7XG4gIH1cbiAgcmVzZXRUcmFja2luZygpO1xuICBpc1dhcm5pbmcgPSBmYWxzZTtcbn1cbmZ1bmN0aW9uIGdldENvbXBvbmVudFRyYWNlKCkge1xuICBsZXQgY3VycmVudFZOb2RlID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG4gIGlmICghY3VycmVudFZOb2RlKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGNvbnN0IG5vcm1hbGl6ZWRTdGFjayA9IFtdO1xuICB3aGlsZSAoY3VycmVudFZOb2RlKSB7XG4gICAgY29uc3QgbGFzdCA9IG5vcm1hbGl6ZWRTdGFja1swXTtcbiAgICBpZiAobGFzdCAmJiBsYXN0LnZub2RlID09PSBjdXJyZW50Vk5vZGUpIHtcbiAgICAgIGxhc3QucmVjdXJzZUNvdW50Kys7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vcm1hbGl6ZWRTdGFjay5wdXNoKHtcbiAgICAgICAgdm5vZGU6IGN1cnJlbnRWTm9kZSxcbiAgICAgICAgcmVjdXJzZUNvdW50OiAwXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcGFyZW50SW5zdGFuY2UgPSBjdXJyZW50Vk5vZGUuY29tcG9uZW50ICYmIGN1cnJlbnRWTm9kZS5jb21wb25lbnQucGFyZW50O1xuICAgIGN1cnJlbnRWTm9kZSA9IHBhcmVudEluc3RhbmNlICYmIHBhcmVudEluc3RhbmNlLnZub2RlO1xuICB9XG4gIHJldHVybiBub3JtYWxpemVkU3RhY2s7XG59XG5mdW5jdGlvbiBmb3JtYXRUcmFjZSh0cmFjZSkge1xuICBjb25zdCBsb2dzID0gW107XG4gIHRyYWNlLmZvckVhY2goKGVudHJ5LCBpKSA9PiB7XG4gICAgbG9ncy5wdXNoKC4uLmkgPT09IDAgPyBbXSA6IFtgXG5gXSwgLi4uZm9ybWF0VHJhY2VFbnRyeShlbnRyeSkpO1xuICB9KTtcbiAgcmV0dXJuIGxvZ3M7XG59XG5mdW5jdGlvbiBmb3JtYXRUcmFjZUVudHJ5KHsgdm5vZGUsIHJlY3Vyc2VDb3VudCB9KSB7XG4gIGNvbnN0IHBvc3RmaXggPSByZWN1cnNlQ291bnQgPiAwID8gYC4uLiAoJHtyZWN1cnNlQ291bnR9IHJlY3Vyc2l2ZSBjYWxscylgIDogYGA7XG4gIGNvbnN0IGlzUm9vdCA9IHZub2RlLmNvbXBvbmVudCA/IHZub2RlLmNvbXBvbmVudC5wYXJlbnQgPT0gbnVsbCA6IGZhbHNlO1xuICBjb25zdCBvcGVuID0gYCBhdCA8JHtmb3JtYXRDb21wb25lbnROYW1lKFxuICAgIHZub2RlLmNvbXBvbmVudCxcbiAgICB2bm9kZS50eXBlLFxuICAgIGlzUm9vdFxuICApfWA7XG4gIGNvbnN0IGNsb3NlID0gYD5gICsgcG9zdGZpeDtcbiAgcmV0dXJuIHZub2RlLnByb3BzID8gW29wZW4sIC4uLmZvcm1hdFByb3BzKHZub2RlLnByb3BzKSwgY2xvc2VdIDogW29wZW4gKyBjbG9zZV07XG59XG5mdW5jdGlvbiBmb3JtYXRQcm9wcyhwcm9wcykge1xuICBjb25zdCByZXMgPSBbXTtcbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHByb3BzKTtcbiAga2V5cy5zbGljZSgwLCAzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICByZXMucHVzaCguLi5mb3JtYXRQcm9wKGtleSwgcHJvcHNba2V5XSkpO1xuICB9KTtcbiAgaWYgKGtleXMubGVuZ3RoID4gMykge1xuICAgIHJlcy5wdXNoKGAgLi4uYCk7XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIGZvcm1hdFByb3Aoa2V5LCB2YWx1ZSwgcmF3KSB7XG4gIGlmIChpc1N0cmluZyh2YWx1ZSkpIHtcbiAgICB2YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICByZXR1cm4gcmF3ID8gdmFsdWUgOiBbYCR7a2V5fT0ke3ZhbHVlfWBdO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiIHx8IHZhbHVlID09IG51bGwpIHtcbiAgICByZXR1cm4gcmF3ID8gdmFsdWUgOiBbYCR7a2V5fT0ke3ZhbHVlfWBdO1xuICB9IGVsc2UgaWYgKGlzUmVmKHZhbHVlKSkge1xuICAgIHZhbHVlID0gZm9ybWF0UHJvcChrZXksIHRvUmF3KHZhbHVlLnZhbHVlKSwgdHJ1ZSk7XG4gICAgcmV0dXJuIHJhdyA/IHZhbHVlIDogW2Ake2tleX09UmVmPGAsIHZhbHVlLCBgPmBdO1xuICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgcmV0dXJuIFtgJHtrZXl9PWZuJHt2YWx1ZS5uYW1lID8gYDwke3ZhbHVlLm5hbWV9PmAgOiBgYH1gXTtcbiAgfSBlbHNlIHtcbiAgICB2YWx1ZSA9IHRvUmF3KHZhbHVlKTtcbiAgICByZXR1cm4gcmF3ID8gdmFsdWUgOiBbYCR7a2V5fT1gLCB2YWx1ZV07XG4gIH1cbn1cbmZ1bmN0aW9uIGFzc2VydE51bWJlcih2YWwsIHR5cGUpIHtcbiAgaWYgKCEhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSByZXR1cm47XG4gIGlmICh2YWwgPT09IHZvaWQgMCkge1xuICAgIHJldHVybjtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsICE9PSBcIm51bWJlclwiKSB7XG4gICAgd2FybiQxKGAke3R5cGV9IGlzIG5vdCBhIHZhbGlkIG51bWJlciAtIGdvdCAke0pTT04uc3RyaW5naWZ5KHZhbCl9LmApO1xuICB9IGVsc2UgaWYgKGlzTmFOKHZhbCkpIHtcbiAgICB3YXJuJDEoYCR7dHlwZX0gaXMgTmFOIC0gdGhlIGR1cmF0aW9uIGV4cHJlc3Npb24gbWlnaHQgYmUgaW5jb3JyZWN0LmApO1xuICB9XG59XG5cbmNvbnN0IEVycm9yQ29kZXMgPSB7XG4gIFwiU0VUVVBfRlVOQ1RJT05cIjogMCxcbiAgXCIwXCI6IFwiU0VUVVBfRlVOQ1RJT05cIixcbiAgXCJSRU5ERVJfRlVOQ1RJT05cIjogMSxcbiAgXCIxXCI6IFwiUkVOREVSX0ZVTkNUSU9OXCIsXG4gIFwiTkFUSVZFX0VWRU5UX0hBTkRMRVJcIjogNSxcbiAgXCI1XCI6IFwiTkFUSVZFX0VWRU5UX0hBTkRMRVJcIixcbiAgXCJDT01QT05FTlRfRVZFTlRfSEFORExFUlwiOiA2LFxuICBcIjZcIjogXCJDT01QT05FTlRfRVZFTlRfSEFORExFUlwiLFxuICBcIlZOT0RFX0hPT0tcIjogNyxcbiAgXCI3XCI6IFwiVk5PREVfSE9PS1wiLFxuICBcIkRJUkVDVElWRV9IT09LXCI6IDgsXG4gIFwiOFwiOiBcIkRJUkVDVElWRV9IT09LXCIsXG4gIFwiVFJBTlNJVElPTl9IT09LXCI6IDksXG4gIFwiOVwiOiBcIlRSQU5TSVRJT05fSE9PS1wiLFxuICBcIkFQUF9FUlJPUl9IQU5ETEVSXCI6IDEwLFxuICBcIjEwXCI6IFwiQVBQX0VSUk9SX0hBTkRMRVJcIixcbiAgXCJBUFBfV0FSTl9IQU5ETEVSXCI6IDExLFxuICBcIjExXCI6IFwiQVBQX1dBUk5fSEFORExFUlwiLFxuICBcIkZVTkNUSU9OX1JFRlwiOiAxMixcbiAgXCIxMlwiOiBcIkZVTkNUSU9OX1JFRlwiLFxuICBcIkFTWU5DX0NPTVBPTkVOVF9MT0FERVJcIjogMTMsXG4gIFwiMTNcIjogXCJBU1lOQ19DT01QT05FTlRfTE9BREVSXCIsXG4gIFwiU0NIRURVTEVSXCI6IDE0LFxuICBcIjE0XCI6IFwiU0NIRURVTEVSXCIsXG4gIFwiQ09NUE9ORU5UX1VQREFURVwiOiAxNSxcbiAgXCIxNVwiOiBcIkNPTVBPTkVOVF9VUERBVEVcIixcbiAgXCJBUFBfVU5NT1VOVF9DTEVBTlVQXCI6IDE2LFxuICBcIjE2XCI6IFwiQVBQX1VOTU9VTlRfQ0xFQU5VUFwiXG59O1xuY29uc3QgRXJyb3JUeXBlU3RyaW5ncyQxID0ge1xuICBbXCJzcFwiXTogXCJzZXJ2ZXJQcmVmZXRjaCBob29rXCIsXG4gIFtcImJjXCJdOiBcImJlZm9yZUNyZWF0ZSBob29rXCIsXG4gIFtcImNcIl06IFwiY3JlYXRlZCBob29rXCIsXG4gIFtcImJtXCJdOiBcImJlZm9yZU1vdW50IGhvb2tcIixcbiAgW1wibVwiXTogXCJtb3VudGVkIGhvb2tcIixcbiAgW1wiYnVcIl06IFwiYmVmb3JlVXBkYXRlIGhvb2tcIixcbiAgW1widVwiXTogXCJ1cGRhdGVkXCIsXG4gIFtcImJ1bVwiXTogXCJiZWZvcmVVbm1vdW50IGhvb2tcIixcbiAgW1widW1cIl06IFwidW5tb3VudGVkIGhvb2tcIixcbiAgW1wiYVwiXTogXCJhY3RpdmF0ZWQgaG9va1wiLFxuICBbXCJkYVwiXTogXCJkZWFjdGl2YXRlZCBob29rXCIsXG4gIFtcImVjXCJdOiBcImVycm9yQ2FwdHVyZWQgaG9va1wiLFxuICBbXCJydGNcIl06IFwicmVuZGVyVHJhY2tlZCBob29rXCIsXG4gIFtcInJ0Z1wiXTogXCJyZW5kZXJUcmlnZ2VyZWQgaG9va1wiLFxuICBbMF06IFwic2V0dXAgZnVuY3Rpb25cIixcbiAgWzFdOiBcInJlbmRlciBmdW5jdGlvblwiLFxuICBbMl06IFwid2F0Y2hlciBnZXR0ZXJcIixcbiAgWzNdOiBcIndhdGNoZXIgY2FsbGJhY2tcIixcbiAgWzRdOiBcIndhdGNoZXIgY2xlYW51cCBmdW5jdGlvblwiLFxuICBbNV06IFwibmF0aXZlIGV2ZW50IGhhbmRsZXJcIixcbiAgWzZdOiBcImNvbXBvbmVudCBldmVudCBoYW5kbGVyXCIsXG4gIFs3XTogXCJ2bm9kZSBob29rXCIsXG4gIFs4XTogXCJkaXJlY3RpdmUgaG9va1wiLFxuICBbOV06IFwidHJhbnNpdGlvbiBob29rXCIsXG4gIFsxMF06IFwiYXBwIGVycm9ySGFuZGxlclwiLFxuICBbMTFdOiBcImFwcCB3YXJuSGFuZGxlclwiLFxuICBbMTJdOiBcInJlZiBmdW5jdGlvblwiLFxuICBbMTNdOiBcImFzeW5jIGNvbXBvbmVudCBsb2FkZXJcIixcbiAgWzE0XTogXCJzY2hlZHVsZXIgZmx1c2hcIixcbiAgWzE1XTogXCJjb21wb25lbnQgdXBkYXRlXCIsXG4gIFsxNl06IFwiYXBwIHVubW91bnQgY2xlYW51cCBmdW5jdGlvblwiXG59O1xuZnVuY3Rpb24gY2FsbFdpdGhFcnJvckhhbmRsaW5nKGZuLCBpbnN0YW5jZSwgdHlwZSwgYXJncykge1xuICB0cnkge1xuICAgIHJldHVybiBhcmdzID8gZm4oLi4uYXJncykgOiBmbigpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBoYW5kbGVFcnJvcihlcnIsIGluc3RhbmNlLCB0eXBlKTtcbiAgfVxufVxuZnVuY3Rpb24gY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoZm4sIGluc3RhbmNlLCB0eXBlLCBhcmdzKSB7XG4gIGlmIChpc0Z1bmN0aW9uKGZuKSkge1xuICAgIGNvbnN0IHJlcyA9IGNhbGxXaXRoRXJyb3JIYW5kbGluZyhmbiwgaW5zdGFuY2UsIHR5cGUsIGFyZ3MpO1xuICAgIGlmIChyZXMgJiYgaXNQcm9taXNlKHJlcykpIHtcbiAgICAgIHJlcy5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGhhbmRsZUVycm9yKGVyciwgaW5zdGFuY2UsIHR5cGUpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cbiAgaWYgKGlzQXJyYXkoZm4pKSB7XG4gICAgY29uc3QgdmFsdWVzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbi5sZW5ndGg7IGkrKykge1xuICAgICAgdmFsdWVzLnB1c2goY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoZm5baV0sIGluc3RhbmNlLCB0eXBlLCBhcmdzKSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm4kMShcbiAgICAgIGBJbnZhbGlkIHZhbHVlIHR5cGUgcGFzc2VkIHRvIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKCk6ICR7dHlwZW9mIGZufWBcbiAgICApO1xuICB9XG59XG5mdW5jdGlvbiBoYW5kbGVFcnJvcihlcnIsIGluc3RhbmNlLCB0eXBlLCB0aHJvd0luRGV2ID0gdHJ1ZSkge1xuICBjb25zdCBjb250ZXh0Vk5vZGUgPSBpbnN0YW5jZSA/IGluc3RhbmNlLnZub2RlIDogbnVsbDtcbiAgY29uc3QgeyBlcnJvckhhbmRsZXIsIHRocm93VW5oYW5kbGVkRXJyb3JJblByb2R1Y3Rpb24gfSA9IGluc3RhbmNlICYmIGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnIHx8IEVNUFRZX09CSjtcbiAgaWYgKGluc3RhbmNlKSB7XG4gICAgbGV0IGN1ciA9IGluc3RhbmNlLnBhcmVudDtcbiAgICBjb25zdCBleHBvc2VkSW5zdGFuY2UgPSBpbnN0YW5jZS5wcm94eTtcbiAgICBjb25zdCBlcnJvckluZm8gPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gRXJyb3JUeXBlU3RyaW5ncyQxW3R5cGVdIDogYGh0dHBzOi8vdnVlanMub3JnL2Vycm9yLXJlZmVyZW5jZS8jcnVudGltZS0ke3R5cGV9YDtcbiAgICB3aGlsZSAoY3VyKSB7XG4gICAgICBjb25zdCBlcnJvckNhcHR1cmVkSG9va3MgPSBjdXIuZWM7XG4gICAgICBpZiAoZXJyb3JDYXB0dXJlZEhvb2tzKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXJyb3JDYXB0dXJlZEhvb2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGVycm9yQ2FwdHVyZWRIb29rc1tpXShlcnIsIGV4cG9zZWRJbnN0YW5jZSwgZXJyb3JJbmZvKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGN1ciA9IGN1ci5wYXJlbnQ7XG4gICAgfVxuICAgIGlmIChlcnJvckhhbmRsZXIpIHtcbiAgICAgIHBhdXNlVHJhY2tpbmcoKTtcbiAgICAgIGNhbGxXaXRoRXJyb3JIYW5kbGluZyhlcnJvckhhbmRsZXIsIG51bGwsIDEwLCBbXG4gICAgICAgIGVycixcbiAgICAgICAgZXhwb3NlZEluc3RhbmNlLFxuICAgICAgICBlcnJvckluZm9cbiAgICAgIF0pO1xuICAgICAgcmVzZXRUcmFja2luZygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuICBsb2dFcnJvcihlcnIsIHR5cGUsIGNvbnRleHRWTm9kZSwgdGhyb3dJbkRldiwgdGhyb3dVbmhhbmRsZWRFcnJvckluUHJvZHVjdGlvbik7XG59XG5mdW5jdGlvbiBsb2dFcnJvcihlcnIsIHR5cGUsIGNvbnRleHRWTm9kZSwgdGhyb3dJbkRldiA9IHRydWUsIHRocm93SW5Qcm9kID0gZmFsc2UpIHtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBjb25zdCBpbmZvID0gRXJyb3JUeXBlU3RyaW5ncyQxW3R5cGVdO1xuICAgIGlmIChjb250ZXh0Vk5vZGUpIHtcbiAgICAgIHB1c2hXYXJuaW5nQ29udGV4dChjb250ZXh0Vk5vZGUpO1xuICAgIH1cbiAgICB3YXJuJDEoYFVuaGFuZGxlZCBlcnJvciR7aW5mbyA/IGAgZHVyaW5nIGV4ZWN1dGlvbiBvZiAke2luZm99YCA6IGBgfWApO1xuICAgIGlmIChjb250ZXh0Vk5vZGUpIHtcbiAgICAgIHBvcFdhcm5pbmdDb250ZXh0KCk7XG4gICAgfVxuICAgIGlmICh0aHJvd0luRGV2KSB7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAodGhyb3dJblByb2QpIHtcbiAgICB0aHJvdyBlcnI7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9XG59XG5cbmNvbnN0IHF1ZXVlID0gW107XG5sZXQgZmx1c2hJbmRleCA9IC0xO1xuY29uc3QgcGVuZGluZ1Bvc3RGbHVzaENicyA9IFtdO1xubGV0IGFjdGl2ZVBvc3RGbHVzaENicyA9IG51bGw7XG5sZXQgcG9zdEZsdXNoSW5kZXggPSAwO1xuY29uc3QgcmVzb2x2ZWRQcm9taXNlID0gLyogQF9fUFVSRV9fICovIFByb21pc2UucmVzb2x2ZSgpO1xubGV0IGN1cnJlbnRGbHVzaFByb21pc2UgPSBudWxsO1xuY29uc3QgUkVDVVJTSU9OX0xJTUlUID0gMTAwO1xuZnVuY3Rpb24gbmV4dFRpY2soZm4pIHtcbiAgY29uc3QgcCA9IGN1cnJlbnRGbHVzaFByb21pc2UgfHwgcmVzb2x2ZWRQcm9taXNlO1xuICByZXR1cm4gZm4gPyBwLnRoZW4odGhpcyA/IGZuLmJpbmQodGhpcykgOiBmbikgOiBwO1xufVxuZnVuY3Rpb24gZmluZEluc2VydGlvbkluZGV4KGlkKSB7XG4gIGxldCBzdGFydCA9IGZsdXNoSW5kZXggKyAxO1xuICBsZXQgZW5kID0gcXVldWUubGVuZ3RoO1xuICB3aGlsZSAoc3RhcnQgPCBlbmQpIHtcbiAgICBjb25zdCBtaWRkbGUgPSBzdGFydCArIGVuZCA+Pj4gMTtcbiAgICBjb25zdCBtaWRkbGVKb2IgPSBxdWV1ZVttaWRkbGVdO1xuICAgIGNvbnN0IG1pZGRsZUpvYklkID0gZ2V0SWQobWlkZGxlSm9iKTtcbiAgICBpZiAobWlkZGxlSm9iSWQgPCBpZCB8fCBtaWRkbGVKb2JJZCA9PT0gaWQgJiYgbWlkZGxlSm9iLmZsYWdzICYgMikge1xuICAgICAgc3RhcnQgPSBtaWRkbGUgKyAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbmQgPSBtaWRkbGU7XG4gICAgfVxuICB9XG4gIHJldHVybiBzdGFydDtcbn1cbmZ1bmN0aW9uIHF1ZXVlSm9iKGpvYikge1xuICBpZiAoIShqb2IuZmxhZ3MgJiAxKSkge1xuICAgIGNvbnN0IGpvYklkID0gZ2V0SWQoam9iKTtcbiAgICBjb25zdCBsYXN0Sm9iID0gcXVldWVbcXVldWUubGVuZ3RoIC0gMV07XG4gICAgaWYgKCFsYXN0Sm9iIHx8IC8vIGZhc3QgcGF0aCB3aGVuIHRoZSBqb2IgaWQgaXMgbGFyZ2VyIHRoYW4gdGhlIHRhaWxcbiAgICAhKGpvYi5mbGFncyAmIDIpICYmIGpvYklkID49IGdldElkKGxhc3RKb2IpKSB7XG4gICAgICBxdWV1ZS5wdXNoKGpvYik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHF1ZXVlLnNwbGljZShmaW5kSW5zZXJ0aW9uSW5kZXgoam9iSWQpLCAwLCBqb2IpO1xuICAgIH1cbiAgICBqb2IuZmxhZ3MgfD0gMTtcbiAgICBxdWV1ZUZsdXNoKCk7XG4gIH1cbn1cbmZ1bmN0aW9uIHF1ZXVlRmx1c2goKSB7XG4gIGlmICghY3VycmVudEZsdXNoUHJvbWlzZSkge1xuICAgIGN1cnJlbnRGbHVzaFByb21pc2UgPSByZXNvbHZlZFByb21pc2UudGhlbihmbHVzaEpvYnMpO1xuICB9XG59XG5mdW5jdGlvbiBxdWV1ZVBvc3RGbHVzaENiKGNiKSB7XG4gIGlmICghaXNBcnJheShjYikpIHtcbiAgICBpZiAoYWN0aXZlUG9zdEZsdXNoQ2JzICYmIGNiLmlkID09PSAtMSkge1xuICAgICAgYWN0aXZlUG9zdEZsdXNoQ2JzLnNwbGljZShwb3N0Rmx1c2hJbmRleCArIDEsIDAsIGNiKTtcbiAgICB9IGVsc2UgaWYgKCEoY2IuZmxhZ3MgJiAxKSkge1xuICAgICAgcGVuZGluZ1Bvc3RGbHVzaENicy5wdXNoKGNiKTtcbiAgICAgIGNiLmZsYWdzIHw9IDE7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHBlbmRpbmdQb3N0Rmx1c2hDYnMucHVzaCguLi5jYik7XG4gIH1cbiAgcXVldWVGbHVzaCgpO1xufVxuZnVuY3Rpb24gZmx1c2hQcmVGbHVzaENicyhpbnN0YW5jZSwgc2VlbiwgaSA9IGZsdXNoSW5kZXggKyAxKSB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgc2VlbiA9IHNlZW4gfHwgLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgfVxuICBmb3IgKDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgY2IgPSBxdWV1ZVtpXTtcbiAgICBpZiAoY2IgJiYgY2IuZmxhZ3MgJiAyKSB7XG4gICAgICBpZiAoaW5zdGFuY2UgJiYgY2IuaWQgIT09IGluc3RhbmNlLnVpZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGNoZWNrUmVjdXJzaXZlVXBkYXRlcyhzZWVuLCBjYikpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBxdWV1ZS5zcGxpY2UoaSwgMSk7XG4gICAgICBpLS07XG4gICAgICBpZiAoY2IuZmxhZ3MgJiA0KSB7XG4gICAgICAgIGNiLmZsYWdzICY9IC0yO1xuICAgICAgfVxuICAgICAgY2IoKTtcbiAgICAgIGlmICghKGNiLmZsYWdzICYgNCkpIHtcbiAgICAgICAgY2IuZmxhZ3MgJj0gLTI7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBmbHVzaFBvc3RGbHVzaENicyhzZWVuKSB7XG4gIGlmIChwZW5kaW5nUG9zdEZsdXNoQ2JzLmxlbmd0aCkge1xuICAgIGNvbnN0IGRlZHVwZWQgPSBbLi4ubmV3IFNldChwZW5kaW5nUG9zdEZsdXNoQ2JzKV0uc29ydChcbiAgICAgIChhLCBiKSA9PiBnZXRJZChhKSAtIGdldElkKGIpXG4gICAgKTtcbiAgICBwZW5kaW5nUG9zdEZsdXNoQ2JzLmxlbmd0aCA9IDA7XG4gICAgaWYgKGFjdGl2ZVBvc3RGbHVzaENicykge1xuICAgICAgYWN0aXZlUG9zdEZsdXNoQ2JzLnB1c2goLi4uZGVkdXBlZCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjdGl2ZVBvc3RGbHVzaENicyA9IGRlZHVwZWQ7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIHNlZW4gPSBzZWVuIHx8IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgfVxuICAgIGZvciAocG9zdEZsdXNoSW5kZXggPSAwOyBwb3N0Rmx1c2hJbmRleCA8IGFjdGl2ZVBvc3RGbHVzaENicy5sZW5ndGg7IHBvc3RGbHVzaEluZGV4KyspIHtcbiAgICAgIGNvbnN0IGNiID0gYWN0aXZlUG9zdEZsdXNoQ2JzW3Bvc3RGbHVzaEluZGV4XTtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGNoZWNrUmVjdXJzaXZlVXBkYXRlcyhzZWVuLCBjYikpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoY2IuZmxhZ3MgJiA0KSB7XG4gICAgICAgIGNiLmZsYWdzICY9IC0yO1xuICAgICAgfVxuICAgICAgaWYgKCEoY2IuZmxhZ3MgJiA4KSkgY2IoKTtcbiAgICAgIGNiLmZsYWdzICY9IC0yO1xuICAgIH1cbiAgICBhY3RpdmVQb3N0Rmx1c2hDYnMgPSBudWxsO1xuICAgIHBvc3RGbHVzaEluZGV4ID0gMDtcbiAgfVxufVxuY29uc3QgZ2V0SWQgPSAoam9iKSA9PiBqb2IuaWQgPT0gbnVsbCA/IGpvYi5mbGFncyAmIDIgPyAtMSA6IEluZmluaXR5IDogam9iLmlkO1xuZnVuY3Rpb24gZmx1c2hKb2JzKHNlZW4pIHtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBzZWVuID0gc2VlbiB8fCAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICB9XG4gIGNvbnN0IGNoZWNrID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IChqb2IpID0+IGNoZWNrUmVjdXJzaXZlVXBkYXRlcyhzZWVuLCBqb2IpIDogTk9PUDtcbiAgdHJ5IHtcbiAgICBmb3IgKGZsdXNoSW5kZXggPSAwOyBmbHVzaEluZGV4IDwgcXVldWUubGVuZ3RoOyBmbHVzaEluZGV4KyspIHtcbiAgICAgIGNvbnN0IGpvYiA9IHF1ZXVlW2ZsdXNoSW5kZXhdO1xuICAgICAgaWYgKGpvYiAmJiAhKGpvYi5mbGFncyAmIDgpKSB7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGNoZWNrKGpvYikpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoam9iLmZsYWdzICYgNCkge1xuICAgICAgICAgIGpvYi5mbGFncyAmPSB+MTtcbiAgICAgICAgfVxuICAgICAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcoXG4gICAgICAgICAgam9iLFxuICAgICAgICAgIGpvYi5pLFxuICAgICAgICAgIGpvYi5pID8gMTUgOiAxNFxuICAgICAgICApO1xuICAgICAgICBpZiAoIShqb2IuZmxhZ3MgJiA0KSkge1xuICAgICAgICAgIGpvYi5mbGFncyAmPSB+MTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBmaW5hbGx5IHtcbiAgICBmb3IgKDsgZmx1c2hJbmRleCA8IHF1ZXVlLmxlbmd0aDsgZmx1c2hJbmRleCsrKSB7XG4gICAgICBjb25zdCBqb2IgPSBxdWV1ZVtmbHVzaEluZGV4XTtcbiAgICAgIGlmIChqb2IpIHtcbiAgICAgICAgam9iLmZsYWdzICY9IC0yO1xuICAgICAgfVxuICAgIH1cbiAgICBmbHVzaEluZGV4ID0gLTE7XG4gICAgcXVldWUubGVuZ3RoID0gMDtcbiAgICBmbHVzaFBvc3RGbHVzaENicyhzZWVuKTtcbiAgICBjdXJyZW50Rmx1c2hQcm9taXNlID0gbnVsbDtcbiAgICBpZiAocXVldWUubGVuZ3RoIHx8IHBlbmRpbmdQb3N0Rmx1c2hDYnMubGVuZ3RoKSB7XG4gICAgICBmbHVzaEpvYnMoc2Vlbik7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBjaGVja1JlY3Vyc2l2ZVVwZGF0ZXMoc2VlbiwgZm4pIHtcbiAgY29uc3QgY291bnQgPSBzZWVuLmdldChmbikgfHwgMDtcbiAgaWYgKGNvdW50ID4gUkVDVVJTSU9OX0xJTUlUKSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBmbi5pO1xuICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBpbnN0YW5jZSAmJiBnZXRDb21wb25lbnROYW1lKGluc3RhbmNlLnR5cGUpO1xuICAgIGhhbmRsZUVycm9yKFxuICAgICAgYE1heGltdW0gcmVjdXJzaXZlIHVwZGF0ZXMgZXhjZWVkZWQke2NvbXBvbmVudE5hbWUgPyBgIGluIGNvbXBvbmVudCA8JHtjb21wb25lbnROYW1lfT5gIDogYGB9LiBUaGlzIG1lYW5zIHlvdSBoYXZlIGEgcmVhY3RpdmUgZWZmZWN0IHRoYXQgaXMgbXV0YXRpbmcgaXRzIG93biBkZXBlbmRlbmNpZXMgYW5kIHRodXMgcmVjdXJzaXZlbHkgdHJpZ2dlcmluZyBpdHNlbGYuIFBvc3NpYmxlIHNvdXJjZXMgaW5jbHVkZSBjb21wb25lbnQgdGVtcGxhdGUsIHJlbmRlciBmdW5jdGlvbiwgdXBkYXRlZCBob29rIG9yIHdhdGNoZXIgc291cmNlIGZ1bmN0aW9uLmAsXG4gICAgICBudWxsLFxuICAgICAgMTBcbiAgICApO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHNlZW4uc2V0KGZuLCBjb3VudCArIDEpO1xuICByZXR1cm4gZmFsc2U7XG59XG5cbmxldCBpc0htclVwZGF0aW5nID0gZmFsc2U7XG5jb25zdCBobXJEaXJ0eUNvbXBvbmVudHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgZ2V0R2xvYmFsVGhpcygpLl9fVlVFX0hNUl9SVU5USU1FX18gPSB7XG4gICAgY3JlYXRlUmVjb3JkOiB0cnlXcmFwKGNyZWF0ZVJlY29yZCksXG4gICAgcmVyZW5kZXI6IHRyeVdyYXAocmVyZW5kZXIpLFxuICAgIHJlbG9hZDogdHJ5V3JhcChyZWxvYWQpXG4gIH07XG59XG5jb25zdCBtYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuZnVuY3Rpb24gcmVnaXN0ZXJITVIoaW5zdGFuY2UpIHtcbiAgY29uc3QgaWQgPSBpbnN0YW5jZS50eXBlLl9faG1ySWQ7XG4gIGxldCByZWNvcmQgPSBtYXAuZ2V0KGlkKTtcbiAgaWYgKCFyZWNvcmQpIHtcbiAgICBjcmVhdGVSZWNvcmQoaWQsIGluc3RhbmNlLnR5cGUpO1xuICAgIHJlY29yZCA9IG1hcC5nZXQoaWQpO1xuICB9XG4gIHJlY29yZC5pbnN0YW5jZXMuYWRkKGluc3RhbmNlKTtcbn1cbmZ1bmN0aW9uIHVucmVnaXN0ZXJITVIoaW5zdGFuY2UpIHtcbiAgbWFwLmdldChpbnN0YW5jZS50eXBlLl9faG1ySWQpLmluc3RhbmNlcy5kZWxldGUoaW5zdGFuY2UpO1xufVxuZnVuY3Rpb24gY3JlYXRlUmVjb3JkKGlkLCBpbml0aWFsRGVmKSB7XG4gIGlmIChtYXAuaGFzKGlkKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBtYXAuc2V0KGlkLCB7XG4gICAgaW5pdGlhbERlZjogbm9ybWFsaXplQ2xhc3NDb21wb25lbnQoaW5pdGlhbERlZiksXG4gICAgaW5zdGFuY2VzOiAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpXG4gIH0pO1xuICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUNsYXNzQ29tcG9uZW50KGNvbXBvbmVudCkge1xuICByZXR1cm4gaXNDbGFzc0NvbXBvbmVudChjb21wb25lbnQpID8gY29tcG9uZW50Ll9fdmNjT3B0cyA6IGNvbXBvbmVudDtcbn1cbmZ1bmN0aW9uIHJlcmVuZGVyKGlkLCBuZXdSZW5kZXIpIHtcbiAgY29uc3QgcmVjb3JkID0gbWFwLmdldChpZCk7XG4gIGlmICghcmVjb3JkKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHJlY29yZC5pbml0aWFsRGVmLnJlbmRlciA9IG5ld1JlbmRlcjtcbiAgWy4uLnJlY29yZC5pbnN0YW5jZXNdLmZvckVhY2goKGluc3RhbmNlKSA9PiB7XG4gICAgaWYgKG5ld1JlbmRlcikge1xuICAgICAgaW5zdGFuY2UucmVuZGVyID0gbmV3UmVuZGVyO1xuICAgICAgbm9ybWFsaXplQ2xhc3NDb21wb25lbnQoaW5zdGFuY2UudHlwZSkucmVuZGVyID0gbmV3UmVuZGVyO1xuICAgIH1cbiAgICBpbnN0YW5jZS5yZW5kZXJDYWNoZSA9IFtdO1xuICAgIGlzSG1yVXBkYXRpbmcgPSB0cnVlO1xuICAgIGluc3RhbmNlLnVwZGF0ZSgpO1xuICAgIGlzSG1yVXBkYXRpbmcgPSBmYWxzZTtcbiAgfSk7XG59XG5mdW5jdGlvbiByZWxvYWQoaWQsIG5ld0NvbXApIHtcbiAgY29uc3QgcmVjb3JkID0gbWFwLmdldChpZCk7XG4gIGlmICghcmVjb3JkKSByZXR1cm47XG4gIG5ld0NvbXAgPSBub3JtYWxpemVDbGFzc0NvbXBvbmVudChuZXdDb21wKTtcbiAgdXBkYXRlQ29tcG9uZW50RGVmKHJlY29yZC5pbml0aWFsRGVmLCBuZXdDb21wKTtcbiAgY29uc3QgaW5zdGFuY2VzID0gWy4uLnJlY29yZC5pbnN0YW5jZXNdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGluc3RhbmNlcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzW2ldO1xuICAgIGNvbnN0IG9sZENvbXAgPSBub3JtYWxpemVDbGFzc0NvbXBvbmVudChpbnN0YW5jZS50eXBlKTtcbiAgICBsZXQgZGlydHlJbnN0YW5jZXMgPSBobXJEaXJ0eUNvbXBvbmVudHMuZ2V0KG9sZENvbXApO1xuICAgIGlmICghZGlydHlJbnN0YW5jZXMpIHtcbiAgICAgIGlmIChvbGRDb21wICE9PSByZWNvcmQuaW5pdGlhbERlZikge1xuICAgICAgICB1cGRhdGVDb21wb25lbnREZWYob2xkQ29tcCwgbmV3Q29tcCk7XG4gICAgICB9XG4gICAgICBobXJEaXJ0eUNvbXBvbmVudHMuc2V0KG9sZENvbXAsIGRpcnR5SW5zdGFuY2VzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSk7XG4gICAgfVxuICAgIGRpcnR5SW5zdGFuY2VzLmFkZChpbnN0YW5jZSk7XG4gICAgaW5zdGFuY2UuYXBwQ29udGV4dC5wcm9wc0NhY2hlLmRlbGV0ZShpbnN0YW5jZS50eXBlKTtcbiAgICBpbnN0YW5jZS5hcHBDb250ZXh0LmVtaXRzQ2FjaGUuZGVsZXRlKGluc3RhbmNlLnR5cGUpO1xuICAgIGluc3RhbmNlLmFwcENvbnRleHQub3B0aW9uc0NhY2hlLmRlbGV0ZShpbnN0YW5jZS50eXBlKTtcbiAgICBpZiAoaW5zdGFuY2UuY2VSZWxvYWQpIHtcbiAgICAgIGRpcnR5SW5zdGFuY2VzLmFkZChpbnN0YW5jZSk7XG4gICAgICBpbnN0YW5jZS5jZVJlbG9hZChuZXdDb21wLnN0eWxlcyk7XG4gICAgICBkaXJ0eUluc3RhbmNlcy5kZWxldGUoaW5zdGFuY2UpO1xuICAgIH0gZWxzZSBpZiAoaW5zdGFuY2UucGFyZW50KSB7XG4gICAgICBxdWV1ZUpvYigoKSA9PiB7XG4gICAgICAgIGlzSG1yVXBkYXRpbmcgPSB0cnVlO1xuICAgICAgICBpbnN0YW5jZS5wYXJlbnQudXBkYXRlKCk7XG4gICAgICAgIGlzSG1yVXBkYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgZGlydHlJbnN0YW5jZXMuZGVsZXRlKGluc3RhbmNlKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoaW5zdGFuY2UuYXBwQ29udGV4dC5yZWxvYWQpIHtcbiAgICAgIGluc3RhbmNlLmFwcENvbnRleHQucmVsb2FkKCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJbSE1SXSBSb290IG9yIG1hbnVhbGx5IG1vdW50ZWQgaW5zdGFuY2UgbW9kaWZpZWQuIEZ1bGwgcmVsb2FkIHJlcXVpcmVkLlwiXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoaW5zdGFuY2Uucm9vdC5jZSAmJiBpbnN0YW5jZSAhPT0gaW5zdGFuY2Uucm9vdCkge1xuICAgICAgaW5zdGFuY2Uucm9vdC5jZS5fcmVtb3ZlQ2hpbGRTdHlsZShvbGRDb21wKTtcbiAgICB9XG4gIH1cbiAgcXVldWVQb3N0Rmx1c2hDYigoKSA9PiB7XG4gICAgaG1yRGlydHlDb21wb25lbnRzLmNsZWFyKCk7XG4gIH0pO1xufVxuZnVuY3Rpb24gdXBkYXRlQ29tcG9uZW50RGVmKG9sZENvbXAsIG5ld0NvbXApIHtcbiAgZXh0ZW5kKG9sZENvbXAsIG5ld0NvbXApO1xuICBmb3IgKGNvbnN0IGtleSBpbiBvbGRDb21wKSB7XG4gICAgaWYgKGtleSAhPT0gXCJfX2ZpbGVcIiAmJiAhKGtleSBpbiBuZXdDb21wKSkge1xuICAgICAgZGVsZXRlIG9sZENvbXBba2V5XTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIHRyeVdyYXAoZm4pIHtcbiAgcmV0dXJuIChpZCwgYXJnKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBmbihpZCwgYXJnKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgW0hNUl0gU29tZXRoaW5nIHdlbnQgd3JvbmcgZHVyaW5nIFZ1ZSBjb21wb25lbnQgaG90LXJlbG9hZC4gRnVsbCByZWxvYWQgcmVxdWlyZWQuYFxuICAgICAgKTtcbiAgICB9XG4gIH07XG59XG5cbmxldCBkZXZ0b29scyQxO1xubGV0IGJ1ZmZlciA9IFtdO1xubGV0IGRldnRvb2xzTm90SW5zdGFsbGVkID0gZmFsc2U7XG5mdW5jdGlvbiBlbWl0JDEoZXZlbnQsIC4uLmFyZ3MpIHtcbiAgaWYgKGRldnRvb2xzJDEpIHtcbiAgICBkZXZ0b29scyQxLmVtaXQoZXZlbnQsIC4uLmFyZ3MpO1xuICB9IGVsc2UgaWYgKCFkZXZ0b29sc05vdEluc3RhbGxlZCkge1xuICAgIGJ1ZmZlci5wdXNoKHsgZXZlbnQsIGFyZ3MgfSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHNldERldnRvb2xzSG9vayQxKGhvb2ssIHRhcmdldCkge1xuICB2YXIgX2EsIF9iO1xuICBkZXZ0b29scyQxID0gaG9vaztcbiAgaWYgKGRldnRvb2xzJDEpIHtcbiAgICBkZXZ0b29scyQxLmVuYWJsZWQgPSB0cnVlO1xuICAgIGJ1ZmZlci5mb3JFYWNoKCh7IGV2ZW50LCBhcmdzIH0pID0+IGRldnRvb2xzJDEuZW1pdChldmVudCwgLi4uYXJncykpO1xuICAgIGJ1ZmZlciA9IFtdO1xuICB9IGVsc2UgaWYgKFxuICAgIC8vIGhhbmRsZSBsYXRlIGRldnRvb2xzIGluamVjdGlvbiAtIG9ubHkgZG8gdGhpcyBpZiB3ZSBhcmUgaW4gYW4gYWN0dWFsXG4gICAgLy8gYnJvd3NlciBlbnZpcm9ubWVudCB0byBhdm9pZCB0aGUgdGltZXIgaGFuZGxlIHN0YWxsaW5nIHRlc3QgcnVubmVyIGV4aXRcbiAgICAvLyAoIzQ4MTUpXG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiAvLyBzb21lIGVudnMgbW9jayB3aW5kb3cgYnV0IG5vdCBmdWxseVxuICAgIHdpbmRvdy5IVE1MRWxlbWVudCAmJiAvLyBhbHNvIGV4Y2x1ZGUganNkb21cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICAhKChfYiA9IChfYSA9IHdpbmRvdy5uYXZpZ2F0b3IpID09IG51bGwgPyB2b2lkIDAgOiBfYS51c2VyQWdlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYi5pbmNsdWRlcyhcImpzZG9tXCIpKVxuICApIHtcbiAgICBjb25zdCByZXBsYXkgPSB0YXJnZXQuX19WVUVfREVWVE9PTFNfSE9PS19SRVBMQVlfXyA9IHRhcmdldC5fX1ZVRV9ERVZUT09MU19IT09LX1JFUExBWV9fIHx8IFtdO1xuICAgIHJlcGxheS5wdXNoKChuZXdIb29rKSA9PiB7XG4gICAgICBzZXREZXZ0b29sc0hvb2skMShuZXdIb29rLCB0YXJnZXQpO1xuICAgIH0pO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKCFkZXZ0b29scyQxKSB7XG4gICAgICAgIHRhcmdldC5fX1ZVRV9ERVZUT09MU19IT09LX1JFUExBWV9fID0gbnVsbDtcbiAgICAgICAgZGV2dG9vbHNOb3RJbnN0YWxsZWQgPSB0cnVlO1xuICAgICAgICBidWZmZXIgPSBbXTtcbiAgICAgIH1cbiAgICB9LCAzZTMpO1xuICB9IGVsc2Uge1xuICAgIGRldnRvb2xzTm90SW5zdGFsbGVkID0gdHJ1ZTtcbiAgICBidWZmZXIgPSBbXTtcbiAgfVxufVxuZnVuY3Rpb24gZGV2dG9vbHNJbml0QXBwKGFwcCwgdmVyc2lvbikge1xuICBlbWl0JDEoXCJhcHA6aW5pdFwiIC8qIEFQUF9JTklUICovLCBhcHAsIHZlcnNpb24sIHtcbiAgICBGcmFnbWVudCxcbiAgICBUZXh0LFxuICAgIENvbW1lbnQsXG4gICAgU3RhdGljXG4gIH0pO1xufVxuZnVuY3Rpb24gZGV2dG9vbHNVbm1vdW50QXBwKGFwcCkge1xuICBlbWl0JDEoXCJhcHA6dW5tb3VudFwiIC8qIEFQUF9VTk1PVU5UICovLCBhcHApO1xufVxuY29uc3QgZGV2dG9vbHNDb21wb25lbnRBZGRlZCA9IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVEZXZ0b29sc0NvbXBvbmVudEhvb2soXCJjb21wb25lbnQ6YWRkZWRcIiAvKiBDT01QT05FTlRfQURERUQgKi8pO1xuY29uc3QgZGV2dG9vbHNDb21wb25lbnRVcGRhdGVkID0gLyogQF9fUFVSRV9fICovIGNyZWF0ZURldnRvb2xzQ29tcG9uZW50SG9vayhcImNvbXBvbmVudDp1cGRhdGVkXCIgLyogQ09NUE9ORU5UX1VQREFURUQgKi8pO1xuY29uc3QgX2RldnRvb2xzQ29tcG9uZW50UmVtb3ZlZCA9IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVEZXZ0b29sc0NvbXBvbmVudEhvb2soXG4gIFwiY29tcG9uZW50OnJlbW92ZWRcIiAvKiBDT01QT05FTlRfUkVNT1ZFRCAqL1xuKTtcbmNvbnN0IGRldnRvb2xzQ29tcG9uZW50UmVtb3ZlZCA9IChjb21wb25lbnQpID0+IHtcbiAgaWYgKGRldnRvb2xzJDEgJiYgdHlwZW9mIGRldnRvb2xzJDEuY2xlYW51cEJ1ZmZlciA9PT0gXCJmdW5jdGlvblwiICYmIC8vIHJlbW92ZSB0aGUgY29tcG9uZW50IGlmIGl0IHdhc24ndCBidWZmZXJlZFxuICAhZGV2dG9vbHMkMS5jbGVhbnVwQnVmZmVyKGNvbXBvbmVudCkpIHtcbiAgICBfZGV2dG9vbHNDb21wb25lbnRSZW1vdmVkKGNvbXBvbmVudCk7XG4gIH1cbn07XG4vKiEgI19fTk9fU0lERV9FRkZFQ1RTX18gKi9cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5mdW5jdGlvbiBjcmVhdGVEZXZ0b29sc0NvbXBvbmVudEhvb2soaG9vaykge1xuICByZXR1cm4gKGNvbXBvbmVudCkgPT4ge1xuICAgIGVtaXQkMShcbiAgICAgIGhvb2ssXG4gICAgICBjb21wb25lbnQuYXBwQ29udGV4dC5hcHAsXG4gICAgICBjb21wb25lbnQudWlkLFxuICAgICAgY29tcG9uZW50LnBhcmVudCA/IGNvbXBvbmVudC5wYXJlbnQudWlkIDogdm9pZCAwLFxuICAgICAgY29tcG9uZW50XG4gICAgKTtcbiAgfTtcbn1cbmNvbnN0IGRldnRvb2xzUGVyZlN0YXJ0ID0gLyogQF9fUFVSRV9fICovIGNyZWF0ZURldnRvb2xzUGVyZm9ybWFuY2VIb29rKFwicGVyZjpzdGFydFwiIC8qIFBFUkZPUk1BTkNFX1NUQVJUICovKTtcbmNvbnN0IGRldnRvb2xzUGVyZkVuZCA9IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVEZXZ0b29sc1BlcmZvcm1hbmNlSG9vayhcInBlcmY6ZW5kXCIgLyogUEVSRk9STUFOQ0VfRU5EICovKTtcbmZ1bmN0aW9uIGNyZWF0ZURldnRvb2xzUGVyZm9ybWFuY2VIb29rKGhvb2spIHtcbiAgcmV0dXJuIChjb21wb25lbnQsIHR5cGUsIHRpbWUpID0+IHtcbiAgICBlbWl0JDEoaG9vaywgY29tcG9uZW50LmFwcENvbnRleHQuYXBwLCBjb21wb25lbnQudWlkLCBjb21wb25lbnQsIHR5cGUsIHRpbWUpO1xuICB9O1xufVxuZnVuY3Rpb24gZGV2dG9vbHNDb21wb25lbnRFbWl0KGNvbXBvbmVudCwgZXZlbnQsIHBhcmFtcykge1xuICBlbWl0JDEoXG4gICAgXCJjb21wb25lbnQ6ZW1pdFwiIC8qIENPTVBPTkVOVF9FTUlUICovLFxuICAgIGNvbXBvbmVudC5hcHBDb250ZXh0LmFwcCxcbiAgICBjb21wb25lbnQsXG4gICAgZXZlbnQsXG4gICAgcGFyYW1zXG4gICk7XG59XG5cbmxldCBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgPSBudWxsO1xubGV0IGN1cnJlbnRTY29wZUlkID0gbnVsbDtcbmZ1bmN0aW9uIHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShpbnN0YW5jZSkge1xuICBjb25zdCBwcmV2ID0gY3VycmVudFJlbmRlcmluZ0luc3RhbmNlO1xuICBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgPSBpbnN0YW5jZTtcbiAgY3VycmVudFNjb3BlSWQgPSBpbnN0YW5jZSAmJiBpbnN0YW5jZS50eXBlLl9fc2NvcGVJZCB8fCBudWxsO1xuICByZXR1cm4gcHJldjtcbn1cbmZ1bmN0aW9uIHB1c2hTY29wZUlkKGlkKSB7XG4gIGN1cnJlbnRTY29wZUlkID0gaWQ7XG59XG5mdW5jdGlvbiBwb3BTY29wZUlkKCkge1xuICBjdXJyZW50U2NvcGVJZCA9IG51bGw7XG59XG5jb25zdCB3aXRoU2NvcGVJZCA9IChfaWQpID0+IHdpdGhDdHg7XG5mdW5jdGlvbiB3aXRoQ3R4KGZuLCBjdHggPSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UsIGlzTm9uU2NvcGVkU2xvdCkge1xuICBpZiAoIWN0eCkgcmV0dXJuIGZuO1xuICBpZiAoZm4uX24pIHtcbiAgICByZXR1cm4gZm47XG4gIH1cbiAgY29uc3QgcmVuZGVyRm5XaXRoQ29udGV4dCA9ICguLi5hcmdzKSA9PiB7XG4gICAgaWYgKHJlbmRlckZuV2l0aENvbnRleHQuX2QpIHtcbiAgICAgIHNldEJsb2NrVHJhY2tpbmcoLTEpO1xuICAgIH1cbiAgICBjb25zdCBwcmV2SW5zdGFuY2UgPSBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UoY3R4KTtcbiAgICBsZXQgcmVzO1xuICAgIHRyeSB7XG4gICAgICByZXMgPSBmbiguLi5hcmdzKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlKHByZXZJbnN0YW5jZSk7XG4gICAgICBpZiAocmVuZGVyRm5XaXRoQ29udGV4dC5fZCkge1xuICAgICAgICBzZXRCbG9ja1RyYWNraW5nKDEpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgIGRldnRvb2xzQ29tcG9uZW50VXBkYXRlZChjdHgpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9O1xuICByZW5kZXJGbldpdGhDb250ZXh0Ll9uID0gdHJ1ZTtcbiAgcmVuZGVyRm5XaXRoQ29udGV4dC5fYyA9IHRydWU7XG4gIHJlbmRlckZuV2l0aENvbnRleHQuX2QgPSB0cnVlO1xuICByZXR1cm4gcmVuZGVyRm5XaXRoQ29udGV4dDtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVEaXJlY3RpdmVOYW1lKG5hbWUpIHtcbiAgaWYgKGlzQnVpbHRJbkRpcmVjdGl2ZShuYW1lKSkge1xuICAgIHdhcm4kMShcIkRvIG5vdCB1c2UgYnVpbHQtaW4gZGlyZWN0aXZlIGlkcyBhcyBjdXN0b20gZGlyZWN0aXZlIGlkOiBcIiArIG5hbWUpO1xuICB9XG59XG5mdW5jdGlvbiB3aXRoRGlyZWN0aXZlcyh2bm9kZSwgZGlyZWN0aXZlcykge1xuICBpZiAoY3VycmVudFJlbmRlcmluZ0luc3RhbmNlID09PSBudWxsKSB7XG4gICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuJDEoYHdpdGhEaXJlY3RpdmVzIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHJlbmRlciBmdW5jdGlvbnMuYCk7XG4gICAgcmV0dXJuIHZub2RlO1xuICB9XG4gIGNvbnN0IGluc3RhbmNlID0gZ2V0Q29tcG9uZW50UHVibGljSW5zdGFuY2UoY3VycmVudFJlbmRlcmluZ0luc3RhbmNlKTtcbiAgY29uc3QgYmluZGluZ3MgPSB2bm9kZS5kaXJzIHx8ICh2bm9kZS5kaXJzID0gW10pO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGRpcmVjdGl2ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgW2RpciwgdmFsdWUsIGFyZywgbW9kaWZpZXJzID0gRU1QVFlfT0JKXSA9IGRpcmVjdGl2ZXNbaV07XG4gICAgaWYgKGRpcikge1xuICAgICAgaWYgKGlzRnVuY3Rpb24oZGlyKSkge1xuICAgICAgICBkaXIgPSB7XG4gICAgICAgICAgbW91bnRlZDogZGlyLFxuICAgICAgICAgIHVwZGF0ZWQ6IGRpclxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgaWYgKGRpci5kZWVwKSB7XG4gICAgICAgIHRyYXZlcnNlKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGJpbmRpbmdzLnB1c2goe1xuICAgICAgICBkaXIsXG4gICAgICAgIGluc3RhbmNlLFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgb2xkVmFsdWU6IHZvaWQgMCxcbiAgICAgICAgYXJnLFxuICAgICAgICBtb2RpZmllcnNcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdm5vZGU7XG59XG5mdW5jdGlvbiBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBwcmV2Vk5vZGUsIGluc3RhbmNlLCBuYW1lKSB7XG4gIGNvbnN0IGJpbmRpbmdzID0gdm5vZGUuZGlycztcbiAgY29uc3Qgb2xkQmluZGluZ3MgPSBwcmV2Vk5vZGUgJiYgcHJldlZOb2RlLmRpcnM7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYmluZGluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBiaW5kaW5nID0gYmluZGluZ3NbaV07XG4gICAgaWYgKG9sZEJpbmRpbmdzKSB7XG4gICAgICBiaW5kaW5nLm9sZFZhbHVlID0gb2xkQmluZGluZ3NbaV0udmFsdWU7XG4gICAgfVxuICAgIGxldCBob29rID0gYmluZGluZy5kaXJbbmFtZV07XG4gICAgaWYgKGhvb2spIHtcbiAgICAgIHBhdXNlVHJhY2tpbmcoKTtcbiAgICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGhvb2ssIGluc3RhbmNlLCA4LCBbXG4gICAgICAgIHZub2RlLmVsLFxuICAgICAgICBiaW5kaW5nLFxuICAgICAgICB2bm9kZSxcbiAgICAgICAgcHJldlZOb2RlXG4gICAgICBdKTtcbiAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgVGVsZXBvcnRFbmRLZXkgPSBTeW1ib2woXCJfdnRlXCIpO1xuY29uc3QgaXNUZWxlcG9ydCA9ICh0eXBlKSA9PiB0eXBlLl9faXNUZWxlcG9ydDtcbmNvbnN0IGlzVGVsZXBvcnREaXNhYmxlZCA9IChwcm9wcykgPT4gcHJvcHMgJiYgKHByb3BzLmRpc2FibGVkIHx8IHByb3BzLmRpc2FibGVkID09PSBcIlwiKTtcbmNvbnN0IGlzVGVsZXBvcnREZWZlcnJlZCA9IChwcm9wcykgPT4gcHJvcHMgJiYgKHByb3BzLmRlZmVyIHx8IHByb3BzLmRlZmVyID09PSBcIlwiKTtcbmNvbnN0IGlzVGFyZ2V0U1ZHID0gKHRhcmdldCkgPT4gdHlwZW9mIFNWR0VsZW1lbnQgIT09IFwidW5kZWZpbmVkXCIgJiYgdGFyZ2V0IGluc3RhbmNlb2YgU1ZHRWxlbWVudDtcbmNvbnN0IGlzVGFyZ2V0TWF0aE1MID0gKHRhcmdldCkgPT4gdHlwZW9mIE1hdGhNTEVsZW1lbnQgPT09IFwiZnVuY3Rpb25cIiAmJiB0YXJnZXQgaW5zdGFuY2VvZiBNYXRoTUxFbGVtZW50O1xuY29uc3QgcmVzb2x2ZVRhcmdldCA9IChwcm9wcywgc2VsZWN0KSA9PiB7XG4gIGNvbnN0IHRhcmdldFNlbGVjdG9yID0gcHJvcHMgJiYgcHJvcHMudG87XG4gIGlmIChpc1N0cmluZyh0YXJnZXRTZWxlY3RvcikpIHtcbiAgICBpZiAoIXNlbGVjdCkge1xuICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuJDEoXG4gICAgICAgIGBDdXJyZW50IHJlbmRlcmVyIGRvZXMgbm90IHN1cHBvcnQgc3RyaW5nIHRhcmdldCBmb3IgVGVsZXBvcnRzLiAobWlzc2luZyBxdWVyeVNlbGVjdG9yIHJlbmRlcmVyIG9wdGlvbilgXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IHNlbGVjdCh0YXJnZXRTZWxlY3Rvcik7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhdGFyZ2V0ICYmICFpc1RlbGVwb3J0RGlzYWJsZWQocHJvcHMpKSB7XG4gICAgICAgIHdhcm4kMShcbiAgICAgICAgICBgRmFpbGVkIHRvIGxvY2F0ZSBUZWxlcG9ydCB0YXJnZXQgd2l0aCBzZWxlY3RvciBcIiR7dGFyZ2V0U2VsZWN0b3J9XCIuIE5vdGUgdGhlIHRhcmdldCBlbGVtZW50IG11c3QgZXhpc3QgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgbW91bnRlZCAtIGkuZS4gdGhlIHRhcmdldCBjYW5ub3QgYmUgcmVuZGVyZWQgYnkgdGhlIGNvbXBvbmVudCBpdHNlbGYsIGFuZCBpZGVhbGx5IHNob3VsZCBiZSBvdXRzaWRlIG9mIHRoZSBlbnRpcmUgVnVlIGNvbXBvbmVudCB0cmVlLmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICF0YXJnZXRTZWxlY3RvciAmJiAhaXNUZWxlcG9ydERpc2FibGVkKHByb3BzKSkge1xuICAgICAgd2FybiQxKGBJbnZhbGlkIFRlbGVwb3J0IHRhcmdldDogJHt0YXJnZXRTZWxlY3Rvcn1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldFNlbGVjdG9yO1xuICB9XG59O1xuY29uc3QgVGVsZXBvcnRJbXBsID0ge1xuICBuYW1lOiBcIlRlbGVwb3J0XCIsXG4gIF9faXNUZWxlcG9ydDogdHJ1ZSxcbiAgcHJvY2VzcyhuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBuYW1lc3BhY2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBpbnRlcm5hbHMpIHtcbiAgICBjb25zdCB7XG4gICAgICBtYzogbW91bnRDaGlsZHJlbixcbiAgICAgIHBjOiBwYXRjaENoaWxkcmVuLFxuICAgICAgcGJjOiBwYXRjaEJsb2NrQ2hpbGRyZW4sXG4gICAgICBvOiB7IGluc2VydCwgcXVlcnlTZWxlY3RvciwgY3JlYXRlVGV4dCwgY3JlYXRlQ29tbWVudCB9XG4gICAgfSA9IGludGVybmFscztcbiAgICBjb25zdCBkaXNhYmxlZCA9IGlzVGVsZXBvcnREaXNhYmxlZChuMi5wcm9wcyk7XG4gICAgbGV0IHsgc2hhcGVGbGFnLCBjaGlsZHJlbiwgZHluYW1pY0NoaWxkcmVuIH0gPSBuMjtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBpc0htclVwZGF0aW5nKSB7XG4gICAgICBvcHRpbWl6ZWQgPSBmYWxzZTtcbiAgICAgIGR5bmFtaWNDaGlsZHJlbiA9IG51bGw7XG4gICAgfVxuICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICBjb25zdCBwbGFjZWhvbGRlciA9IG4yLmVsID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IGNyZWF0ZUNvbW1lbnQoXCJ0ZWxlcG9ydCBzdGFydFwiKSA6IGNyZWF0ZVRleHQoXCJcIik7XG4gICAgICBjb25zdCBtYWluQW5jaG9yID0gbjIuYW5jaG9yID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IGNyZWF0ZUNvbW1lbnQoXCJ0ZWxlcG9ydCBlbmRcIikgOiBjcmVhdGVUZXh0KFwiXCIpO1xuICAgICAgaW5zZXJ0KHBsYWNlaG9sZGVyLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICBpbnNlcnQobWFpbkFuY2hvciwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgY29uc3QgbW91bnQgPSAoY29udGFpbmVyMiwgYW5jaG9yMikgPT4ge1xuICAgICAgICBpZiAoc2hhcGVGbGFnICYgMTYpIHtcbiAgICAgICAgICBpZiAocGFyZW50Q29tcG9uZW50ICYmIHBhcmVudENvbXBvbmVudC5pc0NFKSB7XG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQuY2UuX3RlbGVwb3J0VGFyZ2V0ID0gY29udGFpbmVyMjtcbiAgICAgICAgICB9XG4gICAgICAgICAgbW91bnRDaGlsZHJlbihcbiAgICAgICAgICAgIGNoaWxkcmVuLFxuICAgICAgICAgICAgY29udGFpbmVyMixcbiAgICAgICAgICAgIGFuY2hvcjIsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBjb25zdCBtb3VudFRvVGFyZ2V0ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBuMi50YXJnZXQgPSByZXNvbHZlVGFyZ2V0KG4yLnByb3BzLCBxdWVyeVNlbGVjdG9yKTtcbiAgICAgICAgY29uc3QgdGFyZ2V0QW5jaG9yID0gcHJlcGFyZUFuY2hvcih0YXJnZXQsIG4yLCBjcmVhdGVUZXh0LCBpbnNlcnQpO1xuICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgaWYgKG5hbWVzcGFjZSAhPT0gXCJzdmdcIiAmJiBpc1RhcmdldFNWRyh0YXJnZXQpKSB7XG4gICAgICAgICAgICBuYW1lc3BhY2UgPSBcInN2Z1wiO1xuICAgICAgICAgIH0gZWxzZSBpZiAobmFtZXNwYWNlICE9PSBcIm1hdGhtbFwiICYmIGlzVGFyZ2V0TWF0aE1MKHRhcmdldCkpIHtcbiAgICAgICAgICAgIG5hbWVzcGFjZSA9IFwibWF0aG1sXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIG1vdW50KHRhcmdldCwgdGFyZ2V0QW5jaG9yKTtcbiAgICAgICAgICAgIHVwZGF0ZUNzc1ZhcnMobjIsIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhZGlzYWJsZWQpIHtcbiAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICBcIkludmFsaWQgVGVsZXBvcnQgdGFyZ2V0IG9uIG1vdW50OlwiLFxuICAgICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgICAgYCgke3R5cGVvZiB0YXJnZXR9KWBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAgIG1vdW50KGNvbnRhaW5lciwgbWFpbkFuY2hvcik7XG4gICAgICAgIHVwZGF0ZUNzc1ZhcnMobjIsIHRydWUpO1xuICAgICAgfVxuICAgICAgaWYgKGlzVGVsZXBvcnREZWZlcnJlZChuMi5wcm9wcykpIHtcbiAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICBtb3VudFRvVGFyZ2V0KCk7XG4gICAgICAgICAgbjIuZWwuX19pc01vdW50ZWQgPSB0cnVlO1xuICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtb3VudFRvVGFyZ2V0KCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpc1RlbGVwb3J0RGVmZXJyZWQobjIucHJvcHMpICYmICFuMS5lbC5fX2lzTW91bnRlZCkge1xuICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgIFRlbGVwb3J0SW1wbC5wcm9jZXNzKFxuICAgICAgICAgICAgbjEsXG4gICAgICAgICAgICBuMixcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkLFxuICAgICAgICAgICAgaW50ZXJuYWxzXG4gICAgICAgICAgKTtcbiAgICAgICAgICBkZWxldGUgbjEuZWwuX19pc01vdW50ZWQ7XG4gICAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbjIuZWwgPSBuMS5lbDtcbiAgICAgIG4yLnRhcmdldFN0YXJ0ID0gbjEudGFyZ2V0U3RhcnQ7XG4gICAgICBjb25zdCBtYWluQW5jaG9yID0gbjIuYW5jaG9yID0gbjEuYW5jaG9yO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gbjIudGFyZ2V0ID0gbjEudGFyZ2V0O1xuICAgICAgY29uc3QgdGFyZ2V0QW5jaG9yID0gbjIudGFyZ2V0QW5jaG9yID0gbjEudGFyZ2V0QW5jaG9yO1xuICAgICAgY29uc3Qgd2FzRGlzYWJsZWQgPSBpc1RlbGVwb3J0RGlzYWJsZWQobjEucHJvcHMpO1xuICAgICAgY29uc3QgY3VycmVudENvbnRhaW5lciA9IHdhc0Rpc2FibGVkID8gY29udGFpbmVyIDogdGFyZ2V0O1xuICAgICAgY29uc3QgY3VycmVudEFuY2hvciA9IHdhc0Rpc2FibGVkID8gbWFpbkFuY2hvciA6IHRhcmdldEFuY2hvcjtcbiAgICAgIGlmIChuYW1lc3BhY2UgPT09IFwic3ZnXCIgfHwgaXNUYXJnZXRTVkcodGFyZ2V0KSkge1xuICAgICAgICBuYW1lc3BhY2UgPSBcInN2Z1wiO1xuICAgICAgfSBlbHNlIGlmIChuYW1lc3BhY2UgPT09IFwibWF0aG1sXCIgfHwgaXNUYXJnZXRNYXRoTUwodGFyZ2V0KSkge1xuICAgICAgICBuYW1lc3BhY2UgPSBcIm1hdGhtbFwiO1xuICAgICAgfVxuICAgICAgaWYgKGR5bmFtaWNDaGlsZHJlbikge1xuICAgICAgICBwYXRjaEJsb2NrQ2hpbGRyZW4oXG4gICAgICAgICAgbjEuZHluYW1pY0NoaWxkcmVuLFxuICAgICAgICAgIGR5bmFtaWNDaGlsZHJlbixcbiAgICAgICAgICBjdXJyZW50Q29udGFpbmVyLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzXG4gICAgICAgICk7XG4gICAgICAgIHRyYXZlcnNlU3RhdGljQ2hpbGRyZW4objEsIG4yLCAhISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSk7XG4gICAgICB9IGVsc2UgaWYgKCFvcHRpbWl6ZWQpIHtcbiAgICAgICAgcGF0Y2hDaGlsZHJlbihcbiAgICAgICAgICBuMSxcbiAgICAgICAgICBuMixcbiAgICAgICAgICBjdXJyZW50Q29udGFpbmVyLFxuICAgICAgICAgIGN1cnJlbnRBbmNob3IsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgZmFsc2VcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICBpZiAoIXdhc0Rpc2FibGVkKSB7XG4gICAgICAgICAgbW92ZVRlbGVwb3J0KFxuICAgICAgICAgICAgbjIsXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBtYWluQW5jaG9yLFxuICAgICAgICAgICAgaW50ZXJuYWxzLFxuICAgICAgICAgICAgMVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKG4yLnByb3BzICYmIG4xLnByb3BzICYmIG4yLnByb3BzLnRvICE9PSBuMS5wcm9wcy50bykge1xuICAgICAgICAgICAgbjIucHJvcHMudG8gPSBuMS5wcm9wcy50bztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICgobjIucHJvcHMgJiYgbjIucHJvcHMudG8pICE9PSAobjEucHJvcHMgJiYgbjEucHJvcHMudG8pKSB7XG4gICAgICAgICAgY29uc3QgbmV4dFRhcmdldCA9IG4yLnRhcmdldCA9IHJlc29sdmVUYXJnZXQoXG4gICAgICAgICAgICBuMi5wcm9wcyxcbiAgICAgICAgICAgIHF1ZXJ5U2VsZWN0b3JcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChuZXh0VGFyZ2V0KSB7XG4gICAgICAgICAgICBtb3ZlVGVsZXBvcnQoXG4gICAgICAgICAgICAgIG4yLFxuICAgICAgICAgICAgICBuZXh0VGFyZ2V0LFxuICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICBpbnRlcm5hbHMsXG4gICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICAgIFwiSW52YWxpZCBUZWxlcG9ydCB0YXJnZXQgb24gdXBkYXRlOlwiLFxuICAgICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICAgIGAoJHt0eXBlb2YgdGFyZ2V0fSlgXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh3YXNEaXNhYmxlZCkge1xuICAgICAgICAgIG1vdmVUZWxlcG9ydChcbiAgICAgICAgICAgIG4yLFxuICAgICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgICAgdGFyZ2V0QW5jaG9yLFxuICAgICAgICAgICAgaW50ZXJuYWxzLFxuICAgICAgICAgICAgMVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHVwZGF0ZUNzc1ZhcnMobjIsIGRpc2FibGVkKTtcbiAgICB9XG4gIH0sXG4gIHJlbW92ZSh2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgeyB1bTogdW5tb3VudCwgbzogeyByZW1vdmU6IGhvc3RSZW1vdmUgfSB9LCBkb1JlbW92ZSkge1xuICAgIGNvbnN0IHtcbiAgICAgIHNoYXBlRmxhZyxcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgYW5jaG9yLFxuICAgICAgdGFyZ2V0U3RhcnQsXG4gICAgICB0YXJnZXRBbmNob3IsXG4gICAgICB0YXJnZXQsXG4gICAgICBwcm9wc1xuICAgIH0gPSB2bm9kZTtcbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICBob3N0UmVtb3ZlKHRhcmdldFN0YXJ0KTtcbiAgICAgIGhvc3RSZW1vdmUodGFyZ2V0QW5jaG9yKTtcbiAgICB9XG4gICAgZG9SZW1vdmUgJiYgaG9zdFJlbW92ZShhbmNob3IpO1xuICAgIGlmIChzaGFwZUZsYWcgJiAxNikge1xuICAgICAgY29uc3Qgc2hvdWxkUmVtb3ZlID0gZG9SZW1vdmUgfHwgIWlzVGVsZXBvcnREaXNhYmxlZChwcm9wcyk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgIHVubW91bnQoXG4gICAgICAgICAgY2hpbGQsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIHNob3VsZFJlbW92ZSxcbiAgICAgICAgICAhIWNoaWxkLmR5bmFtaWNDaGlsZHJlblxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgbW92ZTogbW92ZVRlbGVwb3J0LFxuICBoeWRyYXRlOiBoeWRyYXRlVGVsZXBvcnRcbn07XG5mdW5jdGlvbiBtb3ZlVGVsZXBvcnQodm5vZGUsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yLCB7IG86IHsgaW5zZXJ0IH0sIG06IG1vdmUgfSwgbW92ZVR5cGUgPSAyKSB7XG4gIGlmIChtb3ZlVHlwZSA9PT0gMCkge1xuICAgIGluc2VydCh2bm9kZS50YXJnZXRBbmNob3IsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yKTtcbiAgfVxuICBjb25zdCB7IGVsLCBhbmNob3IsIHNoYXBlRmxhZywgY2hpbGRyZW4sIHByb3BzIH0gPSB2bm9kZTtcbiAgY29uc3QgaXNSZW9yZGVyID0gbW92ZVR5cGUgPT09IDI7XG4gIGlmIChpc1Jlb3JkZXIpIHtcbiAgICBpbnNlcnQoZWwsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yKTtcbiAgfVxuICBpZiAoIWlzUmVvcmRlciB8fCBpc1RlbGVwb3J0RGlzYWJsZWQocHJvcHMpKSB7XG4gICAgaWYgKHNoYXBlRmxhZyAmIDE2KSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG1vdmUoXG4gICAgICAgICAgY2hpbGRyZW5baV0sXG4gICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgIHBhcmVudEFuY2hvcixcbiAgICAgICAgICAyXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChpc1Jlb3JkZXIpIHtcbiAgICBpbnNlcnQoYW5jaG9yLCBjb250YWluZXIsIHBhcmVudEFuY2hvcik7XG4gIH1cbn1cbmZ1bmN0aW9uIGh5ZHJhdGVUZWxlcG9ydChub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHtcbiAgbzogeyBuZXh0U2libGluZywgcGFyZW50Tm9kZSwgcXVlcnlTZWxlY3RvciwgaW5zZXJ0LCBjcmVhdGVUZXh0IH1cbn0sIGh5ZHJhdGVDaGlsZHJlbikge1xuICBjb25zdCB0YXJnZXQgPSB2bm9kZS50YXJnZXQgPSByZXNvbHZlVGFyZ2V0KFxuICAgIHZub2RlLnByb3BzLFxuICAgIHF1ZXJ5U2VsZWN0b3JcbiAgKTtcbiAgaWYgKHRhcmdldCkge1xuICAgIGNvbnN0IGRpc2FibGVkID0gaXNUZWxlcG9ydERpc2FibGVkKHZub2RlLnByb3BzKTtcbiAgICBjb25zdCB0YXJnZXROb2RlID0gdGFyZ2V0Ll9scGEgfHwgdGFyZ2V0LmZpcnN0Q2hpbGQ7XG4gICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDE2KSB7XG4gICAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgICAgdm5vZGUuYW5jaG9yID0gaHlkcmF0ZUNoaWxkcmVuKFxuICAgICAgICAgIG5leHRTaWJsaW5nKG5vZGUpLFxuICAgICAgICAgIHZub2RlLFxuICAgICAgICAgIHBhcmVudE5vZGUobm9kZSksXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgICAgdm5vZGUudGFyZ2V0U3RhcnQgPSB0YXJnZXROb2RlO1xuICAgICAgICB2bm9kZS50YXJnZXRBbmNob3IgPSB0YXJnZXROb2RlICYmIG5leHRTaWJsaW5nKHRhcmdldE5vZGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdm5vZGUuYW5jaG9yID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgIGxldCB0YXJnZXRBbmNob3IgPSB0YXJnZXROb2RlO1xuICAgICAgICB3aGlsZSAodGFyZ2V0QW5jaG9yKSB7XG4gICAgICAgICAgaWYgKHRhcmdldEFuY2hvciAmJiB0YXJnZXRBbmNob3Iubm9kZVR5cGUgPT09IDgpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXRBbmNob3IuZGF0YSA9PT0gXCJ0ZWxlcG9ydCBzdGFydCBhbmNob3JcIikge1xuICAgICAgICAgICAgICB2bm9kZS50YXJnZXRTdGFydCA9IHRhcmdldEFuY2hvcjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0QW5jaG9yLmRhdGEgPT09IFwidGVsZXBvcnQgYW5jaG9yXCIpIHtcbiAgICAgICAgICAgICAgdm5vZGUudGFyZ2V0QW5jaG9yID0gdGFyZ2V0QW5jaG9yO1xuICAgICAgICAgICAgICB0YXJnZXQuX2xwYSA9IHZub2RlLnRhcmdldEFuY2hvciAmJiBuZXh0U2libGluZyh2bm9kZS50YXJnZXRBbmNob3IpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGFyZ2V0QW5jaG9yID0gbmV4dFNpYmxpbmcodGFyZ2V0QW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXZub2RlLnRhcmdldEFuY2hvcikge1xuICAgICAgICAgIHByZXBhcmVBbmNob3IodGFyZ2V0LCB2bm9kZSwgY3JlYXRlVGV4dCwgaW5zZXJ0KTtcbiAgICAgICAgfVxuICAgICAgICBoeWRyYXRlQ2hpbGRyZW4oXG4gICAgICAgICAgdGFyZ2V0Tm9kZSAmJiBuZXh0U2libGluZyh0YXJnZXROb2RlKSxcbiAgICAgICAgICB2bm9kZSxcbiAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlQ3NzVmFycyh2bm9kZSwgZGlzYWJsZWQpO1xuICB9XG4gIHJldHVybiB2bm9kZS5hbmNob3IgJiYgbmV4dFNpYmxpbmcodm5vZGUuYW5jaG9yKTtcbn1cbmNvbnN0IFRlbGVwb3J0ID0gVGVsZXBvcnRJbXBsO1xuZnVuY3Rpb24gdXBkYXRlQ3NzVmFycyh2bm9kZSwgaXNEaXNhYmxlZCkge1xuICBjb25zdCBjdHggPSB2bm9kZS5jdHg7XG4gIGlmIChjdHggJiYgY3R4LnV0KSB7XG4gICAgbGV0IG5vZGUsIGFuY2hvcjtcbiAgICBpZiAoaXNEaXNhYmxlZCkge1xuICAgICAgbm9kZSA9IHZub2RlLmVsO1xuICAgICAgYW5jaG9yID0gdm5vZGUuYW5jaG9yO1xuICAgIH0gZWxzZSB7XG4gICAgICBub2RlID0gdm5vZGUudGFyZ2V0U3RhcnQ7XG4gICAgICBhbmNob3IgPSB2bm9kZS50YXJnZXRBbmNob3I7XG4gICAgfVxuICAgIHdoaWxlIChub2RlICYmIG5vZGUgIT09IGFuY2hvcikge1xuICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEpIG5vZGUuc2V0QXR0cmlidXRlKFwiZGF0YS12LW93bmVyXCIsIGN0eC51aWQpO1xuICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgfVxuICAgIGN0eC51dCgpO1xuICB9XG59XG5mdW5jdGlvbiBwcmVwYXJlQW5jaG9yKHRhcmdldCwgdm5vZGUsIGNyZWF0ZVRleHQsIGluc2VydCkge1xuICBjb25zdCB0YXJnZXRTdGFydCA9IHZub2RlLnRhcmdldFN0YXJ0ID0gY3JlYXRlVGV4dChcIlwiKTtcbiAgY29uc3QgdGFyZ2V0QW5jaG9yID0gdm5vZGUudGFyZ2V0QW5jaG9yID0gY3JlYXRlVGV4dChcIlwiKTtcbiAgdGFyZ2V0U3RhcnRbVGVsZXBvcnRFbmRLZXldID0gdGFyZ2V0QW5jaG9yO1xuICBpZiAodGFyZ2V0KSB7XG4gICAgaW5zZXJ0KHRhcmdldFN0YXJ0LCB0YXJnZXQpO1xuICAgIGluc2VydCh0YXJnZXRBbmNob3IsIHRhcmdldCk7XG4gIH1cbiAgcmV0dXJuIHRhcmdldEFuY2hvcjtcbn1cblxuY29uc3QgbGVhdmVDYktleSA9IFN5bWJvbChcIl9sZWF2ZUNiXCIpO1xuY29uc3QgZW50ZXJDYktleSA9IFN5bWJvbChcIl9lbnRlckNiXCIpO1xuZnVuY3Rpb24gdXNlVHJhbnNpdGlvblN0YXRlKCkge1xuICBjb25zdCBzdGF0ZSA9IHtcbiAgICBpc01vdW50ZWQ6IGZhbHNlLFxuICAgIGlzTGVhdmluZzogZmFsc2UsXG4gICAgaXNVbm1vdW50aW5nOiBmYWxzZSxcbiAgICBsZWF2aW5nVk5vZGVzOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpXG4gIH07XG4gIG9uTW91bnRlZCgoKSA9PiB7XG4gICAgc3RhdGUuaXNNb3VudGVkID0gdHJ1ZTtcbiAgfSk7XG4gIG9uQmVmb3JlVW5tb3VudCgoKSA9PiB7XG4gICAgc3RhdGUuaXNVbm1vdW50aW5nID0gdHJ1ZTtcbiAgfSk7XG4gIHJldHVybiBzdGF0ZTtcbn1cbmNvbnN0IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yID0gW0Z1bmN0aW9uLCBBcnJheV07XG5jb25zdCBCYXNlVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycyA9IHtcbiAgbW9kZTogU3RyaW5nLFxuICBhcHBlYXI6IEJvb2xlYW4sXG4gIHBlcnNpc3RlZDogQm9vbGVhbixcbiAgLy8gZW50ZXJcbiAgb25CZWZvcmVFbnRlcjogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gIG9uRW50ZXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICBvbkFmdGVyRW50ZXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICBvbkVudGVyQ2FuY2VsbGVkOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgLy8gbGVhdmVcbiAgb25CZWZvcmVMZWF2ZTogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gIG9uTGVhdmU6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICBvbkFmdGVyTGVhdmU6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICBvbkxlYXZlQ2FuY2VsbGVkOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgLy8gYXBwZWFyXG4gIG9uQmVmb3JlQXBwZWFyOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgb25BcHBlYXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICBvbkFmdGVyQXBwZWFyOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgb25BcHBlYXJDYW5jZWxsZWQ6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yXG59O1xuY29uc3QgcmVjdXJzaXZlR2V0U3VidHJlZSA9IChpbnN0YW5jZSkgPT4ge1xuICBjb25zdCBzdWJUcmVlID0gaW5zdGFuY2Uuc3ViVHJlZTtcbiAgcmV0dXJuIHN1YlRyZWUuY29tcG9uZW50ID8gcmVjdXJzaXZlR2V0U3VidHJlZShzdWJUcmVlLmNvbXBvbmVudCkgOiBzdWJUcmVlO1xufTtcbmNvbnN0IEJhc2VUcmFuc2l0aW9uSW1wbCA9IHtcbiAgbmFtZTogYEJhc2VUcmFuc2l0aW9uYCxcbiAgcHJvcHM6IEJhc2VUcmFuc2l0aW9uUHJvcHNWYWxpZGF0b3JzLFxuICBzZXR1cChwcm9wcywgeyBzbG90cyB9KSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICBjb25zdCBzdGF0ZSA9IHVzZVRyYW5zaXRpb25TdGF0ZSgpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zdCBjaGlsZHJlbiA9IHNsb3RzLmRlZmF1bHQgJiYgZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuKHNsb3RzLmRlZmF1bHQoKSwgdHJ1ZSk7XG4gICAgICBpZiAoIWNoaWxkcmVuIHx8ICFjaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgY2hpbGQgPSBmaW5kTm9uQ29tbWVudENoaWxkKGNoaWxkcmVuKTtcbiAgICAgIGNvbnN0IHJhd1Byb3BzID0gdG9SYXcocHJvcHMpO1xuICAgICAgY29uc3QgeyBtb2RlIH0gPSByYXdQcm9wcztcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIG1vZGUgJiYgbW9kZSAhPT0gXCJpbi1vdXRcIiAmJiBtb2RlICE9PSBcIm91dC1pblwiICYmIG1vZGUgIT09IFwiZGVmYXVsdFwiKSB7XG4gICAgICAgIHdhcm4kMShgaW52YWxpZCA8dHJhbnNpdGlvbj4gbW9kZTogJHttb2RlfWApO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmlzTGVhdmluZykge1xuICAgICAgICByZXR1cm4gZW1wdHlQbGFjZWhvbGRlcihjaGlsZCk7XG4gICAgICB9XG4gICAgICBjb25zdCBpbm5lckNoaWxkID0gZ2V0SW5uZXJDaGlsZCQxKGNoaWxkKTtcbiAgICAgIGlmICghaW5uZXJDaGlsZCkge1xuICAgICAgICByZXR1cm4gZW1wdHlQbGFjZWhvbGRlcihjaGlsZCk7XG4gICAgICB9XG4gICAgICBsZXQgZW50ZXJIb29rcyA9IHJlc29sdmVUcmFuc2l0aW9uSG9va3MoXG4gICAgICAgIGlubmVyQ2hpbGQsXG4gICAgICAgIHJhd1Byb3BzLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgIC8vICMxMTA2MSwgZW5zdXJlIGVudGVySG9va3MgaXMgZnJlc2ggYWZ0ZXIgY2xvbmVcbiAgICAgICAgKGhvb2tzKSA9PiBlbnRlckhvb2tzID0gaG9va3NcbiAgICAgICk7XG4gICAgICBpZiAoaW5uZXJDaGlsZC50eXBlICE9PSBDb21tZW50KSB7XG4gICAgICAgIHNldFRyYW5zaXRpb25Ib29rcyhpbm5lckNoaWxkLCBlbnRlckhvb2tzKTtcbiAgICAgIH1cbiAgICAgIGxldCBvbGRJbm5lckNoaWxkID0gaW5zdGFuY2Uuc3ViVHJlZSAmJiBnZXRJbm5lckNoaWxkJDEoaW5zdGFuY2Uuc3ViVHJlZSk7XG4gICAgICBpZiAob2xkSW5uZXJDaGlsZCAmJiBvbGRJbm5lckNoaWxkLnR5cGUgIT09IENvbW1lbnQgJiYgIWlzU2FtZVZOb2RlVHlwZShpbm5lckNoaWxkLCBvbGRJbm5lckNoaWxkKSAmJiByZWN1cnNpdmVHZXRTdWJ0cmVlKGluc3RhbmNlKS50eXBlICE9PSBDb21tZW50KSB7XG4gICAgICAgIGxldCBsZWF2aW5nSG9va3MgPSByZXNvbHZlVHJhbnNpdGlvbkhvb2tzKFxuICAgICAgICAgIG9sZElubmVyQ2hpbGQsXG4gICAgICAgICAgcmF3UHJvcHMsXG4gICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgaW5zdGFuY2VcbiAgICAgICAgKTtcbiAgICAgICAgc2V0VHJhbnNpdGlvbkhvb2tzKG9sZElubmVyQ2hpbGQsIGxlYXZpbmdIb29rcyk7XG4gICAgICAgIGlmIChtb2RlID09PSBcIm91dC1pblwiICYmIGlubmVyQ2hpbGQudHlwZSAhPT0gQ29tbWVudCkge1xuICAgICAgICAgIHN0YXRlLmlzTGVhdmluZyA9IHRydWU7XG4gICAgICAgICAgbGVhdmluZ0hvb2tzLmFmdGVyTGVhdmUgPSAoKSA9PiB7XG4gICAgICAgICAgICBzdGF0ZS5pc0xlYXZpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghKGluc3RhbmNlLmpvYi5mbGFncyAmIDgpKSB7XG4gICAgICAgICAgICAgIGluc3RhbmNlLnVwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVsZXRlIGxlYXZpbmdIb29rcy5hZnRlckxlYXZlO1xuICAgICAgICAgICAgb2xkSW5uZXJDaGlsZCA9IHZvaWQgMDtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHJldHVybiBlbXB0eVBsYWNlaG9sZGVyKGNoaWxkKTtcbiAgICAgICAgfSBlbHNlIGlmIChtb2RlID09PSBcImluLW91dFwiICYmIGlubmVyQ2hpbGQudHlwZSAhPT0gQ29tbWVudCkge1xuICAgICAgICAgIGxlYXZpbmdIb29rcy5kZWxheUxlYXZlID0gKGVsLCBlYXJseVJlbW92ZSwgZGVsYXllZExlYXZlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsZWF2aW5nVk5vZGVzQ2FjaGUgPSBnZXRMZWF2aW5nTm9kZXNGb3JUeXBlKFxuICAgICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgICAgb2xkSW5uZXJDaGlsZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGxlYXZpbmdWTm9kZXNDYWNoZVtTdHJpbmcob2xkSW5uZXJDaGlsZC5rZXkpXSA9IG9sZElubmVyQ2hpbGQ7XG4gICAgICAgICAgICBlbFtsZWF2ZUNiS2V5XSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgZWFybHlSZW1vdmUoKTtcbiAgICAgICAgICAgICAgZWxbbGVhdmVDYktleV0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgIGRlbGV0ZSBlbnRlckhvb2tzLmRlbGF5ZWRMZWF2ZTtcbiAgICAgICAgICAgICAgb2xkSW5uZXJDaGlsZCA9IHZvaWQgMDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBlbnRlckhvb2tzLmRlbGF5ZWRMZWF2ZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgZGVsYXllZExlYXZlKCk7XG4gICAgICAgICAgICAgIGRlbGV0ZSBlbnRlckhvb2tzLmRlbGF5ZWRMZWF2ZTtcbiAgICAgICAgICAgICAgb2xkSW5uZXJDaGlsZCA9IHZvaWQgMDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvbGRJbm5lckNoaWxkID0gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG9sZElubmVyQ2hpbGQpIHtcbiAgICAgICAgb2xkSW5uZXJDaGlsZCA9IHZvaWQgMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9O1xuICB9XG59O1xuZnVuY3Rpb24gZmluZE5vbkNvbW1lbnRDaGlsZChjaGlsZHJlbikge1xuICBsZXQgY2hpbGQgPSBjaGlsZHJlblswXTtcbiAgaWYgKGNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcbiAgICBsZXQgaGFzRm91bmQgPSBmYWxzZTtcbiAgICBmb3IgKGNvbnN0IGMgb2YgY2hpbGRyZW4pIHtcbiAgICAgIGlmIChjLnR5cGUgIT09IENvbW1lbnQpIHtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgaGFzRm91bmQpIHtcbiAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICBcIjx0cmFuc2l0aW9uPiBjYW4gb25seSBiZSB1c2VkIG9uIGEgc2luZ2xlIGVsZW1lbnQgb3IgY29tcG9uZW50LiBVc2UgPHRyYW5zaXRpb24tZ3JvdXA+IGZvciBsaXN0cy5cIlxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGQgPSBjO1xuICAgICAgICBoYXNGb3VuZCA9IHRydWU7XG4gICAgICAgIGlmICghISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBjaGlsZDtcbn1cbmNvbnN0IEJhc2VUcmFuc2l0aW9uID0gQmFzZVRyYW5zaXRpb25JbXBsO1xuZnVuY3Rpb24gZ2V0TGVhdmluZ05vZGVzRm9yVHlwZShzdGF0ZSwgdm5vZGUpIHtcbiAgY29uc3QgeyBsZWF2aW5nVk5vZGVzIH0gPSBzdGF0ZTtcbiAgbGV0IGxlYXZpbmdWTm9kZXNDYWNoZSA9IGxlYXZpbmdWTm9kZXMuZ2V0KHZub2RlLnR5cGUpO1xuICBpZiAoIWxlYXZpbmdWTm9kZXNDYWNoZSkge1xuICAgIGxlYXZpbmdWTm9kZXNDYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGxlYXZpbmdWTm9kZXMuc2V0KHZub2RlLnR5cGUsIGxlYXZpbmdWTm9kZXNDYWNoZSk7XG4gIH1cbiAgcmV0dXJuIGxlYXZpbmdWTm9kZXNDYWNoZTtcbn1cbmZ1bmN0aW9uIHJlc29sdmVUcmFuc2l0aW9uSG9va3Modm5vZGUsIHByb3BzLCBzdGF0ZSwgaW5zdGFuY2UsIHBvc3RDbG9uZSkge1xuICBjb25zdCB7XG4gICAgYXBwZWFyLFxuICAgIG1vZGUsXG4gICAgcGVyc2lzdGVkID0gZmFsc2UsXG4gICAgb25CZWZvcmVFbnRlcixcbiAgICBvbkVudGVyLFxuICAgIG9uQWZ0ZXJFbnRlcixcbiAgICBvbkVudGVyQ2FuY2VsbGVkLFxuICAgIG9uQmVmb3JlTGVhdmUsXG4gICAgb25MZWF2ZSxcbiAgICBvbkFmdGVyTGVhdmUsXG4gICAgb25MZWF2ZUNhbmNlbGxlZCxcbiAgICBvbkJlZm9yZUFwcGVhcixcbiAgICBvbkFwcGVhcixcbiAgICBvbkFmdGVyQXBwZWFyLFxuICAgIG9uQXBwZWFyQ2FuY2VsbGVkXG4gIH0gPSBwcm9wcztcbiAgY29uc3Qga2V5ID0gU3RyaW5nKHZub2RlLmtleSk7XG4gIGNvbnN0IGxlYXZpbmdWTm9kZXNDYWNoZSA9IGdldExlYXZpbmdOb2Rlc0ZvclR5cGUoc3RhdGUsIHZub2RlKTtcbiAgY29uc3QgY2FsbEhvb2sgPSAoaG9vaywgYXJncykgPT4ge1xuICAgIGhvb2sgJiYgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoXG4gICAgICBob29rLFxuICAgICAgaW5zdGFuY2UsXG4gICAgICA5LFxuICAgICAgYXJnc1xuICAgICk7XG4gIH07XG4gIGNvbnN0IGNhbGxBc3luY0hvb2sgPSAoaG9vaywgYXJncykgPT4ge1xuICAgIGNvbnN0IGRvbmUgPSBhcmdzWzFdO1xuICAgIGNhbGxIb29rKGhvb2ssIGFyZ3MpO1xuICAgIGlmIChpc0FycmF5KGhvb2spKSB7XG4gICAgICBpZiAoaG9vay5ldmVyeSgoaG9vazIpID0+IGhvb2syLmxlbmd0aCA8PSAxKSkgZG9uZSgpO1xuICAgIH0gZWxzZSBpZiAoaG9vay5sZW5ndGggPD0gMSkge1xuICAgICAgZG9uZSgpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaG9va3MgPSB7XG4gICAgbW9kZSxcbiAgICBwZXJzaXN0ZWQsXG4gICAgYmVmb3JlRW50ZXIoZWwpIHtcbiAgICAgIGxldCBob29rID0gb25CZWZvcmVFbnRlcjtcbiAgICAgIGlmICghc3RhdGUuaXNNb3VudGVkKSB7XG4gICAgICAgIGlmIChhcHBlYXIpIHtcbiAgICAgICAgICBob29rID0gb25CZWZvcmVBcHBlYXIgfHwgb25CZWZvcmVFbnRlcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChlbFtsZWF2ZUNiS2V5XSkge1xuICAgICAgICBlbFtsZWF2ZUNiS2V5XShcbiAgICAgICAgICB0cnVlXG4gICAgICAgICAgLyogY2FuY2VsbGVkICovXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zdCBsZWF2aW5nVk5vZGUgPSBsZWF2aW5nVk5vZGVzQ2FjaGVba2V5XTtcbiAgICAgIGlmIChsZWF2aW5nVk5vZGUgJiYgaXNTYW1lVk5vZGVUeXBlKHZub2RlLCBsZWF2aW5nVk5vZGUpICYmIGxlYXZpbmdWTm9kZS5lbFtsZWF2ZUNiS2V5XSkge1xuICAgICAgICBsZWF2aW5nVk5vZGUuZWxbbGVhdmVDYktleV0oKTtcbiAgICAgIH1cbiAgICAgIGNhbGxIb29rKGhvb2ssIFtlbF0pO1xuICAgIH0sXG4gICAgZW50ZXIoZWwpIHtcbiAgICAgIGxldCBob29rID0gb25FbnRlcjtcbiAgICAgIGxldCBhZnRlckhvb2sgPSBvbkFmdGVyRW50ZXI7XG4gICAgICBsZXQgY2FuY2VsSG9vayA9IG9uRW50ZXJDYW5jZWxsZWQ7XG4gICAgICBpZiAoIXN0YXRlLmlzTW91bnRlZCkge1xuICAgICAgICBpZiAoYXBwZWFyKSB7XG4gICAgICAgICAgaG9vayA9IG9uQXBwZWFyIHx8IG9uRW50ZXI7XG4gICAgICAgICAgYWZ0ZXJIb29rID0gb25BZnRlckFwcGVhciB8fCBvbkFmdGVyRW50ZXI7XG4gICAgICAgICAgY2FuY2VsSG9vayA9IG9uQXBwZWFyQ2FuY2VsbGVkIHx8IG9uRW50ZXJDYW5jZWxsZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgY2FsbGVkID0gZmFsc2U7XG4gICAgICBjb25zdCBkb25lID0gZWxbZW50ZXJDYktleV0gPSAoY2FuY2VsbGVkKSA9PiB7XG4gICAgICAgIGlmIChjYWxsZWQpIHJldHVybjtcbiAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKGNhbmNlbGxlZCkge1xuICAgICAgICAgIGNhbGxIb29rKGNhbmNlbEhvb2ssIFtlbF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhbGxIb29rKGFmdGVySG9vaywgW2VsXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhvb2tzLmRlbGF5ZWRMZWF2ZSkge1xuICAgICAgICAgIGhvb2tzLmRlbGF5ZWRMZWF2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsW2VudGVyQ2JLZXldID0gdm9pZCAwO1xuICAgICAgfTtcbiAgICAgIGlmIChob29rKSB7XG4gICAgICAgIGNhbGxBc3luY0hvb2soaG9vaywgW2VsLCBkb25lXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb25lKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBsZWF2ZShlbCwgcmVtb3ZlKSB7XG4gICAgICBjb25zdCBrZXkyID0gU3RyaW5nKHZub2RlLmtleSk7XG4gICAgICBpZiAoZWxbZW50ZXJDYktleV0pIHtcbiAgICAgICAgZWxbZW50ZXJDYktleV0oXG4gICAgICAgICAgdHJ1ZVxuICAgICAgICAgIC8qIGNhbmNlbGxlZCAqL1xuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmlzVW5tb3VudGluZykge1xuICAgICAgICByZXR1cm4gcmVtb3ZlKCk7XG4gICAgICB9XG4gICAgICBjYWxsSG9vayhvbkJlZm9yZUxlYXZlLCBbZWxdKTtcbiAgICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgICAgIGNvbnN0IGRvbmUgPSBlbFtsZWF2ZUNiS2V5XSA9IChjYW5jZWxsZWQpID0+IHtcbiAgICAgICAgaWYgKGNhbGxlZCkgcmV0dXJuO1xuICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICByZW1vdmUoKTtcbiAgICAgICAgaWYgKGNhbmNlbGxlZCkge1xuICAgICAgICAgIGNhbGxIb29rKG9uTGVhdmVDYW5jZWxsZWQsIFtlbF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhbGxIb29rKG9uQWZ0ZXJMZWF2ZSwgW2VsXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxbbGVhdmVDYktleV0gPSB2b2lkIDA7XG4gICAgICAgIGlmIChsZWF2aW5nVk5vZGVzQ2FjaGVba2V5Ml0gPT09IHZub2RlKSB7XG4gICAgICAgICAgZGVsZXRlIGxlYXZpbmdWTm9kZXNDYWNoZVtrZXkyXTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGxlYXZpbmdWTm9kZXNDYWNoZVtrZXkyXSA9IHZub2RlO1xuICAgICAgaWYgKG9uTGVhdmUpIHtcbiAgICAgICAgY2FsbEFzeW5jSG9vayhvbkxlYXZlLCBbZWwsIGRvbmVdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGNsb25lKHZub2RlMikge1xuICAgICAgY29uc3QgaG9va3MyID0gcmVzb2x2ZVRyYW5zaXRpb25Ib29rcyhcbiAgICAgICAgdm5vZGUyLFxuICAgICAgICBwcm9wcyxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGluc3RhbmNlLFxuICAgICAgICBwb3N0Q2xvbmVcbiAgICAgICk7XG4gICAgICBpZiAocG9zdENsb25lKSBwb3N0Q2xvbmUoaG9va3MyKTtcbiAgICAgIHJldHVybiBob29rczI7XG4gICAgfVxuICB9O1xuICByZXR1cm4gaG9va3M7XG59XG5mdW5jdGlvbiBlbXB0eVBsYWNlaG9sZGVyKHZub2RlKSB7XG4gIGlmIChpc0tlZXBBbGl2ZSh2bm9kZSkpIHtcbiAgICB2bm9kZSA9IGNsb25lVk5vZGUodm5vZGUpO1xuICAgIHZub2RlLmNoaWxkcmVuID0gbnVsbDtcbiAgICByZXR1cm4gdm5vZGU7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldElubmVyQ2hpbGQkMSh2bm9kZSkge1xuICBpZiAoIWlzS2VlcEFsaXZlKHZub2RlKSkge1xuICAgIGlmIChpc1RlbGVwb3J0KHZub2RlLnR5cGUpICYmIHZub2RlLmNoaWxkcmVuKSB7XG4gICAgICByZXR1cm4gZmluZE5vbkNvbW1lbnRDaGlsZCh2bm9kZS5jaGlsZHJlbik7XG4gICAgfVxuICAgIHJldHVybiB2bm9kZTtcbiAgfVxuICBpZiAodm5vZGUuY29tcG9uZW50KSB7XG4gICAgcmV0dXJuIHZub2RlLmNvbXBvbmVudC5zdWJUcmVlO1xuICB9XG4gIGNvbnN0IHsgc2hhcGVGbGFnLCBjaGlsZHJlbiB9ID0gdm5vZGU7XG4gIGlmIChjaGlsZHJlbikge1xuICAgIGlmIChzaGFwZUZsYWcgJiAxNikge1xuICAgICAgcmV0dXJuIGNoaWxkcmVuWzBdO1xuICAgIH1cbiAgICBpZiAoc2hhcGVGbGFnICYgMzIgJiYgaXNGdW5jdGlvbihjaGlsZHJlbi5kZWZhdWx0KSkge1xuICAgICAgcmV0dXJuIGNoaWxkcmVuLmRlZmF1bHQoKTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIHNldFRyYW5zaXRpb25Ib29rcyh2bm9kZSwgaG9va3MpIHtcbiAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDYgJiYgdm5vZGUuY29tcG9uZW50KSB7XG4gICAgdm5vZGUudHJhbnNpdGlvbiA9IGhvb2tzO1xuICAgIHNldFRyYW5zaXRpb25Ib29rcyh2bm9kZS5jb21wb25lbnQuc3ViVHJlZSwgaG9va3MpO1xuICB9IGVsc2UgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDEyOCkge1xuICAgIHZub2RlLnNzQ29udGVudC50cmFuc2l0aW9uID0gaG9va3MuY2xvbmUodm5vZGUuc3NDb250ZW50KTtcbiAgICB2bm9kZS5zc0ZhbGxiYWNrLnRyYW5zaXRpb24gPSBob29rcy5jbG9uZSh2bm9kZS5zc0ZhbGxiYWNrKTtcbiAgfSBlbHNlIHtcbiAgICB2bm9kZS50cmFuc2l0aW9uID0gaG9va3M7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldFRyYW5zaXRpb25SYXdDaGlsZHJlbihjaGlsZHJlbiwga2VlcENvbW1lbnQgPSBmYWxzZSwgcGFyZW50S2V5KSB7XG4gIGxldCByZXQgPSBbXTtcbiAgbGV0IGtleWVkRnJhZ21lbnRDb3VudCA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICBjb25zdCBrZXkgPSBwYXJlbnRLZXkgPT0gbnVsbCA/IGNoaWxkLmtleSA6IFN0cmluZyhwYXJlbnRLZXkpICsgU3RyaW5nKGNoaWxkLmtleSAhPSBudWxsID8gY2hpbGQua2V5IDogaSk7XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09IEZyYWdtZW50KSB7XG4gICAgICBpZiAoY2hpbGQucGF0Y2hGbGFnICYgMTI4KSBrZXllZEZyYWdtZW50Q291bnQrKztcbiAgICAgIHJldCA9IHJldC5jb25jYXQoXG4gICAgICAgIGdldFRyYW5zaXRpb25SYXdDaGlsZHJlbihjaGlsZC5jaGlsZHJlbiwga2VlcENvbW1lbnQsIGtleSlcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChrZWVwQ29tbWVudCB8fCBjaGlsZC50eXBlICE9PSBDb21tZW50KSB7XG4gICAgICByZXQucHVzaChrZXkgIT0gbnVsbCA/IGNsb25lVk5vZGUoY2hpbGQsIHsga2V5IH0pIDogY2hpbGQpO1xuICAgIH1cbiAgfVxuICBpZiAoa2V5ZWRGcmFnbWVudENvdW50ID4gMSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICByZXRbaV0ucGF0Y2hGbGFnID0gLTI7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbi8qISAjX19OT19TSURFX0VGRkVDVFNfXyAqL1xuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmZ1bmN0aW9uIGRlZmluZUNvbXBvbmVudChvcHRpb25zLCBleHRyYU9wdGlvbnMpIHtcbiAgcmV0dXJuIGlzRnVuY3Rpb24ob3B0aW9ucykgPyAoXG4gICAgLy8gIzgyMzY6IGV4dGVuZCBjYWxsIGFuZCBvcHRpb25zLm5hbWUgYWNjZXNzIGFyZSBjb25zaWRlcmVkIHNpZGUtZWZmZWN0c1xuICAgIC8vIGJ5IFJvbGx1cCwgc28gd2UgaGF2ZSB0byB3cmFwIGl0IGluIGEgcHVyZS1hbm5vdGF0ZWQgSUlGRS5cbiAgICAvKiBAX19QVVJFX18gKi8gKCgpID0+IGV4dGVuZCh7IG5hbWU6IG9wdGlvbnMubmFtZSB9LCBleHRyYU9wdGlvbnMsIHsgc2V0dXA6IG9wdGlvbnMgfSkpKClcbiAgKSA6IG9wdGlvbnM7XG59XG5cbmZ1bmN0aW9uIHVzZUlkKCkge1xuICBjb25zdCBpID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gIGlmIChpKSB7XG4gICAgcmV0dXJuIChpLmFwcENvbnRleHQuY29uZmlnLmlkUHJlZml4IHx8IFwidlwiKSArIFwiLVwiICsgaS5pZHNbMF0gKyBpLmlkc1sxXSsrO1xuICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICB3YXJuJDEoXG4gICAgICBgdXNlSWQoKSBpcyBjYWxsZWQgd2hlbiB0aGVyZSBpcyBubyBhY3RpdmUgY29tcG9uZW50IGluc3RhbmNlIHRvIGJlIGFzc29jaWF0ZWQgd2l0aC5gXG4gICAgKTtcbiAgfVxuICByZXR1cm4gXCJcIjtcbn1cbmZ1bmN0aW9uIG1hcmtBc3luY0JvdW5kYXJ5KGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLmlkcyA9IFtpbnN0YW5jZS5pZHNbMF0gKyBpbnN0YW5jZS5pZHNbMl0rKyArIFwiLVwiLCAwLCAwXTtcbn1cblxuY29uc3Qga25vd25UZW1wbGF0ZVJlZnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtTZXQoKTtcbmZ1bmN0aW9uIHVzZVRlbXBsYXRlUmVmKGtleSkge1xuICBjb25zdCBpID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gIGNvbnN0IHIgPSBzaGFsbG93UmVmKG51bGwpO1xuICBpZiAoaSkge1xuICAgIGNvbnN0IHJlZnMgPSBpLnJlZnMgPT09IEVNUFRZX09CSiA/IGkucmVmcyA9IHt9IDogaS5yZWZzO1xuICAgIGxldCBkZXNjO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIChkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihyZWZzLCBrZXkpKSAmJiAhZGVzYy5jb25maWd1cmFibGUpIHtcbiAgICAgIHdhcm4kMShgdXNlVGVtcGxhdGVSZWYoJyR7a2V5fScpIGFscmVhZHkgZXhpc3RzLmApO1xuICAgIH0gZWxzZSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocmVmcywga2V5LCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldDogKCkgPT4gci52YWx1ZSxcbiAgICAgICAgc2V0OiAodmFsKSA9PiByLnZhbHVlID0gdmFsXG4gICAgICB9KTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm4kMShcbiAgICAgIGB1c2VUZW1wbGF0ZVJlZigpIGlzIGNhbGxlZCB3aGVuIHRoZXJlIGlzIG5vIGFjdGl2ZSBjb21wb25lbnQgaW5zdGFuY2UgdG8gYmUgYXNzb2NpYXRlZCB3aXRoLmBcbiAgICApO1xuICB9XG4gIGNvbnN0IHJldCA9ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyByZWFkb25seShyKSA6IHI7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAga25vd25UZW1wbGF0ZVJlZnMuYWRkKHJldCk7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gc2V0UmVmKHJhd1JlZiwgb2xkUmF3UmVmLCBwYXJlbnRTdXNwZW5zZSwgdm5vZGUsIGlzVW5tb3VudCA9IGZhbHNlKSB7XG4gIGlmIChpc0FycmF5KHJhd1JlZikpIHtcbiAgICByYXdSZWYuZm9yRWFjaChcbiAgICAgIChyLCBpKSA9PiBzZXRSZWYoXG4gICAgICAgIHIsXG4gICAgICAgIG9sZFJhd1JlZiAmJiAoaXNBcnJheShvbGRSYXdSZWYpID8gb2xkUmF3UmVmW2ldIDogb2xkUmF3UmVmKSxcbiAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgIHZub2RlLFxuICAgICAgICBpc1VubW91bnRcbiAgICAgIClcbiAgICApO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoaXNBc3luY1dyYXBwZXIodm5vZGUpICYmICFpc1VubW91bnQpIHtcbiAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgNTEyICYmIHZub2RlLnR5cGUuX19hc3luY1Jlc29sdmVkICYmIHZub2RlLmNvbXBvbmVudC5zdWJUcmVlLmNvbXBvbmVudCkge1xuICAgICAgc2V0UmVmKHJhd1JlZiwgb2xkUmF3UmVmLCBwYXJlbnRTdXNwZW5zZSwgdm5vZGUuY29tcG9uZW50LnN1YlRyZWUpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgcmVmVmFsdWUgPSB2bm9kZS5zaGFwZUZsYWcgJiA0ID8gZ2V0Q29tcG9uZW50UHVibGljSW5zdGFuY2Uodm5vZGUuY29tcG9uZW50KSA6IHZub2RlLmVsO1xuICBjb25zdCB2YWx1ZSA9IGlzVW5tb3VudCA/IG51bGwgOiByZWZWYWx1ZTtcbiAgY29uc3QgeyBpOiBvd25lciwgcjogcmVmIH0gPSByYXdSZWY7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFvd25lcikge1xuICAgIHdhcm4kMShcbiAgICAgIGBNaXNzaW5nIHJlZiBvd25lciBjb250ZXh0LiByZWYgY2Fubm90IGJlIHVzZWQgb24gaG9pc3RlZCB2bm9kZXMuIEEgdm5vZGUgd2l0aCByZWYgbXVzdCBiZSBjcmVhdGVkIGluc2lkZSB0aGUgcmVuZGVyIGZ1bmN0aW9uLmBcbiAgICApO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBvbGRSZWYgPSBvbGRSYXdSZWYgJiYgb2xkUmF3UmVmLnI7XG4gIGNvbnN0IHJlZnMgPSBvd25lci5yZWZzID09PSBFTVBUWV9PQkogPyBvd25lci5yZWZzID0ge30gOiBvd25lci5yZWZzO1xuICBjb25zdCBzZXR1cFN0YXRlID0gb3duZXIuc2V0dXBTdGF0ZTtcbiAgY29uc3QgcmF3U2V0dXBTdGF0ZSA9IHRvUmF3KHNldHVwU3RhdGUpO1xuICBjb25zdCBjYW5TZXRTZXR1cFJlZiA9IHNldHVwU3RhdGUgPT09IEVNUFRZX09CSiA/ICgpID0+IGZhbHNlIDogKGtleSkgPT4ge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICBpZiAoaGFzT3duKHJhd1NldHVwU3RhdGUsIGtleSkgJiYgIWlzUmVmKHJhd1NldHVwU3RhdGVba2V5XSkpIHtcbiAgICAgICAgd2FybiQxKFxuICAgICAgICAgIGBUZW1wbGF0ZSByZWYgXCIke2tleX1cIiB1c2VkIG9uIGEgbm9uLXJlZiB2YWx1ZS4gSXQgd2lsbCBub3Qgd29yayBpbiB0aGUgcHJvZHVjdGlvbiBidWlsZC5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAoa25vd25UZW1wbGF0ZVJlZnMuaGFzKHJhd1NldHVwU3RhdGVba2V5XSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaGFzT3duKHJhd1NldHVwU3RhdGUsIGtleSk7XG4gIH07XG4gIGlmIChvbGRSZWYgIT0gbnVsbCAmJiBvbGRSZWYgIT09IHJlZikge1xuICAgIGlmIChpc1N0cmluZyhvbGRSZWYpKSB7XG4gICAgICByZWZzW29sZFJlZl0gPSBudWxsO1xuICAgICAgaWYgKGNhblNldFNldHVwUmVmKG9sZFJlZikpIHtcbiAgICAgICAgc2V0dXBTdGF0ZVtvbGRSZWZdID0gbnVsbDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzUmVmKG9sZFJlZikpIHtcbiAgICAgIG9sZFJlZi52YWx1ZSA9IG51bGw7XG4gICAgfVxuICB9XG4gIGlmIChpc0Z1bmN0aW9uKHJlZikpIHtcbiAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcocmVmLCBvd25lciwgMTIsIFt2YWx1ZSwgcmVmc10pO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IF9pc1N0cmluZyA9IGlzU3RyaW5nKHJlZik7XG4gICAgY29uc3QgX2lzUmVmID0gaXNSZWYocmVmKTtcbiAgICBpZiAoX2lzU3RyaW5nIHx8IF9pc1JlZikge1xuICAgICAgY29uc3QgZG9TZXQgPSAoKSA9PiB7XG4gICAgICAgIGlmIChyYXdSZWYuZikge1xuICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gX2lzU3RyaW5nID8gY2FuU2V0U2V0dXBSZWYocmVmKSA/IHNldHVwU3RhdGVbcmVmXSA6IHJlZnNbcmVmXSA6IHJlZi52YWx1ZTtcbiAgICAgICAgICBpZiAoaXNVbm1vdW50KSB7XG4gICAgICAgICAgICBpc0FycmF5KGV4aXN0aW5nKSAmJiByZW1vdmUoZXhpc3RpbmcsIHJlZlZhbHVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFpc0FycmF5KGV4aXN0aW5nKSkge1xuICAgICAgICAgICAgICBpZiAoX2lzU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgcmVmc1tyZWZdID0gW3JlZlZhbHVlXTtcbiAgICAgICAgICAgICAgICBpZiAoY2FuU2V0U2V0dXBSZWYocmVmKSkge1xuICAgICAgICAgICAgICAgICAgc2V0dXBTdGF0ZVtyZWZdID0gcmVmc1tyZWZdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWYudmFsdWUgPSBbcmVmVmFsdWVdO1xuICAgICAgICAgICAgICAgIGlmIChyYXdSZWYuaykgcmVmc1tyYXdSZWYua10gPSByZWYudmFsdWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWV4aXN0aW5nLmluY2x1ZGVzKHJlZlZhbHVlKSkge1xuICAgICAgICAgICAgICBleGlzdGluZy5wdXNoKHJlZlZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoX2lzU3RyaW5nKSB7XG4gICAgICAgICAgcmVmc1tyZWZdID0gdmFsdWU7XG4gICAgICAgICAgaWYgKGNhblNldFNldHVwUmVmKHJlZikpIHtcbiAgICAgICAgICAgIHNldHVwU3RhdGVbcmVmXSA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChfaXNSZWYpIHtcbiAgICAgICAgICByZWYudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICBpZiAocmF3UmVmLmspIHJlZnNbcmF3UmVmLmtdID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHdhcm4kMShcIkludmFsaWQgdGVtcGxhdGUgcmVmIHR5cGU6XCIsIHJlZiwgYCgke3R5cGVvZiByZWZ9KWApO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIGRvU2V0LmlkID0gLTE7XG4gICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdChkb1NldCwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9TZXQoKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIHdhcm4kMShcIkludmFsaWQgdGVtcGxhdGUgcmVmIHR5cGU6XCIsIHJlZiwgYCgke3R5cGVvZiByZWZ9KWApO1xuICAgIH1cbiAgfVxufVxuXG5sZXQgaGFzTG9nZ2VkTWlzbWF0Y2hFcnJvciA9IGZhbHNlO1xuY29uc3QgbG9nTWlzbWF0Y2hFcnJvciA9ICgpID0+IHtcbiAgaWYgKGhhc0xvZ2dlZE1pc21hdGNoRXJyb3IpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc29sZS5lcnJvcihcIkh5ZHJhdGlvbiBjb21wbGV0ZWQgYnV0IGNvbnRhaW5zIG1pc21hdGNoZXMuXCIpO1xuICBoYXNMb2dnZWRNaXNtYXRjaEVycm9yID0gdHJ1ZTtcbn07XG5jb25zdCBpc1NWR0NvbnRhaW5lciA9IChjb250YWluZXIpID0+IGNvbnRhaW5lci5uYW1lc3BhY2VVUkkuaW5jbHVkZXMoXCJzdmdcIikgJiYgY29udGFpbmVyLnRhZ05hbWUgIT09IFwiZm9yZWlnbk9iamVjdFwiO1xuY29uc3QgaXNNYXRoTUxDb250YWluZXIgPSAoY29udGFpbmVyKSA9PiBjb250YWluZXIubmFtZXNwYWNlVVJJLmluY2x1ZGVzKFwiTWF0aE1MXCIpO1xuY29uc3QgZ2V0Q29udGFpbmVyVHlwZSA9IChjb250YWluZXIpID0+IHtcbiAgaWYgKGNvbnRhaW5lci5ub2RlVHlwZSAhPT0gMSkgcmV0dXJuIHZvaWQgMDtcbiAgaWYgKGlzU1ZHQ29udGFpbmVyKGNvbnRhaW5lcikpIHJldHVybiBcInN2Z1wiO1xuICBpZiAoaXNNYXRoTUxDb250YWluZXIoY29udGFpbmVyKSkgcmV0dXJuIFwibWF0aG1sXCI7XG4gIHJldHVybiB2b2lkIDA7XG59O1xuY29uc3QgaXNDb21tZW50ID0gKG5vZGUpID0+IG5vZGUubm9kZVR5cGUgPT09IDg7XG5mdW5jdGlvbiBjcmVhdGVIeWRyYXRpb25GdW5jdGlvbnMocmVuZGVyZXJJbnRlcm5hbHMpIHtcbiAgY29uc3Qge1xuICAgIG10OiBtb3VudENvbXBvbmVudCxcbiAgICBwOiBwYXRjaCxcbiAgICBvOiB7XG4gICAgICBwYXRjaFByb3AsXG4gICAgICBjcmVhdGVUZXh0LFxuICAgICAgbmV4dFNpYmxpbmcsXG4gICAgICBwYXJlbnROb2RlLFxuICAgICAgcmVtb3ZlLFxuICAgICAgaW5zZXJ0LFxuICAgICAgY3JlYXRlQ29tbWVudFxuICAgIH1cbiAgfSA9IHJlbmRlcmVySW50ZXJuYWxzO1xuICBjb25zdCBoeWRyYXRlID0gKHZub2RlLCBjb250YWluZXIpID0+IHtcbiAgICBpZiAoIWNvbnRhaW5lci5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfSFlEUkFUSU9OX01JU01BVENIX0RFVEFJTFNfXykgJiYgd2FybiQxKFxuICAgICAgICBgQXR0ZW1wdGluZyB0byBoeWRyYXRlIGV4aXN0aW5nIG1hcmt1cCBidXQgY29udGFpbmVyIGlzIGVtcHR5LiBQZXJmb3JtaW5nIGZ1bGwgbW91bnQgaW5zdGVhZC5gXG4gICAgICApO1xuICAgICAgcGF0Y2gobnVsbCwgdm5vZGUsIGNvbnRhaW5lcik7XG4gICAgICBmbHVzaFBvc3RGbHVzaENicygpO1xuICAgICAgY29udGFpbmVyLl92bm9kZSA9IHZub2RlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBoeWRyYXRlTm9kZShjb250YWluZXIuZmlyc3RDaGlsZCwgdm5vZGUsIG51bGwsIG51bGwsIG51bGwpO1xuICAgIGZsdXNoUG9zdEZsdXNoQ2JzKCk7XG4gICAgY29udGFpbmVyLl92bm9kZSA9IHZub2RlO1xuICB9O1xuICBjb25zdCBoeWRyYXRlTm9kZSA9IChub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQgPSBmYWxzZSkgPT4ge1xuICAgIG9wdGltaXplZCA9IG9wdGltaXplZCB8fCAhIXZub2RlLmR5bmFtaWNDaGlsZHJlbjtcbiAgICBjb25zdCBpc0ZyYWdtZW50U3RhcnQgPSBpc0NvbW1lbnQobm9kZSkgJiYgbm9kZS5kYXRhID09PSBcIltcIjtcbiAgICBjb25zdCBvbk1pc21hdGNoID0gKCkgPT4gaGFuZGxlTWlzbWF0Y2goXG4gICAgICBub2RlLFxuICAgICAgdm5vZGUsXG4gICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgIGlzRnJhZ21lbnRTdGFydFxuICAgICk7XG4gICAgY29uc3QgeyB0eXBlLCByZWYsIHNoYXBlRmxhZywgcGF0Y2hGbGFnIH0gPSB2bm9kZTtcbiAgICBsZXQgZG9tVHlwZSA9IG5vZGUubm9kZVR5cGU7XG4gICAgdm5vZGUuZWwgPSBub2RlO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgZGVmKG5vZGUsIFwiX192bm9kZVwiLCB2bm9kZSwgdHJ1ZSk7XG4gICAgICBkZWYobm9kZSwgXCJfX3Z1ZVBhcmVudENvbXBvbmVudFwiLCBwYXJlbnRDb21wb25lbnQsIHRydWUpO1xuICAgIH1cbiAgICBpZiAocGF0Y2hGbGFnID09PSAtMikge1xuICAgICAgb3B0aW1pemVkID0gZmFsc2U7XG4gICAgICB2bm9kZS5keW5hbWljQ2hpbGRyZW4gPSBudWxsO1xuICAgIH1cbiAgICBsZXQgbmV4dE5vZGUgPSBudWxsO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBUZXh0OlxuICAgICAgICBpZiAoZG9tVHlwZSAhPT0gMykge1xuICAgICAgICAgIGlmICh2bm9kZS5jaGlsZHJlbiA9PT0gXCJcIikge1xuICAgICAgICAgICAgaW5zZXJ0KHZub2RlLmVsID0gY3JlYXRlVGV4dChcIlwiKSwgcGFyZW50Tm9kZShub2RlKSwgbm9kZSk7XG4gICAgICAgICAgICBuZXh0Tm9kZSA9IG5vZGU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5leHROb2RlID0gb25NaXNtYXRjaCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAobm9kZS5kYXRhICE9PSB2bm9kZS5jaGlsZHJlbikge1xuICAgICAgICAgICAgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9IWURSQVRJT05fTUlTTUFUQ0hfREVUQUlMU19fKSAmJiB3YXJuJDEoXG4gICAgICAgICAgICAgIGBIeWRyYXRpb24gdGV4dCBtaXNtYXRjaCBpbmAsXG4gICAgICAgICAgICAgIG5vZGUucGFyZW50Tm9kZSxcbiAgICAgICAgICAgICAgYFxuICAtIHJlbmRlcmVkIG9uIHNlcnZlcjogJHtKU09OLnN0cmluZ2lmeShcbiAgICAgICAgICAgICAgICBub2RlLmRhdGFcbiAgICAgICAgICAgICAgKX1cbiAgLSBleHBlY3RlZCBvbiBjbGllbnQ6ICR7SlNPTi5zdHJpbmdpZnkodm5vZGUuY2hpbGRyZW4pfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBsb2dNaXNtYXRjaEVycm9yKCk7XG4gICAgICAgICAgICBub2RlLmRhdGEgPSB2bm9kZS5jaGlsZHJlbjtcbiAgICAgICAgICB9XG4gICAgICAgICAgbmV4dE5vZGUgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQ29tbWVudDpcbiAgICAgICAgaWYgKGlzVGVtcGxhdGVOb2RlKG5vZGUpKSB7XG4gICAgICAgICAgbmV4dE5vZGUgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgICByZXBsYWNlTm9kZShcbiAgICAgICAgICAgIHZub2RlLmVsID0gbm9kZS5jb250ZW50LmZpcnN0Q2hpbGQsXG4gICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50XG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChkb21UeXBlICE9PSA4IHx8IGlzRnJhZ21lbnRTdGFydCkge1xuICAgICAgICAgIG5leHROb2RlID0gb25NaXNtYXRjaCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5leHROb2RlID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFN0YXRpYzpcbiAgICAgICAgaWYgKGlzRnJhZ21lbnRTdGFydCkge1xuICAgICAgICAgIG5vZGUgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgICBkb21UeXBlID0gbm9kZS5ub2RlVHlwZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZG9tVHlwZSA9PT0gMSB8fCBkb21UeXBlID09PSAzKSB7XG4gICAgICAgICAgbmV4dE5vZGUgPSBub2RlO1xuICAgICAgICAgIGNvbnN0IG5lZWRUb0Fkb3B0Q29udGVudCA9ICF2bm9kZS5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2bm9kZS5zdGF0aWNDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobmVlZFRvQWRvcHRDb250ZW50KVxuICAgICAgICAgICAgICB2bm9kZS5jaGlsZHJlbiArPSBuZXh0Tm9kZS5ub2RlVHlwZSA9PT0gMSA/IG5leHROb2RlLm91dGVySFRNTCA6IG5leHROb2RlLmRhdGE7XG4gICAgICAgICAgICBpZiAoaSA9PT0gdm5vZGUuc3RhdGljQ291bnQgLSAxKSB7XG4gICAgICAgICAgICAgIHZub2RlLmFuY2hvciA9IG5leHROb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV4dE5vZGUgPSBuZXh0U2libGluZyhuZXh0Tm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBpc0ZyYWdtZW50U3RhcnQgPyBuZXh0U2libGluZyhuZXh0Tm9kZSkgOiBuZXh0Tm9kZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvbk1pc21hdGNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEZyYWdtZW50OlxuICAgICAgICBpZiAoIWlzRnJhZ21lbnRTdGFydCkge1xuICAgICAgICAgIG5leHROb2RlID0gb25NaXNtYXRjaCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5leHROb2RlID0gaHlkcmF0ZUZyYWdtZW50KFxuICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgIHZub2RlLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDEpIHtcbiAgICAgICAgICBpZiAoKGRvbVR5cGUgIT09IDEgfHwgdm5vZGUudHlwZS50b0xvd2VyQ2FzZSgpICE9PSBub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkgJiYgIWlzVGVtcGxhdGVOb2RlKG5vZGUpKSB7XG4gICAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV4dE5vZGUgPSBoeWRyYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgICAgdm5vZGUsXG4gICAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChzaGFwZUZsYWcgJiA2KSB7XG4gICAgICAgICAgdm5vZGUuc2xvdFNjb3BlSWRzID0gc2xvdFNjb3BlSWRzO1xuICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHBhcmVudE5vZGUobm9kZSk7XG4gICAgICAgICAgaWYgKGlzRnJhZ21lbnRTdGFydCkge1xuICAgICAgICAgICAgbmV4dE5vZGUgPSBsb2NhdGVDbG9zaW5nQW5jaG9yKG5vZGUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaXNDb21tZW50KG5vZGUpICYmIG5vZGUuZGF0YSA9PT0gXCJ0ZWxlcG9ydCBzdGFydFwiKSB7XG4gICAgICAgICAgICBuZXh0Tm9kZSA9IGxvY2F0ZUNsb3NpbmdBbmNob3Iobm9kZSwgbm9kZS5kYXRhLCBcInRlbGVwb3J0IGVuZFwiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV4dE5vZGUgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbW91bnRDb21wb25lbnQoXG4gICAgICAgICAgICB2bm9kZSxcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgIGdldENvbnRhaW5lclR5cGUoY29udGFpbmVyKSxcbiAgICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKGlzQXN5bmNXcmFwcGVyKHZub2RlKSAmJiAhdm5vZGUudHlwZS5fX2FzeW5jUmVzb2x2ZWQpIHtcbiAgICAgICAgICAgIGxldCBzdWJUcmVlO1xuICAgICAgICAgICAgaWYgKGlzRnJhZ21lbnRTdGFydCkge1xuICAgICAgICAgICAgICBzdWJUcmVlID0gY3JlYXRlVk5vZGUoRnJhZ21lbnQpO1xuICAgICAgICAgICAgICBzdWJUcmVlLmFuY2hvciA9IG5leHROb2RlID8gbmV4dE5vZGUucHJldmlvdXNTaWJsaW5nIDogY29udGFpbmVyLmxhc3RDaGlsZDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHN1YlRyZWUgPSBub2RlLm5vZGVUeXBlID09PSAzID8gY3JlYXRlVGV4dFZOb2RlKFwiXCIpIDogY3JlYXRlVk5vZGUoXCJkaXZcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdWJUcmVlLmVsID0gbm9kZTtcbiAgICAgICAgICAgIHZub2RlLmNvbXBvbmVudC5zdWJUcmVlID0gc3ViVHJlZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoc2hhcGVGbGFnICYgNjQpIHtcbiAgICAgICAgICBpZiAoZG9tVHlwZSAhPT0gOCkge1xuICAgICAgICAgICAgbmV4dE5vZGUgPSBvbk1pc21hdGNoKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5leHROb2RlID0gdm5vZGUudHlwZS5oeWRyYXRlKFxuICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICB2bm9kZSxcbiAgICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgICBvcHRpbWl6ZWQsXG4gICAgICAgICAgICAgIHJlbmRlcmVySW50ZXJuYWxzLFxuICAgICAgICAgICAgICBoeWRyYXRlQ2hpbGRyZW5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHNoYXBlRmxhZyAmIDEyOCkge1xuICAgICAgICAgIG5leHROb2RlID0gdm5vZGUudHlwZS5oeWRyYXRlKFxuICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgIHZub2RlLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICBnZXRDb250YWluZXJUeXBlKHBhcmVudE5vZGUobm9kZSkpLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkLFxuICAgICAgICAgICAgcmVuZGVyZXJJbnRlcm5hbHMsXG4gICAgICAgICAgICBoeWRyYXRlTm9kZVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0hZRFJBVElPTl9NSVNNQVRDSF9ERVRBSUxTX18pIHtcbiAgICAgICAgICB3YXJuJDEoXCJJbnZhbGlkIEhvc3RWTm9kZSB0eXBlOlwiLCB0eXBlLCBgKCR7dHlwZW9mIHR5cGV9KWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChyZWYgIT0gbnVsbCkge1xuICAgICAgc2V0UmVmKHJlZiwgbnVsbCwgcGFyZW50U3VzcGVuc2UsIHZub2RlKTtcbiAgICB9XG4gICAgcmV0dXJuIG5leHROb2RlO1xuICB9O1xuICBjb25zdCBoeWRyYXRlRWxlbWVudCA9IChlbCwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgb3B0aW1pemVkID0gb3B0aW1pemVkIHx8ICEhdm5vZGUuZHluYW1pY0NoaWxkcmVuO1xuICAgIGNvbnN0IHsgdHlwZSwgcHJvcHMsIHBhdGNoRmxhZywgc2hhcGVGbGFnLCBkaXJzLCB0cmFuc2l0aW9uIH0gPSB2bm9kZTtcbiAgICBjb25zdCBmb3JjZVBhdGNoID0gdHlwZSA9PT0gXCJpbnB1dFwiIHx8IHR5cGUgPT09IFwib3B0aW9uXCI7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgZm9yY2VQYXRjaCB8fCBwYXRjaEZsYWcgIT09IC0xKSB7XG4gICAgICBpZiAoZGlycykge1xuICAgICAgICBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIFwiY3JlYXRlZFwiKTtcbiAgICAgIH1cbiAgICAgIGxldCBuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcyA9IGZhbHNlO1xuICAgICAgaWYgKGlzVGVtcGxhdGVOb2RlKGVsKSkge1xuICAgICAgICBuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcyA9IG5lZWRUcmFuc2l0aW9uKFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgLy8gbm8gbmVlZCBjaGVjayBwYXJlbnRTdXNwZW5zZSBpbiBoeWRyYXRpb25cbiAgICAgICAgICB0cmFuc2l0aW9uXG4gICAgICAgICkgJiYgcGFyZW50Q29tcG9uZW50ICYmIHBhcmVudENvbXBvbmVudC52bm9kZS5wcm9wcyAmJiBwYXJlbnRDb21wb25lbnQudm5vZGUucHJvcHMuYXBwZWFyO1xuICAgICAgICBjb25zdCBjb250ZW50ID0gZWwuY29udGVudC5maXJzdENoaWxkO1xuICAgICAgICBpZiAobmVlZENhbGxUcmFuc2l0aW9uSG9va3MpIHtcbiAgICAgICAgICB0cmFuc2l0aW9uLmJlZm9yZUVudGVyKGNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJlcGxhY2VOb2RlKGNvbnRlbnQsIGVsLCBwYXJlbnRDb21wb25lbnQpO1xuICAgICAgICB2bm9kZS5lbCA9IGVsID0gY29udGVudDtcbiAgICAgIH1cbiAgICAgIGlmIChzaGFwZUZsYWcgJiAxNiAmJiAvLyBza2lwIGlmIGVsZW1lbnQgaGFzIGlubmVySFRNTCAvIHRleHRDb250ZW50XG4gICAgICAhKHByb3BzICYmIChwcm9wcy5pbm5lckhUTUwgfHwgcHJvcHMudGV4dENvbnRlbnQpKSkge1xuICAgICAgICBsZXQgbmV4dCA9IGh5ZHJhdGVDaGlsZHJlbihcbiAgICAgICAgICBlbC5maXJzdENoaWxkLFxuICAgICAgICAgIHZub2RlLFxuICAgICAgICAgIGVsLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICk7XG4gICAgICAgIGxldCBoYXNXYXJuZWQgPSBmYWxzZTtcbiAgICAgICAgd2hpbGUgKG5leHQpIHtcbiAgICAgICAgICBpZiAoIWlzTWlzbWF0Y2hBbGxvd2VkKGVsLCAxIC8qIENISUxEUkVOICovKSkge1xuICAgICAgICAgICAgaWYgKCghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfSFlEUkFUSU9OX01JU01BVENIX0RFVEFJTFNfXykgJiYgIWhhc1dhcm5lZCkge1xuICAgICAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICAgICAgYEh5ZHJhdGlvbiBjaGlsZHJlbiBtaXNtYXRjaCBvbmAsXG4gICAgICAgICAgICAgICAgZWwsXG4gICAgICAgICAgICAgICAgYFxuU2VydmVyIHJlbmRlcmVkIGVsZW1lbnQgY29udGFpbnMgbW9yZSBjaGlsZCBub2RlcyB0aGFuIGNsaWVudCB2ZG9tLmBcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgaGFzV2FybmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvZ01pc21hdGNoRXJyb3IoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgY3VyID0gbmV4dDtcbiAgICAgICAgICBuZXh0ID0gbmV4dC5uZXh0U2libGluZztcbiAgICAgICAgICByZW1vdmUoY3VyKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzaGFwZUZsYWcgJiA4KSB7XG4gICAgICAgIGxldCBjbGllbnRUZXh0ID0gdm5vZGUuY2hpbGRyZW47XG4gICAgICAgIGlmIChjbGllbnRUZXh0WzBdID09PSBcIlxcblwiICYmIChlbC50YWdOYW1lID09PSBcIlBSRVwiIHx8IGVsLnRhZ05hbWUgPT09IFwiVEVYVEFSRUFcIikpIHtcbiAgICAgICAgICBjbGllbnRUZXh0ID0gY2xpZW50VGV4dC5zbGljZSgxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWwudGV4dENvbnRlbnQgIT09IGNsaWVudFRleHQpIHtcbiAgICAgICAgICBpZiAoIWlzTWlzbWF0Y2hBbGxvd2VkKGVsLCAwIC8qIFRFWFQgKi8pKSB7XG4gICAgICAgICAgICAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0hZRFJBVElPTl9NSVNNQVRDSF9ERVRBSUxTX18pICYmIHdhcm4kMShcbiAgICAgICAgICAgICAgYEh5ZHJhdGlvbiB0ZXh0IGNvbnRlbnQgbWlzbWF0Y2ggb25gLFxuICAgICAgICAgICAgICBlbCxcbiAgICAgICAgICAgICAgYFxuICAtIHJlbmRlcmVkIG9uIHNlcnZlcjogJHtlbC50ZXh0Q29udGVudH1cbiAgLSBleHBlY3RlZCBvbiBjbGllbnQ6ICR7dm5vZGUuY2hpbGRyZW59YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGxvZ01pc21hdGNoRXJyb3IoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWwudGV4dENvbnRlbnQgPSB2bm9kZS5jaGlsZHJlbjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHByb3BzKSB7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfSFlEUkFUSU9OX01JU01BVENIX0RFVEFJTFNfXyB8fCBmb3JjZVBhdGNoIHx8ICFvcHRpbWl6ZWQgfHwgcGF0Y2hGbGFnICYgKDE2IHwgMzIpKSB7XG4gICAgICAgICAgY29uc3QgaXNDdXN0b21FbGVtZW50ID0gZWwudGFnTmFtZS5pbmNsdWRlcyhcIi1cIik7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcbiAgICAgICAgICAgIGlmICgoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0hZRFJBVElPTl9NSVNNQVRDSF9ERVRBSUxTX18pICYmIC8vICMxMTE4OSBza2lwIGlmIHRoaXMgbm9kZSBoYXMgZGlyZWN0aXZlcyB0aGF0IGhhdmUgY3JlYXRlZCBob29rc1xuICAgICAgICAgICAgLy8gYXMgaXQgY291bGQgaGF2ZSBtdXRhdGVkIHRoZSBET00gaW4gYW55IHBvc3NpYmxlIHdheVxuICAgICAgICAgICAgIShkaXJzICYmIGRpcnMuc29tZSgoZCkgPT4gZC5kaXIuY3JlYXRlZCkpICYmIHByb3BIYXNNaXNtYXRjaChlbCwga2V5LCBwcm9wc1trZXldLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50KSkge1xuICAgICAgICAgICAgICBsb2dNaXNtYXRjaEVycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZm9yY2VQYXRjaCAmJiAoa2V5LmVuZHNXaXRoKFwidmFsdWVcIikgfHwga2V5ID09PSBcImluZGV0ZXJtaW5hdGVcIikgfHwgaXNPbihrZXkpICYmICFpc1Jlc2VydmVkUHJvcChrZXkpIHx8IC8vIGZvcmNlIGh5ZHJhdGUgdi1iaW5kIHdpdGggLnByb3AgbW9kaWZpZXJzXG4gICAgICAgICAgICBrZXlbMF0gPT09IFwiLlwiIHx8IGlzQ3VzdG9tRWxlbWVudCkge1xuICAgICAgICAgICAgICBwYXRjaFByb3AoZWwsIGtleSwgbnVsbCwgcHJvcHNba2V5XSwgdm9pZCAwLCBwYXJlbnRDb21wb25lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChwcm9wcy5vbkNsaWNrKSB7XG4gICAgICAgICAgcGF0Y2hQcm9wKFxuICAgICAgICAgICAgZWwsXG4gICAgICAgICAgICBcIm9uQ2xpY2tcIixcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBwcm9wcy5vbkNsaWNrLFxuICAgICAgICAgICAgdm9pZCAwLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50XG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChwYXRjaEZsYWcgJiA0ICYmIGlzUmVhY3RpdmUocHJvcHMuc3R5bGUpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMuc3R5bGUpIHByb3BzLnN0eWxlW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxldCB2bm9kZUhvb2tzO1xuICAgICAgaWYgKHZub2RlSG9va3MgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlQmVmb3JlTW91bnQpIHtcbiAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9va3MsIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgfVxuICAgICAgaWYgKGRpcnMpIHtcbiAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBcImJlZm9yZU1vdW50XCIpO1xuICAgICAgfVxuICAgICAgaWYgKCh2bm9kZUhvb2tzID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZU1vdW50ZWQpIHx8IGRpcnMgfHwgbmVlZENhbGxUcmFuc2l0aW9uSG9va3MpIHtcbiAgICAgICAgcXVldWVFZmZlY3RXaXRoU3VzcGVuc2UoKCkgPT4ge1xuICAgICAgICAgIHZub2RlSG9va3MgJiYgaW52b2tlVk5vZGVIb29rKHZub2RlSG9va3MsIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgICAgIG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzICYmIHRyYW5zaXRpb24uZW50ZXIoZWwpO1xuICAgICAgICAgIGRpcnMgJiYgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBcIm1vdW50ZWRcIik7XG4gICAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVsLm5leHRTaWJsaW5nO1xuICB9O1xuICBjb25zdCBoeWRyYXRlQ2hpbGRyZW4gPSAobm9kZSwgcGFyZW50Vk5vZGUsIGNvbnRhaW5lciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBvcHRpbWl6ZWQgPSBvcHRpbWl6ZWQgfHwgISFwYXJlbnRWTm9kZS5keW5hbWljQ2hpbGRyZW47XG4gICAgY29uc3QgY2hpbGRyZW4gPSBwYXJlbnRWTm9kZS5jaGlsZHJlbjtcbiAgICBjb25zdCBsID0gY2hpbGRyZW4ubGVuZ3RoO1xuICAgIGxldCBoYXNXYXJuZWQgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgY29uc3Qgdm5vZGUgPSBvcHRpbWl6ZWQgPyBjaGlsZHJlbltpXSA6IGNoaWxkcmVuW2ldID0gbm9ybWFsaXplVk5vZGUoY2hpbGRyZW5baV0pO1xuICAgICAgY29uc3QgaXNUZXh0ID0gdm5vZGUudHlwZSA9PT0gVGV4dDtcbiAgICAgIGlmIChub2RlKSB7XG4gICAgICAgIGlmIChpc1RleHQgJiYgIW9wdGltaXplZCkge1xuICAgICAgICAgIGlmIChpICsgMSA8IGwgJiYgbm9ybWFsaXplVk5vZGUoY2hpbGRyZW5baSArIDFdKS50eXBlID09PSBUZXh0KSB7XG4gICAgICAgICAgICBpbnNlcnQoXG4gICAgICAgICAgICAgIGNyZWF0ZVRleHQoXG4gICAgICAgICAgICAgICAgbm9kZS5kYXRhLnNsaWNlKHZub2RlLmNoaWxkcmVuLmxlbmd0aClcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgICBuZXh0U2libGluZyhub2RlKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG5vZGUuZGF0YSA9IHZub2RlLmNoaWxkcmVuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBub2RlID0gaHlkcmF0ZU5vZGUoXG4gICAgICAgICAgbm9kZSxcbiAgICAgICAgICB2bm9kZSxcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChpc1RleHQgJiYgIXZub2RlLmNoaWxkcmVuKSB7XG4gICAgICAgIGluc2VydCh2bm9kZS5lbCA9IGNyZWF0ZVRleHQoXCJcIiksIGNvbnRhaW5lcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIWlzTWlzbWF0Y2hBbGxvd2VkKGNvbnRhaW5lciwgMSAvKiBDSElMRFJFTiAqLykpIHtcbiAgICAgICAgICBpZiAoKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9IWURSQVRJT05fTUlTTUFUQ0hfREVUQUlMU19fKSAmJiAhaGFzV2FybmVkKSB7XG4gICAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICAgIGBIeWRyYXRpb24gY2hpbGRyZW4gbWlzbWF0Y2ggb25gLFxuICAgICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICAgIGBcblNlcnZlciByZW5kZXJlZCBlbGVtZW50IGNvbnRhaW5zIGZld2VyIGNoaWxkIG5vZGVzIHRoYW4gY2xpZW50IHZkb20uYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGhhc1dhcm5lZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxvZ01pc21hdGNoRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBwYXRjaChcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIHZub2RlLFxuICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBnZXRDb250YWluZXJUeXBlKGNvbnRhaW5lciksXG4gICAgICAgICAgc2xvdFNjb3BlSWRzXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBub2RlO1xuICB9O1xuICBjb25zdCBoeWRyYXRlRnJhZ21lbnQgPSAobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgY29uc3QgeyBzbG90U2NvcGVJZHM6IGZyYWdtZW50U2xvdFNjb3BlSWRzIH0gPSB2bm9kZTtcbiAgICBpZiAoZnJhZ21lbnRTbG90U2NvcGVJZHMpIHtcbiAgICAgIHNsb3RTY29wZUlkcyA9IHNsb3RTY29wZUlkcyA/IHNsb3RTY29wZUlkcy5jb25jYXQoZnJhZ21lbnRTbG90U2NvcGVJZHMpIDogZnJhZ21lbnRTbG90U2NvcGVJZHM7XG4gICAgfVxuICAgIGNvbnN0IGNvbnRhaW5lciA9IHBhcmVudE5vZGUobm9kZSk7XG4gICAgY29uc3QgbmV4dCA9IGh5ZHJhdGVDaGlsZHJlbihcbiAgICAgIG5leHRTaWJsaW5nKG5vZGUpLFxuICAgICAgdm5vZGUsXG4gICAgICBjb250YWluZXIsXG4gICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgIG9wdGltaXplZFxuICAgICk7XG4gICAgaWYgKG5leHQgJiYgaXNDb21tZW50KG5leHQpICYmIG5leHQuZGF0YSA9PT0gXCJdXCIpIHtcbiAgICAgIHJldHVybiBuZXh0U2libGluZyh2bm9kZS5hbmNob3IgPSBuZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nTWlzbWF0Y2hFcnJvcigpO1xuICAgICAgaW5zZXJ0KHZub2RlLmFuY2hvciA9IGNyZWF0ZUNvbW1lbnQoYF1gKSwgY29udGFpbmVyLCBuZXh0KTtcbiAgICAgIHJldHVybiBuZXh0O1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaGFuZGxlTWlzbWF0Y2ggPSAobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgaXNGcmFnbWVudCkgPT4ge1xuICAgIGlmICghaXNNaXNtYXRjaEFsbG93ZWQobm9kZS5wYXJlbnRFbGVtZW50LCAxIC8qIENISUxEUkVOICovKSkge1xuICAgICAgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9IWURSQVRJT05fTUlTTUFUQ0hfREVUQUlMU19fKSAmJiB3YXJuJDEoXG4gICAgICAgIGBIeWRyYXRpb24gbm9kZSBtaXNtYXRjaDpcbi0gcmVuZGVyZWQgb24gc2VydmVyOmAsXG4gICAgICAgIG5vZGUsXG4gICAgICAgIG5vZGUubm9kZVR5cGUgPT09IDMgPyBgKHRleHQpYCA6IGlzQ29tbWVudChub2RlKSAmJiBub2RlLmRhdGEgPT09IFwiW1wiID8gYChzdGFydCBvZiBmcmFnbWVudClgIDogYGAsXG4gICAgICAgIGBcbi0gZXhwZWN0ZWQgb24gY2xpZW50OmAsXG4gICAgICAgIHZub2RlLnR5cGVcbiAgICAgICk7XG4gICAgICBsb2dNaXNtYXRjaEVycm9yKCk7XG4gICAgfVxuICAgIHZub2RlLmVsID0gbnVsbDtcbiAgICBpZiAoaXNGcmFnbWVudCkge1xuICAgICAgY29uc3QgZW5kID0gbG9jYXRlQ2xvc2luZ0FuY2hvcihub2RlKTtcbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGNvbnN0IG5leHQyID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgIGlmIChuZXh0MiAmJiBuZXh0MiAhPT0gZW5kKSB7XG4gICAgICAgICAgcmVtb3ZlKG5leHQyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBuZXh0ID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgY29uc3QgY29udGFpbmVyID0gcGFyZW50Tm9kZShub2RlKTtcbiAgICByZW1vdmUobm9kZSk7XG4gICAgcGF0Y2goXG4gICAgICBudWxsLFxuICAgICAgdm5vZGUsXG4gICAgICBjb250YWluZXIsXG4gICAgICBuZXh0LFxuICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICBnZXRDb250YWluZXJUeXBlKGNvbnRhaW5lciksXG4gICAgICBzbG90U2NvcGVJZHNcbiAgICApO1xuICAgIGlmIChwYXJlbnRDb21wb25lbnQpIHtcbiAgICAgIHBhcmVudENvbXBvbmVudC52bm9kZS5lbCA9IHZub2RlLmVsO1xuICAgICAgdXBkYXRlSE9DSG9zdEVsKHBhcmVudENvbXBvbmVudCwgdm5vZGUuZWwpO1xuICAgIH1cbiAgICByZXR1cm4gbmV4dDtcbiAgfTtcbiAgY29uc3QgbG9jYXRlQ2xvc2luZ0FuY2hvciA9IChub2RlLCBvcGVuID0gXCJbXCIsIGNsb3NlID0gXCJdXCIpID0+IHtcbiAgICBsZXQgbWF0Y2ggPSAwO1xuICAgIHdoaWxlIChub2RlKSB7XG4gICAgICBub2RlID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICBpZiAobm9kZSAmJiBpc0NvbW1lbnQobm9kZSkpIHtcbiAgICAgICAgaWYgKG5vZGUuZGF0YSA9PT0gb3BlbikgbWF0Y2grKztcbiAgICAgICAgaWYgKG5vZGUuZGF0YSA9PT0gY2xvc2UpIHtcbiAgICAgICAgICBpZiAobWF0Y2ggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWF0Y2gtLTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vZGU7XG4gIH07XG4gIGNvbnN0IHJlcGxhY2VOb2RlID0gKG5ld05vZGUsIG9sZE5vZGUsIHBhcmVudENvbXBvbmVudCkgPT4ge1xuICAgIGNvbnN0IHBhcmVudE5vZGUyID0gb2xkTm9kZS5wYXJlbnROb2RlO1xuICAgIGlmIChwYXJlbnROb2RlMikge1xuICAgICAgcGFyZW50Tm9kZTIucmVwbGFjZUNoaWxkKG5ld05vZGUsIG9sZE5vZGUpO1xuICAgIH1cbiAgICBsZXQgcGFyZW50ID0gcGFyZW50Q29tcG9uZW50O1xuICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgIGlmIChwYXJlbnQudm5vZGUuZWwgPT09IG9sZE5vZGUpIHtcbiAgICAgICAgcGFyZW50LnZub2RlLmVsID0gcGFyZW50LnN1YlRyZWUuZWwgPSBuZXdOb2RlO1xuICAgICAgfVxuICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGlzVGVtcGxhdGVOb2RlID0gKG5vZGUpID0+IHtcbiAgICByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PT0gMSAmJiBub2RlLnRhZ05hbWUgPT09IFwiVEVNUExBVEVcIjtcbiAgfTtcbiAgcmV0dXJuIFtoeWRyYXRlLCBoeWRyYXRlTm9kZV07XG59XG5mdW5jdGlvbiBwcm9wSGFzTWlzbWF0Y2goZWwsIGtleSwgY2xpZW50VmFsdWUsIHZub2RlLCBpbnN0YW5jZSkge1xuICBsZXQgbWlzbWF0Y2hUeXBlO1xuICBsZXQgbWlzbWF0Y2hLZXk7XG4gIGxldCBhY3R1YWw7XG4gIGxldCBleHBlY3RlZDtcbiAgaWYgKGtleSA9PT0gXCJjbGFzc1wiKSB7XG4gICAgYWN0dWFsID0gZWwuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIik7XG4gICAgZXhwZWN0ZWQgPSBub3JtYWxpemVDbGFzcyhjbGllbnRWYWx1ZSk7XG4gICAgaWYgKCFpc1NldEVxdWFsKHRvQ2xhc3NTZXQoYWN0dWFsIHx8IFwiXCIpLCB0b0NsYXNzU2V0KGV4cGVjdGVkKSkpIHtcbiAgICAgIG1pc21hdGNoVHlwZSA9IDIgLyogQ0xBU1MgKi87XG4gICAgICBtaXNtYXRjaEtleSA9IGBjbGFzc2A7XG4gICAgfVxuICB9IGVsc2UgaWYgKGtleSA9PT0gXCJzdHlsZVwiKSB7XG4gICAgYWN0dWFsID0gZWwuZ2V0QXR0cmlidXRlKFwic3R5bGVcIikgfHwgXCJcIjtcbiAgICBleHBlY3RlZCA9IGlzU3RyaW5nKGNsaWVudFZhbHVlKSA/IGNsaWVudFZhbHVlIDogc3RyaW5naWZ5U3R5bGUobm9ybWFsaXplU3R5bGUoY2xpZW50VmFsdWUpKTtcbiAgICBjb25zdCBhY3R1YWxNYXAgPSB0b1N0eWxlTWFwKGFjdHVhbCk7XG4gICAgY29uc3QgZXhwZWN0ZWRNYXAgPSB0b1N0eWxlTWFwKGV4cGVjdGVkKTtcbiAgICBpZiAodm5vZGUuZGlycykge1xuICAgICAgZm9yIChjb25zdCB7IGRpciwgdmFsdWUgfSBvZiB2bm9kZS5kaXJzKSB7XG4gICAgICAgIGlmIChkaXIubmFtZSA9PT0gXCJzaG93XCIgJiYgIXZhbHVlKSB7XG4gICAgICAgICAgZXhwZWN0ZWRNYXAuc2V0KFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGluc3RhbmNlKSB7XG4gICAgICByZXNvbHZlQ3NzVmFycyhpbnN0YW5jZSwgdm5vZGUsIGV4cGVjdGVkTWFwKTtcbiAgICB9XG4gICAgaWYgKCFpc01hcEVxdWFsKGFjdHVhbE1hcCwgZXhwZWN0ZWRNYXApKSB7XG4gICAgICBtaXNtYXRjaFR5cGUgPSAzIC8qIFNUWUxFICovO1xuICAgICAgbWlzbWF0Y2hLZXkgPSBcInN0eWxlXCI7XG4gICAgfVxuICB9IGVsc2UgaWYgKGVsIGluc3RhbmNlb2YgU1ZHRWxlbWVudCAmJiBpc0tub3duU3ZnQXR0cihrZXkpIHx8IGVsIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgJiYgKGlzQm9vbGVhbkF0dHIoa2V5KSB8fCBpc0tub3duSHRtbEF0dHIoa2V5KSkpIHtcbiAgICBpZiAoaXNCb29sZWFuQXR0cihrZXkpKSB7XG4gICAgICBhY3R1YWwgPSBlbC5oYXNBdHRyaWJ1dGUoa2V5KTtcbiAgICAgIGV4cGVjdGVkID0gaW5jbHVkZUJvb2xlYW5BdHRyKGNsaWVudFZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKGNsaWVudFZhbHVlID09IG51bGwpIHtcbiAgICAgIGFjdHVhbCA9IGVsLmhhc0F0dHJpYnV0ZShrZXkpO1xuICAgICAgZXhwZWN0ZWQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGVsLmhhc0F0dHJpYnV0ZShrZXkpKSB7XG4gICAgICAgIGFjdHVhbCA9IGVsLmdldEF0dHJpYnV0ZShrZXkpO1xuICAgICAgfSBlbHNlIGlmIChrZXkgPT09IFwidmFsdWVcIiAmJiBlbC50YWdOYW1lID09PSBcIlRFWFRBUkVBXCIpIHtcbiAgICAgICAgYWN0dWFsID0gZWwudmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY3R1YWwgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGV4cGVjdGVkID0gaXNSZW5kZXJhYmxlQXR0clZhbHVlKGNsaWVudFZhbHVlKSA/IFN0cmluZyhjbGllbnRWYWx1ZSkgOiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGFjdHVhbCAhPT0gZXhwZWN0ZWQpIHtcbiAgICAgIG1pc21hdGNoVHlwZSA9IDQgLyogQVRUUklCVVRFICovO1xuICAgICAgbWlzbWF0Y2hLZXkgPSBrZXk7XG4gICAgfVxuICB9XG4gIGlmIChtaXNtYXRjaFR5cGUgIT0gbnVsbCAmJiAhaXNNaXNtYXRjaEFsbG93ZWQoZWwsIG1pc21hdGNoVHlwZSkpIHtcbiAgICBjb25zdCBmb3JtYXQgPSAodikgPT4gdiA9PT0gZmFsc2UgPyBgKG5vdCByZW5kZXJlZClgIDogYCR7bWlzbWF0Y2hLZXl9PVwiJHt2fVwiYDtcbiAgICBjb25zdCBwcmVTZWdtZW50ID0gYEh5ZHJhdGlvbiAke01pc21hdGNoVHlwZVN0cmluZ1ttaXNtYXRjaFR5cGVdfSBtaXNtYXRjaCBvbmA7XG4gICAgY29uc3QgcG9zdFNlZ21lbnQgPSBgXG4gIC0gcmVuZGVyZWQgb24gc2VydmVyOiAke2Zvcm1hdChhY3R1YWwpfVxuICAtIGV4cGVjdGVkIG9uIGNsaWVudDogJHtmb3JtYXQoZXhwZWN0ZWQpfVxuICBOb3RlOiB0aGlzIG1pc21hdGNoIGlzIGNoZWNrLW9ubHkuIFRoZSBET00gd2lsbCBub3QgYmUgcmVjdGlmaWVkIGluIHByb2R1Y3Rpb24gZHVlIHRvIHBlcmZvcm1hbmNlIG92ZXJoZWFkLlxuICBZb3Ugc2hvdWxkIGZpeCB0aGUgc291cmNlIG9mIHRoZSBtaXNtYXRjaC5gO1xuICAgIHtcbiAgICAgIHdhcm4kMShwcmVTZWdtZW50LCBlbCwgcG9zdFNlZ21lbnQpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiB0b0NsYXNzU2V0KHN0cikge1xuICByZXR1cm4gbmV3IFNldChzdHIudHJpbSgpLnNwbGl0KC9cXHMrLykpO1xufVxuZnVuY3Rpb24gaXNTZXRFcXVhbChhLCBiKSB7XG4gIGlmIChhLnNpemUgIT09IGIuc2l6ZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBmb3IgKGNvbnN0IHMgb2YgYSkge1xuICAgIGlmICghYi5oYXMocykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiB0b1N0eWxlTWFwKHN0cikge1xuICBjb25zdCBzdHlsZU1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGZvciAoY29uc3QgaXRlbSBvZiBzdHIuc3BsaXQoXCI7XCIpKSB7XG4gICAgbGV0IFtrZXksIHZhbHVlXSA9IGl0ZW0uc3BsaXQoXCI6XCIpO1xuICAgIGtleSA9IGtleS50cmltKCk7XG4gICAgdmFsdWUgPSB2YWx1ZSAmJiB2YWx1ZS50cmltKCk7XG4gICAgaWYgKGtleSAmJiB2YWx1ZSkge1xuICAgICAgc3R5bGVNYXAuc2V0KGtleSwgdmFsdWUpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc3R5bGVNYXA7XG59XG5mdW5jdGlvbiBpc01hcEVxdWFsKGEsIGIpIHtcbiAgaWYgKGEuc2l6ZSAhPT0gYi5zaXplKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGEpIHtcbiAgICBpZiAodmFsdWUgIT09IGIuZ2V0KGtleSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiByZXNvbHZlQ3NzVmFycyhpbnN0YW5jZSwgdm5vZGUsIGV4cGVjdGVkTWFwKSB7XG4gIGNvbnN0IHJvb3QgPSBpbnN0YW5jZS5zdWJUcmVlO1xuICBpZiAoaW5zdGFuY2UuZ2V0Q3NzVmFycyAmJiAodm5vZGUgPT09IHJvb3QgfHwgcm9vdCAmJiByb290LnR5cGUgPT09IEZyYWdtZW50ICYmIHJvb3QuY2hpbGRyZW4uaW5jbHVkZXModm5vZGUpKSkge1xuICAgIGNvbnN0IGNzc1ZhcnMgPSBpbnN0YW5jZS5nZXRDc3NWYXJzKCk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gY3NzVmFycykge1xuICAgICAgZXhwZWN0ZWRNYXAuc2V0KFxuICAgICAgICBgLS0ke2dldEVzY2FwZWRDc3NWYXJOYW1lKGtleSwgZmFsc2UpfWAsXG4gICAgICAgIFN0cmluZyhjc3NWYXJzW2tleV0pXG4gICAgICApO1xuICAgIH1cbiAgfVxuICBpZiAodm5vZGUgPT09IHJvb3QgJiYgaW5zdGFuY2UucGFyZW50KSB7XG4gICAgcmVzb2x2ZUNzc1ZhcnMoaW5zdGFuY2UucGFyZW50LCBpbnN0YW5jZS52bm9kZSwgZXhwZWN0ZWRNYXApO1xuICB9XG59XG5jb25zdCBhbGxvd01pc21hdGNoQXR0ciA9IFwiZGF0YS1hbGxvdy1taXNtYXRjaFwiO1xuY29uc3QgTWlzbWF0Y2hUeXBlU3RyaW5nID0ge1xuICBbMCAvKiBURVhUICovXTogXCJ0ZXh0XCIsXG4gIFsxIC8qIENISUxEUkVOICovXTogXCJjaGlsZHJlblwiLFxuICBbMiAvKiBDTEFTUyAqL106IFwiY2xhc3NcIixcbiAgWzMgLyogU1RZTEUgKi9dOiBcInN0eWxlXCIsXG4gIFs0IC8qIEFUVFJJQlVURSAqL106IFwiYXR0cmlidXRlXCJcbn07XG5mdW5jdGlvbiBpc01pc21hdGNoQWxsb3dlZChlbCwgYWxsb3dlZFR5cGUpIHtcbiAgaWYgKGFsbG93ZWRUeXBlID09PSAwIC8qIFRFWFQgKi8gfHwgYWxsb3dlZFR5cGUgPT09IDEgLyogQ0hJTERSRU4gKi8pIHtcbiAgICB3aGlsZSAoZWwgJiYgIWVsLmhhc0F0dHJpYnV0ZShhbGxvd01pc21hdGNoQXR0cikpIHtcbiAgICAgIGVsID0gZWwucGFyZW50RWxlbWVudDtcbiAgICB9XG4gIH1cbiAgY29uc3QgYWxsb3dlZEF0dHIgPSBlbCAmJiBlbC5nZXRBdHRyaWJ1dGUoYWxsb3dNaXNtYXRjaEF0dHIpO1xuICBpZiAoYWxsb3dlZEF0dHIgPT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIGlmIChhbGxvd2VkQXR0ciA9PT0gXCJcIikge1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGxpc3QgPSBhbGxvd2VkQXR0ci5zcGxpdChcIixcIik7XG4gICAgaWYgKGFsbG93ZWRUeXBlID09PSAwIC8qIFRFWFQgKi8gJiYgbGlzdC5pbmNsdWRlcyhcImNoaWxkcmVuXCIpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGFsbG93ZWRBdHRyLnNwbGl0KFwiLFwiKS5pbmNsdWRlcyhNaXNtYXRjaFR5cGVTdHJpbmdbYWxsb3dlZFR5cGVdKTtcbiAgfVxufVxuXG5jb25zdCByZXF1ZXN0SWRsZUNhbGxiYWNrID0gZ2V0R2xvYmFsVGhpcygpLnJlcXVlc3RJZGxlQ2FsbGJhY2sgfHwgKChjYikgPT4gc2V0VGltZW91dChjYiwgMSkpO1xuY29uc3QgY2FuY2VsSWRsZUNhbGxiYWNrID0gZ2V0R2xvYmFsVGhpcygpLmNhbmNlbElkbGVDYWxsYmFjayB8fCAoKGlkKSA9PiBjbGVhclRpbWVvdXQoaWQpKTtcbmNvbnN0IGh5ZHJhdGVPbklkbGUgPSAodGltZW91dCA9IDFlNCkgPT4gKGh5ZHJhdGUpID0+IHtcbiAgY29uc3QgaWQgPSByZXF1ZXN0SWRsZUNhbGxiYWNrKGh5ZHJhdGUsIHsgdGltZW91dCB9KTtcbiAgcmV0dXJuICgpID0+IGNhbmNlbElkbGVDYWxsYmFjayhpZCk7XG59O1xuZnVuY3Rpb24gZWxlbWVudElzVmlzaWJsZUluVmlld3BvcnQoZWwpIHtcbiAgY29uc3QgeyB0b3AsIGxlZnQsIGJvdHRvbSwgcmlnaHQgfSA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICBjb25zdCB7IGlubmVySGVpZ2h0LCBpbm5lcldpZHRoIH0gPSB3aW5kb3c7XG4gIHJldHVybiAodG9wID4gMCAmJiB0b3AgPCBpbm5lckhlaWdodCB8fCBib3R0b20gPiAwICYmIGJvdHRvbSA8IGlubmVySGVpZ2h0KSAmJiAobGVmdCA+IDAgJiYgbGVmdCA8IGlubmVyV2lkdGggfHwgcmlnaHQgPiAwICYmIHJpZ2h0IDwgaW5uZXJXaWR0aCk7XG59XG5jb25zdCBoeWRyYXRlT25WaXNpYmxlID0gKG9wdHMpID0+IChoeWRyYXRlLCBmb3JFYWNoKSA9PiB7XG4gIGNvbnN0IG9iID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChlbnRyaWVzKSA9PiB7XG4gICAgZm9yIChjb25zdCBlIG9mIGVudHJpZXMpIHtcbiAgICAgIGlmICghZS5pc0ludGVyc2VjdGluZykgY29udGludWU7XG4gICAgICBvYi5kaXNjb25uZWN0KCk7XG4gICAgICBoeWRyYXRlKCk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH0sIG9wdHMpO1xuICBmb3JFYWNoKChlbCkgPT4ge1xuICAgIGlmICghKGVsIGluc3RhbmNlb2YgRWxlbWVudCkpIHJldHVybjtcbiAgICBpZiAoZWxlbWVudElzVmlzaWJsZUluVmlld3BvcnQoZWwpKSB7XG4gICAgICBoeWRyYXRlKCk7XG4gICAgICBvYi5kaXNjb25uZWN0KCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIG9iLm9ic2VydmUoZWwpO1xuICB9KTtcbiAgcmV0dXJuICgpID0+IG9iLmRpc2Nvbm5lY3QoKTtcbn07XG5jb25zdCBoeWRyYXRlT25NZWRpYVF1ZXJ5ID0gKHF1ZXJ5KSA9PiAoaHlkcmF0ZSkgPT4ge1xuICBpZiAocXVlcnkpIHtcbiAgICBjb25zdCBtcWwgPSBtYXRjaE1lZGlhKHF1ZXJ5KTtcbiAgICBpZiAobXFsLm1hdGNoZXMpIHtcbiAgICAgIGh5ZHJhdGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbXFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgaHlkcmF0ZSwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgcmV0dXJuICgpID0+IG1xbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGh5ZHJhdGUpO1xuICAgIH1cbiAgfVxufTtcbmNvbnN0IGh5ZHJhdGVPbkludGVyYWN0aW9uID0gKGludGVyYWN0aW9ucyA9IFtdKSA9PiAoaHlkcmF0ZSwgZm9yRWFjaCkgPT4ge1xuICBpZiAoaXNTdHJpbmcoaW50ZXJhY3Rpb25zKSkgaW50ZXJhY3Rpb25zID0gW2ludGVyYWN0aW9uc107XG4gIGxldCBoYXNIeWRyYXRlZCA9IGZhbHNlO1xuICBjb25zdCBkb0h5ZHJhdGUgPSAoZSkgPT4ge1xuICAgIGlmICghaGFzSHlkcmF0ZWQpIHtcbiAgICAgIGhhc0h5ZHJhdGVkID0gdHJ1ZTtcbiAgICAgIHRlYXJkb3duKCk7XG4gICAgICBoeWRyYXRlKCk7XG4gICAgICBlLnRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBlLmNvbnN0cnVjdG9yKGUudHlwZSwgZSkpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgdGVhcmRvd24gPSAoKSA9PiB7XG4gICAgZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgIGZvciAoY29uc3QgaSBvZiBpbnRlcmFjdGlvbnMpIHtcbiAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihpLCBkb0h5ZHJhdGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuICBmb3JFYWNoKChlbCkgPT4ge1xuICAgIGZvciAoY29uc3QgaSBvZiBpbnRlcmFjdGlvbnMpIHtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoaSwgZG9IeWRyYXRlLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHRlYXJkb3duO1xufTtcbmZ1bmN0aW9uIGZvckVhY2hFbGVtZW50KG5vZGUsIGNiKSB7XG4gIGlmIChpc0NvbW1lbnQobm9kZSkgJiYgbm9kZS5kYXRhID09PSBcIltcIikge1xuICAgIGxldCBkZXB0aCA9IDE7XG4gICAgbGV0IG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgIHdoaWxlIChuZXh0KSB7XG4gICAgICBpZiAobmV4dC5ub2RlVHlwZSA9PT0gMSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBjYihuZXh0KTtcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpc0NvbW1lbnQobmV4dCkpIHtcbiAgICAgICAgaWYgKG5leHQuZGF0YSA9PT0gXCJdXCIpIHtcbiAgICAgICAgICBpZiAoLS1kZXB0aCA9PT0gMCkgYnJlYWs7XG4gICAgICAgIH0gZWxzZSBpZiAobmV4dC5kYXRhID09PSBcIltcIikge1xuICAgICAgICAgIGRlcHRoKys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG5leHQgPSBuZXh0Lm5leHRTaWJsaW5nO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjYihub2RlKTtcbiAgfVxufVxuXG5jb25zdCBpc0FzeW5jV3JhcHBlciA9IChpKSA9PiAhIWkudHlwZS5fX2FzeW5jTG9hZGVyO1xuLyohICNfX05PX1NJREVfRUZGRUNUU19fICovXG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24gZGVmaW5lQXN5bmNDb21wb25lbnQoc291cmNlKSB7XG4gIGlmIChpc0Z1bmN0aW9uKHNvdXJjZSkpIHtcbiAgICBzb3VyY2UgPSB7IGxvYWRlcjogc291cmNlIH07XG4gIH1cbiAgY29uc3Qge1xuICAgIGxvYWRlcixcbiAgICBsb2FkaW5nQ29tcG9uZW50LFxuICAgIGVycm9yQ29tcG9uZW50LFxuICAgIGRlbGF5ID0gMjAwLFxuICAgIGh5ZHJhdGU6IGh5ZHJhdGVTdHJhdGVneSxcbiAgICB0aW1lb3V0LFxuICAgIC8vIHVuZGVmaW5lZCA9IG5ldmVyIHRpbWVzIG91dFxuICAgIHN1c3BlbnNpYmxlID0gdHJ1ZSxcbiAgICBvbkVycm9yOiB1c2VyT25FcnJvclxuICB9ID0gc291cmNlO1xuICBsZXQgcGVuZGluZ1JlcXVlc3QgPSBudWxsO1xuICBsZXQgcmVzb2x2ZWRDb21wO1xuICBsZXQgcmV0cmllcyA9IDA7XG4gIGNvbnN0IHJldHJ5ID0gKCkgPT4ge1xuICAgIHJldHJpZXMrKztcbiAgICBwZW5kaW5nUmVxdWVzdCA9IG51bGw7XG4gICAgcmV0dXJuIGxvYWQoKTtcbiAgfTtcbiAgY29uc3QgbG9hZCA9ICgpID0+IHtcbiAgICBsZXQgdGhpc1JlcXVlc3Q7XG4gICAgcmV0dXJuIHBlbmRpbmdSZXF1ZXN0IHx8ICh0aGlzUmVxdWVzdCA9IHBlbmRpbmdSZXF1ZXN0ID0gbG9hZGVyKCkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgZXJyID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIgOiBuZXcgRXJyb3IoU3RyaW5nKGVycikpO1xuICAgICAgaWYgKHVzZXJPbkVycm9yKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgY29uc3QgdXNlclJldHJ5ID0gKCkgPT4gcmVzb2x2ZShyZXRyeSgpKTtcbiAgICAgICAgICBjb25zdCB1c2VyRmFpbCA9ICgpID0+IHJlamVjdChlcnIpO1xuICAgICAgICAgIHVzZXJPbkVycm9yKGVyciwgdXNlclJldHJ5LCB1c2VyRmFpbCwgcmV0cmllcyArIDEpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9KS50aGVuKChjb21wKSA9PiB7XG4gICAgICBpZiAodGhpc1JlcXVlc3QgIT09IHBlbmRpbmdSZXF1ZXN0ICYmIHBlbmRpbmdSZXF1ZXN0KSB7XG4gICAgICAgIHJldHVybiBwZW5kaW5nUmVxdWVzdDtcbiAgICAgIH1cbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFjb21wKSB7XG4gICAgICAgIHdhcm4kMShcbiAgICAgICAgICBgQXN5bmMgY29tcG9uZW50IGxvYWRlciByZXNvbHZlZCB0byB1bmRlZmluZWQuIElmIHlvdSBhcmUgdXNpbmcgcmV0cnkoKSwgbWFrZSBzdXJlIHRvIHJldHVybiBpdHMgcmV0dXJuIHZhbHVlLmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChjb21wICYmIChjb21wLl9fZXNNb2R1bGUgfHwgY29tcFtTeW1ib2wudG9TdHJpbmdUYWddID09PSBcIk1vZHVsZVwiKSkge1xuICAgICAgICBjb21wID0gY29tcC5kZWZhdWx0O1xuICAgICAgfVxuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgY29tcCAmJiAhaXNPYmplY3QoY29tcCkgJiYgIWlzRnVuY3Rpb24oY29tcCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFzeW5jIGNvbXBvbmVudCBsb2FkIHJlc3VsdDogJHtjb21wfWApO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZWRDb21wID0gY29tcDtcbiAgICAgIHJldHVybiBjb21wO1xuICAgIH0pKTtcbiAgfTtcbiAgcmV0dXJuIGRlZmluZUNvbXBvbmVudCh7XG4gICAgbmFtZTogXCJBc3luY0NvbXBvbmVudFdyYXBwZXJcIixcbiAgICBfX2FzeW5jTG9hZGVyOiBsb2FkLFxuICAgIF9fYXN5bmNIeWRyYXRlKGVsLCBpbnN0YW5jZSwgaHlkcmF0ZSkge1xuICAgICAgY29uc3QgZG9IeWRyYXRlID0gaHlkcmF0ZVN0cmF0ZWd5ID8gKCkgPT4ge1xuICAgICAgICBjb25zdCB0ZWFyZG93biA9IGh5ZHJhdGVTdHJhdGVneShcbiAgICAgICAgICBoeWRyYXRlLFxuICAgICAgICAgIChjYikgPT4gZm9yRWFjaEVsZW1lbnQoZWwsIGNiKVxuICAgICAgICApO1xuICAgICAgICBpZiAodGVhcmRvd24pIHtcbiAgICAgICAgICAoaW5zdGFuY2UuYnVtIHx8IChpbnN0YW5jZS5idW0gPSBbXSkpLnB1c2godGVhcmRvd24pO1xuICAgICAgICB9XG4gICAgICB9IDogaHlkcmF0ZTtcbiAgICAgIGlmIChyZXNvbHZlZENvbXApIHtcbiAgICAgICAgZG9IeWRyYXRlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2FkKCkudGhlbigoKSA9PiAhaW5zdGFuY2UuaXNVbm1vdW50ZWQgJiYgZG9IeWRyYXRlKCkpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0IF9fYXN5bmNSZXNvbHZlZCgpIHtcbiAgICAgIHJldHVybiByZXNvbHZlZENvbXA7XG4gICAgfSxcbiAgICBzZXR1cCgpIHtcbiAgICAgIGNvbnN0IGluc3RhbmNlID0gY3VycmVudEluc3RhbmNlO1xuICAgICAgbWFya0FzeW5jQm91bmRhcnkoaW5zdGFuY2UpO1xuICAgICAgaWYgKHJlc29sdmVkQ29tcCkge1xuICAgICAgICByZXR1cm4gKCkgPT4gY3JlYXRlSW5uZXJDb21wKHJlc29sdmVkQ29tcCwgaW5zdGFuY2UpO1xuICAgICAgfVxuICAgICAgY29uc3Qgb25FcnJvciA9IChlcnIpID0+IHtcbiAgICAgICAgcGVuZGluZ1JlcXVlc3QgPSBudWxsO1xuICAgICAgICBoYW5kbGVFcnJvcihcbiAgICAgICAgICBlcnIsXG4gICAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgICAgMTMsXG4gICAgICAgICAgIWVycm9yQ29tcG9uZW50XG4gICAgICAgICk7XG4gICAgICB9O1xuICAgICAgaWYgKHN1c3BlbnNpYmxlICYmIGluc3RhbmNlLnN1c3BlbnNlIHx8IGlzSW5TU1JDb21wb25lbnRTZXR1cCkge1xuICAgICAgICByZXR1cm4gbG9hZCgpLnRoZW4oKGNvbXApID0+IHtcbiAgICAgICAgICByZXR1cm4gKCkgPT4gY3JlYXRlSW5uZXJDb21wKGNvbXAsIGluc3RhbmNlKTtcbiAgICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIG9uRXJyb3IoZXJyKTtcbiAgICAgICAgICByZXR1cm4gKCkgPT4gZXJyb3JDb21wb25lbnQgPyBjcmVhdGVWTm9kZShlcnJvckNvbXBvbmVudCwge1xuICAgICAgICAgICAgZXJyb3I6IGVyclxuICAgICAgICAgIH0pIDogbnVsbDtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBsb2FkZWQgPSByZWYoZmFsc2UpO1xuICAgICAgY29uc3QgZXJyb3IgPSByZWYoKTtcbiAgICAgIGNvbnN0IGRlbGF5ZWQgPSByZWYoISFkZWxheSk7XG4gICAgICBpZiAoZGVsYXkpIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgZGVsYXllZC52YWx1ZSA9IGZhbHNlO1xuICAgICAgICB9LCBkZWxheSk7XG4gICAgICB9XG4gICAgICBpZiAodGltZW91dCAhPSBudWxsKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGlmICghbG9hZGVkLnZhbHVlICYmICFlcnJvci52YWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKFxuICAgICAgICAgICAgICBgQXN5bmMgY29tcG9uZW50IHRpbWVkIG91dCBhZnRlciAke3RpbWVvdXR9bXMuYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyKTtcbiAgICAgICAgICAgIGVycm9yLnZhbHVlID0gZXJyO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICB9XG4gICAgICBsb2FkKCkudGhlbigoKSA9PiB7XG4gICAgICAgIGxvYWRlZC52YWx1ZSA9IHRydWU7XG4gICAgICAgIGlmIChpbnN0YW5jZS5wYXJlbnQgJiYgaXNLZWVwQWxpdmUoaW5zdGFuY2UucGFyZW50LnZub2RlKSkge1xuICAgICAgICAgIGluc3RhbmNlLnBhcmVudC51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBvbkVycm9yKGVycik7XG4gICAgICAgIGVycm9yLnZhbHVlID0gZXJyO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBpZiAobG9hZGVkLnZhbHVlICYmIHJlc29sdmVkQ29tcCkge1xuICAgICAgICAgIHJldHVybiBjcmVhdGVJbm5lckNvbXAocmVzb2x2ZWRDb21wLCBpbnN0YW5jZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IudmFsdWUgJiYgZXJyb3JDb21wb25lbnQpIHtcbiAgICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUoZXJyb3JDb21wb25lbnQsIHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJvci52YWx1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKGxvYWRpbmdDb21wb25lbnQgJiYgIWRlbGF5ZWQudmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUobG9hZGluZ0NvbXBvbmVudCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUlubmVyQ29tcChjb21wLCBwYXJlbnQpIHtcbiAgY29uc3QgeyByZWY6IHJlZjIsIHByb3BzLCBjaGlsZHJlbiwgY2UgfSA9IHBhcmVudC52bm9kZTtcbiAgY29uc3Qgdm5vZGUgPSBjcmVhdGVWTm9kZShjb21wLCBwcm9wcywgY2hpbGRyZW4pO1xuICB2bm9kZS5yZWYgPSByZWYyO1xuICB2bm9kZS5jZSA9IGNlO1xuICBkZWxldGUgcGFyZW50LnZub2RlLmNlO1xuICByZXR1cm4gdm5vZGU7XG59XG5cbmNvbnN0IGlzS2VlcEFsaXZlID0gKHZub2RlKSA9PiB2bm9kZS50eXBlLl9faXNLZWVwQWxpdmU7XG5jb25zdCBLZWVwQWxpdmVJbXBsID0ge1xuICBuYW1lOiBgS2VlcEFsaXZlYCxcbiAgLy8gTWFya2VyIGZvciBzcGVjaWFsIGhhbmRsaW5nIGluc2lkZSB0aGUgcmVuZGVyZXIuIFdlIGFyZSBub3QgdXNpbmcgYSA9PT1cbiAgLy8gY2hlY2sgZGlyZWN0bHkgb24gS2VlcEFsaXZlIGluIHRoZSByZW5kZXJlciwgYmVjYXVzZSBpbXBvcnRpbmcgaXQgZGlyZWN0bHlcbiAgLy8gd291bGQgcHJldmVudCBpdCBmcm9tIGJlaW5nIHRyZWUtc2hha2VuLlxuICBfX2lzS2VlcEFsaXZlOiB0cnVlLFxuICBwcm9wczoge1xuICAgIGluY2x1ZGU6IFtTdHJpbmcsIFJlZ0V4cCwgQXJyYXldLFxuICAgIGV4Y2x1ZGU6IFtTdHJpbmcsIFJlZ0V4cCwgQXJyYXldLFxuICAgIG1heDogW1N0cmluZywgTnVtYmVyXVxuICB9LFxuICBzZXR1cChwcm9wcywgeyBzbG90cyB9KSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICBjb25zdCBzaGFyZWRDb250ZXh0ID0gaW5zdGFuY2UuY3R4O1xuICAgIGlmICghc2hhcmVkQ29udGV4dC5yZW5kZXJlcikge1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBzbG90cy5kZWZhdWx0ICYmIHNsb3RzLmRlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuIGNoaWxkcmVuICYmIGNoaWxkcmVuLmxlbmd0aCA9PT0gMSA/IGNoaWxkcmVuWzBdIDogY2hpbGRyZW47XG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBjYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgY29uc3Qga2V5cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgbGV0IGN1cnJlbnQgPSBudWxsO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgaW5zdGFuY2UuX192X2NhY2hlID0gY2FjaGU7XG4gICAgfVxuICAgIGNvbnN0IHBhcmVudFN1c3BlbnNlID0gaW5zdGFuY2Uuc3VzcGVuc2U7XG4gICAgY29uc3Qge1xuICAgICAgcmVuZGVyZXI6IHtcbiAgICAgICAgcDogcGF0Y2gsXG4gICAgICAgIG06IG1vdmUsXG4gICAgICAgIHVtOiBfdW5tb3VudCxcbiAgICAgICAgbzogeyBjcmVhdGVFbGVtZW50IH1cbiAgICAgIH1cbiAgICB9ID0gc2hhcmVkQ29udGV4dDtcbiAgICBjb25zdCBzdG9yYWdlQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBzaGFyZWRDb250ZXh0LmFjdGl2YXRlID0gKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgbmFtZXNwYWNlLCBvcHRpbWl6ZWQpID0+IHtcbiAgICAgIGNvbnN0IGluc3RhbmNlMiA9IHZub2RlLmNvbXBvbmVudDtcbiAgICAgIG1vdmUodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCAwLCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICBwYXRjaChcbiAgICAgICAgaW5zdGFuY2UyLnZub2RlLFxuICAgICAgICB2bm9kZSxcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBhbmNob3IsXG4gICAgICAgIGluc3RhbmNlMixcbiAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgdm5vZGUuc2xvdFNjb3BlSWRzLFxuICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICk7XG4gICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpbnN0YW5jZTIuaXNEZWFjdGl2YXRlZCA9IGZhbHNlO1xuICAgICAgICBpZiAoaW5zdGFuY2UyLmEpIHtcbiAgICAgICAgICBpbnZva2VBcnJheUZucyhpbnN0YW5jZTIuYSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgdm5vZGVIb29rID0gdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMub25Wbm9kZU1vdW50ZWQ7XG4gICAgICAgIGlmICh2bm9kZUhvb2spIHtcbiAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBpbnN0YW5jZTIucGFyZW50LCB2bm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICBkZXZ0b29sc0NvbXBvbmVudEFkZGVkKGluc3RhbmNlMik7XG4gICAgICB9XG4gICAgfTtcbiAgICBzaGFyZWRDb250ZXh0LmRlYWN0aXZhdGUgPSAodm5vZGUpID0+IHtcbiAgICAgIGNvbnN0IGluc3RhbmNlMiA9IHZub2RlLmNvbXBvbmVudDtcbiAgICAgIGludmFsaWRhdGVNb3VudChpbnN0YW5jZTIubSk7XG4gICAgICBpbnZhbGlkYXRlTW91bnQoaW5zdGFuY2UyLmEpO1xuICAgICAgbW92ZSh2bm9kZSwgc3RvcmFnZUNvbnRhaW5lciwgbnVsbCwgMSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKGluc3RhbmNlMi5kYSkge1xuICAgICAgICAgIGludm9rZUFycmF5Rm5zKGluc3RhbmNlMi5kYSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgdm5vZGVIb29rID0gdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMub25Wbm9kZVVubW91bnRlZDtcbiAgICAgICAgaWYgKHZub2RlSG9vaykge1xuICAgICAgICAgIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIGluc3RhbmNlMi5wYXJlbnQsIHZub2RlKTtcbiAgICAgICAgfVxuICAgICAgICBpbnN0YW5jZTIuaXNEZWFjdGl2YXRlZCA9IHRydWU7XG4gICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgICAgZGV2dG9vbHNDb21wb25lbnRBZGRlZChpbnN0YW5jZTIpO1xuICAgICAgfVxuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgdHJ1ZSkge1xuICAgICAgICBpbnN0YW5jZTIuX19rZWVwQWxpdmVTdG9yYWdlQ29udGFpbmVyID0gc3RvcmFnZUNvbnRhaW5lcjtcbiAgICAgIH1cbiAgICB9O1xuICAgIGZ1bmN0aW9uIHVubW91bnQodm5vZGUpIHtcbiAgICAgIHJlc2V0U2hhcGVGbGFnKHZub2RlKTtcbiAgICAgIF91bm1vdW50KHZub2RlLCBpbnN0YW5jZSwgcGFyZW50U3VzcGVuc2UsIHRydWUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwcnVuZUNhY2hlKGZpbHRlcikge1xuICAgICAgY2FjaGUuZm9yRWFjaCgodm5vZGUsIGtleSkgPT4ge1xuICAgICAgICBjb25zdCBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZSh2bm9kZS50eXBlKTtcbiAgICAgICAgaWYgKG5hbWUgJiYgIWZpbHRlcihuYW1lKSkge1xuICAgICAgICAgIHBydW5lQ2FjaGVFbnRyeShrZXkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcHJ1bmVDYWNoZUVudHJ5KGtleSkge1xuICAgICAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KGtleSk7XG4gICAgICBpZiAoY2FjaGVkICYmICghY3VycmVudCB8fCAhaXNTYW1lVk5vZGVUeXBlKGNhY2hlZCwgY3VycmVudCkpKSB7XG4gICAgICAgIHVubW91bnQoY2FjaGVkKTtcbiAgICAgIH0gZWxzZSBpZiAoY3VycmVudCkge1xuICAgICAgICByZXNldFNoYXBlRmxhZyhjdXJyZW50KTtcbiAgICAgIH1cbiAgICAgIGNhY2hlLmRlbGV0ZShrZXkpO1xuICAgICAga2V5cy5kZWxldGUoa2V5KTtcbiAgICB9XG4gICAgd2F0Y2goXG4gICAgICAoKSA9PiBbcHJvcHMuaW5jbHVkZSwgcHJvcHMuZXhjbHVkZV0sXG4gICAgICAoW2luY2x1ZGUsIGV4Y2x1ZGVdKSA9PiB7XG4gICAgICAgIGluY2x1ZGUgJiYgcHJ1bmVDYWNoZSgobmFtZSkgPT4gbWF0Y2hlcyhpbmNsdWRlLCBuYW1lKSk7XG4gICAgICAgIGV4Y2x1ZGUgJiYgcHJ1bmVDYWNoZSgobmFtZSkgPT4gIW1hdGNoZXMoZXhjbHVkZSwgbmFtZSkpO1xuICAgICAgfSxcbiAgICAgIC8vIHBydW5lIHBvc3QtcmVuZGVyIGFmdGVyIGBjdXJyZW50YCBoYXMgYmVlbiB1cGRhdGVkXG4gICAgICB7IGZsdXNoOiBcInBvc3RcIiwgZGVlcDogdHJ1ZSB9XG4gICAgKTtcbiAgICBsZXQgcGVuZGluZ0NhY2hlS2V5ID0gbnVsbDtcbiAgICBjb25zdCBjYWNoZVN1YnRyZWUgPSAoKSA9PiB7XG4gICAgICBpZiAocGVuZGluZ0NhY2hlS2V5ICE9IG51bGwpIHtcbiAgICAgICAgaWYgKGlzU3VzcGVuc2UoaW5zdGFuY2Uuc3ViVHJlZS50eXBlKSkge1xuICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgICBjYWNoZS5zZXQocGVuZGluZ0NhY2hlS2V5LCBnZXRJbm5lckNoaWxkKGluc3RhbmNlLnN1YlRyZWUpKTtcbiAgICAgICAgICB9LCBpbnN0YW5jZS5zdWJUcmVlLnN1c3BlbnNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYWNoZS5zZXQocGVuZGluZ0NhY2hlS2V5LCBnZXRJbm5lckNoaWxkKGluc3RhbmNlLnN1YlRyZWUpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgb25Nb3VudGVkKGNhY2hlU3VidHJlZSk7XG4gICAgb25VcGRhdGVkKGNhY2hlU3VidHJlZSk7XG4gICAgb25CZWZvcmVVbm1vdW50KCgpID0+IHtcbiAgICAgIGNhY2hlLmZvckVhY2goKGNhY2hlZCkgPT4ge1xuICAgICAgICBjb25zdCB7IHN1YlRyZWUsIHN1c3BlbnNlIH0gPSBpbnN0YW5jZTtcbiAgICAgICAgY29uc3Qgdm5vZGUgPSBnZXRJbm5lckNoaWxkKHN1YlRyZWUpO1xuICAgICAgICBpZiAoY2FjaGVkLnR5cGUgPT09IHZub2RlLnR5cGUgJiYgY2FjaGVkLmtleSA9PT0gdm5vZGUua2V5KSB7XG4gICAgICAgICAgcmVzZXRTaGFwZUZsYWcodm5vZGUpO1xuICAgICAgICAgIGNvbnN0IGRhID0gdm5vZGUuY29tcG9uZW50LmRhO1xuICAgICAgICAgIGRhICYmIHF1ZXVlUG9zdFJlbmRlckVmZmVjdChkYSwgc3VzcGVuc2UpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB1bm1vdW50KGNhY2hlZCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcGVuZGluZ0NhY2hlS2V5ID0gbnVsbDtcbiAgICAgIGlmICghc2xvdHMuZGVmYXVsdCkge1xuICAgICAgICByZXR1cm4gY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCBjaGlsZHJlbiA9IHNsb3RzLmRlZmF1bHQoKTtcbiAgICAgIGNvbnN0IHJhd1ZOb2RlID0gY2hpbGRyZW5bMF07XG4gICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHdhcm4kMShgS2VlcEFsaXZlIHNob3VsZCBjb250YWluIGV4YWN0bHkgb25lIGNvbXBvbmVudCBjaGlsZC5gKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50ID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIGNoaWxkcmVuO1xuICAgICAgfSBlbHNlIGlmICghaXNWTm9kZShyYXdWTm9kZSkgfHwgIShyYXdWTm9kZS5zaGFwZUZsYWcgJiA0KSAmJiAhKHJhd1ZOb2RlLnNoYXBlRmxhZyAmIDEyOCkpIHtcbiAgICAgICAgY3VycmVudCA9IG51bGw7XG4gICAgICAgIHJldHVybiByYXdWTm9kZTtcbiAgICAgIH1cbiAgICAgIGxldCB2bm9kZSA9IGdldElubmVyQ2hpbGQocmF3Vk5vZGUpO1xuICAgICAgaWYgKHZub2RlLnR5cGUgPT09IENvbW1lbnQpIHtcbiAgICAgICAgY3VycmVudCA9IG51bGw7XG4gICAgICAgIHJldHVybiB2bm9kZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNvbXAgPSB2bm9kZS50eXBlO1xuICAgICAgY29uc3QgbmFtZSA9IGdldENvbXBvbmVudE5hbWUoXG4gICAgICAgIGlzQXN5bmNXcmFwcGVyKHZub2RlKSA/IHZub2RlLnR5cGUuX19hc3luY1Jlc29sdmVkIHx8IHt9IDogY29tcFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHsgaW5jbHVkZSwgZXhjbHVkZSwgbWF4IH0gPSBwcm9wcztcbiAgICAgIGlmIChpbmNsdWRlICYmICghbmFtZSB8fCAhbWF0Y2hlcyhpbmNsdWRlLCBuYW1lKSkgfHwgZXhjbHVkZSAmJiBuYW1lICYmIG1hdGNoZXMoZXhjbHVkZSwgbmFtZSkpIHtcbiAgICAgICAgdm5vZGUuc2hhcGVGbGFnICY9IC0yNTc7XG4gICAgICAgIGN1cnJlbnQgPSB2bm9kZTtcbiAgICAgICAgcmV0dXJuIHJhd1ZOb2RlO1xuICAgICAgfVxuICAgICAgY29uc3Qga2V5ID0gdm5vZGUua2V5ID09IG51bGwgPyBjb21wIDogdm5vZGUua2V5O1xuICAgICAgY29uc3QgY2FjaGVkVk5vZGUgPSBjYWNoZS5nZXQoa2V5KTtcbiAgICAgIGlmICh2bm9kZS5lbCkge1xuICAgICAgICB2bm9kZSA9IGNsb25lVk5vZGUodm5vZGUpO1xuICAgICAgICBpZiAocmF3Vk5vZGUuc2hhcGVGbGFnICYgMTI4KSB7XG4gICAgICAgICAgcmF3Vk5vZGUuc3NDb250ZW50ID0gdm5vZGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHBlbmRpbmdDYWNoZUtleSA9IGtleTtcbiAgICAgIGlmIChjYWNoZWRWTm9kZSkge1xuICAgICAgICB2bm9kZS5lbCA9IGNhY2hlZFZOb2RlLmVsO1xuICAgICAgICB2bm9kZS5jb21wb25lbnQgPSBjYWNoZWRWTm9kZS5jb21wb25lbnQ7XG4gICAgICAgIGlmICh2bm9kZS50cmFuc2l0aW9uKSB7XG4gICAgICAgICAgc2V0VHJhbnNpdGlvbkhvb2tzKHZub2RlLCB2bm9kZS50cmFuc2l0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB2bm9kZS5zaGFwZUZsYWcgfD0gNTEyO1xuICAgICAgICBrZXlzLmRlbGV0ZShrZXkpO1xuICAgICAgICBrZXlzLmFkZChrZXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAga2V5cy5hZGQoa2V5KTtcbiAgICAgICAgaWYgKG1heCAmJiBrZXlzLnNpemUgPiBwYXJzZUludChtYXgsIDEwKSkge1xuICAgICAgICAgIHBydW5lQ2FjaGVFbnRyeShrZXlzLnZhbHVlcygpLm5leHQoKS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZub2RlLnNoYXBlRmxhZyB8PSAyNTY7XG4gICAgICBjdXJyZW50ID0gdm5vZGU7XG4gICAgICByZXR1cm4gaXNTdXNwZW5zZShyYXdWTm9kZS50eXBlKSA/IHJhd1ZOb2RlIDogdm5vZGU7XG4gICAgfTtcbiAgfVxufTtcbmNvbnN0IEtlZXBBbGl2ZSA9IEtlZXBBbGl2ZUltcGw7XG5mdW5jdGlvbiBtYXRjaGVzKHBhdHRlcm4sIG5hbWUpIHtcbiAgaWYgKGlzQXJyYXkocGF0dGVybikpIHtcbiAgICByZXR1cm4gcGF0dGVybi5zb21lKChwKSA9PiBtYXRjaGVzKHAsIG5hbWUpKTtcbiAgfSBlbHNlIGlmIChpc1N0cmluZyhwYXR0ZXJuKSkge1xuICAgIHJldHVybiBwYXR0ZXJuLnNwbGl0KFwiLFwiKS5pbmNsdWRlcyhuYW1lKTtcbiAgfSBlbHNlIGlmIChpc1JlZ0V4cChwYXR0ZXJuKSkge1xuICAgIHBhdHRlcm4ubGFzdEluZGV4ID0gMDtcbiAgICByZXR1cm4gcGF0dGVybi50ZXN0KG5hbWUpO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIG9uQWN0aXZhdGVkKGhvb2ssIHRhcmdldCkge1xuICByZWdpc3RlcktlZXBBbGl2ZUhvb2soaG9vaywgXCJhXCIsIHRhcmdldCk7XG59XG5mdW5jdGlvbiBvbkRlYWN0aXZhdGVkKGhvb2ssIHRhcmdldCkge1xuICByZWdpc3RlcktlZXBBbGl2ZUhvb2soaG9vaywgXCJkYVwiLCB0YXJnZXQpO1xufVxuZnVuY3Rpb24gcmVnaXN0ZXJLZWVwQWxpdmVIb29rKGhvb2ssIHR5cGUsIHRhcmdldCA9IGN1cnJlbnRJbnN0YW5jZSkge1xuICBjb25zdCB3cmFwcGVkSG9vayA9IGhvb2suX193ZGMgfHwgKGhvb2suX193ZGMgPSAoKSA9PiB7XG4gICAgbGV0IGN1cnJlbnQgPSB0YXJnZXQ7XG4gICAgd2hpbGUgKGN1cnJlbnQpIHtcbiAgICAgIGlmIChjdXJyZW50LmlzRGVhY3RpdmF0ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50O1xuICAgIH1cbiAgICByZXR1cm4gaG9vaygpO1xuICB9KTtcbiAgaW5qZWN0SG9vayh0eXBlLCB3cmFwcGVkSG9vaywgdGFyZ2V0KTtcbiAgaWYgKHRhcmdldCkge1xuICAgIGxldCBjdXJyZW50ID0gdGFyZ2V0LnBhcmVudDtcbiAgICB3aGlsZSAoY3VycmVudCAmJiBjdXJyZW50LnBhcmVudCkge1xuICAgICAgaWYgKGlzS2VlcEFsaXZlKGN1cnJlbnQucGFyZW50LnZub2RlKSkge1xuICAgICAgICBpbmplY3RUb0tlZXBBbGl2ZVJvb3Qod3JhcHBlZEhvb2ssIHR5cGUsIHRhcmdldCwgY3VycmVudCk7XG4gICAgICB9XG4gICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnQ7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBpbmplY3RUb0tlZXBBbGl2ZVJvb3QoaG9vaywgdHlwZSwgdGFyZ2V0LCBrZWVwQWxpdmVSb290KSB7XG4gIGNvbnN0IGluamVjdGVkID0gaW5qZWN0SG9vayhcbiAgICB0eXBlLFxuICAgIGhvb2ssXG4gICAga2VlcEFsaXZlUm9vdCxcbiAgICB0cnVlXG4gICAgLyogcHJlcGVuZCAqL1xuICApO1xuICBvblVubW91bnRlZCgoKSA9PiB7XG4gICAgcmVtb3ZlKGtlZXBBbGl2ZVJvb3RbdHlwZV0sIGluamVjdGVkKTtcbiAgfSwgdGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIHJlc2V0U2hhcGVGbGFnKHZub2RlKSB7XG4gIHZub2RlLnNoYXBlRmxhZyAmPSAtMjU3O1xuICB2bm9kZS5zaGFwZUZsYWcgJj0gLTUxMztcbn1cbmZ1bmN0aW9uIGdldElubmVyQ2hpbGQodm5vZGUpIHtcbiAgcmV0dXJuIHZub2RlLnNoYXBlRmxhZyAmIDEyOCA/IHZub2RlLnNzQ29udGVudCA6IHZub2RlO1xufVxuXG5mdW5jdGlvbiBpbmplY3RIb29rKHR5cGUsIGhvb2ssIHRhcmdldCA9IGN1cnJlbnRJbnN0YW5jZSwgcHJlcGVuZCA9IGZhbHNlKSB7XG4gIGlmICh0YXJnZXQpIHtcbiAgICBjb25zdCBob29rcyA9IHRhcmdldFt0eXBlXSB8fCAodGFyZ2V0W3R5cGVdID0gW10pO1xuICAgIGNvbnN0IHdyYXBwZWRIb29rID0gaG9vay5fX3dlaCB8fCAoaG9vay5fX3dlaCA9ICguLi5hcmdzKSA9PiB7XG4gICAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgICBjb25zdCByZXNldCA9IHNldEN1cnJlbnRJbnN0YW5jZSh0YXJnZXQpO1xuICAgICAgY29uc3QgcmVzID0gY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoaG9vaywgdGFyZ2V0LCB0eXBlLCBhcmdzKTtcbiAgICAgIHJlc2V0KCk7XG4gICAgICByZXNldFRyYWNraW5nKCk7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH0pO1xuICAgIGlmIChwcmVwZW5kKSB7XG4gICAgICBob29rcy51bnNoaWZ0KHdyYXBwZWRIb29rKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaG9va3MucHVzaCh3cmFwcGVkSG9vayk7XG4gICAgfVxuICAgIHJldHVybiB3cmFwcGVkSG9vaztcbiAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgY29uc3QgYXBpTmFtZSA9IHRvSGFuZGxlcktleShFcnJvclR5cGVTdHJpbmdzJDFbdHlwZV0ucmVwbGFjZSgvIGhvb2skLywgXCJcIikpO1xuICAgIHdhcm4kMShcbiAgICAgIGAke2FwaU5hbWV9IGlzIGNhbGxlZCB3aGVuIHRoZXJlIGlzIG5vIGFjdGl2ZSBjb21wb25lbnQgaW5zdGFuY2UgdG8gYmUgYXNzb2NpYXRlZCB3aXRoLiBMaWZlY3ljbGUgaW5qZWN0aW9uIEFQSXMgY2FuIG9ubHkgYmUgdXNlZCBkdXJpbmcgZXhlY3V0aW9uIG9mIHNldHVwKCkuYCArIChgIElmIHlvdSBhcmUgdXNpbmcgYXN5bmMgc2V0dXAoKSwgbWFrZSBzdXJlIHRvIHJlZ2lzdGVyIGxpZmVjeWNsZSBob29rcyBiZWZvcmUgdGhlIGZpcnN0IGF3YWl0IHN0YXRlbWVudC5gIClcbiAgICApO1xuICB9XG59XG5jb25zdCBjcmVhdGVIb29rID0gKGxpZmVjeWNsZSkgPT4gKGhvb2ssIHRhcmdldCA9IGN1cnJlbnRJbnN0YW5jZSkgPT4ge1xuICBpZiAoIWlzSW5TU1JDb21wb25lbnRTZXR1cCB8fCBsaWZlY3ljbGUgPT09IFwic3BcIikge1xuICAgIGluamVjdEhvb2sobGlmZWN5Y2xlLCAoLi4uYXJncykgPT4gaG9vayguLi5hcmdzKSwgdGFyZ2V0KTtcbiAgfVxufTtcbmNvbnN0IG9uQmVmb3JlTW91bnQgPSBjcmVhdGVIb29rKFwiYm1cIik7XG5jb25zdCBvbk1vdW50ZWQgPSBjcmVhdGVIb29rKFwibVwiKTtcbmNvbnN0IG9uQmVmb3JlVXBkYXRlID0gY3JlYXRlSG9vayhcbiAgXCJidVwiXG4pO1xuY29uc3Qgb25VcGRhdGVkID0gY3JlYXRlSG9vayhcInVcIik7XG5jb25zdCBvbkJlZm9yZVVubW91bnQgPSBjcmVhdGVIb29rKFxuICBcImJ1bVwiXG4pO1xuY29uc3Qgb25Vbm1vdW50ZWQgPSBjcmVhdGVIb29rKFwidW1cIik7XG5jb25zdCBvblNlcnZlclByZWZldGNoID0gY3JlYXRlSG9vayhcbiAgXCJzcFwiXG4pO1xuY29uc3Qgb25SZW5kZXJUcmlnZ2VyZWQgPSBjcmVhdGVIb29rKFwicnRnXCIpO1xuY29uc3Qgb25SZW5kZXJUcmFja2VkID0gY3JlYXRlSG9vayhcInJ0Y1wiKTtcbmZ1bmN0aW9uIG9uRXJyb3JDYXB0dXJlZChob29rLCB0YXJnZXQgPSBjdXJyZW50SW5zdGFuY2UpIHtcbiAgaW5qZWN0SG9vayhcImVjXCIsIGhvb2ssIHRhcmdldCk7XG59XG5cbmNvbnN0IENPTVBPTkVOVFMgPSBcImNvbXBvbmVudHNcIjtcbmNvbnN0IERJUkVDVElWRVMgPSBcImRpcmVjdGl2ZXNcIjtcbmZ1bmN0aW9uIHJlc29sdmVDb21wb25lbnQobmFtZSwgbWF5YmVTZWxmUmVmZXJlbmNlKSB7XG4gIHJldHVybiByZXNvbHZlQXNzZXQoQ09NUE9ORU5UUywgbmFtZSwgdHJ1ZSwgbWF5YmVTZWxmUmVmZXJlbmNlKSB8fCBuYW1lO1xufVxuY29uc3QgTlVMTF9EWU5BTUlDX0NPTVBPTkVOVCA9IFN5bWJvbC5mb3IoXCJ2LW5kY1wiKTtcbmZ1bmN0aW9uIHJlc29sdmVEeW5hbWljQ29tcG9uZW50KGNvbXBvbmVudCkge1xuICBpZiAoaXNTdHJpbmcoY29tcG9uZW50KSkge1xuICAgIHJldHVybiByZXNvbHZlQXNzZXQoQ09NUE9ORU5UUywgY29tcG9uZW50LCBmYWxzZSkgfHwgY29tcG9uZW50O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjb21wb25lbnQgfHwgTlVMTF9EWU5BTUlDX0NPTVBPTkVOVDtcbiAgfVxufVxuZnVuY3Rpb24gcmVzb2x2ZURpcmVjdGl2ZShuYW1lKSB7XG4gIHJldHVybiByZXNvbHZlQXNzZXQoRElSRUNUSVZFUywgbmFtZSk7XG59XG5mdW5jdGlvbiByZXNvbHZlQXNzZXQodHlwZSwgbmFtZSwgd2Fybk1pc3NpbmcgPSB0cnVlLCBtYXliZVNlbGZSZWZlcmVuY2UgPSBmYWxzZSkge1xuICBjb25zdCBpbnN0YW5jZSA9IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSB8fCBjdXJyZW50SW5zdGFuY2U7XG4gIGlmIChpbnN0YW5jZSkge1xuICAgIGNvbnN0IENvbXBvbmVudCA9IGluc3RhbmNlLnR5cGU7XG4gICAgaWYgKHR5cGUgPT09IENPTVBPTkVOVFMpIHtcbiAgICAgIGNvbnN0IHNlbGZOYW1lID0gZ2V0Q29tcG9uZW50TmFtZShcbiAgICAgICAgQ29tcG9uZW50LFxuICAgICAgICBmYWxzZVxuICAgICAgKTtcbiAgICAgIGlmIChzZWxmTmFtZSAmJiAoc2VsZk5hbWUgPT09IG5hbWUgfHwgc2VsZk5hbWUgPT09IGNhbWVsaXplKG5hbWUpIHx8IHNlbGZOYW1lID09PSBjYXBpdGFsaXplKGNhbWVsaXplKG5hbWUpKSkpIHtcbiAgICAgICAgcmV0dXJuIENvbXBvbmVudDtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmVzID0gKFxuICAgICAgLy8gbG9jYWwgcmVnaXN0cmF0aW9uXG4gICAgICAvLyBjaGVjayBpbnN0YW5jZVt0eXBlXSBmaXJzdCB3aGljaCBpcyByZXNvbHZlZCBmb3Igb3B0aW9ucyBBUElcbiAgICAgIHJlc29sdmUoaW5zdGFuY2VbdHlwZV0gfHwgQ29tcG9uZW50W3R5cGVdLCBuYW1lKSB8fCAvLyBnbG9iYWwgcmVnaXN0cmF0aW9uXG4gICAgICByZXNvbHZlKGluc3RhbmNlLmFwcENvbnRleHRbdHlwZV0sIG5hbWUpXG4gICAgKTtcbiAgICBpZiAoIXJlcyAmJiBtYXliZVNlbGZSZWZlcmVuY2UpIHtcbiAgICAgIHJldHVybiBDb21wb25lbnQ7XG4gICAgfVxuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm5NaXNzaW5nICYmICFyZXMpIHtcbiAgICAgIGNvbnN0IGV4dHJhID0gdHlwZSA9PT0gQ09NUE9ORU5UUyA/IGBcbklmIHRoaXMgaXMgYSBuYXRpdmUgY3VzdG9tIGVsZW1lbnQsIG1ha2Ugc3VyZSB0byBleGNsdWRlIGl0IGZyb20gY29tcG9uZW50IHJlc29sdXRpb24gdmlhIGNvbXBpbGVyT3B0aW9ucy5pc0N1c3RvbUVsZW1lbnQuYCA6IGBgO1xuICAgICAgd2FybiQxKGBGYWlsZWQgdG8gcmVzb2x2ZSAke3R5cGUuc2xpY2UoMCwgLTEpfTogJHtuYW1lfSR7ZXh0cmF9YCk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm4kMShcbiAgICAgIGByZXNvbHZlJHtjYXBpdGFsaXplKHR5cGUuc2xpY2UoMCwgLTEpKX0gY2FuIG9ubHkgYmUgdXNlZCBpbiByZW5kZXIoKSBvciBzZXR1cCgpLmBcbiAgICApO1xuICB9XG59XG5mdW5jdGlvbiByZXNvbHZlKHJlZ2lzdHJ5LCBuYW1lKSB7XG4gIHJldHVybiByZWdpc3RyeSAmJiAocmVnaXN0cnlbbmFtZV0gfHwgcmVnaXN0cnlbY2FtZWxpemUobmFtZSldIHx8IHJlZ2lzdHJ5W2NhcGl0YWxpemUoY2FtZWxpemUobmFtZSkpXSk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckxpc3Qoc291cmNlLCByZW5kZXJJdGVtLCBjYWNoZSwgaW5kZXgpIHtcbiAgbGV0IHJldDtcbiAgY29uc3QgY2FjaGVkID0gY2FjaGUgJiYgY2FjaGVbaW5kZXhdO1xuICBjb25zdCBzb3VyY2VJc0FycmF5ID0gaXNBcnJheShzb3VyY2UpO1xuICBpZiAoc291cmNlSXNBcnJheSB8fCBpc1N0cmluZyhzb3VyY2UpKSB7XG4gICAgY29uc3Qgc291cmNlSXNSZWFjdGl2ZUFycmF5ID0gc291cmNlSXNBcnJheSAmJiBpc1JlYWN0aXZlKHNvdXJjZSk7XG4gICAgbGV0IG5lZWRzV3JhcCA9IGZhbHNlO1xuICAgIGxldCBpc1JlYWRvbmx5U291cmNlID0gZmFsc2U7XG4gICAgaWYgKHNvdXJjZUlzUmVhY3RpdmVBcnJheSkge1xuICAgICAgbmVlZHNXcmFwID0gIWlzU2hhbGxvdyhzb3VyY2UpO1xuICAgICAgaXNSZWFkb25seVNvdXJjZSA9IGlzUmVhZG9ubHkoc291cmNlKTtcbiAgICAgIHNvdXJjZSA9IHNoYWxsb3dSZWFkQXJyYXkoc291cmNlKTtcbiAgICB9XG4gICAgcmV0ID0gbmV3IEFycmF5KHNvdXJjZS5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwLCBsID0gc291cmNlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgcmV0W2ldID0gcmVuZGVySXRlbShcbiAgICAgICAgbmVlZHNXcmFwID8gaXNSZWFkb25seVNvdXJjZSA/IHRvUmVhZG9ubHkodG9SZWFjdGl2ZShzb3VyY2VbaV0pKSA6IHRvUmVhY3RpdmUoc291cmNlW2ldKSA6IHNvdXJjZVtpXSxcbiAgICAgICAgaSxcbiAgICAgICAgdm9pZCAwLFxuICAgICAgICBjYWNoZWQgJiYgY2FjaGVkW2ldXG4gICAgICApO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2Ygc291cmNlID09PSBcIm51bWJlclwiKSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIU51bWJlci5pc0ludGVnZXIoc291cmNlKSkge1xuICAgICAgd2FybiQxKGBUaGUgdi1mb3IgcmFuZ2UgZXhwZWN0IGFuIGludGVnZXIgdmFsdWUgYnV0IGdvdCAke3NvdXJjZX0uYCk7XG4gICAgfVxuICAgIHJldCA9IG5ldyBBcnJheShzb3VyY2UpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc291cmNlOyBpKyspIHtcbiAgICAgIHJldFtpXSA9IHJlbmRlckl0ZW0oaSArIDEsIGksIHZvaWQgMCwgY2FjaGVkICYmIGNhY2hlZFtpXSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KHNvdXJjZSkpIHtcbiAgICBpZiAoc291cmNlW1N5bWJvbC5pdGVyYXRvcl0pIHtcbiAgICAgIHJldCA9IEFycmF5LmZyb20oXG4gICAgICAgIHNvdXJjZSxcbiAgICAgICAgKGl0ZW0sIGkpID0+IHJlbmRlckl0ZW0oaXRlbSwgaSwgdm9pZCAwLCBjYWNoZWQgJiYgY2FjaGVkW2ldKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG4gICAgICByZXQgPSBuZXcgQXJyYXkoa2V5cy5sZW5ndGgpO1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBjb25zdCBrZXkgPSBrZXlzW2ldO1xuICAgICAgICByZXRbaV0gPSByZW5kZXJJdGVtKHNvdXJjZVtrZXldLCBrZXksIGksIGNhY2hlZCAmJiBjYWNoZWRbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXQgPSBbXTtcbiAgfVxuICBpZiAoY2FjaGUpIHtcbiAgICBjYWNoZVtpbmRleF0gPSByZXQ7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlU2xvdHMoc2xvdHMsIGR5bmFtaWNTbG90cykge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGR5bmFtaWNTbG90cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHNsb3QgPSBkeW5hbWljU2xvdHNbaV07XG4gICAgaWYgKGlzQXJyYXkoc2xvdCkpIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2xvdC5sZW5ndGg7IGorKykge1xuICAgICAgICBzbG90c1tzbG90W2pdLm5hbWVdID0gc2xvdFtqXS5mbjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHNsb3QpIHtcbiAgICAgIHNsb3RzW3Nsb3QubmFtZV0gPSBzbG90LmtleSA/ICguLi5hcmdzKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHNsb3QuZm4oLi4uYXJncyk7XG4gICAgICAgIGlmIChyZXMpIHJlcy5rZXkgPSBzbG90LmtleTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgIH0gOiBzbG90LmZuO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc2xvdHM7XG59XG5cbmZ1bmN0aW9uIHJlbmRlclNsb3Qoc2xvdHMsIG5hbWUsIHByb3BzID0ge30sIGZhbGxiYWNrLCBub1Nsb3R0ZWQpIHtcbiAgaWYgKGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZS5jZSB8fCBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UucGFyZW50ICYmIGlzQXN5bmNXcmFwcGVyKGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZS5wYXJlbnQpICYmIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZS5wYXJlbnQuY2UpIHtcbiAgICBpZiAobmFtZSAhPT0gXCJkZWZhdWx0XCIpIHByb3BzLm5hbWUgPSBuYW1lO1xuICAgIHJldHVybiBvcGVuQmxvY2soKSwgY3JlYXRlQmxvY2soXG4gICAgICBGcmFnbWVudCxcbiAgICAgIG51bGwsXG4gICAgICBbY3JlYXRlVk5vZGUoXCJzbG90XCIsIHByb3BzLCBmYWxsYmFjayAmJiBmYWxsYmFjaygpKV0sXG4gICAgICA2NFxuICAgICk7XG4gIH1cbiAgbGV0IHNsb3QgPSBzbG90c1tuYW1lXTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgc2xvdCAmJiBzbG90Lmxlbmd0aCA+IDEpIHtcbiAgICB3YXJuJDEoXG4gICAgICBgU1NSLW9wdGltaXplZCBzbG90IGZ1bmN0aW9uIGRldGVjdGVkIGluIGEgbm9uLVNTUi1vcHRpbWl6ZWQgcmVuZGVyIGZ1bmN0aW9uLiBZb3UgbmVlZCB0byBtYXJrIHRoaXMgY29tcG9uZW50IHdpdGggJGR5bmFtaWMtc2xvdHMgaW4gdGhlIHBhcmVudCB0ZW1wbGF0ZS5gXG4gICAgKTtcbiAgICBzbG90ID0gKCkgPT4gW107XG4gIH1cbiAgaWYgKHNsb3QgJiYgc2xvdC5fYykge1xuICAgIHNsb3QuX2QgPSBmYWxzZTtcbiAgfVxuICBvcGVuQmxvY2soKTtcbiAgY29uc3QgdmFsaWRTbG90Q29udGVudCA9IHNsb3QgJiYgZW5zdXJlVmFsaWRWTm9kZShzbG90KHByb3BzKSk7XG4gIGNvbnN0IHNsb3RLZXkgPSBwcm9wcy5rZXkgfHwgLy8gc2xvdCBjb250ZW50IGFycmF5IG9mIGEgZHluYW1pYyBjb25kaXRpb25hbCBzbG90IG1heSBoYXZlIGEgYnJhbmNoXG4gIC8vIGtleSBhdHRhY2hlZCBpbiB0aGUgYGNyZWF0ZVNsb3RzYCBoZWxwZXIsIHJlc3BlY3QgdGhhdFxuICB2YWxpZFNsb3RDb250ZW50ICYmIHZhbGlkU2xvdENvbnRlbnQua2V5O1xuICBjb25zdCByZW5kZXJlZCA9IGNyZWF0ZUJsb2NrKFxuICAgIEZyYWdtZW50LFxuICAgIHtcbiAgICAgIGtleTogKHNsb3RLZXkgJiYgIWlzU3ltYm9sKHNsb3RLZXkpID8gc2xvdEtleSA6IGBfJHtuYW1lfWApICsgLy8gIzcyNTYgZm9yY2UgZGlmZmVyZW50aWF0ZSBmYWxsYmFjayBjb250ZW50IGZyb20gYWN0dWFsIGNvbnRlbnRcbiAgICAgICghdmFsaWRTbG90Q29udGVudCAmJiBmYWxsYmFjayA/IFwiX2ZiXCIgOiBcIlwiKVxuICAgIH0sXG4gICAgdmFsaWRTbG90Q29udGVudCB8fCAoZmFsbGJhY2sgPyBmYWxsYmFjaygpIDogW10pLFxuICAgIHZhbGlkU2xvdENvbnRlbnQgJiYgc2xvdHMuXyA9PT0gMSA/IDY0IDogLTJcbiAgKTtcbiAgaWYgKCFub1Nsb3R0ZWQgJiYgcmVuZGVyZWQuc2NvcGVJZCkge1xuICAgIHJlbmRlcmVkLnNsb3RTY29wZUlkcyA9IFtyZW5kZXJlZC5zY29wZUlkICsgXCItc1wiXTtcbiAgfVxuICBpZiAoc2xvdCAmJiBzbG90Ll9jKSB7XG4gICAgc2xvdC5fZCA9IHRydWU7XG4gIH1cbiAgcmV0dXJuIHJlbmRlcmVkO1xufVxuZnVuY3Rpb24gZW5zdXJlVmFsaWRWTm9kZSh2bm9kZXMpIHtcbiAgcmV0dXJuIHZub2Rlcy5zb21lKChjaGlsZCkgPT4ge1xuICAgIGlmICghaXNWTm9kZShjaGlsZCkpIHJldHVybiB0cnVlO1xuICAgIGlmIChjaGlsZC50eXBlID09PSBDb21tZW50KSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09IEZyYWdtZW50ICYmICFlbnN1cmVWYWxpZFZOb2RlKGNoaWxkLmNoaWxkcmVuKSlcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSkgPyB2bm9kZXMgOiBudWxsO1xufVxuXG5mdW5jdGlvbiB0b0hhbmRsZXJzKG9iaiwgcHJlc2VydmVDYXNlSWZOZWNlc3NhcnkpIHtcbiAgY29uc3QgcmV0ID0ge307XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFpc09iamVjdChvYmopKSB7XG4gICAgd2FybiQxKGB2LW9uIHdpdGggbm8gYXJndW1lbnQgZXhwZWN0cyBhbiBvYmplY3QgdmFsdWUuYCk7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcbiAgICByZXRbcHJlc2VydmVDYXNlSWZOZWNlc3NhcnkgJiYgL1tBLVpdLy50ZXN0KGtleSkgPyBgb246JHtrZXl9YCA6IHRvSGFuZGxlcktleShrZXkpXSA9IG9ialtrZXldO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbmNvbnN0IGdldFB1YmxpY0luc3RhbmNlID0gKGkpID0+IHtcbiAgaWYgKCFpKSByZXR1cm4gbnVsbDtcbiAgaWYgKGlzU3RhdGVmdWxDb21wb25lbnQoaSkpIHJldHVybiBnZXRDb21wb25lbnRQdWJsaWNJbnN0YW5jZShpKTtcbiAgcmV0dXJuIGdldFB1YmxpY0luc3RhbmNlKGkucGFyZW50KTtcbn07XG5jb25zdCBwdWJsaWNQcm9wZXJ0aWVzTWFwID0gKFxuICAvLyBNb3ZlIFBVUkUgbWFya2VyIHRvIG5ldyBsaW5lIHRvIHdvcmthcm91bmQgY29tcGlsZXIgZGlzY2FyZGluZyBpdFxuICAvLyBkdWUgdG8gdHlwZSBhbm5vdGF0aW9uXG4gIC8qIEBfX1BVUkVfXyAqLyBleHRlbmQoLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCksIHtcbiAgICAkOiAoaSkgPT4gaSxcbiAgICAkZWw6IChpKSA9PiBpLnZub2RlLmVsLFxuICAgICRkYXRhOiAoaSkgPT4gaS5kYXRhLFxuICAgICRwcm9wczogKGkpID0+ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBzaGFsbG93UmVhZG9ubHkoaS5wcm9wcykgOiBpLnByb3BzLFxuICAgICRhdHRyczogKGkpID0+ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBzaGFsbG93UmVhZG9ubHkoaS5hdHRycykgOiBpLmF0dHJzLFxuICAgICRzbG90czogKGkpID0+ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBzaGFsbG93UmVhZG9ubHkoaS5zbG90cykgOiBpLnNsb3RzLFxuICAgICRyZWZzOiAoaSkgPT4gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHNoYWxsb3dSZWFkb25seShpLnJlZnMpIDogaS5yZWZzLFxuICAgICRwYXJlbnQ6IChpKSA9PiBnZXRQdWJsaWNJbnN0YW5jZShpLnBhcmVudCksXG4gICAgJHJvb3Q6IChpKSA9PiBnZXRQdWJsaWNJbnN0YW5jZShpLnJvb3QpLFxuICAgICRob3N0OiAoaSkgPT4gaS5jZSxcbiAgICAkZW1pdDogKGkpID0+IGkuZW1pdCxcbiAgICAkb3B0aW9uczogKGkpID0+IF9fVlVFX09QVElPTlNfQVBJX18gPyByZXNvbHZlTWVyZ2VkT3B0aW9ucyhpKSA6IGkudHlwZSxcbiAgICAkZm9yY2VVcGRhdGU6IChpKSA9PiBpLmYgfHwgKGkuZiA9ICgpID0+IHtcbiAgICAgIHF1ZXVlSm9iKGkudXBkYXRlKTtcbiAgICB9KSxcbiAgICAkbmV4dFRpY2s6IChpKSA9PiBpLm4gfHwgKGkubiA9IG5leHRUaWNrLmJpbmQoaS5wcm94eSkpLFxuICAgICR3YXRjaDogKGkpID0+IF9fVlVFX09QVElPTlNfQVBJX18gPyBpbnN0YW5jZVdhdGNoLmJpbmQoaSkgOiBOT09QXG4gIH0pXG4pO1xuY29uc3QgaXNSZXNlcnZlZFByZWZpeCA9IChrZXkpID0+IGtleSA9PT0gXCJfXCIgfHwga2V5ID09PSBcIiRcIjtcbmNvbnN0IGhhc1NldHVwQmluZGluZyA9IChzdGF0ZSwga2V5KSA9PiBzdGF0ZSAhPT0gRU1QVFlfT0JKICYmICFzdGF0ZS5fX2lzU2NyaXB0U2V0dXAgJiYgaGFzT3duKHN0YXRlLCBrZXkpO1xuY29uc3QgUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzID0ge1xuICBnZXQoeyBfOiBpbnN0YW5jZSB9LCBrZXkpIHtcbiAgICBpZiAoa2V5ID09PSBcIl9fdl9za2lwXCIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCB7IGN0eCwgc2V0dXBTdGF0ZSwgZGF0YSwgcHJvcHMsIGFjY2Vzc0NhY2hlLCB0eXBlLCBhcHBDb250ZXh0IH0gPSBpbnN0YW5jZTtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBrZXkgPT09IFwiX19pc1Z1ZVwiKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgbGV0IG5vcm1hbGl6ZWRQcm9wcztcbiAgICBpZiAoa2V5WzBdICE9PSBcIiRcIikge1xuICAgICAgY29uc3QgbiA9IGFjY2Vzc0NhY2hlW2tleV07XG4gICAgICBpZiAobiAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHN3aXRjaCAobikge1xuICAgICAgICAgIGNhc2UgMSAvKiBTRVRVUCAqLzpcbiAgICAgICAgICAgIHJldHVybiBzZXR1cFN0YXRlW2tleV07XG4gICAgICAgICAgY2FzZSAyIC8qIERBVEEgKi86XG4gICAgICAgICAgICByZXR1cm4gZGF0YVtrZXldO1xuICAgICAgICAgIGNhc2UgNCAvKiBDT05URVhUICovOlxuICAgICAgICAgICAgcmV0dXJuIGN0eFtrZXldO1xuICAgICAgICAgIGNhc2UgMyAvKiBQUk9QUyAqLzpcbiAgICAgICAgICAgIHJldHVybiBwcm9wc1trZXldO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGhhc1NldHVwQmluZGluZyhzZXR1cFN0YXRlLCBrZXkpKSB7XG4gICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSAxIC8qIFNFVFVQICovO1xuICAgICAgICByZXR1cm4gc2V0dXBTdGF0ZVtrZXldO1xuICAgICAgfSBlbHNlIGlmIChkYXRhICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGRhdGEsIGtleSkpIHtcbiAgICAgICAgYWNjZXNzQ2FjaGVba2V5XSA9IDIgLyogREFUQSAqLztcbiAgICAgICAgcmV0dXJuIGRhdGFba2V5XTtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIC8vIG9ubHkgY2FjaGUgb3RoZXIgcHJvcGVydGllcyB3aGVuIGluc3RhbmNlIGhhcyBkZWNsYXJlZCAodGh1cyBzdGFibGUpXG4gICAgICAgIC8vIHByb3BzXG4gICAgICAgIChub3JtYWxpemVkUHJvcHMgPSBpbnN0YW5jZS5wcm9wc09wdGlvbnNbMF0pICYmIGhhc093bihub3JtYWxpemVkUHJvcHMsIGtleSlcbiAgICAgICkge1xuICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gMyAvKiBQUk9QUyAqLztcbiAgICAgICAgcmV0dXJuIHByb3BzW2tleV07XG4gICAgICB9IGVsc2UgaWYgKGN0eCAhPT0gRU1QVFlfT0JKICYmIGhhc093bihjdHgsIGtleSkpIHtcbiAgICAgICAgYWNjZXNzQ2FjaGVba2V5XSA9IDQgLyogQ09OVEVYVCAqLztcbiAgICAgICAgcmV0dXJuIGN0eFtrZXldO1xuICAgICAgfSBlbHNlIGlmICghX19WVUVfT1BUSU9OU19BUElfXyB8fCBzaG91bGRDYWNoZUFjY2Vzcykge1xuICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gMCAvKiBPVEhFUiAqLztcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcHVibGljR2V0dGVyID0gcHVibGljUHJvcGVydGllc01hcFtrZXldO1xuICAgIGxldCBjc3NNb2R1bGUsIGdsb2JhbFByb3BlcnRpZXM7XG4gICAgaWYgKHB1YmxpY0dldHRlcikge1xuICAgICAgaWYgKGtleSA9PT0gXCIkYXR0cnNcIikge1xuICAgICAgICB0cmFjayhpbnN0YW5jZS5hdHRycywgXCJnZXRcIiwgXCJcIik7XG4gICAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgbWFya0F0dHJzQWNjZXNzZWQoKTtcbiAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBrZXkgPT09IFwiJHNsb3RzXCIpIHtcbiAgICAgICAgdHJhY2soaW5zdGFuY2UsIFwiZ2V0XCIsIGtleSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcHVibGljR2V0dGVyKGluc3RhbmNlKTtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgLy8gY3NzIG1vZHVsZSAoaW5qZWN0ZWQgYnkgdnVlLWxvYWRlcilcbiAgICAgIChjc3NNb2R1bGUgPSB0eXBlLl9fY3NzTW9kdWxlcykgJiYgKGNzc01vZHVsZSA9IGNzc01vZHVsZVtrZXldKVxuICAgICkge1xuICAgICAgcmV0dXJuIGNzc01vZHVsZTtcbiAgICB9IGVsc2UgaWYgKGN0eCAhPT0gRU1QVFlfT0JKICYmIGhhc093bihjdHgsIGtleSkpIHtcbiAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSA0IC8qIENPTlRFWFQgKi87XG4gICAgICByZXR1cm4gY3R4W2tleV07XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIC8vIGdsb2JhbCBwcm9wZXJ0aWVzXG4gICAgICBnbG9iYWxQcm9wZXJ0aWVzID0gYXBwQ29udGV4dC5jb25maWcuZ2xvYmFsUHJvcGVydGllcywgaGFzT3duKGdsb2JhbFByb3BlcnRpZXMsIGtleSlcbiAgICApIHtcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbFByb3BlcnRpZXNba2V5XTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlICYmICghaXNTdHJpbmcoa2V5KSB8fCAvLyAjMTA5MSBhdm9pZCBpbnRlcm5hbCBpc1JlZi9pc1ZOb2RlIGNoZWNrcyBvbiBjb21wb25lbnQgaW5zdGFuY2UgbGVhZGluZ1xuICAgIC8vIHRvIGluZmluaXRlIHdhcm5pbmcgbG9vcFxuICAgIGtleS5pbmRleE9mKFwiX192XCIpICE9PSAwKSkge1xuICAgICAgaWYgKGRhdGEgIT09IEVNUFRZX09CSiAmJiBpc1Jlc2VydmVkUHJlZml4KGtleVswXSkgJiYgaGFzT3duKGRhdGEsIGtleSkpIHtcbiAgICAgICAgd2FybiQxKFxuICAgICAgICAgIGBQcm9wZXJ0eSAke0pTT04uc3RyaW5naWZ5KFxuICAgICAgICAgICAga2V5XG4gICAgICAgICAgKX0gbXVzdCBiZSBhY2Nlc3NlZCB2aWEgJGRhdGEgYmVjYXVzZSBpdCBzdGFydHMgd2l0aCBhIHJlc2VydmVkIGNoYXJhY3RlciAoXCIkXCIgb3IgXCJfXCIpIGFuZCBpcyBub3QgcHJveGllZCBvbiB0aGUgcmVuZGVyIGNvbnRleHQuYFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChpbnN0YW5jZSA9PT0gY3VycmVudFJlbmRlcmluZ0luc3RhbmNlKSB7XG4gICAgICAgIHdhcm4kMShcbiAgICAgICAgICBgUHJvcGVydHkgJHtKU09OLnN0cmluZ2lmeShrZXkpfSB3YXMgYWNjZXNzZWQgZHVyaW5nIHJlbmRlciBidXQgaXMgbm90IGRlZmluZWQgb24gaW5zdGFuY2UuYFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgc2V0KHsgXzogaW5zdGFuY2UgfSwga2V5LCB2YWx1ZSkge1xuICAgIGNvbnN0IHsgZGF0YSwgc2V0dXBTdGF0ZSwgY3R4IH0gPSBpbnN0YW5jZTtcbiAgICBpZiAoaGFzU2V0dXBCaW5kaW5nKHNldHVwU3RhdGUsIGtleSkpIHtcbiAgICAgIHNldHVwU3RhdGVba2V5XSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHNldHVwU3RhdGUuX19pc1NjcmlwdFNldHVwICYmIGhhc093bihzZXR1cFN0YXRlLCBrZXkpKSB7XG4gICAgICB3YXJuJDEoYENhbm5vdCBtdXRhdGUgPHNjcmlwdCBzZXR1cD4gYmluZGluZyBcIiR7a2V5fVwiIGZyb20gT3B0aW9ucyBBUEkuYCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChkYXRhICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGRhdGEsIGtleSkpIHtcbiAgICAgIGRhdGFba2V5XSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmIChoYXNPd24oaW5zdGFuY2UucHJvcHMsIGtleSkpIHtcbiAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybiQxKGBBdHRlbXB0aW5nIHRvIG11dGF0ZSBwcm9wIFwiJHtrZXl9XCIuIFByb3BzIGFyZSByZWFkb25seS5gKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGtleVswXSA9PT0gXCIkXCIgJiYga2V5LnNsaWNlKDEpIGluIGluc3RhbmNlKSB7XG4gICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4kMShcbiAgICAgICAgYEF0dGVtcHRpbmcgdG8gbXV0YXRlIHB1YmxpYyBwcm9wZXJ0eSBcIiR7a2V5fVwiLiBQcm9wZXJ0aWVzIHN0YXJ0aW5nIHdpdGggJCBhcmUgcmVzZXJ2ZWQgYW5kIHJlYWRvbmx5LmBcbiAgICAgICk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGtleSBpbiBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIGtleSwge1xuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgIHZhbHVlXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3R4W2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG4gIGhhcyh7XG4gICAgXzogeyBkYXRhLCBzZXR1cFN0YXRlLCBhY2Nlc3NDYWNoZSwgY3R4LCBhcHBDb250ZXh0LCBwcm9wc09wdGlvbnMgfVxuICB9LCBrZXkpIHtcbiAgICBsZXQgbm9ybWFsaXplZFByb3BzO1xuICAgIHJldHVybiAhIWFjY2Vzc0NhY2hlW2tleV0gfHwgZGF0YSAhPT0gRU1QVFlfT0JKICYmIGhhc093bihkYXRhLCBrZXkpIHx8IGhhc1NldHVwQmluZGluZyhzZXR1cFN0YXRlLCBrZXkpIHx8IChub3JtYWxpemVkUHJvcHMgPSBwcm9wc09wdGlvbnNbMF0pICYmIGhhc093bihub3JtYWxpemVkUHJvcHMsIGtleSkgfHwgaGFzT3duKGN0eCwga2V5KSB8fCBoYXNPd24ocHVibGljUHJvcGVydGllc01hcCwga2V5KSB8fCBoYXNPd24oYXBwQ29udGV4dC5jb25maWcuZ2xvYmFsUHJvcGVydGllcywga2V5KTtcbiAgfSxcbiAgZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIGRlc2NyaXB0b3IpIHtcbiAgICBpZiAoZGVzY3JpcHRvci5nZXQgIT0gbnVsbCkge1xuICAgICAgdGFyZ2V0Ll8uYWNjZXNzQ2FjaGVba2V5XSA9IDA7XG4gICAgfSBlbHNlIGlmIChoYXNPd24oZGVzY3JpcHRvciwgXCJ2YWx1ZVwiKSkge1xuICAgICAgdGhpcy5zZXQodGFyZ2V0LCBrZXksIGRlc2NyaXB0b3IudmFsdWUsIG51bGwpO1xuICAgIH1cbiAgICByZXR1cm4gUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgZGVzY3JpcHRvcik7XG4gIH1cbn07XG5pZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB0cnVlKSB7XG4gIFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycy5vd25LZXlzID0gKHRhcmdldCkgPT4ge1xuICAgIHdhcm4kMShcbiAgICAgIGBBdm9pZCBhcHAgbG9naWMgdGhhdCByZWxpZXMgb24gZW51bWVyYXRpbmcga2V5cyBvbiBhIGNvbXBvbmVudCBpbnN0YW5jZS4gVGhlIGtleXMgd2lsbCBiZSBlbXB0eSBpbiBwcm9kdWN0aW9uIG1vZGUgdG8gYXZvaWQgcGVyZm9ybWFuY2Ugb3ZlcmhlYWQuYFxuICAgICk7XG4gICAgcmV0dXJuIFJlZmxlY3Qub3duS2V5cyh0YXJnZXQpO1xuICB9O1xufVxuY29uc3QgUnVudGltZUNvbXBpbGVkUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzID0gLyogQF9fUFVSRV9fICovIGV4dGVuZCh7fSwgUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzLCB7XG4gIGdldCh0YXJnZXQsIGtleSkge1xuICAgIGlmIChrZXkgPT09IFN5bWJvbC51bnNjb3BhYmxlcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzLmdldCh0YXJnZXQsIGtleSwgdGFyZ2V0KTtcbiAgfSxcbiAgaGFzKF8sIGtleSkge1xuICAgIGNvbnN0IGhhcyA9IGtleVswXSAhPT0gXCJfXCIgJiYgIWlzR2xvYmFsbHlBbGxvd2VkKGtleSk7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWhhcyAmJiBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMuaGFzKF8sIGtleSkpIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYFByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAga2V5XG4gICAgICAgICl9IHNob3VsZCBub3Qgc3RhcnQgd2l0aCBfIHdoaWNoIGlzIGEgcmVzZXJ2ZWQgcHJlZml4IGZvciBWdWUgaW50ZXJuYWxzLmBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBoYXM7XG4gIH1cbn0pO1xuZnVuY3Rpb24gY3JlYXRlRGV2UmVuZGVyQ29udGV4dChpbnN0YW5jZSkge1xuICBjb25zdCB0YXJnZXQgPSB7fTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgYF9gLCB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIGdldDogKCkgPT4gaW5zdGFuY2VcbiAgfSk7XG4gIE9iamVjdC5rZXlzKHB1YmxpY1Byb3BlcnRpZXNNYXApLmZvckVhY2goKGtleSkgPT4ge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwge1xuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBnZXQ6ICgpID0+IHB1YmxpY1Byb3BlcnRpZXNNYXBba2V5XShpbnN0YW5jZSksXG4gICAgICAvLyBpbnRlcmNlcHRlZCBieSB0aGUgcHJveHkgc28gbm8gbmVlZCBmb3IgaW1wbGVtZW50YXRpb24sXG4gICAgICAvLyBidXQgbmVlZGVkIHRvIHByZXZlbnQgc2V0IGVycm9yc1xuICAgICAgc2V0OiBOT09QXG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gdGFyZ2V0O1xufVxuZnVuY3Rpb24gZXhwb3NlUHJvcHNPblJlbmRlckNvbnRleHQoaW5zdGFuY2UpIHtcbiAgY29uc3Qge1xuICAgIGN0eCxcbiAgICBwcm9wc09wdGlvbnM6IFtwcm9wc09wdGlvbnNdXG4gIH0gPSBpbnN0YW5jZTtcbiAgaWYgKHByb3BzT3B0aW9ucykge1xuICAgIE9iamVjdC5rZXlzKHByb3BzT3B0aW9ucykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6ICgpID0+IGluc3RhbmNlLnByb3BzW2tleV0sXG4gICAgICAgIHNldDogTk9PUFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGV4cG9zZVNldHVwU3RhdGVPblJlbmRlckNvbnRleHQoaW5zdGFuY2UpIHtcbiAgY29uc3QgeyBjdHgsIHNldHVwU3RhdGUgfSA9IGluc3RhbmNlO1xuICBPYmplY3Qua2V5cyh0b1JhdyhzZXR1cFN0YXRlKSkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgaWYgKCFzZXR1cFN0YXRlLl9faXNTY3JpcHRTZXR1cCkge1xuICAgICAgaWYgKGlzUmVzZXJ2ZWRQcmVmaXgoa2V5WzBdKSkge1xuICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgYHNldHVwKCkgcmV0dXJuIHByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAgICBrZXlcbiAgICAgICAgICApfSBzaG91bGQgbm90IHN0YXJ0IHdpdGggXCIkXCIgb3IgXCJfXCIgd2hpY2ggYXJlIHJlc2VydmVkIHByZWZpeGVzIGZvciBWdWUgaW50ZXJuYWxzLmBcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwga2V5LCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0OiAoKSA9PiBzZXR1cFN0YXRlW2tleV0sXG4gICAgICAgIHNldDogTk9PUFxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn1cblxuY29uc3Qgd2FyblJ1bnRpbWVVc2FnZSA9IChtZXRob2QpID0+IHdhcm4kMShcbiAgYCR7bWV0aG9kfSgpIGlzIGEgY29tcGlsZXItaGludCBoZWxwZXIgdGhhdCBpcyBvbmx5IHVzYWJsZSBpbnNpZGUgPHNjcmlwdCBzZXR1cD4gb2YgYSBzaW5nbGUgZmlsZSBjb21wb25lbnQuIEl0cyBhcmd1bWVudHMgc2hvdWxkIGJlIGNvbXBpbGVkIGF3YXkgYW5kIHBhc3NpbmcgaXQgYXQgcnVudGltZSBoYXMgbm8gZWZmZWN0LmBcbik7XG5mdW5jdGlvbiBkZWZpbmVQcm9wcygpIHtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICB3YXJuUnVudGltZVVzYWdlKGBkZWZpbmVQcm9wc2ApO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gZGVmaW5lRW1pdHMoKSB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgd2FyblJ1bnRpbWVVc2FnZShgZGVmaW5lRW1pdHNgKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGRlZmluZUV4cG9zZShleHBvc2VkKSB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgd2FyblJ1bnRpbWVVc2FnZShgZGVmaW5lRXhwb3NlYCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGRlZmluZU9wdGlvbnMob3B0aW9ucykge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm5SdW50aW1lVXNhZ2UoYGRlZmluZU9wdGlvbnNgKTtcbiAgfVxufVxuZnVuY3Rpb24gZGVmaW5lU2xvdHMoKSB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgd2FyblJ1bnRpbWVVc2FnZShgZGVmaW5lU2xvdHNgKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGRlZmluZU1vZGVsKCkge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm5SdW50aW1lVXNhZ2UoXCJkZWZpbmVNb2RlbFwiKTtcbiAgfVxufVxuZnVuY3Rpb24gd2l0aERlZmF1bHRzKHByb3BzLCBkZWZhdWx0cykge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm5SdW50aW1lVXNhZ2UoYHdpdGhEZWZhdWx0c2ApO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gdXNlU2xvdHMoKSB7XG4gIHJldHVybiBnZXRDb250ZXh0KCkuc2xvdHM7XG59XG5mdW5jdGlvbiB1c2VBdHRycygpIHtcbiAgcmV0dXJuIGdldENvbnRleHQoKS5hdHRycztcbn1cbmZ1bmN0aW9uIGdldENvbnRleHQoKSB7XG4gIGNvbnN0IGkgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWkpIHtcbiAgICB3YXJuJDEoYHVzZUNvbnRleHQoKSBjYWxsZWQgd2l0aG91dCBhY3RpdmUgaW5zdGFuY2UuYCk7XG4gIH1cbiAgcmV0dXJuIGkuc2V0dXBDb250ZXh0IHx8IChpLnNldHVwQ29udGV4dCA9IGNyZWF0ZVNldHVwQ29udGV4dChpKSk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVQcm9wc09yRW1pdHMocHJvcHMpIHtcbiAgcmV0dXJuIGlzQXJyYXkocHJvcHMpID8gcHJvcHMucmVkdWNlKFxuICAgIChub3JtYWxpemVkLCBwKSA9PiAobm9ybWFsaXplZFtwXSA9IG51bGwsIG5vcm1hbGl6ZWQpLFxuICAgIHt9XG4gICkgOiBwcm9wcztcbn1cbmZ1bmN0aW9uIG1lcmdlRGVmYXVsdHMocmF3LCBkZWZhdWx0cykge1xuICBjb25zdCBwcm9wcyA9IG5vcm1hbGl6ZVByb3BzT3JFbWl0cyhyYXcpO1xuICBmb3IgKGNvbnN0IGtleSBpbiBkZWZhdWx0cykge1xuICAgIGlmIChrZXkuc3RhcnRzV2l0aChcIl9fc2tpcFwiKSkgY29udGludWU7XG4gICAgbGV0IG9wdCA9IHByb3BzW2tleV07XG4gICAgaWYgKG9wdCkge1xuICAgICAgaWYgKGlzQXJyYXkob3B0KSB8fCBpc0Z1bmN0aW9uKG9wdCkpIHtcbiAgICAgICAgb3B0ID0gcHJvcHNba2V5XSA9IHsgdHlwZTogb3B0LCBkZWZhdWx0OiBkZWZhdWx0c1trZXldIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHQuZGVmYXVsdCA9IGRlZmF1bHRzW2tleV07XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChvcHQgPT09IG51bGwpIHtcbiAgICAgIG9wdCA9IHByb3BzW2tleV0gPSB7IGRlZmF1bHQ6IGRlZmF1bHRzW2tleV0gfTtcbiAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIHdhcm4kMShgcHJvcHMgZGVmYXVsdCBrZXkgXCIke2tleX1cIiBoYXMgbm8gY29ycmVzcG9uZGluZyBkZWNsYXJhdGlvbi5gKTtcbiAgICB9XG4gICAgaWYgKG9wdCAmJiBkZWZhdWx0c1tgX19za2lwXyR7a2V5fWBdKSB7XG4gICAgICBvcHQuc2tpcEZhY3RvcnkgPSB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcHJvcHM7XG59XG5mdW5jdGlvbiBtZXJnZU1vZGVscyhhLCBiKSB7XG4gIGlmICghYSB8fCAhYikgcmV0dXJuIGEgfHwgYjtcbiAgaWYgKGlzQXJyYXkoYSkgJiYgaXNBcnJheShiKSkgcmV0dXJuIGEuY29uY2F0KGIpO1xuICByZXR1cm4gZXh0ZW5kKHt9LCBub3JtYWxpemVQcm9wc09yRW1pdHMoYSksIG5vcm1hbGl6ZVByb3BzT3JFbWl0cyhiKSk7XG59XG5mdW5jdGlvbiBjcmVhdGVQcm9wc1Jlc3RQcm94eShwcm9wcywgZXhjbHVkZWRLZXlzKSB7XG4gIGNvbnN0IHJldCA9IHt9O1xuICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgIGlmICghZXhjbHVkZWRLZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZXQsIGtleSwge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6ICgpID0+IHByb3BzW2tleV1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmV0O1xufVxuZnVuY3Rpb24gd2l0aEFzeW5jQ29udGV4dChnZXRBd2FpdGFibGUpIHtcbiAgY29uc3QgY3R4ID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFjdHgpIHtcbiAgICB3YXJuJDEoXG4gICAgICBgd2l0aEFzeW5jQ29udGV4dCBjYWxsZWQgd2l0aG91dCBhY3RpdmUgY3VycmVudCBpbnN0YW5jZS4gVGhpcyBpcyBsaWtlbHkgYSBidWcuYFxuICAgICk7XG4gIH1cbiAgbGV0IGF3YWl0YWJsZSA9IGdldEF3YWl0YWJsZSgpO1xuICB1bnNldEN1cnJlbnRJbnN0YW5jZSgpO1xuICBpZiAoaXNQcm9taXNlKGF3YWl0YWJsZSkpIHtcbiAgICBhd2FpdGFibGUgPSBhd2FpdGFibGUuY2F0Y2goKGUpID0+IHtcbiAgICAgIHNldEN1cnJlbnRJbnN0YW5jZShjdHgpO1xuICAgICAgdGhyb3cgZTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gW2F3YWl0YWJsZSwgKCkgPT4gc2V0Q3VycmVudEluc3RhbmNlKGN0eCldO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVEdXBsaWNhdGVDaGVja2VyKCkge1xuICBjb25zdCBjYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICByZXR1cm4gKHR5cGUsIGtleSkgPT4ge1xuICAgIGlmIChjYWNoZVtrZXldKSB7XG4gICAgICB3YXJuJDEoYCR7dHlwZX0gcHJvcGVydHkgXCIke2tleX1cIiBpcyBhbHJlYWR5IGRlZmluZWQgaW4gJHtjYWNoZVtrZXldfS5gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FjaGVba2V5XSA9IHR5cGU7XG4gICAgfVxuICB9O1xufVxubGV0IHNob3VsZENhY2hlQWNjZXNzID0gdHJ1ZTtcbmZ1bmN0aW9uIGFwcGx5T3B0aW9ucyhpbnN0YW5jZSkge1xuICBjb25zdCBvcHRpb25zID0gcmVzb2x2ZU1lcmdlZE9wdGlvbnMoaW5zdGFuY2UpO1xuICBjb25zdCBwdWJsaWNUaGlzID0gaW5zdGFuY2UucHJveHk7XG4gIGNvbnN0IGN0eCA9IGluc3RhbmNlLmN0eDtcbiAgc2hvdWxkQ2FjaGVBY2Nlc3MgPSBmYWxzZTtcbiAgaWYgKG9wdGlvbnMuYmVmb3JlQ3JlYXRlKSB7XG4gICAgY2FsbEhvb2sob3B0aW9ucy5iZWZvcmVDcmVhdGUsIGluc3RhbmNlLCBcImJjXCIpO1xuICB9XG4gIGNvbnN0IHtcbiAgICAvLyBzdGF0ZVxuICAgIGRhdGE6IGRhdGFPcHRpb25zLFxuICAgIGNvbXB1dGVkOiBjb21wdXRlZE9wdGlvbnMsXG4gICAgbWV0aG9kcyxcbiAgICB3YXRjaDogd2F0Y2hPcHRpb25zLFxuICAgIHByb3ZpZGU6IHByb3ZpZGVPcHRpb25zLFxuICAgIGluamVjdDogaW5qZWN0T3B0aW9ucyxcbiAgICAvLyBsaWZlY3ljbGVcbiAgICBjcmVhdGVkLFxuICAgIGJlZm9yZU1vdW50LFxuICAgIG1vdW50ZWQsXG4gICAgYmVmb3JlVXBkYXRlLFxuICAgIHVwZGF0ZWQsXG4gICAgYWN0aXZhdGVkLFxuICAgIGRlYWN0aXZhdGVkLFxuICAgIGJlZm9yZURlc3Ryb3ksXG4gICAgYmVmb3JlVW5tb3VudCxcbiAgICBkZXN0cm95ZWQsXG4gICAgdW5tb3VudGVkLFxuICAgIHJlbmRlcixcbiAgICByZW5kZXJUcmFja2VkLFxuICAgIHJlbmRlclRyaWdnZXJlZCxcbiAgICBlcnJvckNhcHR1cmVkLFxuICAgIHNlcnZlclByZWZldGNoLFxuICAgIC8vIHB1YmxpYyBBUElcbiAgICBleHBvc2UsXG4gICAgaW5oZXJpdEF0dHJzLFxuICAgIC8vIGFzc2V0c1xuICAgIGNvbXBvbmVudHMsXG4gICAgZGlyZWN0aXZlcyxcbiAgICBmaWx0ZXJzXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gY3JlYXRlRHVwbGljYXRlQ2hlY2tlcigpIDogbnVsbDtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBjb25zdCBbcHJvcHNPcHRpb25zXSA9IGluc3RhbmNlLnByb3BzT3B0aW9ucztcbiAgICBpZiAocHJvcHNPcHRpb25zKSB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wc09wdGlvbnMpIHtcbiAgICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiUHJvcHNcIiAvKiBQUk9QUyAqLywga2V5KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGluamVjdE9wdGlvbnMpIHtcbiAgICByZXNvbHZlSW5qZWN0aW9ucyhpbmplY3RPcHRpb25zLCBjdHgsIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyk7XG4gIH1cbiAgaWYgKG1ldGhvZHMpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBtZXRob2RzKSB7XG4gICAgICBjb25zdCBtZXRob2RIYW5kbGVyID0gbWV0aG9kc1trZXldO1xuICAgICAgaWYgKGlzRnVuY3Rpb24obWV0aG9kSGFuZGxlcikpIHtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgICAgIHZhbHVlOiBtZXRob2RIYW5kbGVyLmJpbmQocHVibGljVGhpcyksXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdHhba2V5XSA9IG1ldGhvZEhhbmRsZXIuYmluZChwdWJsaWNUaGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyhcIk1ldGhvZHNcIiAvKiBNRVRIT0RTICovLCBrZXkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgd2FybiQxKFxuICAgICAgICAgIGBNZXRob2QgXCIke2tleX1cIiBoYXMgdHlwZSBcIiR7dHlwZW9mIG1ldGhvZEhhbmRsZXJ9XCIgaW4gdGhlIGNvbXBvbmVudCBkZWZpbml0aW9uLiBEaWQgeW91IHJlZmVyZW5jZSB0aGUgZnVuY3Rpb24gY29ycmVjdGx5P2BcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGRhdGFPcHRpb25zKSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWlzRnVuY3Rpb24oZGF0YU9wdGlvbnMpKSB7XG4gICAgICB3YXJuJDEoXG4gICAgICAgIGBUaGUgZGF0YSBvcHRpb24gbXVzdCBiZSBhIGZ1bmN0aW9uLiBQbGFpbiBvYmplY3QgdXNhZ2UgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZC5gXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBkYXRhID0gZGF0YU9wdGlvbnMuY2FsbChwdWJsaWNUaGlzLCBwdWJsaWNUaGlzKTtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBpc1Byb21pc2UoZGF0YSkpIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYGRhdGEoKSByZXR1cm5lZCBhIFByb21pc2UgLSBub3RlIGRhdGEoKSBjYW5ub3QgYmUgYXN5bmM7IElmIHlvdSBpbnRlbmQgdG8gcGVyZm9ybSBkYXRhIGZldGNoaW5nIGJlZm9yZSBjb21wb25lbnQgcmVuZGVycywgdXNlIGFzeW5jIHNldHVwKCkgKyA8U3VzcGVuc2U+LmBcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICghaXNPYmplY3QoZGF0YSkpIHtcbiAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybiQxKGBkYXRhKCkgc2hvdWxkIHJldHVybiBhbiBvYmplY3QuYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGluc3RhbmNlLmRhdGEgPSByZWFjdGl2ZShkYXRhKTtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMoXCJEYXRhXCIgLyogREFUQSAqLywga2V5KTtcbiAgICAgICAgICBpZiAoIWlzUmVzZXJ2ZWRQcmVmaXgoa2V5WzBdKSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwga2V5LCB7XG4gICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgZ2V0OiAoKSA9PiBkYXRhW2tleV0sXG4gICAgICAgICAgICAgIHNldDogTk9PUFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHNob3VsZENhY2hlQWNjZXNzID0gdHJ1ZTtcbiAgaWYgKGNvbXB1dGVkT3B0aW9ucykge1xuICAgIGZvciAoY29uc3Qga2V5IGluIGNvbXB1dGVkT3B0aW9ucykge1xuICAgICAgY29uc3Qgb3B0ID0gY29tcHV0ZWRPcHRpb25zW2tleV07XG4gICAgICBjb25zdCBnZXQgPSBpc0Z1bmN0aW9uKG9wdCkgPyBvcHQuYmluZChwdWJsaWNUaGlzLCBwdWJsaWNUaGlzKSA6IGlzRnVuY3Rpb24ob3B0LmdldCkgPyBvcHQuZ2V0LmJpbmQocHVibGljVGhpcywgcHVibGljVGhpcykgOiBOT09QO1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgZ2V0ID09PSBOT09QKSB7XG4gICAgICAgIHdhcm4kMShgQ29tcHV0ZWQgcHJvcGVydHkgXCIke2tleX1cIiBoYXMgbm8gZ2V0dGVyLmApO1xuICAgICAgfVxuICAgICAgY29uc3Qgc2V0ID0gIWlzRnVuY3Rpb24ob3B0KSAmJiBpc0Z1bmN0aW9uKG9wdC5zZXQpID8gb3B0LnNldC5iaW5kKHB1YmxpY1RoaXMpIDogISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/ICgpID0+IHtcbiAgICAgICAgd2FybiQxKFxuICAgICAgICAgIGBXcml0ZSBvcGVyYXRpb24gZmFpbGVkOiBjb21wdXRlZCBwcm9wZXJ0eSBcIiR7a2V5fVwiIGlzIHJlYWRvbmx5LmBcbiAgICAgICAgKTtcbiAgICAgIH0gOiBOT09QO1xuICAgICAgY29uc3QgYyA9IGNvbXB1dGVkKHtcbiAgICAgICAgZ2V0LFxuICAgICAgICBzZXRcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwga2V5LCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0OiAoKSA9PiBjLnZhbHVlLFxuICAgICAgICBzZXQ6ICh2KSA9PiBjLnZhbHVlID0gdlxuICAgICAgfSk7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMoXCJDb21wdXRlZFwiIC8qIENPTVBVVEVEICovLCBrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAod2F0Y2hPcHRpb25zKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gd2F0Y2hPcHRpb25zKSB7XG4gICAgICBjcmVhdGVXYXRjaGVyKHdhdGNoT3B0aW9uc1trZXldLCBjdHgsIHB1YmxpY1RoaXMsIGtleSk7XG4gICAgfVxuICB9XG4gIGlmIChwcm92aWRlT3B0aW9ucykge1xuICAgIGNvbnN0IHByb3ZpZGVzID0gaXNGdW5jdGlvbihwcm92aWRlT3B0aW9ucykgPyBwcm92aWRlT3B0aW9ucy5jYWxsKHB1YmxpY1RoaXMpIDogcHJvdmlkZU9wdGlvbnM7XG4gICAgUmVmbGVjdC5vd25LZXlzKHByb3ZpZGVzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIHByb3ZpZGUoa2V5LCBwcm92aWRlc1trZXldKTtcbiAgICB9KTtcbiAgfVxuICBpZiAoY3JlYXRlZCkge1xuICAgIGNhbGxIb29rKGNyZWF0ZWQsIGluc3RhbmNlLCBcImNcIik7XG4gIH1cbiAgZnVuY3Rpb24gcmVnaXN0ZXJMaWZlY3ljbGVIb29rKHJlZ2lzdGVyLCBob29rKSB7XG4gICAgaWYgKGlzQXJyYXkoaG9vaykpIHtcbiAgICAgIGhvb2suZm9yRWFjaCgoX2hvb2spID0+IHJlZ2lzdGVyKF9ob29rLmJpbmQocHVibGljVGhpcykpKTtcbiAgICB9IGVsc2UgaWYgKGhvb2spIHtcbiAgICAgIHJlZ2lzdGVyKGhvb2suYmluZChwdWJsaWNUaGlzKSk7XG4gICAgfVxuICB9XG4gIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbkJlZm9yZU1vdW50LCBiZWZvcmVNb3VudCk7XG4gIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbk1vdW50ZWQsIG1vdW50ZWQpO1xuICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25CZWZvcmVVcGRhdGUsIGJlZm9yZVVwZGF0ZSk7XG4gIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvblVwZGF0ZWQsIHVwZGF0ZWQpO1xuICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25BY3RpdmF0ZWQsIGFjdGl2YXRlZCk7XG4gIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbkRlYWN0aXZhdGVkLCBkZWFjdGl2YXRlZCk7XG4gIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbkVycm9yQ2FwdHVyZWQsIGVycm9yQ2FwdHVyZWQpO1xuICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25SZW5kZXJUcmFja2VkLCByZW5kZXJUcmFja2VkKTtcbiAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uUmVuZGVyVHJpZ2dlcmVkLCByZW5kZXJUcmlnZ2VyZWQpO1xuICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25CZWZvcmVVbm1vdW50LCBiZWZvcmVVbm1vdW50KTtcbiAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uVW5tb3VudGVkLCB1bm1vdW50ZWQpO1xuICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25TZXJ2ZXJQcmVmZXRjaCwgc2VydmVyUHJlZmV0Y2gpO1xuICBpZiAoaXNBcnJheShleHBvc2UpKSB7XG4gICAgaWYgKGV4cG9zZS5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGV4cG9zZWQgPSBpbnN0YW5jZS5leHBvc2VkIHx8IChpbnN0YW5jZS5leHBvc2VkID0ge30pO1xuICAgICAgZXhwb3NlLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3NlZCwga2V5LCB7XG4gICAgICAgICAgZ2V0OiAoKSA9PiBwdWJsaWNUaGlzW2tleV0sXG4gICAgICAgICAgc2V0OiAodmFsKSA9PiBwdWJsaWNUaGlzW2tleV0gPSB2YWxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKCFpbnN0YW5jZS5leHBvc2VkKSB7XG4gICAgICBpbnN0YW5jZS5leHBvc2VkID0ge307XG4gICAgfVxuICB9XG4gIGlmIChyZW5kZXIgJiYgaW5zdGFuY2UucmVuZGVyID09PSBOT09QKSB7XG4gICAgaW5zdGFuY2UucmVuZGVyID0gcmVuZGVyO1xuICB9XG4gIGlmIChpbmhlcml0QXR0cnMgIT0gbnVsbCkge1xuICAgIGluc3RhbmNlLmluaGVyaXRBdHRycyA9IGluaGVyaXRBdHRycztcbiAgfVxuICBpZiAoY29tcG9uZW50cykgaW5zdGFuY2UuY29tcG9uZW50cyA9IGNvbXBvbmVudHM7XG4gIGlmIChkaXJlY3RpdmVzKSBpbnN0YW5jZS5kaXJlY3RpdmVzID0gZGlyZWN0aXZlcztcbiAgaWYgKHNlcnZlclByZWZldGNoKSB7XG4gICAgbWFya0FzeW5jQm91bmRhcnkoaW5zdGFuY2UpO1xuICB9XG59XG5mdW5jdGlvbiByZXNvbHZlSW5qZWN0aW9ucyhpbmplY3RPcHRpb25zLCBjdHgsIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyA9IE5PT1ApIHtcbiAgaWYgKGlzQXJyYXkoaW5qZWN0T3B0aW9ucykpIHtcbiAgICBpbmplY3RPcHRpb25zID0gbm9ybWFsaXplSW5qZWN0KGluamVjdE9wdGlvbnMpO1xuICB9XG4gIGZvciAoY29uc3Qga2V5IGluIGluamVjdE9wdGlvbnMpIHtcbiAgICBjb25zdCBvcHQgPSBpbmplY3RPcHRpb25zW2tleV07XG4gICAgbGV0IGluamVjdGVkO1xuICAgIGlmIChpc09iamVjdChvcHQpKSB7XG4gICAgICBpZiAoXCJkZWZhdWx0XCIgaW4gb3B0KSB7XG4gICAgICAgIGluamVjdGVkID0gaW5qZWN0KFxuICAgICAgICAgIG9wdC5mcm9tIHx8IGtleSxcbiAgICAgICAgICBvcHQuZGVmYXVsdCxcbiAgICAgICAgICB0cnVlXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbmplY3RlZCA9IGluamVjdChvcHQuZnJvbSB8fCBrZXkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpbmplY3RlZCA9IGluamVjdChvcHQpO1xuICAgIH1cbiAgICBpZiAoaXNSZWYoaW5qZWN0ZWQpKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6ICgpID0+IGluamVjdGVkLnZhbHVlLFxuICAgICAgICBzZXQ6ICh2KSA9PiBpbmplY3RlZC52YWx1ZSA9IHZcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdHhba2V5XSA9IGluamVjdGVkO1xuICAgIH1cbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiSW5qZWN0XCIgLyogSU5KRUNUICovLCBrZXkpO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gY2FsbEhvb2soaG9vaywgaW5zdGFuY2UsIHR5cGUpIHtcbiAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoXG4gICAgaXNBcnJheShob29rKSA/IGhvb2subWFwKChoKSA9PiBoLmJpbmQoaW5zdGFuY2UucHJveHkpKSA6IGhvb2suYmluZChpbnN0YW5jZS5wcm94eSksXG4gICAgaW5zdGFuY2UsXG4gICAgdHlwZVxuICApO1xufVxuZnVuY3Rpb24gY3JlYXRlV2F0Y2hlcihyYXcsIGN0eCwgcHVibGljVGhpcywga2V5KSB7XG4gIGxldCBnZXR0ZXIgPSBrZXkuaW5jbHVkZXMoXCIuXCIpID8gY3JlYXRlUGF0aEdldHRlcihwdWJsaWNUaGlzLCBrZXkpIDogKCkgPT4gcHVibGljVGhpc1trZXldO1xuICBpZiAoaXNTdHJpbmcocmF3KSkge1xuICAgIGNvbnN0IGhhbmRsZXIgPSBjdHhbcmF3XTtcbiAgICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyKSkge1xuICAgICAge1xuICAgICAgICB3YXRjaChnZXR0ZXIsIGhhbmRsZXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgd2FybiQxKGBJbnZhbGlkIHdhdGNoIGhhbmRsZXIgc3BlY2lmaWVkIGJ5IGtleSBcIiR7cmF3fVwiYCwgaGFuZGxlcik7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24ocmF3KSkge1xuICAgIHtcbiAgICAgIHdhdGNoKGdldHRlciwgcmF3LmJpbmQocHVibGljVGhpcykpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdChyYXcpKSB7XG4gICAgaWYgKGlzQXJyYXkocmF3KSkge1xuICAgICAgcmF3LmZvckVhY2goKHIpID0+IGNyZWF0ZVdhdGNoZXIociwgY3R4LCBwdWJsaWNUaGlzLCBrZXkpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaGFuZGxlciA9IGlzRnVuY3Rpb24ocmF3LmhhbmRsZXIpID8gcmF3LmhhbmRsZXIuYmluZChwdWJsaWNUaGlzKSA6IGN0eFtyYXcuaGFuZGxlcl07XG4gICAgICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyKSkge1xuICAgICAgICB3YXRjaChnZXR0ZXIsIGhhbmRsZXIsIHJhdyk7XG4gICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgd2FybiQxKGBJbnZhbGlkIHdhdGNoIGhhbmRsZXIgc3BlY2lmaWVkIGJ5IGtleSBcIiR7cmF3LmhhbmRsZXJ9XCJgLCBoYW5kbGVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm4kMShgSW52YWxpZCB3YXRjaCBvcHRpb246IFwiJHtrZXl9XCJgLCByYXcpO1xuICB9XG59XG5mdW5jdGlvbiByZXNvbHZlTWVyZ2VkT3B0aW9ucyhpbnN0YW5jZSkge1xuICBjb25zdCBiYXNlID0gaW5zdGFuY2UudHlwZTtcbiAgY29uc3QgeyBtaXhpbnMsIGV4dGVuZHM6IGV4dGVuZHNPcHRpb25zIH0gPSBiYXNlO1xuICBjb25zdCB7XG4gICAgbWl4aW5zOiBnbG9iYWxNaXhpbnMsXG4gICAgb3B0aW9uc0NhY2hlOiBjYWNoZSxcbiAgICBjb25maWc6IHsgb3B0aW9uTWVyZ2VTdHJhdGVnaWVzIH1cbiAgfSA9IGluc3RhbmNlLmFwcENvbnRleHQ7XG4gIGNvbnN0IGNhY2hlZCA9IGNhY2hlLmdldChiYXNlKTtcbiAgbGV0IHJlc29sdmVkO1xuICBpZiAoY2FjaGVkKSB7XG4gICAgcmVzb2x2ZWQgPSBjYWNoZWQ7XG4gIH0gZWxzZSBpZiAoIWdsb2JhbE1peGlucy5sZW5ndGggJiYgIW1peGlucyAmJiAhZXh0ZW5kc09wdGlvbnMpIHtcbiAgICB7XG4gICAgICByZXNvbHZlZCA9IGJhc2U7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJlc29sdmVkID0ge307XG4gICAgaWYgKGdsb2JhbE1peGlucy5sZW5ndGgpIHtcbiAgICAgIGdsb2JhbE1peGlucy5mb3JFYWNoKFxuICAgICAgICAobSkgPT4gbWVyZ2VPcHRpb25zKHJlc29sdmVkLCBtLCBvcHRpb25NZXJnZVN0cmF0ZWdpZXMsIHRydWUpXG4gICAgICApO1xuICAgIH1cbiAgICBtZXJnZU9wdGlvbnMocmVzb2x2ZWQsIGJhc2UsIG9wdGlvbk1lcmdlU3RyYXRlZ2llcyk7XG4gIH1cbiAgaWYgKGlzT2JqZWN0KGJhc2UpKSB7XG4gICAgY2FjaGUuc2V0KGJhc2UsIHJlc29sdmVkKTtcbiAgfVxuICByZXR1cm4gcmVzb2x2ZWQ7XG59XG5mdW5jdGlvbiBtZXJnZU9wdGlvbnModG8sIGZyb20sIHN0cmF0cywgYXNNaXhpbiA9IGZhbHNlKSB7XG4gIGNvbnN0IHsgbWl4aW5zLCBleHRlbmRzOiBleHRlbmRzT3B0aW9ucyB9ID0gZnJvbTtcbiAgaWYgKGV4dGVuZHNPcHRpb25zKSB7XG4gICAgbWVyZ2VPcHRpb25zKHRvLCBleHRlbmRzT3B0aW9ucywgc3RyYXRzLCB0cnVlKTtcbiAgfVxuICBpZiAobWl4aW5zKSB7XG4gICAgbWl4aW5zLmZvckVhY2goXG4gICAgICAobSkgPT4gbWVyZ2VPcHRpb25zKHRvLCBtLCBzdHJhdHMsIHRydWUpXG4gICAgKTtcbiAgfVxuICBmb3IgKGNvbnN0IGtleSBpbiBmcm9tKSB7XG4gICAgaWYgKGFzTWl4aW4gJiYga2V5ID09PSBcImV4cG9zZVwiKSB7XG4gICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4kMShcbiAgICAgICAgYFwiZXhwb3NlXCIgb3B0aW9uIGlzIGlnbm9yZWQgd2hlbiBkZWNsYXJlZCBpbiBtaXhpbnMgb3IgZXh0ZW5kcy4gSXQgc2hvdWxkIG9ubHkgYmUgZGVjbGFyZWQgaW4gdGhlIGJhc2UgY29tcG9uZW50IGl0c2VsZi5gXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzdHJhdCA9IGludGVybmFsT3B0aW9uTWVyZ2VTdHJhdHNba2V5XSB8fCBzdHJhdHMgJiYgc3RyYXRzW2tleV07XG4gICAgICB0b1trZXldID0gc3RyYXQgPyBzdHJhdCh0b1trZXldLCBmcm9tW2tleV0pIDogZnJvbVtrZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdG87XG59XG5jb25zdCBpbnRlcm5hbE9wdGlvbk1lcmdlU3RyYXRzID0ge1xuICBkYXRhOiBtZXJnZURhdGFGbixcbiAgcHJvcHM6IG1lcmdlRW1pdHNPclByb3BzT3B0aW9ucyxcbiAgZW1pdHM6IG1lcmdlRW1pdHNPclByb3BzT3B0aW9ucyxcbiAgLy8gb2JqZWN0c1xuICBtZXRob2RzOiBtZXJnZU9iamVjdE9wdGlvbnMsXG4gIGNvbXB1dGVkOiBtZXJnZU9iamVjdE9wdGlvbnMsXG4gIC8vIGxpZmVjeWNsZVxuICBiZWZvcmVDcmVhdGU6IG1lcmdlQXNBcnJheSxcbiAgY3JlYXRlZDogbWVyZ2VBc0FycmF5LFxuICBiZWZvcmVNb3VudDogbWVyZ2VBc0FycmF5LFxuICBtb3VudGVkOiBtZXJnZUFzQXJyYXksXG4gIGJlZm9yZVVwZGF0ZTogbWVyZ2VBc0FycmF5LFxuICB1cGRhdGVkOiBtZXJnZUFzQXJyYXksXG4gIGJlZm9yZURlc3Ryb3k6IG1lcmdlQXNBcnJheSxcbiAgYmVmb3JlVW5tb3VudDogbWVyZ2VBc0FycmF5LFxuICBkZXN0cm95ZWQ6IG1lcmdlQXNBcnJheSxcbiAgdW5tb3VudGVkOiBtZXJnZUFzQXJyYXksXG4gIGFjdGl2YXRlZDogbWVyZ2VBc0FycmF5LFxuICBkZWFjdGl2YXRlZDogbWVyZ2VBc0FycmF5LFxuICBlcnJvckNhcHR1cmVkOiBtZXJnZUFzQXJyYXksXG4gIHNlcnZlclByZWZldGNoOiBtZXJnZUFzQXJyYXksXG4gIC8vIGFzc2V0c1xuICBjb21wb25lbnRzOiBtZXJnZU9iamVjdE9wdGlvbnMsXG4gIGRpcmVjdGl2ZXM6IG1lcmdlT2JqZWN0T3B0aW9ucyxcbiAgLy8gd2F0Y2hcbiAgd2F0Y2g6IG1lcmdlV2F0Y2hPcHRpb25zLFxuICAvLyBwcm92aWRlIC8gaW5qZWN0XG4gIHByb3ZpZGU6IG1lcmdlRGF0YUZuLFxuICBpbmplY3Q6IG1lcmdlSW5qZWN0XG59O1xuZnVuY3Rpb24gbWVyZ2VEYXRhRm4odG8sIGZyb20pIHtcbiAgaWYgKCFmcm9tKSB7XG4gICAgcmV0dXJuIHRvO1xuICB9XG4gIGlmICghdG8pIHtcbiAgICByZXR1cm4gZnJvbTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkRGF0YUZuKCkge1xuICAgIHJldHVybiAoZXh0ZW5kKShcbiAgICAgIGlzRnVuY3Rpb24odG8pID8gdG8uY2FsbCh0aGlzLCB0aGlzKSA6IHRvLFxuICAgICAgaXNGdW5jdGlvbihmcm9tKSA/IGZyb20uY2FsbCh0aGlzLCB0aGlzKSA6IGZyb21cbiAgICApO1xuICB9O1xufVxuZnVuY3Rpb24gbWVyZ2VJbmplY3QodG8sIGZyb20pIHtcbiAgcmV0dXJuIG1lcmdlT2JqZWN0T3B0aW9ucyhub3JtYWxpemVJbmplY3QodG8pLCBub3JtYWxpemVJbmplY3QoZnJvbSkpO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplSW5qZWN0KHJhdykge1xuICBpZiAoaXNBcnJheShyYXcpKSB7XG4gICAgY29uc3QgcmVzID0ge307XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYXcubGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlc1tyYXdbaV1dID0gcmF3W2ldO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG4gIHJldHVybiByYXc7XG59XG5mdW5jdGlvbiBtZXJnZUFzQXJyYXkodG8sIGZyb20pIHtcbiAgcmV0dXJuIHRvID8gWy4uLm5ldyBTZXQoW10uY29uY2F0KHRvLCBmcm9tKSldIDogZnJvbTtcbn1cbmZ1bmN0aW9uIG1lcmdlT2JqZWN0T3B0aW9ucyh0bywgZnJvbSkge1xuICByZXR1cm4gdG8gPyBleHRlbmQoLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCksIHRvLCBmcm9tKSA6IGZyb207XG59XG5mdW5jdGlvbiBtZXJnZUVtaXRzT3JQcm9wc09wdGlvbnModG8sIGZyb20pIHtcbiAgaWYgKHRvKSB7XG4gICAgaWYgKGlzQXJyYXkodG8pICYmIGlzQXJyYXkoZnJvbSkpIHtcbiAgICAgIHJldHVybiBbLi4uLyogQF9fUFVSRV9fICovIG5ldyBTZXQoWy4uLnRvLCAuLi5mcm9tXSldO1xuICAgIH1cbiAgICByZXR1cm4gZXh0ZW5kKFxuICAgICAgLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICBub3JtYWxpemVQcm9wc09yRW1pdHModG8pLFxuICAgICAgbm9ybWFsaXplUHJvcHNPckVtaXRzKGZyb20gIT0gbnVsbCA/IGZyb20gOiB7fSlcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmcm9tO1xuICB9XG59XG5mdW5jdGlvbiBtZXJnZVdhdGNoT3B0aW9ucyh0bywgZnJvbSkge1xuICBpZiAoIXRvKSByZXR1cm4gZnJvbTtcbiAgaWYgKCFmcm9tKSByZXR1cm4gdG87XG4gIGNvbnN0IG1lcmdlZCA9IGV4dGVuZCgvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKSwgdG8pO1xuICBmb3IgKGNvbnN0IGtleSBpbiBmcm9tKSB7XG4gICAgbWVyZ2VkW2tleV0gPSBtZXJnZUFzQXJyYXkodG9ba2V5XSwgZnJvbVtrZXldKTtcbiAgfVxuICByZXR1cm4gbWVyZ2VkO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBcHBDb250ZXh0KCkge1xuICByZXR1cm4ge1xuICAgIGFwcDogbnVsbCxcbiAgICBjb25maWc6IHtcbiAgICAgIGlzTmF0aXZlVGFnOiBOTyxcbiAgICAgIHBlcmZvcm1hbmNlOiBmYWxzZSxcbiAgICAgIGdsb2JhbFByb3BlcnRpZXM6IHt9LFxuICAgICAgb3B0aW9uTWVyZ2VTdHJhdGVnaWVzOiB7fSxcbiAgICAgIGVycm9ySGFuZGxlcjogdm9pZCAwLFxuICAgICAgd2FybkhhbmRsZXI6IHZvaWQgMCxcbiAgICAgIGNvbXBpbGVyT3B0aW9uczoge31cbiAgICB9LFxuICAgIG1peGluczogW10sXG4gICAgY29tcG9uZW50czoge30sXG4gICAgZGlyZWN0aXZlczoge30sXG4gICAgcHJvdmlkZXM6IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpLFxuICAgIG9wdGlvbnNDYWNoZTogLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCksXG4gICAgcHJvcHNDYWNoZTogLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCksXG4gICAgZW1pdHNDYWNoZTogLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKClcbiAgfTtcbn1cbmxldCB1aWQkMSA9IDA7XG5mdW5jdGlvbiBjcmVhdGVBcHBBUEkocmVuZGVyLCBoeWRyYXRlKSB7XG4gIHJldHVybiBmdW5jdGlvbiBjcmVhdGVBcHAocm9vdENvbXBvbmVudCwgcm9vdFByb3BzID0gbnVsbCkge1xuICAgIGlmICghaXNGdW5jdGlvbihyb290Q29tcG9uZW50KSkge1xuICAgICAgcm9vdENvbXBvbmVudCA9IGV4dGVuZCh7fSwgcm9vdENvbXBvbmVudCk7XG4gICAgfVxuICAgIGlmIChyb290UHJvcHMgIT0gbnVsbCAmJiAhaXNPYmplY3Qocm9vdFByb3BzKSkge1xuICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuJDEoYHJvb3QgcHJvcHMgcGFzc2VkIHRvIGFwcC5tb3VudCgpIG11c3QgYmUgYW4gb2JqZWN0LmApO1xuICAgICAgcm9vdFByb3BzID0gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZUFwcENvbnRleHQoKTtcbiAgICBjb25zdCBpbnN0YWxsZWRQbHVnaW5zID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrU2V0KCk7XG4gICAgY29uc3QgcGx1Z2luQ2xlYW51cEZucyA9IFtdO1xuICAgIGxldCBpc01vdW50ZWQgPSBmYWxzZTtcbiAgICBjb25zdCBhcHAgPSBjb250ZXh0LmFwcCA9IHtcbiAgICAgIF91aWQ6IHVpZCQxKyssXG4gICAgICBfY29tcG9uZW50OiByb290Q29tcG9uZW50LFxuICAgICAgX3Byb3BzOiByb290UHJvcHMsXG4gICAgICBfY29udGFpbmVyOiBudWxsLFxuICAgICAgX2NvbnRleHQ6IGNvbnRleHQsXG4gICAgICBfaW5zdGFuY2U6IG51bGwsXG4gICAgICB2ZXJzaW9uLFxuICAgICAgZ2V0IGNvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuY29uZmlnO1xuICAgICAgfSxcbiAgICAgIHNldCBjb25maWcodikge1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgIGBhcHAuY29uZmlnIGNhbm5vdCBiZSByZXBsYWNlZC4gTW9kaWZ5IGluZGl2aWR1YWwgb3B0aW9ucyBpbnN0ZWFkLmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdXNlKHBsdWdpbiwgLi4ub3B0aW9ucykge1xuICAgICAgICBpZiAoaW5zdGFsbGVkUGx1Z2lucy5oYXMocGx1Z2luKSkge1xuICAgICAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybiQxKGBQbHVnaW4gaGFzIGFscmVhZHkgYmVlbiBhcHBsaWVkIHRvIHRhcmdldCBhcHAuYCk7XG4gICAgICAgIH0gZWxzZSBpZiAocGx1Z2luICYmIGlzRnVuY3Rpb24ocGx1Z2luLmluc3RhbGwpKSB7XG4gICAgICAgICAgaW5zdGFsbGVkUGx1Z2lucy5hZGQocGx1Z2luKTtcbiAgICAgICAgICBwbHVnaW4uaW5zdGFsbChhcHAsIC4uLm9wdGlvbnMpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24ocGx1Z2luKSkge1xuICAgICAgICAgIGluc3RhbGxlZFBsdWdpbnMuYWRkKHBsdWdpbik7XG4gICAgICAgICAgcGx1Z2luKGFwcCwgLi4ub3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgIGBBIHBsdWdpbiBtdXN0IGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGFuIG9iamVjdCB3aXRoIGFuIFwiaW5zdGFsbFwiIGZ1bmN0aW9uLmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcHA7XG4gICAgICB9LFxuICAgICAgbWl4aW4obWl4aW4pIHtcbiAgICAgICAgaWYgKF9fVlVFX09QVElPTlNfQVBJX18pIHtcbiAgICAgICAgICBpZiAoIWNvbnRleHQubWl4aW5zLmluY2x1ZGVzKG1peGluKSkge1xuICAgICAgICAgICAgY29udGV4dC5taXhpbnMucHVzaChtaXhpbik7XG4gICAgICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICAgIFwiTWl4aW4gaGFzIGFscmVhZHkgYmVlbiBhcHBsaWVkIHRvIHRhcmdldCBhcHBcIiArIChtaXhpbi5uYW1lID8gYDogJHttaXhpbi5uYW1lfWAgOiBcIlwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHdhcm4kMShcIk1peGlucyBhcmUgb25seSBhdmFpbGFibGUgaW4gYnVpbGRzIHN1cHBvcnRpbmcgT3B0aW9ucyBBUElcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFwcDtcbiAgICAgIH0sXG4gICAgICBjb21wb25lbnQobmFtZSwgY29tcG9uZW50KSB7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgdmFsaWRhdGVDb21wb25lbnROYW1lKG5hbWUsIGNvbnRleHQuY29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNvbXBvbmVudCkge1xuICAgICAgICAgIHJldHVybiBjb250ZXh0LmNvbXBvbmVudHNbbmFtZV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgY29udGV4dC5jb21wb25lbnRzW25hbWVdKSB7XG4gICAgICAgICAgd2FybiQxKGBDb21wb25lbnQgXCIke25hbWV9XCIgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkIGluIHRhcmdldCBhcHAuYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5jb21wb25lbnRzW25hbWVdID0gY29tcG9uZW50O1xuICAgICAgICByZXR1cm4gYXBwO1xuICAgICAgfSxcbiAgICAgIGRpcmVjdGl2ZShuYW1lLCBkaXJlY3RpdmUpIHtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICB2YWxpZGF0ZURpcmVjdGl2ZU5hbWUobmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkaXJlY3RpdmUpIHtcbiAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXJlY3RpdmVzW25hbWVdO1xuICAgICAgICB9XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGNvbnRleHQuZGlyZWN0aXZlc1tuYW1lXSkge1xuICAgICAgICAgIHdhcm4kMShgRGlyZWN0aXZlIFwiJHtuYW1lfVwiIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCBpbiB0YXJnZXQgYXBwLmApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQuZGlyZWN0aXZlc1tuYW1lXSA9IGRpcmVjdGl2ZTtcbiAgICAgICAgcmV0dXJuIGFwcDtcbiAgICAgIH0sXG4gICAgICBtb3VudChyb290Q29udGFpbmVyLCBpc0h5ZHJhdGUsIG5hbWVzcGFjZSkge1xuICAgICAgICBpZiAoIWlzTW91bnRlZCkge1xuICAgICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHJvb3RDb250YWluZXIuX192dWVfYXBwX18pIHtcbiAgICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgICAgYFRoZXJlIGlzIGFscmVhZHkgYW4gYXBwIGluc3RhbmNlIG1vdW50ZWQgb24gdGhlIGhvc3QgY29udGFpbmVyLlxuIElmIHlvdSB3YW50IHRvIG1vdW50IGFub3RoZXIgYXBwIG9uIHRoZSBzYW1lIGhvc3QgY29udGFpbmVyLCB5b3UgbmVlZCB0byB1bm1vdW50IHRoZSBwcmV2aW91cyBhcHAgYnkgY2FsbGluZyBcXGBhcHAudW5tb3VudCgpXFxgIGZpcnN0LmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHZub2RlID0gYXBwLl9jZVZOb2RlIHx8IGNyZWF0ZVZOb2RlKHJvb3RDb21wb25lbnQsIHJvb3RQcm9wcyk7XG4gICAgICAgICAgdm5vZGUuYXBwQ29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgICAgaWYgKG5hbWVzcGFjZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgbmFtZXNwYWNlID0gXCJzdmdcIjtcbiAgICAgICAgICB9IGVsc2UgaWYgKG5hbWVzcGFjZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIG5hbWVzcGFjZSA9IHZvaWQgMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICAgIGNvbnRleHQucmVsb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBjbG9uZWQgPSBjbG9uZVZOb2RlKHZub2RlKTtcbiAgICAgICAgICAgICAgY2xvbmVkLmVsID0gbnVsbDtcbiAgICAgICAgICAgICAgcmVuZGVyKGNsb25lZCwgcm9vdENvbnRhaW5lciwgbmFtZXNwYWNlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc0h5ZHJhdGUgJiYgaHlkcmF0ZSkge1xuICAgICAgICAgICAgaHlkcmF0ZSh2bm9kZSwgcm9vdENvbnRhaW5lcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlbmRlcih2bm9kZSwgcm9vdENvbnRhaW5lciwgbmFtZXNwYWNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXNNb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgICBhcHAuX2NvbnRhaW5lciA9IHJvb3RDb250YWluZXI7XG4gICAgICAgICAgcm9vdENvbnRhaW5lci5fX3Z1ZV9hcHBfXyA9IGFwcDtcbiAgICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgICAgICAgIGFwcC5faW5zdGFuY2UgPSB2bm9kZS5jb21wb25lbnQ7XG4gICAgICAgICAgICBkZXZ0b29sc0luaXRBcHAoYXBwLCB2ZXJzaW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGdldENvbXBvbmVudFB1YmxpY0luc3RhbmNlKHZub2RlLmNvbXBvbmVudCk7XG4gICAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgIGBBcHAgaGFzIGFscmVhZHkgYmVlbiBtb3VudGVkLlxuSWYgeW91IHdhbnQgdG8gcmVtb3VudCB0aGUgc2FtZSBhcHAsIG1vdmUgeW91ciBhcHAgY3JlYXRpb24gbG9naWMgaW50byBhIGZhY3RvcnkgZnVuY3Rpb24gYW5kIGNyZWF0ZSBmcmVzaCBhcHAgaW5zdGFuY2VzIGZvciBlYWNoIG1vdW50IC0gZS5nLiBcXGBjb25zdCBjcmVhdGVNeUFwcCA9ICgpID0+IGNyZWF0ZUFwcChBcHApXFxgYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvblVubW91bnQoY2xlYW51cEZuKSB7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHR5cGVvZiBjbGVhbnVwRm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgIGBFeHBlY3RlZCBmdW5jdGlvbiBhcyBmaXJzdCBhcmd1bWVudCB0byBhcHAub25Vbm1vdW50KCksIGJ1dCBnb3QgJHt0eXBlb2YgY2xlYW51cEZufWBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHBsdWdpbkNsZWFudXBGbnMucHVzaChjbGVhbnVwRm4pO1xuICAgICAgfSxcbiAgICAgIHVubW91bnQoKSB7XG4gICAgICAgIGlmIChpc01vdW50ZWQpIHtcbiAgICAgICAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhcbiAgICAgICAgICAgIHBsdWdpbkNsZWFudXBGbnMsXG4gICAgICAgICAgICBhcHAuX2luc3RhbmNlLFxuICAgICAgICAgICAgMTZcbiAgICAgICAgICApO1xuICAgICAgICAgIHJlbmRlcihudWxsLCBhcHAuX2NvbnRhaW5lcik7XG4gICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICBhcHAuX2luc3RhbmNlID0gbnVsbDtcbiAgICAgICAgICAgIGRldnRvb2xzVW5tb3VudEFwcChhcHApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWxldGUgYXBwLl9jb250YWluZXIuX192dWVfYXBwX187XG4gICAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHdhcm4kMShgQ2Fubm90IHVubW91bnQgYW4gYXBwIHRoYXQgaXMgbm90IG1vdW50ZWQuYCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBwcm92aWRlKGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYga2V5IGluIGNvbnRleHQucHJvdmlkZXMpIHtcbiAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICBgQXBwIGFscmVhZHkgcHJvdmlkZXMgcHJvcGVydHkgd2l0aCBrZXkgXCIke1N0cmluZyhrZXkpfVwiLiBJdCB3aWxsIGJlIG92ZXJ3cml0dGVuIHdpdGggdGhlIG5ldyB2YWx1ZS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0LnByb3ZpZGVzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIGFwcDtcbiAgICAgIH0sXG4gICAgICBydW5XaXRoQ29udGV4dChmbikge1xuICAgICAgICBjb25zdCBsYXN0QXBwID0gY3VycmVudEFwcDtcbiAgICAgICAgY3VycmVudEFwcCA9IGFwcDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gZm4oKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBjdXJyZW50QXBwID0gbGFzdEFwcDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIGFwcDtcbiAgfTtcbn1cbmxldCBjdXJyZW50QXBwID0gbnVsbDtcblxuZnVuY3Rpb24gcHJvdmlkZShrZXksIHZhbHVlKSB7XG4gIGlmICghY3VycmVudEluc3RhbmNlKSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIHdhcm4kMShgcHJvdmlkZSgpIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHNldHVwKCkuYCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGxldCBwcm92aWRlcyA9IGN1cnJlbnRJbnN0YW5jZS5wcm92aWRlcztcbiAgICBjb25zdCBwYXJlbnRQcm92aWRlcyA9IGN1cnJlbnRJbnN0YW5jZS5wYXJlbnQgJiYgY3VycmVudEluc3RhbmNlLnBhcmVudC5wcm92aWRlcztcbiAgICBpZiAocGFyZW50UHJvdmlkZXMgPT09IHByb3ZpZGVzKSB7XG4gICAgICBwcm92aWRlcyA9IGN1cnJlbnRJbnN0YW5jZS5wcm92aWRlcyA9IE9iamVjdC5jcmVhdGUocGFyZW50UHJvdmlkZXMpO1xuICAgIH1cbiAgICBwcm92aWRlc1trZXldID0gdmFsdWU7XG4gIH1cbn1cbmZ1bmN0aW9uIGluamVjdChrZXksIGRlZmF1bHRWYWx1ZSwgdHJlYXREZWZhdWx0QXNGYWN0b3J5ID0gZmFsc2UpIHtcbiAgY29uc3QgaW5zdGFuY2UgPSBjdXJyZW50SW5zdGFuY2UgfHwgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlO1xuICBpZiAoaW5zdGFuY2UgfHwgY3VycmVudEFwcCkge1xuICAgIGNvbnN0IHByb3ZpZGVzID0gY3VycmVudEFwcCA/IGN1cnJlbnRBcHAuX2NvbnRleHQucHJvdmlkZXMgOiBpbnN0YW5jZSA/IGluc3RhbmNlLnBhcmVudCA9PSBudWxsID8gaW5zdGFuY2Uudm5vZGUuYXBwQ29udGV4dCAmJiBpbnN0YW5jZS52bm9kZS5hcHBDb250ZXh0LnByb3ZpZGVzIDogaW5zdGFuY2UucGFyZW50LnByb3ZpZGVzIDogdm9pZCAwO1xuICAgIGlmIChwcm92aWRlcyAmJiBrZXkgaW4gcHJvdmlkZXMpIHtcbiAgICAgIHJldHVybiBwcm92aWRlc1trZXldO1xuICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgIHJldHVybiB0cmVhdERlZmF1bHRBc0ZhY3RvcnkgJiYgaXNGdW5jdGlvbihkZWZhdWx0VmFsdWUpID8gZGVmYXVsdFZhbHVlLmNhbGwoaW5zdGFuY2UgJiYgaW5zdGFuY2UucHJveHkpIDogZGVmYXVsdFZhbHVlO1xuICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgd2FybiQxKGBpbmplY3Rpb24gXCIke1N0cmluZyhrZXkpfVwiIG5vdCBmb3VuZC5gKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm4kMShgaW5qZWN0KCkgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgc2V0dXAoKSBvciBmdW5jdGlvbmFsIGNvbXBvbmVudHMuYCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGhhc0luamVjdGlvbkNvbnRleHQoKSB7XG4gIHJldHVybiAhIShjdXJyZW50SW5zdGFuY2UgfHwgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlIHx8IGN1cnJlbnRBcHApO1xufVxuXG5jb25zdCBpbnRlcm5hbE9iamVjdFByb3RvID0ge307XG5jb25zdCBjcmVhdGVJbnRlcm5hbE9iamVjdCA9ICgpID0+IE9iamVjdC5jcmVhdGUoaW50ZXJuYWxPYmplY3RQcm90byk7XG5jb25zdCBpc0ludGVybmFsT2JqZWN0ID0gKG9iaikgPT4gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikgPT09IGludGVybmFsT2JqZWN0UHJvdG87XG5cbmZ1bmN0aW9uIGluaXRQcm9wcyhpbnN0YW5jZSwgcmF3UHJvcHMsIGlzU3RhdGVmdWwsIGlzU1NSID0gZmFsc2UpIHtcbiAgY29uc3QgcHJvcHMgPSB7fTtcbiAgY29uc3QgYXR0cnMgPSBjcmVhdGVJbnRlcm5hbE9iamVjdCgpO1xuICBpbnN0YW5jZS5wcm9wc0RlZmF1bHRzID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHNldEZ1bGxQcm9wcyhpbnN0YW5jZSwgcmF3UHJvcHMsIHByb3BzLCBhdHRycyk7XG4gIGZvciAoY29uc3Qga2V5IGluIGluc3RhbmNlLnByb3BzT3B0aW9uc1swXSkge1xuICAgIGlmICghKGtleSBpbiBwcm9wcykpIHtcbiAgICAgIHByb3BzW2tleV0gPSB2b2lkIDA7XG4gICAgfVxuICB9XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgdmFsaWRhdGVQcm9wcyhyYXdQcm9wcyB8fCB7fSwgcHJvcHMsIGluc3RhbmNlKTtcbiAgfVxuICBpZiAoaXNTdGF0ZWZ1bCkge1xuICAgIGluc3RhbmNlLnByb3BzID0gaXNTU1IgPyBwcm9wcyA6IHNoYWxsb3dSZWFjdGl2ZShwcm9wcyk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFpbnN0YW5jZS50eXBlLnByb3BzKSB7XG4gICAgICBpbnN0YW5jZS5wcm9wcyA9IGF0dHJzO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnN0YW5jZS5wcm9wcyA9IHByb3BzO1xuICAgIH1cbiAgfVxuICBpbnN0YW5jZS5hdHRycyA9IGF0dHJzO1xufVxuZnVuY3Rpb24gaXNJbkhtckNvbnRleHQoaW5zdGFuY2UpIHtcbiAgd2hpbGUgKGluc3RhbmNlKSB7XG4gICAgaWYgKGluc3RhbmNlLnR5cGUuX19obXJJZCkgcmV0dXJuIHRydWU7XG4gICAgaW5zdGFuY2UgPSBpbnN0YW5jZS5wYXJlbnQ7XG4gIH1cbn1cbmZ1bmN0aW9uIHVwZGF0ZVByb3BzKGluc3RhbmNlLCByYXdQcm9wcywgcmF3UHJldlByb3BzLCBvcHRpbWl6ZWQpIHtcbiAgY29uc3Qge1xuICAgIHByb3BzLFxuICAgIGF0dHJzLFxuICAgIHZub2RlOiB7IHBhdGNoRmxhZyB9XG4gIH0gPSBpbnN0YW5jZTtcbiAgY29uc3QgcmF3Q3VycmVudFByb3BzID0gdG9SYXcocHJvcHMpO1xuICBjb25zdCBbb3B0aW9uc10gPSBpbnN0YW5jZS5wcm9wc09wdGlvbnM7XG4gIGxldCBoYXNBdHRyc0NoYW5nZWQgPSBmYWxzZTtcbiAgaWYgKFxuICAgIC8vIGFsd2F5cyBmb3JjZSBmdWxsIGRpZmYgaW4gZGV2XG4gICAgLy8gLSAjMTk0MiBpZiBobXIgaXMgZW5hYmxlZCB3aXRoIHNmYyBjb21wb25lbnRcbiAgICAvLyAtIHZpdGUjODcyIG5vbi1zZmMgY29tcG9uZW50IHVzZWQgYnkgc2ZjIGNvbXBvbmVudFxuICAgICEoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBpc0luSG1yQ29udGV4dChpbnN0YW5jZSkpICYmIChvcHRpbWl6ZWQgfHwgcGF0Y2hGbGFnID4gMCkgJiYgIShwYXRjaEZsYWcgJiAxNilcbiAgKSB7XG4gICAgaWYgKHBhdGNoRmxhZyAmIDgpIHtcbiAgICAgIGNvbnN0IHByb3BzVG9VcGRhdGUgPSBpbnN0YW5jZS52bm9kZS5keW5hbWljUHJvcHM7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BzVG9VcGRhdGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGtleSA9IHByb3BzVG9VcGRhdGVbaV07XG4gICAgICAgIGlmIChpc0VtaXRMaXN0ZW5lcihpbnN0YW5jZS5lbWl0c09wdGlvbnMsIGtleSkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZSA9IHJhd1Byb3BzW2tleV07XG4gICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgaWYgKGhhc093bihhdHRycywga2V5KSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBhdHRyc1trZXldKSB7XG4gICAgICAgICAgICAgIGF0dHJzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgaGFzQXR0cnNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY2FtZWxpemVkS2V5ID0gY2FtZWxpemUoa2V5KTtcbiAgICAgICAgICAgIHByb3BzW2NhbWVsaXplZEtleV0gPSByZXNvbHZlUHJvcFZhbHVlKFxuICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgICByYXdDdXJyZW50UHJvcHMsXG4gICAgICAgICAgICAgIGNhbWVsaXplZEtleSxcbiAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgIGluc3RhbmNlLFxuICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHZhbHVlICE9PSBhdHRyc1trZXldKSB7XG4gICAgICAgICAgICBhdHRyc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICBoYXNBdHRyc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoc2V0RnVsbFByb3BzKGluc3RhbmNlLCByYXdQcm9wcywgcHJvcHMsIGF0dHJzKSkge1xuICAgICAgaGFzQXR0cnNDaGFuZ2VkID0gdHJ1ZTtcbiAgICB9XG4gICAgbGV0IGtlYmFiS2V5O1xuICAgIGZvciAoY29uc3Qga2V5IGluIHJhd0N1cnJlbnRQcm9wcykge1xuICAgICAgaWYgKCFyYXdQcm9wcyB8fCAvLyBmb3IgY2FtZWxDYXNlXG4gICAgICAhaGFzT3duKHJhd1Byb3BzLCBrZXkpICYmIC8vIGl0J3MgcG9zc2libGUgdGhlIG9yaWdpbmFsIHByb3BzIHdhcyBwYXNzZWQgaW4gYXMga2ViYWItY2FzZVxuICAgICAgLy8gYW5kIGNvbnZlcnRlZCB0byBjYW1lbENhc2UgKCM5NTUpXG4gICAgICAoKGtlYmFiS2V5ID0gaHlwaGVuYXRlKGtleSkpID09PSBrZXkgfHwgIWhhc093bihyYXdQcm9wcywga2ViYWJLZXkpKSkge1xuICAgICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAgIGlmIChyYXdQcmV2UHJvcHMgJiYgLy8gZm9yIGNhbWVsQ2FzZVxuICAgICAgICAgIChyYXdQcmV2UHJvcHNba2V5XSAhPT0gdm9pZCAwIHx8IC8vIGZvciBrZWJhYi1jYXNlXG4gICAgICAgICAgcmF3UHJldlByb3BzW2tlYmFiS2V5XSAhPT0gdm9pZCAwKSkge1xuICAgICAgICAgICAgcHJvcHNba2V5XSA9IHJlc29sdmVQcm9wVmFsdWUoXG4gICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgIHJhd0N1cnJlbnRQcm9wcyxcbiAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICB2b2lkIDAsXG4gICAgICAgICAgICAgIGluc3RhbmNlLFxuICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWxldGUgcHJvcHNba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoYXR0cnMgIT09IHJhd0N1cnJlbnRQcm9wcykge1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cnMpIHtcbiAgICAgICAgaWYgKCFyYXdQcm9wcyB8fCAhaGFzT3duKHJhd1Byb3BzLCBrZXkpICYmIHRydWUpIHtcbiAgICAgICAgICBkZWxldGUgYXR0cnNba2V5XTtcbiAgICAgICAgICBoYXNBdHRyc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChoYXNBdHRyc0NoYW5nZWQpIHtcbiAgICB0cmlnZ2VyKGluc3RhbmNlLmF0dHJzLCBcInNldFwiLCBcIlwiKTtcbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHZhbGlkYXRlUHJvcHMocmF3UHJvcHMgfHwge30sIHByb3BzLCBpbnN0YW5jZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHNldEZ1bGxQcm9wcyhpbnN0YW5jZSwgcmF3UHJvcHMsIHByb3BzLCBhdHRycykge1xuICBjb25zdCBbb3B0aW9ucywgbmVlZENhc3RLZXlzXSA9IGluc3RhbmNlLnByb3BzT3B0aW9ucztcbiAgbGV0IGhhc0F0dHJzQ2hhbmdlZCA9IGZhbHNlO1xuICBsZXQgcmF3Q2FzdFZhbHVlcztcbiAgaWYgKHJhd1Byb3BzKSB7XG4gICAgZm9yIChsZXQga2V5IGluIHJhd1Byb3BzKSB7XG4gICAgICBpZiAoaXNSZXNlcnZlZFByb3Aoa2V5KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHZhbHVlID0gcmF3UHJvcHNba2V5XTtcbiAgICAgIGxldCBjYW1lbEtleTtcbiAgICAgIGlmIChvcHRpb25zICYmIGhhc093bihvcHRpb25zLCBjYW1lbEtleSA9IGNhbWVsaXplKGtleSkpKSB7XG4gICAgICAgIGlmICghbmVlZENhc3RLZXlzIHx8ICFuZWVkQ2FzdEtleXMuaW5jbHVkZXMoY2FtZWxLZXkpKSB7XG4gICAgICAgICAgcHJvcHNbY2FtZWxLZXldID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgKHJhd0Nhc3RWYWx1ZXMgfHwgKHJhd0Nhc3RWYWx1ZXMgPSB7fSkpW2NhbWVsS2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFpc0VtaXRMaXN0ZW5lcihpbnN0YW5jZS5lbWl0c09wdGlvbnMsIGtleSkpIHtcbiAgICAgICAgaWYgKCEoa2V5IGluIGF0dHJzKSB8fCB2YWx1ZSAhPT0gYXR0cnNba2V5XSkge1xuICAgICAgICAgIGF0dHJzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICBoYXNBdHRyc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChuZWVkQ2FzdEtleXMpIHtcbiAgICBjb25zdCByYXdDdXJyZW50UHJvcHMgPSB0b1Jhdyhwcm9wcyk7XG4gICAgY29uc3QgY2FzdFZhbHVlcyA9IHJhd0Nhc3RWYWx1ZXMgfHwgRU1QVFlfT0JKO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmVlZENhc3RLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBrZXkgPSBuZWVkQ2FzdEtleXNbaV07XG4gICAgICBwcm9wc1trZXldID0gcmVzb2x2ZVByb3BWYWx1ZShcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgcmF3Q3VycmVudFByb3BzLFxuICAgICAgICBrZXksXG4gICAgICAgIGNhc3RWYWx1ZXNba2V5XSxcbiAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgICFoYXNPd24oY2FzdFZhbHVlcywga2V5KVxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGhhc0F0dHJzQ2hhbmdlZDtcbn1cbmZ1bmN0aW9uIHJlc29sdmVQcm9wVmFsdWUob3B0aW9ucywgcHJvcHMsIGtleSwgdmFsdWUsIGluc3RhbmNlLCBpc0Fic2VudCkge1xuICBjb25zdCBvcHQgPSBvcHRpb25zW2tleV07XG4gIGlmIChvcHQgIT0gbnVsbCkge1xuICAgIGNvbnN0IGhhc0RlZmF1bHQgPSBoYXNPd24ob3B0LCBcImRlZmF1bHRcIik7XG4gICAgaWYgKGhhc0RlZmF1bHQgJiYgdmFsdWUgPT09IHZvaWQgMCkge1xuICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gb3B0LmRlZmF1bHQ7XG4gICAgICBpZiAob3B0LnR5cGUgIT09IEZ1bmN0aW9uICYmICFvcHQuc2tpcEZhY3RvcnkgJiYgaXNGdW5jdGlvbihkZWZhdWx0VmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IHsgcHJvcHNEZWZhdWx0cyB9ID0gaW5zdGFuY2U7XG4gICAgICAgIGlmIChrZXkgaW4gcHJvcHNEZWZhdWx0cykge1xuICAgICAgICAgIHZhbHVlID0gcHJvcHNEZWZhdWx0c1trZXldO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHJlc2V0ID0gc2V0Q3VycmVudEluc3RhbmNlKGluc3RhbmNlKTtcbiAgICAgICAgICB2YWx1ZSA9IHByb3BzRGVmYXVsdHNba2V5XSA9IGRlZmF1bHRWYWx1ZS5jYWxsKFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIHByb3BzXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXNldCgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChpbnN0YW5jZS5jZSkge1xuICAgICAgICBpbnN0YW5jZS5jZS5fc2V0UHJvcChrZXksIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wdFswIC8qIHNob3VsZENhc3QgKi9dKSB7XG4gICAgICBpZiAoaXNBYnNlbnQgJiYgIWhhc0RlZmF1bHQpIHtcbiAgICAgICAgdmFsdWUgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAob3B0WzEgLyogc2hvdWxkQ2FzdFRydWUgKi9dICYmICh2YWx1ZSA9PT0gXCJcIiB8fCB2YWx1ZSA9PT0gaHlwaGVuYXRlKGtleSkpKSB7XG4gICAgICAgIHZhbHVlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuY29uc3QgbWl4aW5Qcm9wc0NhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBub3JtYWxpemVQcm9wc09wdGlvbnMoY29tcCwgYXBwQ29udGV4dCwgYXNNaXhpbiA9IGZhbHNlKSB7XG4gIGNvbnN0IGNhY2hlID0gX19WVUVfT1BUSU9OU19BUElfXyAmJiBhc01peGluID8gbWl4aW5Qcm9wc0NhY2hlIDogYXBwQ29udGV4dC5wcm9wc0NhY2hlO1xuICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQoY29tcCk7XG4gIGlmIChjYWNoZWQpIHtcbiAgICByZXR1cm4gY2FjaGVkO1xuICB9XG4gIGNvbnN0IHJhdyA9IGNvbXAucHJvcHM7XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSB7fTtcbiAgY29uc3QgbmVlZENhc3RLZXlzID0gW107XG4gIGxldCBoYXNFeHRlbmRzID0gZmFsc2U7XG4gIGlmIChfX1ZVRV9PUFRJT05TX0FQSV9fICYmICFpc0Z1bmN0aW9uKGNvbXApKSB7XG4gICAgY29uc3QgZXh0ZW5kUHJvcHMgPSAocmF3MikgPT4ge1xuICAgICAgaGFzRXh0ZW5kcyA9IHRydWU7XG4gICAgICBjb25zdCBbcHJvcHMsIGtleXNdID0gbm9ybWFsaXplUHJvcHNPcHRpb25zKHJhdzIsIGFwcENvbnRleHQsIHRydWUpO1xuICAgICAgZXh0ZW5kKG5vcm1hbGl6ZWQsIHByb3BzKTtcbiAgICAgIGlmIChrZXlzKSBuZWVkQ2FzdEtleXMucHVzaCguLi5rZXlzKTtcbiAgICB9O1xuICAgIGlmICghYXNNaXhpbiAmJiBhcHBDb250ZXh0Lm1peGlucy5sZW5ndGgpIHtcbiAgICAgIGFwcENvbnRleHQubWl4aW5zLmZvckVhY2goZXh0ZW5kUHJvcHMpO1xuICAgIH1cbiAgICBpZiAoY29tcC5leHRlbmRzKSB7XG4gICAgICBleHRlbmRQcm9wcyhjb21wLmV4dGVuZHMpO1xuICAgIH1cbiAgICBpZiAoY29tcC5taXhpbnMpIHtcbiAgICAgIGNvbXAubWl4aW5zLmZvckVhY2goZXh0ZW5kUHJvcHMpO1xuICAgIH1cbiAgfVxuICBpZiAoIXJhdyAmJiAhaGFzRXh0ZW5kcykge1xuICAgIGlmIChpc09iamVjdChjb21wKSkge1xuICAgICAgY2FjaGUuc2V0KGNvbXAsIEVNUFRZX0FSUik7XG4gICAgfVxuICAgIHJldHVybiBFTVBUWV9BUlI7XG4gIH1cbiAgaWYgKGlzQXJyYXkocmF3KSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmF3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhaXNTdHJpbmcocmF3W2ldKSkge1xuICAgICAgICB3YXJuJDEoYHByb3BzIG11c3QgYmUgc3RyaW5ncyB3aGVuIHVzaW5nIGFycmF5IHN5bnRheC5gLCByYXdbaV0pO1xuICAgICAgfVxuICAgICAgY29uc3Qgbm9ybWFsaXplZEtleSA9IGNhbWVsaXplKHJhd1tpXSk7XG4gICAgICBpZiAodmFsaWRhdGVQcm9wTmFtZShub3JtYWxpemVkS2V5KSkge1xuICAgICAgICBub3JtYWxpemVkW25vcm1hbGl6ZWRLZXldID0gRU1QVFlfT0JKO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChyYXcpIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhaXNPYmplY3QocmF3KSkge1xuICAgICAgd2FybiQxKGBpbnZhbGlkIHByb3BzIG9wdGlvbnNgLCByYXcpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBpbiByYXcpIHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRLZXkgPSBjYW1lbGl6ZShrZXkpO1xuICAgICAgaWYgKHZhbGlkYXRlUHJvcE5hbWUobm9ybWFsaXplZEtleSkpIHtcbiAgICAgICAgY29uc3Qgb3B0ID0gcmF3W2tleV07XG4gICAgICAgIGNvbnN0IHByb3AgPSBub3JtYWxpemVkW25vcm1hbGl6ZWRLZXldID0gaXNBcnJheShvcHQpIHx8IGlzRnVuY3Rpb24ob3B0KSA/IHsgdHlwZTogb3B0IH0gOiBleHRlbmQoe30sIG9wdCk7XG4gICAgICAgIGNvbnN0IHByb3BUeXBlID0gcHJvcC50eXBlO1xuICAgICAgICBsZXQgc2hvdWxkQ2FzdCA9IGZhbHNlO1xuICAgICAgICBsZXQgc2hvdWxkQ2FzdFRydWUgPSB0cnVlO1xuICAgICAgICBpZiAoaXNBcnJheShwcm9wVHlwZSkpIHtcbiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcHJvcFR5cGUubGVuZ3RoOyArK2luZGV4KSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gcHJvcFR5cGVbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3QgdHlwZU5hbWUgPSBpc0Z1bmN0aW9uKHR5cGUpICYmIHR5cGUubmFtZTtcbiAgICAgICAgICAgIGlmICh0eXBlTmFtZSA9PT0gXCJCb29sZWFuXCIpIHtcbiAgICAgICAgICAgICAgc2hvdWxkQ2FzdCA9IHRydWU7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlTmFtZSA9PT0gXCJTdHJpbmdcIikge1xuICAgICAgICAgICAgICBzaG91bGRDYXN0VHJ1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaG91bGRDYXN0ID0gaXNGdW5jdGlvbihwcm9wVHlwZSkgJiYgcHJvcFR5cGUubmFtZSA9PT0gXCJCb29sZWFuXCI7XG4gICAgICAgIH1cbiAgICAgICAgcHJvcFswIC8qIHNob3VsZENhc3QgKi9dID0gc2hvdWxkQ2FzdDtcbiAgICAgICAgcHJvcFsxIC8qIHNob3VsZENhc3RUcnVlICovXSA9IHNob3VsZENhc3RUcnVlO1xuICAgICAgICBpZiAoc2hvdWxkQ2FzdCB8fCBoYXNPd24ocHJvcCwgXCJkZWZhdWx0XCIpKSB7XG4gICAgICAgICAgbmVlZENhc3RLZXlzLnB1c2gobm9ybWFsaXplZEtleSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY29uc3QgcmVzID0gW25vcm1hbGl6ZWQsIG5lZWRDYXN0S2V5c107XG4gIGlmIChpc09iamVjdChjb21wKSkge1xuICAgIGNhY2hlLnNldChjb21wLCByZXMpO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVByb3BOYW1lKGtleSkge1xuICBpZiAoa2V5WzBdICE9PSBcIiRcIiAmJiAhaXNSZXNlcnZlZFByb3Aoa2V5KSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICB3YXJuJDEoYEludmFsaWQgcHJvcCBuYW1lOiBcIiR7a2V5fVwiIGlzIGEgcmVzZXJ2ZWQgcHJvcGVydHkuYCk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gZ2V0VHlwZShjdG9yKSB7XG4gIGlmIChjdG9yID09PSBudWxsKSB7XG4gICAgcmV0dXJuIFwibnVsbFwiO1xuICB9XG4gIGlmICh0eXBlb2YgY3RvciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmV0dXJuIGN0b3IubmFtZSB8fCBcIlwiO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBjdG9yID09PSBcIm9iamVjdFwiKSB7XG4gICAgY29uc3QgbmFtZSA9IGN0b3IuY29uc3RydWN0b3IgJiYgY3Rvci5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgIHJldHVybiBuYW1lIHx8IFwiXCI7XG4gIH1cbiAgcmV0dXJuIFwiXCI7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVByb3BzKHJhd1Byb3BzLCBwcm9wcywgaW5zdGFuY2UpIHtcbiAgY29uc3QgcmVzb2x2ZWRWYWx1ZXMgPSB0b1Jhdyhwcm9wcyk7XG4gIGNvbnN0IG9wdGlvbnMgPSBpbnN0YW5jZS5wcm9wc09wdGlvbnNbMF07XG4gIGNvbnN0IGNhbWVsaXplUHJvcHNLZXkgPSBPYmplY3Qua2V5cyhyYXdQcm9wcykubWFwKChrZXkpID0+IGNhbWVsaXplKGtleSkpO1xuICBmb3IgKGNvbnN0IGtleSBpbiBvcHRpb25zKSB7XG4gICAgbGV0IG9wdCA9IG9wdGlvbnNba2V5XTtcbiAgICBpZiAob3B0ID09IG51bGwpIGNvbnRpbnVlO1xuICAgIHZhbGlkYXRlUHJvcChcbiAgICAgIGtleSxcbiAgICAgIHJlc29sdmVkVmFsdWVzW2tleV0sXG4gICAgICBvcHQsXG4gICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gc2hhbGxvd1JlYWRvbmx5KHJlc29sdmVkVmFsdWVzKSA6IHJlc29sdmVkVmFsdWVzLFxuICAgICAgIWNhbWVsaXplUHJvcHNLZXkuaW5jbHVkZXMoa2V5KVxuICAgICk7XG4gIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRlUHJvcChuYW1lLCB2YWx1ZSwgcHJvcCwgcHJvcHMsIGlzQWJzZW50KSB7XG4gIGNvbnN0IHsgdHlwZSwgcmVxdWlyZWQsIHZhbGlkYXRvciwgc2tpcENoZWNrIH0gPSBwcm9wO1xuICBpZiAocmVxdWlyZWQgJiYgaXNBYnNlbnQpIHtcbiAgICB3YXJuJDEoJ01pc3NpbmcgcmVxdWlyZWQgcHJvcDogXCInICsgbmFtZSArICdcIicpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAodmFsdWUgPT0gbnVsbCAmJiAhcmVxdWlyZWQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHR5cGUgIT0gbnVsbCAmJiB0eXBlICE9PSB0cnVlICYmICFza2lwQ2hlY2spIHtcbiAgICBsZXQgaXNWYWxpZCA9IGZhbHNlO1xuICAgIGNvbnN0IHR5cGVzID0gaXNBcnJheSh0eXBlKSA/IHR5cGUgOiBbdHlwZV07XG4gICAgY29uc3QgZXhwZWN0ZWRUeXBlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHlwZXMubGVuZ3RoICYmICFpc1ZhbGlkOyBpKyspIHtcbiAgICAgIGNvbnN0IHsgdmFsaWQsIGV4cGVjdGVkVHlwZSB9ID0gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZXNbaV0pO1xuICAgICAgZXhwZWN0ZWRUeXBlcy5wdXNoKGV4cGVjdGVkVHlwZSB8fCBcIlwiKTtcbiAgICAgIGlzVmFsaWQgPSB2YWxpZDtcbiAgICB9XG4gICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICB3YXJuJDEoZ2V0SW52YWxpZFR5cGVNZXNzYWdlKG5hbWUsIHZhbHVlLCBleHBlY3RlZFR5cGVzKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIGlmICh2YWxpZGF0b3IgJiYgIXZhbGlkYXRvcih2YWx1ZSwgcHJvcHMpKSB7XG4gICAgd2FybiQxKCdJbnZhbGlkIHByb3A6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIG5hbWUgKyAnXCIuJyk7XG4gIH1cbn1cbmNvbnN0IGlzU2ltcGxlVHlwZSA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKFxuICBcIlN0cmluZyxOdW1iZXIsQm9vbGVhbixGdW5jdGlvbixTeW1ib2wsQmlnSW50XCJcbik7XG5mdW5jdGlvbiBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlKSB7XG4gIGxldCB2YWxpZDtcbiAgY29uc3QgZXhwZWN0ZWRUeXBlID0gZ2V0VHlwZSh0eXBlKTtcbiAgaWYgKGV4cGVjdGVkVHlwZSA9PT0gXCJudWxsXCIpIHtcbiAgICB2YWxpZCA9IHZhbHVlID09PSBudWxsO1xuICB9IGVsc2UgaWYgKGlzU2ltcGxlVHlwZShleHBlY3RlZFR5cGUpKSB7XG4gICAgY29uc3QgdCA9IHR5cGVvZiB2YWx1ZTtcbiAgICB2YWxpZCA9IHQgPT09IGV4cGVjdGVkVHlwZS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmICghdmFsaWQgJiYgdCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG4gICAgfVxuICB9IGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gXCJPYmplY3RcIikge1xuICAgIHZhbGlkID0gaXNPYmplY3QodmFsdWUpO1xuICB9IGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gXCJBcnJheVwiKSB7XG4gICAgdmFsaWQgPSBpc0FycmF5KHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICB2YWxpZCA9IHZhbHVlIGluc3RhbmNlb2YgdHlwZTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHZhbGlkLFxuICAgIGV4cGVjdGVkVHlwZVxuICB9O1xufVxuZnVuY3Rpb24gZ2V0SW52YWxpZFR5cGVNZXNzYWdlKG5hbWUsIHZhbHVlLCBleHBlY3RlZFR5cGVzKSB7XG4gIGlmIChleHBlY3RlZFR5cGVzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBgUHJvcCB0eXBlIFtdIGZvciBwcm9wIFwiJHtuYW1lfVwiIHdvbid0IG1hdGNoIGFueXRoaW5nLiBEaWQgeW91IG1lYW4gdG8gdXNlIHR5cGUgQXJyYXkgaW5zdGVhZD9gO1xuICB9XG4gIGxldCBtZXNzYWdlID0gYEludmFsaWQgcHJvcDogdHlwZSBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCIke25hbWV9XCIuIEV4cGVjdGVkICR7ZXhwZWN0ZWRUeXBlcy5tYXAoY2FwaXRhbGl6ZSkuam9pbihcIiB8IFwiKX1gO1xuICBjb25zdCBleHBlY3RlZFR5cGUgPSBleHBlY3RlZFR5cGVzWzBdO1xuICBjb25zdCByZWNlaXZlZFR5cGUgPSB0b1Jhd1R5cGUodmFsdWUpO1xuICBjb25zdCBleHBlY3RlZFZhbHVlID0gc3R5bGVWYWx1ZSh2YWx1ZSwgZXhwZWN0ZWRUeXBlKTtcbiAgY29uc3QgcmVjZWl2ZWRWYWx1ZSA9IHN0eWxlVmFsdWUodmFsdWUsIHJlY2VpdmVkVHlwZSk7XG4gIGlmIChleHBlY3RlZFR5cGVzLmxlbmd0aCA9PT0gMSAmJiBpc0V4cGxpY2FibGUoZXhwZWN0ZWRUeXBlKSAmJiAhaXNCb29sZWFuKGV4cGVjdGVkVHlwZSwgcmVjZWl2ZWRUeXBlKSkge1xuICAgIG1lc3NhZ2UgKz0gYCB3aXRoIHZhbHVlICR7ZXhwZWN0ZWRWYWx1ZX1gO1xuICB9XG4gIG1lc3NhZ2UgKz0gYCwgZ290ICR7cmVjZWl2ZWRUeXBlfSBgO1xuICBpZiAoaXNFeHBsaWNhYmxlKHJlY2VpdmVkVHlwZSkpIHtcbiAgICBtZXNzYWdlICs9IGB3aXRoIHZhbHVlICR7cmVjZWl2ZWRWYWx1ZX0uYDtcbiAgfVxuICByZXR1cm4gbWVzc2FnZTtcbn1cbmZ1bmN0aW9uIHN0eWxlVmFsdWUodmFsdWUsIHR5cGUpIHtcbiAgaWYgKHR5cGUgPT09IFwiU3RyaW5nXCIpIHtcbiAgICByZXR1cm4gYFwiJHt2YWx1ZX1cImA7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJOdW1iZXJcIikge1xuICAgIHJldHVybiBgJHtOdW1iZXIodmFsdWUpfWA7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGAke3ZhbHVlfWA7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzRXhwbGljYWJsZSh0eXBlKSB7XG4gIGNvbnN0IGV4cGxpY2l0VHlwZXMgPSBbXCJzdHJpbmdcIiwgXCJudW1iZXJcIiwgXCJib29sZWFuXCJdO1xuICByZXR1cm4gZXhwbGljaXRUeXBlcy5zb21lKChlbGVtKSA9PiB0eXBlLnRvTG93ZXJDYXNlKCkgPT09IGVsZW0pO1xufVxuZnVuY3Rpb24gaXNCb29sZWFuKC4uLmFyZ3MpIHtcbiAgcmV0dXJuIGFyZ3Muc29tZSgoZWxlbSkgPT4gZWxlbS50b0xvd2VyQ2FzZSgpID09PSBcImJvb2xlYW5cIik7XG59XG5cbmNvbnN0IGlzSW50ZXJuYWxLZXkgPSAoa2V5KSA9PiBrZXlbMF0gPT09IFwiX1wiIHx8IGtleSA9PT0gXCIkc3RhYmxlXCI7XG5jb25zdCBub3JtYWxpemVTbG90VmFsdWUgPSAodmFsdWUpID0+IGlzQXJyYXkodmFsdWUpID8gdmFsdWUubWFwKG5vcm1hbGl6ZVZOb2RlKSA6IFtub3JtYWxpemVWTm9kZSh2YWx1ZSldO1xuY29uc3Qgbm9ybWFsaXplU2xvdCA9IChrZXksIHJhd1Nsb3QsIGN0eCkgPT4ge1xuICBpZiAocmF3U2xvdC5fbikge1xuICAgIHJldHVybiByYXdTbG90O1xuICB9XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSB3aXRoQ3R4KCguLi5hcmdzKSA9PiB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgY3VycmVudEluc3RhbmNlICYmICEoY3R4ID09PSBudWxsICYmIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSkgJiYgIShjdHggJiYgY3R4LnJvb3QgIT09IGN1cnJlbnRJbnN0YW5jZS5yb290KSkge1xuICAgICAgd2FybiQxKFxuICAgICAgICBgU2xvdCBcIiR7a2V5fVwiIGludm9rZWQgb3V0c2lkZSBvZiB0aGUgcmVuZGVyIGZ1bmN0aW9uOiB0aGlzIHdpbGwgbm90IHRyYWNrIGRlcGVuZGVuY2llcyB1c2VkIGluIHRoZSBzbG90LiBJbnZva2UgdGhlIHNsb3QgZnVuY3Rpb24gaW5zaWRlIHRoZSByZW5kZXIgZnVuY3Rpb24gaW5zdGVhZC5gXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gbm9ybWFsaXplU2xvdFZhbHVlKHJhd1Nsb3QoLi4uYXJncykpO1xuICB9LCBjdHgpO1xuICBub3JtYWxpemVkLl9jID0gZmFsc2U7XG4gIHJldHVybiBub3JtYWxpemVkO1xufTtcbmNvbnN0IG5vcm1hbGl6ZU9iamVjdFNsb3RzID0gKHJhd1Nsb3RzLCBzbG90cywgaW5zdGFuY2UpID0+IHtcbiAgY29uc3QgY3R4ID0gcmF3U2xvdHMuX2N0eDtcbiAgZm9yIChjb25zdCBrZXkgaW4gcmF3U2xvdHMpIHtcbiAgICBpZiAoaXNJbnRlcm5hbEtleShrZXkpKSBjb250aW51ZTtcbiAgICBjb25zdCB2YWx1ZSA9IHJhd1Nsb3RzW2tleV07XG4gICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICBzbG90c1trZXldID0gbm9ybWFsaXplU2xvdChrZXksIHZhbHVlLCBjdHgpO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgdHJ1ZSkge1xuICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgYE5vbi1mdW5jdGlvbiB2YWx1ZSBlbmNvdW50ZXJlZCBmb3Igc2xvdCBcIiR7a2V5fVwiLiBQcmVmZXIgZnVuY3Rpb24gc2xvdHMgZm9yIGJldHRlciBwZXJmb3JtYW5jZS5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplU2xvdFZhbHVlKHZhbHVlKTtcbiAgICAgIHNsb3RzW2tleV0gPSAoKSA9PiBub3JtYWxpemVkO1xuICAgIH1cbiAgfVxufTtcbmNvbnN0IG5vcm1hbGl6ZVZOb2RlU2xvdHMgPSAoaW5zdGFuY2UsIGNoaWxkcmVuKSA9PiB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFpc0tlZXBBbGl2ZShpbnN0YW5jZS52bm9kZSkgJiYgdHJ1ZSkge1xuICAgIHdhcm4kMShcbiAgICAgIGBOb24tZnVuY3Rpb24gdmFsdWUgZW5jb3VudGVyZWQgZm9yIGRlZmF1bHQgc2xvdC4gUHJlZmVyIGZ1bmN0aW9uIHNsb3RzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuYFxuICAgICk7XG4gIH1cbiAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVNsb3RWYWx1ZShjaGlsZHJlbik7XG4gIGluc3RhbmNlLnNsb3RzLmRlZmF1bHQgPSAoKSA9PiBub3JtYWxpemVkO1xufTtcbmNvbnN0IGFzc2lnblNsb3RzID0gKHNsb3RzLCBjaGlsZHJlbiwgb3B0aW1pemVkKSA9PiB7XG4gIGZvciAoY29uc3Qga2V5IGluIGNoaWxkcmVuKSB7XG4gICAgaWYgKG9wdGltaXplZCB8fCAhaXNJbnRlcm5hbEtleShrZXkpKSB7XG4gICAgICBzbG90c1trZXldID0gY2hpbGRyZW5ba2V5XTtcbiAgICB9XG4gIH1cbn07XG5jb25zdCBpbml0U2xvdHMgPSAoaW5zdGFuY2UsIGNoaWxkcmVuLCBvcHRpbWl6ZWQpID0+IHtcbiAgY29uc3Qgc2xvdHMgPSBpbnN0YW5jZS5zbG90cyA9IGNyZWF0ZUludGVybmFsT2JqZWN0KCk7XG4gIGlmIChpbnN0YW5jZS52bm9kZS5zaGFwZUZsYWcgJiAzMikge1xuICAgIGNvbnN0IHR5cGUgPSBjaGlsZHJlbi5fO1xuICAgIGlmICh0eXBlKSB7XG4gICAgICBhc3NpZ25TbG90cyhzbG90cywgY2hpbGRyZW4sIG9wdGltaXplZCk7XG4gICAgICBpZiAob3B0aW1pemVkKSB7XG4gICAgICAgIGRlZihzbG90cywgXCJfXCIsIHR5cGUsIHRydWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBub3JtYWxpemVPYmplY3RTbG90cyhjaGlsZHJlbiwgc2xvdHMpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChjaGlsZHJlbikge1xuICAgIG5vcm1hbGl6ZVZOb2RlU2xvdHMoaW5zdGFuY2UsIGNoaWxkcmVuKTtcbiAgfVxufTtcbmNvbnN0IHVwZGF0ZVNsb3RzID0gKGluc3RhbmNlLCBjaGlsZHJlbiwgb3B0aW1pemVkKSA9PiB7XG4gIGNvbnN0IHsgdm5vZGUsIHNsb3RzIH0gPSBpbnN0YW5jZTtcbiAgbGV0IG5lZWREZWxldGlvbkNoZWNrID0gdHJ1ZTtcbiAgbGV0IGRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCA9IEVNUFRZX09CSjtcbiAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDMyKSB7XG4gICAgY29uc3QgdHlwZSA9IGNoaWxkcmVuLl87XG4gICAgaWYgKHR5cGUpIHtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGlzSG1yVXBkYXRpbmcpIHtcbiAgICAgICAgYXNzaWduU2xvdHMoc2xvdHMsIGNoaWxkcmVuLCBvcHRpbWl6ZWQpO1xuICAgICAgICB0cmlnZ2VyKGluc3RhbmNlLCBcInNldFwiLCBcIiRzbG90c1wiKTtcbiAgICAgIH0gZWxzZSBpZiAob3B0aW1pemVkICYmIHR5cGUgPT09IDEpIHtcbiAgICAgICAgbmVlZERlbGV0aW9uQ2hlY2sgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFzc2lnblNsb3RzKHNsb3RzLCBjaGlsZHJlbiwgb3B0aW1pemVkKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbmVlZERlbGV0aW9uQ2hlY2sgPSAhY2hpbGRyZW4uJHN0YWJsZTtcbiAgICAgIG5vcm1hbGl6ZU9iamVjdFNsb3RzKGNoaWxkcmVuLCBzbG90cyk7XG4gICAgfVxuICAgIGRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCA9IGNoaWxkcmVuO1xuICB9IGVsc2UgaWYgKGNoaWxkcmVuKSB7XG4gICAgbm9ybWFsaXplVk5vZGVTbG90cyhpbnN0YW5jZSwgY2hpbGRyZW4pO1xuICAgIGRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCA9IHsgZGVmYXVsdDogMSB9O1xuICB9XG4gIGlmIChuZWVkRGVsZXRpb25DaGVjaykge1xuICAgIGZvciAoY29uc3Qga2V5IGluIHNsb3RzKSB7XG4gICAgICBpZiAoIWlzSW50ZXJuYWxLZXkoa2V5KSAmJiBkZWxldGlvbkNvbXBhcmlzb25UYXJnZXRba2V5XSA9PSBudWxsKSB7XG4gICAgICAgIGRlbGV0ZSBzbG90c1trZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxubGV0IHN1cHBvcnRlZDtcbmxldCBwZXJmO1xuZnVuY3Rpb24gc3RhcnRNZWFzdXJlKGluc3RhbmNlLCB0eXBlKSB7XG4gIGlmIChpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZy5wZXJmb3JtYW5jZSAmJiBpc1N1cHBvcnRlZCgpKSB7XG4gICAgcGVyZi5tYXJrKGB2dWUtJHt0eXBlfS0ke2luc3RhbmNlLnVpZH1gKTtcbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICBkZXZ0b29sc1BlcmZTdGFydChpbnN0YW5jZSwgdHlwZSwgaXNTdXBwb3J0ZWQoKSA/IHBlcmYubm93KCkgOiBEYXRlLm5vdygpKTtcbiAgfVxufVxuZnVuY3Rpb24gZW5kTWVhc3VyZShpbnN0YW5jZSwgdHlwZSkge1xuICBpZiAoaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcucGVyZm9ybWFuY2UgJiYgaXNTdXBwb3J0ZWQoKSkge1xuICAgIGNvbnN0IHN0YXJ0VGFnID0gYHZ1ZS0ke3R5cGV9LSR7aW5zdGFuY2UudWlkfWA7XG4gICAgY29uc3QgZW5kVGFnID0gc3RhcnRUYWcgKyBgOmVuZGA7XG4gICAgcGVyZi5tYXJrKGVuZFRhZyk7XG4gICAgcGVyZi5tZWFzdXJlKFxuICAgICAgYDwke2Zvcm1hdENvbXBvbmVudE5hbWUoaW5zdGFuY2UsIGluc3RhbmNlLnR5cGUpfT4gJHt0eXBlfWAsXG4gICAgICBzdGFydFRhZyxcbiAgICAgIGVuZFRhZ1xuICAgICk7XG4gICAgcGVyZi5jbGVhck1hcmtzKHN0YXJ0VGFnKTtcbiAgICBwZXJmLmNsZWFyTWFya3MoZW5kVGFnKTtcbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICBkZXZ0b29sc1BlcmZFbmQoaW5zdGFuY2UsIHR5cGUsIGlzU3VwcG9ydGVkKCkgPyBwZXJmLm5vdygpIDogRGF0ZS5ub3coKSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzU3VwcG9ydGVkKCkge1xuICBpZiAoc3VwcG9ydGVkICE9PSB2b2lkIDApIHtcbiAgICByZXR1cm4gc3VwcG9ydGVkO1xuICB9XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5wZXJmb3JtYW5jZSkge1xuICAgIHN1cHBvcnRlZCA9IHRydWU7XG4gICAgcGVyZiA9IHdpbmRvdy5wZXJmb3JtYW5jZTtcbiAgfSBlbHNlIHtcbiAgICBzdXBwb3J0ZWQgPSBmYWxzZTtcbiAgfVxuICByZXR1cm4gc3VwcG9ydGVkO1xufVxuXG5mdW5jdGlvbiBpbml0RmVhdHVyZUZsYWdzKCkge1xuICBjb25zdCBuZWVkV2FybiA9IFtdO1xuICBpZiAodHlwZW9mIF9fVlVFX09QVElPTlNfQVBJX18gIT09IFwiYm9vbGVhblwiKSB7XG4gICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBuZWVkV2Fybi5wdXNoKGBfX1ZVRV9PUFRJT05TX0FQSV9fYCk7XG4gICAgZ2V0R2xvYmFsVGhpcygpLl9fVlVFX09QVElPTlNfQVBJX18gPSB0cnVlO1xuICB9XG4gIGlmICh0eXBlb2YgX19WVUVfUFJPRF9ERVZUT09MU19fICE9PSBcImJvb2xlYW5cIikge1xuICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgbmVlZFdhcm4ucHVzaChgX19WVUVfUFJPRF9ERVZUT09MU19fYCk7XG4gICAgZ2V0R2xvYmFsVGhpcygpLl9fVlVFX1BST0RfREVWVE9PTFNfXyA9IGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgX19WVUVfUFJPRF9IWURSQVRJT05fTUlTTUFUQ0hfREVUQUlMU19fICE9PSBcImJvb2xlYW5cIikge1xuICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgbmVlZFdhcm4ucHVzaChgX19WVUVfUFJPRF9IWURSQVRJT05fTUlTTUFUQ0hfREVUQUlMU19fYCk7XG4gICAgZ2V0R2xvYmFsVGhpcygpLl9fVlVFX1BST0RfSFlEUkFUSU9OX01JU01BVENIX0RFVEFJTFNfXyA9IGZhbHNlO1xuICB9XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIG5lZWRXYXJuLmxlbmd0aCkge1xuICAgIGNvbnN0IG11bHRpID0gbmVlZFdhcm4ubGVuZ3RoID4gMTtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBgRmVhdHVyZSBmbGFnJHttdWx0aSA/IGBzYCA6IGBgfSAke25lZWRXYXJuLmpvaW4oXCIsIFwiKX0gJHttdWx0aSA/IGBhcmVgIDogYGlzYH0gbm90IGV4cGxpY2l0bHkgZGVmaW5lZC4gWW91IGFyZSBydW5uaW5nIHRoZSBlc20tYnVuZGxlciBidWlsZCBvZiBWdWUsIHdoaWNoIGV4cGVjdHMgdGhlc2UgY29tcGlsZS10aW1lIGZlYXR1cmUgZmxhZ3MgdG8gYmUgZ2xvYmFsbHkgaW5qZWN0ZWQgdmlhIHRoZSBidW5kbGVyIGNvbmZpZyBpbiBvcmRlciB0byBnZXQgYmV0dGVyIHRyZWUtc2hha2luZyBpbiB0aGUgcHJvZHVjdGlvbiBidW5kbGUuXG5cbkZvciBtb3JlIGRldGFpbHMsIHNlZSBodHRwczovL2xpbmsudnVlanMub3JnL2ZlYXR1cmUtZmxhZ3MuYFxuICAgICk7XG4gIH1cbn1cblxuY29uc3QgcXVldWVQb3N0UmVuZGVyRWZmZWN0ID0gcXVldWVFZmZlY3RXaXRoU3VzcGVuc2UgO1xuZnVuY3Rpb24gY3JlYXRlUmVuZGVyZXIob3B0aW9ucykge1xuICByZXR1cm4gYmFzZUNyZWF0ZVJlbmRlcmVyKG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gY3JlYXRlSHlkcmF0aW9uUmVuZGVyZXIob3B0aW9ucykge1xuICByZXR1cm4gYmFzZUNyZWF0ZVJlbmRlcmVyKG9wdGlvbnMsIGNyZWF0ZUh5ZHJhdGlvbkZ1bmN0aW9ucyk7XG59XG5mdW5jdGlvbiBiYXNlQ3JlYXRlUmVuZGVyZXIob3B0aW9ucywgY3JlYXRlSHlkcmF0aW9uRm5zKSB7XG4gIHtcbiAgICBpbml0RmVhdHVyZUZsYWdzKCk7XG4gIH1cbiAgY29uc3QgdGFyZ2V0ID0gZ2V0R2xvYmFsVGhpcygpO1xuICB0YXJnZXQuX19WVUVfXyA9IHRydWU7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgIHNldERldnRvb2xzSG9vayQxKHRhcmdldC5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fLCB0YXJnZXQpO1xuICB9XG4gIGNvbnN0IHtcbiAgICBpbnNlcnQ6IGhvc3RJbnNlcnQsXG4gICAgcmVtb3ZlOiBob3N0UmVtb3ZlLFxuICAgIHBhdGNoUHJvcDogaG9zdFBhdGNoUHJvcCxcbiAgICBjcmVhdGVFbGVtZW50OiBob3N0Q3JlYXRlRWxlbWVudCxcbiAgICBjcmVhdGVUZXh0OiBob3N0Q3JlYXRlVGV4dCxcbiAgICBjcmVhdGVDb21tZW50OiBob3N0Q3JlYXRlQ29tbWVudCxcbiAgICBzZXRUZXh0OiBob3N0U2V0VGV4dCxcbiAgICBzZXRFbGVtZW50VGV4dDogaG9zdFNldEVsZW1lbnRUZXh0LFxuICAgIHBhcmVudE5vZGU6IGhvc3RQYXJlbnROb2RlLFxuICAgIG5leHRTaWJsaW5nOiBob3N0TmV4dFNpYmxpbmcsXG4gICAgc2V0U2NvcGVJZDogaG9zdFNldFNjb3BlSWQgPSBOT09QLFxuICAgIGluc2VydFN0YXRpY0NvbnRlbnQ6IGhvc3RJbnNlcnRTdGF0aWNDb250ZW50XG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCBwYXRjaCA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yID0gbnVsbCwgcGFyZW50Q29tcG9uZW50ID0gbnVsbCwgcGFyZW50U3VzcGVuc2UgPSBudWxsLCBuYW1lc3BhY2UgPSB2b2lkIDAsIHNsb3RTY29wZUlkcyA9IG51bGwsIG9wdGltaXplZCA9ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgaXNIbXJVcGRhdGluZyA/IGZhbHNlIDogISFuMi5keW5hbWljQ2hpbGRyZW4pID0+IHtcbiAgICBpZiAobjEgPT09IG4yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChuMSAmJiAhaXNTYW1lVk5vZGVUeXBlKG4xLCBuMikpIHtcbiAgICAgIGFuY2hvciA9IGdldE5leHRIb3N0Tm9kZShuMSk7XG4gICAgICB1bm1vdW50KG4xLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB0cnVlKTtcbiAgICAgIG4xID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKG4yLnBhdGNoRmxhZyA9PT0gLTIpIHtcbiAgICAgIG9wdGltaXplZCA9IGZhbHNlO1xuICAgICAgbjIuZHluYW1pY0NoaWxkcmVuID0gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgeyB0eXBlLCByZWYsIHNoYXBlRmxhZyB9ID0gbjI7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIFRleHQ6XG4gICAgICAgIHByb2Nlc3NUZXh0KG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQ29tbWVudDpcbiAgICAgICAgcHJvY2Vzc0NvbW1lbnROb2RlKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgU3RhdGljOlxuICAgICAgICBpZiAobjEgPT0gbnVsbCkge1xuICAgICAgICAgIG1vdW50U3RhdGljTm9kZShuMiwgY29udGFpbmVyLCBhbmNob3IsIG5hbWVzcGFjZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHBhdGNoU3RhdGljTm9kZShuMSwgbjIsIGNvbnRhaW5lciwgbmFtZXNwYWNlKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgRnJhZ21lbnQ6XG4gICAgICAgIHByb2Nlc3NGcmFnbWVudChcbiAgICAgICAgICBuMSxcbiAgICAgICAgICBuMixcbiAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiAxKSB7XG4gICAgICAgICAgcHJvY2Vzc0VsZW1lbnQoXG4gICAgICAgICAgICBuMSxcbiAgICAgICAgICAgIG4yLFxuICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHNoYXBlRmxhZyAmIDYpIHtcbiAgICAgICAgICBwcm9jZXNzQ29tcG9uZW50KFxuICAgICAgICAgICAgbjEsXG4gICAgICAgICAgICBuMixcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChzaGFwZUZsYWcgJiA2NCkge1xuICAgICAgICAgIHR5cGUucHJvY2VzcyhcbiAgICAgICAgICAgIG4xLFxuICAgICAgICAgICAgbjIsXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBhbmNob3IsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgIG9wdGltaXplZCxcbiAgICAgICAgICAgIGludGVybmFsc1xuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoc2hhcGVGbGFnICYgMTI4KSB7XG4gICAgICAgICAgdHlwZS5wcm9jZXNzKFxuICAgICAgICAgICAgbjEsXG4gICAgICAgICAgICBuMixcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkLFxuICAgICAgICAgICAgaW50ZXJuYWxzXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgd2FybiQxKFwiSW52YWxpZCBWTm9kZSB0eXBlOlwiLCB0eXBlLCBgKCR7dHlwZW9mIHR5cGV9KWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChyZWYgIT0gbnVsbCAmJiBwYXJlbnRDb21wb25lbnQpIHtcbiAgICAgIHNldFJlZihyZWYsIG4xICYmIG4xLnJlZiwgcGFyZW50U3VzcGVuc2UsIG4yIHx8IG4xLCAhbjIpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgcHJvY2Vzc1RleHQgPSAobjEsIG4yLCBjb250YWluZXIsIGFuY2hvcikgPT4ge1xuICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICBob3N0SW5zZXJ0KFxuICAgICAgICBuMi5lbCA9IGhvc3RDcmVhdGVUZXh0KG4yLmNoaWxkcmVuKSxcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBhbmNob3JcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGVsID0gbjIuZWwgPSBuMS5lbDtcbiAgICAgIGlmIChuMi5jaGlsZHJlbiAhPT0gbjEuY2hpbGRyZW4pIHtcbiAgICAgICAgaG9zdFNldFRleHQoZWwsIG4yLmNoaWxkcmVuKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IHByb2Nlc3NDb21tZW50Tm9kZSA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yKSA9PiB7XG4gICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgIGhvc3RJbnNlcnQoXG4gICAgICAgIG4yLmVsID0gaG9zdENyZWF0ZUNvbW1lbnQobjIuY2hpbGRyZW4gfHwgXCJcIiksXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgYW5jaG9yXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBuMi5lbCA9IG4xLmVsO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgbW91bnRTdGF0aWNOb2RlID0gKG4yLCBjb250YWluZXIsIGFuY2hvciwgbmFtZXNwYWNlKSA9PiB7XG4gICAgW24yLmVsLCBuMi5hbmNob3JdID0gaG9zdEluc2VydFN0YXRpY0NvbnRlbnQoXG4gICAgICBuMi5jaGlsZHJlbixcbiAgICAgIGNvbnRhaW5lcixcbiAgICAgIGFuY2hvcixcbiAgICAgIG5hbWVzcGFjZSxcbiAgICAgIG4yLmVsLFxuICAgICAgbjIuYW5jaG9yXG4gICAgKTtcbiAgfTtcbiAgY29uc3QgcGF0Y2hTdGF0aWNOb2RlID0gKG4xLCBuMiwgY29udGFpbmVyLCBuYW1lc3BhY2UpID0+IHtcbiAgICBpZiAobjIuY2hpbGRyZW4gIT09IG4xLmNoaWxkcmVuKSB7XG4gICAgICBjb25zdCBhbmNob3IgPSBob3N0TmV4dFNpYmxpbmcobjEuYW5jaG9yKTtcbiAgICAgIHJlbW92ZVN0YXRpY05vZGUobjEpO1xuICAgICAgW24yLmVsLCBuMi5hbmNob3JdID0gaG9zdEluc2VydFN0YXRpY0NvbnRlbnQoXG4gICAgICAgIG4yLmNoaWxkcmVuLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIGFuY2hvcixcbiAgICAgICAgbmFtZXNwYWNlXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBuMi5lbCA9IG4xLmVsO1xuICAgICAgbjIuYW5jaG9yID0gbjEuYW5jaG9yO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgbW92ZVN0YXRpY05vZGUgPSAoeyBlbCwgYW5jaG9yIH0sIGNvbnRhaW5lciwgbmV4dFNpYmxpbmcpID0+IHtcbiAgICBsZXQgbmV4dDtcbiAgICB3aGlsZSAoZWwgJiYgZWwgIT09IGFuY2hvcikge1xuICAgICAgbmV4dCA9IGhvc3ROZXh0U2libGluZyhlbCk7XG4gICAgICBob3N0SW5zZXJ0KGVsLCBjb250YWluZXIsIG5leHRTaWJsaW5nKTtcbiAgICAgIGVsID0gbmV4dDtcbiAgICB9XG4gICAgaG9zdEluc2VydChhbmNob3IsIGNvbnRhaW5lciwgbmV4dFNpYmxpbmcpO1xuICB9O1xuICBjb25zdCByZW1vdmVTdGF0aWNOb2RlID0gKHsgZWwsIGFuY2hvciB9KSA9PiB7XG4gICAgbGV0IG5leHQ7XG4gICAgd2hpbGUgKGVsICYmIGVsICE9PSBhbmNob3IpIHtcbiAgICAgIG5leHQgPSBob3N0TmV4dFNpYmxpbmcoZWwpO1xuICAgICAgaG9zdFJlbW92ZShlbCk7XG4gICAgICBlbCA9IG5leHQ7XG4gICAgfVxuICAgIGhvc3RSZW1vdmUoYW5jaG9yKTtcbiAgfTtcbiAgY29uc3QgcHJvY2Vzc0VsZW1lbnQgPSAobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgIGlmIChuMi50eXBlID09PSBcInN2Z1wiKSB7XG4gICAgICBuYW1lc3BhY2UgPSBcInN2Z1wiO1xuICAgIH0gZWxzZSBpZiAobjIudHlwZSA9PT0gXCJtYXRoXCIpIHtcbiAgICAgIG5hbWVzcGFjZSA9IFwibWF0aG1sXCI7XG4gICAgfVxuICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICBtb3VudEVsZW1lbnQoXG4gICAgICAgIG4yLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIGFuY2hvcixcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgIG9wdGltaXplZFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGF0Y2hFbGVtZW50KFxuICAgICAgICBuMSxcbiAgICAgICAgbjIsXG4gICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICk7XG4gICAgfVxuICB9O1xuICBjb25zdCBtb3VudEVsZW1lbnQgPSAodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBuYW1lc3BhY2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgbGV0IGVsO1xuICAgIGxldCB2bm9kZUhvb2s7XG4gICAgY29uc3QgeyBwcm9wcywgc2hhcGVGbGFnLCB0cmFuc2l0aW9uLCBkaXJzIH0gPSB2bm9kZTtcbiAgICBlbCA9IHZub2RlLmVsID0gaG9zdENyZWF0ZUVsZW1lbnQoXG4gICAgICB2bm9kZS50eXBlLFxuICAgICAgbmFtZXNwYWNlLFxuICAgICAgcHJvcHMgJiYgcHJvcHMuaXMsXG4gICAgICBwcm9wc1xuICAgICk7XG4gICAgaWYgKHNoYXBlRmxhZyAmIDgpIHtcbiAgICAgIGhvc3RTZXRFbGVtZW50VGV4dChlbCwgdm5vZGUuY2hpbGRyZW4pO1xuICAgIH0gZWxzZSBpZiAoc2hhcGVGbGFnICYgMTYpIHtcbiAgICAgIG1vdW50Q2hpbGRyZW4oXG4gICAgICAgIHZub2RlLmNoaWxkcmVuLFxuICAgICAgICBlbCxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgcmVzb2x2ZUNoaWxkcmVuTmFtZXNwYWNlKHZub2RlLCBuYW1lc3BhY2UpLFxuICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgIG9wdGltaXplZFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGRpcnMpIHtcbiAgICAgIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgXCJjcmVhdGVkXCIpO1xuICAgIH1cbiAgICBzZXRTY29wZUlkKGVsLCB2bm9kZSwgdm5vZGUuc2NvcGVJZCwgc2xvdFNjb3BlSWRzLCBwYXJlbnRDb21wb25lbnQpO1xuICAgIGlmIChwcm9wcykge1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcbiAgICAgICAgaWYgKGtleSAhPT0gXCJ2YWx1ZVwiICYmICFpc1Jlc2VydmVkUHJvcChrZXkpKSB7XG4gICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwga2V5LCBudWxsLCBwcm9wc1trZXldLCBuYW1lc3BhY2UsIHBhcmVudENvbXBvbmVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChcInZhbHVlXCIgaW4gcHJvcHMpIHtcbiAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwgXCJ2YWx1ZVwiLCBudWxsLCBwcm9wcy52YWx1ZSwgbmFtZXNwYWNlKTtcbiAgICAgIH1cbiAgICAgIGlmICh2bm9kZUhvb2sgPSBwcm9wcy5vblZub2RlQmVmb3JlTW91bnQpIHtcbiAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCB2bm9kZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgZGVmKGVsLCBcIl9fdm5vZGVcIiwgdm5vZGUsIHRydWUpO1xuICAgICAgZGVmKGVsLCBcIl9fdnVlUGFyZW50Q29tcG9uZW50XCIsIHBhcmVudENvbXBvbmVudCwgdHJ1ZSk7XG4gICAgfVxuICAgIGlmIChkaXJzKSB7XG4gICAgICBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIFwiYmVmb3JlTW91bnRcIik7XG4gICAgfVxuICAgIGNvbnN0IG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzID0gbmVlZFRyYW5zaXRpb24ocGFyZW50U3VzcGVuc2UsIHRyYW5zaXRpb24pO1xuICAgIGlmIChuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcykge1xuICAgICAgdHJhbnNpdGlvbi5iZWZvcmVFbnRlcihlbCk7XG4gICAgfVxuICAgIGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICBpZiAoKHZub2RlSG9vayA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVNb3VudGVkKSB8fCBuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcyB8fCBkaXJzKSB7XG4gICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICB2bm9kZUhvb2sgJiYgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCB2bm9kZSk7XG4gICAgICAgIG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzICYmIHRyYW5zaXRpb24uZW50ZXIoZWwpO1xuICAgICAgICBkaXJzICYmIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgXCJtb3VudGVkXCIpO1xuICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgIH1cbiAgfTtcbiAgY29uc3Qgc2V0U2NvcGVJZCA9IChlbCwgdm5vZGUsIHNjb3BlSWQsIHNsb3RTY29wZUlkcywgcGFyZW50Q29tcG9uZW50KSA9PiB7XG4gICAgaWYgKHNjb3BlSWQpIHtcbiAgICAgIGhvc3RTZXRTY29wZUlkKGVsLCBzY29wZUlkKTtcbiAgICB9XG4gICAgaWYgKHNsb3RTY29wZUlkcykge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbG90U2NvcGVJZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaG9zdFNldFNjb3BlSWQoZWwsIHNsb3RTY29wZUlkc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwYXJlbnRDb21wb25lbnQpIHtcbiAgICAgIGxldCBzdWJUcmVlID0gcGFyZW50Q29tcG9uZW50LnN1YlRyZWU7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBzdWJUcmVlLnBhdGNoRmxhZyA+IDAgJiYgc3ViVHJlZS5wYXRjaEZsYWcgJiAyMDQ4KSB7XG4gICAgICAgIHN1YlRyZWUgPSBmaWx0ZXJTaW5nbGVSb290KHN1YlRyZWUuY2hpbGRyZW4pIHx8IHN1YlRyZWU7XG4gICAgICB9XG4gICAgICBpZiAodm5vZGUgPT09IHN1YlRyZWUgfHwgaXNTdXNwZW5zZShzdWJUcmVlLnR5cGUpICYmIChzdWJUcmVlLnNzQ29udGVudCA9PT0gdm5vZGUgfHwgc3ViVHJlZS5zc0ZhbGxiYWNrID09PSB2bm9kZSkpIHtcbiAgICAgICAgY29uc3QgcGFyZW50Vk5vZGUgPSBwYXJlbnRDb21wb25lbnQudm5vZGU7XG4gICAgICAgIHNldFNjb3BlSWQoXG4gICAgICAgICAgZWwsXG4gICAgICAgICAgcGFyZW50Vk5vZGUsXG4gICAgICAgICAgcGFyZW50Vk5vZGUuc2NvcGVJZCxcbiAgICAgICAgICBwYXJlbnRWTm9kZS5zbG90U2NvcGVJZHMsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LnBhcmVudFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3QgbW91bnRDaGlsZHJlbiA9IChjaGlsZHJlbiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHN0YXJ0ID0gMCkgPT4ge1xuICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldID0gb3B0aW1pemVkID8gY2xvbmVJZk1vdW50ZWQoY2hpbGRyZW5baV0pIDogbm9ybWFsaXplVk5vZGUoY2hpbGRyZW5baV0pO1xuICAgICAgcGF0Y2goXG4gICAgICAgIG51bGwsXG4gICAgICAgIGNoaWxkLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIGFuY2hvcixcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgIG9wdGltaXplZFxuICAgICAgKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHBhdGNoRWxlbWVudCA9IChuMSwgbjIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBjb25zdCBlbCA9IG4yLmVsID0gbjEuZWw7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICBlbC5fX3Zub2RlID0gbjI7XG4gICAgfVxuICAgIGxldCB7IHBhdGNoRmxhZywgZHluYW1pY0NoaWxkcmVuLCBkaXJzIH0gPSBuMjtcbiAgICBwYXRjaEZsYWcgfD0gbjEucGF0Y2hGbGFnICYgMTY7XG4gICAgY29uc3Qgb2xkUHJvcHMgPSBuMS5wcm9wcyB8fCBFTVBUWV9PQko7XG4gICAgY29uc3QgbmV3UHJvcHMgPSBuMi5wcm9wcyB8fCBFTVBUWV9PQko7XG4gICAgbGV0IHZub2RlSG9vaztcbiAgICBwYXJlbnRDb21wb25lbnQgJiYgdG9nZ2xlUmVjdXJzZShwYXJlbnRDb21wb25lbnQsIGZhbHNlKTtcbiAgICBpZiAodm5vZGVIb29rID0gbmV3UHJvcHMub25Wbm9kZUJlZm9yZVVwZGF0ZSkge1xuICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCBuMiwgbjEpO1xuICAgIH1cbiAgICBpZiAoZGlycykge1xuICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayhuMiwgbjEsIHBhcmVudENvbXBvbmVudCwgXCJiZWZvcmVVcGRhdGVcIik7XG4gICAgfVxuICAgIHBhcmVudENvbXBvbmVudCAmJiB0b2dnbGVSZWN1cnNlKHBhcmVudENvbXBvbmVudCwgdHJ1ZSk7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgaXNIbXJVcGRhdGluZykge1xuICAgICAgcGF0Y2hGbGFnID0gMDtcbiAgICAgIG9wdGltaXplZCA9IGZhbHNlO1xuICAgICAgZHluYW1pY0NoaWxkcmVuID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKG9sZFByb3BzLmlubmVySFRNTCAmJiBuZXdQcm9wcy5pbm5lckhUTUwgPT0gbnVsbCB8fCBvbGRQcm9wcy50ZXh0Q29udGVudCAmJiBuZXdQcm9wcy50ZXh0Q29udGVudCA9PSBudWxsKSB7XG4gICAgICBob3N0U2V0RWxlbWVudFRleHQoZWwsIFwiXCIpO1xuICAgIH1cbiAgICBpZiAoZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICBwYXRjaEJsb2NrQ2hpbGRyZW4oXG4gICAgICAgIG4xLmR5bmFtaWNDaGlsZHJlbixcbiAgICAgICAgZHluYW1pY0NoaWxkcmVuLFxuICAgICAgICBlbCxcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgcmVzb2x2ZUNoaWxkcmVuTmFtZXNwYWNlKG4yLCBuYW1lc3BhY2UpLFxuICAgICAgICBzbG90U2NvcGVJZHNcbiAgICAgICk7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICB0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuKG4xLCBuMik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghb3B0aW1pemVkKSB7XG4gICAgICBwYXRjaENoaWxkcmVuKFxuICAgICAgICBuMSxcbiAgICAgICAgbjIsXG4gICAgICAgIGVsLFxuICAgICAgICBudWxsLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICByZXNvbHZlQ2hpbGRyZW5OYW1lc3BhY2UobjIsIG5hbWVzcGFjZSksXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChwYXRjaEZsYWcgPiAwKSB7XG4gICAgICBpZiAocGF0Y2hGbGFnICYgMTYpIHtcbiAgICAgICAgcGF0Y2hQcm9wcyhlbCwgb2xkUHJvcHMsIG5ld1Byb3BzLCBwYXJlbnRDb21wb25lbnQsIG5hbWVzcGFjZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocGF0Y2hGbGFnICYgMikge1xuICAgICAgICAgIGlmIChvbGRQcm9wcy5jbGFzcyAhPT0gbmV3UHJvcHMuY2xhc3MpIHtcbiAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIFwiY2xhc3NcIiwgbnVsbCwgbmV3UHJvcHMuY2xhc3MsIG5hbWVzcGFjZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYXRjaEZsYWcgJiA0KSB7XG4gICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwgXCJzdHlsZVwiLCBvbGRQcm9wcy5zdHlsZSwgbmV3UHJvcHMuc3R5bGUsIG5hbWVzcGFjZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhdGNoRmxhZyAmIDgpIHtcbiAgICAgICAgICBjb25zdCBwcm9wc1RvVXBkYXRlID0gbjIuZHluYW1pY1Byb3BzO1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvcHNUb1VwZGF0ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gcHJvcHNUb1VwZGF0ZVtpXTtcbiAgICAgICAgICAgIGNvbnN0IHByZXYgPSBvbGRQcm9wc1trZXldO1xuICAgICAgICAgICAgY29uc3QgbmV4dCA9IG5ld1Byb3BzW2tleV07XG4gICAgICAgICAgICBpZiAobmV4dCAhPT0gcHJldiB8fCBrZXkgPT09IFwidmFsdWVcIikge1xuICAgICAgICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCBrZXksIHByZXYsIG5leHQsIG5hbWVzcGFjZSwgcGFyZW50Q29tcG9uZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwYXRjaEZsYWcgJiAxKSB7XG4gICAgICAgIGlmIChuMS5jaGlsZHJlbiAhPT0gbjIuY2hpbGRyZW4pIHtcbiAgICAgICAgICBob3N0U2V0RWxlbWVudFRleHQoZWwsIG4yLmNoaWxkcmVuKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIW9wdGltaXplZCAmJiBkeW5hbWljQ2hpbGRyZW4gPT0gbnVsbCkge1xuICAgICAgcGF0Y2hQcm9wcyhlbCwgb2xkUHJvcHMsIG5ld1Byb3BzLCBwYXJlbnRDb21wb25lbnQsIG5hbWVzcGFjZSk7XG4gICAgfVxuICAgIGlmICgodm5vZGVIb29rID0gbmV3UHJvcHMub25Wbm9kZVVwZGF0ZWQpIHx8IGRpcnMpIHtcbiAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHZub2RlSG9vayAmJiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIG4yLCBuMSk7XG4gICAgICAgIGRpcnMgJiYgaW52b2tlRGlyZWN0aXZlSG9vayhuMiwgbjEsIHBhcmVudENvbXBvbmVudCwgXCJ1cGRhdGVkXCIpO1xuICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgcGF0Y2hCbG9ja0NoaWxkcmVuID0gKG9sZENoaWxkcmVuLCBuZXdDaGlsZHJlbiwgZmFsbGJhY2tDb250YWluZXIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdDaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgb2xkVk5vZGUgPSBvbGRDaGlsZHJlbltpXTtcbiAgICAgIGNvbnN0IG5ld1ZOb2RlID0gbmV3Q2hpbGRyZW5baV07XG4gICAgICBjb25zdCBjb250YWluZXIgPSAoXG4gICAgICAgIC8vIG9sZFZOb2RlIG1heSBiZSBhbiBlcnJvcmVkIGFzeW5jIHNldHVwKCkgY29tcG9uZW50IGluc2lkZSBTdXNwZW5zZVxuICAgICAgICAvLyB3aGljaCB3aWxsIG5vdCBoYXZlIGEgbW91bnRlZCBlbGVtZW50XG4gICAgICAgIG9sZFZOb2RlLmVsICYmIC8vIC0gSW4gdGhlIGNhc2Ugb2YgYSBGcmFnbWVudCwgd2UgbmVlZCB0byBwcm92aWRlIHRoZSBhY3R1YWwgcGFyZW50XG4gICAgICAgIC8vIG9mIHRoZSBGcmFnbWVudCBpdHNlbGYgc28gaXQgY2FuIG1vdmUgaXRzIGNoaWxkcmVuLlxuICAgICAgICAob2xkVk5vZGUudHlwZSA9PT0gRnJhZ21lbnQgfHwgLy8gLSBJbiB0aGUgY2FzZSBvZiBkaWZmZXJlbnQgbm9kZXMsIHRoZXJlIGlzIGdvaW5nIHRvIGJlIGEgcmVwbGFjZW1lbnRcbiAgICAgICAgLy8gd2hpY2ggYWxzbyByZXF1aXJlcyB0aGUgY29ycmVjdCBwYXJlbnQgY29udGFpbmVyXG4gICAgICAgICFpc1NhbWVWTm9kZVR5cGUob2xkVk5vZGUsIG5ld1ZOb2RlKSB8fCAvLyAtIEluIHRoZSBjYXNlIG9mIGEgY29tcG9uZW50LCBpdCBjb3VsZCBjb250YWluIGFueXRoaW5nLlxuICAgICAgICBvbGRWTm9kZS5zaGFwZUZsYWcgJiAoNiB8IDY0KSkgPyBob3N0UGFyZW50Tm9kZShvbGRWTm9kZS5lbCkgOiAoXG4gICAgICAgICAgLy8gSW4gb3RoZXIgY2FzZXMsIHRoZSBwYXJlbnQgY29udGFpbmVyIGlzIG5vdCBhY3R1YWxseSB1c2VkIHNvIHdlXG4gICAgICAgICAgLy8ganVzdCBwYXNzIHRoZSBibG9jayBlbGVtZW50IGhlcmUgdG8gYXZvaWQgYSBET00gcGFyZW50Tm9kZSBjYWxsLlxuICAgICAgICAgIGZhbGxiYWNrQ29udGFpbmVyXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICBwYXRjaChcbiAgICAgICAgb2xkVk5vZGUsXG4gICAgICAgIG5ld1ZOb2RlLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIG51bGwsXG4gICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICB0cnVlXG4gICAgICApO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgcGF0Y2hQcm9wcyA9IChlbCwgb2xkUHJvcHMsIG5ld1Byb3BzLCBwYXJlbnRDb21wb25lbnQsIG5hbWVzcGFjZSkgPT4ge1xuICAgIGlmIChvbGRQcm9wcyAhPT0gbmV3UHJvcHMpIHtcbiAgICAgIGlmIChvbGRQcm9wcyAhPT0gRU1QVFlfT0JKKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9sZFByb3BzKSB7XG4gICAgICAgICAgaWYgKCFpc1Jlc2VydmVkUHJvcChrZXkpICYmICEoa2V5IGluIG5ld1Byb3BzKSkge1xuICAgICAgICAgICAgaG9zdFBhdGNoUHJvcChcbiAgICAgICAgICAgICAgZWwsXG4gICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgb2xkUHJvcHNba2V5XSxcbiAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgICBwYXJlbnRDb21wb25lbnRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBuZXdQcm9wcykge1xuICAgICAgICBpZiAoaXNSZXNlcnZlZFByb3Aoa2V5KSkgY29udGludWU7XG4gICAgICAgIGNvbnN0IG5leHQgPSBuZXdQcm9wc1trZXldO1xuICAgICAgICBjb25zdCBwcmV2ID0gb2xkUHJvcHNba2V5XTtcbiAgICAgICAgaWYgKG5leHQgIT09IHByZXYgJiYga2V5ICE9PSBcInZhbHVlXCIpIHtcbiAgICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCBrZXksIHByZXYsIG5leHQsIG5hbWVzcGFjZSwgcGFyZW50Q29tcG9uZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKFwidmFsdWVcIiBpbiBuZXdQcm9wcykge1xuICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCBcInZhbHVlXCIsIG9sZFByb3BzLnZhbHVlLCBuZXdQcm9wcy52YWx1ZSwgbmFtZXNwYWNlKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IHByb2Nlc3NGcmFnbWVudCA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBuYW1lc3BhY2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgY29uc3QgZnJhZ21lbnRTdGFydEFuY2hvciA9IG4yLmVsID0gbjEgPyBuMS5lbCA6IGhvc3RDcmVhdGVUZXh0KFwiXCIpO1xuICAgIGNvbnN0IGZyYWdtZW50RW5kQW5jaG9yID0gbjIuYW5jaG9yID0gbjEgPyBuMS5hbmNob3IgOiBob3N0Q3JlYXRlVGV4dChcIlwiKTtcbiAgICBsZXQgeyBwYXRjaEZsYWcsIGR5bmFtaWNDaGlsZHJlbiwgc2xvdFNjb3BlSWRzOiBmcmFnbWVudFNsb3RTY29wZUlkcyB9ID0gbjI7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgLy8gIzU1MjMgZGV2IHJvb3QgZnJhZ21lbnQgbWF5IGluaGVyaXQgZGlyZWN0aXZlc1xuICAgIChpc0htclVwZGF0aW5nIHx8IHBhdGNoRmxhZyAmIDIwNDgpKSB7XG4gICAgICBwYXRjaEZsYWcgPSAwO1xuICAgICAgb3B0aW1pemVkID0gZmFsc2U7XG4gICAgICBkeW5hbWljQ2hpbGRyZW4gPSBudWxsO1xuICAgIH1cbiAgICBpZiAoZnJhZ21lbnRTbG90U2NvcGVJZHMpIHtcbiAgICAgIHNsb3RTY29wZUlkcyA9IHNsb3RTY29wZUlkcyA/IHNsb3RTY29wZUlkcy5jb25jYXQoZnJhZ21lbnRTbG90U2NvcGVJZHMpIDogZnJhZ21lbnRTbG90U2NvcGVJZHM7XG4gICAgfVxuICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICBob3N0SW5zZXJ0KGZyYWdtZW50U3RhcnRBbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgIGhvc3RJbnNlcnQoZnJhZ21lbnRFbmRBbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgIG1vdW50Q2hpbGRyZW4oXG4gICAgICAgIC8vICMxMDAwN1xuICAgICAgICAvLyBzdWNoIGZyYWdtZW50IGxpa2UgYDw+PC8+YCB3aWxsIGJlIGNvbXBpbGVkIGludG9cbiAgICAgICAgLy8gYSBmcmFnbWVudCB3aGljaCBkb2Vzbid0IGhhdmUgYSBjaGlsZHJlbi5cbiAgICAgICAgLy8gSW4gdGhpcyBjYXNlIGZhbGxiYWNrIHRvIGFuIGVtcHR5IGFycmF5XG4gICAgICAgIG4yLmNoaWxkcmVuIHx8IFtdLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIGZyYWdtZW50RW5kQW5jaG9yLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgb3B0aW1pemVkXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocGF0Y2hGbGFnID4gMCAmJiBwYXRjaEZsYWcgJiA2NCAmJiBkeW5hbWljQ2hpbGRyZW4gJiYgLy8gIzI3MTUgdGhlIHByZXZpb3VzIGZyYWdtZW50IGNvdWxkJ3ZlIGJlZW4gYSBCQUlMZWQgb25lIGFzIGEgcmVzdWx0XG4gICAgICAvLyBvZiByZW5kZXJTbG90KCkgd2l0aCBubyB2YWxpZCBjaGlsZHJlblxuICAgICAgbjEuZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICAgIHBhdGNoQmxvY2tDaGlsZHJlbihcbiAgICAgICAgICBuMS5keW5hbWljQ2hpbGRyZW4sXG4gICAgICAgICAgZHluYW1pY0NoaWxkcmVuLFxuICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkc1xuICAgICAgICApO1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHRyYXZlcnNlU3RhdGljQ2hpbGRyZW4objEsIG4yKTtcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAvLyAjMjA4MCBpZiB0aGUgc3RhYmxlIGZyYWdtZW50IGhhcyBhIGtleSwgaXQncyBhIDx0ZW1wbGF0ZSB2LWZvcj4gdGhhdCBtYXlcbiAgICAgICAgICAvLyAgZ2V0IG1vdmVkIGFyb3VuZC4gTWFrZSBzdXJlIGFsbCByb290IGxldmVsIHZub2RlcyBpbmhlcml0IGVsLlxuICAgICAgICAgIC8vICMyMTM0IG9yIGlmIGl0J3MgYSBjb21wb25lbnQgcm9vdCwgaXQgbWF5IGFsc28gZ2V0IG1vdmVkIGFyb3VuZFxuICAgICAgICAgIC8vIGFzIHRoZSBjb21wb25lbnQgaXMgYmVpbmcgbW92ZWQuXG4gICAgICAgICAgbjIua2V5ICE9IG51bGwgfHwgcGFyZW50Q29tcG9uZW50ICYmIG4yID09PSBwYXJlbnRDb21wb25lbnQuc3ViVHJlZVxuICAgICAgICApIHtcbiAgICAgICAgICB0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuKFxuICAgICAgICAgICAgbjEsXG4gICAgICAgICAgICBuMixcbiAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgIC8qIHNoYWxsb3cgKi9cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXRjaENoaWxkcmVuKFxuICAgICAgICAgIG4xLFxuICAgICAgICAgIG4yLFxuICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICBmcmFnbWVudEVuZEFuY2hvcixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IHByb2Nlc3NDb21wb25lbnQgPSAobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgIG4yLnNsb3RTY29wZUlkcyA9IHNsb3RTY29wZUlkcztcbiAgICBpZiAobjEgPT0gbnVsbCkge1xuICAgICAgaWYgKG4yLnNoYXBlRmxhZyAmIDUxMikge1xuICAgICAgICBwYXJlbnRDb21wb25lbnQuY3R4LmFjdGl2YXRlKFxuICAgICAgICAgIG4yLFxuICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICBhbmNob3IsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbW91bnRDb21wb25lbnQoXG4gICAgICAgICAgbjIsXG4gICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB1cGRhdGVDb21wb25lbnQobjEsIG4yLCBvcHRpbWl6ZWQpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgbW91bnRDb21wb25lbnQgPSAoaW5pdGlhbFZOb2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IChpbml0aWFsVk5vZGUuY29tcG9uZW50ID0gY3JlYXRlQ29tcG9uZW50SW5zdGFuY2UoXG4gICAgICBpbml0aWFsVk5vZGUsXG4gICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICBwYXJlbnRTdXNwZW5zZVxuICAgICkpO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGluc3RhbmNlLnR5cGUuX19obXJJZCkge1xuICAgICAgcmVnaXN0ZXJITVIoaW5zdGFuY2UpO1xuICAgIH1cbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KGluaXRpYWxWTm9kZSk7XG4gICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBtb3VudGApO1xuICAgIH1cbiAgICBpZiAoaXNLZWVwQWxpdmUoaW5pdGlhbFZOb2RlKSkge1xuICAgICAgaW5zdGFuY2UuY3R4LnJlbmRlcmVyID0gaW50ZXJuYWxzO1xuICAgIH1cbiAgICB7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBpbml0YCk7XG4gICAgICB9XG4gICAgICBzZXR1cENvbXBvbmVudChpbnN0YW5jZSwgZmFsc2UsIG9wdGltaXplZCk7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgaW5pdGApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBpc0htclVwZGF0aW5nKSBpbml0aWFsVk5vZGUuZWwgPSBudWxsO1xuICAgIGlmIChpbnN0YW5jZS5hc3luY0RlcCkge1xuICAgICAgcGFyZW50U3VzcGVuc2UgJiYgcGFyZW50U3VzcGVuc2UucmVnaXN0ZXJEZXAoaW5zdGFuY2UsIHNldHVwUmVuZGVyRWZmZWN0LCBvcHRpbWl6ZWQpO1xuICAgICAgaWYgKCFpbml0aWFsVk5vZGUuZWwpIHtcbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSBpbnN0YW5jZS5zdWJUcmVlID0gY3JlYXRlVk5vZGUoQ29tbWVudCk7XG4gICAgICAgIHByb2Nlc3NDb21tZW50Tm9kZShudWxsLCBwbGFjZWhvbGRlciwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzZXR1cFJlbmRlckVmZmVjdChcbiAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgIGluaXRpYWxWTm9kZSxcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBhbmNob3IsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIG9wdGltaXplZFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIHBvcFdhcm5pbmdDb250ZXh0KCk7XG4gICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgbW91bnRgKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHVwZGF0ZUNvbXBvbmVudCA9IChuMSwgbjIsIG9wdGltaXplZCkgPT4ge1xuICAgIGNvbnN0IGluc3RhbmNlID0gbjIuY29tcG9uZW50ID0gbjEuY29tcG9uZW50O1xuICAgIGlmIChzaG91bGRVcGRhdGVDb21wb25lbnQobjEsIG4yLCBvcHRpbWl6ZWQpKSB7XG4gICAgICBpZiAoaW5zdGFuY2UuYXN5bmNEZXAgJiYgIWluc3RhbmNlLmFzeW5jUmVzb2x2ZWQpIHtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBwdXNoV2FybmluZ0NvbnRleHQobjIpO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZUNvbXBvbmVudFByZVJlbmRlcihpbnN0YW5jZSwgbjIsIG9wdGltaXplZCk7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgcG9wV2FybmluZ0NvbnRleHQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnN0YW5jZS5uZXh0ID0gbjI7XG4gICAgICAgIGluc3RhbmNlLnVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBuMi5lbCA9IG4xLmVsO1xuICAgICAgaW5zdGFuY2Uudm5vZGUgPSBuMjtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHNldHVwUmVuZGVyRWZmZWN0ID0gKGluc3RhbmNlLCBpbml0aWFsVk5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBjb25zdCBjb21wb25lbnRVcGRhdGVGbiA9ICgpID0+IHtcbiAgICAgIGlmICghaW5zdGFuY2UuaXNNb3VudGVkKSB7XG4gICAgICAgIGxldCB2bm9kZUhvb2s7XG4gICAgICAgIGNvbnN0IHsgZWwsIHByb3BzIH0gPSBpbml0aWFsVk5vZGU7XG4gICAgICAgIGNvbnN0IHsgYm0sIG0sIHBhcmVudCwgcm9vdCwgdHlwZSB9ID0gaW5zdGFuY2U7XG4gICAgICAgIGNvbnN0IGlzQXN5bmNXcmFwcGVyVk5vZGUgPSBpc0FzeW5jV3JhcHBlcihpbml0aWFsVk5vZGUpO1xuICAgICAgICB0b2dnbGVSZWN1cnNlKGluc3RhbmNlLCBmYWxzZSk7XG4gICAgICAgIGlmIChibSkge1xuICAgICAgICAgIGludm9rZUFycmF5Rm5zKGJtKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzQXN5bmNXcmFwcGVyVk5vZGUgJiYgKHZub2RlSG9vayA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVCZWZvcmVNb3VudCkpIHtcbiAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnQsIGluaXRpYWxWTm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdG9nZ2xlUmVjdXJzZShpbnN0YW5jZSwgdHJ1ZSk7XG4gICAgICAgIGlmIChlbCAmJiBoeWRyYXRlTm9kZSkge1xuICAgICAgICAgIGNvbnN0IGh5ZHJhdGVTdWJUcmVlID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgcmVuZGVyYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnN0YW5jZS5zdWJUcmVlID0gcmVuZGVyQ29tcG9uZW50Um9vdChpbnN0YW5jZSk7XG4gICAgICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgcmVuZGVyYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBoeWRyYXRlYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoeWRyYXRlTm9kZShcbiAgICAgICAgICAgICAgZWwsXG4gICAgICAgICAgICAgIGluc3RhbmNlLnN1YlRyZWUsXG4gICAgICAgICAgICAgIGluc3RhbmNlLFxuICAgICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgICAgbnVsbFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGBoeWRyYXRlYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBpZiAoaXNBc3luY1dyYXBwZXJWTm9kZSAmJiB0eXBlLl9fYXN5bmNIeWRyYXRlKSB7XG4gICAgICAgICAgICB0eXBlLl9fYXN5bmNIeWRyYXRlKFxuICAgICAgICAgICAgICBlbCxcbiAgICAgICAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgICAgICAgIGh5ZHJhdGVTdWJUcmVlXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoeWRyYXRlU3ViVHJlZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAocm9vdC5jZSkge1xuICAgICAgICAgICAgcm9vdC5jZS5faW5qZWN0Q2hpbGRTdHlsZSh0eXBlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBzdWJUcmVlID0gaW5zdGFuY2Uuc3ViVHJlZSA9IHJlbmRlckNvbXBvbmVudFJvb3QoaW5zdGFuY2UpO1xuICAgICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgcmVuZGVyYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBwYXRjaGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwYXRjaChcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBzdWJUcmVlLFxuICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgIG5hbWVzcGFjZVxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGBwYXRjaGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpbml0aWFsVk5vZGUuZWwgPSBzdWJUcmVlLmVsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtKSB7XG4gICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KG0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzQXN5bmNXcmFwcGVyVk5vZGUgJiYgKHZub2RlSG9vayA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVNb3VudGVkKSkge1xuICAgICAgICAgIGNvbnN0IHNjb3BlZEluaXRpYWxWTm9kZSA9IGluaXRpYWxWTm9kZTtcbiAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoXG4gICAgICAgICAgICAoKSA9PiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnQsIHNjb3BlZEluaXRpYWxWTm9kZSksXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluaXRpYWxWTm9kZS5zaGFwZUZsYWcgJiAyNTYgfHwgcGFyZW50ICYmIGlzQXN5bmNXcmFwcGVyKHBhcmVudC52bm9kZSkgJiYgcGFyZW50LnZub2RlLnNoYXBlRmxhZyAmIDI1Nikge1xuICAgICAgICAgIGluc3RhbmNlLmEgJiYgcXVldWVQb3N0UmVuZGVyRWZmZWN0KGluc3RhbmNlLmEsIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgfVxuICAgICAgICBpbnN0YW5jZS5pc01vdW50ZWQgPSB0cnVlO1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgICAgICBkZXZ0b29sc0NvbXBvbmVudEFkZGVkKGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgICAgICBpbml0aWFsVk5vZGUgPSBjb250YWluZXIgPSBhbmNob3IgPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHsgbmV4dCwgYnUsIHUsIHBhcmVudCwgdm5vZGUgfSA9IGluc3RhbmNlO1xuICAgICAgICB7XG4gICAgICAgICAgY29uc3Qgbm9uSHlkcmF0ZWRBc3luY1Jvb3QgPSBsb2NhdGVOb25IeWRyYXRlZEFzeW5jUm9vdChpbnN0YW5jZSk7XG4gICAgICAgICAgaWYgKG5vbkh5ZHJhdGVkQXN5bmNSb290KSB7XG4gICAgICAgICAgICBpZiAobmV4dCkge1xuICAgICAgICAgICAgICBuZXh0LmVsID0gdm5vZGUuZWw7XG4gICAgICAgICAgICAgIHVwZGF0ZUNvbXBvbmVudFByZVJlbmRlcihpbnN0YW5jZSwgbmV4dCwgb3B0aW1pemVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vbkh5ZHJhdGVkQXN5bmNSb290LmFzeW5jRGVwLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoIWluc3RhbmNlLmlzVW5tb3VudGVkKSB7XG4gICAgICAgICAgICAgICAgY29tcG9uZW50VXBkYXRlRm4oKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBvcmlnaW5OZXh0ID0gbmV4dDtcbiAgICAgICAgbGV0IHZub2RlSG9vaztcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBwdXNoV2FybmluZ0NvbnRleHQobmV4dCB8fCBpbnN0YW5jZS52bm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdG9nZ2xlUmVjdXJzZShpbnN0YW5jZSwgZmFsc2UpO1xuICAgICAgICBpZiAobmV4dCkge1xuICAgICAgICAgIG5leHQuZWwgPSB2bm9kZS5lbDtcbiAgICAgICAgICB1cGRhdGVDb21wb25lbnRQcmVSZW5kZXIoaW5zdGFuY2UsIG5leHQsIG9wdGltaXplZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV4dCA9IHZub2RlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChidSkge1xuICAgICAgICAgIGludm9rZUFycmF5Rm5zKGJ1KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodm5vZGVIb29rID0gbmV4dC5wcm9wcyAmJiBuZXh0LnByb3BzLm9uVm5vZGVCZWZvcmVVcGRhdGUpIHtcbiAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnQsIG5leHQsIHZub2RlKTtcbiAgICAgICAgfVxuICAgICAgICB0b2dnbGVSZWN1cnNlKGluc3RhbmNlLCB0cnVlKTtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXh0VHJlZSA9IHJlbmRlckNvbXBvbmVudFJvb3QoaW5zdGFuY2UpO1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmV2VHJlZSA9IGluc3RhbmNlLnN1YlRyZWU7XG4gICAgICAgIGluc3RhbmNlLnN1YlRyZWUgPSBuZXh0VHJlZTtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBwYXRjaGApO1xuICAgICAgICB9XG4gICAgICAgIHBhdGNoKFxuICAgICAgICAgIHByZXZUcmVlLFxuICAgICAgICAgIG5leHRUcmVlLFxuICAgICAgICAgIC8vIHBhcmVudCBtYXkgaGF2ZSBjaGFuZ2VkIGlmIGl0J3MgaW4gYSB0ZWxlcG9ydFxuICAgICAgICAgIGhvc3RQYXJlbnROb2RlKHByZXZUcmVlLmVsKSxcbiAgICAgICAgICAvLyBhbmNob3IgbWF5IGhhdmUgY2hhbmdlZCBpZiBpdCdzIGluIGEgZnJhZ21lbnRcbiAgICAgICAgICBnZXROZXh0SG9zdE5vZGUocHJldlRyZWUpLFxuICAgICAgICAgIGluc3RhbmNlLFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIG5hbWVzcGFjZVxuICAgICAgICApO1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGBwYXRjaGApO1xuICAgICAgICB9XG4gICAgICAgIG5leHQuZWwgPSBuZXh0VHJlZS5lbDtcbiAgICAgICAgaWYgKG9yaWdpbk5leHQgPT09IG51bGwpIHtcbiAgICAgICAgICB1cGRhdGVIT0NIb3N0RWwoaW5zdGFuY2UsIG5leHRUcmVlLmVsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodSkge1xuICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCh1LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZub2RlSG9vayA9IG5leHQucHJvcHMgJiYgbmV4dC5wcm9wcy5vblZub2RlVXBkYXRlZCkge1xuICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdChcbiAgICAgICAgICAgICgpID0+IGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudCwgbmV4dCwgdm5vZGUpLFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2VcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICAgIGRldnRvb2xzQ29tcG9uZW50VXBkYXRlZChpbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBpbnN0YW5jZS5zY29wZS5vbigpO1xuICAgIGNvbnN0IGVmZmVjdCA9IGluc3RhbmNlLmVmZmVjdCA9IG5ldyBSZWFjdGl2ZUVmZmVjdChjb21wb25lbnRVcGRhdGVGbik7XG4gICAgaW5zdGFuY2Uuc2NvcGUub2ZmKCk7XG4gICAgY29uc3QgdXBkYXRlID0gaW5zdGFuY2UudXBkYXRlID0gZWZmZWN0LnJ1bi5iaW5kKGVmZmVjdCk7XG4gICAgY29uc3Qgam9iID0gaW5zdGFuY2Uuam9iID0gZWZmZWN0LnJ1bklmRGlydHkuYmluZChlZmZlY3QpO1xuICAgIGpvYi5pID0gaW5zdGFuY2U7XG4gICAgam9iLmlkID0gaW5zdGFuY2UudWlkO1xuICAgIGVmZmVjdC5zY2hlZHVsZXIgPSAoKSA9PiBxdWV1ZUpvYihqb2IpO1xuICAgIHRvZ2dsZVJlY3Vyc2UoaW5zdGFuY2UsIHRydWUpO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICBlZmZlY3Qub25UcmFjayA9IGluc3RhbmNlLnJ0YyA/IChlKSA9PiBpbnZva2VBcnJheUZucyhpbnN0YW5jZS5ydGMsIGUpIDogdm9pZCAwO1xuICAgICAgZWZmZWN0Lm9uVHJpZ2dlciA9IGluc3RhbmNlLnJ0ZyA/IChlKSA9PiBpbnZva2VBcnJheUZucyhpbnN0YW5jZS5ydGcsIGUpIDogdm9pZCAwO1xuICAgIH1cbiAgICB1cGRhdGUoKTtcbiAgfTtcbiAgY29uc3QgdXBkYXRlQ29tcG9uZW50UHJlUmVuZGVyID0gKGluc3RhbmNlLCBuZXh0Vk5vZGUsIG9wdGltaXplZCkgPT4ge1xuICAgIG5leHRWTm9kZS5jb21wb25lbnQgPSBpbnN0YW5jZTtcbiAgICBjb25zdCBwcmV2UHJvcHMgPSBpbnN0YW5jZS52bm9kZS5wcm9wcztcbiAgICBpbnN0YW5jZS52bm9kZSA9IG5leHRWTm9kZTtcbiAgICBpbnN0YW5jZS5uZXh0ID0gbnVsbDtcbiAgICB1cGRhdGVQcm9wcyhpbnN0YW5jZSwgbmV4dFZOb2RlLnByb3BzLCBwcmV2UHJvcHMsIG9wdGltaXplZCk7XG4gICAgdXBkYXRlU2xvdHMoaW5zdGFuY2UsIG5leHRWTm9kZS5jaGlsZHJlbiwgb3B0aW1pemVkKTtcbiAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgZmx1c2hQcmVGbHVzaENicyhpbnN0YW5jZSk7XG4gICAgcmVzZXRUcmFja2luZygpO1xuICB9O1xuICBjb25zdCBwYXRjaENoaWxkcmVuID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQgPSBmYWxzZSkgPT4ge1xuICAgIGNvbnN0IGMxID0gbjEgJiYgbjEuY2hpbGRyZW47XG4gICAgY29uc3QgcHJldlNoYXBlRmxhZyA9IG4xID8gbjEuc2hhcGVGbGFnIDogMDtcbiAgICBjb25zdCBjMiA9IG4yLmNoaWxkcmVuO1xuICAgIGNvbnN0IHsgcGF0Y2hGbGFnLCBzaGFwZUZsYWcgfSA9IG4yO1xuICAgIGlmIChwYXRjaEZsYWcgPiAwKSB7XG4gICAgICBpZiAocGF0Y2hGbGFnICYgMTI4KSB7XG4gICAgICAgIHBhdGNoS2V5ZWRDaGlsZHJlbihcbiAgICAgICAgICBjMSxcbiAgICAgICAgICBjMixcbiAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2UgaWYgKHBhdGNoRmxhZyAmIDI1Nikge1xuICAgICAgICBwYXRjaFVua2V5ZWRDaGlsZHJlbihcbiAgICAgICAgICBjMSxcbiAgICAgICAgICBjMixcbiAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChzaGFwZUZsYWcgJiA4KSB7XG4gICAgICBpZiAocHJldlNoYXBlRmxhZyAmIDE2KSB7XG4gICAgICAgIHVubW91bnRDaGlsZHJlbihjMSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICB9XG4gICAgICBpZiAoYzIgIT09IGMxKSB7XG4gICAgICAgIGhvc3RTZXRFbGVtZW50VGV4dChjb250YWluZXIsIGMyKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHByZXZTaGFwZUZsYWcgJiAxNikge1xuICAgICAgICBpZiAoc2hhcGVGbGFnICYgMTYpIHtcbiAgICAgICAgICBwYXRjaEtleWVkQ2hpbGRyZW4oXG4gICAgICAgICAgICBjMSxcbiAgICAgICAgICAgIGMyLFxuICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVubW91bnRDaGlsZHJlbihjMSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChwcmV2U2hhcGVGbGFnICYgOCkge1xuICAgICAgICAgIGhvc3RTZXRFbGVtZW50VGV4dChjb250YWluZXIsIFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiAxNikge1xuICAgICAgICAgIG1vdW50Q2hpbGRyZW4oXG4gICAgICAgICAgICBjMixcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3QgcGF0Y2hVbmtleWVkQ2hpbGRyZW4gPSAoYzEsIGMyLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgIGMxID0gYzEgfHwgRU1QVFlfQVJSO1xuICAgIGMyID0gYzIgfHwgRU1QVFlfQVJSO1xuICAgIGNvbnN0IG9sZExlbmd0aCA9IGMxLmxlbmd0aDtcbiAgICBjb25zdCBuZXdMZW5ndGggPSBjMi5sZW5ndGg7XG4gICAgY29uc3QgY29tbW9uTGVuZ3RoID0gTWF0aC5taW4ob2xkTGVuZ3RoLCBuZXdMZW5ndGgpO1xuICAgIGxldCBpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBjb21tb25MZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgbmV4dENoaWxkID0gYzJbaV0gPSBvcHRpbWl6ZWQgPyBjbG9uZUlmTW91bnRlZChjMltpXSkgOiBub3JtYWxpemVWTm9kZShjMltpXSk7XG4gICAgICBwYXRjaChcbiAgICAgICAgYzFbaV0sXG4gICAgICAgIG5leHRDaGlsZCxcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBudWxsLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgb3B0aW1pemVkXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAob2xkTGVuZ3RoID4gbmV3TGVuZ3RoKSB7XG4gICAgICB1bm1vdW50Q2hpbGRyZW4oXG4gICAgICAgIGMxLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICB0cnVlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgY29tbW9uTGVuZ3RoXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBtb3VudENoaWxkcmVuKFxuICAgICAgICBjMixcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBhbmNob3IsXG4gICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICBvcHRpbWl6ZWQsXG4gICAgICAgIGNvbW1vbkxlbmd0aFxuICAgICAgKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHBhdGNoS2V5ZWRDaGlsZHJlbiA9IChjMSwgYzIsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBuYW1lc3BhY2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgbGV0IGkgPSAwO1xuICAgIGNvbnN0IGwyID0gYzIubGVuZ3RoO1xuICAgIGxldCBlMSA9IGMxLmxlbmd0aCAtIDE7XG4gICAgbGV0IGUyID0gbDIgLSAxO1xuICAgIHdoaWxlIChpIDw9IGUxICYmIGkgPD0gZTIpIHtcbiAgICAgIGNvbnN0IG4xID0gYzFbaV07XG4gICAgICBjb25zdCBuMiA9IGMyW2ldID0gb3B0aW1pemVkID8gY2xvbmVJZk1vdW50ZWQoYzJbaV0pIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pO1xuICAgICAgaWYgKGlzU2FtZVZOb2RlVHlwZShuMSwgbjIpKSB7XG4gICAgICAgIHBhdGNoKFxuICAgICAgICAgIG4xLFxuICAgICAgICAgIG4yLFxuICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpKys7XG4gICAgfVxuICAgIHdoaWxlIChpIDw9IGUxICYmIGkgPD0gZTIpIHtcbiAgICAgIGNvbnN0IG4xID0gYzFbZTFdO1xuICAgICAgY29uc3QgbjIgPSBjMltlMl0gPSBvcHRpbWl6ZWQgPyBjbG9uZUlmTW91bnRlZChjMltlMl0pIDogbm9ybWFsaXplVk5vZGUoYzJbZTJdKTtcbiAgICAgIGlmIChpc1NhbWVWTm9kZVR5cGUobjEsIG4yKSkge1xuICAgICAgICBwYXRjaChcbiAgICAgICAgICBuMSxcbiAgICAgICAgICBuMixcbiAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgZTEtLTtcbiAgICAgIGUyLS07XG4gICAgfVxuICAgIGlmIChpID4gZTEpIHtcbiAgICAgIGlmIChpIDw9IGUyKSB7XG4gICAgICAgIGNvbnN0IG5leHRQb3MgPSBlMiArIDE7XG4gICAgICAgIGNvbnN0IGFuY2hvciA9IG5leHRQb3MgPCBsMiA/IGMyW25leHRQb3NdLmVsIDogcGFyZW50QW5jaG9yO1xuICAgICAgICB3aGlsZSAoaSA8PSBlMikge1xuICAgICAgICAgIHBhdGNoKFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIGMyW2ldID0gb3B0aW1pemVkID8gY2xvbmVJZk1vdW50ZWQoYzJbaV0pIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pLFxuICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgICApO1xuICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaSA+IGUyKSB7XG4gICAgICB3aGlsZSAoaSA8PSBlMSkge1xuICAgICAgICB1bm1vdW50KGMxW2ldLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB0cnVlKTtcbiAgICAgICAgaSsrO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzMSA9IGk7XG4gICAgICBjb25zdCBzMiA9IGk7XG4gICAgICBjb25zdCBrZXlUb05ld0luZGV4TWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICAgIGZvciAoaSA9IHMyOyBpIDw9IGUyOyBpKyspIHtcbiAgICAgICAgY29uc3QgbmV4dENoaWxkID0gYzJbaV0gPSBvcHRpbWl6ZWQgPyBjbG9uZUlmTW91bnRlZChjMltpXSkgOiBub3JtYWxpemVWTm9kZShjMltpXSk7XG4gICAgICAgIGlmIChuZXh0Q2hpbGQua2V5ICE9IG51bGwpIHtcbiAgICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBrZXlUb05ld0luZGV4TWFwLmhhcyhuZXh0Q2hpbGQua2V5KSkge1xuICAgICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgICBgRHVwbGljYXRlIGtleXMgZm91bmQgZHVyaW5nIHVwZGF0ZTpgLFxuICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShuZXh0Q2hpbGQua2V5KSxcbiAgICAgICAgICAgICAgYE1ha2Ugc3VyZSBrZXlzIGFyZSB1bmlxdWUuYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAga2V5VG9OZXdJbmRleE1hcC5zZXQobmV4dENoaWxkLmtleSwgaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxldCBqO1xuICAgICAgbGV0IHBhdGNoZWQgPSAwO1xuICAgICAgY29uc3QgdG9CZVBhdGNoZWQgPSBlMiAtIHMyICsgMTtcbiAgICAgIGxldCBtb3ZlZCA9IGZhbHNlO1xuICAgICAgbGV0IG1heE5ld0luZGV4U29GYXIgPSAwO1xuICAgICAgY29uc3QgbmV3SW5kZXhUb09sZEluZGV4TWFwID0gbmV3IEFycmF5KHRvQmVQYXRjaGVkKTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0b0JlUGF0Y2hlZDsgaSsrKSBuZXdJbmRleFRvT2xkSW5kZXhNYXBbaV0gPSAwO1xuICAgICAgZm9yIChpID0gczE7IGkgPD0gZTE7IGkrKykge1xuICAgICAgICBjb25zdCBwcmV2Q2hpbGQgPSBjMVtpXTtcbiAgICAgICAgaWYgKHBhdGNoZWQgPj0gdG9CZVBhdGNoZWQpIHtcbiAgICAgICAgICB1bm1vdW50KHByZXZDaGlsZCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5ld0luZGV4O1xuICAgICAgICBpZiAocHJldkNoaWxkLmtleSAhPSBudWxsKSB7XG4gICAgICAgICAgbmV3SW5kZXggPSBrZXlUb05ld0luZGV4TWFwLmdldChwcmV2Q2hpbGQua2V5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3IgKGogPSBzMjsgaiA8PSBlMjsgaisrKSB7XG4gICAgICAgICAgICBpZiAobmV3SW5kZXhUb09sZEluZGV4TWFwW2ogLSBzMl0gPT09IDAgJiYgaXNTYW1lVk5vZGVUeXBlKHByZXZDaGlsZCwgYzJbal0pKSB7XG4gICAgICAgICAgICAgIG5ld0luZGV4ID0gajtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdJbmRleCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdW5tb3VudChwcmV2Q2hpbGQsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld0luZGV4VG9PbGRJbmRleE1hcFtuZXdJbmRleCAtIHMyXSA9IGkgKyAxO1xuICAgICAgICAgIGlmIChuZXdJbmRleCA+PSBtYXhOZXdJbmRleFNvRmFyKSB7XG4gICAgICAgICAgICBtYXhOZXdJbmRleFNvRmFyID0gbmV3SW5kZXg7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1vdmVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGF0Y2goXG4gICAgICAgICAgICBwcmV2Q2hpbGQsXG4gICAgICAgICAgICBjMltuZXdJbmRleF0sXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgICApO1xuICAgICAgICAgIHBhdGNoZWQrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgaW5jcmVhc2luZ05ld0luZGV4U2VxdWVuY2UgPSBtb3ZlZCA/IGdldFNlcXVlbmNlKG5ld0luZGV4VG9PbGRJbmRleE1hcCkgOiBFTVBUWV9BUlI7XG4gICAgICBqID0gaW5jcmVhc2luZ05ld0luZGV4U2VxdWVuY2UubGVuZ3RoIC0gMTtcbiAgICAgIGZvciAoaSA9IHRvQmVQYXRjaGVkIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgY29uc3QgbmV4dEluZGV4ID0gczIgKyBpO1xuICAgICAgICBjb25zdCBuZXh0Q2hpbGQgPSBjMltuZXh0SW5kZXhdO1xuICAgICAgICBjb25zdCBhbmNob3IgPSBuZXh0SW5kZXggKyAxIDwgbDIgPyBjMltuZXh0SW5kZXggKyAxXS5lbCA6IHBhcmVudEFuY2hvcjtcbiAgICAgICAgaWYgKG5ld0luZGV4VG9PbGRJbmRleE1hcFtpXSA9PT0gMCkge1xuICAgICAgICAgIHBhdGNoKFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIG5leHRDaGlsZCxcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChtb3ZlZCkge1xuICAgICAgICAgIGlmIChqIDwgMCB8fCBpICE9PSBpbmNyZWFzaW5nTmV3SW5kZXhTZXF1ZW5jZVtqXSkge1xuICAgICAgICAgICAgbW92ZShuZXh0Q2hpbGQsIGNvbnRhaW5lciwgYW5jaG9yLCAyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgai0tO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3QgbW92ZSA9ICh2bm9kZSwgY29udGFpbmVyLCBhbmNob3IsIG1vdmVUeXBlLCBwYXJlbnRTdXNwZW5zZSA9IG51bGwpID0+IHtcbiAgICBjb25zdCB7IGVsLCB0eXBlLCB0cmFuc2l0aW9uLCBjaGlsZHJlbiwgc2hhcGVGbGFnIH0gPSB2bm9kZTtcbiAgICBpZiAoc2hhcGVGbGFnICYgNikge1xuICAgICAgbW92ZSh2bm9kZS5jb21wb25lbnQuc3ViVHJlZSwgY29udGFpbmVyLCBhbmNob3IsIG1vdmVUeXBlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHNoYXBlRmxhZyAmIDEyOCkge1xuICAgICAgdm5vZGUuc3VzcGVuc2UubW92ZShjb250YWluZXIsIGFuY2hvciwgbW92ZVR5cGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoc2hhcGVGbGFnICYgNjQpIHtcbiAgICAgIHR5cGUubW92ZSh2bm9kZSwgY29udGFpbmVyLCBhbmNob3IsIGludGVybmFscyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0eXBlID09PSBGcmFnbWVudCkge1xuICAgICAgaG9zdEluc2VydChlbCwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBtb3ZlKGNoaWxkcmVuW2ldLCBjb250YWluZXIsIGFuY2hvciwgbW92ZVR5cGUpO1xuICAgICAgfVxuICAgICAgaG9zdEluc2VydCh2bm9kZS5hbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGUgPT09IFN0YXRpYykge1xuICAgICAgbW92ZVN0YXRpY05vZGUodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbmVlZFRyYW5zaXRpb24yID0gbW92ZVR5cGUgIT09IDIgJiYgc2hhcGVGbGFnICYgMSAmJiB0cmFuc2l0aW9uO1xuICAgIGlmIChuZWVkVHJhbnNpdGlvbjIpIHtcbiAgICAgIGlmIChtb3ZlVHlwZSA9PT0gMCkge1xuICAgICAgICB0cmFuc2l0aW9uLmJlZm9yZUVudGVyKGVsKTtcbiAgICAgICAgaG9zdEluc2VydChlbCwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4gdHJhbnNpdGlvbi5lbnRlcihlbCksIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHsgbGVhdmUsIGRlbGF5TGVhdmUsIGFmdGVyTGVhdmUgfSA9IHRyYW5zaXRpb247XG4gICAgICAgIGNvbnN0IHJlbW92ZTIgPSAoKSA9PiB7XG4gICAgICAgICAgaWYgKHZub2RlLmN0eC5pc1VubW91bnRlZCkge1xuICAgICAgICAgICAgaG9zdFJlbW92ZShlbCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHBlcmZvcm1MZWF2ZSA9ICgpID0+IHtcbiAgICAgICAgICBsZWF2ZShlbCwgKCkgPT4ge1xuICAgICAgICAgICAgcmVtb3ZlMigpO1xuICAgICAgICAgICAgYWZ0ZXJMZWF2ZSAmJiBhZnRlckxlYXZlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChkZWxheUxlYXZlKSB7XG4gICAgICAgICAgZGVsYXlMZWF2ZShlbCwgcmVtb3ZlMiwgcGVyZm9ybUxlYXZlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwZXJmb3JtTGVhdmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBob3N0SW5zZXJ0KGVsLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgfVxuICB9O1xuICBjb25zdCB1bm1vdW50ID0gKHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSA9IGZhbHNlLCBvcHRpbWl6ZWQgPSBmYWxzZSkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHR5cGUsXG4gICAgICBwcm9wcyxcbiAgICAgIHJlZixcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgZHluYW1pY0NoaWxkcmVuLFxuICAgICAgc2hhcGVGbGFnLFxuICAgICAgcGF0Y2hGbGFnLFxuICAgICAgZGlycyxcbiAgICAgIGNhY2hlSW5kZXhcbiAgICB9ID0gdm5vZGU7XG4gICAgaWYgKHBhdGNoRmxhZyA9PT0gLTIpIHtcbiAgICAgIG9wdGltaXplZCA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAocmVmICE9IG51bGwpIHtcbiAgICAgIHBhdXNlVHJhY2tpbmcoKTtcbiAgICAgIHNldFJlZihyZWYsIG51bGwsIHBhcmVudFN1c3BlbnNlLCB2bm9kZSwgdHJ1ZSk7XG4gICAgICByZXNldFRyYWNraW5nKCk7XG4gICAgfVxuICAgIGlmIChjYWNoZUluZGV4ICE9IG51bGwpIHtcbiAgICAgIHBhcmVudENvbXBvbmVudC5yZW5kZXJDYWNoZVtjYWNoZUluZGV4XSA9IHZvaWQgMDtcbiAgICB9XG4gICAgaWYgKHNoYXBlRmxhZyAmIDI1Nikge1xuICAgICAgcGFyZW50Q29tcG9uZW50LmN0eC5kZWFjdGl2YXRlKHZub2RlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc2hvdWxkSW52b2tlRGlycyA9IHNoYXBlRmxhZyAmIDEgJiYgZGlycztcbiAgICBjb25zdCBzaG91bGRJbnZva2VWbm9kZUhvb2sgPSAhaXNBc3luY1dyYXBwZXIodm5vZGUpO1xuICAgIGxldCB2bm9kZUhvb2s7XG4gICAgaWYgKHNob3VsZEludm9rZVZub2RlSG9vayAmJiAodm5vZGVIb29rID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZUJlZm9yZVVubW91bnQpKSB7XG4gICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIHZub2RlKTtcbiAgICB9XG4gICAgaWYgKHNoYXBlRmxhZyAmIDYpIHtcbiAgICAgIHVubW91bnRDb21wb25lbnQodm5vZGUuY29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoc2hhcGVGbGFnICYgMTI4KSB7XG4gICAgICAgIHZub2RlLnN1c3BlbnNlLnVubW91bnQocGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHNob3VsZEludm9rZURpcnMpIHtcbiAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBcImJlZm9yZVVubW91bnRcIik7XG4gICAgICB9XG4gICAgICBpZiAoc2hhcGVGbGFnICYgNjQpIHtcbiAgICAgICAgdm5vZGUudHlwZS5yZW1vdmUoXG4gICAgICAgICAgdm5vZGUsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIGludGVybmFscyxcbiAgICAgICAgICBkb1JlbW92ZVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChkeW5hbWljQ2hpbGRyZW4gJiYgLy8gIzUxNTRcbiAgICAgIC8vIHdoZW4gdi1vbmNlIGlzIHVzZWQgaW5zaWRlIGEgYmxvY2ssIHNldEJsb2NrVHJhY2tpbmcoLTEpIG1hcmtzIHRoZVxuICAgICAgLy8gcGFyZW50IGJsb2NrIHdpdGggaGFzT25jZTogdHJ1ZVxuICAgICAgLy8gc28gdGhhdCBpdCBkb2Vzbid0IHRha2UgdGhlIGZhc3QgcGF0aCBkdXJpbmcgdW5tb3VudCAtIG90aGVyd2lzZVxuICAgICAgLy8gY29tcG9uZW50cyBuZXN0ZWQgaW4gdi1vbmNlIGFyZSBuZXZlciB1bm1vdW50ZWQuXG4gICAgICAhZHluYW1pY0NoaWxkcmVuLmhhc09uY2UgJiYgLy8gIzExNTM6IGZhc3QgcGF0aCBzaG91bGQgbm90IGJlIHRha2VuIGZvciBub24tc3RhYmxlICh2LWZvcikgZnJhZ21lbnRzXG4gICAgICAodHlwZSAhPT0gRnJhZ21lbnQgfHwgcGF0Y2hGbGFnID4gMCAmJiBwYXRjaEZsYWcgJiA2NCkpIHtcbiAgICAgICAgdW5tb3VudENoaWxkcmVuKFxuICAgICAgICAgIGR5bmFtaWNDaGlsZHJlbixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgdHJ1ZVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBGcmFnbWVudCAmJiBwYXRjaEZsYWcgJiAoMTI4IHwgMjU2KSB8fCAhb3B0aW1pemVkICYmIHNoYXBlRmxhZyAmIDE2KSB7XG4gICAgICAgIHVubW91bnRDaGlsZHJlbihjaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICB9XG4gICAgICBpZiAoZG9SZW1vdmUpIHtcbiAgICAgICAgcmVtb3ZlKHZub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNob3VsZEludm9rZVZub2RlSG9vayAmJiAodm5vZGVIb29rID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZVVubW91bnRlZCkgfHwgc2hvdWxkSW52b2tlRGlycykge1xuICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcbiAgICAgICAgdm5vZGVIb29rICYmIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgICBzaG91bGRJbnZva2VEaXJzICYmIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgXCJ1bm1vdW50ZWRcIik7XG4gICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgfVxuICB9O1xuICBjb25zdCByZW1vdmUgPSAodm5vZGUpID0+IHtcbiAgICBjb25zdCB7IHR5cGUsIGVsLCBhbmNob3IsIHRyYW5zaXRpb24gfSA9IHZub2RlO1xuICAgIGlmICh0eXBlID09PSBGcmFnbWVudCkge1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgdm5vZGUucGF0Y2hGbGFnID4gMCAmJiB2bm9kZS5wYXRjaEZsYWcgJiAyMDQ4ICYmIHRyYW5zaXRpb24gJiYgIXRyYW5zaXRpb24ucGVyc2lzdGVkKSB7XG4gICAgICAgIHZub2RlLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IENvbW1lbnQpIHtcbiAgICAgICAgICAgIGhvc3RSZW1vdmUoY2hpbGQuZWwpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZW1vdmUoY2hpbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZW1vdmVGcmFnbWVudChlbCwgYW5jaG9yKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGUgPT09IFN0YXRpYykge1xuICAgICAgcmVtb3ZlU3RhdGljTm9kZSh2bm9kZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHBlcmZvcm1SZW1vdmUgPSAoKSA9PiB7XG4gICAgICBob3N0UmVtb3ZlKGVsKTtcbiAgICAgIGlmICh0cmFuc2l0aW9uICYmICF0cmFuc2l0aW9uLnBlcnNpc3RlZCAmJiB0cmFuc2l0aW9uLmFmdGVyTGVhdmUpIHtcbiAgICAgICAgdHJhbnNpdGlvbi5hZnRlckxlYXZlKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgMSAmJiB0cmFuc2l0aW9uICYmICF0cmFuc2l0aW9uLnBlcnNpc3RlZCkge1xuICAgICAgY29uc3QgeyBsZWF2ZSwgZGVsYXlMZWF2ZSB9ID0gdHJhbnNpdGlvbjtcbiAgICAgIGNvbnN0IHBlcmZvcm1MZWF2ZSA9ICgpID0+IGxlYXZlKGVsLCBwZXJmb3JtUmVtb3ZlKTtcbiAgICAgIGlmIChkZWxheUxlYXZlKSB7XG4gICAgICAgIGRlbGF5TGVhdmUodm5vZGUuZWwsIHBlcmZvcm1SZW1vdmUsIHBlcmZvcm1MZWF2ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwZXJmb3JtTGVhdmUoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcGVyZm9ybVJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgcmVtb3ZlRnJhZ21lbnQgPSAoY3VyLCBlbmQpID0+IHtcbiAgICBsZXQgbmV4dDtcbiAgICB3aGlsZSAoY3VyICE9PSBlbmQpIHtcbiAgICAgIG5leHQgPSBob3N0TmV4dFNpYmxpbmcoY3VyKTtcbiAgICAgIGhvc3RSZW1vdmUoY3VyKTtcbiAgICAgIGN1ciA9IG5leHQ7XG4gICAgfVxuICAgIGhvc3RSZW1vdmUoZW5kKTtcbiAgfTtcbiAgY29uc3QgdW5tb3VudENvbXBvbmVudCA9IChpbnN0YW5jZSwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKSA9PiB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgaW5zdGFuY2UudHlwZS5fX2htcklkKSB7XG4gICAgICB1bnJlZ2lzdGVySE1SKGluc3RhbmNlKTtcbiAgICB9XG4gICAgY29uc3Qge1xuICAgICAgYnVtLFxuICAgICAgc2NvcGUsXG4gICAgICBqb2IsXG4gICAgICBzdWJUcmVlLFxuICAgICAgdW0sXG4gICAgICBtLFxuICAgICAgYSxcbiAgICAgIHBhcmVudCxcbiAgICAgIHNsb3RzOiB7IF9fOiBzbG90Q2FjaGVLZXlzIH1cbiAgICB9ID0gaW5zdGFuY2U7XG4gICAgaW52YWxpZGF0ZU1vdW50KG0pO1xuICAgIGludmFsaWRhdGVNb3VudChhKTtcbiAgICBpZiAoYnVtKSB7XG4gICAgICBpbnZva2VBcnJheUZucyhidW0pO1xuICAgIH1cbiAgICBpZiAocGFyZW50ICYmIGlzQXJyYXkoc2xvdENhY2hlS2V5cykpIHtcbiAgICAgIHNsb3RDYWNoZUtleXMuZm9yRWFjaCgodikgPT4ge1xuICAgICAgICBwYXJlbnQucmVuZGVyQ2FjaGVbdl0gPSB2b2lkIDA7XG4gICAgICB9KTtcbiAgICB9XG4gICAgc2NvcGUuc3RvcCgpO1xuICAgIGlmIChqb2IpIHtcbiAgICAgIGpvYi5mbGFncyB8PSA4O1xuICAgICAgdW5tb3VudChzdWJUcmVlLCBpbnN0YW5jZSwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKTtcbiAgICB9XG4gICAgaWYgKHVtKSB7XG4gICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QodW0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICB9XG4gICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcbiAgICAgIGluc3RhbmNlLmlzVW5tb3VudGVkID0gdHJ1ZTtcbiAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgaWYgKHBhcmVudFN1c3BlbnNlICYmIHBhcmVudFN1c3BlbnNlLnBlbmRpbmdCcmFuY2ggJiYgIXBhcmVudFN1c3BlbnNlLmlzVW5tb3VudGVkICYmIGluc3RhbmNlLmFzeW5jRGVwICYmICFpbnN0YW5jZS5hc3luY1Jlc29sdmVkICYmIGluc3RhbmNlLnN1c3BlbnNlSWQgPT09IHBhcmVudFN1c3BlbnNlLnBlbmRpbmdJZCkge1xuICAgICAgcGFyZW50U3VzcGVuc2UuZGVwcy0tO1xuICAgICAgaWYgKHBhcmVudFN1c3BlbnNlLmRlcHMgPT09IDApIHtcbiAgICAgICAgcGFyZW50U3VzcGVuc2UucmVzb2x2ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgIGRldnRvb2xzQ29tcG9uZW50UmVtb3ZlZChpbnN0YW5jZSk7XG4gICAgfVxuICB9O1xuICBjb25zdCB1bm1vdW50Q2hpbGRyZW4gPSAoY2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlID0gZmFsc2UsIG9wdGltaXplZCA9IGZhbHNlLCBzdGFydCA9IDApID0+IHtcbiAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgdW5tb3VudChjaGlsZHJlbltpXSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUsIG9wdGltaXplZCk7XG4gICAgfVxuICB9O1xuICBjb25zdCBnZXROZXh0SG9zdE5vZGUgPSAodm5vZGUpID0+IHtcbiAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgNikge1xuICAgICAgcmV0dXJuIGdldE5leHRIb3N0Tm9kZSh2bm9kZS5jb21wb25lbnQuc3ViVHJlZSk7XG4gICAgfVxuICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAxMjgpIHtcbiAgICAgIHJldHVybiB2bm9kZS5zdXNwZW5zZS5uZXh0KCk7XG4gICAgfVxuICAgIGNvbnN0IGVsID0gaG9zdE5leHRTaWJsaW5nKHZub2RlLmFuY2hvciB8fCB2bm9kZS5lbCk7XG4gICAgY29uc3QgdGVsZXBvcnRFbmQgPSBlbCAmJiBlbFtUZWxlcG9ydEVuZEtleV07XG4gICAgcmV0dXJuIHRlbGVwb3J0RW5kID8gaG9zdE5leHRTaWJsaW5nKHRlbGVwb3J0RW5kKSA6IGVsO1xuICB9O1xuICBsZXQgaXNGbHVzaGluZyA9IGZhbHNlO1xuICBjb25zdCByZW5kZXIgPSAodm5vZGUsIGNvbnRhaW5lciwgbmFtZXNwYWNlKSA9PiB7XG4gICAgaWYgKHZub2RlID09IG51bGwpIHtcbiAgICAgIGlmIChjb250YWluZXIuX3Zub2RlKSB7XG4gICAgICAgIHVubW91bnQoY29udGFpbmVyLl92bm9kZSwgbnVsbCwgbnVsbCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhdGNoKFxuICAgICAgICBjb250YWluZXIuX3Zub2RlIHx8IG51bGwsXG4gICAgICAgIHZub2RlLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIG51bGwsXG4gICAgICAgIG51bGwsXG4gICAgICAgIG51bGwsXG4gICAgICAgIG5hbWVzcGFjZVxuICAgICAgKTtcbiAgICB9XG4gICAgY29udGFpbmVyLl92bm9kZSA9IHZub2RlO1xuICAgIGlmICghaXNGbHVzaGluZykge1xuICAgICAgaXNGbHVzaGluZyA9IHRydWU7XG4gICAgICBmbHVzaFByZUZsdXNoQ2JzKCk7XG4gICAgICBmbHVzaFBvc3RGbHVzaENicygpO1xuICAgICAgaXNGbHVzaGluZyA9IGZhbHNlO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaW50ZXJuYWxzID0ge1xuICAgIHA6IHBhdGNoLFxuICAgIHVtOiB1bm1vdW50LFxuICAgIG06IG1vdmUsXG4gICAgcjogcmVtb3ZlLFxuICAgIG10OiBtb3VudENvbXBvbmVudCxcbiAgICBtYzogbW91bnRDaGlsZHJlbixcbiAgICBwYzogcGF0Y2hDaGlsZHJlbixcbiAgICBwYmM6IHBhdGNoQmxvY2tDaGlsZHJlbixcbiAgICBuOiBnZXROZXh0SG9zdE5vZGUsXG4gICAgbzogb3B0aW9uc1xuICB9O1xuICBsZXQgaHlkcmF0ZTtcbiAgbGV0IGh5ZHJhdGVOb2RlO1xuICBpZiAoY3JlYXRlSHlkcmF0aW9uRm5zKSB7XG4gICAgW2h5ZHJhdGUsIGh5ZHJhdGVOb2RlXSA9IGNyZWF0ZUh5ZHJhdGlvbkZucyhcbiAgICAgIGludGVybmFsc1xuICAgICk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICByZW5kZXIsXG4gICAgaHlkcmF0ZSxcbiAgICBjcmVhdGVBcHA6IGNyZWF0ZUFwcEFQSShyZW5kZXIsIGh5ZHJhdGUpXG4gIH07XG59XG5mdW5jdGlvbiByZXNvbHZlQ2hpbGRyZW5OYW1lc3BhY2UoeyB0eXBlLCBwcm9wcyB9LCBjdXJyZW50TmFtZXNwYWNlKSB7XG4gIHJldHVybiBjdXJyZW50TmFtZXNwYWNlID09PSBcInN2Z1wiICYmIHR5cGUgPT09IFwiZm9yZWlnbk9iamVjdFwiIHx8IGN1cnJlbnROYW1lc3BhY2UgPT09IFwibWF0aG1sXCIgJiYgdHlwZSA9PT0gXCJhbm5vdGF0aW9uLXhtbFwiICYmIHByb3BzICYmIHByb3BzLmVuY29kaW5nICYmIHByb3BzLmVuY29kaW5nLmluY2x1ZGVzKFwiaHRtbFwiKSA/IHZvaWQgMCA6IGN1cnJlbnROYW1lc3BhY2U7XG59XG5mdW5jdGlvbiB0b2dnbGVSZWN1cnNlKHsgZWZmZWN0LCBqb2IgfSwgYWxsb3dlZCkge1xuICBpZiAoYWxsb3dlZCkge1xuICAgIGVmZmVjdC5mbGFncyB8PSAzMjtcbiAgICBqb2IuZmxhZ3MgfD0gNDtcbiAgfSBlbHNlIHtcbiAgICBlZmZlY3QuZmxhZ3MgJj0gLTMzO1xuICAgIGpvYi5mbGFncyAmPSAtNTtcbiAgfVxufVxuZnVuY3Rpb24gbmVlZFRyYW5zaXRpb24ocGFyZW50U3VzcGVuc2UsIHRyYW5zaXRpb24pIHtcbiAgcmV0dXJuICghcGFyZW50U3VzcGVuc2UgfHwgcGFyZW50U3VzcGVuc2UgJiYgIXBhcmVudFN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpICYmIHRyYW5zaXRpb24gJiYgIXRyYW5zaXRpb24ucGVyc2lzdGVkO1xufVxuZnVuY3Rpb24gdHJhdmVyc2VTdGF0aWNDaGlsZHJlbihuMSwgbjIsIHNoYWxsb3cgPSBmYWxzZSkge1xuICBjb25zdCBjaDEgPSBuMS5jaGlsZHJlbjtcbiAgY29uc3QgY2gyID0gbjIuY2hpbGRyZW47XG4gIGlmIChpc0FycmF5KGNoMSkgJiYgaXNBcnJheShjaDIpKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaDEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGMxID0gY2gxW2ldO1xuICAgICAgbGV0IGMyID0gY2gyW2ldO1xuICAgICAgaWYgKGMyLnNoYXBlRmxhZyAmIDEgJiYgIWMyLmR5bmFtaWNDaGlsZHJlbikge1xuICAgICAgICBpZiAoYzIucGF0Y2hGbGFnIDw9IDAgfHwgYzIucGF0Y2hGbGFnID09PSAzMikge1xuICAgICAgICAgIGMyID0gY2gyW2ldID0gY2xvbmVJZk1vdW50ZWQoY2gyW2ldKTtcbiAgICAgICAgICBjMi5lbCA9IGMxLmVsO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2hhbGxvdyAmJiBjMi5wYXRjaEZsYWcgIT09IC0yKVxuICAgICAgICAgIHRyYXZlcnNlU3RhdGljQ2hpbGRyZW4oYzEsIGMyKTtcbiAgICAgIH1cbiAgICAgIGlmIChjMi50eXBlID09PSBUZXh0KSB7XG4gICAgICAgIGMyLmVsID0gYzEuZWw7XG4gICAgICB9XG4gICAgICBpZiAoYzIudHlwZSA9PT0gQ29tbWVudCAmJiAhYzIuZWwpIHtcbiAgICAgICAgYzIuZWwgPSBjMS5lbDtcbiAgICAgIH1cbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgIGMyLmVsICYmIChjMi5lbC5fX3Zub2RlID0gYzIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gZ2V0U2VxdWVuY2UoYXJyKSB7XG4gIGNvbnN0IHAgPSBhcnIuc2xpY2UoKTtcbiAgY29uc3QgcmVzdWx0ID0gWzBdO1xuICBsZXQgaSwgaiwgdSwgdiwgYztcbiAgY29uc3QgbGVuID0gYXJyLmxlbmd0aDtcbiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY29uc3QgYXJySSA9IGFycltpXTtcbiAgICBpZiAoYXJySSAhPT0gMCkge1xuICAgICAgaiA9IHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV07XG4gICAgICBpZiAoYXJyW2pdIDwgYXJySSkge1xuICAgICAgICBwW2ldID0gajtcbiAgICAgICAgcmVzdWx0LnB1c2goaSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdSA9IDA7XG4gICAgICB2ID0gcmVzdWx0Lmxlbmd0aCAtIDE7XG4gICAgICB3aGlsZSAodSA8IHYpIHtcbiAgICAgICAgYyA9IHUgKyB2ID4+IDE7XG4gICAgICAgIGlmIChhcnJbcmVzdWx0W2NdXSA8IGFyckkpIHtcbiAgICAgICAgICB1ID0gYyArIDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdiA9IGM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChhcnJJIDwgYXJyW3Jlc3VsdFt1XV0pIHtcbiAgICAgICAgaWYgKHUgPiAwKSB7XG4gICAgICAgICAgcFtpXSA9IHJlc3VsdFt1IC0gMV07XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0W3VdID0gaTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgdSA9IHJlc3VsdC5sZW5ndGg7XG4gIHYgPSByZXN1bHRbdSAtIDFdO1xuICB3aGlsZSAodS0tID4gMCkge1xuICAgIHJlc3VsdFt1XSA9IHY7XG4gICAgdiA9IHBbdl07XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGxvY2F0ZU5vbkh5ZHJhdGVkQXN5bmNSb290KGluc3RhbmNlKSB7XG4gIGNvbnN0IHN1YkNvbXBvbmVudCA9IGluc3RhbmNlLnN1YlRyZWUuY29tcG9uZW50O1xuICBpZiAoc3ViQ29tcG9uZW50KSB7XG4gICAgaWYgKHN1YkNvbXBvbmVudC5hc3luY0RlcCAmJiAhc3ViQ29tcG9uZW50LmFzeW5jUmVzb2x2ZWQpIHtcbiAgICAgIHJldHVybiBzdWJDb21wb25lbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBsb2NhdGVOb25IeWRyYXRlZEFzeW5jUm9vdChzdWJDb21wb25lbnQpO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gaW52YWxpZGF0ZU1vdW50KGhvb2tzKSB7XG4gIGlmIChob29rcykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaG9va3MubGVuZ3RoOyBpKyspXG4gICAgICBob29rc1tpXS5mbGFncyB8PSA4O1xuICB9XG59XG5cbmNvbnN0IHNzckNvbnRleHRLZXkgPSBTeW1ib2wuZm9yKFwidi1zY3hcIik7XG5jb25zdCB1c2VTU1JDb250ZXh0ID0gKCkgPT4ge1xuICB7XG4gICAgY29uc3QgY3R4ID0gaW5qZWN0KHNzckNvbnRleHRLZXkpO1xuICAgIGlmICghY3R4KSB7XG4gICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4kMShcbiAgICAgICAgYFNlcnZlciByZW5kZXJpbmcgY29udGV4dCBub3QgcHJvdmlkZWQuIE1ha2Ugc3VyZSB0byBvbmx5IGNhbGwgdXNlU1NSQ29udGV4dCgpIGNvbmRpdGlvbmFsbHkgaW4gdGhlIHNlcnZlciBidWlsZC5gXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gY3R4O1xuICB9XG59O1xuXG5mdW5jdGlvbiB3YXRjaEVmZmVjdChlZmZlY3QsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIGRvV2F0Y2goZWZmZWN0LCBudWxsLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHdhdGNoUG9zdEVmZmVjdChlZmZlY3QsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIGRvV2F0Y2goXG4gICAgZWZmZWN0LFxuICAgIG51bGwsXG4gICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IGV4dGVuZCh7fSwgb3B0aW9ucywgeyBmbHVzaDogXCJwb3N0XCIgfSkgOiB7IGZsdXNoOiBcInBvc3RcIiB9XG4gICk7XG59XG5mdW5jdGlvbiB3YXRjaFN5bmNFZmZlY3QoZWZmZWN0LCBvcHRpb25zKSB7XG4gIHJldHVybiBkb1dhdGNoKFxuICAgIGVmZmVjdCxcbiAgICBudWxsLFxuICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBleHRlbmQoe30sIG9wdGlvbnMsIHsgZmx1c2g6IFwic3luY1wiIH0pIDogeyBmbHVzaDogXCJzeW5jXCIgfVxuICApO1xufVxuZnVuY3Rpb24gd2F0Y2goc291cmNlLCBjYiwgb3B0aW9ucykge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhaXNGdW5jdGlvbihjYikpIHtcbiAgICB3YXJuJDEoXG4gICAgICBgXFxgd2F0Y2goZm4sIG9wdGlvbnM/KVxcYCBzaWduYXR1cmUgaGFzIGJlZW4gbW92ZWQgdG8gYSBzZXBhcmF0ZSBBUEkuIFVzZSBcXGB3YXRjaEVmZmVjdChmbiwgb3B0aW9ucz8pXFxgIGluc3RlYWQuIFxcYHdhdGNoXFxgIG5vdyBvbmx5IHN1cHBvcnRzIFxcYHdhdGNoKHNvdXJjZSwgY2IsIG9wdGlvbnM/KSBzaWduYXR1cmUuYFxuICAgICk7XG4gIH1cbiAgcmV0dXJuIGRvV2F0Y2goc291cmNlLCBjYiwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBkb1dhdGNoKHNvdXJjZSwgY2IsIG9wdGlvbnMgPSBFTVBUWV9PQkopIHtcbiAgY29uc3QgeyBpbW1lZGlhdGUsIGRlZXAsIGZsdXNoLCBvbmNlIH0gPSBvcHRpb25zO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhY2IpIHtcbiAgICBpZiAoaW1tZWRpYXRlICE9PSB2b2lkIDApIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYHdhdGNoKCkgXCJpbW1lZGlhdGVcIiBvcHRpb24gaXMgb25seSByZXNwZWN0ZWQgd2hlbiB1c2luZyB0aGUgd2F0Y2goc291cmNlLCBjYWxsYmFjaywgb3B0aW9ucz8pIHNpZ25hdHVyZS5gXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoZGVlcCAhPT0gdm9pZCAwKSB7XG4gICAgICB3YXJuJDEoXG4gICAgICAgIGB3YXRjaCgpIFwiZGVlcFwiIG9wdGlvbiBpcyBvbmx5IHJlc3BlY3RlZCB3aGVuIHVzaW5nIHRoZSB3YXRjaChzb3VyY2UsIGNhbGxiYWNrLCBvcHRpb25zPykgc2lnbmF0dXJlLmBcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChvbmNlICE9PSB2b2lkIDApIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYHdhdGNoKCkgXCJvbmNlXCIgb3B0aW9uIGlzIG9ubHkgcmVzcGVjdGVkIHdoZW4gdXNpbmcgdGhlIHdhdGNoKHNvdXJjZSwgY2FsbGJhY2ssIG9wdGlvbnM/KSBzaWduYXR1cmUuYFxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgY29uc3QgYmFzZVdhdGNoT3B0aW9ucyA9IGV4dGVuZCh7fSwgb3B0aW9ucyk7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSBiYXNlV2F0Y2hPcHRpb25zLm9uV2FybiA9IHdhcm4kMTtcbiAgY29uc3QgcnVuc0ltbWVkaWF0ZWx5ID0gY2IgJiYgaW1tZWRpYXRlIHx8ICFjYiAmJiBmbHVzaCAhPT0gXCJwb3N0XCI7XG4gIGxldCBzc3JDbGVhbnVwO1xuICBpZiAoaXNJblNTUkNvbXBvbmVudFNldHVwKSB7XG4gICAgaWYgKGZsdXNoID09PSBcInN5bmNcIikge1xuICAgICAgY29uc3QgY3R4ID0gdXNlU1NSQ29udGV4dCgpO1xuICAgICAgc3NyQ2xlYW51cCA9IGN0eC5fX3dhdGNoZXJIYW5kbGVzIHx8IChjdHguX193YXRjaGVySGFuZGxlcyA9IFtdKTtcbiAgICB9IGVsc2UgaWYgKCFydW5zSW1tZWRpYXRlbHkpIHtcbiAgICAgIGNvbnN0IHdhdGNoU3RvcEhhbmRsZSA9ICgpID0+IHtcbiAgICAgIH07XG4gICAgICB3YXRjaFN0b3BIYW5kbGUuc3RvcCA9IE5PT1A7XG4gICAgICB3YXRjaFN0b3BIYW5kbGUucmVzdW1lID0gTk9PUDtcbiAgICAgIHdhdGNoU3RvcEhhbmRsZS5wYXVzZSA9IE5PT1A7XG4gICAgICByZXR1cm4gd2F0Y2hTdG9wSGFuZGxlO1xuICAgIH1cbiAgfVxuICBjb25zdCBpbnN0YW5jZSA9IGN1cnJlbnRJbnN0YW5jZTtcbiAgYmFzZVdhdGNoT3B0aW9ucy5jYWxsID0gKGZuLCB0eXBlLCBhcmdzKSA9PiBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhmbiwgaW5zdGFuY2UsIHR5cGUsIGFyZ3MpO1xuICBsZXQgaXNQcmUgPSBmYWxzZTtcbiAgaWYgKGZsdXNoID09PSBcInBvc3RcIikge1xuICAgIGJhc2VXYXRjaE9wdGlvbnMuc2NoZWR1bGVyID0gKGpvYikgPT4ge1xuICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KGpvYiwgaW5zdGFuY2UgJiYgaW5zdGFuY2Uuc3VzcGVuc2UpO1xuICAgIH07XG4gIH0gZWxzZSBpZiAoZmx1c2ggIT09IFwic3luY1wiKSB7XG4gICAgaXNQcmUgPSB0cnVlO1xuICAgIGJhc2VXYXRjaE9wdGlvbnMuc2NoZWR1bGVyID0gKGpvYiwgaXNGaXJzdFJ1bikgPT4ge1xuICAgICAgaWYgKGlzRmlyc3RSdW4pIHtcbiAgICAgICAgam9iKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUpvYihqb2IpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgYmFzZVdhdGNoT3B0aW9ucy5hdWdtZW50Sm9iID0gKGpvYikgPT4ge1xuICAgIGlmIChjYikge1xuICAgICAgam9iLmZsYWdzIHw9IDQ7XG4gICAgfVxuICAgIGlmIChpc1ByZSkge1xuICAgICAgam9iLmZsYWdzIHw9IDI7XG4gICAgICBpZiAoaW5zdGFuY2UpIHtcbiAgICAgICAgam9iLmlkID0gaW5zdGFuY2UudWlkO1xuICAgICAgICBqb2IuaSA9IGluc3RhbmNlO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3Qgd2F0Y2hIYW5kbGUgPSB3YXRjaCQxKHNvdXJjZSwgY2IsIGJhc2VXYXRjaE9wdGlvbnMpO1xuICBpZiAoaXNJblNTUkNvbXBvbmVudFNldHVwKSB7XG4gICAgaWYgKHNzckNsZWFudXApIHtcbiAgICAgIHNzckNsZWFudXAucHVzaCh3YXRjaEhhbmRsZSk7XG4gICAgfSBlbHNlIGlmIChydW5zSW1tZWRpYXRlbHkpIHtcbiAgICAgIHdhdGNoSGFuZGxlKCk7XG4gICAgfVxuICB9XG4gIHJldHVybiB3YXRjaEhhbmRsZTtcbn1cbmZ1bmN0aW9uIGluc3RhbmNlV2F0Y2goc291cmNlLCB2YWx1ZSwgb3B0aW9ucykge1xuICBjb25zdCBwdWJsaWNUaGlzID0gdGhpcy5wcm94eTtcbiAgY29uc3QgZ2V0dGVyID0gaXNTdHJpbmcoc291cmNlKSA/IHNvdXJjZS5pbmNsdWRlcyhcIi5cIikgPyBjcmVhdGVQYXRoR2V0dGVyKHB1YmxpY1RoaXMsIHNvdXJjZSkgOiAoKSA9PiBwdWJsaWNUaGlzW3NvdXJjZV0gOiBzb3VyY2UuYmluZChwdWJsaWNUaGlzLCBwdWJsaWNUaGlzKTtcbiAgbGV0IGNiO1xuICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICBjYiA9IHZhbHVlO1xuICB9IGVsc2Uge1xuICAgIGNiID0gdmFsdWUuaGFuZGxlcjtcbiAgICBvcHRpb25zID0gdmFsdWU7XG4gIH1cbiAgY29uc3QgcmVzZXQgPSBzZXRDdXJyZW50SW5zdGFuY2UodGhpcyk7XG4gIGNvbnN0IHJlcyA9IGRvV2F0Y2goZ2V0dGVyLCBjYi5iaW5kKHB1YmxpY1RoaXMpLCBvcHRpb25zKTtcbiAgcmVzZXQoKTtcbiAgcmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIGNyZWF0ZVBhdGhHZXR0ZXIoY3R4LCBwYXRoKSB7XG4gIGNvbnN0IHNlZ21lbnRzID0gcGF0aC5zcGxpdChcIi5cIik7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgbGV0IGN1ciA9IGN0eDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aCAmJiBjdXI7IGkrKykge1xuICAgICAgY3VyID0gY3VyW3NlZ21lbnRzW2ldXTtcbiAgICB9XG4gICAgcmV0dXJuIGN1cjtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdXNlTW9kZWwocHJvcHMsIG5hbWUsIG9wdGlvbnMgPSBFTVBUWV9PQkopIHtcbiAgY29uc3QgaSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhaSkge1xuICAgIHdhcm4kMShgdXNlTW9kZWwoKSBjYWxsZWQgd2l0aG91dCBhY3RpdmUgaW5zdGFuY2UuYCk7XG4gICAgcmV0dXJuIHJlZigpO1xuICB9XG4gIGNvbnN0IGNhbWVsaXplZE5hbWUgPSBjYW1lbGl6ZShuYW1lKTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWkucHJvcHNPcHRpb25zWzBdW2NhbWVsaXplZE5hbWVdKSB7XG4gICAgd2FybiQxKGB1c2VNb2RlbCgpIGNhbGxlZCB3aXRoIHByb3AgXCIke25hbWV9XCIgd2hpY2ggaXMgbm90IGRlY2xhcmVkLmApO1xuICAgIHJldHVybiByZWYoKTtcbiAgfVxuICBjb25zdCBoeXBoZW5hdGVkTmFtZSA9IGh5cGhlbmF0ZShuYW1lKTtcbiAgY29uc3QgbW9kaWZpZXJzID0gZ2V0TW9kZWxNb2RpZmllcnMocHJvcHMsIGNhbWVsaXplZE5hbWUpO1xuICBjb25zdCByZXMgPSBjdXN0b21SZWYoKHRyYWNrLCB0cmlnZ2VyKSA9PiB7XG4gICAgbGV0IGxvY2FsVmFsdWU7XG4gICAgbGV0IHByZXZTZXRWYWx1ZSA9IEVNUFRZX09CSjtcbiAgICBsZXQgcHJldkVtaXR0ZWRWYWx1ZTtcbiAgICB3YXRjaFN5bmNFZmZlY3QoKCkgPT4ge1xuICAgICAgY29uc3QgcHJvcFZhbHVlID0gcHJvcHNbY2FtZWxpemVkTmFtZV07XG4gICAgICBpZiAoaGFzQ2hhbmdlZChsb2NhbFZhbHVlLCBwcm9wVmFsdWUpKSB7XG4gICAgICAgIGxvY2FsVmFsdWUgPSBwcm9wVmFsdWU7XG4gICAgICAgIHRyaWdnZXIoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgZ2V0KCkge1xuICAgICAgICB0cmFjaygpO1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXQgPyBvcHRpb25zLmdldChsb2NhbFZhbHVlKSA6IGxvY2FsVmFsdWU7XG4gICAgICB9LFxuICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGVtaXR0ZWRWYWx1ZSA9IG9wdGlvbnMuc2V0ID8gb3B0aW9ucy5zZXQodmFsdWUpIDogdmFsdWU7XG4gICAgICAgIGlmICghaGFzQ2hhbmdlZChlbWl0dGVkVmFsdWUsIGxvY2FsVmFsdWUpICYmICEocHJldlNldFZhbHVlICE9PSBFTVBUWV9PQkogJiYgaGFzQ2hhbmdlZCh2YWx1ZSwgcHJldlNldFZhbHVlKSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmF3UHJvcHMgPSBpLnZub2RlLnByb3BzO1xuICAgICAgICBpZiAoIShyYXdQcm9wcyAmJiAvLyBjaGVjayBpZiBwYXJlbnQgaGFzIHBhc3NlZCB2LW1vZGVsXG4gICAgICAgIChuYW1lIGluIHJhd1Byb3BzIHx8IGNhbWVsaXplZE5hbWUgaW4gcmF3UHJvcHMgfHwgaHlwaGVuYXRlZE5hbWUgaW4gcmF3UHJvcHMpICYmIChgb25VcGRhdGU6JHtuYW1lfWAgaW4gcmF3UHJvcHMgfHwgYG9uVXBkYXRlOiR7Y2FtZWxpemVkTmFtZX1gIGluIHJhd1Byb3BzIHx8IGBvblVwZGF0ZToke2h5cGhlbmF0ZWROYW1lfWAgaW4gcmF3UHJvcHMpKSkge1xuICAgICAgICAgIGxvY2FsVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICB0cmlnZ2VyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaS5lbWl0KGB1cGRhdGU6JHtuYW1lfWAsIGVtaXR0ZWRWYWx1ZSk7XG4gICAgICAgIGlmIChoYXNDaGFuZ2VkKHZhbHVlLCBlbWl0dGVkVmFsdWUpICYmIGhhc0NoYW5nZWQodmFsdWUsIHByZXZTZXRWYWx1ZSkgJiYgIWhhc0NoYW5nZWQoZW1pdHRlZFZhbHVlLCBwcmV2RW1pdHRlZFZhbHVlKSkge1xuICAgICAgICAgIHRyaWdnZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBwcmV2U2V0VmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgcHJldkVtaXR0ZWRWYWx1ZSA9IGVtaXR0ZWRWYWx1ZTtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcbiAgcmVzW1N5bWJvbC5pdGVyYXRvcl0gPSAoKSA9PiB7XG4gICAgbGV0IGkyID0gMDtcbiAgICByZXR1cm4ge1xuICAgICAgbmV4dCgpIHtcbiAgICAgICAgaWYgKGkyIDwgMikge1xuICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBpMisrID8gbW9kaWZpZXJzIHx8IEVNUFRZX09CSiA6IHJlcywgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4geyBkb25lOiB0cnVlIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9O1xuICByZXR1cm4gcmVzO1xufVxuY29uc3QgZ2V0TW9kZWxNb2RpZmllcnMgPSAocHJvcHMsIG1vZGVsTmFtZSkgPT4ge1xuICByZXR1cm4gbW9kZWxOYW1lID09PSBcIm1vZGVsVmFsdWVcIiB8fCBtb2RlbE5hbWUgPT09IFwibW9kZWwtdmFsdWVcIiA/IHByb3BzLm1vZGVsTW9kaWZpZXJzIDogcHJvcHNbYCR7bW9kZWxOYW1lfU1vZGlmaWVyc2BdIHx8IHByb3BzW2Ake2NhbWVsaXplKG1vZGVsTmFtZSl9TW9kaWZpZXJzYF0gfHwgcHJvcHNbYCR7aHlwaGVuYXRlKG1vZGVsTmFtZSl9TW9kaWZpZXJzYF07XG59O1xuXG5mdW5jdGlvbiBlbWl0KGluc3RhbmNlLCBldmVudCwgLi4ucmF3QXJncykge1xuICBpZiAoaW5zdGFuY2UuaXNVbm1vdW50ZWQpIHJldHVybjtcbiAgY29uc3QgcHJvcHMgPSBpbnN0YW5jZS52bm9kZS5wcm9wcyB8fCBFTVBUWV9PQko7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgY29uc3Qge1xuICAgICAgZW1pdHNPcHRpb25zLFxuICAgICAgcHJvcHNPcHRpb25zOiBbcHJvcHNPcHRpb25zXVxuICAgIH0gPSBpbnN0YW5jZTtcbiAgICBpZiAoZW1pdHNPcHRpb25zKSB7XG4gICAgICBpZiAoIShldmVudCBpbiBlbWl0c09wdGlvbnMpICYmIHRydWUpIHtcbiAgICAgICAgaWYgKCFwcm9wc09wdGlvbnMgfHwgISh0b0hhbmRsZXJLZXkoY2FtZWxpemUoZXZlbnQpKSBpbiBwcm9wc09wdGlvbnMpKSB7XG4gICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgYENvbXBvbmVudCBlbWl0dGVkIGV2ZW50IFwiJHtldmVudH1cIiBidXQgaXQgaXMgbmVpdGhlciBkZWNsYXJlZCBpbiB0aGUgZW1pdHMgb3B0aW9uIG5vciBhcyBhbiBcIiR7dG9IYW5kbGVyS2V5KGNhbWVsaXplKGV2ZW50KSl9XCIgcHJvcC5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdG9yID0gZW1pdHNPcHRpb25zW2V2ZW50XTtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odmFsaWRhdG9yKSkge1xuICAgICAgICAgIGNvbnN0IGlzVmFsaWQgPSB2YWxpZGF0b3IoLi4ucmF3QXJncyk7XG4gICAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICAgIGBJbnZhbGlkIGV2ZW50IGFyZ3VtZW50czogZXZlbnQgdmFsaWRhdGlvbiBmYWlsZWQgZm9yIGV2ZW50IFwiJHtldmVudH1cIi5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBsZXQgYXJncyA9IHJhd0FyZ3M7XG4gIGNvbnN0IGlzTW9kZWxMaXN0ZW5lciA9IGV2ZW50LnN0YXJ0c1dpdGgoXCJ1cGRhdGU6XCIpO1xuICBjb25zdCBtb2RpZmllcnMgPSBpc01vZGVsTGlzdGVuZXIgJiYgZ2V0TW9kZWxNb2RpZmllcnMocHJvcHMsIGV2ZW50LnNsaWNlKDcpKTtcbiAgaWYgKG1vZGlmaWVycykge1xuICAgIGlmIChtb2RpZmllcnMudHJpbSkge1xuICAgICAgYXJncyA9IHJhd0FyZ3MubWFwKChhKSA9PiBpc1N0cmluZyhhKSA/IGEudHJpbSgpIDogYSk7XG4gICAgfVxuICAgIGlmIChtb2RpZmllcnMubnVtYmVyKSB7XG4gICAgICBhcmdzID0gcmF3QXJncy5tYXAobG9vc2VUb051bWJlcik7XG4gICAgfVxuICB9XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgIGRldnRvb2xzQ29tcG9uZW50RW1pdChpbnN0YW5jZSwgZXZlbnQsIGFyZ3MpO1xuICB9XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgY29uc3QgbG93ZXJDYXNlRXZlbnQgPSBldmVudC50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChsb3dlckNhc2VFdmVudCAhPT0gZXZlbnQgJiYgcHJvcHNbdG9IYW5kbGVyS2V5KGxvd2VyQ2FzZUV2ZW50KV0pIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYEV2ZW50IFwiJHtsb3dlckNhc2VFdmVudH1cIiBpcyBlbWl0dGVkIGluIGNvbXBvbmVudCAke2Zvcm1hdENvbXBvbmVudE5hbWUoXG4gICAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgICAgaW5zdGFuY2UudHlwZVxuICAgICAgICApfSBidXQgdGhlIGhhbmRsZXIgaXMgcmVnaXN0ZXJlZCBmb3IgXCIke2V2ZW50fVwiLiBOb3RlIHRoYXQgSFRNTCBhdHRyaWJ1dGVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlIGFuZCB5b3UgY2Fubm90IHVzZSB2LW9uIHRvIGxpc3RlbiB0byBjYW1lbENhc2UgZXZlbnRzIHdoZW4gdXNpbmcgaW4tRE9NIHRlbXBsYXRlcy4gWW91IHNob3VsZCBwcm9iYWJseSB1c2UgXCIke2h5cGhlbmF0ZShcbiAgICAgICAgICBldmVudFxuICAgICAgICApfVwiIGluc3RlYWQgb2YgXCIke2V2ZW50fVwiLmBcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIGxldCBoYW5kbGVyTmFtZTtcbiAgbGV0IGhhbmRsZXIgPSBwcm9wc1toYW5kbGVyTmFtZSA9IHRvSGFuZGxlcktleShldmVudCldIHx8IC8vIGFsc28gdHJ5IGNhbWVsQ2FzZSBldmVudCBoYW5kbGVyICgjMjI0OSlcbiAgcHJvcHNbaGFuZGxlck5hbWUgPSB0b0hhbmRsZXJLZXkoY2FtZWxpemUoZXZlbnQpKV07XG4gIGlmICghaGFuZGxlciAmJiBpc01vZGVsTGlzdGVuZXIpIHtcbiAgICBoYW5kbGVyID0gcHJvcHNbaGFuZGxlck5hbWUgPSB0b0hhbmRsZXJLZXkoaHlwaGVuYXRlKGV2ZW50KSldO1xuICB9XG4gIGlmIChoYW5kbGVyKSB7XG4gICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoXG4gICAgICBoYW5kbGVyLFxuICAgICAgaW5zdGFuY2UsXG4gICAgICA2LFxuICAgICAgYXJnc1xuICAgICk7XG4gIH1cbiAgY29uc3Qgb25jZUhhbmRsZXIgPSBwcm9wc1toYW5kbGVyTmFtZSArIGBPbmNlYF07XG4gIGlmIChvbmNlSGFuZGxlcikge1xuICAgIGlmICghaW5zdGFuY2UuZW1pdHRlZCkge1xuICAgICAgaW5zdGFuY2UuZW1pdHRlZCA9IHt9O1xuICAgIH0gZWxzZSBpZiAoaW5zdGFuY2UuZW1pdHRlZFtoYW5kbGVyTmFtZV0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaW5zdGFuY2UuZW1pdHRlZFtoYW5kbGVyTmFtZV0gPSB0cnVlO1xuICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKFxuICAgICAgb25jZUhhbmRsZXIsXG4gICAgICBpbnN0YW5jZSxcbiAgICAgIDYsXG4gICAgICBhcmdzXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gbm9ybWFsaXplRW1pdHNPcHRpb25zKGNvbXAsIGFwcENvbnRleHQsIGFzTWl4aW4gPSBmYWxzZSkge1xuICBjb25zdCBjYWNoZSA9IGFwcENvbnRleHQuZW1pdHNDYWNoZTtcbiAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KGNvbXApO1xuICBpZiAoY2FjaGVkICE9PSB2b2lkIDApIHtcbiAgICByZXR1cm4gY2FjaGVkO1xuICB9XG4gIGNvbnN0IHJhdyA9IGNvbXAuZW1pdHM7XG4gIGxldCBub3JtYWxpemVkID0ge307XG4gIGxldCBoYXNFeHRlbmRzID0gZmFsc2U7XG4gIGlmIChfX1ZVRV9PUFRJT05TX0FQSV9fICYmICFpc0Z1bmN0aW9uKGNvbXApKSB7XG4gICAgY29uc3QgZXh0ZW5kRW1pdHMgPSAocmF3MikgPT4ge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZEZyb21FeHRlbmQgPSBub3JtYWxpemVFbWl0c09wdGlvbnMocmF3MiwgYXBwQ29udGV4dCwgdHJ1ZSk7XG4gICAgICBpZiAobm9ybWFsaXplZEZyb21FeHRlbmQpIHtcbiAgICAgICAgaGFzRXh0ZW5kcyA9IHRydWU7XG4gICAgICAgIGV4dGVuZChub3JtYWxpemVkLCBub3JtYWxpemVkRnJvbUV4dGVuZCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAoIWFzTWl4aW4gJiYgYXBwQ29udGV4dC5taXhpbnMubGVuZ3RoKSB7XG4gICAgICBhcHBDb250ZXh0Lm1peGlucy5mb3JFYWNoKGV4dGVuZEVtaXRzKTtcbiAgICB9XG4gICAgaWYgKGNvbXAuZXh0ZW5kcykge1xuICAgICAgZXh0ZW5kRW1pdHMoY29tcC5leHRlbmRzKTtcbiAgICB9XG4gICAgaWYgKGNvbXAubWl4aW5zKSB7XG4gICAgICBjb21wLm1peGlucy5mb3JFYWNoKGV4dGVuZEVtaXRzKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFyYXcgJiYgIWhhc0V4dGVuZHMpIHtcbiAgICBpZiAoaXNPYmplY3QoY29tcCkpIHtcbiAgICAgIGNhY2hlLnNldChjb21wLCBudWxsKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKGlzQXJyYXkocmF3KSkge1xuICAgIHJhdy5mb3JFYWNoKChrZXkpID0+IG5vcm1hbGl6ZWRba2V5XSA9IG51bGwpO1xuICB9IGVsc2Uge1xuICAgIGV4dGVuZChub3JtYWxpemVkLCByYXcpO1xuICB9XG4gIGlmIChpc09iamVjdChjb21wKSkge1xuICAgIGNhY2hlLnNldChjb21wLCBub3JtYWxpemVkKTtcbiAgfVxuICByZXR1cm4gbm9ybWFsaXplZDtcbn1cbmZ1bmN0aW9uIGlzRW1pdExpc3RlbmVyKG9wdGlvbnMsIGtleSkge1xuICBpZiAoIW9wdGlvbnMgfHwgIWlzT24oa2V5KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBrZXkgPSBrZXkuc2xpY2UoMikucmVwbGFjZSgvT25jZSQvLCBcIlwiKTtcbiAgcmV0dXJuIGhhc093bihvcHRpb25zLCBrZXlbMF0udG9Mb3dlckNhc2UoKSArIGtleS5zbGljZSgxKSkgfHwgaGFzT3duKG9wdGlvbnMsIGh5cGhlbmF0ZShrZXkpKSB8fCBoYXNPd24ob3B0aW9ucywga2V5KTtcbn1cblxubGV0IGFjY2Vzc2VkQXR0cnMgPSBmYWxzZTtcbmZ1bmN0aW9uIG1hcmtBdHRyc0FjY2Vzc2VkKCkge1xuICBhY2Nlc3NlZEF0dHJzID0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIHJlbmRlckNvbXBvbmVudFJvb3QoaW5zdGFuY2UpIHtcbiAgY29uc3Qge1xuICAgIHR5cGU6IENvbXBvbmVudCxcbiAgICB2bm9kZSxcbiAgICBwcm94eSxcbiAgICB3aXRoUHJveHksXG4gICAgcHJvcHNPcHRpb25zOiBbcHJvcHNPcHRpb25zXSxcbiAgICBzbG90cyxcbiAgICBhdHRycyxcbiAgICBlbWl0LFxuICAgIHJlbmRlcixcbiAgICByZW5kZXJDYWNoZSxcbiAgICBwcm9wcyxcbiAgICBkYXRhLFxuICAgIHNldHVwU3RhdGUsXG4gICAgY3R4LFxuICAgIGluaGVyaXRBdHRyc1xuICB9ID0gaW5zdGFuY2U7XG4gIGNvbnN0IHByZXYgPSBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UoaW5zdGFuY2UpO1xuICBsZXQgcmVzdWx0O1xuICBsZXQgZmFsbHRocm91Z2hBdHRycztcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBhY2Nlc3NlZEF0dHJzID0gZmFsc2U7XG4gIH1cbiAgdHJ5IHtcbiAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgNCkge1xuICAgICAgY29uc3QgcHJveHlUb1VzZSA9IHdpdGhQcm94eSB8fCBwcm94eTtcbiAgICAgIGNvbnN0IHRoaXNQcm94eSA9ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgc2V0dXBTdGF0ZS5fX2lzU2NyaXB0U2V0dXAgPyBuZXcgUHJveHkocHJveHlUb1VzZSwge1xuICAgICAgICBnZXQodGFyZ2V0LCBrZXksIHJlY2VpdmVyKSB7XG4gICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgYFByb3BlcnR5ICcke1N0cmluZyhcbiAgICAgICAgICAgICAga2V5XG4gICAgICAgICAgICApfScgd2FzIGFjY2Vzc2VkIHZpYSAndGhpcycuIEF2b2lkIHVzaW5nICd0aGlzJyBpbiB0ZW1wbGF0ZXMuYFxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwga2V5LCByZWNlaXZlcik7XG4gICAgICAgIH1cbiAgICAgIH0pIDogcHJveHlUb1VzZTtcbiAgICAgIHJlc3VsdCA9IG5vcm1hbGl6ZVZOb2RlKFxuICAgICAgICByZW5kZXIuY2FsbChcbiAgICAgICAgICB0aGlzUHJveHksXG4gICAgICAgICAgcHJveHlUb1VzZSxcbiAgICAgICAgICByZW5kZXJDYWNoZSxcbiAgICAgICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gc2hhbGxvd1JlYWRvbmx5KHByb3BzKSA6IHByb3BzLFxuICAgICAgICAgIHNldHVwU3RhdGUsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBjdHhcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIGZhbGx0aHJvdWdoQXR0cnMgPSBhdHRycztcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcmVuZGVyMiA9IENvbXBvbmVudDtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGF0dHJzID09PSBwcm9wcykge1xuICAgICAgICBtYXJrQXR0cnNBY2Nlc3NlZCgpO1xuICAgICAgfVxuICAgICAgcmVzdWx0ID0gbm9ybWFsaXplVk5vZGUoXG4gICAgICAgIHJlbmRlcjIubGVuZ3RoID4gMSA/IHJlbmRlcjIoXG4gICAgICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHNoYWxsb3dSZWFkb25seShwcm9wcykgOiBwcm9wcyxcbiAgICAgICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8ge1xuICAgICAgICAgICAgZ2V0IGF0dHJzKCkge1xuICAgICAgICAgICAgICBtYXJrQXR0cnNBY2Nlc3NlZCgpO1xuICAgICAgICAgICAgICByZXR1cm4gc2hhbGxvd1JlYWRvbmx5KGF0dHJzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzbG90cyxcbiAgICAgICAgICAgIGVtaXRcbiAgICAgICAgICB9IDogeyBhdHRycywgc2xvdHMsIGVtaXQgfVxuICAgICAgICApIDogcmVuZGVyMihcbiAgICAgICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gc2hhbGxvd1JlYWRvbmx5KHByb3BzKSA6IHByb3BzLFxuICAgICAgICAgIG51bGxcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIGZhbGx0aHJvdWdoQXR0cnMgPSBDb21wb25lbnQucHJvcHMgPyBhdHRycyA6IGdldEZ1bmN0aW9uYWxGYWxsdGhyb3VnaChhdHRycyk7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBibG9ja1N0YWNrLmxlbmd0aCA9IDA7XG4gICAgaGFuZGxlRXJyb3IoZXJyLCBpbnN0YW5jZSwgMSk7XG4gICAgcmVzdWx0ID0gY3JlYXRlVk5vZGUoQ29tbWVudCk7XG4gIH1cbiAgbGV0IHJvb3QgPSByZXN1bHQ7XG4gIGxldCBzZXRSb290ID0gdm9pZCAwO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiByZXN1bHQucGF0Y2hGbGFnID4gMCAmJiByZXN1bHQucGF0Y2hGbGFnICYgMjA0OCkge1xuICAgIFtyb290LCBzZXRSb290XSA9IGdldENoaWxkUm9vdChyZXN1bHQpO1xuICB9XG4gIGlmIChmYWxsdGhyb3VnaEF0dHJzICYmIGluaGVyaXRBdHRycyAhPT0gZmFsc2UpIHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZmFsbHRocm91Z2hBdHRycyk7XG4gICAgY29uc3QgeyBzaGFwZUZsYWcgfSA9IHJvb3Q7XG4gICAgaWYgKGtleXMubGVuZ3RoKSB7XG4gICAgICBpZiAoc2hhcGVGbGFnICYgKDEgfCA2KSkge1xuICAgICAgICBpZiAocHJvcHNPcHRpb25zICYmIGtleXMuc29tZShpc01vZGVsTGlzdGVuZXIpKSB7XG4gICAgICAgICAgZmFsbHRocm91Z2hBdHRycyA9IGZpbHRlck1vZGVsTGlzdGVuZXJzKFxuICAgICAgICAgICAgZmFsbHRocm91Z2hBdHRycyxcbiAgICAgICAgICAgIHByb3BzT3B0aW9uc1xuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcm9vdCA9IGNsb25lVk5vZGUocm9vdCwgZmFsbHRocm91Z2hBdHRycywgZmFsc2UsIHRydWUpO1xuICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFhY2Nlc3NlZEF0dHJzICYmIHJvb3QudHlwZSAhPT0gQ29tbWVudCkge1xuICAgICAgICBjb25zdCBhbGxBdHRycyA9IE9iamVjdC5rZXlzKGF0dHJzKTtcbiAgICAgICAgY29uc3QgZXZlbnRBdHRycyA9IFtdO1xuICAgICAgICBjb25zdCBleHRyYUF0dHJzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYWxsQXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgY29uc3Qga2V5ID0gYWxsQXR0cnNbaV07XG4gICAgICAgICAgaWYgKGlzT24oa2V5KSkge1xuICAgICAgICAgICAgaWYgKCFpc01vZGVsTGlzdGVuZXIoa2V5KSkge1xuICAgICAgICAgICAgICBldmVudEF0dHJzLnB1c2goa2V5WzJdLnRvTG93ZXJDYXNlKCkgKyBrZXkuc2xpY2UoMykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBleHRyYUF0dHJzLnB1c2goa2V5KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4dHJhQXR0cnMubGVuZ3RoKSB7XG4gICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgYEV4dHJhbmVvdXMgbm9uLXByb3BzIGF0dHJpYnV0ZXMgKCR7ZXh0cmFBdHRycy5qb2luKFwiLCBcIil9KSB3ZXJlIHBhc3NlZCB0byBjb21wb25lbnQgYnV0IGNvdWxkIG5vdCBiZSBhdXRvbWF0aWNhbGx5IGluaGVyaXRlZCBiZWNhdXNlIGNvbXBvbmVudCByZW5kZXJzIGZyYWdtZW50IG9yIHRleHQgb3IgdGVsZXBvcnQgcm9vdCBub2Rlcy5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnRBdHRycy5sZW5ndGgpIHtcbiAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICBgRXh0cmFuZW91cyBub24tZW1pdHMgZXZlbnQgbGlzdGVuZXJzICgke2V2ZW50QXR0cnMuam9pbihcIiwgXCIpfSkgd2VyZSBwYXNzZWQgdG8gY29tcG9uZW50IGJ1dCBjb3VsZCBub3QgYmUgYXV0b21hdGljYWxseSBpbmhlcml0ZWQgYmVjYXVzZSBjb21wb25lbnQgcmVuZGVycyBmcmFnbWVudCBvciB0ZXh0IHJvb3Qgbm9kZXMuIElmIHRoZSBsaXN0ZW5lciBpcyBpbnRlbmRlZCB0byBiZSBhIGNvbXBvbmVudCBjdXN0b20gZXZlbnQgbGlzdGVuZXIgb25seSwgZGVjbGFyZSBpdCB1c2luZyB0aGUgXCJlbWl0c1wiIG9wdGlvbi5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAodm5vZGUuZGlycykge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFpc0VsZW1lbnRSb290KHJvb3QpKSB7XG4gICAgICB3YXJuJDEoXG4gICAgICAgIGBSdW50aW1lIGRpcmVjdGl2ZSB1c2VkIG9uIGNvbXBvbmVudCB3aXRoIG5vbi1lbGVtZW50IHJvb3Qgbm9kZS4gVGhlIGRpcmVjdGl2ZXMgd2lsbCBub3QgZnVuY3Rpb24gYXMgaW50ZW5kZWQuYFxuICAgICAgKTtcbiAgICB9XG4gICAgcm9vdCA9IGNsb25lVk5vZGUocm9vdCwgbnVsbCwgZmFsc2UsIHRydWUpO1xuICAgIHJvb3QuZGlycyA9IHJvb3QuZGlycyA/IHJvb3QuZGlycy5jb25jYXQodm5vZGUuZGlycykgOiB2bm9kZS5kaXJzO1xuICB9XG4gIGlmICh2bm9kZS50cmFuc2l0aW9uKSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWlzRWxlbWVudFJvb3Qocm9vdCkpIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYENvbXBvbmVudCBpbnNpZGUgPFRyYW5zaXRpb24+IHJlbmRlcnMgbm9uLWVsZW1lbnQgcm9vdCBub2RlIHRoYXQgY2Fubm90IGJlIGFuaW1hdGVkLmBcbiAgICAgICk7XG4gICAgfVxuICAgIHNldFRyYW5zaXRpb25Ib29rcyhyb290LCB2bm9kZS50cmFuc2l0aW9uKTtcbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBzZXRSb290KSB7XG4gICAgc2V0Um9vdChyb290KTtcbiAgfSBlbHNlIHtcbiAgICByZXN1bHQgPSByb290O1xuICB9XG4gIHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShwcmV2KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmNvbnN0IGdldENoaWxkUm9vdCA9ICh2bm9kZSkgPT4ge1xuICBjb25zdCByYXdDaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuO1xuICBjb25zdCBkeW5hbWljQ2hpbGRyZW4gPSB2bm9kZS5keW5hbWljQ2hpbGRyZW47XG4gIGNvbnN0IGNoaWxkUm9vdCA9IGZpbHRlclNpbmdsZVJvb3QocmF3Q2hpbGRyZW4sIGZhbHNlKTtcbiAgaWYgKCFjaGlsZFJvb3QpIHtcbiAgICByZXR1cm4gW3Zub2RlLCB2b2lkIDBdO1xuICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgY2hpbGRSb290LnBhdGNoRmxhZyA+IDAgJiYgY2hpbGRSb290LnBhdGNoRmxhZyAmIDIwNDgpIHtcbiAgICByZXR1cm4gZ2V0Q2hpbGRSb290KGNoaWxkUm9vdCk7XG4gIH1cbiAgY29uc3QgaW5kZXggPSByYXdDaGlsZHJlbi5pbmRleE9mKGNoaWxkUm9vdCk7XG4gIGNvbnN0IGR5bmFtaWNJbmRleCA9IGR5bmFtaWNDaGlsZHJlbiA/IGR5bmFtaWNDaGlsZHJlbi5pbmRleE9mKGNoaWxkUm9vdCkgOiAtMTtcbiAgY29uc3Qgc2V0Um9vdCA9ICh1cGRhdGVkUm9vdCkgPT4ge1xuICAgIHJhd0NoaWxkcmVuW2luZGV4XSA9IHVwZGF0ZWRSb290O1xuICAgIGlmIChkeW5hbWljQ2hpbGRyZW4pIHtcbiAgICAgIGlmIChkeW5hbWljSW5kZXggPiAtMSkge1xuICAgICAgICBkeW5hbWljQ2hpbGRyZW5bZHluYW1pY0luZGV4XSA9IHVwZGF0ZWRSb290O1xuICAgICAgfSBlbHNlIGlmICh1cGRhdGVkUm9vdC5wYXRjaEZsYWcgPiAwKSB7XG4gICAgICAgIHZub2RlLmR5bmFtaWNDaGlsZHJlbiA9IFsuLi5keW5hbWljQ2hpbGRyZW4sIHVwZGF0ZWRSb290XTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIHJldHVybiBbbm9ybWFsaXplVk5vZGUoY2hpbGRSb290KSwgc2V0Um9vdF07XG59O1xuZnVuY3Rpb24gZmlsdGVyU2luZ2xlUm9vdChjaGlsZHJlbiwgcmVjdXJzZSA9IHRydWUpIHtcbiAgbGV0IHNpbmdsZVJvb3Q7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgIGlmIChpc1ZOb2RlKGNoaWxkKSkge1xuICAgICAgaWYgKGNoaWxkLnR5cGUgIT09IENvbW1lbnQgfHwgY2hpbGQuY2hpbGRyZW4gPT09IFwidi1pZlwiKSB7XG4gICAgICAgIGlmIChzaW5nbGVSb290KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNpbmdsZVJvb3QgPSBjaGlsZDtcbiAgICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiByZWN1cnNlICYmIHNpbmdsZVJvb3QucGF0Y2hGbGFnID4gMCAmJiBzaW5nbGVSb290LnBhdGNoRmxhZyAmIDIwNDgpIHtcbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXJTaW5nbGVSb290KHNpbmdsZVJvb3QuY2hpbGRyZW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIHJldHVybiBzaW5nbGVSb290O1xufVxuY29uc3QgZ2V0RnVuY3Rpb25hbEZhbGx0aHJvdWdoID0gKGF0dHJzKSA9PiB7XG4gIGxldCByZXM7XG4gIGZvciAoY29uc3Qga2V5IGluIGF0dHJzKSB7XG4gICAgaWYgKGtleSA9PT0gXCJjbGFzc1wiIHx8IGtleSA9PT0gXCJzdHlsZVwiIHx8IGlzT24oa2V5KSkge1xuICAgICAgKHJlcyB8fCAocmVzID0ge30pKVtrZXldID0gYXR0cnNba2V5XTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn07XG5jb25zdCBmaWx0ZXJNb2RlbExpc3RlbmVycyA9IChhdHRycywgcHJvcHMpID0+IHtcbiAgY29uc3QgcmVzID0ge307XG4gIGZvciAoY29uc3Qga2V5IGluIGF0dHJzKSB7XG4gICAgaWYgKCFpc01vZGVsTGlzdGVuZXIoa2V5KSB8fCAhKGtleS5zbGljZSg5KSBpbiBwcm9wcykpIHtcbiAgICAgIHJlc1trZXldID0gYXR0cnNba2V5XTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn07XG5jb25zdCBpc0VsZW1lbnRSb290ID0gKHZub2RlKSA9PiB7XG4gIHJldHVybiB2bm9kZS5zaGFwZUZsYWcgJiAoNiB8IDEpIHx8IHZub2RlLnR5cGUgPT09IENvbW1lbnQ7XG59O1xuZnVuY3Rpb24gc2hvdWxkVXBkYXRlQ29tcG9uZW50KHByZXZWTm9kZSwgbmV4dFZOb2RlLCBvcHRpbWl6ZWQpIHtcbiAgY29uc3QgeyBwcm9wczogcHJldlByb3BzLCBjaGlsZHJlbjogcHJldkNoaWxkcmVuLCBjb21wb25lbnQgfSA9IHByZXZWTm9kZTtcbiAgY29uc3QgeyBwcm9wczogbmV4dFByb3BzLCBjaGlsZHJlbjogbmV4dENoaWxkcmVuLCBwYXRjaEZsYWcgfSA9IG5leHRWTm9kZTtcbiAgY29uc3QgZW1pdHMgPSBjb21wb25lbnQuZW1pdHNPcHRpb25zO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAocHJldkNoaWxkcmVuIHx8IG5leHRDaGlsZHJlbikgJiYgaXNIbXJVcGRhdGluZykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChuZXh0Vk5vZGUuZGlycyB8fCBuZXh0Vk5vZGUudHJhbnNpdGlvbikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChvcHRpbWl6ZWQgJiYgcGF0Y2hGbGFnID49IDApIHtcbiAgICBpZiAocGF0Y2hGbGFnICYgMTAyNCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChwYXRjaEZsYWcgJiAxNikge1xuICAgICAgaWYgKCFwcmV2UHJvcHMpIHtcbiAgICAgICAgcmV0dXJuICEhbmV4dFByb3BzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGhhc1Byb3BzQ2hhbmdlZChwcmV2UHJvcHMsIG5leHRQcm9wcywgZW1pdHMpO1xuICAgIH0gZWxzZSBpZiAocGF0Y2hGbGFnICYgOCkge1xuICAgICAgY29uc3QgZHluYW1pY1Byb3BzID0gbmV4dFZOb2RlLmR5bmFtaWNQcm9wcztcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZHluYW1pY1Byb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGR5bmFtaWNQcm9wc1tpXTtcbiAgICAgICAgaWYgKG5leHRQcm9wc1trZXldICE9PSBwcmV2UHJvcHNba2V5XSAmJiAhaXNFbWl0TGlzdGVuZXIoZW1pdHMsIGtleSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAocHJldkNoaWxkcmVuIHx8IG5leHRDaGlsZHJlbikge1xuICAgICAgaWYgKCFuZXh0Q2hpbGRyZW4gfHwgIW5leHRDaGlsZHJlbi4kc3RhYmxlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocHJldlByb3BzID09PSBuZXh0UHJvcHMpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCFwcmV2UHJvcHMpIHtcbiAgICAgIHJldHVybiAhIW5leHRQcm9wcztcbiAgICB9XG4gICAgaWYgKCFuZXh0UHJvcHMpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gaGFzUHJvcHNDaGFuZ2VkKHByZXZQcm9wcywgbmV4dFByb3BzLCBlbWl0cyk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaGFzUHJvcHNDaGFuZ2VkKHByZXZQcm9wcywgbmV4dFByb3BzLCBlbWl0c09wdGlvbnMpIHtcbiAgY29uc3QgbmV4dEtleXMgPSBPYmplY3Qua2V5cyhuZXh0UHJvcHMpO1xuICBpZiAobmV4dEtleXMubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhwcmV2UHJvcHMpLmxlbmd0aCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbmV4dEtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBrZXkgPSBuZXh0S2V5c1tpXTtcbiAgICBpZiAobmV4dFByb3BzW2tleV0gIT09IHByZXZQcm9wc1trZXldICYmICFpc0VtaXRMaXN0ZW5lcihlbWl0c09wdGlvbnMsIGtleSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiB1cGRhdGVIT0NIb3N0RWwoeyB2bm9kZSwgcGFyZW50IH0sIGVsKSB7XG4gIHdoaWxlIChwYXJlbnQpIHtcbiAgICBjb25zdCByb290ID0gcGFyZW50LnN1YlRyZWU7XG4gICAgaWYgKHJvb3Quc3VzcGVuc2UgJiYgcm9vdC5zdXNwZW5zZS5hY3RpdmVCcmFuY2ggPT09IHZub2RlKSB7XG4gICAgICByb290LmVsID0gdm5vZGUuZWw7XG4gICAgfVxuICAgIGlmIChyb290ID09PSB2bm9kZSkge1xuICAgICAgKHZub2RlID0gcGFyZW50LnZub2RlKS5lbCA9IGVsO1xuICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IGlzU3VzcGVuc2UgPSAodHlwZSkgPT4gdHlwZS5fX2lzU3VzcGVuc2U7XG5sZXQgc3VzcGVuc2VJZCA9IDA7XG5jb25zdCBTdXNwZW5zZUltcGwgPSB7XG4gIG5hbWU6IFwiU3VzcGVuc2VcIixcbiAgLy8gSW4gb3JkZXIgdG8gbWFrZSBTdXNwZW5zZSB0cmVlLXNoYWthYmxlLCB3ZSBuZWVkIHRvIGF2b2lkIGltcG9ydGluZyBpdFxuICAvLyBkaXJlY3RseSBpbiB0aGUgcmVuZGVyZXIuIFRoZSByZW5kZXJlciBjaGVja3MgZm9yIHRoZSBfX2lzU3VzcGVuc2UgZmxhZ1xuICAvLyBvbiBhIHZub2RlJ3MgdHlwZSBhbmQgY2FsbHMgdGhlIGBwcm9jZXNzYCBtZXRob2QsIHBhc3NpbmcgaW4gcmVuZGVyZXJcbiAgLy8gaW50ZXJuYWxzLlxuICBfX2lzU3VzcGVuc2U6IHRydWUsXG4gIHByb2Nlc3MobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMpIHtcbiAgICBpZiAobjEgPT0gbnVsbCkge1xuICAgICAgbW91bnRTdXNwZW5zZShcbiAgICAgICAgbjIsXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgYW5jaG9yLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgb3B0aW1pemVkLFxuICAgICAgICByZW5kZXJlckludGVybmFsc1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHBhcmVudFN1c3BlbnNlICYmIHBhcmVudFN1c3BlbnNlLmRlcHMgPiAwICYmICFuMS5zdXNwZW5zZS5pc0luRmFsbGJhY2spIHtcbiAgICAgICAgbjIuc3VzcGVuc2UgPSBuMS5zdXNwZW5zZTtcbiAgICAgICAgbjIuc3VzcGVuc2Uudm5vZGUgPSBuMjtcbiAgICAgICAgbjIuZWwgPSBuMS5lbDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcGF0Y2hTdXNwZW5zZShcbiAgICAgICAgbjEsXG4gICAgICAgIG4yLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIGFuY2hvcixcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgb3B0aW1pemVkLFxuICAgICAgICByZW5kZXJlckludGVybmFsc1xuICAgICAgKTtcbiAgICB9XG4gIH0sXG4gIGh5ZHJhdGU6IGh5ZHJhdGVTdXNwZW5zZSxcbiAgbm9ybWFsaXplOiBub3JtYWxpemVTdXNwZW5zZUNoaWxkcmVuXG59O1xuY29uc3QgU3VzcGVuc2UgPSBTdXNwZW5zZUltcGwgO1xuZnVuY3Rpb24gdHJpZ2dlckV2ZW50KHZub2RlLCBuYW1lKSB7XG4gIGNvbnN0IGV2ZW50TGlzdGVuZXIgPSB2bm9kZS5wcm9wcyAmJiB2bm9kZS5wcm9wc1tuYW1lXTtcbiAgaWYgKGlzRnVuY3Rpb24oZXZlbnRMaXN0ZW5lcikpIHtcbiAgICBldmVudExpc3RlbmVyKCk7XG4gIH1cbn1cbmZ1bmN0aW9uIG1vdW50U3VzcGVuc2Uodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBuYW1lc3BhY2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCByZW5kZXJlckludGVybmFscykge1xuICBjb25zdCB7XG4gICAgcDogcGF0Y2gsXG4gICAgbzogeyBjcmVhdGVFbGVtZW50IH1cbiAgfSA9IHJlbmRlcmVySW50ZXJuYWxzO1xuICBjb25zdCBoaWRkZW5Db250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBjb25zdCBzdXNwZW5zZSA9IHZub2RlLnN1c3BlbnNlID0gY3JlYXRlU3VzcGVuc2VCb3VuZGFyeShcbiAgICB2bm9kZSxcbiAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgY29udGFpbmVyLFxuICAgIGhpZGRlbkNvbnRhaW5lcixcbiAgICBhbmNob3IsXG4gICAgbmFtZXNwYWNlLFxuICAgIHNsb3RTY29wZUlkcyxcbiAgICBvcHRpbWl6ZWQsXG4gICAgcmVuZGVyZXJJbnRlcm5hbHNcbiAgKTtcbiAgcGF0Y2goXG4gICAgbnVsbCxcbiAgICBzdXNwZW5zZS5wZW5kaW5nQnJhbmNoID0gdm5vZGUuc3NDb250ZW50LFxuICAgIGhpZGRlbkNvbnRhaW5lcixcbiAgICBudWxsLFxuICAgIHBhcmVudENvbXBvbmVudCxcbiAgICBzdXNwZW5zZSxcbiAgICBuYW1lc3BhY2UsXG4gICAgc2xvdFNjb3BlSWRzXG4gICk7XG4gIGlmIChzdXNwZW5zZS5kZXBzID4gMCkge1xuICAgIHRyaWdnZXJFdmVudCh2bm9kZSwgXCJvblBlbmRpbmdcIik7XG4gICAgdHJpZ2dlckV2ZW50KHZub2RlLCBcIm9uRmFsbGJhY2tcIik7XG4gICAgcGF0Y2goXG4gICAgICBudWxsLFxuICAgICAgdm5vZGUuc3NGYWxsYmFjayxcbiAgICAgIGNvbnRhaW5lcixcbiAgICAgIGFuY2hvcixcbiAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgIG51bGwsXG4gICAgICAvLyBmYWxsYmFjayB0cmVlIHdpbGwgbm90IGhhdmUgc3VzcGVuc2UgY29udGV4dFxuICAgICAgbmFtZXNwYWNlLFxuICAgICAgc2xvdFNjb3BlSWRzXG4gICAgKTtcbiAgICBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIHZub2RlLnNzRmFsbGJhY2spO1xuICB9IGVsc2Uge1xuICAgIHN1c3BlbnNlLnJlc29sdmUoZmFsc2UsIHRydWUpO1xuICB9XG59XG5mdW5jdGlvbiBwYXRjaFN1c3BlbnNlKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgeyBwOiBwYXRjaCwgdW06IHVubW91bnQsIG86IHsgY3JlYXRlRWxlbWVudCB9IH0pIHtcbiAgY29uc3Qgc3VzcGVuc2UgPSBuMi5zdXNwZW5zZSA9IG4xLnN1c3BlbnNlO1xuICBzdXNwZW5zZS52bm9kZSA9IG4yO1xuICBuMi5lbCA9IG4xLmVsO1xuICBjb25zdCBuZXdCcmFuY2ggPSBuMi5zc0NvbnRlbnQ7XG4gIGNvbnN0IG5ld0ZhbGxiYWNrID0gbjIuc3NGYWxsYmFjaztcbiAgY29uc3QgeyBhY3RpdmVCcmFuY2gsIHBlbmRpbmdCcmFuY2gsIGlzSW5GYWxsYmFjaywgaXNIeWRyYXRpbmcgfSA9IHN1c3BlbnNlO1xuICBpZiAocGVuZGluZ0JyYW5jaCkge1xuICAgIHN1c3BlbnNlLnBlbmRpbmdCcmFuY2ggPSBuZXdCcmFuY2g7XG4gICAgaWYgKGlzU2FtZVZOb2RlVHlwZShuZXdCcmFuY2gsIHBlbmRpbmdCcmFuY2gpKSB7XG4gICAgICBwYXRjaChcbiAgICAgICAgcGVuZGluZ0JyYW5jaCxcbiAgICAgICAgbmV3QnJhbmNoLFxuICAgICAgICBzdXNwZW5zZS5oaWRkZW5Db250YWluZXIsXG4gICAgICAgIG51bGwsXG4gICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgc3VzcGVuc2UsXG4gICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICk7XG4gICAgICBpZiAoc3VzcGVuc2UuZGVwcyA8PSAwKSB7XG4gICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNJbkZhbGxiYWNrKSB7XG4gICAgICAgIGlmICghaXNIeWRyYXRpbmcpIHtcbiAgICAgICAgICBwYXRjaChcbiAgICAgICAgICAgIGFjdGl2ZUJyYW5jaCxcbiAgICAgICAgICAgIG5ld0ZhbGxiYWNrLFxuICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIC8vIGZhbGxiYWNrIHRyZWUgd2lsbCBub3QgaGF2ZSBzdXNwZW5zZSBjb250ZXh0XG4gICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgICApO1xuICAgICAgICAgIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgbmV3RmFsbGJhY2spO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1c3BlbnNlLnBlbmRpbmdJZCA9IHN1c3BlbnNlSWQrKztcbiAgICAgIGlmIChpc0h5ZHJhdGluZykge1xuICAgICAgICBzdXNwZW5zZS5pc0h5ZHJhdGluZyA9IGZhbHNlO1xuICAgICAgICBzdXNwZW5zZS5hY3RpdmVCcmFuY2ggPSBwZW5kaW5nQnJhbmNoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdW5tb3VudChwZW5kaW5nQnJhbmNoLCBwYXJlbnRDb21wb25lbnQsIHN1c3BlbnNlKTtcbiAgICAgIH1cbiAgICAgIHN1c3BlbnNlLmRlcHMgPSAwO1xuICAgICAgc3VzcGVuc2UuZWZmZWN0cy5sZW5ndGggPSAwO1xuICAgICAgc3VzcGVuc2UuaGlkZGVuQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGlmIChpc0luRmFsbGJhY2spIHtcbiAgICAgICAgcGF0Y2goXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBuZXdCcmFuY2gsXG4gICAgICAgICAgc3VzcGVuc2UuaGlkZGVuQ29udGFpbmVyLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHN1c3BlbnNlLFxuICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICk7XG4gICAgICAgIGlmIChzdXNwZW5zZS5kZXBzIDw9IDApIHtcbiAgICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGF0Y2goXG4gICAgICAgICAgICBhY3RpdmVCcmFuY2gsXG4gICAgICAgICAgICBuZXdGYWxsYmFjayxcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAvLyBmYWxsYmFjayB0cmVlIHdpbGwgbm90IGhhdmUgc3VzcGVuc2UgY29udGV4dFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIG5ld0ZhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhY3RpdmVCcmFuY2ggJiYgaXNTYW1lVk5vZGVUeXBlKG5ld0JyYW5jaCwgYWN0aXZlQnJhbmNoKSkge1xuICAgICAgICBwYXRjaChcbiAgICAgICAgICBhY3RpdmVCcmFuY2gsXG4gICAgICAgICAgbmV3QnJhbmNoLFxuICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICBhbmNob3IsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHN1c3BlbnNlLFxuICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICk7XG4gICAgICAgIHN1c3BlbnNlLnJlc29sdmUodHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXRjaChcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIG5ld0JyYW5jaCxcbiAgICAgICAgICBzdXNwZW5zZS5oaWRkZW5Db250YWluZXIsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgc3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHN1c3BlbnNlLmRlcHMgPD0gMCkge1xuICAgICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoYWN0aXZlQnJhbmNoICYmIGlzU2FtZVZOb2RlVHlwZShuZXdCcmFuY2gsIGFjdGl2ZUJyYW5jaCkpIHtcbiAgICAgIHBhdGNoKFxuICAgICAgICBhY3RpdmVCcmFuY2gsXG4gICAgICAgIG5ld0JyYW5jaCxcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBhbmNob3IsXG4gICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgc3VzcGVuc2UsXG4gICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICk7XG4gICAgICBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIG5ld0JyYW5jaCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyaWdnZXJFdmVudChuMiwgXCJvblBlbmRpbmdcIik7XG4gICAgICBzdXNwZW5zZS5wZW5kaW5nQnJhbmNoID0gbmV3QnJhbmNoO1xuICAgICAgaWYgKG5ld0JyYW5jaC5zaGFwZUZsYWcgJiA1MTIpIHtcbiAgICAgICAgc3VzcGVuc2UucGVuZGluZ0lkID0gbmV3QnJhbmNoLmNvbXBvbmVudC5zdXNwZW5zZUlkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3VzcGVuc2UucGVuZGluZ0lkID0gc3VzcGVuc2VJZCsrO1xuICAgICAgfVxuICAgICAgcGF0Y2goXG4gICAgICAgIG51bGwsXG4gICAgICAgIG5ld0JyYW5jaCxcbiAgICAgICAgc3VzcGVuc2UuaGlkZGVuQ29udGFpbmVyLFxuICAgICAgICBudWxsLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHN1c3BlbnNlLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgb3B0aW1pemVkXG4gICAgICApO1xuICAgICAgaWYgKHN1c3BlbnNlLmRlcHMgPD0gMCkge1xuICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB7IHRpbWVvdXQsIHBlbmRpbmdJZCB9ID0gc3VzcGVuc2U7XG4gICAgICAgIGlmICh0aW1lb3V0ID4gMCkge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHN1c3BlbnNlLnBlbmRpbmdJZCA9PT0gcGVuZGluZ0lkKSB7XG4gICAgICAgICAgICAgIHN1c3BlbnNlLmZhbGxiYWNrKG5ld0ZhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgfSBlbHNlIGlmICh0aW1lb3V0ID09PSAwKSB7XG4gICAgICAgICAgc3VzcGVuc2UuZmFsbGJhY2sobmV3RmFsbGJhY2spO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5sZXQgaGFzV2FybmVkID0gZmFsc2U7XG5mdW5jdGlvbiBjcmVhdGVTdXNwZW5zZUJvdW5kYXJ5KHZub2RlLCBwYXJlbnRTdXNwZW5zZSwgcGFyZW50Q29tcG9uZW50LCBjb250YWluZXIsIGhpZGRlbkNvbnRhaW5lciwgYW5jaG9yLCBuYW1lc3BhY2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCByZW5kZXJlckludGVybmFscywgaXNIeWRyYXRpbmcgPSBmYWxzZSkge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB0cnVlICYmICFoYXNXYXJuZWQpIHtcbiAgICBoYXNXYXJuZWQgPSB0cnVlO1xuICAgIGNvbnNvbGVbY29uc29sZS5pbmZvID8gXCJpbmZvXCIgOiBcImxvZ1wiXShcbiAgICAgIGA8U3VzcGVuc2U+IGlzIGFuIGV4cGVyaW1lbnRhbCBmZWF0dXJlIGFuZCBpdHMgQVBJIHdpbGwgbGlrZWx5IGNoYW5nZS5gXG4gICAgKTtcbiAgfVxuICBjb25zdCB7XG4gICAgcDogcGF0Y2gsXG4gICAgbTogbW92ZSxcbiAgICB1bTogdW5tb3VudCxcbiAgICBuOiBuZXh0LFxuICAgIG86IHsgcGFyZW50Tm9kZSwgcmVtb3ZlIH1cbiAgfSA9IHJlbmRlcmVySW50ZXJuYWxzO1xuICBsZXQgcGFyZW50U3VzcGVuc2VJZDtcbiAgY29uc3QgaXNTdXNwZW5zaWJsZSA9IGlzVk5vZGVTdXNwZW5zaWJsZSh2bm9kZSk7XG4gIGlmIChpc1N1c3BlbnNpYmxlKSB7XG4gICAgaWYgKHBhcmVudFN1c3BlbnNlICYmIHBhcmVudFN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpIHtcbiAgICAgIHBhcmVudFN1c3BlbnNlSWQgPSBwYXJlbnRTdXNwZW5zZS5wZW5kaW5nSWQ7XG4gICAgICBwYXJlbnRTdXNwZW5zZS5kZXBzKys7XG4gICAgfVxuICB9XG4gIGNvbnN0IHRpbWVvdXQgPSB2bm9kZS5wcm9wcyA/IHRvTnVtYmVyKHZub2RlLnByb3BzLnRpbWVvdXQpIDogdm9pZCAwO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGFzc2VydE51bWJlcih0aW1lb3V0LCBgU3VzcGVuc2UgdGltZW91dGApO1xuICB9XG4gIGNvbnN0IGluaXRpYWxBbmNob3IgPSBhbmNob3I7XG4gIGNvbnN0IHN1c3BlbnNlID0ge1xuICAgIHZub2RlLFxuICAgIHBhcmVudDogcGFyZW50U3VzcGVuc2UsXG4gICAgcGFyZW50Q29tcG9uZW50LFxuICAgIG5hbWVzcGFjZSxcbiAgICBjb250YWluZXIsXG4gICAgaGlkZGVuQ29udGFpbmVyLFxuICAgIGRlcHM6IDAsXG4gICAgcGVuZGluZ0lkOiBzdXNwZW5zZUlkKyssXG4gICAgdGltZW91dDogdHlwZW9mIHRpbWVvdXQgPT09IFwibnVtYmVyXCIgPyB0aW1lb3V0IDogLTEsXG4gICAgYWN0aXZlQnJhbmNoOiBudWxsLFxuICAgIHBlbmRpbmdCcmFuY2g6IG51bGwsXG4gICAgaXNJbkZhbGxiYWNrOiAhaXNIeWRyYXRpbmcsXG4gICAgaXNIeWRyYXRpbmcsXG4gICAgaXNVbm1vdW50ZWQ6IGZhbHNlLFxuICAgIGVmZmVjdHM6IFtdLFxuICAgIHJlc29sdmUocmVzdW1lID0gZmFsc2UsIHN5bmMgPSBmYWxzZSkge1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgaWYgKCFyZXN1bWUgJiYgIXN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgc3VzcGVuc2UucmVzb2x2ZSgpIGlzIGNhbGxlZCB3aXRob3V0IGEgcGVuZGluZyBicmFuY2guYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1c3BlbnNlLmlzVW5tb3VudGVkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYHN1c3BlbnNlLnJlc29sdmUoKSBpcyBjYWxsZWQgb24gYW4gYWxyZWFkeSB1bm1vdW50ZWQgc3VzcGVuc2UgYm91bmRhcnkuYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHtcbiAgICAgICAgdm5vZGU6IHZub2RlMixcbiAgICAgICAgYWN0aXZlQnJhbmNoLFxuICAgICAgICBwZW5kaW5nQnJhbmNoLFxuICAgICAgICBwZW5kaW5nSWQsXG4gICAgICAgIGVmZmVjdHMsXG4gICAgICAgIHBhcmVudENvbXBvbmVudDogcGFyZW50Q29tcG9uZW50MixcbiAgICAgICAgY29udGFpbmVyOiBjb250YWluZXIyXG4gICAgICB9ID0gc3VzcGVuc2U7XG4gICAgICBsZXQgZGVsYXlFbnRlciA9IGZhbHNlO1xuICAgICAgaWYgKHN1c3BlbnNlLmlzSHlkcmF0aW5nKSB7XG4gICAgICAgIHN1c3BlbnNlLmlzSHlkcmF0aW5nID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKCFyZXN1bWUpIHtcbiAgICAgICAgZGVsYXlFbnRlciA9IGFjdGl2ZUJyYW5jaCAmJiBwZW5kaW5nQnJhbmNoLnRyYW5zaXRpb24gJiYgcGVuZGluZ0JyYW5jaC50cmFuc2l0aW9uLm1vZGUgPT09IFwib3V0LWluXCI7XG4gICAgICAgIGlmIChkZWxheUVudGVyKSB7XG4gICAgICAgICAgYWN0aXZlQnJhbmNoLnRyYW5zaXRpb24uYWZ0ZXJMZWF2ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChwZW5kaW5nSWQgPT09IHN1c3BlbnNlLnBlbmRpbmdJZCkge1xuICAgICAgICAgICAgICBtb3ZlKFxuICAgICAgICAgICAgICAgIHBlbmRpbmdCcmFuY2gsXG4gICAgICAgICAgICAgICAgY29udGFpbmVyMixcbiAgICAgICAgICAgICAgICBhbmNob3IgPT09IGluaXRpYWxBbmNob3IgPyBuZXh0KGFjdGl2ZUJyYW5jaCkgOiBhbmNob3IsXG4gICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBxdWV1ZVBvc3RGbHVzaENiKGVmZmVjdHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFjdGl2ZUJyYW5jaCkge1xuICAgICAgICAgIGlmIChwYXJlbnROb2RlKGFjdGl2ZUJyYW5jaC5lbCkgPT09IGNvbnRhaW5lcjIpIHtcbiAgICAgICAgICAgIGFuY2hvciA9IG5leHQoYWN0aXZlQnJhbmNoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdW5tb3VudChhY3RpdmVCcmFuY2gsIHBhcmVudENvbXBvbmVudDIsIHN1c3BlbnNlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRlbGF5RW50ZXIpIHtcbiAgICAgICAgICBtb3ZlKHBlbmRpbmdCcmFuY2gsIGNvbnRhaW5lcjIsIGFuY2hvciwgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgcGVuZGluZ0JyYW5jaCk7XG4gICAgICBzdXNwZW5zZS5wZW5kaW5nQnJhbmNoID0gbnVsbDtcbiAgICAgIHN1c3BlbnNlLmlzSW5GYWxsYmFjayA9IGZhbHNlO1xuICAgICAgbGV0IHBhcmVudCA9IHN1c3BlbnNlLnBhcmVudDtcbiAgICAgIGxldCBoYXNVbnJlc29sdmVkQW5jZXN0b3IgPSBmYWxzZTtcbiAgICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgICAgaWYgKHBhcmVudC5wZW5kaW5nQnJhbmNoKSB7XG4gICAgICAgICAgcGFyZW50LmVmZmVjdHMucHVzaCguLi5lZmZlY3RzKTtcbiAgICAgICAgICBoYXNVbnJlc29sdmVkQW5jZXN0b3IgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG4gICAgICB9XG4gICAgICBpZiAoIWhhc1VucmVzb2x2ZWRBbmNlc3RvciAmJiAhZGVsYXlFbnRlcikge1xuICAgICAgICBxdWV1ZVBvc3RGbHVzaENiKGVmZmVjdHMpO1xuICAgICAgfVxuICAgICAgc3VzcGVuc2UuZWZmZWN0cyA9IFtdO1xuICAgICAgaWYgKGlzU3VzcGVuc2libGUpIHtcbiAgICAgICAgaWYgKHBhcmVudFN1c3BlbnNlICYmIHBhcmVudFN1c3BlbnNlLnBlbmRpbmdCcmFuY2ggJiYgcGFyZW50U3VzcGVuc2VJZCA9PT0gcGFyZW50U3VzcGVuc2UucGVuZGluZ0lkKSB7XG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UuZGVwcy0tO1xuICAgICAgICAgIGlmIChwYXJlbnRTdXNwZW5zZS5kZXBzID09PSAwICYmICFzeW5jKSB7XG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZS5yZXNvbHZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0cmlnZ2VyRXZlbnQodm5vZGUyLCBcIm9uUmVzb2x2ZVwiKTtcbiAgICB9LFxuICAgIGZhbGxiYWNrKGZhbGxiYWNrVk5vZGUpIHtcbiAgICAgIGlmICghc3VzcGVuc2UucGVuZGluZ0JyYW5jaCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCB7IHZub2RlOiB2bm9kZTIsIGFjdGl2ZUJyYW5jaCwgcGFyZW50Q29tcG9uZW50OiBwYXJlbnRDb21wb25lbnQyLCBjb250YWluZXI6IGNvbnRhaW5lcjIsIG5hbWVzcGFjZTogbmFtZXNwYWNlMiB9ID0gc3VzcGVuc2U7XG4gICAgICB0cmlnZ2VyRXZlbnQodm5vZGUyLCBcIm9uRmFsbGJhY2tcIik7XG4gICAgICBjb25zdCBhbmNob3IyID0gbmV4dChhY3RpdmVCcmFuY2gpO1xuICAgICAgY29uc3QgbW91bnRGYWxsYmFjayA9ICgpID0+IHtcbiAgICAgICAgaWYgKCFzdXNwZW5zZS5pc0luRmFsbGJhY2spIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcGF0Y2goXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBmYWxsYmFja1ZOb2RlLFxuICAgICAgICAgIGNvbnRhaW5lcjIsXG4gICAgICAgICAgYW5jaG9yMixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQyLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgLy8gZmFsbGJhY2sgdHJlZSB3aWxsIG5vdCBoYXZlIHN1c3BlbnNlIGNvbnRleHRcbiAgICAgICAgICBuYW1lc3BhY2UyLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgICAgc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCBmYWxsYmFja1ZOb2RlKTtcbiAgICAgIH07XG4gICAgICBjb25zdCBkZWxheUVudGVyID0gZmFsbGJhY2tWTm9kZS50cmFuc2l0aW9uICYmIGZhbGxiYWNrVk5vZGUudHJhbnNpdGlvbi5tb2RlID09PSBcIm91dC1pblwiO1xuICAgICAgaWYgKGRlbGF5RW50ZXIpIHtcbiAgICAgICAgYWN0aXZlQnJhbmNoLnRyYW5zaXRpb24uYWZ0ZXJMZWF2ZSA9IG1vdW50RmFsbGJhY2s7XG4gICAgICB9XG4gICAgICBzdXNwZW5zZS5pc0luRmFsbGJhY2sgPSB0cnVlO1xuICAgICAgdW5tb3VudChcbiAgICAgICAgYWN0aXZlQnJhbmNoLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQyLFxuICAgICAgICBudWxsLFxuICAgICAgICAvLyBubyBzdXNwZW5zZSBzbyB1bm1vdW50IGhvb2tzIGZpcmUgbm93XG4gICAgICAgIHRydWVcbiAgICAgICAgLy8gc2hvdWxkUmVtb3ZlXG4gICAgICApO1xuICAgICAgaWYgKCFkZWxheUVudGVyKSB7XG4gICAgICAgIG1vdW50RmFsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIG1vdmUoY29udGFpbmVyMiwgYW5jaG9yMiwgdHlwZSkge1xuICAgICAgc3VzcGVuc2UuYWN0aXZlQnJhbmNoICYmIG1vdmUoc3VzcGVuc2UuYWN0aXZlQnJhbmNoLCBjb250YWluZXIyLCBhbmNob3IyLCB0eXBlKTtcbiAgICAgIHN1c3BlbnNlLmNvbnRhaW5lciA9IGNvbnRhaW5lcjI7XG4gICAgfSxcbiAgICBuZXh0KCkge1xuICAgICAgcmV0dXJuIHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCAmJiBuZXh0KHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCk7XG4gICAgfSxcbiAgICByZWdpc3RlckRlcChpbnN0YW5jZSwgc2V0dXBSZW5kZXJFZmZlY3QsIG9wdGltaXplZDIpIHtcbiAgICAgIGNvbnN0IGlzSW5QZW5kaW5nU3VzcGVuc2UgPSAhIXN1c3BlbnNlLnBlbmRpbmdCcmFuY2g7XG4gICAgICBpZiAoaXNJblBlbmRpbmdTdXNwZW5zZSkge1xuICAgICAgICBzdXNwZW5zZS5kZXBzKys7XG4gICAgICB9XG4gICAgICBjb25zdCBoeWRyYXRlZEVsID0gaW5zdGFuY2Uudm5vZGUuZWw7XG4gICAgICBpbnN0YW5jZS5hc3luY0RlcC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGhhbmRsZUVycm9yKGVyciwgaW5zdGFuY2UsIDApO1xuICAgICAgfSkudGhlbigoYXN5bmNTZXR1cFJlc3VsdCkgPT4ge1xuICAgICAgICBpZiAoaW5zdGFuY2UuaXNVbm1vdW50ZWQgfHwgc3VzcGVuc2UuaXNVbm1vdW50ZWQgfHwgc3VzcGVuc2UucGVuZGluZ0lkICE9PSBpbnN0YW5jZS5zdXNwZW5zZUlkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGluc3RhbmNlLmFzeW5jUmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgICBjb25zdCB7IHZub2RlOiB2bm9kZTIgfSA9IGluc3RhbmNlO1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHB1c2hXYXJuaW5nQ29udGV4dCh2bm9kZTIpO1xuICAgICAgICB9XG4gICAgICAgIGhhbmRsZVNldHVwUmVzdWx0KGluc3RhbmNlLCBhc3luY1NldHVwUmVzdWx0LCBmYWxzZSk7XG4gICAgICAgIGlmIChoeWRyYXRlZEVsKSB7XG4gICAgICAgICAgdm5vZGUyLmVsID0gaHlkcmF0ZWRFbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwbGFjZWhvbGRlciA9ICFoeWRyYXRlZEVsICYmIGluc3RhbmNlLnN1YlRyZWUuZWw7XG4gICAgICAgIHNldHVwUmVuZGVyRWZmZWN0KFxuICAgICAgICAgIGluc3RhbmNlLFxuICAgICAgICAgIHZub2RlMixcbiAgICAgICAgICAvLyBjb21wb25lbnQgbWF5IGhhdmUgYmVlbiBtb3ZlZCBiZWZvcmUgcmVzb2x2ZS5cbiAgICAgICAgICAvLyBpZiB0aGlzIGlzIG5vdCBhIGh5ZHJhdGlvbiwgaW5zdGFuY2Uuc3ViVHJlZSB3aWxsIGJlIHRoZSBjb21tZW50XG4gICAgICAgICAgLy8gcGxhY2Vob2xkZXIuXG4gICAgICAgICAgcGFyZW50Tm9kZShoeWRyYXRlZEVsIHx8IGluc3RhbmNlLnN1YlRyZWUuZWwpLFxuICAgICAgICAgIC8vIGFuY2hvciB3aWxsIG5vdCBiZSB1c2VkIGlmIHRoaXMgaXMgaHlkcmF0aW9uLCBzbyBvbmx5IG5lZWQgdG9cbiAgICAgICAgICAvLyBjb25zaWRlciB0aGUgY29tbWVudCBwbGFjZWhvbGRlciBjYXNlLlxuICAgICAgICAgIGh5ZHJhdGVkRWwgPyBudWxsIDogbmV4dChpbnN0YW5jZS5zdWJUcmVlKSxcbiAgICAgICAgICBzdXNwZW5zZSxcbiAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgb3B0aW1pemVkMlxuICAgICAgICApO1xuICAgICAgICBpZiAocGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICByZW1vdmUocGxhY2Vob2xkZXIpO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZUhPQ0hvc3RFbChpbnN0YW5jZSwgdm5vZGUyLmVsKTtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0luUGVuZGluZ1N1c3BlbnNlICYmIC0tc3VzcGVuc2UuZGVwcyA9PT0gMCkge1xuICAgICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICB1bm1vdW50KHBhcmVudFN1c3BlbnNlMiwgZG9SZW1vdmUpIHtcbiAgICAgIHN1c3BlbnNlLmlzVW5tb3VudGVkID0gdHJ1ZTtcbiAgICAgIGlmIChzdXNwZW5zZS5hY3RpdmVCcmFuY2gpIHtcbiAgICAgICAgdW5tb3VudChcbiAgICAgICAgICBzdXNwZW5zZS5hY3RpdmVCcmFuY2gsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlMixcbiAgICAgICAgICBkb1JlbW92ZVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpIHtcbiAgICAgICAgdW5tb3VudChcbiAgICAgICAgICBzdXNwZW5zZS5wZW5kaW5nQnJhbmNoLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZTIsXG4gICAgICAgICAgZG9SZW1vdmVcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIHJldHVybiBzdXNwZW5zZTtcbn1cbmZ1bmN0aW9uIGh5ZHJhdGVTdXNwZW5zZShub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMsIGh5ZHJhdGVOb2RlKSB7XG4gIGNvbnN0IHN1c3BlbnNlID0gdm5vZGUuc3VzcGVuc2UgPSBjcmVhdGVTdXNwZW5zZUJvdW5kYXJ5KFxuICAgIHZub2RlLFxuICAgIHBhcmVudFN1c3BlbnNlLFxuICAgIHBhcmVudENvbXBvbmVudCxcbiAgICBub2RlLnBhcmVudE5vZGUsXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xuICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgbnVsbCxcbiAgICBuYW1lc3BhY2UsXG4gICAgc2xvdFNjb3BlSWRzLFxuICAgIG9wdGltaXplZCxcbiAgICByZW5kZXJlckludGVybmFscyxcbiAgICB0cnVlXG4gICk7XG4gIGNvbnN0IHJlc3VsdCA9IGh5ZHJhdGVOb2RlKFxuICAgIG5vZGUsXG4gICAgc3VzcGVuc2UucGVuZGluZ0JyYW5jaCA9IHZub2RlLnNzQ29udGVudCxcbiAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgc3VzcGVuc2UsXG4gICAgc2xvdFNjb3BlSWRzLFxuICAgIG9wdGltaXplZFxuICApO1xuICBpZiAoc3VzcGVuc2UuZGVwcyA9PT0gMCkge1xuICAgIHN1c3BlbnNlLnJlc29sdmUoZmFsc2UsIHRydWUpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBub3JtYWxpemVTdXNwZW5zZUNoaWxkcmVuKHZub2RlKSB7XG4gIGNvbnN0IHsgc2hhcGVGbGFnLCBjaGlsZHJlbiB9ID0gdm5vZGU7XG4gIGNvbnN0IGlzU2xvdENoaWxkcmVuID0gc2hhcGVGbGFnICYgMzI7XG4gIHZub2RlLnNzQ29udGVudCA9IG5vcm1hbGl6ZVN1c3BlbnNlU2xvdChcbiAgICBpc1Nsb3RDaGlsZHJlbiA/IGNoaWxkcmVuLmRlZmF1bHQgOiBjaGlsZHJlblxuICApO1xuICB2bm9kZS5zc0ZhbGxiYWNrID0gaXNTbG90Q2hpbGRyZW4gPyBub3JtYWxpemVTdXNwZW5zZVNsb3QoY2hpbGRyZW4uZmFsbGJhY2spIDogY3JlYXRlVk5vZGUoQ29tbWVudCk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVTdXNwZW5zZVNsb3Qocykge1xuICBsZXQgYmxvY2s7XG4gIGlmIChpc0Z1bmN0aW9uKHMpKSB7XG4gICAgY29uc3QgdHJhY2tCbG9jayA9IGlzQmxvY2tUcmVlRW5hYmxlZCAmJiBzLl9jO1xuICAgIGlmICh0cmFja0Jsb2NrKSB7XG4gICAgICBzLl9kID0gZmFsc2U7XG4gICAgICBvcGVuQmxvY2soKTtcbiAgICB9XG4gICAgcyA9IHMoKTtcbiAgICBpZiAodHJhY2tCbG9jaykge1xuICAgICAgcy5fZCA9IHRydWU7XG4gICAgICBibG9jayA9IGN1cnJlbnRCbG9jaztcbiAgICAgIGNsb3NlQmxvY2soKTtcbiAgICB9XG4gIH1cbiAgaWYgKGlzQXJyYXkocykpIHtcbiAgICBjb25zdCBzaW5nbGVDaGlsZCA9IGZpbHRlclNpbmdsZVJvb3Qocyk7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIXNpbmdsZUNoaWxkICYmIHMuZmlsdGVyKChjaGlsZCkgPT4gY2hpbGQgIT09IE5VTExfRFlOQU1JQ19DT01QT05FTlQpLmxlbmd0aCA+IDApIHtcbiAgICAgIHdhcm4kMShgPFN1c3BlbnNlPiBzbG90cyBleHBlY3QgYSBzaW5nbGUgcm9vdCBub2RlLmApO1xuICAgIH1cbiAgICBzID0gc2luZ2xlQ2hpbGQ7XG4gIH1cbiAgcyA9IG5vcm1hbGl6ZVZOb2RlKHMpO1xuICBpZiAoYmxvY2sgJiYgIXMuZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgcy5keW5hbWljQ2hpbGRyZW4gPSBibG9jay5maWx0ZXIoKGMpID0+IGMgIT09IHMpO1xuICB9XG4gIHJldHVybiBzO1xufVxuZnVuY3Rpb24gcXVldWVFZmZlY3RXaXRoU3VzcGVuc2UoZm4sIHN1c3BlbnNlKSB7XG4gIGlmIChzdXNwZW5zZSAmJiBzdXNwZW5zZS5wZW5kaW5nQnJhbmNoKSB7XG4gICAgaWYgKGlzQXJyYXkoZm4pKSB7XG4gICAgICBzdXNwZW5zZS5lZmZlY3RzLnB1c2goLi4uZm4pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdXNwZW5zZS5lZmZlY3RzLnB1c2goZm4pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBxdWV1ZVBvc3RGbHVzaENiKGZuKTtcbiAgfVxufVxuZnVuY3Rpb24gc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCBicmFuY2gpIHtcbiAgc3VzcGVuc2UuYWN0aXZlQnJhbmNoID0gYnJhbmNoO1xuICBjb25zdCB7IHZub2RlLCBwYXJlbnRDb21wb25lbnQgfSA9IHN1c3BlbnNlO1xuICBsZXQgZWwgPSBicmFuY2guZWw7XG4gIHdoaWxlICghZWwgJiYgYnJhbmNoLmNvbXBvbmVudCkge1xuICAgIGJyYW5jaCA9IGJyYW5jaC5jb21wb25lbnQuc3ViVHJlZTtcbiAgICBlbCA9IGJyYW5jaC5lbDtcbiAgfVxuICB2bm9kZS5lbCA9IGVsO1xuICBpZiAocGFyZW50Q29tcG9uZW50ICYmIHBhcmVudENvbXBvbmVudC5zdWJUcmVlID09PSB2bm9kZSkge1xuICAgIHBhcmVudENvbXBvbmVudC52bm9kZS5lbCA9IGVsO1xuICAgIHVwZGF0ZUhPQ0hvc3RFbChwYXJlbnRDb21wb25lbnQsIGVsKTtcbiAgfVxufVxuZnVuY3Rpb24gaXNWTm9kZVN1c3BlbnNpYmxlKHZub2RlKSB7XG4gIGNvbnN0IHN1c3BlbnNpYmxlID0gdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMuc3VzcGVuc2libGU7XG4gIHJldHVybiBzdXNwZW5zaWJsZSAhPSBudWxsICYmIHN1c3BlbnNpYmxlICE9PSBmYWxzZTtcbn1cblxuY29uc3QgRnJhZ21lbnQgPSBTeW1ib2wuZm9yKFwidi1mZ3RcIik7XG5jb25zdCBUZXh0ID0gU3ltYm9sLmZvcihcInYtdHh0XCIpO1xuY29uc3QgQ29tbWVudCA9IFN5bWJvbC5mb3IoXCJ2LWNtdFwiKTtcbmNvbnN0IFN0YXRpYyA9IFN5bWJvbC5mb3IoXCJ2LXN0Y1wiKTtcbmNvbnN0IGJsb2NrU3RhY2sgPSBbXTtcbmxldCBjdXJyZW50QmxvY2sgPSBudWxsO1xuZnVuY3Rpb24gb3BlbkJsb2NrKGRpc2FibGVUcmFja2luZyA9IGZhbHNlKSB7XG4gIGJsb2NrU3RhY2sucHVzaChjdXJyZW50QmxvY2sgPSBkaXNhYmxlVHJhY2tpbmcgPyBudWxsIDogW10pO1xufVxuZnVuY3Rpb24gY2xvc2VCbG9jaygpIHtcbiAgYmxvY2tTdGFjay5wb3AoKTtcbiAgY3VycmVudEJsb2NrID0gYmxvY2tTdGFja1tibG9ja1N0YWNrLmxlbmd0aCAtIDFdIHx8IG51bGw7XG59XG5sZXQgaXNCbG9ja1RyZWVFbmFibGVkID0gMTtcbmZ1bmN0aW9uIHNldEJsb2NrVHJhY2tpbmcodmFsdWUsIGluVk9uY2UgPSBmYWxzZSkge1xuICBpc0Jsb2NrVHJlZUVuYWJsZWQgKz0gdmFsdWU7XG4gIGlmICh2YWx1ZSA8IDAgJiYgY3VycmVudEJsb2NrICYmIGluVk9uY2UpIHtcbiAgICBjdXJyZW50QmxvY2suaGFzT25jZSA9IHRydWU7XG4gIH1cbn1cbmZ1bmN0aW9uIHNldHVwQmxvY2sodm5vZGUpIHtcbiAgdm5vZGUuZHluYW1pY0NoaWxkcmVuID0gaXNCbG9ja1RyZWVFbmFibGVkID4gMCA/IGN1cnJlbnRCbG9jayB8fCBFTVBUWV9BUlIgOiBudWxsO1xuICBjbG9zZUJsb2NrKCk7XG4gIGlmIChpc0Jsb2NrVHJlZUVuYWJsZWQgPiAwICYmIGN1cnJlbnRCbG9jaykge1xuICAgIGN1cnJlbnRCbG9jay5wdXNoKHZub2RlKTtcbiAgfVxuICByZXR1cm4gdm5vZGU7XG59XG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50QmxvY2sodHlwZSwgcHJvcHMsIGNoaWxkcmVuLCBwYXRjaEZsYWcsIGR5bmFtaWNQcm9wcywgc2hhcGVGbGFnKSB7XG4gIHJldHVybiBzZXR1cEJsb2NrKFxuICAgIGNyZWF0ZUJhc2VWTm9kZShcbiAgICAgIHR5cGUsXG4gICAgICBwcm9wcyxcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgcGF0Y2hGbGFnLFxuICAgICAgZHluYW1pY1Byb3BzLFxuICAgICAgc2hhcGVGbGFnLFxuICAgICAgdHJ1ZVxuICAgIClcbiAgKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUJsb2NrKHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgcGF0Y2hGbGFnLCBkeW5hbWljUHJvcHMpIHtcbiAgcmV0dXJuIHNldHVwQmxvY2soXG4gICAgY3JlYXRlVk5vZGUoXG4gICAgICB0eXBlLFxuICAgICAgcHJvcHMsXG4gICAgICBjaGlsZHJlbixcbiAgICAgIHBhdGNoRmxhZyxcbiAgICAgIGR5bmFtaWNQcm9wcyxcbiAgICAgIHRydWVcbiAgICApXG4gICk7XG59XG5mdW5jdGlvbiBpc1ZOb2RlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA/IHZhbHVlLl9fdl9pc1ZOb2RlID09PSB0cnVlIDogZmFsc2U7XG59XG5mdW5jdGlvbiBpc1NhbWVWTm9kZVR5cGUobjEsIG4yKSB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIG4yLnNoYXBlRmxhZyAmIDYgJiYgbjEuY29tcG9uZW50KSB7XG4gICAgY29uc3QgZGlydHlJbnN0YW5jZXMgPSBobXJEaXJ0eUNvbXBvbmVudHMuZ2V0KG4yLnR5cGUpO1xuICAgIGlmIChkaXJ0eUluc3RhbmNlcyAmJiBkaXJ0eUluc3RhbmNlcy5oYXMobjEuY29tcG9uZW50KSkge1xuICAgICAgbjEuc2hhcGVGbGFnICY9IC0yNTc7XG4gICAgICBuMi5zaGFwZUZsYWcgJj0gLTUxMztcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG4xLnR5cGUgPT09IG4yLnR5cGUgJiYgbjEua2V5ID09PSBuMi5rZXk7XG59XG5sZXQgdm5vZGVBcmdzVHJhbnNmb3JtZXI7XG5mdW5jdGlvbiB0cmFuc2Zvcm1WTm9kZUFyZ3ModHJhbnNmb3JtZXIpIHtcbiAgdm5vZGVBcmdzVHJhbnNmb3JtZXIgPSB0cmFuc2Zvcm1lcjtcbn1cbmNvbnN0IGNyZWF0ZVZOb2RlV2l0aEFyZ3NUcmFuc2Zvcm0gPSAoLi4uYXJncykgPT4ge1xuICByZXR1cm4gX2NyZWF0ZVZOb2RlKFxuICAgIC4uLnZub2RlQXJnc1RyYW5zZm9ybWVyID8gdm5vZGVBcmdzVHJhbnNmb3JtZXIoYXJncywgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlKSA6IGFyZ3NcbiAgKTtcbn07XG5jb25zdCBub3JtYWxpemVLZXkgPSAoeyBrZXkgfSkgPT4ga2V5ICE9IG51bGwgPyBrZXkgOiBudWxsO1xuY29uc3Qgbm9ybWFsaXplUmVmID0gKHtcbiAgcmVmLFxuICByZWZfa2V5LFxuICByZWZfZm9yXG59KSA9PiB7XG4gIGlmICh0eXBlb2YgcmVmID09PSBcIm51bWJlclwiKSB7XG4gICAgcmVmID0gXCJcIiArIHJlZjtcbiAgfVxuICByZXR1cm4gcmVmICE9IG51bGwgPyBpc1N0cmluZyhyZWYpIHx8IGlzUmVmKHJlZikgfHwgaXNGdW5jdGlvbihyZWYpID8geyBpOiBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UsIHI6IHJlZiwgazogcmVmX2tleSwgZjogISFyZWZfZm9yIH0gOiByZWYgOiBudWxsO1xufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VWTm9kZSh0eXBlLCBwcm9wcyA9IG51bGwsIGNoaWxkcmVuID0gbnVsbCwgcGF0Y2hGbGFnID0gMCwgZHluYW1pY1Byb3BzID0gbnVsbCwgc2hhcGVGbGFnID0gdHlwZSA9PT0gRnJhZ21lbnQgPyAwIDogMSwgaXNCbG9ja05vZGUgPSBmYWxzZSwgbmVlZEZ1bGxDaGlsZHJlbk5vcm1hbGl6YXRpb24gPSBmYWxzZSkge1xuICBjb25zdCB2bm9kZSA9IHtcbiAgICBfX3ZfaXNWTm9kZTogdHJ1ZSxcbiAgICBfX3Zfc2tpcDogdHJ1ZSxcbiAgICB0eXBlLFxuICAgIHByb3BzLFxuICAgIGtleTogcHJvcHMgJiYgbm9ybWFsaXplS2V5KHByb3BzKSxcbiAgICByZWY6IHByb3BzICYmIG5vcm1hbGl6ZVJlZihwcm9wcyksXG4gICAgc2NvcGVJZDogY3VycmVudFNjb3BlSWQsXG4gICAgc2xvdFNjb3BlSWRzOiBudWxsLFxuICAgIGNoaWxkcmVuLFxuICAgIGNvbXBvbmVudDogbnVsbCxcbiAgICBzdXNwZW5zZTogbnVsbCxcbiAgICBzc0NvbnRlbnQ6IG51bGwsXG4gICAgc3NGYWxsYmFjazogbnVsbCxcbiAgICBkaXJzOiBudWxsLFxuICAgIHRyYW5zaXRpb246IG51bGwsXG4gICAgZWw6IG51bGwsXG4gICAgYW5jaG9yOiBudWxsLFxuICAgIHRhcmdldDogbnVsbCxcbiAgICB0YXJnZXRTdGFydDogbnVsbCxcbiAgICB0YXJnZXRBbmNob3I6IG51bGwsXG4gICAgc3RhdGljQ291bnQ6IDAsXG4gICAgc2hhcGVGbGFnLFxuICAgIHBhdGNoRmxhZyxcbiAgICBkeW5hbWljUHJvcHMsXG4gICAgZHluYW1pY0NoaWxkcmVuOiBudWxsLFxuICAgIGFwcENvbnRleHQ6IG51bGwsXG4gICAgY3R4OiBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2VcbiAgfTtcbiAgaWYgKG5lZWRGdWxsQ2hpbGRyZW5Ob3JtYWxpemF0aW9uKSB7XG4gICAgbm9ybWFsaXplQ2hpbGRyZW4odm5vZGUsIGNoaWxkcmVuKTtcbiAgICBpZiAoc2hhcGVGbGFnICYgMTI4KSB7XG4gICAgICB0eXBlLm5vcm1hbGl6ZSh2bm9kZSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGNoaWxkcmVuKSB7XG4gICAgdm5vZGUuc2hhcGVGbGFnIHw9IGlzU3RyaW5nKGNoaWxkcmVuKSA/IDggOiAxNjtcbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB2bm9kZS5rZXkgIT09IHZub2RlLmtleSkge1xuICAgIHdhcm4kMShgVk5vZGUgY3JlYXRlZCB3aXRoIGludmFsaWQga2V5IChOYU4pLiBWTm9kZSB0eXBlOmAsIHZub2RlLnR5cGUpO1xuICB9XG4gIGlmIChpc0Jsb2NrVHJlZUVuYWJsZWQgPiAwICYmIC8vIGF2b2lkIGEgYmxvY2sgbm9kZSBmcm9tIHRyYWNraW5nIGl0c2VsZlxuICAhaXNCbG9ja05vZGUgJiYgLy8gaGFzIGN1cnJlbnQgcGFyZW50IGJsb2NrXG4gIGN1cnJlbnRCbG9jayAmJiAvLyBwcmVzZW5jZSBvZiBhIHBhdGNoIGZsYWcgaW5kaWNhdGVzIHRoaXMgbm9kZSBuZWVkcyBwYXRjaGluZyBvbiB1cGRhdGVzLlxuICAvLyBjb21wb25lbnQgbm9kZXMgYWxzbyBzaG91bGQgYWx3YXlzIGJlIHBhdGNoZWQsIGJlY2F1c2UgZXZlbiBpZiB0aGVcbiAgLy8gY29tcG9uZW50IGRvZXNuJ3QgbmVlZCB0byB1cGRhdGUsIGl0IG5lZWRzIHRvIHBlcnNpc3QgdGhlIGluc3RhbmNlIG9uIHRvXG4gIC8vIHRoZSBuZXh0IHZub2RlIHNvIHRoYXQgaXQgY2FuIGJlIHByb3Blcmx5IHVubW91bnRlZCBsYXRlci5cbiAgKHZub2RlLnBhdGNoRmxhZyA+IDAgfHwgc2hhcGVGbGFnICYgNikgJiYgLy8gdGhlIEVWRU5UUyBmbGFnIGlzIG9ubHkgZm9yIGh5ZHJhdGlvbiBhbmQgaWYgaXQgaXMgdGhlIG9ubHkgZmxhZywgdGhlXG4gIC8vIHZub2RlIHNob3VsZCBub3QgYmUgY29uc2lkZXJlZCBkeW5hbWljIGR1ZSB0byBoYW5kbGVyIGNhY2hpbmcuXG4gIHZub2RlLnBhdGNoRmxhZyAhPT0gMzIpIHtcbiAgICBjdXJyZW50QmxvY2sucHVzaCh2bm9kZSk7XG4gIH1cbiAgcmV0dXJuIHZub2RlO1xufVxuY29uc3QgY3JlYXRlVk5vZGUgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gY3JlYXRlVk5vZGVXaXRoQXJnc1RyYW5zZm9ybSA6IF9jcmVhdGVWTm9kZTtcbmZ1bmN0aW9uIF9jcmVhdGVWTm9kZSh0eXBlLCBwcm9wcyA9IG51bGwsIGNoaWxkcmVuID0gbnVsbCwgcGF0Y2hGbGFnID0gMCwgZHluYW1pY1Byb3BzID0gbnVsbCwgaXNCbG9ja05vZGUgPSBmYWxzZSkge1xuICBpZiAoIXR5cGUgfHwgdHlwZSA9PT0gTlVMTF9EWU5BTUlDX0NPTVBPTkVOVCkge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICF0eXBlKSB7XG4gICAgICB3YXJuJDEoYEludmFsaWQgdm5vZGUgdHlwZSB3aGVuIGNyZWF0aW5nIHZub2RlOiAke3R5cGV9LmApO1xuICAgIH1cbiAgICB0eXBlID0gQ29tbWVudDtcbiAgfVxuICBpZiAoaXNWTm9kZSh0eXBlKSkge1xuICAgIGNvbnN0IGNsb25lZCA9IGNsb25lVk5vZGUoXG4gICAgICB0eXBlLFxuICAgICAgcHJvcHMsXG4gICAgICB0cnVlXG4gICAgICAvKiBtZXJnZVJlZjogdHJ1ZSAqL1xuICAgICk7XG4gICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICBub3JtYWxpemVDaGlsZHJlbihjbG9uZWQsIGNoaWxkcmVuKTtcbiAgICB9XG4gICAgaWYgKGlzQmxvY2tUcmVlRW5hYmxlZCA+IDAgJiYgIWlzQmxvY2tOb2RlICYmIGN1cnJlbnRCbG9jaykge1xuICAgICAgaWYgKGNsb25lZC5zaGFwZUZsYWcgJiA2KSB7XG4gICAgICAgIGN1cnJlbnRCbG9ja1tjdXJyZW50QmxvY2suaW5kZXhPZih0eXBlKV0gPSBjbG9uZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50QmxvY2sucHVzaChjbG9uZWQpO1xuICAgICAgfVxuICAgIH1cbiAgICBjbG9uZWQucGF0Y2hGbGFnID0gLTI7XG4gICAgcmV0dXJuIGNsb25lZDtcbiAgfVxuICBpZiAoaXNDbGFzc0NvbXBvbmVudCh0eXBlKSkge1xuICAgIHR5cGUgPSB0eXBlLl9fdmNjT3B0cztcbiAgfVxuICBpZiAocHJvcHMpIHtcbiAgICBwcm9wcyA9IGd1YXJkUmVhY3RpdmVQcm9wcyhwcm9wcyk7XG4gICAgbGV0IHsgY2xhc3M6IGtsYXNzLCBzdHlsZSB9ID0gcHJvcHM7XG4gICAgaWYgKGtsYXNzICYmICFpc1N0cmluZyhrbGFzcykpIHtcbiAgICAgIHByb3BzLmNsYXNzID0gbm9ybWFsaXplQ2xhc3Moa2xhc3MpO1xuICAgIH1cbiAgICBpZiAoaXNPYmplY3Qoc3R5bGUpKSB7XG4gICAgICBpZiAoaXNQcm94eShzdHlsZSkgJiYgIWlzQXJyYXkoc3R5bGUpKSB7XG4gICAgICAgIHN0eWxlID0gZXh0ZW5kKHt9LCBzdHlsZSk7XG4gICAgICB9XG4gICAgICBwcm9wcy5zdHlsZSA9IG5vcm1hbGl6ZVN0eWxlKHN0eWxlKTtcbiAgICB9XG4gIH1cbiAgY29uc3Qgc2hhcGVGbGFnID0gaXNTdHJpbmcodHlwZSkgPyAxIDogaXNTdXNwZW5zZSh0eXBlKSA/IDEyOCA6IGlzVGVsZXBvcnQodHlwZSkgPyA2NCA6IGlzT2JqZWN0KHR5cGUpID8gNCA6IGlzRnVuY3Rpb24odHlwZSkgPyAyIDogMDtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgc2hhcGVGbGFnICYgNCAmJiBpc1Byb3h5KHR5cGUpKSB7XG4gICAgdHlwZSA9IHRvUmF3KHR5cGUpO1xuICAgIHdhcm4kMShcbiAgICAgIGBWdWUgcmVjZWl2ZWQgYSBDb21wb25lbnQgdGhhdCB3YXMgbWFkZSBhIHJlYWN0aXZlIG9iamVjdC4gVGhpcyBjYW4gbGVhZCB0byB1bm5lY2Vzc2FyeSBwZXJmb3JtYW5jZSBvdmVyaGVhZCBhbmQgc2hvdWxkIGJlIGF2b2lkZWQgYnkgbWFya2luZyB0aGUgY29tcG9uZW50IHdpdGggXFxgbWFya1Jhd1xcYCBvciB1c2luZyBcXGBzaGFsbG93UmVmXFxgIGluc3RlYWQgb2YgXFxgcmVmXFxgLmAsXG4gICAgICBgXG5Db21wb25lbnQgdGhhdCB3YXMgbWFkZSByZWFjdGl2ZTogYCxcbiAgICAgIHR5cGVcbiAgICApO1xuICB9XG4gIHJldHVybiBjcmVhdGVCYXNlVk5vZGUoXG4gICAgdHlwZSxcbiAgICBwcm9wcyxcbiAgICBjaGlsZHJlbixcbiAgICBwYXRjaEZsYWcsXG4gICAgZHluYW1pY1Byb3BzLFxuICAgIHNoYXBlRmxhZyxcbiAgICBpc0Jsb2NrTm9kZSxcbiAgICB0cnVlXG4gICk7XG59XG5mdW5jdGlvbiBndWFyZFJlYWN0aXZlUHJvcHMocHJvcHMpIHtcbiAgaWYgKCFwcm9wcykgcmV0dXJuIG51bGw7XG4gIHJldHVybiBpc1Byb3h5KHByb3BzKSB8fCBpc0ludGVybmFsT2JqZWN0KHByb3BzKSA/IGV4dGVuZCh7fSwgcHJvcHMpIDogcHJvcHM7XG59XG5mdW5jdGlvbiBjbG9uZVZOb2RlKHZub2RlLCBleHRyYVByb3BzLCBtZXJnZVJlZiA9IGZhbHNlLCBjbG9uZVRyYW5zaXRpb24gPSBmYWxzZSkge1xuICBjb25zdCB7IHByb3BzLCByZWYsIHBhdGNoRmxhZywgY2hpbGRyZW4sIHRyYW5zaXRpb24gfSA9IHZub2RlO1xuICBjb25zdCBtZXJnZWRQcm9wcyA9IGV4dHJhUHJvcHMgPyBtZXJnZVByb3BzKHByb3BzIHx8IHt9LCBleHRyYVByb3BzKSA6IHByb3BzO1xuICBjb25zdCBjbG9uZWQgPSB7XG4gICAgX192X2lzVk5vZGU6IHRydWUsXG4gICAgX192X3NraXA6IHRydWUsXG4gICAgdHlwZTogdm5vZGUudHlwZSxcbiAgICBwcm9wczogbWVyZ2VkUHJvcHMsXG4gICAga2V5OiBtZXJnZWRQcm9wcyAmJiBub3JtYWxpemVLZXkobWVyZ2VkUHJvcHMpLFxuICAgIHJlZjogZXh0cmFQcm9wcyAmJiBleHRyYVByb3BzLnJlZiA/IChcbiAgICAgIC8vICMyMDc4IGluIHRoZSBjYXNlIG9mIDxjb21wb25lbnQgOmlzPVwidm5vZGVcIiByZWY9XCJleHRyYVwiLz5cbiAgICAgIC8vIGlmIHRoZSB2bm9kZSBpdHNlbGYgYWxyZWFkeSBoYXMgYSByZWYsIGNsb25lVk5vZGUgd2lsbCBuZWVkIHRvIG1lcmdlXG4gICAgICAvLyB0aGUgcmVmcyBzbyB0aGUgc2luZ2xlIHZub2RlIGNhbiBiZSBzZXQgb24gbXVsdGlwbGUgcmVmc1xuICAgICAgbWVyZ2VSZWYgJiYgcmVmID8gaXNBcnJheShyZWYpID8gcmVmLmNvbmNhdChub3JtYWxpemVSZWYoZXh0cmFQcm9wcykpIDogW3JlZiwgbm9ybWFsaXplUmVmKGV4dHJhUHJvcHMpXSA6IG5vcm1hbGl6ZVJlZihleHRyYVByb3BzKVxuICAgICkgOiByZWYsXG4gICAgc2NvcGVJZDogdm5vZGUuc2NvcGVJZCxcbiAgICBzbG90U2NvcGVJZHM6IHZub2RlLnNsb3RTY29wZUlkcyxcbiAgICBjaGlsZHJlbjogISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBwYXRjaEZsYWcgPT09IC0xICYmIGlzQXJyYXkoY2hpbGRyZW4pID8gY2hpbGRyZW4ubWFwKGRlZXBDbG9uZVZOb2RlKSA6IGNoaWxkcmVuLFxuICAgIHRhcmdldDogdm5vZGUudGFyZ2V0LFxuICAgIHRhcmdldFN0YXJ0OiB2bm9kZS50YXJnZXRTdGFydCxcbiAgICB0YXJnZXRBbmNob3I6IHZub2RlLnRhcmdldEFuY2hvcixcbiAgICBzdGF0aWNDb3VudDogdm5vZGUuc3RhdGljQ291bnQsXG4gICAgc2hhcGVGbGFnOiB2bm9kZS5zaGFwZUZsYWcsXG4gICAgLy8gaWYgdGhlIHZub2RlIGlzIGNsb25lZCB3aXRoIGV4dHJhIHByb3BzLCB3ZSBjYW4gbm8gbG9uZ2VyIGFzc3VtZSBpdHNcbiAgICAvLyBleGlzdGluZyBwYXRjaCBmbGFnIHRvIGJlIHJlbGlhYmxlIGFuZCBuZWVkIHRvIGFkZCB0aGUgRlVMTF9QUk9QUyBmbGFnLlxuICAgIC8vIG5vdGU6IHByZXNlcnZlIGZsYWcgZm9yIGZyYWdtZW50cyBzaW5jZSB0aGV5IHVzZSB0aGUgZmxhZyBmb3IgY2hpbGRyZW5cbiAgICAvLyBmYXN0IHBhdGhzIG9ubHkuXG4gICAgcGF0Y2hGbGFnOiBleHRyYVByb3BzICYmIHZub2RlLnR5cGUgIT09IEZyYWdtZW50ID8gcGF0Y2hGbGFnID09PSAtMSA/IDE2IDogcGF0Y2hGbGFnIHwgMTYgOiBwYXRjaEZsYWcsXG4gICAgZHluYW1pY1Byb3BzOiB2bm9kZS5keW5hbWljUHJvcHMsXG4gICAgZHluYW1pY0NoaWxkcmVuOiB2bm9kZS5keW5hbWljQ2hpbGRyZW4sXG4gICAgYXBwQ29udGV4dDogdm5vZGUuYXBwQ29udGV4dCxcbiAgICBkaXJzOiB2bm9kZS5kaXJzLFxuICAgIHRyYW5zaXRpb24sXG4gICAgLy8gVGhlc2Ugc2hvdWxkIHRlY2huaWNhbGx5IG9ubHkgYmUgbm9uLW51bGwgb24gbW91bnRlZCBWTm9kZXMuIEhvd2V2ZXIsXG4gICAgLy8gdGhleSAqc2hvdWxkKiBiZSBjb3BpZWQgZm9yIGtlcHQtYWxpdmUgdm5vZGVzLiBTbyB3ZSBqdXN0IGFsd2F5cyBjb3B5XG4gICAgLy8gdGhlbSBzaW5jZSB0aGVtIGJlaW5nIG5vbi1udWxsIGR1cmluZyBhIG1vdW50IGRvZXNuJ3QgYWZmZWN0IHRoZSBsb2dpYyBhc1xuICAgIC8vIHRoZXkgd2lsbCBzaW1wbHkgYmUgb3ZlcndyaXR0ZW4uXG4gICAgY29tcG9uZW50OiB2bm9kZS5jb21wb25lbnQsXG4gICAgc3VzcGVuc2U6IHZub2RlLnN1c3BlbnNlLFxuICAgIHNzQ29udGVudDogdm5vZGUuc3NDb250ZW50ICYmIGNsb25lVk5vZGUodm5vZGUuc3NDb250ZW50KSxcbiAgICBzc0ZhbGxiYWNrOiB2bm9kZS5zc0ZhbGxiYWNrICYmIGNsb25lVk5vZGUodm5vZGUuc3NGYWxsYmFjayksXG4gICAgZWw6IHZub2RlLmVsLFxuICAgIGFuY2hvcjogdm5vZGUuYW5jaG9yLFxuICAgIGN0eDogdm5vZGUuY3R4LFxuICAgIGNlOiB2bm9kZS5jZVxuICB9O1xuICBpZiAodHJhbnNpdGlvbiAmJiBjbG9uZVRyYW5zaXRpb24pIHtcbiAgICBzZXRUcmFuc2l0aW9uSG9va3MoXG4gICAgICBjbG9uZWQsXG4gICAgICB0cmFuc2l0aW9uLmNsb25lKGNsb25lZClcbiAgICApO1xuICB9XG4gIHJldHVybiBjbG9uZWQ7XG59XG5mdW5jdGlvbiBkZWVwQ2xvbmVWTm9kZSh2bm9kZSkge1xuICBjb25zdCBjbG9uZWQgPSBjbG9uZVZOb2RlKHZub2RlKTtcbiAgaWYgKGlzQXJyYXkodm5vZGUuY2hpbGRyZW4pKSB7XG4gICAgY2xvbmVkLmNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW4ubWFwKGRlZXBDbG9uZVZOb2RlKTtcbiAgfVxuICByZXR1cm4gY2xvbmVkO1xufVxuZnVuY3Rpb24gY3JlYXRlVGV4dFZOb2RlKHRleHQgPSBcIiBcIiwgZmxhZyA9IDApIHtcbiAgcmV0dXJuIGNyZWF0ZVZOb2RlKFRleHQsIG51bGwsIHRleHQsIGZsYWcpO1xufVxuZnVuY3Rpb24gY3JlYXRlU3RhdGljVk5vZGUoY29udGVudCwgbnVtYmVyT2ZOb2Rlcykge1xuICBjb25zdCB2bm9kZSA9IGNyZWF0ZVZOb2RlKFN0YXRpYywgbnVsbCwgY29udGVudCk7XG4gIHZub2RlLnN0YXRpY0NvdW50ID0gbnVtYmVyT2ZOb2RlcztcbiAgcmV0dXJuIHZub2RlO1xufVxuZnVuY3Rpb24gY3JlYXRlQ29tbWVudFZOb2RlKHRleHQgPSBcIlwiLCBhc0Jsb2NrID0gZmFsc2UpIHtcbiAgcmV0dXJuIGFzQmxvY2sgPyAob3BlbkJsb2NrKCksIGNyZWF0ZUJsb2NrKENvbW1lbnQsIG51bGwsIHRleHQpKSA6IGNyZWF0ZVZOb2RlKENvbW1lbnQsIG51bGwsIHRleHQpO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplVk5vZGUoY2hpbGQpIHtcbiAgaWYgKGNoaWxkID09IG51bGwgfHwgdHlwZW9mIGNoaWxkID09PSBcImJvb2xlYW5cIikge1xuICAgIHJldHVybiBjcmVhdGVWTm9kZShDb21tZW50KTtcbiAgfSBlbHNlIGlmIChpc0FycmF5KGNoaWxkKSkge1xuICAgIHJldHVybiBjcmVhdGVWTm9kZShcbiAgICAgIEZyYWdtZW50LFxuICAgICAgbnVsbCxcbiAgICAgIC8vICMzNjY2LCBhdm9pZCByZWZlcmVuY2UgcG9sbHV0aW9uIHdoZW4gcmV1c2luZyB2bm9kZVxuICAgICAgY2hpbGQuc2xpY2UoKVxuICAgICk7XG4gIH0gZWxzZSBpZiAoaXNWTm9kZShjaGlsZCkpIHtcbiAgICByZXR1cm4gY2xvbmVJZk1vdW50ZWQoY2hpbGQpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjcmVhdGVWTm9kZShUZXh0LCBudWxsLCBTdHJpbmcoY2hpbGQpKTtcbiAgfVxufVxuZnVuY3Rpb24gY2xvbmVJZk1vdW50ZWQoY2hpbGQpIHtcbiAgcmV0dXJuIGNoaWxkLmVsID09PSBudWxsICYmIGNoaWxkLnBhdGNoRmxhZyAhPT0gLTEgfHwgY2hpbGQubWVtbyA/IGNoaWxkIDogY2xvbmVWTm9kZShjaGlsZCk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVDaGlsZHJlbih2bm9kZSwgY2hpbGRyZW4pIHtcbiAgbGV0IHR5cGUgPSAwO1xuICBjb25zdCB7IHNoYXBlRmxhZyB9ID0gdm5vZGU7XG4gIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7XG4gICAgY2hpbGRyZW4gPSBudWxsO1xuICB9IGVsc2UgaWYgKGlzQXJyYXkoY2hpbGRyZW4pKSB7XG4gICAgdHlwZSA9IDE2O1xuICB9IGVsc2UgaWYgKHR5cGVvZiBjaGlsZHJlbiA9PT0gXCJvYmplY3RcIikge1xuICAgIGlmIChzaGFwZUZsYWcgJiAoMSB8IDY0KSkge1xuICAgICAgY29uc3Qgc2xvdCA9IGNoaWxkcmVuLmRlZmF1bHQ7XG4gICAgICBpZiAoc2xvdCkge1xuICAgICAgICBzbG90Ll9jICYmIChzbG90Ll9kID0gZmFsc2UpO1xuICAgICAgICBub3JtYWxpemVDaGlsZHJlbih2bm9kZSwgc2xvdCgpKTtcbiAgICAgICAgc2xvdC5fYyAmJiAoc2xvdC5fZCA9IHRydWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICB0eXBlID0gMzI7XG4gICAgICBjb25zdCBzbG90RmxhZyA9IGNoaWxkcmVuLl87XG4gICAgICBpZiAoIXNsb3RGbGFnICYmICFpc0ludGVybmFsT2JqZWN0KGNoaWxkcmVuKSkge1xuICAgICAgICBjaGlsZHJlbi5fY3R4ID0gY3VycmVudFJlbmRlcmluZ0luc3RhbmNlO1xuICAgICAgfSBlbHNlIGlmIChzbG90RmxhZyA9PT0gMyAmJiBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZS5zbG90cy5fID09PSAxKSB7XG4gICAgICAgICAgY2hpbGRyZW4uXyA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hpbGRyZW4uXyA9IDI7XG4gICAgICAgICAgdm5vZGUucGF0Y2hGbGFnIHw9IDEwMjQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNGdW5jdGlvbihjaGlsZHJlbikpIHtcbiAgICBjaGlsZHJlbiA9IHsgZGVmYXVsdDogY2hpbGRyZW4sIF9jdHg6IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSB9O1xuICAgIHR5cGUgPSAzMjtcbiAgfSBlbHNlIHtcbiAgICBjaGlsZHJlbiA9IFN0cmluZyhjaGlsZHJlbik7XG4gICAgaWYgKHNoYXBlRmxhZyAmIDY0KSB7XG4gICAgICB0eXBlID0gMTY7XG4gICAgICBjaGlsZHJlbiA9IFtjcmVhdGVUZXh0Vk5vZGUoY2hpbGRyZW4pXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHlwZSA9IDg7XG4gICAgfVxuICB9XG4gIHZub2RlLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gIHZub2RlLnNoYXBlRmxhZyB8PSB0eXBlO1xufVxuZnVuY3Rpb24gbWVyZ2VQcm9wcyguLi5hcmdzKSB7XG4gIGNvbnN0IHJldCA9IHt9O1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCB0b01lcmdlID0gYXJnc1tpXTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiB0b01lcmdlKSB7XG4gICAgICBpZiAoa2V5ID09PSBcImNsYXNzXCIpIHtcbiAgICAgICAgaWYgKHJldC5jbGFzcyAhPT0gdG9NZXJnZS5jbGFzcykge1xuICAgICAgICAgIHJldC5jbGFzcyA9IG5vcm1hbGl6ZUNsYXNzKFtyZXQuY2xhc3MsIHRvTWVyZ2UuY2xhc3NdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChrZXkgPT09IFwic3R5bGVcIikge1xuICAgICAgICByZXQuc3R5bGUgPSBub3JtYWxpemVTdHlsZShbcmV0LnN0eWxlLCB0b01lcmdlLnN0eWxlXSk7XG4gICAgICB9IGVsc2UgaWYgKGlzT24oa2V5KSkge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHJldFtrZXldO1xuICAgICAgICBjb25zdCBpbmNvbWluZyA9IHRvTWVyZ2Vba2V5XTtcbiAgICAgICAgaWYgKGluY29taW5nICYmIGV4aXN0aW5nICE9PSBpbmNvbWluZyAmJiAhKGlzQXJyYXkoZXhpc3RpbmcpICYmIGV4aXN0aW5nLmluY2x1ZGVzKGluY29taW5nKSkpIHtcbiAgICAgICAgICByZXRba2V5XSA9IGV4aXN0aW5nID8gW10uY29uY2F0KGV4aXN0aW5nLCBpbmNvbWluZykgOiBpbmNvbWluZztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChrZXkgIT09IFwiXCIpIHtcbiAgICAgICAgcmV0W2tleV0gPSB0b01lcmdlW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiByZXQ7XG59XG5mdW5jdGlvbiBpbnZva2VWTm9kZUhvb2soaG9vaywgaW5zdGFuY2UsIHZub2RlLCBwcmV2Vk5vZGUgPSBudWxsKSB7XG4gIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGhvb2ssIGluc3RhbmNlLCA3LCBbXG4gICAgdm5vZGUsXG4gICAgcHJldlZOb2RlXG4gIF0pO1xufVxuXG5jb25zdCBlbXB0eUFwcENvbnRleHQgPSBjcmVhdGVBcHBDb250ZXh0KCk7XG5sZXQgdWlkID0gMDtcbmZ1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudEluc3RhbmNlKHZub2RlLCBwYXJlbnQsIHN1c3BlbnNlKSB7XG4gIGNvbnN0IHR5cGUgPSB2bm9kZS50eXBlO1xuICBjb25zdCBhcHBDb250ZXh0ID0gKHBhcmVudCA/IHBhcmVudC5hcHBDb250ZXh0IDogdm5vZGUuYXBwQ29udGV4dCkgfHwgZW1wdHlBcHBDb250ZXh0O1xuICBjb25zdCBpbnN0YW5jZSA9IHtcbiAgICB1aWQ6IHVpZCsrLFxuICAgIHZub2RlLFxuICAgIHR5cGUsXG4gICAgcGFyZW50LFxuICAgIGFwcENvbnRleHQsXG4gICAgcm9vdDogbnVsbCxcbiAgICAvLyB0byBiZSBpbW1lZGlhdGVseSBzZXRcbiAgICBuZXh0OiBudWxsLFxuICAgIHN1YlRyZWU6IG51bGwsXG4gICAgLy8gd2lsbCBiZSBzZXQgc3luY2hyb25vdXNseSByaWdodCBhZnRlciBjcmVhdGlvblxuICAgIGVmZmVjdDogbnVsbCxcbiAgICB1cGRhdGU6IG51bGwsXG4gICAgLy8gd2lsbCBiZSBzZXQgc3luY2hyb25vdXNseSByaWdodCBhZnRlciBjcmVhdGlvblxuICAgIGpvYjogbnVsbCxcbiAgICBzY29wZTogbmV3IEVmZmVjdFNjb3BlKFxuICAgICAgdHJ1ZVxuICAgICAgLyogZGV0YWNoZWQgKi9cbiAgICApLFxuICAgIHJlbmRlcjogbnVsbCxcbiAgICBwcm94eTogbnVsbCxcbiAgICBleHBvc2VkOiBudWxsLFxuICAgIGV4cG9zZVByb3h5OiBudWxsLFxuICAgIHdpdGhQcm94eTogbnVsbCxcbiAgICBwcm92aWRlczogcGFyZW50ID8gcGFyZW50LnByb3ZpZGVzIDogT2JqZWN0LmNyZWF0ZShhcHBDb250ZXh0LnByb3ZpZGVzKSxcbiAgICBpZHM6IHBhcmVudCA/IHBhcmVudC5pZHMgOiBbXCJcIiwgMCwgMF0sXG4gICAgYWNjZXNzQ2FjaGU6IG51bGwsXG4gICAgcmVuZGVyQ2FjaGU6IFtdLFxuICAgIC8vIGxvY2FsIHJlc29sdmVkIGFzc2V0c1xuICAgIGNvbXBvbmVudHM6IG51bGwsXG4gICAgZGlyZWN0aXZlczogbnVsbCxcbiAgICAvLyByZXNvbHZlZCBwcm9wcyBhbmQgZW1pdHMgb3B0aW9uc1xuICAgIHByb3BzT3B0aW9uczogbm9ybWFsaXplUHJvcHNPcHRpb25zKHR5cGUsIGFwcENvbnRleHQpLFxuICAgIGVtaXRzT3B0aW9uczogbm9ybWFsaXplRW1pdHNPcHRpb25zKHR5cGUsIGFwcENvbnRleHQpLFxuICAgIC8vIGVtaXRcbiAgICBlbWl0OiBudWxsLFxuICAgIC8vIHRvIGJlIHNldCBpbW1lZGlhdGVseVxuICAgIGVtaXR0ZWQ6IG51bGwsXG4gICAgLy8gcHJvcHMgZGVmYXVsdCB2YWx1ZVxuICAgIHByb3BzRGVmYXVsdHM6IEVNUFRZX09CSixcbiAgICAvLyBpbmhlcml0QXR0cnNcbiAgICBpbmhlcml0QXR0cnM6IHR5cGUuaW5oZXJpdEF0dHJzLFxuICAgIC8vIHN0YXRlXG4gICAgY3R4OiBFTVBUWV9PQkosXG4gICAgZGF0YTogRU1QVFlfT0JKLFxuICAgIHByb3BzOiBFTVBUWV9PQkosXG4gICAgYXR0cnM6IEVNUFRZX09CSixcbiAgICBzbG90czogRU1QVFlfT0JKLFxuICAgIHJlZnM6IEVNUFRZX09CSixcbiAgICBzZXR1cFN0YXRlOiBFTVBUWV9PQkosXG4gICAgc2V0dXBDb250ZXh0OiBudWxsLFxuICAgIC8vIHN1c3BlbnNlIHJlbGF0ZWRcbiAgICBzdXNwZW5zZSxcbiAgICBzdXNwZW5zZUlkOiBzdXNwZW5zZSA/IHN1c3BlbnNlLnBlbmRpbmdJZCA6IDAsXG4gICAgYXN5bmNEZXA6IG51bGwsXG4gICAgYXN5bmNSZXNvbHZlZDogZmFsc2UsXG4gICAgLy8gbGlmZWN5Y2xlIGhvb2tzXG4gICAgLy8gbm90IHVzaW5nIGVudW1zIGhlcmUgYmVjYXVzZSBpdCByZXN1bHRzIGluIGNvbXB1dGVkIHByb3BlcnRpZXNcbiAgICBpc01vdW50ZWQ6IGZhbHNlLFxuICAgIGlzVW5tb3VudGVkOiBmYWxzZSxcbiAgICBpc0RlYWN0aXZhdGVkOiBmYWxzZSxcbiAgICBiYzogbnVsbCxcbiAgICBjOiBudWxsLFxuICAgIGJtOiBudWxsLFxuICAgIG06IG51bGwsXG4gICAgYnU6IG51bGwsXG4gICAgdTogbnVsbCxcbiAgICB1bTogbnVsbCxcbiAgICBidW06IG51bGwsXG4gICAgZGE6IG51bGwsXG4gICAgYTogbnVsbCxcbiAgICBydGc6IG51bGwsXG4gICAgcnRjOiBudWxsLFxuICAgIGVjOiBudWxsLFxuICAgIHNwOiBudWxsXG4gIH07XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgaW5zdGFuY2UuY3R4ID0gY3JlYXRlRGV2UmVuZGVyQ29udGV4dChpbnN0YW5jZSk7XG4gIH0gZWxzZSB7XG4gICAgaW5zdGFuY2UuY3R4ID0geyBfOiBpbnN0YW5jZSB9O1xuICB9XG4gIGluc3RhbmNlLnJvb3QgPSBwYXJlbnQgPyBwYXJlbnQucm9vdCA6IGluc3RhbmNlO1xuICBpbnN0YW5jZS5lbWl0ID0gZW1pdC5iaW5kKG51bGwsIGluc3RhbmNlKTtcbiAgaWYgKHZub2RlLmNlKSB7XG4gICAgdm5vZGUuY2UoaW5zdGFuY2UpO1xuICB9XG4gIHJldHVybiBpbnN0YW5jZTtcbn1cbmxldCBjdXJyZW50SW5zdGFuY2UgPSBudWxsO1xuY29uc3QgZ2V0Q3VycmVudEluc3RhbmNlID0gKCkgPT4gY3VycmVudEluc3RhbmNlIHx8IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZTtcbmxldCBpbnRlcm5hbFNldEN1cnJlbnRJbnN0YW5jZTtcbmxldCBzZXRJblNTUlNldHVwU3RhdGU7XG57XG4gIGNvbnN0IGcgPSBnZXRHbG9iYWxUaGlzKCk7XG4gIGNvbnN0IHJlZ2lzdGVyR2xvYmFsU2V0dGVyID0gKGtleSwgc2V0dGVyKSA9PiB7XG4gICAgbGV0IHNldHRlcnM7XG4gICAgaWYgKCEoc2V0dGVycyA9IGdba2V5XSkpIHNldHRlcnMgPSBnW2tleV0gPSBbXTtcbiAgICBzZXR0ZXJzLnB1c2goc2V0dGVyKTtcbiAgICByZXR1cm4gKHYpID0+IHtcbiAgICAgIGlmIChzZXR0ZXJzLmxlbmd0aCA+IDEpIHNldHRlcnMuZm9yRWFjaCgoc2V0KSA9PiBzZXQodikpO1xuICAgICAgZWxzZSBzZXR0ZXJzWzBdKHYpO1xuICAgIH07XG4gIH07XG4gIGludGVybmFsU2V0Q3VycmVudEluc3RhbmNlID0gcmVnaXN0ZXJHbG9iYWxTZXR0ZXIoXG4gICAgYF9fVlVFX0lOU1RBTkNFX1NFVFRFUlNfX2AsXG4gICAgKHYpID0+IGN1cnJlbnRJbnN0YW5jZSA9IHZcbiAgKTtcbiAgc2V0SW5TU1JTZXR1cFN0YXRlID0gcmVnaXN0ZXJHbG9iYWxTZXR0ZXIoXG4gICAgYF9fVlVFX1NTUl9TRVRURVJTX19gLFxuICAgICh2KSA9PiBpc0luU1NSQ29tcG9uZW50U2V0dXAgPSB2XG4gICk7XG59XG5jb25zdCBzZXRDdXJyZW50SW5zdGFuY2UgPSAoaW5zdGFuY2UpID0+IHtcbiAgY29uc3QgcHJldiA9IGN1cnJlbnRJbnN0YW5jZTtcbiAgaW50ZXJuYWxTZXRDdXJyZW50SW5zdGFuY2UoaW5zdGFuY2UpO1xuICBpbnN0YW5jZS5zY29wZS5vbigpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGluc3RhbmNlLnNjb3BlLm9mZigpO1xuICAgIGludGVybmFsU2V0Q3VycmVudEluc3RhbmNlKHByZXYpO1xuICB9O1xufTtcbmNvbnN0IHVuc2V0Q3VycmVudEluc3RhbmNlID0gKCkgPT4ge1xuICBjdXJyZW50SW5zdGFuY2UgJiYgY3VycmVudEluc3RhbmNlLnNjb3BlLm9mZigpO1xuICBpbnRlcm5hbFNldEN1cnJlbnRJbnN0YW5jZShudWxsKTtcbn07XG5jb25zdCBpc0J1aWx0SW5UYWcgPSAvKiBAX19QVVJFX18gKi8gbWFrZU1hcChcInNsb3QsY29tcG9uZW50XCIpO1xuZnVuY3Rpb24gdmFsaWRhdGVDb21wb25lbnROYW1lKG5hbWUsIHsgaXNOYXRpdmVUYWcgfSkge1xuICBpZiAoaXNCdWlsdEluVGFnKG5hbWUpIHx8IGlzTmF0aXZlVGFnKG5hbWUpKSB7XG4gICAgd2FybiQxKFxuICAgICAgXCJEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50IGlkOiBcIiArIG5hbWVcbiAgICApO1xuICB9XG59XG5mdW5jdGlvbiBpc1N0YXRlZnVsQ29tcG9uZW50KGluc3RhbmNlKSB7XG4gIHJldHVybiBpbnN0YW5jZS52bm9kZS5zaGFwZUZsYWcgJiA0O1xufVxubGV0IGlzSW5TU1JDb21wb25lbnRTZXR1cCA9IGZhbHNlO1xuZnVuY3Rpb24gc2V0dXBDb21wb25lbnQoaW5zdGFuY2UsIGlzU1NSID0gZmFsc2UsIG9wdGltaXplZCA9IGZhbHNlKSB7XG4gIGlzU1NSICYmIHNldEluU1NSU2V0dXBTdGF0ZShpc1NTUik7XG4gIGNvbnN0IHsgcHJvcHMsIGNoaWxkcmVuIH0gPSBpbnN0YW5jZS52bm9kZTtcbiAgY29uc3QgaXNTdGF0ZWZ1bCA9IGlzU3RhdGVmdWxDb21wb25lbnQoaW5zdGFuY2UpO1xuICBpbml0UHJvcHMoaW5zdGFuY2UsIHByb3BzLCBpc1N0YXRlZnVsLCBpc1NTUik7XG4gIGluaXRTbG90cyhpbnN0YW5jZSwgY2hpbGRyZW4sIG9wdGltaXplZCB8fCBpc1NTUik7XG4gIGNvbnN0IHNldHVwUmVzdWx0ID0gaXNTdGF0ZWZ1bCA/IHNldHVwU3RhdGVmdWxDb21wb25lbnQoaW5zdGFuY2UsIGlzU1NSKSA6IHZvaWQgMDtcbiAgaXNTU1IgJiYgc2V0SW5TU1JTZXR1cFN0YXRlKGZhbHNlKTtcbiAgcmV0dXJuIHNldHVwUmVzdWx0O1xufVxuZnVuY3Rpb24gc2V0dXBTdGF0ZWZ1bENvbXBvbmVudChpbnN0YW5jZSwgaXNTU1IpIHtcbiAgdmFyIF9hO1xuICBjb25zdCBDb21wb25lbnQgPSBpbnN0YW5jZS50eXBlO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGlmIChDb21wb25lbnQubmFtZSkge1xuICAgICAgdmFsaWRhdGVDb21wb25lbnROYW1lKENvbXBvbmVudC5uYW1lLCBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZyk7XG4gICAgfVxuICAgIGlmIChDb21wb25lbnQuY29tcG9uZW50cykge1xuICAgICAgY29uc3QgbmFtZXMgPSBPYmplY3Qua2V5cyhDb21wb25lbnQuY29tcG9uZW50cyk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbGlkYXRlQ29tcG9uZW50TmFtZShuYW1lc1tpXSwgaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQ29tcG9uZW50LmRpcmVjdGl2ZXMpIHtcbiAgICAgIGNvbnN0IG5hbWVzID0gT2JqZWN0LmtleXMoQ29tcG9uZW50LmRpcmVjdGl2ZXMpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YWxpZGF0ZURpcmVjdGl2ZU5hbWUobmFtZXNbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQ29tcG9uZW50LmNvbXBpbGVyT3B0aW9ucyAmJiBpc1J1bnRpbWVPbmx5KCkpIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYFwiY29tcGlsZXJPcHRpb25zXCIgaXMgb25seSBzdXBwb3J0ZWQgd2hlbiB1c2luZyBhIGJ1aWxkIG9mIFZ1ZSB0aGF0IGluY2x1ZGVzIHRoZSBydW50aW1lIGNvbXBpbGVyLiBTaW5jZSB5b3UgYXJlIHVzaW5nIGEgcnVudGltZS1vbmx5IGJ1aWxkLCB0aGUgb3B0aW9ucyBzaG91bGQgYmUgcGFzc2VkIHZpYSB5b3VyIGJ1aWxkIHRvb2wgY29uZmlnIGluc3RlYWQuYFxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgaW5zdGFuY2UuYWNjZXNzQ2FjaGUgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgaW5zdGFuY2UucHJveHkgPSBuZXcgUHJveHkoaW5zdGFuY2UuY3R4LCBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMpO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGV4cG9zZVByb3BzT25SZW5kZXJDb250ZXh0KGluc3RhbmNlKTtcbiAgfVxuICBjb25zdCB7IHNldHVwIH0gPSBDb21wb25lbnQ7XG4gIGlmIChzZXR1cCkge1xuICAgIHBhdXNlVHJhY2tpbmcoKTtcbiAgICBjb25zdCBzZXR1cENvbnRleHQgPSBpbnN0YW5jZS5zZXR1cENvbnRleHQgPSBzZXR1cC5sZW5ndGggPiAxID8gY3JlYXRlU2V0dXBDb250ZXh0KGluc3RhbmNlKSA6IG51bGw7XG4gICAgY29uc3QgcmVzZXQgPSBzZXRDdXJyZW50SW5zdGFuY2UoaW5zdGFuY2UpO1xuICAgIGNvbnN0IHNldHVwUmVzdWx0ID0gY2FsbFdpdGhFcnJvckhhbmRsaW5nKFxuICAgICAgc2V0dXAsXG4gICAgICBpbnN0YW5jZSxcbiAgICAgIDAsXG4gICAgICBbXG4gICAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBzaGFsbG93UmVhZG9ubHkoaW5zdGFuY2UucHJvcHMpIDogaW5zdGFuY2UucHJvcHMsXG4gICAgICAgIHNldHVwQ29udGV4dFxuICAgICAgXVxuICAgICk7XG4gICAgY29uc3QgaXNBc3luY1NldHVwID0gaXNQcm9taXNlKHNldHVwUmVzdWx0KTtcbiAgICByZXNldFRyYWNraW5nKCk7XG4gICAgcmVzZXQoKTtcbiAgICBpZiAoKGlzQXN5bmNTZXR1cCB8fCBpbnN0YW5jZS5zcCkgJiYgIWlzQXN5bmNXcmFwcGVyKGluc3RhbmNlKSkge1xuICAgICAgbWFya0FzeW5jQm91bmRhcnkoaW5zdGFuY2UpO1xuICAgIH1cbiAgICBpZiAoaXNBc3luY1NldHVwKSB7XG4gICAgICBzZXR1cFJlc3VsdC50aGVuKHVuc2V0Q3VycmVudEluc3RhbmNlLCB1bnNldEN1cnJlbnRJbnN0YW5jZSk7XG4gICAgICBpZiAoaXNTU1IpIHtcbiAgICAgICAgcmV0dXJuIHNldHVwUmVzdWx0LnRoZW4oKHJlc29sdmVkUmVzdWx0KSA9PiB7XG4gICAgICAgICAgaGFuZGxlU2V0dXBSZXN1bHQoaW5zdGFuY2UsIHJlc29sdmVkUmVzdWx0LCBpc1NTUik7XG4gICAgICAgIH0pLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgaGFuZGxlRXJyb3IoZSwgaW5zdGFuY2UsIDApO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluc3RhbmNlLmFzeW5jRGVwID0gc2V0dXBSZXN1bHQ7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFpbnN0YW5jZS5zdXNwZW5zZSkge1xuICAgICAgICAgIGNvbnN0IG5hbWUgPSAoX2EgPSBDb21wb25lbnQubmFtZSkgIT0gbnVsbCA/IF9hIDogXCJBbm9ueW1vdXNcIjtcbiAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICBgQ29tcG9uZW50IDwke25hbWV9Pjogc2V0dXAgZnVuY3Rpb24gcmV0dXJuZWQgYSBwcm9taXNlLCBidXQgbm8gPFN1c3BlbnNlPiBib3VuZGFyeSB3YXMgZm91bmQgaW4gdGhlIHBhcmVudCBjb21wb25lbnQgdHJlZS4gQSBjb21wb25lbnQgd2l0aCBhc3luYyBzZXR1cCgpIG11c3QgYmUgbmVzdGVkIGluIGEgPFN1c3BlbnNlPiBpbiBvcmRlciB0byBiZSByZW5kZXJlZC5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBoYW5kbGVTZXR1cFJlc3VsdChpbnN0YW5jZSwgc2V0dXBSZXN1bHQsIGlzU1NSKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZmluaXNoQ29tcG9uZW50U2V0dXAoaW5zdGFuY2UsIGlzU1NSKTtcbiAgfVxufVxuZnVuY3Rpb24gaGFuZGxlU2V0dXBSZXN1bHQoaW5zdGFuY2UsIHNldHVwUmVzdWx0LCBpc1NTUikge1xuICBpZiAoaXNGdW5jdGlvbihzZXR1cFJlc3VsdCkpIHtcbiAgICBpZiAoaW5zdGFuY2UudHlwZS5fX3NzcklubGluZVJlbmRlcikge1xuICAgICAgaW5zdGFuY2Uuc3NyUmVuZGVyID0gc2V0dXBSZXN1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGluc3RhbmNlLnJlbmRlciA9IHNldHVwUmVzdWx0O1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdChzZXR1cFJlc3VsdCkpIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBpc1ZOb2RlKHNldHVwUmVzdWx0KSkge1xuICAgICAgd2FybiQxKFxuICAgICAgICBgc2V0dXAoKSBzaG91bGQgbm90IHJldHVybiBWTm9kZXMgZGlyZWN0bHkgLSByZXR1cm4gYSByZW5kZXIgZnVuY3Rpb24gaW5zdGVhZC5gXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgIGluc3RhbmNlLmRldnRvb2xzUmF3U2V0dXBTdGF0ZSA9IHNldHVwUmVzdWx0O1xuICAgIH1cbiAgICBpbnN0YW5jZS5zZXR1cFN0YXRlID0gcHJveHlSZWZzKHNldHVwUmVzdWx0KTtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgZXhwb3NlU2V0dXBTdGF0ZU9uUmVuZGVyQ29udGV4dChpbnN0YW5jZSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgc2V0dXBSZXN1bHQgIT09IHZvaWQgMCkge1xuICAgIHdhcm4kMShcbiAgICAgIGBzZXR1cCgpIHNob3VsZCByZXR1cm4gYW4gb2JqZWN0LiBSZWNlaXZlZDogJHtzZXR1cFJlc3VsdCA9PT0gbnVsbCA/IFwibnVsbFwiIDogdHlwZW9mIHNldHVwUmVzdWx0fWBcbiAgICApO1xuICB9XG4gIGZpbmlzaENvbXBvbmVudFNldHVwKGluc3RhbmNlLCBpc1NTUik7XG59XG5sZXQgY29tcGlsZTtcbmxldCBpbnN0YWxsV2l0aFByb3h5O1xuZnVuY3Rpb24gcmVnaXN0ZXJSdW50aW1lQ29tcGlsZXIoX2NvbXBpbGUpIHtcbiAgY29tcGlsZSA9IF9jb21waWxlO1xuICBpbnN0YWxsV2l0aFByb3h5ID0gKGkpID0+IHtcbiAgICBpZiAoaS5yZW5kZXIuX3JjKSB7XG4gICAgICBpLndpdGhQcm94eSA9IG5ldyBQcm94eShpLmN0eCwgUnVudGltZUNvbXBpbGVkUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzKTtcbiAgICB9XG4gIH07XG59XG5jb25zdCBpc1J1bnRpbWVPbmx5ID0gKCkgPT4gIWNvbXBpbGU7XG5mdW5jdGlvbiBmaW5pc2hDb21wb25lbnRTZXR1cChpbnN0YW5jZSwgaXNTU1IsIHNraXBPcHRpb25zKSB7XG4gIGNvbnN0IENvbXBvbmVudCA9IGluc3RhbmNlLnR5cGU7XG4gIGlmICghaW5zdGFuY2UucmVuZGVyKSB7XG4gICAgaWYgKCFpc1NTUiAmJiBjb21waWxlICYmICFDb21wb25lbnQucmVuZGVyKSB7XG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IENvbXBvbmVudC50ZW1wbGF0ZSB8fCBfX1ZVRV9PUFRJT05TX0FQSV9fICYmIHJlc29sdmVNZXJnZWRPcHRpb25zKGluc3RhbmNlKS50ZW1wbGF0ZTtcbiAgICAgIGlmICh0ZW1wbGF0ZSkge1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYGNvbXBpbGVgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGlzQ3VzdG9tRWxlbWVudCwgY29tcGlsZXJPcHRpb25zIH0gPSBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZztcbiAgICAgICAgY29uc3QgeyBkZWxpbWl0ZXJzLCBjb21waWxlck9wdGlvbnM6IGNvbXBvbmVudENvbXBpbGVyT3B0aW9ucyB9ID0gQ29tcG9uZW50O1xuICAgICAgICBjb25zdCBmaW5hbENvbXBpbGVyT3B0aW9ucyA9IGV4dGVuZChcbiAgICAgICAgICBleHRlbmQoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlzQ3VzdG9tRWxlbWVudCxcbiAgICAgICAgICAgICAgZGVsaW1pdGVyc1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbXBpbGVyT3B0aW9uc1xuICAgICAgICAgICksXG4gICAgICAgICAgY29tcG9uZW50Q29tcGlsZXJPcHRpb25zXG4gICAgICAgICk7XG4gICAgICAgIENvbXBvbmVudC5yZW5kZXIgPSBjb21waWxlKHRlbXBsYXRlLCBmaW5hbENvbXBpbGVyT3B0aW9ucyk7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYGNvbXBpbGVgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpbnN0YW5jZS5yZW5kZXIgPSBDb21wb25lbnQucmVuZGVyIHx8IE5PT1A7XG4gICAgaWYgKGluc3RhbGxXaXRoUHJveHkpIHtcbiAgICAgIGluc3RhbGxXaXRoUHJveHkoaW5zdGFuY2UpO1xuICAgIH1cbiAgfVxuICBpZiAoX19WVUVfT1BUSU9OU19BUElfXyAmJiB0cnVlKSB7XG4gICAgY29uc3QgcmVzZXQgPSBzZXRDdXJyZW50SW5zdGFuY2UoaW5zdGFuY2UpO1xuICAgIHBhdXNlVHJhY2tpbmcoKTtcbiAgICB0cnkge1xuICAgICAgYXBwbHlPcHRpb25zKGluc3RhbmNlKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgcmVzZXRUcmFja2luZygpO1xuICAgICAgcmVzZXQoKTtcbiAgICB9XG4gIH1cbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIUNvbXBvbmVudC5yZW5kZXIgJiYgaW5zdGFuY2UucmVuZGVyID09PSBOT09QICYmICFpc1NTUikge1xuICAgIGlmICghY29tcGlsZSAmJiBDb21wb25lbnQudGVtcGxhdGUpIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYENvbXBvbmVudCBwcm92aWRlZCB0ZW1wbGF0ZSBvcHRpb24gYnV0IHJ1bnRpbWUgY29tcGlsYXRpb24gaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJ1aWxkIG9mIFZ1ZS5gICsgKGAgQ29uZmlndXJlIHlvdXIgYnVuZGxlciB0byBhbGlhcyBcInZ1ZVwiIHRvIFwidnVlL2Rpc3QvdnVlLmVzbS1idW5kbGVyLmpzXCIuYCApXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB3YXJuJDEoYENvbXBvbmVudCBpcyBtaXNzaW5nIHRlbXBsYXRlIG9yIHJlbmRlciBmdW5jdGlvbjogYCwgQ29tcG9uZW50KTtcbiAgICB9XG4gIH1cbn1cbmNvbnN0IGF0dHJzUHJveHlIYW5kbGVycyA9ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyB7XG4gIGdldCh0YXJnZXQsIGtleSkge1xuICAgIG1hcmtBdHRyc0FjY2Vzc2VkKCk7XG4gICAgdHJhY2sodGFyZ2V0LCBcImdldFwiLCBcIlwiKTtcbiAgICByZXR1cm4gdGFyZ2V0W2tleV07XG4gIH0sXG4gIHNldCgpIHtcbiAgICB3YXJuJDEoYHNldHVwQ29udGV4dC5hdHRycyBpcyByZWFkb25seS5gKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG4gIGRlbGV0ZVByb3BlcnR5KCkge1xuICAgIHdhcm4kMShgc2V0dXBDb250ZXh0LmF0dHJzIGlzIHJlYWRvbmx5LmApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufSA6IHtcbiAgZ2V0KHRhcmdldCwga2V5KSB7XG4gICAgdHJhY2sodGFyZ2V0LCBcImdldFwiLCBcIlwiKTtcbiAgICByZXR1cm4gdGFyZ2V0W2tleV07XG4gIH1cbn07XG5mdW5jdGlvbiBnZXRTbG90c1Byb3h5KGluc3RhbmNlKSB7XG4gIHJldHVybiBuZXcgUHJveHkoaW5zdGFuY2Uuc2xvdHMsIHtcbiAgICBnZXQodGFyZ2V0LCBrZXkpIHtcbiAgICAgIHRyYWNrKGluc3RhbmNlLCBcImdldFwiLCBcIiRzbG90c1wiKTtcbiAgICAgIHJldHVybiB0YXJnZXRba2V5XTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRlU2V0dXBDb250ZXh0KGluc3RhbmNlKSB7XG4gIGNvbnN0IGV4cG9zZSA9IChleHBvc2VkKSA9PiB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIGlmIChpbnN0YW5jZS5leHBvc2VkKSB7XG4gICAgICAgIHdhcm4kMShgZXhwb3NlKCkgc2hvdWxkIGJlIGNhbGxlZCBvbmx5IG9uY2UgcGVyIHNldHVwKCkuYCk7XG4gICAgICB9XG4gICAgICBpZiAoZXhwb3NlZCAhPSBudWxsKSB7XG4gICAgICAgIGxldCBleHBvc2VkVHlwZSA9IHR5cGVvZiBleHBvc2VkO1xuICAgICAgICBpZiAoZXhwb3NlZFR5cGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBpZiAoaXNBcnJheShleHBvc2VkKSkge1xuICAgICAgICAgICAgZXhwb3NlZFR5cGUgPSBcImFycmF5XCI7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc1JlZihleHBvc2VkKSkge1xuICAgICAgICAgICAgZXhwb3NlZFR5cGUgPSBcInJlZlwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwb3NlZFR5cGUgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICBgZXhwb3NlKCkgc2hvdWxkIGJlIHBhc3NlZCBhIHBsYWluIG9iamVjdCwgcmVjZWl2ZWQgJHtleHBvc2VkVHlwZX0uYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaW5zdGFuY2UuZXhwb3NlZCA9IGV4cG9zZWQgfHwge307XG4gIH07XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgbGV0IGF0dHJzUHJveHk7XG4gICAgbGV0IHNsb3RzUHJveHk7XG4gICAgcmV0dXJuIE9iamVjdC5mcmVlemUoe1xuICAgICAgZ2V0IGF0dHJzKCkge1xuICAgICAgICByZXR1cm4gYXR0cnNQcm94eSB8fCAoYXR0cnNQcm94eSA9IG5ldyBQcm94eShpbnN0YW5jZS5hdHRycywgYXR0cnNQcm94eUhhbmRsZXJzKSk7XG4gICAgICB9LFxuICAgICAgZ2V0IHNsb3RzKCkge1xuICAgICAgICByZXR1cm4gc2xvdHNQcm94eSB8fCAoc2xvdHNQcm94eSA9IGdldFNsb3RzUHJveHkoaW5zdGFuY2UpKTtcbiAgICAgIH0sXG4gICAgICBnZXQgZW1pdCgpIHtcbiAgICAgICAgcmV0dXJuIChldmVudCwgLi4uYXJncykgPT4gaW5zdGFuY2UuZW1pdChldmVudCwgLi4uYXJncyk7XG4gICAgICB9LFxuICAgICAgZXhwb3NlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGF0dHJzOiBuZXcgUHJveHkoaW5zdGFuY2UuYXR0cnMsIGF0dHJzUHJveHlIYW5kbGVycyksXG4gICAgICBzbG90czogaW5zdGFuY2Uuc2xvdHMsXG4gICAgICBlbWl0OiBpbnN0YW5jZS5lbWl0LFxuICAgICAgZXhwb3NlXG4gICAgfTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0Q29tcG9uZW50UHVibGljSW5zdGFuY2UoaW5zdGFuY2UpIHtcbiAgaWYgKGluc3RhbmNlLmV4cG9zZWQpIHtcbiAgICByZXR1cm4gaW5zdGFuY2UuZXhwb3NlUHJveHkgfHwgKGluc3RhbmNlLmV4cG9zZVByb3h5ID0gbmV3IFByb3h5KHByb3h5UmVmcyhtYXJrUmF3KGluc3RhbmNlLmV4cG9zZWQpKSwge1xuICAgICAgZ2V0KHRhcmdldCwga2V5KSB7XG4gICAgICAgIGlmIChrZXkgaW4gdGFyZ2V0KSB7XG4gICAgICAgICAgcmV0dXJuIHRhcmdldFtrZXldO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSBpbiBwdWJsaWNQcm9wZXJ0aWVzTWFwKSB7XG4gICAgICAgICAgcmV0dXJuIHB1YmxpY1Byb3BlcnRpZXNNYXBba2V5XShpbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBoYXModGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgcmV0dXJuIGtleSBpbiB0YXJnZXQgfHwga2V5IGluIHB1YmxpY1Byb3BlcnRpZXNNYXA7XG4gICAgICB9XG4gICAgfSkpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBpbnN0YW5jZS5wcm94eTtcbiAgfVxufVxuY29uc3QgY2xhc3NpZnlSRSA9IC8oPzpefFstX10pKFxcdykvZztcbmNvbnN0IGNsYXNzaWZ5ID0gKHN0cikgPT4gc3RyLnJlcGxhY2UoY2xhc3NpZnlSRSwgKGMpID0+IGMudG9VcHBlckNhc2UoKSkucmVwbGFjZSgvWy1fXS9nLCBcIlwiKTtcbmZ1bmN0aW9uIGdldENvbXBvbmVudE5hbWUoQ29tcG9uZW50LCBpbmNsdWRlSW5mZXJyZWQgPSB0cnVlKSB7XG4gIHJldHVybiBpc0Z1bmN0aW9uKENvbXBvbmVudCkgPyBDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgQ29tcG9uZW50Lm5hbWUgOiBDb21wb25lbnQubmFtZSB8fCBpbmNsdWRlSW5mZXJyZWQgJiYgQ29tcG9uZW50Ll9fbmFtZTtcbn1cbmZ1bmN0aW9uIGZvcm1hdENvbXBvbmVudE5hbWUoaW5zdGFuY2UsIENvbXBvbmVudCwgaXNSb290ID0gZmFsc2UpIHtcbiAgbGV0IG5hbWUgPSBnZXRDb21wb25lbnROYW1lKENvbXBvbmVudCk7XG4gIGlmICghbmFtZSAmJiBDb21wb25lbnQuX19maWxlKSB7XG4gICAgY29uc3QgbWF0Y2ggPSBDb21wb25lbnQuX19maWxlLm1hdGNoKC8oW14vXFxcXF0rKVxcLlxcdyskLyk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBuYW1lID0gbWF0Y2hbMV07XG4gICAgfVxuICB9XG4gIGlmICghbmFtZSAmJiBpbnN0YW5jZSAmJiBpbnN0YW5jZS5wYXJlbnQpIHtcbiAgICBjb25zdCBpbmZlckZyb21SZWdpc3RyeSA9IChyZWdpc3RyeSkgPT4ge1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmVnaXN0cnkpIHtcbiAgICAgICAgaWYgKHJlZ2lzdHJ5W2tleV0gPT09IENvbXBvbmVudCkge1xuICAgICAgICAgIHJldHVybiBrZXk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIG5hbWUgPSBpbmZlckZyb21SZWdpc3RyeShcbiAgICAgIGluc3RhbmNlLmNvbXBvbmVudHMgfHwgaW5zdGFuY2UucGFyZW50LnR5cGUuY29tcG9uZW50c1xuICAgICkgfHwgaW5mZXJGcm9tUmVnaXN0cnkoaW5zdGFuY2UuYXBwQ29udGV4dC5jb21wb25lbnRzKTtcbiAgfVxuICByZXR1cm4gbmFtZSA/IGNsYXNzaWZ5KG5hbWUpIDogaXNSb290ID8gYEFwcGAgOiBgQW5vbnltb3VzYDtcbn1cbmZ1bmN0aW9uIGlzQ2xhc3NDb21wb25lbnQodmFsdWUpIHtcbiAgcmV0dXJuIGlzRnVuY3Rpb24odmFsdWUpICYmIFwiX192Y2NPcHRzXCIgaW4gdmFsdWU7XG59XG5cbmNvbnN0IGNvbXB1dGVkID0gKGdldHRlck9yT3B0aW9ucywgZGVidWdPcHRpb25zKSA9PiB7XG4gIGNvbnN0IGMgPSBjb21wdXRlZCQxKGdldHRlck9yT3B0aW9ucywgZGVidWdPcHRpb25zLCBpc0luU1NSQ29tcG9uZW50U2V0dXApO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGNvbnN0IGkgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICBpZiAoaSAmJiBpLmFwcENvbnRleHQuY29uZmlnLndhcm5SZWN1cnNpdmVDb21wdXRlZCkge1xuICAgICAgYy5fd2FyblJlY3Vyc2l2ZSA9IHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBjO1xufTtcblxuZnVuY3Rpb24gaCh0eXBlLCBwcm9wc09yQ2hpbGRyZW4sIGNoaWxkcmVuKSB7XG4gIGNvbnN0IGwgPSBhcmd1bWVudHMubGVuZ3RoO1xuICBpZiAobCA9PT0gMikge1xuICAgIGlmIChpc09iamVjdChwcm9wc09yQ2hpbGRyZW4pICYmICFpc0FycmF5KHByb3BzT3JDaGlsZHJlbikpIHtcbiAgICAgIGlmIChpc1ZOb2RlKHByb3BzT3JDaGlsZHJlbikpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKHR5cGUsIG51bGwsIFtwcm9wc09yQ2hpbGRyZW5dKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjcmVhdGVWTm9kZSh0eXBlLCBwcm9wc09yQ2hpbGRyZW4pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY3JlYXRlVk5vZGUodHlwZSwgbnVsbCwgcHJvcHNPckNoaWxkcmVuKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGwgPiAzKSB7XG4gICAgICBjaGlsZHJlbiA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG4gICAgfSBlbHNlIGlmIChsID09PSAzICYmIGlzVk5vZGUoY2hpbGRyZW4pKSB7XG4gICAgICBjaGlsZHJlbiA9IFtjaGlsZHJlbl07XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVWTm9kZSh0eXBlLCBwcm9wc09yQ2hpbGRyZW4sIGNoaWxkcmVuKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbml0Q3VzdG9tRm9ybWF0dGVyKCkge1xuICBpZiAoISEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgdHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCB2dWVTdHlsZSA9IHsgc3R5bGU6IFwiY29sb3I6IzNiYTc3NlwiIH07XG4gIGNvbnN0IG51bWJlclN0eWxlID0geyBzdHlsZTogXCJjb2xvcjojMTY3N2ZmXCIgfTtcbiAgY29uc3Qgc3RyaW5nU3R5bGUgPSB7IHN0eWxlOiBcImNvbG9yOiNmNTIyMmRcIiB9O1xuICBjb25zdCBrZXl3b3JkU3R5bGUgPSB7IHN0eWxlOiBcImNvbG9yOiNlYjJmOTZcIiB9O1xuICBjb25zdCBmb3JtYXR0ZXIgPSB7XG4gICAgX192dWVfY3VzdG9tX2Zvcm1hdHRlcjogdHJ1ZSxcbiAgICBoZWFkZXIob2JqKSB7XG4gICAgICBpZiAoIWlzT2JqZWN0KG9iaikpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBpZiAob2JqLl9faXNWdWUpIHtcbiAgICAgICAgcmV0dXJuIFtcImRpdlwiLCB2dWVTdHlsZSwgYFZ1ZUluc3RhbmNlYF07XG4gICAgICB9IGVsc2UgaWYgKGlzUmVmKG9iaikpIHtcbiAgICAgICAgcGF1c2VUcmFja2luZygpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IG9iai52YWx1ZTtcbiAgICAgICAgcmVzZXRUcmFja2luZygpO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAge30sXG4gICAgICAgICAgW1wic3BhblwiLCB2dWVTdHlsZSwgZ2VuUmVmRmxhZyhvYmopXSxcbiAgICAgICAgICBcIjxcIixcbiAgICAgICAgICBmb3JtYXRWYWx1ZSh2YWx1ZSksXG4gICAgICAgICAgYD5gXG4gICAgICAgIF07XG4gICAgICB9IGVsc2UgaWYgKGlzUmVhY3RpdmUob2JqKSkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAge30sXG4gICAgICAgICAgW1wic3BhblwiLCB2dWVTdHlsZSwgaXNTaGFsbG93KG9iaikgPyBcIlNoYWxsb3dSZWFjdGl2ZVwiIDogXCJSZWFjdGl2ZVwiXSxcbiAgICAgICAgICBcIjxcIixcbiAgICAgICAgICBmb3JtYXRWYWx1ZShvYmopLFxuICAgICAgICAgIGA+JHtpc1JlYWRvbmx5KG9iaikgPyBgIChyZWFkb25seSlgIDogYGB9YFxuICAgICAgICBdO1xuICAgICAgfSBlbHNlIGlmIChpc1JlYWRvbmx5KG9iaikpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgIHt9LFxuICAgICAgICAgIFtcInNwYW5cIiwgdnVlU3R5bGUsIGlzU2hhbGxvdyhvYmopID8gXCJTaGFsbG93UmVhZG9ubHlcIiA6IFwiUmVhZG9ubHlcIl0sXG4gICAgICAgICAgXCI8XCIsXG4gICAgICAgICAgZm9ybWF0VmFsdWUob2JqKSxcbiAgICAgICAgICBcIj5cIlxuICAgICAgICBdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBoYXNCb2R5KG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19pc1Z1ZTtcbiAgICB9LFxuICAgIGJvZHkob2JqKSB7XG4gICAgICBpZiAob2JqICYmIG9iai5fX2lzVnVlKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICB7fSxcbiAgICAgICAgICAuLi5mb3JtYXRJbnN0YW5jZShvYmouJClcbiAgICAgICAgXTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIGZvcm1hdEluc3RhbmNlKGluc3RhbmNlKSB7XG4gICAgY29uc3QgYmxvY2tzID0gW107XG4gICAgaWYgKGluc3RhbmNlLnR5cGUucHJvcHMgJiYgaW5zdGFuY2UucHJvcHMpIHtcbiAgICAgIGJsb2Nrcy5wdXNoKGNyZWF0ZUluc3RhbmNlQmxvY2soXCJwcm9wc1wiLCB0b1JhdyhpbnN0YW5jZS5wcm9wcykpKTtcbiAgICB9XG4gICAgaWYgKGluc3RhbmNlLnNldHVwU3RhdGUgIT09IEVNUFRZX09CSikge1xuICAgICAgYmxvY2tzLnB1c2goY3JlYXRlSW5zdGFuY2VCbG9jayhcInNldHVwXCIsIGluc3RhbmNlLnNldHVwU3RhdGUpKTtcbiAgICB9XG4gICAgaWYgKGluc3RhbmNlLmRhdGEgIT09IEVNUFRZX09CSikge1xuICAgICAgYmxvY2tzLnB1c2goY3JlYXRlSW5zdGFuY2VCbG9jayhcImRhdGFcIiwgdG9SYXcoaW5zdGFuY2UuZGF0YSkpKTtcbiAgICB9XG4gICAgY29uc3QgY29tcHV0ZWQgPSBleHRyYWN0S2V5cyhpbnN0YW5jZSwgXCJjb21wdXRlZFwiKTtcbiAgICBpZiAoY29tcHV0ZWQpIHtcbiAgICAgIGJsb2Nrcy5wdXNoKGNyZWF0ZUluc3RhbmNlQmxvY2soXCJjb21wdXRlZFwiLCBjb21wdXRlZCkpO1xuICAgIH1cbiAgICBjb25zdCBpbmplY3RlZCA9IGV4dHJhY3RLZXlzKGluc3RhbmNlLCBcImluamVjdFwiKTtcbiAgICBpZiAoaW5qZWN0ZWQpIHtcbiAgICAgIGJsb2Nrcy5wdXNoKGNyZWF0ZUluc3RhbmNlQmxvY2soXCJpbmplY3RlZFwiLCBpbmplY3RlZCkpO1xuICAgIH1cbiAgICBibG9ja3MucHVzaChbXG4gICAgICBcImRpdlwiLFxuICAgICAge30sXG4gICAgICBbXG4gICAgICAgIFwic3BhblwiLFxuICAgICAgICB7XG4gICAgICAgICAgc3R5bGU6IGtleXdvcmRTdHlsZS5zdHlsZSArIFwiO29wYWNpdHk6MC42NlwiXG4gICAgICAgIH0sXG4gICAgICAgIFwiJCAoaW50ZXJuYWwpOiBcIlxuICAgICAgXSxcbiAgICAgIFtcIm9iamVjdFwiLCB7IG9iamVjdDogaW5zdGFuY2UgfV1cbiAgICBdKTtcbiAgICByZXR1cm4gYmxvY2tzO1xuICB9XG4gIGZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlQmxvY2sodHlwZSwgdGFyZ2V0KSB7XG4gICAgdGFyZ2V0ID0gZXh0ZW5kKHt9LCB0YXJnZXQpO1xuICAgIGlmICghT2JqZWN0LmtleXModGFyZ2V0KS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBbXCJzcGFuXCIsIHt9XTtcbiAgICB9XG4gICAgcmV0dXJuIFtcbiAgICAgIFwiZGl2XCIsXG4gICAgICB7IHN0eWxlOiBcImxpbmUtaGVpZ2h0OjEuMjVlbTttYXJnaW4tYm90dG9tOjAuNmVtXCIgfSxcbiAgICAgIFtcbiAgICAgICAgXCJkaXZcIixcbiAgICAgICAge1xuICAgICAgICAgIHN0eWxlOiBcImNvbG9yOiM0NzY1ODJcIlxuICAgICAgICB9LFxuICAgICAgICB0eXBlXG4gICAgICBdLFxuICAgICAgW1xuICAgICAgICBcImRpdlwiLFxuICAgICAgICB7XG4gICAgICAgICAgc3R5bGU6IFwicGFkZGluZy1sZWZ0OjEuMjVlbVwiXG4gICAgICAgIH0sXG4gICAgICAgIC4uLk9iamVjdC5rZXlzKHRhcmdldCkubWFwKChrZXkpID0+IHtcbiAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgIHt9LFxuICAgICAgICAgICAgW1wic3BhblwiLCBrZXl3b3JkU3R5bGUsIGtleSArIFwiOiBcIl0sXG4gICAgICAgICAgICBmb3JtYXRWYWx1ZSh0YXJnZXRba2V5XSwgZmFsc2UpXG4gICAgICAgICAgXTtcbiAgICAgICAgfSlcbiAgICAgIF1cbiAgICBdO1xuICB9XG4gIGZ1bmN0aW9uIGZvcm1hdFZhbHVlKHYsIGFzUmF3ID0gdHJ1ZSkge1xuICAgIGlmICh0eXBlb2YgdiA9PT0gXCJudW1iZXJcIikge1xuICAgICAgcmV0dXJuIFtcInNwYW5cIiwgbnVtYmVyU3R5bGUsIHZdO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHYgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBbXCJzcGFuXCIsIHN0cmluZ1N0eWxlLCBKU09OLnN0cmluZ2lmeSh2KV07XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdiA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgIHJldHVybiBbXCJzcGFuXCIsIGtleXdvcmRTdHlsZSwgdl07XG4gICAgfSBlbHNlIGlmIChpc09iamVjdCh2KSkge1xuICAgICAgcmV0dXJuIFtcIm9iamVjdFwiLCB7IG9iamVjdDogYXNSYXcgPyB0b1Jhdyh2KSA6IHYgfV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbXCJzcGFuXCIsIHN0cmluZ1N0eWxlLCBTdHJpbmcodildO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBleHRyYWN0S2V5cyhpbnN0YW5jZSwgdHlwZSkge1xuICAgIGNvbnN0IENvbXAgPSBpbnN0YW5jZS50eXBlO1xuICAgIGlmIChpc0Z1bmN0aW9uKENvbXApKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGV4dHJhY3RlZCA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIGluc3RhbmNlLmN0eCkge1xuICAgICAgaWYgKGlzS2V5T2ZUeXBlKENvbXAsIGtleSwgdHlwZSkpIHtcbiAgICAgICAgZXh0cmFjdGVkW2tleV0gPSBpbnN0YW5jZS5jdHhba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGV4dHJhY3RlZDtcbiAgfVxuICBmdW5jdGlvbiBpc0tleU9mVHlwZShDb21wLCBrZXksIHR5cGUpIHtcbiAgICBjb25zdCBvcHRzID0gQ29tcFt0eXBlXTtcbiAgICBpZiAoaXNBcnJheShvcHRzKSAmJiBvcHRzLmluY2x1ZGVzKGtleSkgfHwgaXNPYmplY3Qob3B0cykgJiYga2V5IGluIG9wdHMpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoQ29tcC5leHRlbmRzICYmIGlzS2V5T2ZUeXBlKENvbXAuZXh0ZW5kcywga2V5LCB0eXBlKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChDb21wLm1peGlucyAmJiBDb21wLm1peGlucy5zb21lKChtKSA9PiBpc0tleU9mVHlwZShtLCBrZXksIHR5cGUpKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGdlblJlZkZsYWcodikge1xuICAgIGlmIChpc1NoYWxsb3codikpIHtcbiAgICAgIHJldHVybiBgU2hhbGxvd1JlZmA7XG4gICAgfVxuICAgIGlmICh2LmVmZmVjdCkge1xuICAgICAgcmV0dXJuIGBDb21wdXRlZFJlZmA7XG4gICAgfVxuICAgIHJldHVybiBgUmVmYDtcbiAgfVxuICBpZiAod2luZG93LmRldnRvb2xzRm9ybWF0dGVycykge1xuICAgIHdpbmRvdy5kZXZ0b29sc0Zvcm1hdHRlcnMucHVzaChmb3JtYXR0ZXIpO1xuICB9IGVsc2Uge1xuICAgIHdpbmRvdy5kZXZ0b29sc0Zvcm1hdHRlcnMgPSBbZm9ybWF0dGVyXTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3aXRoTWVtbyhtZW1vLCByZW5kZXIsIGNhY2hlLCBpbmRleCkge1xuICBjb25zdCBjYWNoZWQgPSBjYWNoZVtpbmRleF07XG4gIGlmIChjYWNoZWQgJiYgaXNNZW1vU2FtZShjYWNoZWQsIG1lbW8pKSB7XG4gICAgcmV0dXJuIGNhY2hlZDtcbiAgfVxuICBjb25zdCByZXQgPSByZW5kZXIoKTtcbiAgcmV0Lm1lbW8gPSBtZW1vLnNsaWNlKCk7XG4gIHJldC5jYWNoZUluZGV4ID0gaW5kZXg7XG4gIHJldHVybiBjYWNoZVtpbmRleF0gPSByZXQ7XG59XG5mdW5jdGlvbiBpc01lbW9TYW1lKGNhY2hlZCwgbWVtbykge1xuICBjb25zdCBwcmV2ID0gY2FjaGVkLm1lbW87XG4gIGlmIChwcmV2Lmxlbmd0aCAhPSBtZW1vLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IHByZXYubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoaGFzQ2hhbmdlZChwcmV2W2ldLCBtZW1vW2ldKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICBpZiAoaXNCbG9ja1RyZWVFbmFibGVkID4gMCAmJiBjdXJyZW50QmxvY2spIHtcbiAgICBjdXJyZW50QmxvY2sucHVzaChjYWNoZWQpO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5jb25zdCB2ZXJzaW9uID0gXCIzLjUuMTRcIjtcbmNvbnN0IHdhcm4gPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gd2FybiQxIDogTk9PUDtcbmNvbnN0IEVycm9yVHlwZVN0cmluZ3MgPSBFcnJvclR5cGVTdHJpbmdzJDEgO1xuY29uc3QgZGV2dG9vbHMgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IHRydWUgPyBkZXZ0b29scyQxIDogdm9pZCAwO1xuY29uc3Qgc2V0RGV2dG9vbHNIb29rID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCB0cnVlID8gc2V0RGV2dG9vbHNIb29rJDEgOiBOT09QO1xuY29uc3QgX3NzclV0aWxzID0ge1xuICBjcmVhdGVDb21wb25lbnRJbnN0YW5jZSxcbiAgc2V0dXBDb21wb25lbnQsXG4gIHJlbmRlckNvbXBvbmVudFJvb3QsXG4gIHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSxcbiAgaXNWTm9kZTogaXNWTm9kZSxcbiAgbm9ybWFsaXplVk5vZGUsXG4gIGdldENvbXBvbmVudFB1YmxpY0luc3RhbmNlLFxuICBlbnN1cmVWYWxpZFZOb2RlLFxuICBwdXNoV2FybmluZ0NvbnRleHQsXG4gIHBvcFdhcm5pbmdDb250ZXh0XG59O1xuY29uc3Qgc3NyVXRpbHMgPSBfc3NyVXRpbHMgO1xuY29uc3QgcmVzb2x2ZUZpbHRlciA9IG51bGw7XG5jb25zdCBjb21wYXRVdGlscyA9IG51bGw7XG5jb25zdCBEZXByZWNhdGlvblR5cGVzID0gbnVsbDtcblxuZXhwb3J0IHsgQmFzZVRyYW5zaXRpb24sIEJhc2VUcmFuc2l0aW9uUHJvcHNWYWxpZGF0b3JzLCBDb21tZW50LCBEZXByZWNhdGlvblR5cGVzLCBFcnJvckNvZGVzLCBFcnJvclR5cGVTdHJpbmdzLCBGcmFnbWVudCwgS2VlcEFsaXZlLCBTdGF0aWMsIFN1c3BlbnNlLCBUZWxlcG9ydCwgVGV4dCwgYXNzZXJ0TnVtYmVyLCBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZywgY2FsbFdpdGhFcnJvckhhbmRsaW5nLCBjbG9uZVZOb2RlLCBjb21wYXRVdGlscywgY29tcHV0ZWQsIGNyZWF0ZUJsb2NrLCBjcmVhdGVDb21tZW50Vk5vZGUsIGNyZWF0ZUVsZW1lbnRCbG9jaywgY3JlYXRlQmFzZVZOb2RlIGFzIGNyZWF0ZUVsZW1lbnRWTm9kZSwgY3JlYXRlSHlkcmF0aW9uUmVuZGVyZXIsIGNyZWF0ZVByb3BzUmVzdFByb3h5LCBjcmVhdGVSZW5kZXJlciwgY3JlYXRlU2xvdHMsIGNyZWF0ZVN0YXRpY1ZOb2RlLCBjcmVhdGVUZXh0Vk5vZGUsIGNyZWF0ZVZOb2RlLCBkZWZpbmVBc3luY0NvbXBvbmVudCwgZGVmaW5lQ29tcG9uZW50LCBkZWZpbmVFbWl0cywgZGVmaW5lRXhwb3NlLCBkZWZpbmVNb2RlbCwgZGVmaW5lT3B0aW9ucywgZGVmaW5lUHJvcHMsIGRlZmluZVNsb3RzLCBkZXZ0b29scywgZ2V0Q3VycmVudEluc3RhbmNlLCBnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4sIGd1YXJkUmVhY3RpdmVQcm9wcywgaCwgaGFuZGxlRXJyb3IsIGhhc0luamVjdGlvbkNvbnRleHQsIGh5ZHJhdGVPbklkbGUsIGh5ZHJhdGVPbkludGVyYWN0aW9uLCBoeWRyYXRlT25NZWRpYVF1ZXJ5LCBoeWRyYXRlT25WaXNpYmxlLCBpbml0Q3VzdG9tRm9ybWF0dGVyLCBpbmplY3QsIGlzTWVtb1NhbWUsIGlzUnVudGltZU9ubHksIGlzVk5vZGUsIG1lcmdlRGVmYXVsdHMsIG1lcmdlTW9kZWxzLCBtZXJnZVByb3BzLCBuZXh0VGljaywgb25BY3RpdmF0ZWQsIG9uQmVmb3JlTW91bnQsIG9uQmVmb3JlVW5tb3VudCwgb25CZWZvcmVVcGRhdGUsIG9uRGVhY3RpdmF0ZWQsIG9uRXJyb3JDYXB0dXJlZCwgb25Nb3VudGVkLCBvblJlbmRlclRyYWNrZWQsIG9uUmVuZGVyVHJpZ2dlcmVkLCBvblNlcnZlclByZWZldGNoLCBvblVubW91bnRlZCwgb25VcGRhdGVkLCBvcGVuQmxvY2ssIHBvcFNjb3BlSWQsIHByb3ZpZGUsIHB1c2hTY29wZUlkLCBxdWV1ZVBvc3RGbHVzaENiLCByZWdpc3RlclJ1bnRpbWVDb21waWxlciwgcmVuZGVyTGlzdCwgcmVuZGVyU2xvdCwgcmVzb2x2ZUNvbXBvbmVudCwgcmVzb2x2ZURpcmVjdGl2ZSwgcmVzb2x2ZUR5bmFtaWNDb21wb25lbnQsIHJlc29sdmVGaWx0ZXIsIHJlc29sdmVUcmFuc2l0aW9uSG9va3MsIHNldEJsb2NrVHJhY2tpbmcsIHNldERldnRvb2xzSG9vaywgc2V0VHJhbnNpdGlvbkhvb2tzLCBzc3JDb250ZXh0S2V5LCBzc3JVdGlscywgdG9IYW5kbGVycywgdHJhbnNmb3JtVk5vZGVBcmdzLCB1c2VBdHRycywgdXNlSWQsIHVzZU1vZGVsLCB1c2VTU1JDb250ZXh0LCB1c2VTbG90cywgdXNlVGVtcGxhdGVSZWYsIHVzZVRyYW5zaXRpb25TdGF0ZSwgdmVyc2lvbiwgd2Fybiwgd2F0Y2gsIHdhdGNoRWZmZWN0LCB3YXRjaFBvc3RFZmZlY3QsIHdhdGNoU3luY0VmZmVjdCwgd2l0aEFzeW5jQ29udGV4dCwgd2l0aEN0eCwgd2l0aERlZmF1bHRzLCB3aXRoRGlyZWN0aXZlcywgd2l0aE1lbW8sIHdpdGhTY29wZUlkIH07XG4iLCIvKipcbiogQHZ1ZS9ydW50aW1lLWRvbSB2My41LjE0XG4qIChjKSAyMDE4LXByZXNlbnQgWXV4aSAoRXZhbikgWW91IGFuZCBWdWUgY29udHJpYnV0b3JzXG4qIEBsaWNlbnNlIE1JVFxuKiovXG5pbXBvcnQgeyB3YXJuLCBCYXNlVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycywgaCwgQmFzZVRyYW5zaXRpb24sIGFzc2VydE51bWJlciwgZ2V0Q3VycmVudEluc3RhbmNlLCBvbkJlZm9yZVVwZGF0ZSwgcXVldWVQb3N0Rmx1c2hDYiwgb25Nb3VudGVkLCB3YXRjaCwgb25Vbm1vdW50ZWQsIEZyYWdtZW50LCBTdGF0aWMsIGNhbWVsaXplLCBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZywgZGVmaW5lQ29tcG9uZW50LCBuZXh0VGljaywgdW5yZWYsIGNyZWF0ZVZOb2RlLCB1c2VUcmFuc2l0aW9uU3RhdGUsIG9uVXBkYXRlZCwgdG9SYXcsIGdldFRyYW5zaXRpb25SYXdDaGlsZHJlbiwgc2V0VHJhbnNpdGlvbkhvb2tzLCByZXNvbHZlVHJhbnNpdGlvbkhvb2tzLCBUZXh0LCBjcmVhdGVSZW5kZXJlciwgY3JlYXRlSHlkcmF0aW9uUmVuZGVyZXIsIGlzUnVudGltZU9ubHkgfSBmcm9tICdAdnVlL3J1bnRpbWUtY29yZSc7XG5leHBvcnQgKiBmcm9tICdAdnVlL3J1bnRpbWUtY29yZSc7XG5pbXBvcnQgeyBleHRlbmQsIGlzT2JqZWN0LCB0b051bWJlciwgaXNBcnJheSwgTk9PUCwgaXNTdHJpbmcsIGh5cGhlbmF0ZSwgY2FwaXRhbGl6ZSwgaXNTcGVjaWFsQm9vbGVhbkF0dHIsIGluY2x1ZGVCb29sZWFuQXR0ciwgaXNTeW1ib2wsIGlzRnVuY3Rpb24sIGlzT24sIGlzTW9kZWxMaXN0ZW5lciwgY2FtZWxpemUgYXMgY2FtZWxpemUkMSwgaXNQbGFpbk9iamVjdCwgaGFzT3duLCBFTVBUWV9PQkosIGxvb3NlVG9OdW1iZXIsIGxvb3NlSW5kZXhPZiwgaXNTZXQsIGxvb3NlRXF1YWwsIGludm9rZUFycmF5Rm5zLCBpc0hUTUxUYWcsIGlzU1ZHVGFnLCBpc01hdGhNTFRhZyB9IGZyb20gJ0B2dWUvc2hhcmVkJztcblxubGV0IHBvbGljeSA9IHZvaWQgMDtcbmNvbnN0IHR0ID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cudHJ1c3RlZFR5cGVzO1xuaWYgKHR0KSB7XG4gIHRyeSB7XG4gICAgcG9saWN5ID0gLyogQF9fUFVSRV9fICovIHR0LmNyZWF0ZVBvbGljeShcInZ1ZVwiLCB7XG4gICAgICBjcmVhdGVIVE1MOiAodmFsKSA9PiB2YWxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybihgRXJyb3IgY3JlYXRpbmcgdHJ1c3RlZCB0eXBlcyBwb2xpY3k6ICR7ZX1gKTtcbiAgfVxufVxuY29uc3QgdW5zYWZlVG9UcnVzdGVkSFRNTCA9IHBvbGljeSA/ICh2YWwpID0+IHBvbGljeS5jcmVhdGVIVE1MKHZhbCkgOiAodmFsKSA9PiB2YWw7XG5jb25zdCBzdmdOUyA9IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIjtcbmNvbnN0IG1hdGhtbE5TID0gXCJodHRwOi8vd3d3LnczLm9yZy8xOTk4L01hdGgvTWF0aE1MXCI7XG5jb25zdCBkb2MgPSB0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIgPyBkb2N1bWVudCA6IG51bGw7XG5jb25zdCB0ZW1wbGF0ZUNvbnRhaW5lciA9IGRvYyAmJiAvKiBAX19QVVJFX18gKi8gZG9jLmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcbmNvbnN0IG5vZGVPcHMgPSB7XG4gIGluc2VydDogKGNoaWxkLCBwYXJlbnQsIGFuY2hvcikgPT4ge1xuICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIGFuY2hvciB8fCBudWxsKTtcbiAgfSxcbiAgcmVtb3ZlOiAoY2hpbGQpID0+IHtcbiAgICBjb25zdCBwYXJlbnQgPSBjaGlsZC5wYXJlbnROb2RlO1xuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChjaGlsZCk7XG4gICAgfVxuICB9LFxuICBjcmVhdGVFbGVtZW50OiAodGFnLCBuYW1lc3BhY2UsIGlzLCBwcm9wcykgPT4ge1xuICAgIGNvbnN0IGVsID0gbmFtZXNwYWNlID09PSBcInN2Z1wiID8gZG9jLmNyZWF0ZUVsZW1lbnROUyhzdmdOUywgdGFnKSA6IG5hbWVzcGFjZSA9PT0gXCJtYXRobWxcIiA/IGRvYy5jcmVhdGVFbGVtZW50TlMobWF0aG1sTlMsIHRhZykgOiBpcyA/IGRvYy5jcmVhdGVFbGVtZW50KHRhZywgeyBpcyB9KSA6IGRvYy5jcmVhdGVFbGVtZW50KHRhZyk7XG4gICAgaWYgKHRhZyA9PT0gXCJzZWxlY3RcIiAmJiBwcm9wcyAmJiBwcm9wcy5tdWx0aXBsZSAhPSBudWxsKSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoXCJtdWx0aXBsZVwiLCBwcm9wcy5tdWx0aXBsZSk7XG4gICAgfVxuICAgIHJldHVybiBlbDtcbiAgfSxcbiAgY3JlYXRlVGV4dDogKHRleHQpID0+IGRvYy5jcmVhdGVUZXh0Tm9kZSh0ZXh0KSxcbiAgY3JlYXRlQ29tbWVudDogKHRleHQpID0+IGRvYy5jcmVhdGVDb21tZW50KHRleHQpLFxuICBzZXRUZXh0OiAobm9kZSwgdGV4dCkgPT4ge1xuICAgIG5vZGUubm9kZVZhbHVlID0gdGV4dDtcbiAgfSxcbiAgc2V0RWxlbWVudFRleHQ6IChlbCwgdGV4dCkgPT4ge1xuICAgIGVsLnRleHRDb250ZW50ID0gdGV4dDtcbiAgfSxcbiAgcGFyZW50Tm9kZTogKG5vZGUpID0+IG5vZGUucGFyZW50Tm9kZSxcbiAgbmV4dFNpYmxpbmc6IChub2RlKSA9PiBub2RlLm5leHRTaWJsaW5nLFxuICBxdWVyeVNlbGVjdG9yOiAoc2VsZWN0b3IpID0+IGRvYy5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSxcbiAgc2V0U2NvcGVJZChlbCwgaWQpIHtcbiAgICBlbC5zZXRBdHRyaWJ1dGUoaWQsIFwiXCIpO1xuICB9LFxuICAvLyBfX1VOU0FGRV9fXG4gIC8vIFJlYXNvbjogaW5uZXJIVE1MLlxuICAvLyBTdGF0aWMgY29udGVudCBoZXJlIGNhbiBvbmx5IGNvbWUgZnJvbSBjb21waWxlZCB0ZW1wbGF0ZXMuXG4gIC8vIEFzIGxvbmcgYXMgdGhlIHVzZXIgb25seSB1c2VzIHRydXN0ZWQgdGVtcGxhdGVzLCB0aGlzIGlzIHNhZmUuXG4gIGluc2VydFN0YXRpY0NvbnRlbnQoY29udGVudCwgcGFyZW50LCBhbmNob3IsIG5hbWVzcGFjZSwgc3RhcnQsIGVuZCkge1xuICAgIGNvbnN0IGJlZm9yZSA9IGFuY2hvciA/IGFuY2hvci5wcmV2aW91c1NpYmxpbmcgOiBwYXJlbnQubGFzdENoaWxkO1xuICAgIGlmIChzdGFydCAmJiAoc3RhcnQgPT09IGVuZCB8fCBzdGFydC5uZXh0U2libGluZykpIHtcbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoc3RhcnQuY2xvbmVOb2RlKHRydWUpLCBhbmNob3IpO1xuICAgICAgICBpZiAoc3RhcnQgPT09IGVuZCB8fCAhKHN0YXJ0ID0gc3RhcnQubmV4dFNpYmxpbmcpKSBicmVhaztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGVtcGxhdGVDb250YWluZXIuaW5uZXJIVE1MID0gdW5zYWZlVG9UcnVzdGVkSFRNTChcbiAgICAgICAgbmFtZXNwYWNlID09PSBcInN2Z1wiID8gYDxzdmc+JHtjb250ZW50fTwvc3ZnPmAgOiBuYW1lc3BhY2UgPT09IFwibWF0aG1sXCIgPyBgPG1hdGg+JHtjb250ZW50fTwvbWF0aD5gIDogY29udGVudFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGVtcGxhdGVDb250YWluZXIuY29udGVudDtcbiAgICAgIGlmIChuYW1lc3BhY2UgPT09IFwic3ZnXCIgfHwgbmFtZXNwYWNlID09PSBcIm1hdGhtbFwiKSB7XG4gICAgICAgIGNvbnN0IHdyYXBwZXIgPSB0ZW1wbGF0ZS5maXJzdENoaWxkO1xuICAgICAgICB3aGlsZSAod3JhcHBlci5maXJzdENoaWxkKSB7XG4gICAgICAgICAgdGVtcGxhdGUuYXBwZW5kQ2hpbGQod3JhcHBlci5maXJzdENoaWxkKTtcbiAgICAgICAgfVxuICAgICAgICB0ZW1wbGF0ZS5yZW1vdmVDaGlsZCh3cmFwcGVyKTtcbiAgICAgIH1cbiAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUodGVtcGxhdGUsIGFuY2hvcik7XG4gICAgfVxuICAgIHJldHVybiBbXG4gICAgICAvLyBmaXJzdFxuICAgICAgYmVmb3JlID8gYmVmb3JlLm5leHRTaWJsaW5nIDogcGFyZW50LmZpcnN0Q2hpbGQsXG4gICAgICAvLyBsYXN0XG4gICAgICBhbmNob3IgPyBhbmNob3IucHJldmlvdXNTaWJsaW5nIDogcGFyZW50Lmxhc3RDaGlsZFxuICAgIF07XG4gIH1cbn07XG5cbmNvbnN0IFRSQU5TSVRJT04gPSBcInRyYW5zaXRpb25cIjtcbmNvbnN0IEFOSU1BVElPTiA9IFwiYW5pbWF0aW9uXCI7XG5jb25zdCB2dGNLZXkgPSBTeW1ib2woXCJfdnRjXCIpO1xuY29uc3QgRE9NVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycyA9IHtcbiAgbmFtZTogU3RyaW5nLFxuICB0eXBlOiBTdHJpbmcsXG4gIGNzczoge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogdHJ1ZVxuICB9LFxuICBkdXJhdGlvbjogW1N0cmluZywgTnVtYmVyLCBPYmplY3RdLFxuICBlbnRlckZyb21DbGFzczogU3RyaW5nLFxuICBlbnRlckFjdGl2ZUNsYXNzOiBTdHJpbmcsXG4gIGVudGVyVG9DbGFzczogU3RyaW5nLFxuICBhcHBlYXJGcm9tQ2xhc3M6IFN0cmluZyxcbiAgYXBwZWFyQWN0aXZlQ2xhc3M6IFN0cmluZyxcbiAgYXBwZWFyVG9DbGFzczogU3RyaW5nLFxuICBsZWF2ZUZyb21DbGFzczogU3RyaW5nLFxuICBsZWF2ZUFjdGl2ZUNsYXNzOiBTdHJpbmcsXG4gIGxlYXZlVG9DbGFzczogU3RyaW5nXG59O1xuY29uc3QgVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycyA9IC8qIEBfX1BVUkVfXyAqLyBleHRlbmQoXG4gIHt9LFxuICBCYXNlVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycyxcbiAgRE9NVHJhbnNpdGlvblByb3BzVmFsaWRhdG9yc1xuKTtcbmNvbnN0IGRlY29yYXRlJDEgPSAodCkgPT4ge1xuICB0LmRpc3BsYXlOYW1lID0gXCJUcmFuc2l0aW9uXCI7XG4gIHQucHJvcHMgPSBUcmFuc2l0aW9uUHJvcHNWYWxpZGF0b3JzO1xuICByZXR1cm4gdDtcbn07XG5jb25zdCBUcmFuc2l0aW9uID0gLyogQF9fUFVSRV9fICovIGRlY29yYXRlJDEoXG4gIChwcm9wcywgeyBzbG90cyB9KSA9PiBoKEJhc2VUcmFuc2l0aW9uLCByZXNvbHZlVHJhbnNpdGlvblByb3BzKHByb3BzKSwgc2xvdHMpXG4pO1xuY29uc3QgY2FsbEhvb2sgPSAoaG9vaywgYXJncyA9IFtdKSA9PiB7XG4gIGlmIChpc0FycmF5KGhvb2spKSB7XG4gICAgaG9vay5mb3JFYWNoKChoMikgPT4gaDIoLi4uYXJncykpO1xuICB9IGVsc2UgaWYgKGhvb2spIHtcbiAgICBob29rKC4uLmFyZ3MpO1xuICB9XG59O1xuY29uc3QgaGFzRXhwbGljaXRDYWxsYmFjayA9IChob29rKSA9PiB7XG4gIHJldHVybiBob29rID8gaXNBcnJheShob29rKSA/IGhvb2suc29tZSgoaDIpID0+IGgyLmxlbmd0aCA+IDEpIDogaG9vay5sZW5ndGggPiAxIDogZmFsc2U7XG59O1xuZnVuY3Rpb24gcmVzb2x2ZVRyYW5zaXRpb25Qcm9wcyhyYXdQcm9wcykge1xuICBjb25zdCBiYXNlUHJvcHMgPSB7fTtcbiAgZm9yIChjb25zdCBrZXkgaW4gcmF3UHJvcHMpIHtcbiAgICBpZiAoIShrZXkgaW4gRE9NVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycykpIHtcbiAgICAgIGJhc2VQcm9wc1trZXldID0gcmF3UHJvcHNba2V5XTtcbiAgICB9XG4gIH1cbiAgaWYgKHJhd1Byb3BzLmNzcyA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gYmFzZVByb3BzO1xuICB9XG4gIGNvbnN0IHtcbiAgICBuYW1lID0gXCJ2XCIsXG4gICAgdHlwZSxcbiAgICBkdXJhdGlvbixcbiAgICBlbnRlckZyb21DbGFzcyA9IGAke25hbWV9LWVudGVyLWZyb21gLFxuICAgIGVudGVyQWN0aXZlQ2xhc3MgPSBgJHtuYW1lfS1lbnRlci1hY3RpdmVgLFxuICAgIGVudGVyVG9DbGFzcyA9IGAke25hbWV9LWVudGVyLXRvYCxcbiAgICBhcHBlYXJGcm9tQ2xhc3MgPSBlbnRlckZyb21DbGFzcyxcbiAgICBhcHBlYXJBY3RpdmVDbGFzcyA9IGVudGVyQWN0aXZlQ2xhc3MsXG4gICAgYXBwZWFyVG9DbGFzcyA9IGVudGVyVG9DbGFzcyxcbiAgICBsZWF2ZUZyb21DbGFzcyA9IGAke25hbWV9LWxlYXZlLWZyb21gLFxuICAgIGxlYXZlQWN0aXZlQ2xhc3MgPSBgJHtuYW1lfS1sZWF2ZS1hY3RpdmVgLFxuICAgIGxlYXZlVG9DbGFzcyA9IGAke25hbWV9LWxlYXZlLXRvYFxuICB9ID0gcmF3UHJvcHM7XG4gIGNvbnN0IGR1cmF0aW9ucyA9IG5vcm1hbGl6ZUR1cmF0aW9uKGR1cmF0aW9uKTtcbiAgY29uc3QgZW50ZXJEdXJhdGlvbiA9IGR1cmF0aW9ucyAmJiBkdXJhdGlvbnNbMF07XG4gIGNvbnN0IGxlYXZlRHVyYXRpb24gPSBkdXJhdGlvbnMgJiYgZHVyYXRpb25zWzFdO1xuICBjb25zdCB7XG4gICAgb25CZWZvcmVFbnRlcixcbiAgICBvbkVudGVyLFxuICAgIG9uRW50ZXJDYW5jZWxsZWQsXG4gICAgb25MZWF2ZSxcbiAgICBvbkxlYXZlQ2FuY2VsbGVkLFxuICAgIG9uQmVmb3JlQXBwZWFyID0gb25CZWZvcmVFbnRlcixcbiAgICBvbkFwcGVhciA9IG9uRW50ZXIsXG4gICAgb25BcHBlYXJDYW5jZWxsZWQgPSBvbkVudGVyQ2FuY2VsbGVkXG4gIH0gPSBiYXNlUHJvcHM7XG4gIGNvbnN0IGZpbmlzaEVudGVyID0gKGVsLCBpc0FwcGVhciwgZG9uZSwgaXNDYW5jZWxsZWQpID0+IHtcbiAgICBlbC5fZW50ZXJDYW5jZWxsZWQgPSBpc0NhbmNlbGxlZDtcbiAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGlzQXBwZWFyID8gYXBwZWFyVG9DbGFzcyA6IGVudGVyVG9DbGFzcyk7XG4gICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBpc0FwcGVhciA/IGFwcGVhckFjdGl2ZUNsYXNzIDogZW50ZXJBY3RpdmVDbGFzcyk7XG4gICAgZG9uZSAmJiBkb25lKCk7XG4gIH07XG4gIGNvbnN0IGZpbmlzaExlYXZlID0gKGVsLCBkb25lKSA9PiB7XG4gICAgZWwuX2lzTGVhdmluZyA9IGZhbHNlO1xuICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVGcm9tQ2xhc3MpO1xuICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVUb0NsYXNzKTtcbiAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQWN0aXZlQ2xhc3MpO1xuICAgIGRvbmUgJiYgZG9uZSgpO1xuICB9O1xuICBjb25zdCBtYWtlRW50ZXJIb29rID0gKGlzQXBwZWFyKSA9PiB7XG4gICAgcmV0dXJuIChlbCwgZG9uZSkgPT4ge1xuICAgICAgY29uc3QgaG9vayA9IGlzQXBwZWFyID8gb25BcHBlYXIgOiBvbkVudGVyO1xuICAgICAgY29uc3QgcmVzb2x2ZSA9ICgpID0+IGZpbmlzaEVudGVyKGVsLCBpc0FwcGVhciwgZG9uZSk7XG4gICAgICBjYWxsSG9vayhob29rLCBbZWwsIHJlc29sdmVdKTtcbiAgICAgIG5leHRGcmFtZSgoKSA9PiB7XG4gICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgaXNBcHBlYXIgPyBhcHBlYXJGcm9tQ2xhc3MgOiBlbnRlckZyb21DbGFzcyk7XG4gICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgaXNBcHBlYXIgPyBhcHBlYXJUb0NsYXNzIDogZW50ZXJUb0NsYXNzKTtcbiAgICAgICAgaWYgKCFoYXNFeHBsaWNpdENhbGxiYWNrKGhvb2spKSB7XG4gICAgICAgICAgd2hlblRyYW5zaXRpb25FbmRzKGVsLCB0eXBlLCBlbnRlckR1cmF0aW9uLCByZXNvbHZlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcbiAgfTtcbiAgcmV0dXJuIGV4dGVuZChiYXNlUHJvcHMsIHtcbiAgICBvbkJlZm9yZUVudGVyKGVsKSB7XG4gICAgICBjYWxsSG9vayhvbkJlZm9yZUVudGVyLCBbZWxdKTtcbiAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgZW50ZXJGcm9tQ2xhc3MpO1xuICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBlbnRlckFjdGl2ZUNsYXNzKTtcbiAgICB9LFxuICAgIG9uQmVmb3JlQXBwZWFyKGVsKSB7XG4gICAgICBjYWxsSG9vayhvbkJlZm9yZUFwcGVhciwgW2VsXSk7XG4gICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGFwcGVhckZyb21DbGFzcyk7XG4gICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGFwcGVhckFjdGl2ZUNsYXNzKTtcbiAgICB9LFxuICAgIG9uRW50ZXI6IG1ha2VFbnRlckhvb2soZmFsc2UpLFxuICAgIG9uQXBwZWFyOiBtYWtlRW50ZXJIb29rKHRydWUpLFxuICAgIG9uTGVhdmUoZWwsIGRvbmUpIHtcbiAgICAgIGVsLl9pc0xlYXZpbmcgPSB0cnVlO1xuICAgICAgY29uc3QgcmVzb2x2ZSA9ICgpID0+IGZpbmlzaExlYXZlKGVsLCBkb25lKTtcbiAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVGcm9tQ2xhc3MpO1xuICAgICAgaWYgKCFlbC5fZW50ZXJDYW5jZWxsZWQpIHtcbiAgICAgICAgZm9yY2VSZWZsb3coKTtcbiAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUFjdGl2ZUNsYXNzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVBY3RpdmVDbGFzcyk7XG4gICAgICAgIGZvcmNlUmVmbG93KCk7XG4gICAgICB9XG4gICAgICBuZXh0RnJhbWUoKCkgPT4ge1xuICAgICAgICBpZiAoIWVsLl9pc0xlYXZpbmcpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUZyb21DbGFzcyk7XG4gICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVUb0NsYXNzKTtcbiAgICAgICAgaWYgKCFoYXNFeHBsaWNpdENhbGxiYWNrKG9uTGVhdmUpKSB7XG4gICAgICAgICAgd2hlblRyYW5zaXRpb25FbmRzKGVsLCB0eXBlLCBsZWF2ZUR1cmF0aW9uLCByZXNvbHZlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjYWxsSG9vayhvbkxlYXZlLCBbZWwsIHJlc29sdmVdKTtcbiAgICB9LFxuICAgIG9uRW50ZXJDYW5jZWxsZWQoZWwpIHtcbiAgICAgIGZpbmlzaEVudGVyKGVsLCBmYWxzZSwgdm9pZCAwLCB0cnVlKTtcbiAgICAgIGNhbGxIb29rKG9uRW50ZXJDYW5jZWxsZWQsIFtlbF0pO1xuICAgIH0sXG4gICAgb25BcHBlYXJDYW5jZWxsZWQoZWwpIHtcbiAgICAgIGZpbmlzaEVudGVyKGVsLCB0cnVlLCB2b2lkIDAsIHRydWUpO1xuICAgICAgY2FsbEhvb2sob25BcHBlYXJDYW5jZWxsZWQsIFtlbF0pO1xuICAgIH0sXG4gICAgb25MZWF2ZUNhbmNlbGxlZChlbCkge1xuICAgICAgZmluaXNoTGVhdmUoZWwpO1xuICAgICAgY2FsbEhvb2sob25MZWF2ZUNhbmNlbGxlZCwgW2VsXSk7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUR1cmF0aW9uKGR1cmF0aW9uKSB7XG4gIGlmIChkdXJhdGlvbiA9PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QoZHVyYXRpb24pKSB7XG4gICAgcmV0dXJuIFtOdW1iZXJPZihkdXJhdGlvbi5lbnRlciksIE51bWJlck9mKGR1cmF0aW9uLmxlYXZlKV07XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgbiA9IE51bWJlck9mKGR1cmF0aW9uKTtcbiAgICByZXR1cm4gW24sIG5dO1xuICB9XG59XG5mdW5jdGlvbiBOdW1iZXJPZih2YWwpIHtcbiAgY29uc3QgcmVzID0gdG9OdW1iZXIodmFsKTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBhc3NlcnROdW1iZXIocmVzLCBcIjx0cmFuc2l0aW9uPiBleHBsaWNpdCBkdXJhdGlvblwiKTtcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBjbHMpIHtcbiAgY2xzLnNwbGl0KC9cXHMrLykuZm9yRWFjaCgoYykgPT4gYyAmJiBlbC5jbGFzc0xpc3QuYWRkKGMpKTtcbiAgKGVsW3Z0Y0tleV0gfHwgKGVsW3Z0Y0tleV0gPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpKSkuYWRkKGNscyk7XG59XG5mdW5jdGlvbiByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGNscykge1xuICBjbHMuc3BsaXQoL1xccysvKS5mb3JFYWNoKChjKSA9PiBjICYmIGVsLmNsYXNzTGlzdC5yZW1vdmUoYykpO1xuICBjb25zdCBfdnRjID0gZWxbdnRjS2V5XTtcbiAgaWYgKF92dGMpIHtcbiAgICBfdnRjLmRlbGV0ZShjbHMpO1xuICAgIGlmICghX3Z0Yy5zaXplKSB7XG4gICAgICBlbFt2dGNLZXldID0gdm9pZCAwO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gbmV4dEZyYW1lKGNiKSB7XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNiKTtcbiAgfSk7XG59XG5sZXQgZW5kSWQgPSAwO1xuZnVuY3Rpb24gd2hlblRyYW5zaXRpb25FbmRzKGVsLCBleHBlY3RlZFR5cGUsIGV4cGxpY2l0VGltZW91dCwgcmVzb2x2ZSkge1xuICBjb25zdCBpZCA9IGVsLl9lbmRJZCA9ICsrZW5kSWQ7XG4gIGNvbnN0IHJlc29sdmVJZk5vdFN0YWxlID0gKCkgPT4ge1xuICAgIGlmIChpZCA9PT0gZWwuX2VuZElkKSB7XG4gICAgICByZXNvbHZlKCk7XG4gICAgfVxuICB9O1xuICBpZiAoZXhwbGljaXRUaW1lb3V0ICE9IG51bGwpIHtcbiAgICByZXR1cm4gc2V0VGltZW91dChyZXNvbHZlSWZOb3RTdGFsZSwgZXhwbGljaXRUaW1lb3V0KTtcbiAgfVxuICBjb25zdCB7IHR5cGUsIHRpbWVvdXQsIHByb3BDb3VudCB9ID0gZ2V0VHJhbnNpdGlvbkluZm8oZWwsIGV4cGVjdGVkVHlwZSk7XG4gIGlmICghdHlwZSkge1xuICAgIHJldHVybiByZXNvbHZlKCk7XG4gIH1cbiAgY29uc3QgZW5kRXZlbnQgPSB0eXBlICsgXCJlbmRcIjtcbiAgbGV0IGVuZGVkID0gMDtcbiAgY29uc3QgZW5kID0gKCkgPT4ge1xuICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZW5kRXZlbnQsIG9uRW5kKTtcbiAgICByZXNvbHZlSWZOb3RTdGFsZSgpO1xuICB9O1xuICBjb25zdCBvbkVuZCA9IChlKSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSBlbCAmJiArK2VuZGVkID49IHByb3BDb3VudCkge1xuICAgICAgZW5kKCk7XG4gICAgfVxuICB9O1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBpZiAoZW5kZWQgPCBwcm9wQ291bnQpIHtcbiAgICAgIGVuZCgpO1xuICAgIH1cbiAgfSwgdGltZW91dCArIDEpO1xuICBlbC5hZGRFdmVudExpc3RlbmVyKGVuZEV2ZW50LCBvbkVuZCk7XG59XG5mdW5jdGlvbiBnZXRUcmFuc2l0aW9uSW5mbyhlbCwgZXhwZWN0ZWRUeXBlKSB7XG4gIGNvbnN0IHN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsKTtcbiAgY29uc3QgZ2V0U3R5bGVQcm9wZXJ0aWVzID0gKGtleSkgPT4gKHN0eWxlc1trZXldIHx8IFwiXCIpLnNwbGl0KFwiLCBcIik7XG4gIGNvbnN0IHRyYW5zaXRpb25EZWxheXMgPSBnZXRTdHlsZVByb3BlcnRpZXMoYCR7VFJBTlNJVElPTn1EZWxheWApO1xuICBjb25zdCB0cmFuc2l0aW9uRHVyYXRpb25zID0gZ2V0U3R5bGVQcm9wZXJ0aWVzKGAke1RSQU5TSVRJT059RHVyYXRpb25gKTtcbiAgY29uc3QgdHJhbnNpdGlvblRpbWVvdXQgPSBnZXRUaW1lb3V0KHRyYW5zaXRpb25EZWxheXMsIHRyYW5zaXRpb25EdXJhdGlvbnMpO1xuICBjb25zdCBhbmltYXRpb25EZWxheXMgPSBnZXRTdHlsZVByb3BlcnRpZXMoYCR7QU5JTUFUSU9OfURlbGF5YCk7XG4gIGNvbnN0IGFuaW1hdGlvbkR1cmF0aW9ucyA9IGdldFN0eWxlUHJvcGVydGllcyhgJHtBTklNQVRJT059RHVyYXRpb25gKTtcbiAgY29uc3QgYW5pbWF0aW9uVGltZW91dCA9IGdldFRpbWVvdXQoYW5pbWF0aW9uRGVsYXlzLCBhbmltYXRpb25EdXJhdGlvbnMpO1xuICBsZXQgdHlwZSA9IG51bGw7XG4gIGxldCB0aW1lb3V0ID0gMDtcbiAgbGV0IHByb3BDb3VudCA9IDA7XG4gIGlmIChleHBlY3RlZFR5cGUgPT09IFRSQU5TSVRJT04pIHtcbiAgICBpZiAodHJhbnNpdGlvblRpbWVvdXQgPiAwKSB7XG4gICAgICB0eXBlID0gVFJBTlNJVElPTjtcbiAgICAgIHRpbWVvdXQgPSB0cmFuc2l0aW9uVGltZW91dDtcbiAgICAgIHByb3BDb3VudCA9IHRyYW5zaXRpb25EdXJhdGlvbnMubGVuZ3RoO1xuICAgIH1cbiAgfSBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09IEFOSU1BVElPTikge1xuICAgIGlmIChhbmltYXRpb25UaW1lb3V0ID4gMCkge1xuICAgICAgdHlwZSA9IEFOSU1BVElPTjtcbiAgICAgIHRpbWVvdXQgPSBhbmltYXRpb25UaW1lb3V0O1xuICAgICAgcHJvcENvdW50ID0gYW5pbWF0aW9uRHVyYXRpb25zLmxlbmd0aDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGltZW91dCA9IE1hdGgubWF4KHRyYW5zaXRpb25UaW1lb3V0LCBhbmltYXRpb25UaW1lb3V0KTtcbiAgICB0eXBlID0gdGltZW91dCA+IDAgPyB0cmFuc2l0aW9uVGltZW91dCA+IGFuaW1hdGlvblRpbWVvdXQgPyBUUkFOU0lUSU9OIDogQU5JTUFUSU9OIDogbnVsbDtcbiAgICBwcm9wQ291bnQgPSB0eXBlID8gdHlwZSA9PT0gVFJBTlNJVElPTiA/IHRyYW5zaXRpb25EdXJhdGlvbnMubGVuZ3RoIDogYW5pbWF0aW9uRHVyYXRpb25zLmxlbmd0aCA6IDA7XG4gIH1cbiAgY29uc3QgaGFzVHJhbnNmb3JtID0gdHlwZSA9PT0gVFJBTlNJVElPTiAmJiAvXFxiKHRyYW5zZm9ybXxhbGwpKCx8JCkvLnRlc3QoXG4gICAgZ2V0U3R5bGVQcm9wZXJ0aWVzKGAke1RSQU5TSVRJT059UHJvcGVydHlgKS50b1N0cmluZygpXG4gICk7XG4gIHJldHVybiB7XG4gICAgdHlwZSxcbiAgICB0aW1lb3V0LFxuICAgIHByb3BDb3VudCxcbiAgICBoYXNUcmFuc2Zvcm1cbiAgfTtcbn1cbmZ1bmN0aW9uIGdldFRpbWVvdXQoZGVsYXlzLCBkdXJhdGlvbnMpIHtcbiAgd2hpbGUgKGRlbGF5cy5sZW5ndGggPCBkdXJhdGlvbnMubGVuZ3RoKSB7XG4gICAgZGVsYXlzID0gZGVsYXlzLmNvbmNhdChkZWxheXMpO1xuICB9XG4gIHJldHVybiBNYXRoLm1heCguLi5kdXJhdGlvbnMubWFwKChkLCBpKSA9PiB0b01zKGQpICsgdG9NcyhkZWxheXNbaV0pKSk7XG59XG5mdW5jdGlvbiB0b01zKHMpIHtcbiAgaWYgKHMgPT09IFwiYXV0b1wiKSByZXR1cm4gMDtcbiAgcmV0dXJuIE51bWJlcihzLnNsaWNlKDAsIC0xKS5yZXBsYWNlKFwiLFwiLCBcIi5cIikpICogMWUzO1xufVxuZnVuY3Rpb24gZm9yY2VSZWZsb3coKSB7XG4gIHJldHVybiBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodDtcbn1cblxuZnVuY3Rpb24gcGF0Y2hDbGFzcyhlbCwgdmFsdWUsIGlzU1ZHKSB7XG4gIGNvbnN0IHRyYW5zaXRpb25DbGFzc2VzID0gZWxbdnRjS2V5XTtcbiAgaWYgKHRyYW5zaXRpb25DbGFzc2VzKSB7XG4gICAgdmFsdWUgPSAodmFsdWUgPyBbdmFsdWUsIC4uLnRyYW5zaXRpb25DbGFzc2VzXSA6IFsuLi50cmFuc2l0aW9uQ2xhc3Nlc10pLmpvaW4oXCIgXCIpO1xuICB9XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgZWwucmVtb3ZlQXR0cmlidXRlKFwiY2xhc3NcIik7XG4gIH0gZWxzZSBpZiAoaXNTVkcpIHtcbiAgICBlbC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCB2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgZWwuY2xhc3NOYW1lID0gdmFsdWU7XG4gIH1cbn1cblxuY29uc3QgdlNob3dPcmlnaW5hbERpc3BsYXkgPSBTeW1ib2woXCJfdm9kXCIpO1xuY29uc3QgdlNob3dIaWRkZW4gPSBTeW1ib2woXCJfdnNoXCIpO1xuY29uc3QgdlNob3cgPSB7XG4gIGJlZm9yZU1vdW50KGVsLCB7IHZhbHVlIH0sIHsgdHJhbnNpdGlvbiB9KSB7XG4gICAgZWxbdlNob3dPcmlnaW5hbERpc3BsYXldID0gZWwuc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIgPyBcIlwiIDogZWwuc3R5bGUuZGlzcGxheTtcbiAgICBpZiAodHJhbnNpdGlvbiAmJiB2YWx1ZSkge1xuICAgICAgdHJhbnNpdGlvbi5iZWZvcmVFbnRlcihlbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldERpc3BsYXkoZWwsIHZhbHVlKTtcbiAgICB9XG4gIH0sXG4gIG1vdW50ZWQoZWwsIHsgdmFsdWUgfSwgeyB0cmFuc2l0aW9uIH0pIHtcbiAgICBpZiAodHJhbnNpdGlvbiAmJiB2YWx1ZSkge1xuICAgICAgdHJhbnNpdGlvbi5lbnRlcihlbCk7XG4gICAgfVxuICB9LFxuICB1cGRhdGVkKGVsLCB7IHZhbHVlLCBvbGRWYWx1ZSB9LCB7IHRyYW5zaXRpb24gfSkge1xuICAgIGlmICghdmFsdWUgPT09ICFvbGRWYWx1ZSkgcmV0dXJuO1xuICAgIGlmICh0cmFuc2l0aW9uKSB7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgdHJhbnNpdGlvbi5iZWZvcmVFbnRlcihlbCk7XG4gICAgICAgIHNldERpc3BsYXkoZWwsIHRydWUpO1xuICAgICAgICB0cmFuc2l0aW9uLmVudGVyKGVsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyYW5zaXRpb24ubGVhdmUoZWwsICgpID0+IHtcbiAgICAgICAgICBzZXREaXNwbGF5KGVsLCBmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzZXREaXNwbGF5KGVsLCB2YWx1ZSk7XG4gICAgfVxuICB9LFxuICBiZWZvcmVVbm1vdW50KGVsLCB7IHZhbHVlIH0pIHtcbiAgICBzZXREaXNwbGF5KGVsLCB2YWx1ZSk7XG4gIH1cbn07XG5pZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICB2U2hvdy5uYW1lID0gXCJzaG93XCI7XG59XG5mdW5jdGlvbiBzZXREaXNwbGF5KGVsLCB2YWx1ZSkge1xuICBlbC5zdHlsZS5kaXNwbGF5ID0gdmFsdWUgPyBlbFt2U2hvd09yaWdpbmFsRGlzcGxheV0gOiBcIm5vbmVcIjtcbiAgZWxbdlNob3dIaWRkZW5dID0gIXZhbHVlO1xufVxuZnVuY3Rpb24gaW5pdFZTaG93Rm9yU1NSKCkge1xuICB2U2hvdy5nZXRTU1JQcm9wcyA9ICh7IHZhbHVlIH0pID0+IHtcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICByZXR1cm4geyBzdHlsZTogeyBkaXNwbGF5OiBcIm5vbmVcIiB9IH07XG4gICAgfVxuICB9O1xufVxuXG5jb25zdCBDU1NfVkFSX1RFWFQgPSBTeW1ib2woISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IFwiQ1NTX1ZBUl9URVhUXCIgOiBcIlwiKTtcbmZ1bmN0aW9uIHVzZUNzc1ZhcnMoZ2V0dGVyKSB7XG4gIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gIGlmICghaW5zdGFuY2UpIHtcbiAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4oYHVzZUNzc1ZhcnMgaXMgY2FsbGVkIHdpdGhvdXQgY3VycmVudCBhY3RpdmUgY29tcG9uZW50IGluc3RhbmNlLmApO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCB1cGRhdGVUZWxlcG9ydHMgPSBpbnN0YW5jZS51dCA9ICh2YXJzID0gZ2V0dGVyKGluc3RhbmNlLnByb3h5KSkgPT4ge1xuICAgIEFycmF5LmZyb20oXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBbZGF0YS12LW93bmVyPVwiJHtpbnN0YW5jZS51aWR9XCJdYClcbiAgICApLmZvckVhY2goKG5vZGUpID0+IHNldFZhcnNPbk5vZGUobm9kZSwgdmFycykpO1xuICB9O1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGluc3RhbmNlLmdldENzc1ZhcnMgPSAoKSA9PiBnZXR0ZXIoaW5zdGFuY2UucHJveHkpO1xuICB9XG4gIGNvbnN0IHNldFZhcnMgPSAoKSA9PiB7XG4gICAgY29uc3QgdmFycyA9IGdldHRlcihpbnN0YW5jZS5wcm94eSk7XG4gICAgaWYgKGluc3RhbmNlLmNlKSB7XG4gICAgICBzZXRWYXJzT25Ob2RlKGluc3RhbmNlLmNlLCB2YXJzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0VmFyc09uVk5vZGUoaW5zdGFuY2Uuc3ViVHJlZSwgdmFycyk7XG4gICAgfVxuICAgIHVwZGF0ZVRlbGVwb3J0cyh2YXJzKTtcbiAgfTtcbiAgb25CZWZvcmVVcGRhdGUoKCkgPT4ge1xuICAgIHF1ZXVlUG9zdEZsdXNoQ2Ioc2V0VmFycyk7XG4gIH0pO1xuICBvbk1vdW50ZWQoKCkgPT4ge1xuICAgIHdhdGNoKHNldFZhcnMsIE5PT1AsIHsgZmx1c2g6IFwicG9zdFwiIH0pO1xuICAgIGNvbnN0IG9iID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoc2V0VmFycyk7XG4gICAgb2Iub2JzZXJ2ZShpbnN0YW5jZS5zdWJUcmVlLmVsLnBhcmVudE5vZGUsIHsgY2hpbGRMaXN0OiB0cnVlIH0pO1xuICAgIG9uVW5tb3VudGVkKCgpID0+IG9iLmRpc2Nvbm5lY3QoKSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gc2V0VmFyc09uVk5vZGUodm5vZGUsIHZhcnMpIHtcbiAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDEyOCkge1xuICAgIGNvbnN0IHN1c3BlbnNlID0gdm5vZGUuc3VzcGVuc2U7XG4gICAgdm5vZGUgPSBzdXNwZW5zZS5hY3RpdmVCcmFuY2g7XG4gICAgaWYgKHN1c3BlbnNlLnBlbmRpbmdCcmFuY2ggJiYgIXN1c3BlbnNlLmlzSHlkcmF0aW5nKSB7XG4gICAgICBzdXNwZW5zZS5lZmZlY3RzLnB1c2goKCkgPT4ge1xuICAgICAgICBzZXRWYXJzT25WTm9kZShzdXNwZW5zZS5hY3RpdmVCcmFuY2gsIHZhcnMpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHdoaWxlICh2bm9kZS5jb21wb25lbnQpIHtcbiAgICB2bm9kZSA9IHZub2RlLmNvbXBvbmVudC5zdWJUcmVlO1xuICB9XG4gIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAxICYmIHZub2RlLmVsKSB7XG4gICAgc2V0VmFyc09uTm9kZSh2bm9kZS5lbCwgdmFycyk7XG4gIH0gZWxzZSBpZiAodm5vZGUudHlwZSA9PT0gRnJhZ21lbnQpIHtcbiAgICB2bm9kZS5jaGlsZHJlbi5mb3JFYWNoKChjKSA9PiBzZXRWYXJzT25WTm9kZShjLCB2YXJzKSk7XG4gIH0gZWxzZSBpZiAodm5vZGUudHlwZSA9PT0gU3RhdGljKSB7XG4gICAgbGV0IHsgZWwsIGFuY2hvciB9ID0gdm5vZGU7XG4gICAgd2hpbGUgKGVsKSB7XG4gICAgICBzZXRWYXJzT25Ob2RlKGVsLCB2YXJzKTtcbiAgICAgIGlmIChlbCA9PT0gYW5jaG9yKSBicmVhaztcbiAgICAgIGVsID0gZWwubmV4dFNpYmxpbmc7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBzZXRWYXJzT25Ob2RlKGVsLCB2YXJzKSB7XG4gIGlmIChlbC5ub2RlVHlwZSA9PT0gMSkge1xuICAgIGNvbnN0IHN0eWxlID0gZWwuc3R5bGU7XG4gICAgbGV0IGNzc1RleHQgPSBcIlwiO1xuICAgIGZvciAoY29uc3Qga2V5IGluIHZhcnMpIHtcbiAgICAgIHN0eWxlLnNldFByb3BlcnR5KGAtLSR7a2V5fWAsIHZhcnNba2V5XSk7XG4gICAgICBjc3NUZXh0ICs9IGAtLSR7a2V5fTogJHt2YXJzW2tleV19O2A7XG4gICAgfVxuICAgIHN0eWxlW0NTU19WQVJfVEVYVF0gPSBjc3NUZXh0O1xuICB9XG59XG5cbmNvbnN0IGRpc3BsYXlSRSA9IC8oXnw7KVxccypkaXNwbGF5XFxzKjovO1xuZnVuY3Rpb24gcGF0Y2hTdHlsZShlbCwgcHJldiwgbmV4dCkge1xuICBjb25zdCBzdHlsZSA9IGVsLnN0eWxlO1xuICBjb25zdCBpc0Nzc1N0cmluZyA9IGlzU3RyaW5nKG5leHQpO1xuICBsZXQgaGFzQ29udHJvbGxlZERpc3BsYXkgPSBmYWxzZTtcbiAgaWYgKG5leHQgJiYgIWlzQ3NzU3RyaW5nKSB7XG4gICAgaWYgKHByZXYpIHtcbiAgICAgIGlmICghaXNTdHJpbmcocHJldikpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcHJldikge1xuICAgICAgICAgIGlmIChuZXh0W2tleV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgc2V0U3R5bGUoc3R5bGUsIGtleSwgXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGNvbnN0IHByZXZTdHlsZSBvZiBwcmV2LnNwbGl0KFwiO1wiKSkge1xuICAgICAgICAgIGNvbnN0IGtleSA9IHByZXZTdHlsZS5zbGljZSgwLCBwcmV2U3R5bGUuaW5kZXhPZihcIjpcIikpLnRyaW0oKTtcbiAgICAgICAgICBpZiAobmV4dFtrZXldID09IG51bGwpIHtcbiAgICAgICAgICAgIHNldFN0eWxlKHN0eWxlLCBrZXksIFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBuZXh0KSB7XG4gICAgICBpZiAoa2V5ID09PSBcImRpc3BsYXlcIikge1xuICAgICAgICBoYXNDb250cm9sbGVkRGlzcGxheSA9IHRydWU7XG4gICAgICB9XG4gICAgICBzZXRTdHlsZShzdHlsZSwga2V5LCBuZXh0W2tleV0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoaXNDc3NTdHJpbmcpIHtcbiAgICAgIGlmIChwcmV2ICE9PSBuZXh0KSB7XG4gICAgICAgIGNvbnN0IGNzc1ZhclRleHQgPSBzdHlsZVtDU1NfVkFSX1RFWFRdO1xuICAgICAgICBpZiAoY3NzVmFyVGV4dCkge1xuICAgICAgICAgIG5leHQgKz0gXCI7XCIgKyBjc3NWYXJUZXh0O1xuICAgICAgICB9XG4gICAgICAgIHN0eWxlLmNzc1RleHQgPSBuZXh0O1xuICAgICAgICBoYXNDb250cm9sbGVkRGlzcGxheSA9IGRpc3BsYXlSRS50ZXN0KG5leHQpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocHJldikge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIik7XG4gICAgfVxuICB9XG4gIGlmICh2U2hvd09yaWdpbmFsRGlzcGxheSBpbiBlbCkge1xuICAgIGVsW3ZTaG93T3JpZ2luYWxEaXNwbGF5XSA9IGhhc0NvbnRyb2xsZWREaXNwbGF5ID8gc3R5bGUuZGlzcGxheSA6IFwiXCI7XG4gICAgaWYgKGVsW3ZTaG93SGlkZGVuXSkge1xuICAgICAgc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH1cbiAgfVxufVxuY29uc3Qgc2VtaWNvbG9uUkUgPSAvW15cXFxcXTtcXHMqJC87XG5jb25zdCBpbXBvcnRhbnRSRSA9IC9cXHMqIWltcG9ydGFudCQvO1xuZnVuY3Rpb24gc2V0U3R5bGUoc3R5bGUsIG5hbWUsIHZhbCkge1xuICBpZiAoaXNBcnJheSh2YWwpKSB7XG4gICAgdmFsLmZvckVhY2goKHYpID0+IHNldFN0eWxlKHN0eWxlLCBuYW1lLCB2KSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHZhbCA9PSBudWxsKSB2YWwgPSBcIlwiO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICBpZiAoc2VtaWNvbG9uUkUudGVzdCh2YWwpKSB7XG4gICAgICAgIHdhcm4oXG4gICAgICAgICAgYFVuZXhwZWN0ZWQgc2VtaWNvbG9uIGF0IHRoZSBlbmQgb2YgJyR7bmFtZX0nIHN0eWxlIHZhbHVlOiAnJHt2YWx9J2BcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG5hbWUuc3RhcnRzV2l0aChcIi0tXCIpKSB7XG4gICAgICBzdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBwcmVmaXhlZCA9IGF1dG9QcmVmaXgoc3R5bGUsIG5hbWUpO1xuICAgICAgaWYgKGltcG9ydGFudFJFLnRlc3QodmFsKSkge1xuICAgICAgICBzdHlsZS5zZXRQcm9wZXJ0eShcbiAgICAgICAgICBoeXBoZW5hdGUocHJlZml4ZWQpLFxuICAgICAgICAgIHZhbC5yZXBsYWNlKGltcG9ydGFudFJFLCBcIlwiKSxcbiAgICAgICAgICBcImltcG9ydGFudFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdHlsZVtwcmVmaXhlZF0gPSB2YWw7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5jb25zdCBwcmVmaXhlcyA9IFtcIldlYmtpdFwiLCBcIk1velwiLCBcIm1zXCJdO1xuY29uc3QgcHJlZml4Q2FjaGUgPSB7fTtcbmZ1bmN0aW9uIGF1dG9QcmVmaXgoc3R5bGUsIHJhd05hbWUpIHtcbiAgY29uc3QgY2FjaGVkID0gcHJlZml4Q2FjaGVbcmF3TmFtZV07XG4gIGlmIChjYWNoZWQpIHtcbiAgICByZXR1cm4gY2FjaGVkO1xuICB9XG4gIGxldCBuYW1lID0gY2FtZWxpemUocmF3TmFtZSk7XG4gIGlmIChuYW1lICE9PSBcImZpbHRlclwiICYmIG5hbWUgaW4gc3R5bGUpIHtcbiAgICByZXR1cm4gcHJlZml4Q2FjaGVbcmF3TmFtZV0gPSBuYW1lO1xuICB9XG4gIG5hbWUgPSBjYXBpdGFsaXplKG5hbWUpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHByZWZpeGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgcHJlZml4ZWQgPSBwcmVmaXhlc1tpXSArIG5hbWU7XG4gICAgaWYgKHByZWZpeGVkIGluIHN0eWxlKSB7XG4gICAgICByZXR1cm4gcHJlZml4Q2FjaGVbcmF3TmFtZV0gPSBwcmVmaXhlZDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJhd05hbWU7XG59XG5cbmNvbnN0IHhsaW5rTlMgPSBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIjtcbmZ1bmN0aW9uIHBhdGNoQXR0cihlbCwga2V5LCB2YWx1ZSwgaXNTVkcsIGluc3RhbmNlLCBpc0Jvb2xlYW4gPSBpc1NwZWNpYWxCb29sZWFuQXR0cihrZXkpKSB7XG4gIGlmIChpc1NWRyAmJiBrZXkuc3RhcnRzV2l0aChcInhsaW5rOlwiKSkge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGVOUyh4bGlua05TLCBrZXkuc2xpY2UoNiwga2V5Lmxlbmd0aCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGVOUyh4bGlua05TLCBrZXksIHZhbHVlKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwgfHwgaXNCb29sZWFuICYmICFpbmNsdWRlQm9vbGVhbkF0dHIodmFsdWUpKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKFxuICAgICAgICBrZXksXG4gICAgICAgIGlzQm9vbGVhbiA/IFwiXCIgOiBpc1N5bWJvbCh2YWx1ZSkgPyBTdHJpbmcodmFsdWUpIDogdmFsdWVcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHBhdGNoRE9NUHJvcChlbCwga2V5LCB2YWx1ZSwgcGFyZW50Q29tcG9uZW50LCBhdHRyTmFtZSkge1xuICBpZiAoa2V5ID09PSBcImlubmVySFRNTFwiIHx8IGtleSA9PT0gXCJ0ZXh0Q29udGVudFwiKSB7XG4gICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgIGVsW2tleV0gPSBrZXkgPT09IFwiaW5uZXJIVE1MXCIgPyB1bnNhZmVUb1RydXN0ZWRIVE1MKHZhbHVlKSA6IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgdGFnID0gZWwudGFnTmFtZTtcbiAgaWYgKGtleSA9PT0gXCJ2YWx1ZVwiICYmIHRhZyAhPT0gXCJQUk9HUkVTU1wiICYmIC8vIGN1c3RvbSBlbGVtZW50cyBtYXkgdXNlIF92YWx1ZSBpbnRlcm5hbGx5XG4gICF0YWcuaW5jbHVkZXMoXCItXCIpKSB7XG4gICAgY29uc3Qgb2xkVmFsdWUgPSB0YWcgPT09IFwiT1BUSU9OXCIgPyBlbC5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSB8fCBcIlwiIDogZWwudmFsdWU7XG4gICAgY29uc3QgbmV3VmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gKFxuICAgICAgLy8gIzExNjQ3OiB2YWx1ZSBzaG91bGQgYmUgc2V0IGFzIGVtcHR5IHN0cmluZyBmb3IgbnVsbCBhbmQgdW5kZWZpbmVkLFxuICAgICAgLy8gYnV0IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIj4gc2hvdWxkIGJlIHNldCBhcyAnb24nLlxuICAgICAgZWwudHlwZSA9PT0gXCJjaGVja2JveFwiID8gXCJvblwiIDogXCJcIlxuICAgICkgOiBTdHJpbmcodmFsdWUpO1xuICAgIGlmIChvbGRWYWx1ZSAhPT0gbmV3VmFsdWUgfHwgIShcIl92YWx1ZVwiIGluIGVsKSkge1xuICAgICAgZWwudmFsdWUgPSBuZXdWYWx1ZTtcbiAgICB9XG4gICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuICAgIH1cbiAgICBlbC5fdmFsdWUgPSB2YWx1ZTtcbiAgICByZXR1cm47XG4gIH1cbiAgbGV0IG5lZWRSZW1vdmUgPSBmYWxzZTtcbiAgaWYgKHZhbHVlID09PSBcIlwiIHx8IHZhbHVlID09IG51bGwpIHtcbiAgICBjb25zdCB0eXBlID0gdHlwZW9mIGVsW2tleV07XG4gICAgaWYgKHR5cGUgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICB2YWx1ZSA9IGluY2x1ZGVCb29sZWFuQXR0cih2YWx1ZSk7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSA9PSBudWxsICYmIHR5cGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHZhbHVlID0gXCJcIjtcbiAgICAgIG5lZWRSZW1vdmUgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgdmFsdWUgPSAwO1xuICAgICAgbmVlZFJlbW92ZSA9IHRydWU7XG4gICAgfVxuICB9XG4gIHRyeSB7XG4gICAgZWxba2V5XSA9IHZhbHVlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIW5lZWRSZW1vdmUpIHtcbiAgICAgIHdhcm4oXG4gICAgICAgIGBGYWlsZWQgc2V0dGluZyBwcm9wIFwiJHtrZXl9XCIgb24gPCR7dGFnLnRvTG93ZXJDYXNlKCl9PjogdmFsdWUgJHt2YWx1ZX0gaXMgaW52YWxpZC5gLFxuICAgICAgICBlXG4gICAgICApO1xuICAgIH1cbiAgfVxuICBuZWVkUmVtb3ZlICYmIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyTmFtZSB8fCBrZXkpO1xufVxuXG5mdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKGVsLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucykge1xuICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIoZWwsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xufVxuY29uc3QgdmVpS2V5ID0gU3ltYm9sKFwiX3ZlaVwiKTtcbmZ1bmN0aW9uIHBhdGNoRXZlbnQoZWwsIHJhd05hbWUsIHByZXZWYWx1ZSwgbmV4dFZhbHVlLCBpbnN0YW5jZSA9IG51bGwpIHtcbiAgY29uc3QgaW52b2tlcnMgPSBlbFt2ZWlLZXldIHx8IChlbFt2ZWlLZXldID0ge30pO1xuICBjb25zdCBleGlzdGluZ0ludm9rZXIgPSBpbnZva2Vyc1tyYXdOYW1lXTtcbiAgaWYgKG5leHRWYWx1ZSAmJiBleGlzdGluZ0ludm9rZXIpIHtcbiAgICBleGlzdGluZ0ludm9rZXIudmFsdWUgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gc2FuaXRpemVFdmVudFZhbHVlKG5leHRWYWx1ZSwgcmF3TmFtZSkgOiBuZXh0VmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgW25hbWUsIG9wdGlvbnNdID0gcGFyc2VOYW1lKHJhd05hbWUpO1xuICAgIGlmIChuZXh0VmFsdWUpIHtcbiAgICAgIGNvbnN0IGludm9rZXIgPSBpbnZva2Vyc1tyYXdOYW1lXSA9IGNyZWF0ZUludm9rZXIoXG4gICAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBzYW5pdGl6ZUV2ZW50VmFsdWUobmV4dFZhbHVlLCByYXdOYW1lKSA6IG5leHRWYWx1ZSxcbiAgICAgICAgaW5zdGFuY2VcbiAgICAgICk7XG4gICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCBuYW1lLCBpbnZva2VyLCBvcHRpb25zKTtcbiAgICB9IGVsc2UgaWYgKGV4aXN0aW5nSW52b2tlcikge1xuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihlbCwgbmFtZSwgZXhpc3RpbmdJbnZva2VyLCBvcHRpb25zKTtcbiAgICAgIGludm9rZXJzW3Jhd05hbWVdID0gdm9pZCAwO1xuICAgIH1cbiAgfVxufVxuY29uc3Qgb3B0aW9uc01vZGlmaWVyUkUgPSAvKD86T25jZXxQYXNzaXZlfENhcHR1cmUpJC87XG5mdW5jdGlvbiBwYXJzZU5hbWUobmFtZSkge1xuICBsZXQgb3B0aW9ucztcbiAgaWYgKG9wdGlvbnNNb2RpZmllclJFLnRlc3QobmFtZSkpIHtcbiAgICBvcHRpb25zID0ge307XG4gICAgbGV0IG07XG4gICAgd2hpbGUgKG0gPSBuYW1lLm1hdGNoKG9wdGlvbnNNb2RpZmllclJFKSkge1xuICAgICAgbmFtZSA9IG5hbWUuc2xpY2UoMCwgbmFtZS5sZW5ndGggLSBtWzBdLmxlbmd0aCk7XG4gICAgICBvcHRpb25zW21bMF0udG9Mb3dlckNhc2UoKV0gPSB0cnVlO1xuICAgIH1cbiAgfVxuICBjb25zdCBldmVudCA9IG5hbWVbMl0gPT09IFwiOlwiID8gbmFtZS5zbGljZSgzKSA6IGh5cGhlbmF0ZShuYW1lLnNsaWNlKDIpKTtcbiAgcmV0dXJuIFtldmVudCwgb3B0aW9uc107XG59XG5sZXQgY2FjaGVkTm93ID0gMDtcbmNvbnN0IHAgPSAvKiBAX19QVVJFX18gKi8gUHJvbWlzZS5yZXNvbHZlKCk7XG5jb25zdCBnZXROb3cgPSAoKSA9PiBjYWNoZWROb3cgfHwgKHAudGhlbigoKSA9PiBjYWNoZWROb3cgPSAwKSwgY2FjaGVkTm93ID0gRGF0ZS5ub3coKSk7XG5mdW5jdGlvbiBjcmVhdGVJbnZva2VyKGluaXRpYWxWYWx1ZSwgaW5zdGFuY2UpIHtcbiAgY29uc3QgaW52b2tlciA9IChlKSA9PiB7XG4gICAgaWYgKCFlLl92dHMpIHtcbiAgICAgIGUuX3Z0cyA9IERhdGUubm93KCk7XG4gICAgfSBlbHNlIGlmIChlLl92dHMgPD0gaW52b2tlci5hdHRhY2hlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhcbiAgICAgIHBhdGNoU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKGUsIGludm9rZXIudmFsdWUpLFxuICAgICAgaW5zdGFuY2UsXG4gICAgICA1LFxuICAgICAgW2VdXG4gICAgKTtcbiAgfTtcbiAgaW52b2tlci52YWx1ZSA9IGluaXRpYWxWYWx1ZTtcbiAgaW52b2tlci5hdHRhY2hlZCA9IGdldE5vdygpO1xuICByZXR1cm4gaW52b2tlcjtcbn1cbmZ1bmN0aW9uIHNhbml0aXplRXZlbnRWYWx1ZSh2YWx1ZSwgcHJvcE5hbWUpIHtcbiAgaWYgKGlzRnVuY3Rpb24odmFsdWUpIHx8IGlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHdhcm4oXG4gICAgYFdyb25nIHR5cGUgcGFzc2VkIGFzIGV2ZW50IGhhbmRsZXIgdG8gJHtwcm9wTmFtZX0gLSBkaWQgeW91IGZvcmdldCBAIG9yIDogaW4gZnJvbnQgb2YgeW91ciBwcm9wP1xuRXhwZWN0ZWQgZnVuY3Rpb24gb3IgYXJyYXkgb2YgZnVuY3Rpb25zLCByZWNlaXZlZCB0eXBlICR7dHlwZW9mIHZhbHVlfS5gXG4gICk7XG4gIHJldHVybiBOT09QO1xufVxuZnVuY3Rpb24gcGF0Y2hTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oZSwgdmFsdWUpIHtcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgY29uc3Qgb3JpZ2luYWxTdG9wID0gZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb247XG4gICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24gPSAoKSA9PiB7XG4gICAgICBvcmlnaW5hbFN0b3AuY2FsbChlKTtcbiAgICAgIGUuX3N0b3BwZWQgPSB0cnVlO1xuICAgIH07XG4gICAgcmV0dXJuIHZhbHVlLm1hcChcbiAgICAgIChmbikgPT4gKGUyKSA9PiAhZTIuX3N0b3BwZWQgJiYgZm4gJiYgZm4oZTIpXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn1cblxuY29uc3QgaXNOYXRpdmVPbiA9IChrZXkpID0+IGtleS5jaGFyQ29kZUF0KDApID09PSAxMTEgJiYga2V5LmNoYXJDb2RlQXQoMSkgPT09IDExMCAmJiAvLyBsb3dlcmNhc2UgbGV0dGVyXG5rZXkuY2hhckNvZGVBdCgyKSA+IDk2ICYmIGtleS5jaGFyQ29kZUF0KDIpIDwgMTIzO1xuY29uc3QgcGF0Y2hQcm9wID0gKGVsLCBrZXksIHByZXZWYWx1ZSwgbmV4dFZhbHVlLCBuYW1lc3BhY2UsIHBhcmVudENvbXBvbmVudCkgPT4ge1xuICBjb25zdCBpc1NWRyA9IG5hbWVzcGFjZSA9PT0gXCJzdmdcIjtcbiAgaWYgKGtleSA9PT0gXCJjbGFzc1wiKSB7XG4gICAgcGF0Y2hDbGFzcyhlbCwgbmV4dFZhbHVlLCBpc1NWRyk7XG4gIH0gZWxzZSBpZiAoa2V5ID09PSBcInN0eWxlXCIpIHtcbiAgICBwYXRjaFN0eWxlKGVsLCBwcmV2VmFsdWUsIG5leHRWYWx1ZSk7XG4gIH0gZWxzZSBpZiAoaXNPbihrZXkpKSB7XG4gICAgaWYgKCFpc01vZGVsTGlzdGVuZXIoa2V5KSkge1xuICAgICAgcGF0Y2hFdmVudChlbCwga2V5LCBwcmV2VmFsdWUsIG5leHRWYWx1ZSwgcGFyZW50Q29tcG9uZW50KTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoa2V5WzBdID09PSBcIi5cIiA/IChrZXkgPSBrZXkuc2xpY2UoMSksIHRydWUpIDoga2V5WzBdID09PSBcIl5cIiA/IChrZXkgPSBrZXkuc2xpY2UoMSksIGZhbHNlKSA6IHNob3VsZFNldEFzUHJvcChlbCwga2V5LCBuZXh0VmFsdWUsIGlzU1ZHKSkge1xuICAgIHBhdGNoRE9NUHJvcChlbCwga2V5LCBuZXh0VmFsdWUpO1xuICAgIGlmICghZWwudGFnTmFtZS5pbmNsdWRlcyhcIi1cIikgJiYgKGtleSA9PT0gXCJ2YWx1ZVwiIHx8IGtleSA9PT0gXCJjaGVja2VkXCIgfHwga2V5ID09PSBcInNlbGVjdGVkXCIpKSB7XG4gICAgICBwYXRjaEF0dHIoZWwsIGtleSwgbmV4dFZhbHVlLCBpc1NWRywgcGFyZW50Q29tcG9uZW50LCBrZXkgIT09IFwidmFsdWVcIik7XG4gICAgfVxuICB9IGVsc2UgaWYgKFxuICAgIC8vICMxMTA4MSBmb3JjZSBzZXQgcHJvcHMgZm9yIHBvc3NpYmxlIGFzeW5jIGN1c3RvbSBlbGVtZW50XG4gICAgZWwuX2lzVnVlQ0UgJiYgKC9bQS1aXS8udGVzdChrZXkpIHx8ICFpc1N0cmluZyhuZXh0VmFsdWUpKVxuICApIHtcbiAgICBwYXRjaERPTVByb3AoZWwsIGNhbWVsaXplJDEoa2V5KSwgbmV4dFZhbHVlLCBwYXJlbnRDb21wb25lbnQsIGtleSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGtleSA9PT0gXCJ0cnVlLXZhbHVlXCIpIHtcbiAgICAgIGVsLl90cnVlVmFsdWUgPSBuZXh0VmFsdWU7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09IFwiZmFsc2UtdmFsdWVcIikge1xuICAgICAgZWwuX2ZhbHNlVmFsdWUgPSBuZXh0VmFsdWU7XG4gICAgfVxuICAgIHBhdGNoQXR0cihlbCwga2V5LCBuZXh0VmFsdWUsIGlzU1ZHKTtcbiAgfVxufTtcbmZ1bmN0aW9uIHNob3VsZFNldEFzUHJvcChlbCwga2V5LCB2YWx1ZSwgaXNTVkcpIHtcbiAgaWYgKGlzU1ZHKSB7XG4gICAgaWYgKGtleSA9PT0gXCJpbm5lckhUTUxcIiB8fCBrZXkgPT09IFwidGV4dENvbnRlbnRcIikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChrZXkgaW4gZWwgJiYgaXNOYXRpdmVPbihrZXkpICYmIGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChrZXkgPT09IFwic3BlbGxjaGVja1wiIHx8IGtleSA9PT0gXCJkcmFnZ2FibGVcIiB8fCBrZXkgPT09IFwidHJhbnNsYXRlXCIgfHwga2V5ID09PSBcImF1dG9jb3JyZWN0XCIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGtleSA9PT0gXCJmb3JtXCIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGtleSA9PT0gXCJsaXN0XCIgJiYgZWwudGFnTmFtZSA9PT0gXCJJTlBVVFwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChrZXkgPT09IFwidHlwZVwiICYmIGVsLnRhZ05hbWUgPT09IFwiVEVYVEFSRUFcIikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoa2V5ID09PSBcIndpZHRoXCIgfHwga2V5ID09PSBcImhlaWdodFwiKSB7XG4gICAgY29uc3QgdGFnID0gZWwudGFnTmFtZTtcbiAgICBpZiAodGFnID09PSBcIklNR1wiIHx8IHRhZyA9PT0gXCJWSURFT1wiIHx8IHRhZyA9PT0gXCJDQU5WQVNcIiB8fCB0YWcgPT09IFwiU09VUkNFXCIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgaWYgKGlzTmF0aXZlT24oa2V5KSAmJiBpc1N0cmluZyh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIGtleSBpbiBlbDtcbn1cblxuY29uc3QgUkVNT1ZBTCA9IHt9O1xuLyohICNfX05PX1NJREVfRUZGRUNUU19fICovXG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24gZGVmaW5lQ3VzdG9tRWxlbWVudChvcHRpb25zLCBleHRyYU9wdGlvbnMsIF9jcmVhdGVBcHApIHtcbiAgY29uc3QgQ29tcCA9IGRlZmluZUNvbXBvbmVudChvcHRpb25zLCBleHRyYU9wdGlvbnMpO1xuICBpZiAoaXNQbGFpbk9iamVjdChDb21wKSkgZXh0ZW5kKENvbXAsIGV4dHJhT3B0aW9ucyk7XG4gIGNsYXNzIFZ1ZUN1c3RvbUVsZW1lbnQgZXh0ZW5kcyBWdWVFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihpbml0aWFsUHJvcHMpIHtcbiAgICAgIHN1cGVyKENvbXAsIGluaXRpYWxQcm9wcywgX2NyZWF0ZUFwcCk7XG4gICAgfVxuICB9XG4gIFZ1ZUN1c3RvbUVsZW1lbnQuZGVmID0gQ29tcDtcbiAgcmV0dXJuIFZ1ZUN1c3RvbUVsZW1lbnQ7XG59XG4vKiEgI19fTk9fU0lERV9FRkZFQ1RTX18gKi9cbmNvbnN0IGRlZmluZVNTUkN1c3RvbUVsZW1lbnQgPSAvKiBAX19OT19TSURFX0VGRkVDVFNfXyAqLyAob3B0aW9ucywgZXh0cmFPcHRpb25zKSA9PiB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gZGVmaW5lQ3VzdG9tRWxlbWVudChvcHRpb25zLCBleHRyYU9wdGlvbnMsIGNyZWF0ZVNTUkFwcCk7XG59O1xuY29uc3QgQmFzZUNsYXNzID0gdHlwZW9mIEhUTUxFbGVtZW50ICE9PSBcInVuZGVmaW5lZFwiID8gSFRNTEVsZW1lbnQgOiBjbGFzcyB7XG59O1xuY2xhc3MgVnVlRWxlbWVudCBleHRlbmRzIEJhc2VDbGFzcyB7XG4gIGNvbnN0cnVjdG9yKF9kZWYsIF9wcm9wcyA9IHt9LCBfY3JlYXRlQXBwID0gY3JlYXRlQXBwKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9kZWYgPSBfZGVmO1xuICAgIHRoaXMuX3Byb3BzID0gX3Byb3BzO1xuICAgIHRoaXMuX2NyZWF0ZUFwcCA9IF9jcmVhdGVBcHA7XG4gICAgdGhpcy5faXNWdWVDRSA9IHRydWU7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5faW5zdGFuY2UgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMuX2FwcCA9IG51bGw7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5fbm9uY2UgPSB0aGlzLl9kZWYubm9uY2U7XG4gICAgdGhpcy5fY29ubmVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5fcmVzb2x2ZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9udW1iZXJQcm9wcyA9IG51bGw7XG4gICAgdGhpcy5fc3R5bGVDaGlsZHJlbiA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha1NldCgpO1xuICAgIHRoaXMuX29iID0gbnVsbDtcbiAgICBpZiAodGhpcy5zaGFkb3dSb290ICYmIF9jcmVhdGVBcHAgIT09IGNyZWF0ZUFwcCkge1xuICAgICAgdGhpcy5fcm9vdCA9IHRoaXMuc2hhZG93Um9vdDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgdGhpcy5zaGFkb3dSb290KSB7XG4gICAgICAgIHdhcm4oXG4gICAgICAgICAgYEN1c3RvbSBlbGVtZW50IGhhcyBwcmUtcmVuZGVyZWQgZGVjbGFyYXRpdmUgc2hhZG93IHJvb3QgYnV0IGlzIG5vdCBkZWZpbmVkIGFzIGh5ZHJhdGFibGUuIFVzZSBcXGBkZWZpbmVTU1JDdXN0b21FbGVtZW50XFxgLmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChfZGVmLnNoYWRvd1Jvb3QgIT09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XG4gICAgICAgIHRoaXMuX3Jvb3QgPSB0aGlzLnNoYWRvd1Jvb3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9yb290ID0gdGhpcztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLl9kZWYuX19hc3luY0xvYWRlcikge1xuICAgICAgdGhpcy5fcmVzb2x2ZVByb3BzKHRoaXMuX2RlZik7XG4gICAgfVxuICB9XG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGlmICghdGhpcy5pc0Nvbm5lY3RlZCkgcmV0dXJuO1xuICAgIGlmICghdGhpcy5zaGFkb3dSb290KSB7XG4gICAgICB0aGlzLl9wYXJzZVNsb3RzKCk7XG4gICAgfVxuICAgIHRoaXMuX2Nvbm5lY3RlZCA9IHRydWU7XG4gICAgbGV0IHBhcmVudCA9IHRoaXM7XG4gICAgd2hpbGUgKHBhcmVudCA9IHBhcmVudCAmJiAocGFyZW50LnBhcmVudE5vZGUgfHwgcGFyZW50Lmhvc3QpKSB7XG4gICAgICBpZiAocGFyZW50IGluc3RhbmNlb2YgVnVlRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRoaXMuX2luc3RhbmNlKSB7XG4gICAgICBpZiAodGhpcy5fcmVzb2x2ZWQpIHtcbiAgICAgICAgdGhpcy5fc2V0UGFyZW50KCk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHBhcmVudCAmJiBwYXJlbnQuX3BlbmRpbmdSZXNvbHZlKSB7XG4gICAgICAgICAgdGhpcy5fcGVuZGluZ1Jlc29sdmUgPSBwYXJlbnQuX3BlbmRpbmdSZXNvbHZlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcGVuZGluZ1Jlc29sdmUgPSB2b2lkIDA7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlRGVmKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fcmVzb2x2ZURlZigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIF9zZXRQYXJlbnQocGFyZW50ID0gdGhpcy5fcGFyZW50KSB7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgdGhpcy5faW5zdGFuY2UucGFyZW50ID0gcGFyZW50Ll9pbnN0YW5jZTtcbiAgICAgIHRoaXMuX2luc3RhbmNlLnByb3ZpZGVzID0gcGFyZW50Ll9pbnN0YW5jZS5wcm92aWRlcztcbiAgICB9XG4gIH1cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5fY29ubmVjdGVkID0gZmFsc2U7XG4gICAgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLl9jb25uZWN0ZWQpIHtcbiAgICAgICAgaWYgKHRoaXMuX29iKSB7XG4gICAgICAgICAgdGhpcy5fb2IuZGlzY29ubmVjdCgpO1xuICAgICAgICAgIHRoaXMuX29iID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9hcHAgJiYgdGhpcy5fYXBwLnVubW91bnQoKTtcbiAgICAgICAgaWYgKHRoaXMuX2luc3RhbmNlKSB0aGlzLl9pbnN0YW5jZS5jZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5fYXBwID0gdGhpcy5faW5zdGFuY2UgPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiByZXNvbHZlIGlubmVyIGNvbXBvbmVudCBkZWZpbml0aW9uIChoYW5kbGUgcG9zc2libGUgYXN5bmMgY29tcG9uZW50KVxuICAgKi9cbiAgX3Jlc29sdmVEZWYoKSB7XG4gICAgaWYgKHRoaXMuX3BlbmRpbmdSZXNvbHZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLl9zZXRBdHRyKHRoaXMuYXR0cmlidXRlc1tpXS5uYW1lKTtcbiAgICB9XG4gICAgdGhpcy5fb2IgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7XG4gICAgICBmb3IgKGNvbnN0IG0gb2YgbXV0YXRpb25zKSB7XG4gICAgICAgIHRoaXMuX3NldEF0dHIobS5hdHRyaWJ1dGVOYW1lKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLl9vYi5vYnNlcnZlKHRoaXMsIHsgYXR0cmlidXRlczogdHJ1ZSB9KTtcbiAgICBjb25zdCByZXNvbHZlID0gKGRlZiwgaXNBc3luYyA9IGZhbHNlKSA9PiB7XG4gICAgICB0aGlzLl9yZXNvbHZlZCA9IHRydWU7XG4gICAgICB0aGlzLl9wZW5kaW5nUmVzb2x2ZSA9IHZvaWQgMDtcbiAgICAgIGNvbnN0IHsgcHJvcHMsIHN0eWxlcyB9ID0gZGVmO1xuICAgICAgbGV0IG51bWJlclByb3BzO1xuICAgICAgaWYgKHByb3BzICYmICFpc0FycmF5KHByb3BzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgICAgICAgIGNvbnN0IG9wdCA9IHByb3BzW2tleV07XG4gICAgICAgICAgaWYgKG9wdCA9PT0gTnVtYmVyIHx8IG9wdCAmJiBvcHQudHlwZSA9PT0gTnVtYmVyKSB7XG4gICAgICAgICAgICBpZiAoa2V5IGluIHRoaXMuX3Byb3BzKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3Byb3BzW2tleV0gPSB0b051bWJlcih0aGlzLl9wcm9wc1trZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIChudW1iZXJQcm9wcyB8fCAobnVtYmVyUHJvcHMgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKSkpW2NhbWVsaXplJDEoa2V5KV0gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fbnVtYmVyUHJvcHMgPSBudW1iZXJQcm9wcztcbiAgICAgIGlmIChpc0FzeW5jKSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVQcm9wcyhkZWYpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc2hhZG93Um9vdCkge1xuICAgICAgICB0aGlzLl9hcHBseVN0eWxlcyhzdHlsZXMpO1xuICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHN0eWxlcykge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgIFwiQ3VzdG9tIGVsZW1lbnQgc3R5bGUgaW5qZWN0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgd2hlbiB1c2luZyBzaGFkb3dSb290OiBmYWxzZVwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aGlzLl9tb3VudChkZWYpO1xuICAgIH07XG4gICAgY29uc3QgYXN5bmNEZWYgPSB0aGlzLl9kZWYuX19hc3luY0xvYWRlcjtcbiAgICBpZiAoYXN5bmNEZWYpIHtcbiAgICAgIHRoaXMuX3BlbmRpbmdSZXNvbHZlID0gYXN5bmNEZWYoKS50aGVuKFxuICAgICAgICAoZGVmKSA9PiByZXNvbHZlKHRoaXMuX2RlZiA9IGRlZiwgdHJ1ZSlcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc29sdmUodGhpcy5fZGVmKTtcbiAgICB9XG4gIH1cbiAgX21vdW50KGRlZikge1xuICAgIGlmICgoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pICYmICFkZWYubmFtZSkge1xuICAgICAgZGVmLm5hbWUgPSBcIlZ1ZUVsZW1lbnRcIjtcbiAgICB9XG4gICAgdGhpcy5fYXBwID0gdGhpcy5fY3JlYXRlQXBwKGRlZik7XG4gICAgaWYgKGRlZi5jb25maWd1cmVBcHApIHtcbiAgICAgIGRlZi5jb25maWd1cmVBcHAodGhpcy5fYXBwKTtcbiAgICB9XG4gICAgdGhpcy5fYXBwLl9jZVZOb2RlID0gdGhpcy5fY3JlYXRlVk5vZGUoKTtcbiAgICB0aGlzLl9hcHAubW91bnQodGhpcy5fcm9vdCk7XG4gICAgY29uc3QgZXhwb3NlZCA9IHRoaXMuX2luc3RhbmNlICYmIHRoaXMuX2luc3RhbmNlLmV4cG9zZWQ7XG4gICAgaWYgKCFleHBvc2VkKSByZXR1cm47XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZXhwb3NlZCkge1xuICAgICAgaWYgKCFoYXNPd24odGhpcywga2V5KSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywga2V5LCB7XG4gICAgICAgICAgLy8gdW53cmFwIHJlZiB0byBiZSBjb25zaXN0ZW50IHdpdGggcHVibGljIGluc3RhbmNlIGJlaGF2aW9yXG4gICAgICAgICAgZ2V0OiAoKSA9PiB1bnJlZihleHBvc2VkW2tleV0pXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgIHdhcm4oYEV4cG9zZWQgcHJvcGVydHkgXCIke2tleX1cIiBhbHJlYWR5IGV4aXN0cyBvbiBjdXN0b20gZWxlbWVudC5gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgX3Jlc29sdmVQcm9wcyhkZWYpIHtcbiAgICBjb25zdCB7IHByb3BzIH0gPSBkZWY7XG4gICAgY29uc3QgZGVjbGFyZWRQcm9wS2V5cyA9IGlzQXJyYXkocHJvcHMpID8gcHJvcHMgOiBPYmplY3Qua2V5cyhwcm9wcyB8fCB7fSk7XG4gICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModGhpcykpIHtcbiAgICAgIGlmIChrZXlbMF0gIT09IFwiX1wiICYmIGRlY2xhcmVkUHJvcEtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICB0aGlzLl9zZXRQcm9wKGtleSwgdGhpc1trZXldKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgZGVjbGFyZWRQcm9wS2V5cy5tYXAoY2FtZWxpemUkMSkpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrZXksIHtcbiAgICAgICAgZ2V0KCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRQcm9wKGtleSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldCh2YWwpIHtcbiAgICAgICAgICB0aGlzLl9zZXRQcm9wKGtleSwgdmFsLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIF9zZXRBdHRyKGtleSkge1xuICAgIGlmIChrZXkuc3RhcnRzV2l0aChcImRhdGEtdi1cIikpIHJldHVybjtcbiAgICBjb25zdCBoYXMgPSB0aGlzLmhhc0F0dHJpYnV0ZShrZXkpO1xuICAgIGxldCB2YWx1ZSA9IGhhcyA/IHRoaXMuZ2V0QXR0cmlidXRlKGtleSkgOiBSRU1PVkFMO1xuICAgIGNvbnN0IGNhbWVsS2V5ID0gY2FtZWxpemUkMShrZXkpO1xuICAgIGlmIChoYXMgJiYgdGhpcy5fbnVtYmVyUHJvcHMgJiYgdGhpcy5fbnVtYmVyUHJvcHNbY2FtZWxLZXldKSB7XG4gICAgICB2YWx1ZSA9IHRvTnVtYmVyKHZhbHVlKTtcbiAgICB9XG4gICAgdGhpcy5fc2V0UHJvcChjYW1lbEtleSwgdmFsdWUsIGZhbHNlLCB0cnVlKTtcbiAgfVxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBfZ2V0UHJvcChrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJvcHNba2V5XTtcbiAgfVxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBfc2V0UHJvcChrZXksIHZhbCwgc2hvdWxkUmVmbGVjdCA9IHRydWUsIHNob3VsZFVwZGF0ZSA9IGZhbHNlKSB7XG4gICAgaWYgKHZhbCAhPT0gdGhpcy5fcHJvcHNba2V5XSkge1xuICAgICAgaWYgKHZhbCA9PT0gUkVNT1ZBTCkge1xuICAgICAgICBkZWxldGUgdGhpcy5fcHJvcHNba2V5XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3Byb3BzW2tleV0gPSB2YWw7XG4gICAgICAgIGlmIChrZXkgPT09IFwia2V5XCIgJiYgdGhpcy5fYXBwKSB7XG4gICAgICAgICAgdGhpcy5fYXBwLl9jZVZOb2RlLmtleSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHNob3VsZFVwZGF0ZSAmJiB0aGlzLl9pbnN0YW5jZSkge1xuICAgICAgICB0aGlzLl91cGRhdGUoKTtcbiAgICAgIH1cbiAgICAgIGlmIChzaG91bGRSZWZsZWN0KSB7XG4gICAgICAgIGNvbnN0IG9iID0gdGhpcy5fb2I7XG4gICAgICAgIG9iICYmIG9iLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGh5cGhlbmF0ZShrZXkpLCBcIlwiKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiB2YWwgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShoeXBoZW5hdGUoa2V5KSwgdmFsICsgXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoIXZhbCkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGh5cGhlbmF0ZShrZXkpKTtcbiAgICAgICAgfVxuICAgICAgICBvYiAmJiBvYi5vYnNlcnZlKHRoaXMsIHsgYXR0cmlidXRlczogdHJ1ZSB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgX3VwZGF0ZSgpIHtcbiAgICByZW5kZXIodGhpcy5fY3JlYXRlVk5vZGUoKSwgdGhpcy5fcm9vdCk7XG4gIH1cbiAgX2NyZWF0ZVZOb2RlKCkge1xuICAgIGNvbnN0IGJhc2VQcm9wcyA9IHt9O1xuICAgIGlmICghdGhpcy5zaGFkb3dSb290KSB7XG4gICAgICBiYXNlUHJvcHMub25Wbm9kZU1vdW50ZWQgPSBiYXNlUHJvcHMub25Wbm9kZVVwZGF0ZWQgPSB0aGlzLl9yZW5kZXJTbG90cy5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBjb25zdCB2bm9kZSA9IGNyZWF0ZVZOb2RlKHRoaXMuX2RlZiwgZXh0ZW5kKGJhc2VQcm9wcywgdGhpcy5fcHJvcHMpKTtcbiAgICBpZiAoIXRoaXMuX2luc3RhbmNlKSB7XG4gICAgICB2bm9kZS5jZSA9IChpbnN0YW5jZSkgPT4ge1xuICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IGluc3RhbmNlO1xuICAgICAgICBpbnN0YW5jZS5jZSA9IHRoaXM7XG4gICAgICAgIGluc3RhbmNlLmlzQ0UgPSB0cnVlO1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIGluc3RhbmNlLmNlUmVsb2FkID0gKG5ld1N0eWxlcykgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3N0eWxlcykge1xuICAgICAgICAgICAgICB0aGlzLl9zdHlsZXMuZm9yRWFjaCgocykgPT4gdGhpcy5fcm9vdC5yZW1vdmVDaGlsZChzKSk7XG4gICAgICAgICAgICAgIHRoaXMuX3N0eWxlcy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fYXBwbHlTdHlsZXMobmV3U3R5bGVzKTtcbiAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZSgpO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGlzcGF0Y2ggPSAoZXZlbnQsIGFyZ3MpID0+IHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgICBuZXcgQ3VzdG9tRXZlbnQoXG4gICAgICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgICAgICBpc1BsYWluT2JqZWN0KGFyZ3NbMF0pID8gZXh0ZW5kKHsgZGV0YWlsOiBhcmdzIH0sIGFyZ3NbMF0pIDogeyBkZXRhaWw6IGFyZ3MgfVxuICAgICAgICAgICAgKVxuICAgICAgICAgICk7XG4gICAgICAgIH07XG4gICAgICAgIGluc3RhbmNlLmVtaXQgPSAoZXZlbnQsIC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICBkaXNwYXRjaChldmVudCwgYXJncyk7XG4gICAgICAgICAgaWYgKGh5cGhlbmF0ZShldmVudCkgIT09IGV2ZW50KSB7XG4gICAgICAgICAgICBkaXNwYXRjaChoeXBoZW5hdGUoZXZlbnQpLCBhcmdzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX3NldFBhcmVudCgpO1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHZub2RlO1xuICB9XG4gIF9hcHBseVN0eWxlcyhzdHlsZXMsIG93bmVyKSB7XG4gICAgaWYgKCFzdHlsZXMpIHJldHVybjtcbiAgICBpZiAob3duZXIpIHtcbiAgICAgIGlmIChvd25lciA9PT0gdGhpcy5fZGVmIHx8IHRoaXMuX3N0eWxlQ2hpbGRyZW4uaGFzKG93bmVyKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl9zdHlsZUNoaWxkcmVuLmFkZChvd25lcik7XG4gICAgfVxuICAgIGNvbnN0IG5vbmNlID0gdGhpcy5fbm9uY2U7XG4gICAgZm9yIChsZXQgaSA9IHN0eWxlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgY29uc3QgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgIGlmIChub25jZSkgcy5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBub25jZSk7XG4gICAgICBzLnRleHRDb250ZW50ID0gc3R5bGVzW2ldO1xuICAgICAgdGhpcy5zaGFkb3dSb290LnByZXBlbmQocyk7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICBpZiAob3duZXIpIHtcbiAgICAgICAgICBpZiAob3duZXIuX19obXJJZCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9jaGlsZFN0eWxlcykgdGhpcy5fY2hpbGRTdHlsZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgICAgICAgICAgbGV0IGVudHJ5ID0gdGhpcy5fY2hpbGRTdHlsZXMuZ2V0KG93bmVyLl9faG1ySWQpO1xuICAgICAgICAgICAgaWYgKCFlbnRyeSkge1xuICAgICAgICAgICAgICB0aGlzLl9jaGlsZFN0eWxlcy5zZXQob3duZXIuX19obXJJZCwgZW50cnkgPSBbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbnRyeS5wdXNoKHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAodGhpcy5fc3R5bGVzIHx8ICh0aGlzLl9zdHlsZXMgPSBbXSkpLnB1c2gocyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIE9ubHkgY2FsbGVkIHdoZW4gc2hhZG93Um9vdCBpcyBmYWxzZVxuICAgKi9cbiAgX3BhcnNlU2xvdHMoKSB7XG4gICAgY29uc3Qgc2xvdHMgPSB0aGlzLl9zbG90cyA9IHt9O1xuICAgIGxldCBuO1xuICAgIHdoaWxlIChuID0gdGhpcy5maXJzdENoaWxkKSB7XG4gICAgICBjb25zdCBzbG90TmFtZSA9IG4ubm9kZVR5cGUgPT09IDEgJiYgbi5nZXRBdHRyaWJ1dGUoXCJzbG90XCIpIHx8IFwiZGVmYXVsdFwiO1xuICAgICAgKHNsb3RzW3Nsb3ROYW1lXSB8fCAoc2xvdHNbc2xvdE5hbWVdID0gW10pKS5wdXNoKG4pO1xuICAgICAgdGhpcy5yZW1vdmVDaGlsZChuKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIE9ubHkgY2FsbGVkIHdoZW4gc2hhZG93Um9vdCBpcyBmYWxzZVxuICAgKi9cbiAgX3JlbmRlclNsb3RzKCkge1xuICAgIGNvbnN0IG91dGxldHMgPSAodGhpcy5fdGVsZXBvcnRUYXJnZXQgfHwgdGhpcykucXVlcnlTZWxlY3RvckFsbChcInNsb3RcIik7XG4gICAgY29uc3Qgc2NvcGVJZCA9IHRoaXMuX2luc3RhbmNlLnR5cGUuX19zY29wZUlkO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3V0bGV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgbyA9IG91dGxldHNbaV07XG4gICAgICBjb25zdCBzbG90TmFtZSA9IG8uZ2V0QXR0cmlidXRlKFwibmFtZVwiKSB8fCBcImRlZmF1bHRcIjtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLl9zbG90c1tzbG90TmFtZV07XG4gICAgICBjb25zdCBwYXJlbnQgPSBvLnBhcmVudE5vZGU7XG4gICAgICBpZiAoY29udGVudCkge1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgY29udGVudCkge1xuICAgICAgICAgIGlmIChzY29wZUlkICYmIG4ubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gc2NvcGVJZCArIFwiLXNcIjtcbiAgICAgICAgICAgIGNvbnN0IHdhbGtlciA9IGRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIobiwgMSk7XG4gICAgICAgICAgICBuLnNldEF0dHJpYnV0ZShpZCwgXCJcIik7XG4gICAgICAgICAgICBsZXQgY2hpbGQ7XG4gICAgICAgICAgICB3aGlsZSAoY2hpbGQgPSB3YWxrZXIubmV4dE5vZGUoKSkge1xuICAgICAgICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoaWQsIFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKG4sIG8pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aGlsZSAoby5maXJzdENoaWxkKSBwYXJlbnQuaW5zZXJ0QmVmb3JlKG8uZmlyc3RDaGlsZCwgbyk7XG4gICAgICB9XG4gICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQobyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF9pbmplY3RDaGlsZFN0eWxlKGNvbXApIHtcbiAgICB0aGlzLl9hcHBseVN0eWxlcyhjb21wLnN0eWxlcywgY29tcCk7XG4gIH1cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgX3JlbW92ZUNoaWxkU3R5bGUoY29tcCkge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICB0aGlzLl9zdHlsZUNoaWxkcmVuLmRlbGV0ZShjb21wKTtcbiAgICAgIGlmICh0aGlzLl9jaGlsZFN0eWxlcyAmJiBjb21wLl9faG1ySWQpIHtcbiAgICAgICAgY29uc3Qgb2xkU3R5bGVzID0gdGhpcy5fY2hpbGRTdHlsZXMuZ2V0KGNvbXAuX19obXJJZCk7XG4gICAgICAgIGlmIChvbGRTdHlsZXMpIHtcbiAgICAgICAgICBvbGRTdHlsZXMuZm9yRWFjaCgocykgPT4gdGhpcy5fcm9vdC5yZW1vdmVDaGlsZChzKSk7XG4gICAgICAgICAgb2xkU3R5bGVzLmxlbmd0aCA9IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIHVzZUhvc3QoY2FsbGVyKSB7XG4gIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gIGNvbnN0IGVsID0gaW5zdGFuY2UgJiYgaW5zdGFuY2UuY2U7XG4gIGlmIChlbCkge1xuICAgIHJldHVybiBlbDtcbiAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgaWYgKCFpbnN0YW5jZSkge1xuICAgICAgd2FybihcbiAgICAgICAgYCR7Y2FsbGVyIHx8IFwidXNlSG9zdFwifSBjYWxsZWQgd2l0aG91dCBhbiBhY3RpdmUgY29tcG9uZW50IGluc3RhbmNlLmBcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdhcm4oXG4gICAgICAgIGAke2NhbGxlciB8fCBcInVzZUhvc3RcIn0gY2FuIG9ubHkgYmUgdXNlZCBpbiBjb21wb25lbnRzIGRlZmluZWQgdmlhIGRlZmluZUN1c3RvbUVsZW1lbnQuYFxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiB1c2VTaGFkb3dSb290KCkge1xuICBjb25zdCBlbCA9ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyB1c2VIb3N0KFwidXNlU2hhZG93Um9vdFwiKSA6IHVzZUhvc3QoKTtcbiAgcmV0dXJuIGVsICYmIGVsLnNoYWRvd1Jvb3Q7XG59XG5cbmZ1bmN0aW9uIHVzZUNzc01vZHVsZShuYW1lID0gXCIkc3R5bGVcIikge1xuICB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICBpZiAoIWluc3RhbmNlKSB7XG4gICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4oYHVzZUNzc01vZHVsZSBtdXN0IGJlIGNhbGxlZCBpbnNpZGUgc2V0dXAoKWApO1xuICAgICAgcmV0dXJuIEVNUFRZX09CSjtcbiAgICB9XG4gICAgY29uc3QgbW9kdWxlcyA9IGluc3RhbmNlLnR5cGUuX19jc3NNb2R1bGVzO1xuICAgIGlmICghbW9kdWxlcykge1xuICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuKGBDdXJyZW50IGluc3RhbmNlIGRvZXMgbm90IGhhdmUgQ1NTIG1vZHVsZXMgaW5qZWN0ZWQuYCk7XG4gICAgICByZXR1cm4gRU1QVFlfT0JKO1xuICAgIH1cbiAgICBjb25zdCBtb2QgPSBtb2R1bGVzW25hbWVdO1xuICAgIGlmICghbW9kKSB7XG4gICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4oYEN1cnJlbnQgaW5zdGFuY2UgZG9lcyBub3QgaGF2ZSBDU1MgbW9kdWxlIG5hbWVkIFwiJHtuYW1lfVwiLmApO1xuICAgICAgcmV0dXJuIEVNUFRZX09CSjtcbiAgICB9XG4gICAgcmV0dXJuIG1vZDtcbiAgfVxufVxuXG5jb25zdCBwb3NpdGlvbk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuY29uc3QgbmV3UG9zaXRpb25NYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IG1vdmVDYktleSA9IFN5bWJvbChcIl9tb3ZlQ2JcIik7XG5jb25zdCBlbnRlckNiS2V5ID0gU3ltYm9sKFwiX2VudGVyQ2JcIik7XG5jb25zdCBkZWNvcmF0ZSA9ICh0KSA9PiB7XG4gIGRlbGV0ZSB0LnByb3BzLm1vZGU7XG4gIHJldHVybiB0O1xufTtcbmNvbnN0IFRyYW5zaXRpb25Hcm91cEltcGwgPSAvKiBAX19QVVJFX18gKi8gZGVjb3JhdGUoe1xuICBuYW1lOiBcIlRyYW5zaXRpb25Hcm91cFwiLFxuICBwcm9wczogLyogQF9fUFVSRV9fICovIGV4dGVuZCh7fSwgVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycywge1xuICAgIHRhZzogU3RyaW5nLFxuICAgIG1vdmVDbGFzczogU3RyaW5nXG4gIH0pLFxuICBzZXR1cChwcm9wcywgeyBzbG90cyB9KSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICBjb25zdCBzdGF0ZSA9IHVzZVRyYW5zaXRpb25TdGF0ZSgpO1xuICAgIGxldCBwcmV2Q2hpbGRyZW47XG4gICAgbGV0IGNoaWxkcmVuO1xuICAgIG9uVXBkYXRlZCgoKSA9PiB7XG4gICAgICBpZiAoIXByZXZDaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgbW92ZUNsYXNzID0gcHJvcHMubW92ZUNsYXNzIHx8IGAke3Byb3BzLm5hbWUgfHwgXCJ2XCJ9LW1vdmVgO1xuICAgICAgaWYgKCFoYXNDU1NUcmFuc2Zvcm0oXG4gICAgICAgIHByZXZDaGlsZHJlblswXS5lbCxcbiAgICAgICAgaW5zdGFuY2Uudm5vZGUuZWwsXG4gICAgICAgIG1vdmVDbGFzc1xuICAgICAgKSkge1xuICAgICAgICBwcmV2Q2hpbGRyZW4gPSBbXTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcHJldkNoaWxkcmVuLmZvckVhY2goY2FsbFBlbmRpbmdDYnMpO1xuICAgICAgcHJldkNoaWxkcmVuLmZvckVhY2gocmVjb3JkUG9zaXRpb24pO1xuICAgICAgY29uc3QgbW92ZWRDaGlsZHJlbiA9IHByZXZDaGlsZHJlbi5maWx0ZXIoYXBwbHlUcmFuc2xhdGlvbik7XG4gICAgICBmb3JjZVJlZmxvdygpO1xuICAgICAgbW92ZWRDaGlsZHJlbi5mb3JFYWNoKChjKSA9PiB7XG4gICAgICAgIGNvbnN0IGVsID0gYy5lbDtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBlbC5zdHlsZTtcbiAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBtb3ZlQ2xhc3MpO1xuICAgICAgICBzdHlsZS50cmFuc2Zvcm0gPSBzdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSBzdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIlwiO1xuICAgICAgICBjb25zdCBjYiA9IGVsW21vdmVDYktleV0gPSAoZSkgPT4ge1xuICAgICAgICAgIGlmIChlICYmIGUudGFyZ2V0ICE9PSBlbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWUgfHwgL3RyYW5zZm9ybSQvLnRlc3QoZS5wcm9wZXJ0eU5hbWUpKSB7XG4gICAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBjYik7XG4gICAgICAgICAgICBlbFttb3ZlQ2JLZXldID0gbnVsbDtcbiAgICAgICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbW92ZUNsYXNzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIGNiKTtcbiAgICAgIH0pO1xuICAgICAgcHJldkNoaWxkcmVuID0gW107XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnN0IHJhd1Byb3BzID0gdG9SYXcocHJvcHMpO1xuICAgICAgY29uc3QgY3NzVHJhbnNpdGlvblByb3BzID0gcmVzb2x2ZVRyYW5zaXRpb25Qcm9wcyhyYXdQcm9wcyk7XG4gICAgICBsZXQgdGFnID0gcmF3UHJvcHMudGFnIHx8IEZyYWdtZW50O1xuICAgICAgcHJldkNoaWxkcmVuID0gW107XG4gICAgICBpZiAoY2hpbGRyZW4pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgICAgaWYgKGNoaWxkLmVsICYmIGNoaWxkLmVsIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICAgICAgcHJldkNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgICAgICAgc2V0VHJhbnNpdGlvbkhvb2tzKFxuICAgICAgICAgICAgICBjaGlsZCxcbiAgICAgICAgICAgICAgcmVzb2x2ZVRyYW5zaXRpb25Ib29rcyhcbiAgICAgICAgICAgICAgICBjaGlsZCxcbiAgICAgICAgICAgICAgICBjc3NUcmFuc2l0aW9uUHJvcHMsXG4gICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHBvc2l0aW9uTWFwLnNldChcbiAgICAgICAgICAgICAgY2hpbGQsXG4gICAgICAgICAgICAgIGNoaWxkLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY2hpbGRyZW4gPSBzbG90cy5kZWZhdWx0ID8gZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuKHNsb3RzLmRlZmF1bHQoKSkgOiBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgaWYgKGNoaWxkLmtleSAhPSBudWxsKSB7XG4gICAgICAgICAgc2V0VHJhbnNpdGlvbkhvb2tzKFxuICAgICAgICAgICAgY2hpbGQsXG4gICAgICAgICAgICByZXNvbHZlVHJhbnNpdGlvbkhvb2tzKGNoaWxkLCBjc3NUcmFuc2l0aW9uUHJvcHMsIHN0YXRlLCBpbnN0YW5jZSlcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgY2hpbGQudHlwZSAhPT0gVGV4dCkge1xuICAgICAgICAgIHdhcm4oYDxUcmFuc2l0aW9uR3JvdXA+IGNoaWxkcmVuIG11c3QgYmUga2V5ZWQuYCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBjcmVhdGVWTm9kZSh0YWcsIG51bGwsIGNoaWxkcmVuKTtcbiAgICB9O1xuICB9XG59KTtcbmNvbnN0IFRyYW5zaXRpb25Hcm91cCA9IFRyYW5zaXRpb25Hcm91cEltcGw7XG5mdW5jdGlvbiBjYWxsUGVuZGluZ0NicyhjKSB7XG4gIGNvbnN0IGVsID0gYy5lbDtcbiAgaWYgKGVsW21vdmVDYktleV0pIHtcbiAgICBlbFttb3ZlQ2JLZXldKCk7XG4gIH1cbiAgaWYgKGVsW2VudGVyQ2JLZXldKSB7XG4gICAgZWxbZW50ZXJDYktleV0oKTtcbiAgfVxufVxuZnVuY3Rpb24gcmVjb3JkUG9zaXRpb24oYykge1xuICBuZXdQb3NpdGlvbk1hcC5zZXQoYywgYy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSk7XG59XG5mdW5jdGlvbiBhcHBseVRyYW5zbGF0aW9uKGMpIHtcbiAgY29uc3Qgb2xkUG9zID0gcG9zaXRpb25NYXAuZ2V0KGMpO1xuICBjb25zdCBuZXdQb3MgPSBuZXdQb3NpdGlvbk1hcC5nZXQoYyk7XG4gIGNvbnN0IGR4ID0gb2xkUG9zLmxlZnQgLSBuZXdQb3MubGVmdDtcbiAgY29uc3QgZHkgPSBvbGRQb3MudG9wIC0gbmV3UG9zLnRvcDtcbiAgaWYgKGR4IHx8IGR5KSB7XG4gICAgY29uc3QgcyA9IGMuZWwuc3R5bGU7XG4gICAgcy50cmFuc2Zvcm0gPSBzLndlYmtpdFRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtkeH1weCwke2R5fXB4KWA7XG4gICAgcy50cmFuc2l0aW9uRHVyYXRpb24gPSBcIjBzXCI7XG4gICAgcmV0dXJuIGM7XG4gIH1cbn1cbmZ1bmN0aW9uIGhhc0NTU1RyYW5zZm9ybShlbCwgcm9vdCwgbW92ZUNsYXNzKSB7XG4gIGNvbnN0IGNsb25lID0gZWwuY2xvbmVOb2RlKCk7XG4gIGNvbnN0IF92dGMgPSBlbFt2dGNLZXldO1xuICBpZiAoX3Z0Yykge1xuICAgIF92dGMuZm9yRWFjaCgoY2xzKSA9PiB7XG4gICAgICBjbHMuc3BsaXQoL1xccysvKS5mb3JFYWNoKChjKSA9PiBjICYmIGNsb25lLmNsYXNzTGlzdC5yZW1vdmUoYykpO1xuICAgIH0pO1xuICB9XG4gIG1vdmVDbGFzcy5zcGxpdCgvXFxzKy8pLmZvckVhY2goKGMpID0+IGMgJiYgY2xvbmUuY2xhc3NMaXN0LmFkZChjKSk7XG4gIGNsb25lLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgY29uc3QgY29udGFpbmVyID0gcm9vdC5ub2RlVHlwZSA9PT0gMSA/IHJvb3QgOiByb290LnBhcmVudE5vZGU7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjbG9uZSk7XG4gIGNvbnN0IHsgaGFzVHJhbnNmb3JtIH0gPSBnZXRUcmFuc2l0aW9uSW5mbyhjbG9uZSk7XG4gIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjbG9uZSk7XG4gIHJldHVybiBoYXNUcmFuc2Zvcm07XG59XG5cbmNvbnN0IGdldE1vZGVsQXNzaWduZXIgPSAodm5vZGUpID0+IHtcbiAgY29uc3QgZm4gPSB2bm9kZS5wcm9wc1tcIm9uVXBkYXRlOm1vZGVsVmFsdWVcIl0gfHwgZmFsc2U7XG4gIHJldHVybiBpc0FycmF5KGZuKSA/ICh2YWx1ZSkgPT4gaW52b2tlQXJyYXlGbnMoZm4sIHZhbHVlKSA6IGZuO1xufTtcbmZ1bmN0aW9uIG9uQ29tcG9zaXRpb25TdGFydChlKSB7XG4gIGUudGFyZ2V0LmNvbXBvc2luZyA9IHRydWU7XG59XG5mdW5jdGlvbiBvbkNvbXBvc2l0aW9uRW5kKGUpIHtcbiAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gIGlmICh0YXJnZXQuY29tcG9zaW5nKSB7XG4gICAgdGFyZ2V0LmNvbXBvc2luZyA9IGZhbHNlO1xuICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIpKTtcbiAgfVxufVxuY29uc3QgYXNzaWduS2V5ID0gU3ltYm9sKFwiX2Fzc2lnblwiKTtcbmNvbnN0IHZNb2RlbFRleHQgPSB7XG4gIGNyZWF0ZWQoZWwsIHsgbW9kaWZpZXJzOiB7IGxhenksIHRyaW0sIG51bWJlciB9IH0sIHZub2RlKSB7XG4gICAgZWxbYXNzaWduS2V5XSA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgIGNvbnN0IGNhc3RUb051bWJlciA9IG51bWJlciB8fCB2bm9kZS5wcm9wcyAmJiB2bm9kZS5wcm9wcy50eXBlID09PSBcIm51bWJlclwiO1xuICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsIGxhenkgPyBcImNoYW5nZVwiIDogXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgICAgaWYgKGUudGFyZ2V0LmNvbXBvc2luZykgcmV0dXJuO1xuICAgICAgbGV0IGRvbVZhbHVlID0gZWwudmFsdWU7XG4gICAgICBpZiAodHJpbSkge1xuICAgICAgICBkb21WYWx1ZSA9IGRvbVZhbHVlLnRyaW0oKTtcbiAgICAgIH1cbiAgICAgIGlmIChjYXN0VG9OdW1iZXIpIHtcbiAgICAgICAgZG9tVmFsdWUgPSBsb29zZVRvTnVtYmVyKGRvbVZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGVsW2Fzc2lnbktleV0oZG9tVmFsdWUpO1xuICAgIH0pO1xuICAgIGlmICh0cmltKSB7XG4gICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCBcImNoYW5nZVwiLCAoKSA9PiB7XG4gICAgICAgIGVsLnZhbHVlID0gZWwudmFsdWUudHJpbSgpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICghbGF6eSkge1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgXCJjb21wb3NpdGlvbnN0YXJ0XCIsIG9uQ29tcG9zaXRpb25TdGFydCk7XG4gICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCBcImNvbXBvc2l0aW9uZW5kXCIsIG9uQ29tcG9zaXRpb25FbmQpO1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgXCJjaGFuZ2VcIiwgb25Db21wb3NpdGlvbkVuZCk7XG4gICAgfVxuICB9LFxuICAvLyBzZXQgdmFsdWUgb24gbW91bnRlZCBzbyBpdCdzIGFmdGVyIG1pbi9tYXggZm9yIHR5cGU9XCJyYW5nZVwiXG4gIG1vdW50ZWQoZWwsIHsgdmFsdWUgfSkge1xuICAgIGVsLnZhbHVlID0gdmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZTtcbiAgfSxcbiAgYmVmb3JlVXBkYXRlKGVsLCB7IHZhbHVlLCBvbGRWYWx1ZSwgbW9kaWZpZXJzOiB7IGxhenksIHRyaW0sIG51bWJlciB9IH0sIHZub2RlKSB7XG4gICAgZWxbYXNzaWduS2V5XSA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgIGlmIChlbC5jb21wb3NpbmcpIHJldHVybjtcbiAgICBjb25zdCBlbFZhbHVlID0gKG51bWJlciB8fCBlbC50eXBlID09PSBcIm51bWJlclwiKSAmJiAhL14wXFxkLy50ZXN0KGVsLnZhbHVlKSA/IGxvb3NlVG9OdW1iZXIoZWwudmFsdWUpIDogZWwudmFsdWU7XG4gICAgY29uc3QgbmV3VmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlO1xuICAgIGlmIChlbFZhbHVlID09PSBuZXdWYWx1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gZWwgJiYgZWwudHlwZSAhPT0gXCJyYW5nZVwiKSB7XG4gICAgICBpZiAobGF6eSAmJiB2YWx1ZSA9PT0gb2xkVmFsdWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRyaW0gJiYgZWwudmFsdWUudHJpbSgpID09PSBuZXdWYWx1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGVsLnZhbHVlID0gbmV3VmFsdWU7XG4gIH1cbn07XG5jb25zdCB2TW9kZWxDaGVja2JveCA9IHtcbiAgLy8gIzQwOTYgYXJyYXkgY2hlY2tib3hlcyBuZWVkIHRvIGJlIGRlZXAgdHJhdmVyc2VkXG4gIGRlZXA6IHRydWUsXG4gIGNyZWF0ZWQoZWwsIF8sIHZub2RlKSB7XG4gICAgZWxbYXNzaWduS2V5XSA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsIFwiY2hhbmdlXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IG1vZGVsVmFsdWUgPSBlbC5fbW9kZWxWYWx1ZTtcbiAgICAgIGNvbnN0IGVsZW1lbnRWYWx1ZSA9IGdldFZhbHVlKGVsKTtcbiAgICAgIGNvbnN0IGNoZWNrZWQgPSBlbC5jaGVja2VkO1xuICAgICAgY29uc3QgYXNzaWduID0gZWxbYXNzaWduS2V5XTtcbiAgICAgIGlmIChpc0FycmF5KG1vZGVsVmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gbG9vc2VJbmRleE9mKG1vZGVsVmFsdWUsIGVsZW1lbnRWYWx1ZSk7XG4gICAgICAgIGNvbnN0IGZvdW5kID0gaW5kZXggIT09IC0xO1xuICAgICAgICBpZiAoY2hlY2tlZCAmJiAhZm91bmQpIHtcbiAgICAgICAgICBhc3NpZ24obW9kZWxWYWx1ZS5jb25jYXQoZWxlbWVudFZhbHVlKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoIWNoZWNrZWQgJiYgZm91bmQpIHtcbiAgICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IFsuLi5tb2RlbFZhbHVlXTtcbiAgICAgICAgICBmaWx0ZXJlZC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgIGFzc2lnbihmaWx0ZXJlZCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaXNTZXQobW9kZWxWYWx1ZSkpIHtcbiAgICAgICAgY29uc3QgY2xvbmVkID0gbmV3IFNldChtb2RlbFZhbHVlKTtcbiAgICAgICAgaWYgKGNoZWNrZWQpIHtcbiAgICAgICAgICBjbG9uZWQuYWRkKGVsZW1lbnRWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2xvbmVkLmRlbGV0ZShlbGVtZW50VmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2lnbihjbG9uZWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXNzaWduKGdldENoZWNrYm94VmFsdWUoZWwsIGNoZWNrZWQpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgLy8gc2V0IGluaXRpYWwgY2hlY2tlZCBvbiBtb3VudCB0byB3YWl0IGZvciB0cnVlLXZhbHVlL2ZhbHNlLXZhbHVlXG4gIG1vdW50ZWQ6IHNldENoZWNrZWQsXG4gIGJlZm9yZVVwZGF0ZShlbCwgYmluZGluZywgdm5vZGUpIHtcbiAgICBlbFthc3NpZ25LZXldID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gICAgc2V0Q2hlY2tlZChlbCwgYmluZGluZywgdm5vZGUpO1xuICB9XG59O1xuZnVuY3Rpb24gc2V0Q2hlY2tlZChlbCwgeyB2YWx1ZSwgb2xkVmFsdWUgfSwgdm5vZGUpIHtcbiAgZWwuX21vZGVsVmFsdWUgPSB2YWx1ZTtcbiAgbGV0IGNoZWNrZWQ7XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIGNoZWNrZWQgPSBsb29zZUluZGV4T2YodmFsdWUsIHZub2RlLnByb3BzLnZhbHVlKSA+IC0xO1xuICB9IGVsc2UgaWYgKGlzU2V0KHZhbHVlKSkge1xuICAgIGNoZWNrZWQgPSB2YWx1ZS5oYXModm5vZGUucHJvcHMudmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIGlmICh2YWx1ZSA9PT0gb2xkVmFsdWUpIHJldHVybjtcbiAgICBjaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgZ2V0Q2hlY2tib3hWYWx1ZShlbCwgdHJ1ZSkpO1xuICB9XG4gIGlmIChlbC5jaGVja2VkICE9PSBjaGVja2VkKSB7XG4gICAgZWwuY2hlY2tlZCA9IGNoZWNrZWQ7XG4gIH1cbn1cbmNvbnN0IHZNb2RlbFJhZGlvID0ge1xuICBjcmVhdGVkKGVsLCB7IHZhbHVlIH0sIHZub2RlKSB7XG4gICAgZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIHZub2RlLnByb3BzLnZhbHVlKTtcbiAgICBlbFthc3NpZ25LZXldID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgXCJjaGFuZ2VcIiwgKCkgPT4ge1xuICAgICAgZWxbYXNzaWduS2V5XShnZXRWYWx1ZShlbCkpO1xuICAgIH0pO1xuICB9LFxuICBiZWZvcmVVcGRhdGUoZWwsIHsgdmFsdWUsIG9sZFZhbHVlIH0sIHZub2RlKSB7XG4gICAgZWxbYXNzaWduS2V5XSA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgIGlmICh2YWx1ZSAhPT0gb2xkVmFsdWUpIHtcbiAgICAgIGVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCB2bm9kZS5wcm9wcy52YWx1ZSk7XG4gICAgfVxuICB9XG59O1xuY29uc3Qgdk1vZGVsU2VsZWN0ID0ge1xuICAvLyA8c2VsZWN0IG11bHRpcGxlPiB2YWx1ZSBuZWVkIHRvIGJlIGRlZXAgdHJhdmVyc2VkXG4gIGRlZXA6IHRydWUsXG4gIGNyZWF0ZWQoZWwsIHsgdmFsdWUsIG1vZGlmaWVyczogeyBudW1iZXIgfSB9LCB2bm9kZSkge1xuICAgIGNvbnN0IGlzU2V0TW9kZWwgPSBpc1NldCh2YWx1ZSk7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgXCJjaGFuZ2VcIiwgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VsZWN0ZWRWYWwgPSBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoZWwub3B0aW9ucywgKG8pID0+IG8uc2VsZWN0ZWQpLm1hcChcbiAgICAgICAgKG8pID0+IG51bWJlciA/IGxvb3NlVG9OdW1iZXIoZ2V0VmFsdWUobykpIDogZ2V0VmFsdWUobylcbiAgICAgICk7XG4gICAgICBlbFthc3NpZ25LZXldKFxuICAgICAgICBlbC5tdWx0aXBsZSA/IGlzU2V0TW9kZWwgPyBuZXcgU2V0KHNlbGVjdGVkVmFsKSA6IHNlbGVjdGVkVmFsIDogc2VsZWN0ZWRWYWxbMF1cbiAgICAgICk7XG4gICAgICBlbC5fYXNzaWduaW5nID0gdHJ1ZTtcbiAgICAgIG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgZWwuX2Fzc2lnbmluZyA9IGZhbHNlO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgZWxbYXNzaWduS2V5XSA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICB9LFxuICAvLyBzZXQgdmFsdWUgaW4gbW91bnRlZCAmIHVwZGF0ZWQgYmVjYXVzZSA8c2VsZWN0PiByZWxpZXMgb24gaXRzIGNoaWxkcmVuXG4gIC8vIDxvcHRpb24+cy5cbiAgbW91bnRlZChlbCwgeyB2YWx1ZSB9KSB7XG4gICAgc2V0U2VsZWN0ZWQoZWwsIHZhbHVlKTtcbiAgfSxcbiAgYmVmb3JlVXBkYXRlKGVsLCBfYmluZGluZywgdm5vZGUpIHtcbiAgICBlbFthc3NpZ25LZXldID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XG4gIH0sXG4gIHVwZGF0ZWQoZWwsIHsgdmFsdWUgfSkge1xuICAgIGlmICghZWwuX2Fzc2lnbmluZykge1xuICAgICAgc2V0U2VsZWN0ZWQoZWwsIHZhbHVlKTtcbiAgICB9XG4gIH1cbn07XG5mdW5jdGlvbiBzZXRTZWxlY3RlZChlbCwgdmFsdWUpIHtcbiAgY29uc3QgaXNNdWx0aXBsZSA9IGVsLm11bHRpcGxlO1xuICBjb25zdCBpc0FycmF5VmFsdWUgPSBpc0FycmF5KHZhbHVlKTtcbiAgaWYgKGlzTXVsdGlwbGUgJiYgIWlzQXJyYXlWYWx1ZSAmJiAhaXNTZXQodmFsdWUpKSB7XG4gICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuKFxuICAgICAgYDxzZWxlY3QgbXVsdGlwbGUgdi1tb2RlbD4gZXhwZWN0cyBhbiBBcnJheSBvciBTZXQgdmFsdWUgZm9yIGl0cyBiaW5kaW5nLCBidXQgZ290ICR7T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKS5zbGljZSg4LCAtMSl9LmBcbiAgICApO1xuICAgIHJldHVybjtcbiAgfVxuICBmb3IgKGxldCBpID0gMCwgbCA9IGVsLm9wdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgY29uc3Qgb3B0aW9uID0gZWwub3B0aW9uc1tpXTtcbiAgICBjb25zdCBvcHRpb25WYWx1ZSA9IGdldFZhbHVlKG9wdGlvbik7XG4gICAgaWYgKGlzTXVsdGlwbGUpIHtcbiAgICAgIGlmIChpc0FycmF5VmFsdWUpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uVHlwZSA9IHR5cGVvZiBvcHRpb25WYWx1ZTtcbiAgICAgICAgaWYgKG9wdGlvblR5cGUgPT09IFwic3RyaW5nXCIgfHwgb3B0aW9uVHlwZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHZhbHVlLnNvbWUoKHYpID0+IFN0cmluZyh2KSA9PT0gU3RyaW5nKG9wdGlvblZhbHVlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gbG9vc2VJbmRleE9mKHZhbHVlLCBvcHRpb25WYWx1ZSkgPiAtMTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdmFsdWUuaGFzKG9wdGlvblZhbHVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGxvb3NlRXF1YWwoZ2V0VmFsdWUob3B0aW9uKSwgdmFsdWUpKSB7XG4gICAgICBpZiAoZWwuc2VsZWN0ZWRJbmRleCAhPT0gaSkgZWwuc2VsZWN0ZWRJbmRleCA9IGk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIGlmICghaXNNdWx0aXBsZSAmJiBlbC5zZWxlY3RlZEluZGV4ICE9PSAtMSkge1xuICAgIGVsLnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0VmFsdWUoZWwpIHtcbiAgcmV0dXJuIFwiX3ZhbHVlXCIgaW4gZWwgPyBlbC5fdmFsdWUgOiBlbC52YWx1ZTtcbn1cbmZ1bmN0aW9uIGdldENoZWNrYm94VmFsdWUoZWwsIGNoZWNrZWQpIHtcbiAgY29uc3Qga2V5ID0gY2hlY2tlZCA/IFwiX3RydWVWYWx1ZVwiIDogXCJfZmFsc2VWYWx1ZVwiO1xuICByZXR1cm4ga2V5IGluIGVsID8gZWxba2V5XSA6IGNoZWNrZWQ7XG59XG5jb25zdCB2TW9kZWxEeW5hbWljID0ge1xuICBjcmVhdGVkKGVsLCBiaW5kaW5nLCB2bm9kZSkge1xuICAgIGNhbGxNb2RlbEhvb2soZWwsIGJpbmRpbmcsIHZub2RlLCBudWxsLCBcImNyZWF0ZWRcIik7XG4gIH0sXG4gIG1vdW50ZWQoZWwsIGJpbmRpbmcsIHZub2RlKSB7XG4gICAgY2FsbE1vZGVsSG9vayhlbCwgYmluZGluZywgdm5vZGUsIG51bGwsIFwibW91bnRlZFwiKTtcbiAgfSxcbiAgYmVmb3JlVXBkYXRlKGVsLCBiaW5kaW5nLCB2bm9kZSwgcHJldlZOb2RlKSB7XG4gICAgY2FsbE1vZGVsSG9vayhlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSwgXCJiZWZvcmVVcGRhdGVcIik7XG4gIH0sXG4gIHVwZGF0ZWQoZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUpIHtcbiAgICBjYWxsTW9kZWxIb29rKGVsLCBiaW5kaW5nLCB2bm9kZSwgcHJldlZOb2RlLCBcInVwZGF0ZWRcIik7XG4gIH1cbn07XG5mdW5jdGlvbiByZXNvbHZlRHluYW1pY01vZGVsKHRhZ05hbWUsIHR5cGUpIHtcbiAgc3dpdGNoICh0YWdOYW1lKSB7XG4gICAgY2FzZSBcIlNFTEVDVFwiOlxuICAgICAgcmV0dXJuIHZNb2RlbFNlbGVjdDtcbiAgICBjYXNlIFwiVEVYVEFSRUFcIjpcbiAgICAgIHJldHVybiB2TW9kZWxUZXh0O1xuICAgIGRlZmF1bHQ6XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBcImNoZWNrYm94XCI6XG4gICAgICAgICAgcmV0dXJuIHZNb2RlbENoZWNrYm94O1xuICAgICAgICBjYXNlIFwicmFkaW9cIjpcbiAgICAgICAgICByZXR1cm4gdk1vZGVsUmFkaW87XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIHZNb2RlbFRleHQ7XG4gICAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGNhbGxNb2RlbEhvb2soZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUsIGhvb2spIHtcbiAgY29uc3QgbW9kZWxUb1VzZSA9IHJlc29sdmVEeW5hbWljTW9kZWwoXG4gICAgZWwudGFnTmFtZSxcbiAgICB2bm9kZS5wcm9wcyAmJiB2bm9kZS5wcm9wcy50eXBlXG4gICk7XG4gIGNvbnN0IGZuID0gbW9kZWxUb1VzZVtob29rXTtcbiAgZm4gJiYgZm4oZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUpO1xufVxuZnVuY3Rpb24gaW5pdFZNb2RlbEZvclNTUigpIHtcbiAgdk1vZGVsVGV4dC5nZXRTU1JQcm9wcyA9ICh7IHZhbHVlIH0pID0+ICh7IHZhbHVlIH0pO1xuICB2TW9kZWxSYWRpby5nZXRTU1JQcm9wcyA9ICh7IHZhbHVlIH0sIHZub2RlKSA9PiB7XG4gICAgaWYgKHZub2RlLnByb3BzICYmIGxvb3NlRXF1YWwodm5vZGUucHJvcHMudmFsdWUsIHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHsgY2hlY2tlZDogdHJ1ZSB9O1xuICAgIH1cbiAgfTtcbiAgdk1vZGVsQ2hlY2tib3guZ2V0U1NSUHJvcHMgPSAoeyB2YWx1ZSB9LCB2bm9kZSkgPT4ge1xuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgaWYgKHZub2RlLnByb3BzICYmIGxvb3NlSW5kZXhPZih2YWx1ZSwgdm5vZGUucHJvcHMudmFsdWUpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIHsgY2hlY2tlZDogdHJ1ZSB9O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNTZXQodmFsdWUpKSB7XG4gICAgICBpZiAodm5vZGUucHJvcHMgJiYgdmFsdWUuaGFzKHZub2RlLnByb3BzLnZhbHVlKSkge1xuICAgICAgICByZXR1cm4geyBjaGVja2VkOiB0cnVlIH07XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHsgY2hlY2tlZDogdHJ1ZSB9O1xuICAgIH1cbiAgfTtcbiAgdk1vZGVsRHluYW1pYy5nZXRTU1JQcm9wcyA9IChiaW5kaW5nLCB2bm9kZSkgPT4ge1xuICAgIGlmICh0eXBlb2Ygdm5vZGUudHlwZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtb2RlbFRvVXNlID0gcmVzb2x2ZUR5bmFtaWNNb2RlbChcbiAgICAgIC8vIHJlc29sdmVEeW5hbWljTW9kZWwgZXhwZWN0cyBhbiB1cHBlcmNhc2UgdGFnIG5hbWUsIGJ1dCB2bm9kZS50eXBlIGlzIGxvd2VyY2FzZVxuICAgICAgdm5vZGUudHlwZS50b1VwcGVyQ2FzZSgpLFxuICAgICAgdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMudHlwZVxuICAgICk7XG4gICAgaWYgKG1vZGVsVG9Vc2UuZ2V0U1NSUHJvcHMpIHtcbiAgICAgIHJldHVybiBtb2RlbFRvVXNlLmdldFNTUlByb3BzKGJpbmRpbmcsIHZub2RlKTtcbiAgICB9XG4gIH07XG59XG5cbmNvbnN0IHN5c3RlbU1vZGlmaWVycyA9IFtcImN0cmxcIiwgXCJzaGlmdFwiLCBcImFsdFwiLCBcIm1ldGFcIl07XG5jb25zdCBtb2RpZmllckd1YXJkcyA9IHtcbiAgc3RvcDogKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCksXG4gIHByZXZlbnQ6IChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCksXG4gIHNlbGY6IChlKSA9PiBlLnRhcmdldCAhPT0gZS5jdXJyZW50VGFyZ2V0LFxuICBjdHJsOiAoZSkgPT4gIWUuY3RybEtleSxcbiAgc2hpZnQ6IChlKSA9PiAhZS5zaGlmdEtleSxcbiAgYWx0OiAoZSkgPT4gIWUuYWx0S2V5LFxuICBtZXRhOiAoZSkgPT4gIWUubWV0YUtleSxcbiAgbGVmdDogKGUpID0+IFwiYnV0dG9uXCIgaW4gZSAmJiBlLmJ1dHRvbiAhPT0gMCxcbiAgbWlkZGxlOiAoZSkgPT4gXCJidXR0b25cIiBpbiBlICYmIGUuYnV0dG9uICE9PSAxLFxuICByaWdodDogKGUpID0+IFwiYnV0dG9uXCIgaW4gZSAmJiBlLmJ1dHRvbiAhPT0gMixcbiAgZXhhY3Q6IChlLCBtb2RpZmllcnMpID0+IHN5c3RlbU1vZGlmaWVycy5zb21lKChtKSA9PiBlW2Ake219S2V5YF0gJiYgIW1vZGlmaWVycy5pbmNsdWRlcyhtKSlcbn07XG5jb25zdCB3aXRoTW9kaWZpZXJzID0gKGZuLCBtb2RpZmllcnMpID0+IHtcbiAgY29uc3QgY2FjaGUgPSBmbi5fd2l0aE1vZHMgfHwgKGZuLl93aXRoTW9kcyA9IHt9KTtcbiAgY29uc3QgY2FjaGVLZXkgPSBtb2RpZmllcnMuam9pbihcIi5cIik7XG4gIHJldHVybiBjYWNoZVtjYWNoZUtleV0gfHwgKGNhY2hlW2NhY2hlS2V5XSA9IChldmVudCwgLi4uYXJncykgPT4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbW9kaWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBndWFyZCA9IG1vZGlmaWVyR3VhcmRzW21vZGlmaWVyc1tpXV07XG4gICAgICBpZiAoZ3VhcmQgJiYgZ3VhcmQoZXZlbnQsIG1vZGlmaWVycykpIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIGZuKGV2ZW50LCAuLi5hcmdzKTtcbiAgfSk7XG59O1xuY29uc3Qga2V5TmFtZXMgPSB7XG4gIGVzYzogXCJlc2NhcGVcIixcbiAgc3BhY2U6IFwiIFwiLFxuICB1cDogXCJhcnJvdy11cFwiLFxuICBsZWZ0OiBcImFycm93LWxlZnRcIixcbiAgcmlnaHQ6IFwiYXJyb3ctcmlnaHRcIixcbiAgZG93bjogXCJhcnJvdy1kb3duXCIsXG4gIGRlbGV0ZTogXCJiYWNrc3BhY2VcIlxufTtcbmNvbnN0IHdpdGhLZXlzID0gKGZuLCBtb2RpZmllcnMpID0+IHtcbiAgY29uc3QgY2FjaGUgPSBmbi5fd2l0aEtleXMgfHwgKGZuLl93aXRoS2V5cyA9IHt9KTtcbiAgY29uc3QgY2FjaGVLZXkgPSBtb2RpZmllcnMuam9pbihcIi5cIik7XG4gIHJldHVybiBjYWNoZVtjYWNoZUtleV0gfHwgKGNhY2hlW2NhY2hlS2V5XSA9IChldmVudCkgPT4ge1xuICAgIGlmICghKFwia2V5XCIgaW4gZXZlbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGV2ZW50S2V5ID0gaHlwaGVuYXRlKGV2ZW50LmtleSk7XG4gICAgaWYgKG1vZGlmaWVycy5zb21lKFxuICAgICAgKGspID0+IGsgPT09IGV2ZW50S2V5IHx8IGtleU5hbWVzW2tdID09PSBldmVudEtleVxuICAgICkpIHtcbiAgICAgIHJldHVybiBmbihldmVudCk7XG4gICAgfVxuICB9KTtcbn07XG5cbmNvbnN0IHJlbmRlcmVyT3B0aW9ucyA9IC8qIEBfX1BVUkVfXyAqLyBleHRlbmQoeyBwYXRjaFByb3AgfSwgbm9kZU9wcyk7XG5sZXQgcmVuZGVyZXI7XG5sZXQgZW5hYmxlZEh5ZHJhdGlvbiA9IGZhbHNlO1xuZnVuY3Rpb24gZW5zdXJlUmVuZGVyZXIoKSB7XG4gIHJldHVybiByZW5kZXJlciB8fCAocmVuZGVyZXIgPSBjcmVhdGVSZW5kZXJlcihyZW5kZXJlck9wdGlvbnMpKTtcbn1cbmZ1bmN0aW9uIGVuc3VyZUh5ZHJhdGlvblJlbmRlcmVyKCkge1xuICByZW5kZXJlciA9IGVuYWJsZWRIeWRyYXRpb24gPyByZW5kZXJlciA6IGNyZWF0ZUh5ZHJhdGlvblJlbmRlcmVyKHJlbmRlcmVyT3B0aW9ucyk7XG4gIGVuYWJsZWRIeWRyYXRpb24gPSB0cnVlO1xuICByZXR1cm4gcmVuZGVyZXI7XG59XG5jb25zdCByZW5kZXIgPSAoLi4uYXJncykgPT4ge1xuICBlbnN1cmVSZW5kZXJlcigpLnJlbmRlciguLi5hcmdzKTtcbn07XG5jb25zdCBoeWRyYXRlID0gKC4uLmFyZ3MpID0+IHtcbiAgZW5zdXJlSHlkcmF0aW9uUmVuZGVyZXIoKS5oeWRyYXRlKC4uLmFyZ3MpO1xufTtcbmNvbnN0IGNyZWF0ZUFwcCA9ICguLi5hcmdzKSA9PiB7XG4gIGNvbnN0IGFwcCA9IGVuc3VyZVJlbmRlcmVyKCkuY3JlYXRlQXBwKC4uLmFyZ3MpO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGluamVjdE5hdGl2ZVRhZ0NoZWNrKGFwcCk7XG4gICAgaW5qZWN0Q29tcGlsZXJPcHRpb25zQ2hlY2soYXBwKTtcbiAgfVxuICBjb25zdCB7IG1vdW50IH0gPSBhcHA7XG4gIGFwcC5tb3VudCA9IChjb250YWluZXJPclNlbGVjdG9yKSA9PiB7XG4gICAgY29uc3QgY29udGFpbmVyID0gbm9ybWFsaXplQ29udGFpbmVyKGNvbnRhaW5lck9yU2VsZWN0b3IpO1xuICAgIGlmICghY29udGFpbmVyKSByZXR1cm47XG4gICAgY29uc3QgY29tcG9uZW50ID0gYXBwLl9jb21wb25lbnQ7XG4gICAgaWYgKCFpc0Z1bmN0aW9uKGNvbXBvbmVudCkgJiYgIWNvbXBvbmVudC5yZW5kZXIgJiYgIWNvbXBvbmVudC50ZW1wbGF0ZSkge1xuICAgICAgY29tcG9uZW50LnRlbXBsYXRlID0gY29udGFpbmVyLmlubmVySFRNTDtcbiAgICB9XG4gICAgaWYgKGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gMSkge1xuICAgICAgY29udGFpbmVyLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB9XG4gICAgY29uc3QgcHJveHkgPSBtb3VudChjb250YWluZXIsIGZhbHNlLCByZXNvbHZlUm9vdE5hbWVzcGFjZShjb250YWluZXIpKTtcbiAgICBpZiAoY29udGFpbmVyIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgY29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZShcInYtY2xvYWtcIik7XG4gICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKFwiZGF0YS12LWFwcFwiLCBcIlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHByb3h5O1xuICB9O1xuICByZXR1cm4gYXBwO1xufTtcbmNvbnN0IGNyZWF0ZVNTUkFwcCA9ICguLi5hcmdzKSA9PiB7XG4gIGNvbnN0IGFwcCA9IGVuc3VyZUh5ZHJhdGlvblJlbmRlcmVyKCkuY3JlYXRlQXBwKC4uLmFyZ3MpO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGluamVjdE5hdGl2ZVRhZ0NoZWNrKGFwcCk7XG4gICAgaW5qZWN0Q29tcGlsZXJPcHRpb25zQ2hlY2soYXBwKTtcbiAgfVxuICBjb25zdCB7IG1vdW50IH0gPSBhcHA7XG4gIGFwcC5tb3VudCA9IChjb250YWluZXJPclNlbGVjdG9yKSA9PiB7XG4gICAgY29uc3QgY29udGFpbmVyID0gbm9ybWFsaXplQ29udGFpbmVyKGNvbnRhaW5lck9yU2VsZWN0b3IpO1xuICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgIHJldHVybiBtb3VudChjb250YWluZXIsIHRydWUsIHJlc29sdmVSb290TmFtZXNwYWNlKGNvbnRhaW5lcikpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIGFwcDtcbn07XG5mdW5jdGlvbiByZXNvbHZlUm9vdE5hbWVzcGFjZShjb250YWluZXIpIHtcbiAgaWYgKGNvbnRhaW5lciBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpIHtcbiAgICByZXR1cm4gXCJzdmdcIjtcbiAgfVxuICBpZiAodHlwZW9mIE1hdGhNTEVsZW1lbnQgPT09IFwiZnVuY3Rpb25cIiAmJiBjb250YWluZXIgaW5zdGFuY2VvZiBNYXRoTUxFbGVtZW50KSB7XG4gICAgcmV0dXJuIFwibWF0aG1sXCI7XG4gIH1cbn1cbmZ1bmN0aW9uIGluamVjdE5hdGl2ZVRhZ0NoZWNrKGFwcCkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYXBwLmNvbmZpZywgXCJpc05hdGl2ZVRhZ1wiLCB7XG4gICAgdmFsdWU6ICh0YWcpID0+IGlzSFRNTFRhZyh0YWcpIHx8IGlzU1ZHVGFnKHRhZykgfHwgaXNNYXRoTUxUYWcodGFnKSxcbiAgICB3cml0YWJsZTogZmFsc2VcbiAgfSk7XG59XG5mdW5jdGlvbiBpbmplY3RDb21waWxlck9wdGlvbnNDaGVjayhhcHApIHtcbiAgaWYgKGlzUnVudGltZU9ubHkoKSkge1xuICAgIGNvbnN0IGlzQ3VzdG9tRWxlbWVudCA9IGFwcC5jb25maWcuaXNDdXN0b21FbGVtZW50O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhcHAuY29uZmlnLCBcImlzQ3VzdG9tRWxlbWVudFwiLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiBpc0N1c3RvbUVsZW1lbnQ7XG4gICAgICB9LFxuICAgICAgc2V0KCkge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgIGBUaGUgXFxgaXNDdXN0b21FbGVtZW50XFxgIGNvbmZpZyBvcHRpb24gaXMgZGVwcmVjYXRlZC4gVXNlIFxcYGNvbXBpbGVyT3B0aW9ucy5pc0N1c3RvbUVsZW1lbnRcXGAgaW5zdGVhZC5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgY29tcGlsZXJPcHRpb25zID0gYXBwLmNvbmZpZy5jb21waWxlck9wdGlvbnM7XG4gICAgY29uc3QgbXNnID0gYFRoZSBcXGBjb21waWxlck9wdGlvbnNcXGAgY29uZmlnIG9wdGlvbiBpcyBvbmx5IHJlc3BlY3RlZCB3aGVuIHVzaW5nIGEgYnVpbGQgb2YgVnVlLmpzIHRoYXQgaW5jbHVkZXMgdGhlIHJ1bnRpbWUgY29tcGlsZXIgKGFrYSBcImZ1bGwgYnVpbGRcIikuIFNpbmNlIHlvdSBhcmUgdXNpbmcgdGhlIHJ1bnRpbWUtb25seSBidWlsZCwgXFxgY29tcGlsZXJPcHRpb25zXFxgIG11c3QgYmUgcGFzc2VkIHRvIFxcYEB2dWUvY29tcGlsZXItZG9tXFxgIGluIHRoZSBidWlsZCBzZXR1cCBpbnN0ZWFkLlxuLSBGb3IgdnVlLWxvYWRlcjogcGFzcyBpdCB2aWEgdnVlLWxvYWRlcidzIFxcYGNvbXBpbGVyT3B0aW9uc1xcYCBsb2FkZXIgb3B0aW9uLlxuLSBGb3IgdnVlLWNsaTogc2VlIGh0dHBzOi8vY2xpLnZ1ZWpzLm9yZy9ndWlkZS93ZWJwYWNrLmh0bWwjbW9kaWZ5aW5nLW9wdGlvbnMtb2YtYS1sb2FkZXJcbi0gRm9yIHZpdGU6IHBhc3MgaXQgdmlhIEB2aXRlanMvcGx1Z2luLXZ1ZSBvcHRpb25zLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3ZpdGVqcy92aXRlLXBsdWdpbi12dWUvdHJlZS9tYWluL3BhY2thZ2VzL3BsdWdpbi12dWUjZXhhbXBsZS1mb3ItcGFzc2luZy1vcHRpb25zLXRvLXZ1ZWNvbXBpbGVyLXNmY2A7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFwcC5jb25maWcsIFwiY29tcGlsZXJPcHRpb25zXCIsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgd2Fybihtc2cpO1xuICAgICAgICByZXR1cm4gY29tcGlsZXJPcHRpb25zO1xuICAgICAgfSxcbiAgICAgIHNldCgpIHtcbiAgICAgICAgd2Fybihtc2cpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5mdW5jdGlvbiBub3JtYWxpemVDb250YWluZXIoY29udGFpbmVyKSB7XG4gIGlmIChpc1N0cmluZyhjb250YWluZXIpKSB7XG4gICAgY29uc3QgcmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXIpO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFyZXMpIHtcbiAgICAgIHdhcm4oXG4gICAgICAgIGBGYWlsZWQgdG8gbW91bnQgYXBwOiBtb3VudCB0YXJnZXQgc2VsZWN0b3IgXCIke2NvbnRhaW5lcn1cIiByZXR1cm5lZCBudWxsLmBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2luZG93LlNoYWRvd1Jvb3QgJiYgY29udGFpbmVyIGluc3RhbmNlb2Ygd2luZG93LlNoYWRvd1Jvb3QgJiYgY29udGFpbmVyLm1vZGUgPT09IFwiY2xvc2VkXCIpIHtcbiAgICB3YXJuKFxuICAgICAgYG1vdW50aW5nIG9uIGEgU2hhZG93Um9vdCB3aXRoIFxcYHttb2RlOiBcImNsb3NlZFwifVxcYCBtYXkgbGVhZCB0byB1bnByZWRpY3RhYmxlIGJ1Z3NgXG4gICAgKTtcbiAgfVxuICByZXR1cm4gY29udGFpbmVyO1xufVxubGV0IHNzckRpcmVjdGl2ZUluaXRpYWxpemVkID0gZmFsc2U7XG5jb25zdCBpbml0RGlyZWN0aXZlc0ZvclNTUiA9ICgpID0+IHtcbiAgaWYgKCFzc3JEaXJlY3RpdmVJbml0aWFsaXplZCkge1xuICAgIHNzckRpcmVjdGl2ZUluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICBpbml0Vk1vZGVsRm9yU1NSKCk7XG4gICAgaW5pdFZTaG93Rm9yU1NSKCk7XG4gIH1cbn0gO1xuXG5leHBvcnQgeyBUcmFuc2l0aW9uLCBUcmFuc2l0aW9uR3JvdXAsIFZ1ZUVsZW1lbnQsIGNyZWF0ZUFwcCwgY3JlYXRlU1NSQXBwLCBkZWZpbmVDdXN0b21FbGVtZW50LCBkZWZpbmVTU1JDdXN0b21FbGVtZW50LCBoeWRyYXRlLCBpbml0RGlyZWN0aXZlc0ZvclNTUiwgcmVuZGVyLCB1c2VDc3NNb2R1bGUsIHVzZUNzc1ZhcnMsIHVzZUhvc3QsIHVzZVNoYWRvd1Jvb3QsIHZNb2RlbENoZWNrYm94LCB2TW9kZWxEeW5hbWljLCB2TW9kZWxSYWRpbywgdk1vZGVsU2VsZWN0LCB2TW9kZWxUZXh0LCB2U2hvdywgd2l0aEtleXMsIHdpdGhNb2RpZmllcnMgfTtcbiIsImltcG9ydCB7IG5leHRUaWNrLCBwdXNoU2NvcGVJZCwgcG9wU2NvcGVJZCwgb3BlbkJsb2NrLCBjcmVhdGVCbG9jaywgd2l0aFNjb3BlSWQgfSBmcm9tICd2dWUnO1xuXG5mdW5jdGlvbiBnZXRJbnRlcm5ldEV4cGxvcmVyVmVyc2lvbigpIHtcbiAgdmFyIHVhID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQ7XG4gIHZhciBtc2llID0gdWEuaW5kZXhPZignTVNJRSAnKTtcblxuICBpZiAobXNpZSA+IDApIHtcbiAgICAvLyBJRSAxMCBvciBvbGRlciA9PiByZXR1cm4gdmVyc2lvbiBudW1iZXJcbiAgICByZXR1cm4gcGFyc2VJbnQodWEuc3Vic3RyaW5nKG1zaWUgKyA1LCB1YS5pbmRleE9mKCcuJywgbXNpZSkpLCAxMCk7XG4gIH1cblxuICB2YXIgdHJpZGVudCA9IHVhLmluZGV4T2YoJ1RyaWRlbnQvJyk7XG5cbiAgaWYgKHRyaWRlbnQgPiAwKSB7XG4gICAgLy8gSUUgMTEgPT4gcmV0dXJuIHZlcnNpb24gbnVtYmVyXG4gICAgdmFyIHJ2ID0gdWEuaW5kZXhPZigncnY6Jyk7XG4gICAgcmV0dXJuIHBhcnNlSW50KHVhLnN1YnN0cmluZyhydiArIDMsIHVhLmluZGV4T2YoJy4nLCBydikpLCAxMCk7XG4gIH1cblxuICB2YXIgZWRnZSA9IHVhLmluZGV4T2YoJ0VkZ2UvJyk7XG5cbiAgaWYgKGVkZ2UgPiAwKSB7XG4gICAgLy8gRWRnZSAoSUUgMTIrKSA9PiByZXR1cm4gdmVyc2lvbiBudW1iZXJcbiAgICByZXR1cm4gcGFyc2VJbnQodWEuc3Vic3RyaW5nKGVkZ2UgKyA1LCB1YS5pbmRleE9mKCcuJywgZWRnZSkpLCAxMCk7XG4gIH0gLy8gb3RoZXIgYnJvd3NlclxuXG5cbiAgcmV0dXJuIC0xO1xufVxuXG5sZXQgaXNJRTtcblxuZnVuY3Rpb24gaW5pdENvbXBhdCAoKSB7XG4gIGlmICghaW5pdENvbXBhdC5pbml0KSB7XG4gICAgaW5pdENvbXBhdC5pbml0ID0gdHJ1ZTtcbiAgICBpc0lFID0gZ2V0SW50ZXJuZXRFeHBsb3JlclZlcnNpb24oKSAhPT0gLTE7XG4gIH1cbn1cblxudmFyIHNjcmlwdCA9IHtcbiAgbmFtZTogJ1Jlc2l6ZU9ic2VydmVyJyxcblxuICBwcm9wczoge1xuICAgIGVtaXRPbk1vdW50OiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgfSxcblxuICAgIGlnbm9yZVdpZHRoOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgfSxcblxuICAgIGlnbm9yZUhlaWdodDoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIH0sXG4gIH0sXG5cbiAgZW1pdHM6IFtcbiAgICAnbm90aWZ5JyxcbiAgXSxcblxuICBtb3VudGVkICgpIHtcbiAgICBpbml0Q29tcGF0KCk7XG4gICAgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgdGhpcy5fdyA9IHRoaXMuJGVsLm9mZnNldFdpZHRoO1xuICAgICAgdGhpcy5faCA9IHRoaXMuJGVsLm9mZnNldEhlaWdodDtcbiAgICAgIGlmICh0aGlzLmVtaXRPbk1vdW50KSB7XG4gICAgICAgIHRoaXMuZW1pdFNpemUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBvYmplY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvYmplY3QnKTtcbiAgICB0aGlzLl9yZXNpemVPYmplY3QgPSBvYmplY3Q7XG4gICAgb2JqZWN0LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgIG9iamVjdC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgLTEpO1xuICAgIG9iamVjdC5vbmxvYWQgPSB0aGlzLmFkZFJlc2l6ZUhhbmRsZXJzO1xuICAgIG9iamVjdC50eXBlID0gJ3RleHQvaHRtbCc7XG4gICAgaWYgKGlzSUUpIHtcbiAgICAgIHRoaXMuJGVsLmFwcGVuZENoaWxkKG9iamVjdCk7XG4gICAgfVxuICAgIG9iamVjdC5kYXRhID0gJ2Fib3V0OmJsYW5rJztcbiAgICBpZiAoIWlzSUUpIHtcbiAgICAgIHRoaXMuJGVsLmFwcGVuZENoaWxkKG9iamVjdCk7XG4gICAgfVxuICB9LFxuXG4gIGJlZm9yZVVubW91bnQgKCkge1xuICAgIHRoaXMucmVtb3ZlUmVzaXplSGFuZGxlcnMoKTtcbiAgfSxcblxuICBtZXRob2RzOiB7XG4gICAgY29tcGFyZUFuZE5vdGlmeSAoKSB7XG4gICAgICBpZiAoKCF0aGlzLmlnbm9yZVdpZHRoICYmIHRoaXMuX3cgIT09IHRoaXMuJGVsLm9mZnNldFdpZHRoKSB8fCAoIXRoaXMuaWdub3JlSGVpZ2h0ICYmIHRoaXMuX2ggIT09IHRoaXMuJGVsLm9mZnNldEhlaWdodCkpIHtcbiAgICAgICAgdGhpcy5fdyA9IHRoaXMuJGVsLm9mZnNldFdpZHRoO1xuICAgICAgICB0aGlzLl9oID0gdGhpcy4kZWwub2Zmc2V0SGVpZ2h0O1xuICAgICAgICB0aGlzLmVtaXRTaXplKCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGVtaXRTaXplICgpIHtcbiAgICAgIHRoaXMuJGVtaXQoJ25vdGlmeScsIHtcbiAgICAgICAgd2lkdGg6IHRoaXMuX3csXG4gICAgICAgIGhlaWdodDogdGhpcy5faCxcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBhZGRSZXNpemVIYW5kbGVycyAoKSB7XG4gICAgICB0aGlzLl9yZXNpemVPYmplY3QuY29udGVudERvY3VtZW50LmRlZmF1bHRWaWV3LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuY29tcGFyZUFuZE5vdGlmeSk7XG4gICAgICB0aGlzLmNvbXBhcmVBbmROb3RpZnkoKTtcbiAgICB9LFxuXG4gICAgcmVtb3ZlUmVzaXplSGFuZGxlcnMgKCkge1xuICAgICAgaWYgKHRoaXMuX3Jlc2l6ZU9iamVjdCAmJiB0aGlzLl9yZXNpemVPYmplY3Qub25sb2FkKSB7XG4gICAgICAgIGlmICghaXNJRSAmJiB0aGlzLl9yZXNpemVPYmplY3QuY29udGVudERvY3VtZW50KSB7XG4gICAgICAgICAgdGhpcy5fcmVzaXplT2JqZWN0LmNvbnRlbnREb2N1bWVudC5kZWZhdWx0Vmlldy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmNvbXBhcmVBbmROb3RpZnkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJGVsLnJlbW92ZUNoaWxkKHRoaXMuX3Jlc2l6ZU9iamVjdCk7XG4gICAgICAgIHRoaXMuX3Jlc2l6ZU9iamVjdC5vbmxvYWQgPSBudWxsO1xuICAgICAgICB0aGlzLl9yZXNpemVPYmplY3QgPSBudWxsO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG59O1xuXG5jb25zdCBfd2l0aElkID0gLyojX19QVVJFX18qL3dpdGhTY29wZUlkKFwiZGF0YS12LWIzMjllZTRjXCIpO1xuXG5wdXNoU2NvcGVJZChcImRhdGEtdi1iMzI5ZWU0Y1wiKTtcbmNvbnN0IF9ob2lzdGVkXzEgPSB7XG4gIGNsYXNzOiBcInJlc2l6ZS1vYnNlcnZlclwiLFxuICB0YWJpbmRleDogXCItMVwiXG59O1xucG9wU2NvcGVJZCgpO1xuXG5jb25zdCByZW5kZXIgPSAvKiNfX1BVUkVfXyovX3dpdGhJZCgoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSA9PiB7XG4gIHJldHVybiAob3BlbkJsb2NrKCksIGNyZWF0ZUJsb2NrKFwiZGl2XCIsIF9ob2lzdGVkXzEpKVxufSk7XG5cbnNjcmlwdC5yZW5kZXIgPSByZW5kZXI7XG5zY3JpcHQuX19zY29wZUlkID0gXCJkYXRhLXYtYjMyOWVlNGNcIjtcbnNjcmlwdC5fX2ZpbGUgPSBcInNyYy9jb21wb25lbnRzL1Jlc2l6ZU9ic2VydmVyLnZ1ZVwiO1xuXG5mdW5jdGlvbiBpbnN0YWxsKGFwcCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdnVlL2NvbXBvbmVudC1kZWZpbml0aW9uLW5hbWUtY2FzaW5nXG4gIGFwcC5jb21wb25lbnQoJ3Jlc2l6ZS1vYnNlcnZlcicsIHNjcmlwdCk7XG4gIGFwcC5jb21wb25lbnQoJ1Jlc2l6ZU9ic2VydmVyJywgc2NyaXB0KTtcbn1cblxudmFyIHBsdWdpbiA9IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gIHZlcnNpb246IFwiMi4wLjAtYWxwaGEuMVwiLFxuICBpbnN0YWxsOiBpbnN0YWxsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBwbHVnaW47XG5leHBvcnQgeyBzY3JpcHQgYXMgUmVzaXplT2JzZXJ2ZXIsIGluc3RhbGwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZ1ZS1yZXNpemUuZXNtLmpzLm1hcFxuIiwiaW1wb3J0IHsgbmV4dFRpY2sgfSBmcm9tICd2dWUnO1xuXG5mdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7XG5cbiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7XG4gICAgX3R5cGVvZiA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgIHJldHVybiB0eXBlb2Ygb2JqO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgX3R5cGVvZiA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gX3R5cGVvZihvYmopO1xufVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICByZXR1cm4gQ29uc3RydWN0b3I7XG59XG5cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHtcbiAgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTtcbn1cblxuZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyKTtcbn1cblxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7XG4gIGlmICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpO1xufVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7XG4gIGlmICghbykgcmV0dXJuO1xuICBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xuICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7XG4gIGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7XG4gIGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pO1xuICBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG59XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7XG4gIGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTtcblxuICByZXR1cm4gYXJyMjtcbn1cblxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc09wdGlvbnModmFsdWUpIHtcbiAgdmFyIG9wdGlvbnM7XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIFNpbXBsZSBvcHRpb25zIChjYWxsYmFjay1vbmx5KVxuICAgIG9wdGlvbnMgPSB7XG4gICAgICBjYWxsYmFjazogdmFsdWVcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIE9wdGlvbnMgb2JqZWN0XG4gICAgb3B0aW9ucyA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG9wdGlvbnM7XG59XG5mdW5jdGlvbiB0aHJvdHRsZShjYWxsYmFjaywgZGVsYXkpIHtcbiAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICB2YXIgdGltZW91dDtcbiAgdmFyIGxhc3RTdGF0ZTtcbiAgdmFyIGN1cnJlbnRBcmdzO1xuXG4gIHZhciB0aHJvdHRsZWQgPSBmdW5jdGlvbiB0aHJvdHRsZWQoc3RhdGUpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICBjdXJyZW50QXJncyA9IGFyZ3M7XG4gICAgaWYgKHRpbWVvdXQgJiYgc3RhdGUgPT09IGxhc3RTdGF0ZSkgcmV0dXJuO1xuICAgIHZhciBsZWFkaW5nID0gb3B0aW9ucy5sZWFkaW5nO1xuXG4gICAgaWYgKHR5cGVvZiBsZWFkaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBsZWFkaW5nID0gbGVhZGluZyhzdGF0ZSwgbGFzdFN0YXRlKTtcbiAgICB9XG5cbiAgICBpZiAoKCF0aW1lb3V0IHx8IHN0YXRlICE9PSBsYXN0U3RhdGUpICYmIGxlYWRpbmcpIHtcbiAgICAgIGNhbGxiYWNrLmFwcGx5KHZvaWQgMCwgW3N0YXRlXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGN1cnJlbnRBcmdzKSkpO1xuICAgIH1cblxuICAgIGxhc3RTdGF0ZSA9IHN0YXRlO1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBjYWxsYmFjay5hcHBseSh2b2lkIDAsIFtzdGF0ZV0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShjdXJyZW50QXJncykpKTtcbiAgICAgIHRpbWVvdXQgPSAwO1xuICAgIH0sIGRlbGF5KTtcbiAgfTtcblxuICB0aHJvdHRsZWQuX2NsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICB0aW1lb3V0ID0gbnVsbDtcbiAgfTtcblxuICByZXR1cm4gdGhyb3R0bGVkO1xufVxuZnVuY3Rpb24gZGVlcEVxdWFsKHZhbDEsIHZhbDIpIHtcbiAgaWYgKHZhbDEgPT09IHZhbDIpIHJldHVybiB0cnVlO1xuXG4gIGlmIChfdHlwZW9mKHZhbDEpID09PSAnb2JqZWN0Jykge1xuICAgIGZvciAodmFyIGtleSBpbiB2YWwxKSB7XG4gICAgICBpZiAoIWRlZXBFcXVhbCh2YWwxW2tleV0sIHZhbDJba2V5XSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG52YXIgVmlzaWJpbGl0eVN0YXRlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gVmlzaWJpbGl0eVN0YXRlKGVsLCBvcHRpb25zLCB2bm9kZSkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWaXNpYmlsaXR5U3RhdGUpO1xuXG4gICAgdGhpcy5lbCA9IGVsO1xuICAgIHRoaXMub2JzZXJ2ZXIgPSBudWxsO1xuICAgIHRoaXMuZnJvemVuID0gZmFsc2U7XG4gICAgdGhpcy5jcmVhdGVPYnNlcnZlcihvcHRpb25zLCB2bm9kZSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoVmlzaWJpbGl0eVN0YXRlLCBbe1xuICAgIGtleTogXCJjcmVhdGVPYnNlcnZlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVPYnNlcnZlcihvcHRpb25zLCB2bm9kZSkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMub2JzZXJ2ZXIpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95T2JzZXJ2ZXIoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZnJvemVuKSByZXR1cm47XG4gICAgICB0aGlzLm9wdGlvbnMgPSBwcm9jZXNzT3B0aW9ucyhvcHRpb25zKTtcblxuICAgICAgdGhpcy5jYWxsYmFjayA9IGZ1bmN0aW9uIChyZXN1bHQsIGVudHJ5KSB7XG4gICAgICAgIF90aGlzLm9wdGlvbnMuY2FsbGJhY2socmVzdWx0LCBlbnRyeSk7XG5cbiAgICAgICAgaWYgKHJlc3VsdCAmJiBfdGhpcy5vcHRpb25zLm9uY2UpIHtcbiAgICAgICAgICBfdGhpcy5mcm96ZW4gPSB0cnVlO1xuXG4gICAgICAgICAgX3RoaXMuZGVzdHJveU9ic2VydmVyKCk7XG4gICAgICAgIH1cbiAgICAgIH07IC8vIFRocm90dGxlXG5cblxuICAgICAgaWYgKHRoaXMuY2FsbGJhY2sgJiYgdGhpcy5vcHRpb25zLnRocm90dGxlKSB7XG4gICAgICAgIHZhciBfcmVmID0gdGhpcy5vcHRpb25zLnRocm90dGxlT3B0aW9ucyB8fCB7fSxcbiAgICAgICAgICAgIF9sZWFkaW5nID0gX3JlZi5sZWFkaW5nO1xuXG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSB0aHJvdHRsZSh0aGlzLmNhbGxiYWNrLCB0aGlzLm9wdGlvbnMudGhyb3R0bGUsIHtcbiAgICAgICAgICBsZWFkaW5nOiBmdW5jdGlvbiBsZWFkaW5nKHN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gX2xlYWRpbmcgPT09ICdib3RoJyB8fCBfbGVhZGluZyA9PT0gJ3Zpc2libGUnICYmIHN0YXRlIHx8IF9sZWFkaW5nID09PSAnaGlkZGVuJyAmJiAhc3RhdGU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5vbGRSZXN1bHQgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLm9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChlbnRyaWVzKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IGVudHJpZXNbMF07XG5cbiAgICAgICAgaWYgKGVudHJpZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIHZhciBpbnRlcnNlY3RpbmdFbnRyeSA9IGVudHJpZXMuZmluZChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGUuaXNJbnRlcnNlY3Rpbmc7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoaW50ZXJzZWN0aW5nRW50cnkpIHtcbiAgICAgICAgICAgIGVudHJ5ID0gaW50ZXJzZWN0aW5nRW50cnk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF90aGlzLmNhbGxiYWNrKSB7XG4gICAgICAgICAgLy8gVXNlIGlzSW50ZXJzZWN0aW5nIGlmIHBvc3NpYmxlIGJlY2F1c2UgYnJvd3NlcnMgY2FuIHJlcG9ydCBpc0ludGVyc2VjdGluZyBhcyB0cnVlLCBidXQgaW50ZXJzZWN0aW9uUmF0aW8gYXMgMCwgd2hlbiBzb21ldGhpbmcgdmVyeSBzbG93bHkgZW50ZXJzIHRoZSB2aWV3cG9ydC5cbiAgICAgICAgICB2YXIgcmVzdWx0ID0gZW50cnkuaXNJbnRlcnNlY3RpbmcgJiYgZW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gPj0gX3RoaXMudGhyZXNob2xkO1xuICAgICAgICAgIGlmIChyZXN1bHQgPT09IF90aGlzLm9sZFJlc3VsdCkgcmV0dXJuO1xuICAgICAgICAgIF90aGlzLm9sZFJlc3VsdCA9IHJlc3VsdDtcblxuICAgICAgICAgIF90aGlzLmNhbGxiYWNrKHJlc3VsdCwgZW50cnkpO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzLm9wdGlvbnMuaW50ZXJzZWN0aW9uKTsgLy8gV2FpdCBmb3IgdGhlIGVsZW1lbnQgdG8gYmUgaW4gZG9jdW1lbnRcblxuICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoX3RoaXMub2JzZXJ2ZXIpIHtcbiAgICAgICAgICBfdGhpcy5vYnNlcnZlci5vYnNlcnZlKF90aGlzLmVsKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImRlc3Ryb3lPYnNlcnZlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95T2JzZXJ2ZXIoKSB7XG4gICAgICBpZiAodGhpcy5vYnNlcnZlcikge1xuICAgICAgICB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG51bGw7XG4gICAgICB9IC8vIENhbmNlbCB0aHJvdHRsZWQgY2FsbFxuXG5cbiAgICAgIGlmICh0aGlzLmNhbGxiYWNrICYmIHRoaXMuY2FsbGJhY2suX2NsZWFyKSB7XG4gICAgICAgIHRoaXMuY2FsbGJhY2suX2NsZWFyKCk7XG5cbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInRocmVzaG9sZFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5pbnRlcnNlY3Rpb24gJiYgdHlwZW9mIHRoaXMub3B0aW9ucy5pbnRlcnNlY3Rpb24udGhyZXNob2xkID09PSAnbnVtYmVyJyA/IHRoaXMub3B0aW9ucy5pbnRlcnNlY3Rpb24udGhyZXNob2xkIDogMDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gVmlzaWJpbGl0eVN0YXRlO1xufSgpO1xuXG5mdW5jdGlvbiBiZWZvcmVNb3VudChlbCwgX3JlZjIsIHZub2RlKSB7XG4gIHZhciB2YWx1ZSA9IF9yZWYyLnZhbHVlO1xuICBpZiAoIXZhbHVlKSByZXR1cm47XG5cbiAgaWYgKHR5cGVvZiBJbnRlcnNlY3Rpb25PYnNlcnZlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBjb25zb2xlLndhcm4oJ1t2dWUtb2JzZXJ2ZS12aXNpYmlsaXR5XSBJbnRlcnNlY3Rpb25PYnNlcnZlciBBUEkgaXMgbm90IGF2YWlsYWJsZSBpbiB5b3VyIGJyb3dzZXIuIFBsZWFzZSBpbnN0YWxsIHRoaXMgcG9seWZpbGw6IGh0dHBzOi8vZ2l0aHViLmNvbS93M2MvSW50ZXJzZWN0aW9uT2JzZXJ2ZXIvdHJlZS9tYXN0ZXIvcG9seWZpbGwnKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgc3RhdGUgPSBuZXcgVmlzaWJpbGl0eVN0YXRlKGVsLCB2YWx1ZSwgdm5vZGUpO1xuICAgIGVsLl92dWVfdmlzaWJpbGl0eVN0YXRlID0gc3RhdGU7XG4gIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlZChlbCwgX3JlZjMsIHZub2RlKSB7XG4gIHZhciB2YWx1ZSA9IF9yZWYzLnZhbHVlLFxuICAgICAgb2xkVmFsdWUgPSBfcmVmMy5vbGRWYWx1ZTtcbiAgaWYgKGRlZXBFcXVhbCh2YWx1ZSwgb2xkVmFsdWUpKSByZXR1cm47XG4gIHZhciBzdGF0ZSA9IGVsLl92dWVfdmlzaWJpbGl0eVN0YXRlO1xuXG4gIGlmICghdmFsdWUpIHtcbiAgICB1bm1vdW50ZWQoZWwpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChzdGF0ZSkge1xuICAgIHN0YXRlLmNyZWF0ZU9ic2VydmVyKHZhbHVlLCB2bm9kZSk7XG4gIH0gZWxzZSB7XG4gICAgYmVmb3JlTW91bnQoZWwsIHtcbiAgICAgIHZhbHVlOiB2YWx1ZVxuICAgIH0sIHZub2RlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB1bm1vdW50ZWQoZWwpIHtcbiAgdmFyIHN0YXRlID0gZWwuX3Z1ZV92aXNpYmlsaXR5U3RhdGU7XG5cbiAgaWYgKHN0YXRlKSB7XG4gICAgc3RhdGUuZGVzdHJveU9ic2VydmVyKCk7XG4gICAgZGVsZXRlIGVsLl92dWVfdmlzaWJpbGl0eVN0YXRlO1xuICB9XG59XG5cbnZhciBPYnNlcnZlVmlzaWJpbGl0eSA9IHtcbiAgYmVmb3JlTW91bnQ6IGJlZm9yZU1vdW50LFxuICB1cGRhdGVkOiB1cGRhdGVkLFxuICB1bm1vdW50ZWQ6IHVubW91bnRlZFxufTtcblxuZnVuY3Rpb24gaW5zdGFsbChhcHApIHtcbiAgYXBwLmRpcmVjdGl2ZSgnb2JzZXJ2ZS12aXNpYmlsaXR5JywgT2JzZXJ2ZVZpc2liaWxpdHkpO1xuICAvKiAtLSBBZGQgbW9yZSBjb21wb25lbnRzIGhlcmUgLS0gKi9cbn1cbi8qIC0tIFBsdWdpbiBkZWZpbml0aW9uICYgQXV0by1pbnN0YWxsIC0tICovXG5cbi8qIFlvdSBzaG91bGRuJ3QgaGF2ZSB0byBtb2RpZnkgdGhlIGNvZGUgYmVsb3cgKi9cbi8vIFBsdWdpblxuXG52YXIgcGx1Z2luID0ge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgdmVyc2lvbjogXCIyLjAuMC1hbHBoYS4xXCIsXG4gIGluc3RhbGw6IGluc3RhbGxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHBsdWdpbjtcbmV4cG9ydCB7IE9ic2VydmVWaXNpYmlsaXR5LCBpbnN0YWxsIH07XG4iLCJpbXBvcnQgeyBtYXJrUmF3LCBzaGFsbG93UmVhY3RpdmUsIHJlc29sdmVDb21wb25lbnQsIHJlc29sdmVEaXJlY3RpdmUsIHdpdGhEaXJlY3RpdmVzLCBvcGVuQmxvY2ssIGNyZWF0ZUVsZW1lbnRCbG9jaywgbm9ybWFsaXplQ2xhc3MsIHJlbmRlclNsb3QsIGNyZWF0ZUNvbW1lbnRWTm9kZSwgY3JlYXRlQmxvY2ssIHJlc29sdmVEeW5hbWljQ29tcG9uZW50LCBub3JtYWxpemVTdHlsZSwgd2l0aEN0eCwgRnJhZ21lbnQsIHJlbmRlckxpc3QsIG1lcmdlUHJvcHMsIHRvSGFuZGxlcnMsIGNyZWF0ZVZOb2RlLCBub3JtYWxpemVQcm9wcywgZ3VhcmRSZWFjdGl2ZVByb3BzLCBoLCByZWFjdGl2ZSB9IGZyb20gJ3Z1ZSc7XG5pbXBvcnQgeyBSZXNpemVPYnNlcnZlciBhcyBSZXNpemVPYnNlcnZlciQxIH0gZnJvbSAndnVlLXJlc2l6ZSc7XG5pbXBvcnQgeyBPYnNlcnZlVmlzaWJpbGl0eSB9IGZyb20gJ3Z1ZS1vYnNlcnZlLXZpc2liaWxpdHknO1xuaW1wb3J0IG1pdHQgZnJvbSAnbWl0dCc7XG5cbnZhciBjb25maWcgPSB7XG4gIGl0ZW1zTGltaXQ6IDEwMDBcbn07XG5cbi8vIEZvcmsgb2YgaHR0cHM6Ly9naXRodWIuY29tL29sYWhvbC9zY3JvbGxwYXJlbnQuanMgdG8gYmUgYWJsZSB0byBidWlsZCB3aXRoIFJvbGx1cFxuXG52YXIgcmVnZXggPSAvKGF1dG98c2Nyb2xsKS87XG5mdW5jdGlvbiBwYXJlbnRzKG5vZGUsIHBzKSB7XG4gIGlmIChub2RlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gcHM7XG4gIH1cbiAgcmV0dXJuIHBhcmVudHMobm9kZS5wYXJlbnROb2RlLCBwcy5jb25jYXQoW25vZGVdKSk7XG59XG52YXIgc3R5bGUgPSBmdW5jdGlvbiBzdHlsZShub2RlLCBwcm9wKSB7XG4gIHJldHVybiBnZXRDb21wdXRlZFN0eWxlKG5vZGUsIG51bGwpLmdldFByb3BlcnR5VmFsdWUocHJvcCk7XG59O1xudmFyIG92ZXJmbG93ID0gZnVuY3Rpb24gb3ZlcmZsb3cobm9kZSkge1xuICByZXR1cm4gc3R5bGUobm9kZSwgJ292ZXJmbG93JykgKyBzdHlsZShub2RlLCAnb3ZlcmZsb3cteScpICsgc3R5bGUobm9kZSwgJ292ZXJmbG93LXgnKTtcbn07XG52YXIgc2Nyb2xsID0gZnVuY3Rpb24gc2Nyb2xsKG5vZGUpIHtcbiAgcmV0dXJuIHJlZ2V4LnRlc3Qob3ZlcmZsb3cobm9kZSkpO1xufTtcbmZ1bmN0aW9uIGdldFNjcm9sbFBhcmVudChub2RlKSB7XG4gIGlmICghKG5vZGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fCBub2RlIGluc3RhbmNlb2YgU1ZHRWxlbWVudCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHBzID0gcGFyZW50cyhub2RlLnBhcmVudE5vZGUsIFtdKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGlmIChzY3JvbGwocHNbaV0pKSB7XG4gICAgICByZXR1cm4gcHNbaV07XG4gICAgfVxuICB9XG4gIHJldHVybiBkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbn1cblxuZnVuY3Rpb24gX3R5cGVvZihvYmopIHtcbiAgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiO1xuXG4gIHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqO1xuICB9IDogZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiBvYmogJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7XG4gIH0sIF90eXBlb2Yob2JqKTtcbn1cblxudmFyIHByb3BzID0ge1xuICBpdGVtczoge1xuICAgIHR5cGU6IEFycmF5LFxuICAgIHJlcXVpcmVkOiB0cnVlXG4gIH0sXG4gIGtleUZpZWxkOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6ICdpZCdcbiAgfSxcbiAgZGlyZWN0aW9uOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6ICd2ZXJ0aWNhbCcsXG4gICAgdmFsaWRhdG9yOiBmdW5jdGlvbiB2YWxpZGF0b3IodmFsdWUpIHtcbiAgICAgIHJldHVybiBbJ3ZlcnRpY2FsJywgJ2hvcml6b250YWwnXS5pbmNsdWRlcyh2YWx1ZSk7XG4gICAgfVxuICB9LFxuICBsaXN0VGFnOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6ICdkaXYnXG4gIH0sXG4gIGl0ZW1UYWc6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogJ2RpdidcbiAgfVxufTtcbmZ1bmN0aW9uIHNpbXBsZUFycmF5KCkge1xuICByZXR1cm4gdGhpcy5pdGVtcy5sZW5ndGggJiYgX3R5cGVvZih0aGlzLml0ZW1zWzBdKSAhPT0gJ29iamVjdCc7XG59XG5cbnZhciBzdXBwb3J0c1Bhc3NpdmUgPSBmYWxzZTtcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICBzdXBwb3J0c1Bhc3NpdmUgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICB2YXIgb3B0cyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3Bhc3NpdmUnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgc3VwcG9ydHNQYXNzaXZlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGVzdCcsIG51bGwsIG9wdHMpO1xuICB9IGNhdGNoIChlKSB7fVxufVxuXG5sZXQgdWlkID0gMDtcblxudmFyIHNjcmlwdCQyID0ge1xuICBuYW1lOiAnUmVjeWNsZVNjcm9sbGVyJyxcblxuICBjb21wb25lbnRzOiB7XG4gICAgUmVzaXplT2JzZXJ2ZXI6IFJlc2l6ZU9ic2VydmVyJDEsXG4gIH0sXG5cbiAgZGlyZWN0aXZlczoge1xuICAgIE9ic2VydmVWaXNpYmlsaXR5LFxuICB9LFxuXG4gIHByb3BzOiB7XG4gICAgLi4ucHJvcHMsXG5cbiAgICBpdGVtU2l6ZToge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICB9LFxuXG4gICAgZ3JpZEl0ZW1zOiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBkZWZhdWx0OiB1bmRlZmluZWQsXG4gICAgfSxcblxuICAgIGl0ZW1TZWNvbmRhcnlTaXplOiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBkZWZhdWx0OiB1bmRlZmluZWQsXG4gICAgfSxcblxuICAgIG1pbkl0ZW1TaXplOiB7XG4gICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLFxuICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICB9LFxuXG4gICAgc2l6ZUZpZWxkOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnc2l6ZScsXG4gICAgfSxcblxuICAgIHR5cGVGaWVsZDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogJ3R5cGUnLFxuICAgIH0sXG5cbiAgICBidWZmZXI6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIGRlZmF1bHQ6IDIwMCxcbiAgICB9LFxuXG4gICAgcGFnZU1vZGU6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB9LFxuXG4gICAgcHJlcmVuZGVyOiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBkZWZhdWx0OiAwLFxuICAgIH0sXG5cbiAgICBlbWl0VXBkYXRlOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgfSxcblxuICAgIHVwZGF0ZUludGVydmFsOiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBkZWZhdWx0OiAwLFxuICAgIH0sXG5cbiAgICBza2lwSG92ZXI6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB9LFxuXG4gICAgbGlzdFRhZzoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogJ2RpdicsXG4gICAgfSxcblxuICAgIGl0ZW1UYWc6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6ICdkaXYnLFxuICAgIH0sXG5cbiAgICBsaXN0Q2xhc3M6IHtcbiAgICAgIHR5cGU6IFtTdHJpbmcsIE9iamVjdCwgQXJyYXldLFxuICAgICAgZGVmYXVsdDogJycsXG4gICAgfSxcblxuICAgIGl0ZW1DbGFzczoge1xuICAgICAgdHlwZTogW1N0cmluZywgT2JqZWN0LCBBcnJheV0sXG4gICAgICBkZWZhdWx0OiAnJyxcbiAgICB9LFxuICB9LFxuXG4gIGVtaXRzOiBbXG4gICAgJ3Jlc2l6ZScsXG4gICAgJ3Zpc2libGUnLFxuICAgICdoaWRkZW4nLFxuICAgICd1cGRhdGUnLFxuICAgICdzY3JvbGwtc3RhcnQnLFxuICAgICdzY3JvbGwtZW5kJyxcbiAgXSxcblxuICBkYXRhICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcG9vbDogW10sXG4gICAgICB0b3RhbFNpemU6IDAsXG4gICAgICByZWFkeTogZmFsc2UsXG4gICAgICBob3ZlcktleTogbnVsbCxcbiAgICB9XG4gIH0sXG5cbiAgY29tcHV0ZWQ6IHtcbiAgICBzaXplcyAoKSB7XG4gICAgICBpZiAodGhpcy5pdGVtU2l6ZSA9PT0gbnVsbCkge1xuICAgICAgICBjb25zdCBzaXplcyA9IHtcbiAgICAgICAgICAnLTEnOiB7IGFjY3VtdWxhdG9yOiAwIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5pdGVtcztcbiAgICAgICAgY29uc3QgZmllbGQgPSB0aGlzLnNpemVGaWVsZDtcbiAgICAgICAgY29uc3QgbWluSXRlbVNpemUgPSB0aGlzLm1pbkl0ZW1TaXplO1xuICAgICAgICBsZXQgY29tcHV0ZWRNaW5TaXplID0gMTAwMDA7XG4gICAgICAgIGxldCBhY2N1bXVsYXRvciA9IDA7XG4gICAgICAgIGxldCBjdXJyZW50O1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGl0ZW1zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIGN1cnJlbnQgPSBpdGVtc1tpXVtmaWVsZF0gfHwgbWluSXRlbVNpemU7XG4gICAgICAgICAgaWYgKGN1cnJlbnQgPCBjb21wdXRlZE1pblNpemUpIHtcbiAgICAgICAgICAgIGNvbXB1dGVkTWluU2l6ZSA9IGN1cnJlbnQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFjY3VtdWxhdG9yICs9IGN1cnJlbnQ7XG4gICAgICAgICAgc2l6ZXNbaV0gPSB7IGFjY3VtdWxhdG9yLCBzaXplOiBjdXJyZW50IH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgIHRoaXMuJF9jb21wdXRlZE1pbkl0ZW1TaXplID0gY29tcHV0ZWRNaW5TaXplO1xuICAgICAgICByZXR1cm4gc2l6ZXNcbiAgICAgIH1cbiAgICAgIHJldHVybiBbXVxuICAgIH0sXG5cbiAgICBzaW1wbGVBcnJheSxcblxuICAgIGl0ZW1JbmRleEJ5S2V5ICgpIHtcbiAgICAgIGNvbnN0IHsga2V5RmllbGQsIGl0ZW1zIH0gPSB0aGlzO1xuICAgICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGl0ZW1zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICByZXN1bHRbaXRlbXNbaV1ba2V5RmllbGRdXSA9IGk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfSxcbiAgfSxcblxuICB3YXRjaDoge1xuICAgIGl0ZW1zICgpIHtcbiAgICAgIHRoaXMudXBkYXRlVmlzaWJsZUl0ZW1zKHRydWUpO1xuICAgIH0sXG5cbiAgICBwYWdlTW9kZSAoKSB7XG4gICAgICB0aGlzLmFwcGx5UGFnZU1vZGUoKTtcbiAgICAgIHRoaXMudXBkYXRlVmlzaWJsZUl0ZW1zKGZhbHNlKTtcbiAgICB9LFxuXG4gICAgc2l6ZXM6IHtcbiAgICAgIGhhbmRsZXIgKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVZpc2libGVJdGVtcyhmYWxzZSk7XG4gICAgICB9LFxuICAgICAgZGVlcDogdHJ1ZSxcbiAgICB9LFxuXG4gICAgZ3JpZEl0ZW1zICgpIHtcbiAgICAgIHRoaXMudXBkYXRlVmlzaWJsZUl0ZW1zKHRydWUpO1xuICAgIH0sXG5cbiAgICBpdGVtU2Vjb25kYXJ5U2l6ZSAoKSB7XG4gICAgICB0aGlzLnVwZGF0ZVZpc2libGVJdGVtcyh0cnVlKTtcbiAgICB9LFxuICB9LFxuXG4gIGNyZWF0ZWQgKCkge1xuICAgIHRoaXMuJF9zdGFydEluZGV4ID0gMDtcbiAgICB0aGlzLiRfZW5kSW5kZXggPSAwO1xuICAgIHRoaXMuJF92aWV3cyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLiRfdW51c2VkVmlld3MgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy4kX3Njcm9sbERpcnR5ID0gZmFsc2U7XG4gICAgdGhpcy4kX2xhc3RVcGRhdGVTY3JvbGxQb3NpdGlvbiA9IDA7XG5cbiAgICAvLyBJbiBTU1IgbW9kZSwgd2UgYWxzbyBwcmVyZW5kZXIgdGhlIHNhbWUgbnVtYmVyIG9mIGl0ZW0gZm9yIHRoZSBmaXJzdCByZW5kZXJcbiAgICAvLyB0byBhdm9pciBtaXNtYXRjaCBiZXR3ZWVuIHNlcnZlciBhbmQgY2xpZW50IHRlbXBsYXRlc1xuICAgIGlmICh0aGlzLnByZXJlbmRlcikge1xuICAgICAgdGhpcy4kX3ByZXJlbmRlciA9IHRydWU7XG4gICAgICB0aGlzLnVwZGF0ZVZpc2libGVJdGVtcyhmYWxzZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZ3JpZEl0ZW1zICYmICF0aGlzLml0ZW1TaXplKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbdnVlLXJlY3ljbGUtc2Nyb2xsZXJdIFlvdSBtdXN0IHByb3ZpZGUgYW4gaXRlbVNpemUgd2hlbiB1c2luZyBncmlkSXRlbXMnKTtcbiAgICB9XG4gIH0sXG5cbiAgbW91bnRlZCAoKSB7XG4gICAgdGhpcy5hcHBseVBhZ2VNb2RlKCk7XG4gICAgdGhpcy4kbmV4dFRpY2soKCkgPT4ge1xuICAgICAgLy8gSW4gU1NSIG1vZGUsIHJlbmRlciB0aGUgcmVhbCBudW1iZXIgb2YgdmlzaWJsZSBpdGVtc1xuICAgICAgdGhpcy4kX3ByZXJlbmRlciA9IGZhbHNlO1xuICAgICAgdGhpcy51cGRhdGVWaXNpYmxlSXRlbXModHJ1ZSk7XG4gICAgICB0aGlzLnJlYWR5ID0gdHJ1ZTtcbiAgICB9KTtcbiAgfSxcblxuICBhY3RpdmF0ZWQgKCkge1xuICAgIGNvbnN0IGxhc3RQb3NpdGlvbiA9IHRoaXMuJF9sYXN0VXBkYXRlU2Nyb2xsUG9zaXRpb247XG4gICAgaWYgKHR5cGVvZiBsYXN0UG9zaXRpb24gPT09ICdudW1iZXInKSB7XG4gICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9Qb3NpdGlvbihsYXN0UG9zaXRpb24pO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIGJlZm9yZVVubW91bnQgKCkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXJzKCk7XG4gIH0sXG5cbiAgbWV0aG9kczoge1xuICAgIGFkZFZpZXcgKHBvb2wsIGluZGV4LCBpdGVtLCBrZXksIHR5cGUpIHtcbiAgICAgIGNvbnN0IG5yID0gbWFya1Jhdyh7XG4gICAgICAgIGlkOiB1aWQrKyxcbiAgICAgICAgaW5kZXgsXG4gICAgICAgIHVzZWQ6IHRydWUsXG4gICAgICAgIGtleSxcbiAgICAgICAgdHlwZSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgdmlldyA9IHNoYWxsb3dSZWFjdGl2ZSh7XG4gICAgICAgIGl0ZW0sXG4gICAgICAgIHBvc2l0aW9uOiAwLFxuICAgICAgICBucixcbiAgICAgIH0pO1xuICAgICAgcG9vbC5wdXNoKHZpZXcpO1xuICAgICAgcmV0dXJuIHZpZXdcbiAgICB9LFxuXG4gICAgdW51c2VWaWV3ICh2aWV3LCBmYWtlID0gZmFsc2UpIHtcbiAgICAgIGNvbnN0IHVudXNlZFZpZXdzID0gdGhpcy4kX3VudXNlZFZpZXdzO1xuICAgICAgY29uc3QgdHlwZSA9IHZpZXcubnIudHlwZTtcbiAgICAgIGxldCB1bnVzZWRQb29sID0gdW51c2VkVmlld3MuZ2V0KHR5cGUpO1xuICAgICAgaWYgKCF1bnVzZWRQb29sKSB7XG4gICAgICAgIHVudXNlZFBvb2wgPSBbXTtcbiAgICAgICAgdW51c2VkVmlld3Muc2V0KHR5cGUsIHVudXNlZFBvb2wpO1xuICAgICAgfVxuICAgICAgdW51c2VkUG9vbC5wdXNoKHZpZXcpO1xuICAgICAgaWYgKCFmYWtlKSB7XG4gICAgICAgIHZpZXcubnIudXNlZCA9IGZhbHNlO1xuICAgICAgICB2aWV3LnBvc2l0aW9uID0gLTk5OTk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGhhbmRsZVJlc2l6ZSAoKSB7XG4gICAgICB0aGlzLiRlbWl0KCdyZXNpemUnKTtcbiAgICAgIGlmICh0aGlzLnJlYWR5KSB0aGlzLnVwZGF0ZVZpc2libGVJdGVtcyhmYWxzZSk7XG4gICAgfSxcblxuICAgIGhhbmRsZVNjcm9sbCAoZXZlbnQpIHtcbiAgICAgIGlmICghdGhpcy4kX3Njcm9sbERpcnR5KSB7XG4gICAgICAgIHRoaXMuJF9zY3JvbGxEaXJ0eSA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLiRfdXBkYXRlVGltZW91dCkgcmV0dXJuXG5cbiAgICAgICAgY29uc3QgcmVxdWVzdFVwZGF0ZSA9ICgpID0+IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgdGhpcy4kX3Njcm9sbERpcnR5ID0gZmFsc2U7XG4gICAgICAgICAgY29uc3QgeyBjb250aW51b3VzIH0gPSB0aGlzLnVwZGF0ZVZpc2libGVJdGVtcyhmYWxzZSwgdHJ1ZSk7XG5cbiAgICAgICAgICAvLyBJdCBzZWVtcyBzb21ldGltZXMgY2hyb21lIGRvZXNuJ3QgZmlyZSBzY3JvbGwgZXZlbnQgOi9cbiAgICAgICAgICAvLyBXaGVuIG5vbiBjb250aW5vdXMgc2Nyb2xsaW5nIGlzIGVuZGluZywgd2UgZm9yY2UgYSByZWZyZXNoXG4gICAgICAgICAgaWYgKCFjb250aW51b3VzKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy4kX3JlZnJlc2hUaW1vdXQpO1xuICAgICAgICAgICAgdGhpcy4kX3JlZnJlc2hUaW1vdXQgPSBzZXRUaW1lb3V0KHRoaXMuaGFuZGxlU2Nyb2xsLCB0aGlzLnVwZGF0ZUludGVydmFsICsgMTAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJlcXVlc3RVcGRhdGUoKTtcblxuICAgICAgICAvLyBTY2hlZHVsZSB0aGUgbmV4dCB1cGRhdGUgd2l0aCB0aHJvdHRsaW5nXG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZUludGVydmFsKSB7XG4gICAgICAgICAgdGhpcy4kX3VwZGF0ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuJF91cGRhdGVUaW1lb3V0ID0gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLiRfc2Nyb2xsRGlydHkpIHJlcXVlc3RVcGRhdGUoKTtcbiAgICAgICAgICB9LCB0aGlzLnVwZGF0ZUludGVydmFsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlIChpc1Zpc2libGUsIGVudHJ5KSB7XG4gICAgICBpZiAodGhpcy5yZWFkeSkge1xuICAgICAgICBpZiAoaXNWaXNpYmxlIHx8IGVudHJ5LmJvdW5kaW5nQ2xpZW50UmVjdC53aWR0aCAhPT0gMCB8fCBlbnRyeS5ib3VuZGluZ0NsaWVudFJlY3QuaGVpZ2h0ICE9PSAwKSB7XG4gICAgICAgICAgdGhpcy4kZW1pdCgndmlzaWJsZScpO1xuICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpc2libGVJdGVtcyhmYWxzZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy4kZW1pdCgnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdXBkYXRlVmlzaWJsZUl0ZW1zIChjaGVja0l0ZW0sIGNoZWNrUG9zaXRpb25EaWZmID0gZmFsc2UpIHtcbiAgICAgIGNvbnN0IGl0ZW1TaXplID0gdGhpcy5pdGVtU2l6ZTtcbiAgICAgIGNvbnN0IGdyaWRJdGVtcyA9IHRoaXMuZ3JpZEl0ZW1zIHx8IDE7XG4gICAgICBjb25zdCBpdGVtU2Vjb25kYXJ5U2l6ZSA9IHRoaXMuaXRlbVNlY29uZGFyeVNpemUgfHwgaXRlbVNpemU7XG4gICAgICBjb25zdCBtaW5JdGVtU2l6ZSA9IHRoaXMuJF9jb21wdXRlZE1pbkl0ZW1TaXplO1xuICAgICAgY29uc3QgdHlwZUZpZWxkID0gdGhpcy50eXBlRmllbGQ7XG4gICAgICBjb25zdCBrZXlGaWVsZCA9IHRoaXMuc2ltcGxlQXJyYXkgPyBudWxsIDogdGhpcy5rZXlGaWVsZDtcbiAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5pdGVtcztcbiAgICAgIGNvbnN0IGNvdW50ID0gaXRlbXMubGVuZ3RoO1xuICAgICAgY29uc3Qgc2l6ZXMgPSB0aGlzLnNpemVzO1xuICAgICAgY29uc3Qgdmlld3MgPSB0aGlzLiRfdmlld3M7XG4gICAgICBjb25zdCB1bnVzZWRWaWV3cyA9IHRoaXMuJF91bnVzZWRWaWV3cztcbiAgICAgIGNvbnN0IHBvb2wgPSB0aGlzLnBvb2w7XG4gICAgICBjb25zdCBpdGVtSW5kZXhCeUtleSA9IHRoaXMuaXRlbUluZGV4QnlLZXk7XG4gICAgICBsZXQgc3RhcnRJbmRleCwgZW5kSW5kZXg7XG4gICAgICBsZXQgdG90YWxTaXplO1xuICAgICAgbGV0IHZpc2libGVTdGFydEluZGV4LCB2aXNpYmxlRW5kSW5kZXg7XG5cbiAgICAgIGlmICghY291bnQpIHtcbiAgICAgICAgc3RhcnRJbmRleCA9IGVuZEluZGV4ID0gdmlzaWJsZVN0YXJ0SW5kZXggPSB2aXNpYmxlRW5kSW5kZXggPSB0b3RhbFNpemUgPSAwO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLiRfcHJlcmVuZGVyKSB7XG4gICAgICAgIHN0YXJ0SW5kZXggPSB2aXNpYmxlU3RhcnRJbmRleCA9IDA7XG4gICAgICAgIGVuZEluZGV4ID0gdmlzaWJsZUVuZEluZGV4ID0gTWF0aC5taW4odGhpcy5wcmVyZW5kZXIsIGl0ZW1zLmxlbmd0aCk7XG4gICAgICAgIHRvdGFsU2l6ZSA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY3JvbGwgPSB0aGlzLmdldFNjcm9sbCgpO1xuXG4gICAgICAgIC8vIFNraXAgdXBkYXRlIGlmIHVzZSBoYXNuJ3Qgc2Nyb2xsZWQgZW5vdWdoXG4gICAgICAgIGlmIChjaGVja1Bvc2l0aW9uRGlmZikge1xuICAgICAgICAgIGxldCBwb3NpdGlvbkRpZmYgPSBzY3JvbGwuc3RhcnQgLSB0aGlzLiRfbGFzdFVwZGF0ZVNjcm9sbFBvc2l0aW9uO1xuICAgICAgICAgIGlmIChwb3NpdGlvbkRpZmYgPCAwKSBwb3NpdGlvbkRpZmYgPSAtcG9zaXRpb25EaWZmO1xuICAgICAgICAgIGlmICgoaXRlbVNpemUgPT09IG51bGwgJiYgcG9zaXRpb25EaWZmIDwgbWluSXRlbVNpemUpIHx8IHBvc2l0aW9uRGlmZiA8IGl0ZW1TaXplKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBjb250aW51b3VzOiB0cnVlLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLiRfbGFzdFVwZGF0ZVNjcm9sbFBvc2l0aW9uID0gc2Nyb2xsLnN0YXJ0O1xuXG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuICAgICAgICBzY3JvbGwuc3RhcnQgLT0gYnVmZmVyO1xuICAgICAgICBzY3JvbGwuZW5kICs9IGJ1ZmZlcjtcblxuICAgICAgICAvLyBhY2NvdW50IGZvciBsZWFkaW5nIHNsb3RcbiAgICAgICAgbGV0IGJlZm9yZVNpemUgPSAwO1xuICAgICAgICBpZiAodGhpcy4kcmVmcy5iZWZvcmUpIHtcbiAgICAgICAgICBiZWZvcmVTaXplID0gdGhpcy4kcmVmcy5iZWZvcmUuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgIHNjcm9sbC5zdGFydCAtPSBiZWZvcmVTaXplO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYWNjb3VudCBmb3IgdHJhaWxpbmcgc2xvdFxuICAgICAgICBpZiAodGhpcy4kcmVmcy5hZnRlcikge1xuICAgICAgICAgIGNvbnN0IGFmdGVyU2l6ZSA9IHRoaXMuJHJlZnMuYWZ0ZXIuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgIHNjcm9sbC5lbmQgKz0gYWZ0ZXJTaXplO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVmFyaWFibGUgc2l6ZSBtb2RlXG4gICAgICAgIGlmIChpdGVtU2l6ZSA9PT0gbnVsbCkge1xuICAgICAgICAgIGxldCBoO1xuICAgICAgICAgIGxldCBhID0gMDtcbiAgICAgICAgICBsZXQgYiA9IGNvdW50IC0gMTtcbiAgICAgICAgICBsZXQgaSA9IH5+KGNvdW50IC8gMik7XG4gICAgICAgICAgbGV0IG9sZEk7XG5cbiAgICAgICAgICAvLyBTZWFyY2hpbmcgZm9yIHN0YXJ0SW5kZXhcbiAgICAgICAgICBkbyB7XG4gICAgICAgICAgICBvbGRJID0gaTtcbiAgICAgICAgICAgIGggPSBzaXplc1tpXS5hY2N1bXVsYXRvcjtcbiAgICAgICAgICAgIGlmIChoIDwgc2Nyb2xsLnN0YXJ0KSB7XG4gICAgICAgICAgICAgIGEgPSBpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpIDwgY291bnQgLSAxICYmIHNpemVzW2kgKyAxXS5hY2N1bXVsYXRvciA+IHNjcm9sbC5zdGFydCkge1xuICAgICAgICAgICAgICBiID0gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkgPSB+figoYSArIGIpIC8gMik7XG4gICAgICAgICAgfSB3aGlsZSAoaSAhPT0gb2xkSSlcbiAgICAgICAgICBpIDwgMCAmJiAoaSA9IDApO1xuICAgICAgICAgIHN0YXJ0SW5kZXggPSBpO1xuXG4gICAgICAgICAgLy8gRm9yIGNvbnRhaW5lciBzdHlsZVxuICAgICAgICAgIHRvdGFsU2l6ZSA9IHNpemVzW2NvdW50IC0gMV0uYWNjdW11bGF0b3I7XG5cbiAgICAgICAgICAvLyBTZWFyY2hpbmcgZm9yIGVuZEluZGV4XG4gICAgICAgICAgZm9yIChlbmRJbmRleCA9IGk7IGVuZEluZGV4IDwgY291bnQgJiYgc2l6ZXNbZW5kSW5kZXhdLmFjY3VtdWxhdG9yIDwgc2Nyb2xsLmVuZDsgZW5kSW5kZXgrKyk7XG4gICAgICAgICAgaWYgKGVuZEluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgZW5kSW5kZXggPSBpdGVtcy5sZW5ndGggLSAxO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbmRJbmRleCsrO1xuICAgICAgICAgICAgLy8gQm91bmRzXG4gICAgICAgICAgICBlbmRJbmRleCA+IGNvdW50ICYmIChlbmRJbmRleCA9IGNvdW50KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBzZWFyY2ggdmlzaWJsZSBzdGFydEluZGV4XG4gICAgICAgICAgZm9yICh2aXNpYmxlU3RhcnRJbmRleCA9IHN0YXJ0SW5kZXg7IHZpc2libGVTdGFydEluZGV4IDwgY291bnQgJiYgKGJlZm9yZVNpemUgKyBzaXplc1t2aXNpYmxlU3RhcnRJbmRleF0uYWNjdW11bGF0b3IpIDwgc2Nyb2xsLnN0YXJ0OyB2aXNpYmxlU3RhcnRJbmRleCsrKTtcblxuICAgICAgICAgIC8vIHNlYXJjaCB2aXNpYmxlIGVuZEluZGV4XG4gICAgICAgICAgZm9yICh2aXNpYmxlRW5kSW5kZXggPSB2aXNpYmxlU3RhcnRJbmRleDsgdmlzaWJsZUVuZEluZGV4IDwgY291bnQgJiYgKGJlZm9yZVNpemUgKyBzaXplc1t2aXNpYmxlRW5kSW5kZXhdLmFjY3VtdWxhdG9yKSA8IHNjcm9sbC5lbmQ7IHZpc2libGVFbmRJbmRleCsrKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBGaXhlZCBzaXplIG1vZGVcbiAgICAgICAgICBzdGFydEluZGV4ID0gfn4oc2Nyb2xsLnN0YXJ0IC8gaXRlbVNpemUgKiBncmlkSXRlbXMpO1xuICAgICAgICAgIGNvbnN0IHJlbWFpbmVyID0gc3RhcnRJbmRleCAlIGdyaWRJdGVtcztcbiAgICAgICAgICBzdGFydEluZGV4IC09IHJlbWFpbmVyO1xuICAgICAgICAgIGVuZEluZGV4ID0gTWF0aC5jZWlsKHNjcm9sbC5lbmQgLyBpdGVtU2l6ZSAqIGdyaWRJdGVtcyk7XG4gICAgICAgICAgdmlzaWJsZVN0YXJ0SW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKChzY3JvbGwuc3RhcnQgLSBiZWZvcmVTaXplKSAvIGl0ZW1TaXplICogZ3JpZEl0ZW1zKSk7XG4gICAgICAgICAgdmlzaWJsZUVuZEluZGV4ID0gTWF0aC5mbG9vcigoc2Nyb2xsLmVuZCAtIGJlZm9yZVNpemUpIC8gaXRlbVNpemUgKiBncmlkSXRlbXMpO1xuXG4gICAgICAgICAgLy8gQm91bmRzXG4gICAgICAgICAgc3RhcnRJbmRleCA8IDAgJiYgKHN0YXJ0SW5kZXggPSAwKTtcbiAgICAgICAgICBlbmRJbmRleCA+IGNvdW50ICYmIChlbmRJbmRleCA9IGNvdW50KTtcbiAgICAgICAgICB2aXNpYmxlU3RhcnRJbmRleCA8IDAgJiYgKHZpc2libGVTdGFydEluZGV4ID0gMCk7XG4gICAgICAgICAgdmlzaWJsZUVuZEluZGV4ID4gY291bnQgJiYgKHZpc2libGVFbmRJbmRleCA9IGNvdW50KTtcblxuICAgICAgICAgIHRvdGFsU2l6ZSA9IE1hdGguY2VpbChjb3VudCAvIGdyaWRJdGVtcykgKiBpdGVtU2l6ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZW5kSW5kZXggLSBzdGFydEluZGV4ID4gY29uZmlnLml0ZW1zTGltaXQpIHtcbiAgICAgICAgdGhpcy5pdGVtc0xpbWl0RXJyb3IoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy50b3RhbFNpemUgPSB0b3RhbFNpemU7XG5cbiAgICAgIGxldCB2aWV3O1xuXG4gICAgICBjb25zdCBjb250aW51b3VzID0gc3RhcnRJbmRleCA8PSB0aGlzLiRfZW5kSW5kZXggJiYgZW5kSW5kZXggPj0gdGhpcy4kX3N0YXJ0SW5kZXg7XG5cbiAgICAgIC8vIFVudXNlIHZpZXdzIHRoYXQgYXJlIG5vIGxvbmdlciB2aXNpYmxlXG4gICAgICBpZiAoY29udGludW91cykge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHBvb2wubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgdmlldyA9IHBvb2xbaV07XG4gICAgICAgICAgaWYgKHZpZXcubnIudXNlZCkge1xuICAgICAgICAgICAgLy8gVXBkYXRlIHZpZXcgaXRlbSBpbmRleFxuICAgICAgICAgICAgaWYgKGNoZWNrSXRlbSkge1xuICAgICAgICAgICAgICB2aWV3Lm5yLmluZGV4ID0gaXRlbUluZGV4QnlLZXlbdmlldy5pdGVtW2tleUZpZWxkXV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGluZGV4IGlzIHN0aWxsIGluIHZpc2libGUgcmFuZ2VcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgdmlldy5uci5pbmRleCA9PSBudWxsIHx8XG4gICAgICAgICAgICAgIHZpZXcubnIuaW5kZXggPCBzdGFydEluZGV4IHx8XG4gICAgICAgICAgICAgIHZpZXcubnIuaW5kZXggPj0gZW5kSW5kZXhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICB0aGlzLnVudXNlVmlldyh2aWV3KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgdW51c2VkSW5kZXggPSBjb250aW51b3VzID8gbnVsbCA6IG5ldyBNYXAoKTtcblxuICAgICAgbGV0IGl0ZW0sIHR5cGU7XG4gICAgICBsZXQgdjtcbiAgICAgIGZvciAobGV0IGkgPSBzdGFydEluZGV4OyBpIDwgZW5kSW5kZXg7IGkrKykge1xuICAgICAgICBpdGVtID0gaXRlbXNbaV07XG4gICAgICAgIGNvbnN0IGtleSA9IGtleUZpZWxkID8gaXRlbVtrZXlGaWVsZF0gOiBpdGVtO1xuICAgICAgICBpZiAoa2V5ID09IG51bGwpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEtleSBpcyAke2tleX0gb24gaXRlbSAoa2V5RmllbGQgaXMgJyR7a2V5RmllbGR9JylgKVxuICAgICAgICB9XG4gICAgICAgIHZpZXcgPSB2aWV3cy5nZXQoa2V5KTtcblxuICAgICAgICBpZiAoIWl0ZW1TaXplICYmICFzaXplc1tpXS5zaXplKSB7XG4gICAgICAgICAgaWYgKHZpZXcpIHRoaXMudW51c2VWaWV3KHZpZXcpO1xuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICB0eXBlID0gaXRlbVt0eXBlRmllbGRdO1xuXG4gICAgICAgIGxldCB1bnVzZWRQb29sID0gdW51c2VkVmlld3MuZ2V0KHR5cGUpO1xuICAgICAgICBsZXQgbmV3bHlVc2VkVmlldyA9IGZhbHNlO1xuXG4gICAgICAgIC8vIE5vIHZpZXcgYXNzaWduZWQgdG8gaXRlbVxuICAgICAgICBpZiAoIXZpZXcpIHtcbiAgICAgICAgICBpZiAoY29udGludW91cykge1xuICAgICAgICAgICAgLy8gUmV1c2UgZXhpc3Rpbmcgdmlld1xuICAgICAgICAgICAgaWYgKHVudXNlZFBvb2wgJiYgdW51c2VkUG9vbC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgdmlldyA9IHVudXNlZFBvb2wucG9wKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2aWV3ID0gdGhpcy5hZGRWaWV3KHBvb2wsIGksIGl0ZW0sIGtleSwgdHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFVzZSBleGlzdGluZyB2aWV3XG4gICAgICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGlmIHRoZXkgYXJlIGFscmVhZHkgdXNlZFxuICAgICAgICAgICAgLy8gYmVjYXVzZSB3ZSBhcmUgbm90IGluIGNvbnRpbm91cyBzY3JvbGxpbmdcbiAgICAgICAgICAgIHYgPSB1bnVzZWRJbmRleC5nZXQodHlwZSkgfHwgMDtcblxuICAgICAgICAgICAgaWYgKCF1bnVzZWRQb29sIHx8IHYgPj0gdW51c2VkUG9vbC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgdmlldyA9IHRoaXMuYWRkVmlldyhwb29sLCBpLCBpdGVtLCBrZXksIHR5cGUpO1xuICAgICAgICAgICAgICB0aGlzLnVudXNlVmlldyh2aWV3LCB0cnVlKTtcbiAgICAgICAgICAgICAgdW51c2VkUG9vbCA9IHVudXNlZFZpZXdzLmdldCh0eXBlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmlldyA9IHVudXNlZFBvb2xbdl07XG4gICAgICAgICAgICB1bnVzZWRJbmRleC5zZXQodHlwZSwgdiArIDEpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEFzc2lnbiB2aWV3IHRvIGl0ZW1cbiAgICAgICAgICB2aWV3cy5kZWxldGUodmlldy5uci5rZXkpO1xuICAgICAgICAgIHZpZXcubnIudXNlZCA9IHRydWU7XG4gICAgICAgICAgdmlldy5uci5pbmRleCA9IGk7XG4gICAgICAgICAgdmlldy5uci5rZXkgPSBrZXk7XG4gICAgICAgICAgdmlldy5uci50eXBlID0gdHlwZTtcbiAgICAgICAgICB2aWV3cy5zZXQoa2V5LCB2aWV3KTtcblxuICAgICAgICAgIG5ld2x5VXNlZFZpZXcgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFZpZXcgYWxyZWFkeSBhc3NpZ25lZCB0byBpdGVtXG4gICAgICAgICAgaWYgKCF2aWV3Lm5yLnVzZWQpIHtcbiAgICAgICAgICAgIHZpZXcubnIudXNlZCA9IHRydWU7XG4gICAgICAgICAgICBuZXdseVVzZWRWaWV3ID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh1bnVzZWRQb29sKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdW51c2VkUG9vbC5pbmRleE9mKHZpZXcpO1xuICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB1bnVzZWRQb29sLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWx3YXlzIHNldCBpdGVtIGluIGNhc2UgaXQncyBhIG5ldyBvYmplY3Qgd2l0aCB0aGUgc2FtZSBrZXlcbiAgICAgICAgdmlldy5pdGVtID0gaXRlbTtcblxuICAgICAgICBpZiAobmV3bHlVc2VkVmlldykge1xuICAgICAgICAgIGlmIChpID09PSBpdGVtcy5sZW5ndGggLSAxKSB0aGlzLiRlbWl0KCdzY3JvbGwtZW5kJyk7XG4gICAgICAgICAgaWYgKGkgPT09IDApIHRoaXMuJGVtaXQoJ3Njcm9sbC1zdGFydCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIHBvc2l0aW9uXG4gICAgICAgIGlmIChpdGVtU2l6ZSA9PT0gbnVsbCkge1xuICAgICAgICAgIHZpZXcucG9zaXRpb24gPSBzaXplc1tpIC0gMV0uYWNjdW11bGF0b3I7XG4gICAgICAgICAgdmlldy5vZmZzZXQgPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZpZXcucG9zaXRpb24gPSBNYXRoLmZsb29yKGkgLyBncmlkSXRlbXMpICogaXRlbVNpemU7XG4gICAgICAgICAgdmlldy5vZmZzZXQgPSAoaSAlIGdyaWRJdGVtcykgKiBpdGVtU2Vjb25kYXJ5U2l6ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLiRfc3RhcnRJbmRleCA9IHN0YXJ0SW5kZXg7XG4gICAgICB0aGlzLiRfZW5kSW5kZXggPSBlbmRJbmRleDtcblxuICAgICAgaWYgKHRoaXMuZW1pdFVwZGF0ZSkgdGhpcy4kZW1pdCgndXBkYXRlJywgc3RhcnRJbmRleCwgZW5kSW5kZXgsIHZpc2libGVTdGFydEluZGV4LCB2aXNpYmxlRW5kSW5kZXgpO1xuXG4gICAgICAvLyBBZnRlciB0aGUgdXNlciBoYXMgZmluaXNoZWQgc2Nyb2xsaW5nXG4gICAgICAvLyBTb3J0IHZpZXdzIHNvIHRleHQgc2VsZWN0aW9uIGlzIGNvcnJlY3RcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLiRfc29ydFRpbWVyKTtcbiAgICAgIHRoaXMuJF9zb3J0VGltZXIgPSBzZXRUaW1lb3V0KHRoaXMuc29ydFZpZXdzLCB0aGlzLnVwZGF0ZUludGVydmFsICsgMzAwKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29udGludW91cyxcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0TGlzdGVuZXJUYXJnZXQgKCkge1xuICAgICAgbGV0IHRhcmdldCA9IGdldFNjcm9sbFBhcmVudCh0aGlzLiRlbCk7XG4gICAgICAvLyBGaXggZ2xvYmFsIHNjcm9sbCB0YXJnZXQgZm9yIENocm9tZSBhbmQgU2FmYXJpXG4gICAgICBpZiAod2luZG93LmRvY3VtZW50ICYmICh0YXJnZXQgPT09IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgfHwgdGFyZ2V0ID09PSB3aW5kb3cuZG9jdW1lbnQuYm9keSkpIHtcbiAgICAgICAgdGFyZ2V0ID0gd2luZG93O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRhcmdldFxuICAgIH0sXG5cbiAgICBnZXRTY3JvbGwgKCkge1xuICAgICAgY29uc3QgeyAkZWw6IGVsLCBkaXJlY3Rpb24gfSA9IHRoaXM7XG4gICAgICBjb25zdCBpc1ZlcnRpY2FsID0gZGlyZWN0aW9uID09PSAndmVydGljYWwnO1xuICAgICAgbGV0IHNjcm9sbFN0YXRlO1xuXG4gICAgICBpZiAodGhpcy5wYWdlTW9kZSkge1xuICAgICAgICBjb25zdCBib3VuZHMgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3QgYm91bmRzU2l6ZSA9IGlzVmVydGljYWwgPyBib3VuZHMuaGVpZ2h0IDogYm91bmRzLndpZHRoO1xuICAgICAgICBsZXQgc3RhcnQgPSAtKGlzVmVydGljYWwgPyBib3VuZHMudG9wIDogYm91bmRzLmxlZnQpO1xuICAgICAgICBsZXQgc2l6ZSA9IGlzVmVydGljYWwgPyB3aW5kb3cuaW5uZXJIZWlnaHQgOiB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgaWYgKHN0YXJ0IDwgMCkge1xuICAgICAgICAgIHNpemUgKz0gc3RhcnQ7XG4gICAgICAgICAgc3RhcnQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydCArIHNpemUgPiBib3VuZHNTaXplKSB7XG4gICAgICAgICAgc2l6ZSA9IGJvdW5kc1NpemUgLSBzdGFydDtcbiAgICAgICAgfVxuICAgICAgICBzY3JvbGxTdGF0ZSA9IHtcbiAgICAgICAgICBzdGFydCxcbiAgICAgICAgICBlbmQ6IHN0YXJ0ICsgc2l6ZSxcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSBpZiAoaXNWZXJ0aWNhbCkge1xuICAgICAgICBzY3JvbGxTdGF0ZSA9IHtcbiAgICAgICAgICBzdGFydDogZWwuc2Nyb2xsVG9wLFxuICAgICAgICAgIGVuZDogZWwuc2Nyb2xsVG9wICsgZWwuY2xpZW50SGVpZ2h0LFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2Nyb2xsU3RhdGUgPSB7XG4gICAgICAgICAgc3RhcnQ6IGVsLnNjcm9sbExlZnQsXG4gICAgICAgICAgZW5kOiBlbC5zY3JvbGxMZWZ0ICsgZWwuY2xpZW50V2lkdGgsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzY3JvbGxTdGF0ZVxuICAgIH0sXG5cbiAgICBhcHBseVBhZ2VNb2RlICgpIHtcbiAgICAgIGlmICh0aGlzLnBhZ2VNb2RlKSB7XG4gICAgICAgIHRoaXMuYWRkTGlzdGVuZXJzKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVycygpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBhZGRMaXN0ZW5lcnMgKCkge1xuICAgICAgdGhpcy5saXN0ZW5lclRhcmdldCA9IHRoaXMuZ2V0TGlzdGVuZXJUYXJnZXQoKTtcbiAgICAgIHRoaXMubGlzdGVuZXJUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5oYW5kbGVTY3JvbGwsIHN1cHBvcnRzUGFzc2l2ZVxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHBhc3NpdmU6IHRydWUsXG4gICAgICAgICAgfVxuICAgICAgICA6IGZhbHNlKTtcbiAgICAgIHRoaXMubGlzdGVuZXJUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5oYW5kbGVSZXNpemUpO1xuICAgIH0sXG5cbiAgICByZW1vdmVMaXN0ZW5lcnMgKCkge1xuICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyVGFyZ2V0KSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICB0aGlzLmxpc3RlbmVyVGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuaGFuZGxlU2Nyb2xsKTtcbiAgICAgIHRoaXMubGlzdGVuZXJUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5oYW5kbGVSZXNpemUpO1xuXG4gICAgICB0aGlzLmxpc3RlbmVyVGFyZ2V0ID0gbnVsbDtcbiAgICB9LFxuXG4gICAgc2Nyb2xsVG9JdGVtIChpbmRleCkge1xuICAgICAgbGV0IHNjcm9sbDtcbiAgICAgIGNvbnN0IGdyaWRJdGVtcyA9IHRoaXMuZ3JpZEl0ZW1zIHx8IDE7XG4gICAgICBpZiAodGhpcy5pdGVtU2l6ZSA9PT0gbnVsbCkge1xuICAgICAgICBzY3JvbGwgPSBpbmRleCA+IDAgPyB0aGlzLnNpemVzW2luZGV4IC0gMV0uYWNjdW11bGF0b3IgOiAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2Nyb2xsID0gTWF0aC5mbG9vcihpbmRleCAvIGdyaWRJdGVtcykgKiB0aGlzLml0ZW1TaXplO1xuICAgICAgfVxuICAgICAgdGhpcy5zY3JvbGxUb1Bvc2l0aW9uKHNjcm9sbCk7XG4gICAgfSxcblxuICAgIHNjcm9sbFRvUG9zaXRpb24gKHBvc2l0aW9uKSB7XG4gICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJ1xuICAgICAgICA/IHsgc2Nyb2xsOiAnc2Nyb2xsVG9wJywgc3RhcnQ6ICd0b3AnIH1cbiAgICAgICAgOiB7IHNjcm9sbDogJ3Njcm9sbExlZnQnLCBzdGFydDogJ2xlZnQnIH07XG5cbiAgICAgIGxldCB2aWV3cG9ydDtcbiAgICAgIGxldCBzY3JvbGxEaXJlY3Rpb247XG4gICAgICBsZXQgc2Nyb2xsRGlzdGFuY2U7XG5cbiAgICAgIGlmICh0aGlzLnBhZ2VNb2RlKSB7XG4gICAgICAgIGNvbnN0IHZpZXdwb3J0RWwgPSBnZXRTY3JvbGxQYXJlbnQodGhpcy4kZWwpO1xuICAgICAgICAvLyBIVE1MIGRvZXNuJ3Qgb3ZlcmZsb3cgbGlrZSBvdGhlciBlbGVtZW50c1xuICAgICAgICBjb25zdCBzY3JvbGxUb3AgPSB2aWV3cG9ydEVsLnRhZ05hbWUgPT09ICdIVE1MJyA/IDAgOiB2aWV3cG9ydEVsW2RpcmVjdGlvbi5zY3JvbGxdO1xuICAgICAgICBjb25zdCBib3VuZHMgPSB2aWV3cG9ydEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIGNvbnN0IHNjcm9sbGVyID0gdGhpcy4kZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IHNjcm9sbGVyUG9zaXRpb24gPSBzY3JvbGxlcltkaXJlY3Rpb24uc3RhcnRdIC0gYm91bmRzW2RpcmVjdGlvbi5zdGFydF07XG5cbiAgICAgICAgdmlld3BvcnQgPSB2aWV3cG9ydEVsO1xuICAgICAgICBzY3JvbGxEaXJlY3Rpb24gPSBkaXJlY3Rpb24uc2Nyb2xsO1xuICAgICAgICBzY3JvbGxEaXN0YW5jZSA9IHBvc2l0aW9uICsgc2Nyb2xsVG9wICsgc2Nyb2xsZXJQb3NpdGlvbjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZpZXdwb3J0ID0gdGhpcy4kZWw7XG4gICAgICAgIHNjcm9sbERpcmVjdGlvbiA9IGRpcmVjdGlvbi5zY3JvbGw7XG4gICAgICAgIHNjcm9sbERpc3RhbmNlID0gcG9zaXRpb247XG4gICAgICB9XG5cbiAgICAgIHZpZXdwb3J0W3Njcm9sbERpcmVjdGlvbl0gPSBzY3JvbGxEaXN0YW5jZTtcbiAgICB9LFxuXG4gICAgaXRlbXNMaW1pdEVycm9yICgpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnSXQgc2VlbXMgdGhlIHNjcm9sbGVyIGVsZW1lbnQgaXNuXFwndCBzY3JvbGxpbmcsIHNvIGl0IHRyaWVzIHRvIHJlbmRlciBhbGwgdGhlIGl0ZW1zIGF0IG9uY2UuJywgJ1Njcm9sbGVyOicsIHRoaXMuJGVsKTtcbiAgICAgICAgY29uc29sZS5sb2coJ01ha2Ugc3VyZSB0aGUgc2Nyb2xsZXIgaGFzIGEgZml4ZWQgaGVpZ2h0IChvciB3aWR0aCkgYW5kIFxcJ292ZXJmbG93LXlcXCcgKG9yIFxcJ292ZXJmbG93LXhcXCcpIHNldCB0byBcXCdhdXRvXFwnIHNvIGl0IGNhbiBzY3JvbGwgY29ycmVjdGx5IGFuZCBvbmx5IHJlbmRlciB0aGUgaXRlbXMgdmlzaWJsZSBpbiB0aGUgc2Nyb2xsIHZpZXdwb3J0LicpO1xuICAgICAgfSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlbmRlcmVkIGl0ZW1zIGxpbWl0IHJlYWNoZWQnKVxuICAgIH0sXG5cbiAgICBzb3J0Vmlld3MgKCkge1xuICAgICAgdGhpcy5wb29sLnNvcnQoKHZpZXdBLCB2aWV3QikgPT4gdmlld0EubnIuaW5kZXggLSB2aWV3Qi5uci5pbmRleCk7XG4gICAgfSxcbiAgfSxcbn07XG5cbmNvbnN0IF9ob2lzdGVkXzEgPSB7XG4gIGtleTogMCxcbiAgcmVmOiBcImJlZm9yZVwiLFxuICBjbGFzczogXCJ2dWUtcmVjeWNsZS1zY3JvbGxlcl9fc2xvdFwiXG59O1xuY29uc3QgX2hvaXN0ZWRfMiA9IHtcbiAga2V5OiAxLFxuICByZWY6IFwiYWZ0ZXJcIixcbiAgY2xhc3M6IFwidnVlLXJlY3ljbGUtc2Nyb2xsZXJfX3Nsb3RcIlxufTtcblxuZnVuY3Rpb24gcmVuZGVyJDEoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7XG4gIGNvbnN0IF9jb21wb25lbnRfUmVzaXplT2JzZXJ2ZXIgPSByZXNvbHZlQ29tcG9uZW50KFwiUmVzaXplT2JzZXJ2ZXJcIik7XG4gIGNvbnN0IF9kaXJlY3RpdmVfb2JzZXJ2ZV92aXNpYmlsaXR5ID0gcmVzb2x2ZURpcmVjdGl2ZShcIm9ic2VydmUtdmlzaWJpbGl0eVwiKTtcblxuICByZXR1cm4gd2l0aERpcmVjdGl2ZXMoKG9wZW5CbG9jaygpLCBjcmVhdGVFbGVtZW50QmxvY2soXCJkaXZcIiwge1xuICAgIGNsYXNzOiBub3JtYWxpemVDbGFzcyhbXCJ2dWUtcmVjeWNsZS1zY3JvbGxlclwiLCB7XG4gICAgICByZWFkeTogJGRhdGEucmVhZHksXG4gICAgICAncGFnZS1tb2RlJzogJHByb3BzLnBhZ2VNb2RlLFxuICAgICAgW2BkaXJlY3Rpb24tJHtfY3R4LmRpcmVjdGlvbn1gXTogdHJ1ZSxcbiAgICB9XSksXG4gICAgb25TY3JvbGxQYXNzaXZlOiBfY2FjaGVbMF0gfHwgKF9jYWNoZVswXSA9ICguLi5hcmdzKSA9PiAoJG9wdGlvbnMuaGFuZGxlU2Nyb2xsICYmICRvcHRpb25zLmhhbmRsZVNjcm9sbCguLi5hcmdzKSkpXG4gIH0sIFtcbiAgICAoX2N0eC4kc2xvdHMuYmVmb3JlKVxuICAgICAgPyAob3BlbkJsb2NrKCksIGNyZWF0ZUVsZW1lbnRCbG9jayhcImRpdlwiLCBfaG9pc3RlZF8xLCBbXG4gICAgICAgICAgcmVuZGVyU2xvdChfY3R4LiRzbG90cywgXCJiZWZvcmVcIilcbiAgICAgICAgXSwgNTEyIC8qIE5FRURfUEFUQ0ggKi8pKVxuICAgICAgOiBjcmVhdGVDb21tZW50Vk5vZGUoXCJ2LWlmXCIsIHRydWUpLFxuICAgIChvcGVuQmxvY2soKSwgY3JlYXRlQmxvY2socmVzb2x2ZUR5bmFtaWNDb21wb25lbnQoJHByb3BzLmxpc3RUYWcpLCB7XG4gICAgICByZWY6IFwid3JhcHBlclwiLFxuICAgICAgc3R5bGU6IG5vcm1hbGl6ZVN0eWxlKHsgW19jdHguZGlyZWN0aW9uID09PSAndmVydGljYWwnID8gJ21pbkhlaWdodCcgOiAnbWluV2lkdGgnXTogJGRhdGEudG90YWxTaXplICsgJ3B4JyB9KSxcbiAgICAgIGNsYXNzOiBub3JtYWxpemVDbGFzcyhbXCJ2dWUtcmVjeWNsZS1zY3JvbGxlcl9faXRlbS13cmFwcGVyXCIsICRwcm9wcy5saXN0Q2xhc3NdKVxuICAgIH0sIHtcbiAgICAgIGRlZmF1bHQ6IHdpdGhDdHgoKCkgPT4gW1xuICAgICAgICAob3BlbkJsb2NrKHRydWUpLCBjcmVhdGVFbGVtZW50QmxvY2soRnJhZ21lbnQsIG51bGwsIHJlbmRlckxpc3QoJGRhdGEucG9vbCwgKHZpZXcpID0+IHtcbiAgICAgICAgICByZXR1cm4gKG9wZW5CbG9jaygpLCBjcmVhdGVCbG9jayhyZXNvbHZlRHluYW1pY0NvbXBvbmVudCgkcHJvcHMuaXRlbVRhZyksIG1lcmdlUHJvcHMoe1xuICAgICAgICAgICAga2V5OiB2aWV3Lm5yLmlkLFxuICAgICAgICAgICAgc3R5bGU6ICRkYXRhLnJlYWR5ID8ge1xuICAgICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZSR7X2N0eC5kaXJlY3Rpb24gPT09ICd2ZXJ0aWNhbCcgPyAnWScgOiAnWCd9KCR7dmlldy5wb3NpdGlvbn1weCkgdHJhbnNsYXRlJHtfY3R4LmRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJyA/ICdYJyA6ICdZJ30oJHt2aWV3Lm9mZnNldH1weClgLFxuICAgICAgICAgIHdpZHRoOiAkcHJvcHMuZ3JpZEl0ZW1zID8gYCR7X2N0eC5kaXJlY3Rpb24gPT09ICd2ZXJ0aWNhbCcgPyAkcHJvcHMuaXRlbVNlY29uZGFyeVNpemUgfHwgJHByb3BzLml0ZW1TaXplIDogJHByb3BzLml0ZW1TaXplfXB4YCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBoZWlnaHQ6ICRwcm9wcy5ncmlkSXRlbXMgPyBgJHtfY3R4LmRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnID8gJHByb3BzLml0ZW1TZWNvbmRhcnlTaXplIHx8ICRwcm9wcy5pdGVtU2l6ZSA6ICRwcm9wcy5pdGVtU2l6ZX1weGAgOiB1bmRlZmluZWQsXG4gICAgICAgIH0gOiBudWxsLFxuICAgICAgICAgICAgY2xhc3M6IFtcInZ1ZS1yZWN5Y2xlLXNjcm9sbGVyX19pdGVtLXZpZXdcIiwgW1xuICAgICAgICAgICRwcm9wcy5pdGVtQ2xhc3MsXG4gICAgICAgICAge1xuICAgICAgICAgICAgaG92ZXI6ICEkcHJvcHMuc2tpcEhvdmVyICYmICRkYXRhLmhvdmVyS2V5ID09PSB2aWV3Lm5yLmtleVxuICAgICAgICAgIH0sXG4gICAgICAgIF1dXG4gICAgICAgICAgfSwgdG9IYW5kbGVycygkcHJvcHMuc2tpcEhvdmVyID8ge30gOiB7XG4gICAgICAgICAgbW91c2VlbnRlcjogKCkgPT4geyAkZGF0YS5ob3ZlcktleSA9IHZpZXcubnIua2V5OyB9LFxuICAgICAgICAgIG1vdXNlbGVhdmU6ICgpID0+IHsgJGRhdGEuaG92ZXJLZXkgPSBudWxsOyB9LFxuICAgICAgICB9KSksIHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IHdpdGhDdHgoKCkgPT4gW1xuICAgICAgICAgICAgICByZW5kZXJTbG90KF9jdHguJHNsb3RzLCBcImRlZmF1bHRcIiwge1xuICAgICAgICAgICAgICAgIGl0ZW06IHZpZXcuaXRlbSxcbiAgICAgICAgICAgICAgICBpbmRleDogdmlldy5uci5pbmRleCxcbiAgICAgICAgICAgICAgICBhY3RpdmU6IHZpZXcubnIudXNlZFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICBfOiAyIC8qIERZTkFNSUMgKi9cbiAgICAgICAgICB9LCAxMDQwIC8qIEZVTExfUFJPUFMsIERZTkFNSUNfU0xPVFMgKi8sIFtcInN0eWxlXCIsIFwiY2xhc3NcIl0pKVxuICAgICAgICB9KSwgMTI4IC8qIEtFWUVEX0ZSQUdNRU5UICovKSksXG4gICAgICAgIHJlbmRlclNsb3QoX2N0eC4kc2xvdHMsIFwiZW1wdHlcIilcbiAgICAgIF0pLFxuICAgICAgXzogMyAvKiBGT1JXQVJERUQgKi9cbiAgICB9LCA4IC8qIFBST1BTICovLCBbXCJzdHlsZVwiLCBcImNsYXNzXCJdKSksXG4gICAgKF9jdHguJHNsb3RzLmFmdGVyKVxuICAgICAgPyAob3BlbkJsb2NrKCksIGNyZWF0ZUVsZW1lbnRCbG9jayhcImRpdlwiLCBfaG9pc3RlZF8yLCBbXG4gICAgICAgICAgcmVuZGVyU2xvdChfY3R4LiRzbG90cywgXCJhZnRlclwiKVxuICAgICAgICBdLCA1MTIgLyogTkVFRF9QQVRDSCAqLykpXG4gICAgICA6IGNyZWF0ZUNvbW1lbnRWTm9kZShcInYtaWZcIiwgdHJ1ZSksXG4gICAgY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9SZXNpemVPYnNlcnZlciwgeyBvbk5vdGlmeTogJG9wdGlvbnMuaGFuZGxlUmVzaXplIH0sIG51bGwsIDggLyogUFJPUFMgKi8sIFtcIm9uTm90aWZ5XCJdKVxuICBdLCAzNCAvKiBDTEFTUywgSFlEUkFURV9FVkVOVFMgKi8pKSwgW1xuICAgIFtfZGlyZWN0aXZlX29ic2VydmVfdmlzaWJpbGl0eSwgJG9wdGlvbnMuaGFuZGxlVmlzaWJpbGl0eUNoYW5nZV1cbiAgXSlcbn1cblxuc2NyaXB0JDIucmVuZGVyID0gcmVuZGVyJDE7XG5zY3JpcHQkMi5fX2ZpbGUgPSBcInNyYy9jb21wb25lbnRzL1JlY3ljbGVTY3JvbGxlci52dWVcIjtcblxudmFyIHNjcmlwdCQxID0ge1xuICBuYW1lOiAnRHluYW1pY1Njcm9sbGVyJyxcblxuICBjb21wb25lbnRzOiB7XG4gICAgUmVjeWNsZVNjcm9sbGVyOiBzY3JpcHQkMixcbiAgfSxcblxuICBwcm92aWRlICgpIHtcbiAgICBpZiAodHlwZW9mIFJlc2l6ZU9ic2VydmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy4kX3Jlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKGVudHJpZXMgPT4ge1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShlbnRyaWVzKSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICAgICAgaWYgKGVudHJ5LnRhcmdldCAmJiBlbnRyeS50YXJnZXQuJF92c19vblJlc2l6ZSkge1xuICAgICAgICAgICAgICBsZXQgd2lkdGgsIGhlaWdodDtcbiAgICAgICAgICAgICAgaWYgKGVudHJ5LmJvcmRlckJveFNpemUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNpemVPYnNlcnZlclNpemUgPSBlbnRyeS5ib3JkZXJCb3hTaXplWzBdO1xuICAgICAgICAgICAgICAgIHdpZHRoID0gcmVzaXplT2JzZXJ2ZXJTaXplLmlubGluZVNpemU7XG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gcmVzaXplT2JzZXJ2ZXJTaXplLmJsb2NrU2l6ZTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBAVE9ETyByZW1vdmUgd2hlbiBjb250ZW50UmVjdCBpcyBkZXByZWNhdGVkXG4gICAgICAgICAgICAgICAgd2lkdGggPSBlbnRyeS5jb250ZW50UmVjdC53aWR0aDtcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSBlbnRyeS5jb250ZW50UmVjdC5oZWlnaHQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZW50cnkudGFyZ2V0LiRfdnNfb25SZXNpemUoZW50cnkudGFyZ2V0LiRfdnNfaWQsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdnNjcm9sbERhdGE6IHRoaXMudnNjcm9sbERhdGEsXG4gICAgICB2c2Nyb2xsUGFyZW50OiB0aGlzLFxuICAgICAgdnNjcm9sbFJlc2l6ZU9ic2VydmVyOiB0aGlzLiRfcmVzaXplT2JzZXJ2ZXIsXG4gICAgfVxuICB9LFxuXG4gIGluaGVyaXRBdHRyczogZmFsc2UsXG5cbiAgcHJvcHM6IHtcbiAgICAuLi5wcm9wcyxcblxuICAgIG1pbkl0ZW1TaXplOiB7XG4gICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgfSxcbiAgfSxcblxuICBlbWl0czogW1xuICAgICdyZXNpemUnLFxuICAgICd2aXNpYmxlJyxcbiAgXSxcblxuICBkYXRhICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdnNjcm9sbERhdGE6IHtcbiAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgICBzaXplczoge30sXG4gICAgICAgIGtleUZpZWxkOiB0aGlzLmtleUZpZWxkLFxuICAgICAgICBzaW1wbGVBcnJheTogZmFsc2UsXG4gICAgICB9LFxuICAgIH1cbiAgfSxcblxuICBjb21wdXRlZDoge1xuICAgIHNpbXBsZUFycmF5LFxuXG4gICAgaXRlbXNXaXRoU2l6ZSAoKSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICAgIGNvbnN0IHsgaXRlbXMsIGtleUZpZWxkLCBzaW1wbGVBcnJheSB9ID0gdGhpcztcbiAgICAgIGNvbnN0IHNpemVzID0gdGhpcy52c2Nyb2xsRGF0YS5zaXplcztcbiAgICAgIGNvbnN0IGwgPSBpdGVtcy5sZW5ndGg7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICBjb25zdCBpdGVtID0gaXRlbXNbaV07XG4gICAgICAgIGNvbnN0IGlkID0gc2ltcGxlQXJyYXkgPyBpIDogaXRlbVtrZXlGaWVsZF07XG4gICAgICAgIGxldCBzaXplID0gc2l6ZXNbaWRdO1xuICAgICAgICBpZiAodHlwZW9mIHNpemUgPT09ICd1bmRlZmluZWQnICYmICF0aGlzLiRfdW5kZWZpbmVkTWFwW2lkXSkge1xuICAgICAgICAgIHNpemUgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICBpdGVtLFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIHNpemUsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH0sXG4gIH0sXG5cbiAgd2F0Y2g6IHtcbiAgICBpdGVtcyAoKSB7XG4gICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgfSxcblxuICAgIHNpbXBsZUFycmF5OiB7XG4gICAgICBoYW5kbGVyICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZzY3JvbGxEYXRhLnNpbXBsZUFycmF5ID0gdmFsdWU7XG4gICAgICB9LFxuICAgICAgaW1tZWRpYXRlOiB0cnVlLFxuICAgIH0sXG5cbiAgICBkaXJlY3Rpb24gKHZhbHVlKSB7XG4gICAgICB0aGlzLmZvcmNlVXBkYXRlKHRydWUpO1xuICAgIH0sXG5cbiAgICBpdGVtc1dpdGhTaXplIChuZXh0LCBwcmV2KSB7XG4gICAgICBjb25zdCBzY3JvbGxUb3AgPSB0aGlzLiRlbC5zY3JvbGxUb3A7XG5cbiAgICAgIC8vIENhbGN1bGF0ZSB0b3RhbCBkaWZmIGJldHdlZW4gcHJldiBhbmQgbmV4dCBzaXplc1xuICAgICAgLy8gb3ZlciBjdXJyZW50IHNjcm9sbCB0b3AuIFRoZW4gYWRkIGl0IHRvIHNjcm9sbFRvcCB0b1xuICAgICAgLy8gYXZvaWQganVtcGluZyB0aGUgY29udGVudHMgdGhhdCB0aGUgdXNlciBpcyBzZWVpbmcuXG4gICAgICBsZXQgcHJldkFjdGl2ZVRvcCA9IDA7IGxldCBhY3RpdmVUb3AgPSAwO1xuICAgICAgY29uc3QgbGVuZ3RoID0gTWF0aC5taW4obmV4dC5sZW5ndGgsIHByZXYubGVuZ3RoKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHByZXZBY3RpdmVUb3AgPj0gc2Nyb2xsVG9wKSB7XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBwcmV2QWN0aXZlVG9wICs9IHByZXZbaV0uc2l6ZSB8fCB0aGlzLm1pbkl0ZW1TaXplO1xuICAgICAgICBhY3RpdmVUb3AgKz0gbmV4dFtpXS5zaXplIHx8IHRoaXMubWluSXRlbVNpemU7XG4gICAgICB9XG4gICAgICBjb25zdCBvZmZzZXQgPSBhY3RpdmVUb3AgLSBwcmV2QWN0aXZlVG9wO1xuXG4gICAgICBpZiAob2Zmc2V0ID09PSAwKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICB0aGlzLiRlbC5zY3JvbGxUb3AgKz0gb2Zmc2V0O1xuICAgIH0sXG4gIH0sXG5cbiAgYmVmb3JlQ3JlYXRlICgpIHtcbiAgICB0aGlzLiRfdXBkYXRlcyA9IFtdO1xuICAgIHRoaXMuJF91bmRlZmluZWRTaXplcyA9IDA7XG4gICAgdGhpcy4kX3VuZGVmaW5lZE1hcCA9IHt9O1xuICAgIHRoaXMuJF9ldmVudHMgPSBtaXR0KCk7XG4gIH0sXG5cbiAgYWN0aXZhdGVkICgpIHtcbiAgICB0aGlzLnZzY3JvbGxEYXRhLmFjdGl2ZSA9IHRydWU7XG4gIH0sXG5cbiAgZGVhY3RpdmF0ZWQgKCkge1xuICAgIHRoaXMudnNjcm9sbERhdGEuYWN0aXZlID0gZmFsc2U7XG4gIH0sXG5cbiAgdW5tb3VudGVkICgpIHtcbiAgICB0aGlzLiRfZXZlbnRzLmFsbC5jbGVhcigpO1xuICB9LFxuXG4gIG1ldGhvZHM6IHtcbiAgICBvblNjcm9sbGVyUmVzaXplICgpIHtcbiAgICAgIGNvbnN0IHNjcm9sbGVyID0gdGhpcy4kcmVmcy5zY3JvbGxlcjtcbiAgICAgIGlmIChzY3JvbGxlcikge1xuICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgICB9XG4gICAgICB0aGlzLiRlbWl0KCdyZXNpemUnKTtcbiAgICB9LFxuXG4gICAgb25TY3JvbGxlclZpc2libGUgKCkge1xuICAgICAgdGhpcy4kX2V2ZW50cy5lbWl0KCd2c2Nyb2xsOnVwZGF0ZScsIHsgZm9yY2U6IGZhbHNlIH0pO1xuICAgICAgdGhpcy4kZW1pdCgndmlzaWJsZScpO1xuICAgIH0sXG5cbiAgICBmb3JjZVVwZGF0ZSAoY2xlYXIgPSBmYWxzZSkge1xuICAgICAgaWYgKGNsZWFyIHx8IHRoaXMuc2ltcGxlQXJyYXkpIHtcbiAgICAgICAgdGhpcy52c2Nyb2xsRGF0YS5zaXplcyA9IHt9O1xuICAgICAgfVxuICAgICAgdGhpcy4kX2V2ZW50cy5lbWl0KCd2c2Nyb2xsOnVwZGF0ZScsIHsgZm9yY2U6IHRydWUgfSk7XG4gICAgfSxcblxuICAgIHNjcm9sbFRvSXRlbSAoaW5kZXgpIHtcbiAgICAgIGNvbnN0IHNjcm9sbGVyID0gdGhpcy4kcmVmcy5zY3JvbGxlcjtcbiAgICAgIGlmIChzY3JvbGxlcikgc2Nyb2xsZXIuc2Nyb2xsVG9JdGVtKGluZGV4KTtcbiAgICB9LFxuXG4gICAgZ2V0SXRlbVNpemUgKGl0ZW0sIGluZGV4ID0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBpZCA9IHRoaXMuc2ltcGxlQXJyYXkgPyAoaW5kZXggIT0gbnVsbCA/IGluZGV4IDogdGhpcy5pdGVtcy5pbmRleE9mKGl0ZW0pKSA6IGl0ZW1bdGhpcy5rZXlGaWVsZF07XG4gICAgICByZXR1cm4gdGhpcy52c2Nyb2xsRGF0YS5zaXplc1tpZF0gfHwgMFxuICAgIH0sXG5cbiAgICBzY3JvbGxUb0JvdHRvbSAoKSB7XG4gICAgICBpZiAodGhpcy4kX3Njcm9sbGluZ1RvQm90dG9tKSByZXR1cm5cbiAgICAgIHRoaXMuJF9zY3JvbGxpbmdUb0JvdHRvbSA9IHRydWU7XG4gICAgICBjb25zdCBlbCA9IHRoaXMuJGVsO1xuICAgICAgLy8gSXRlbSBpcyBpbnNlcnRlZCB0byB0aGUgRE9NXG4gICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7XG4gICAgICAgIGVsLnNjcm9sbFRvcCA9IGVsLnNjcm9sbEhlaWdodCArIDUwMDA7XG4gICAgICAgIC8vIEl0ZW0gc2l6ZXMgYXJlIGNvbXB1dGVkXG4gICAgICAgIGNvbnN0IGNiID0gKCkgPT4ge1xuICAgICAgICAgIGVsLnNjcm9sbFRvcCA9IGVsLnNjcm9sbEhlaWdodCArIDUwMDA7XG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIGVsLnNjcm9sbFRvcCA9IGVsLnNjcm9sbEhlaWdodCArIDUwMDA7XG4gICAgICAgICAgICBpZiAodGhpcy4kX3VuZGVmaW5lZFNpemVzID09PSAwKSB7XG4gICAgICAgICAgICAgIHRoaXMuJF9zY3JvbGxpbmdUb0JvdHRvbSA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNiKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gIH0sXG59O1xuXG5mdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7XG4gIGNvbnN0IF9jb21wb25lbnRfUmVjeWNsZVNjcm9sbGVyID0gcmVzb2x2ZUNvbXBvbmVudChcIlJlY3ljbGVTY3JvbGxlclwiKTtcblxuICByZXR1cm4gKG9wZW5CbG9jaygpLCBjcmVhdGVCbG9jayhfY29tcG9uZW50X1JlY3ljbGVTY3JvbGxlciwgbWVyZ2VQcm9wcyh7XG4gICAgcmVmOiBcInNjcm9sbGVyXCIsXG4gICAgaXRlbXM6ICRvcHRpb25zLml0ZW1zV2l0aFNpemUsXG4gICAgXCJtaW4taXRlbS1zaXplXCI6ICRwcm9wcy5taW5JdGVtU2l6ZSxcbiAgICBkaXJlY3Rpb246IF9jdHguZGlyZWN0aW9uLFxuICAgIFwia2V5LWZpZWxkXCI6IFwiaWRcIixcbiAgICBcImxpc3QtdGFnXCI6IF9jdHgubGlzdFRhZyxcbiAgICBcIml0ZW0tdGFnXCI6IF9jdHguaXRlbVRhZ1xuICB9LCBfY3R4LiRhdHRycywge1xuICAgIG9uUmVzaXplOiAkb3B0aW9ucy5vblNjcm9sbGVyUmVzaXplLFxuICAgIG9uVmlzaWJsZTogJG9wdGlvbnMub25TY3JvbGxlclZpc2libGVcbiAgfSksIHtcbiAgICBkZWZhdWx0OiB3aXRoQ3R4KCh7IGl0ZW06IGl0ZW1XaXRoU2l6ZSwgaW5kZXgsIGFjdGl2ZSB9KSA9PiBbXG4gICAgICByZW5kZXJTbG90KF9jdHguJHNsb3RzLCBcImRlZmF1bHRcIiwgbm9ybWFsaXplUHJvcHMoZ3VhcmRSZWFjdGl2ZVByb3BzKHtcbiAgICAgICAgICBpdGVtOiBpdGVtV2l0aFNpemUuaXRlbSxcbiAgICAgICAgICBpbmRleCxcbiAgICAgICAgICBhY3RpdmUsXG4gICAgICAgICAgaXRlbVdpdGhTaXplXG4gICAgICAgIH0pKSlcbiAgICBdKSxcbiAgICBiZWZvcmU6IHdpdGhDdHgoKCkgPT4gW1xuICAgICAgcmVuZGVyU2xvdChfY3R4LiRzbG90cywgXCJiZWZvcmVcIilcbiAgICBdKSxcbiAgICBhZnRlcjogd2l0aEN0eCgoKSA9PiBbXG4gICAgICByZW5kZXJTbG90KF9jdHguJHNsb3RzLCBcImFmdGVyXCIpXG4gICAgXSksXG4gICAgZW1wdHk6IHdpdGhDdHgoKCkgPT4gW1xuICAgICAgcmVuZGVyU2xvdChfY3R4LiRzbG90cywgXCJlbXB0eVwiKVxuICAgIF0pLFxuICAgIF86IDMgLyogRk9SV0FSREVEICovXG4gIH0sIDE2IC8qIEZVTExfUFJPUFMgKi8sIFtcIml0ZW1zXCIsIFwibWluLWl0ZW0tc2l6ZVwiLCBcImRpcmVjdGlvblwiLCBcImxpc3QtdGFnXCIsIFwiaXRlbS10YWdcIiwgXCJvblJlc2l6ZVwiLCBcIm9uVmlzaWJsZVwiXSkpXG59XG5cbnNjcmlwdCQxLnJlbmRlciA9IHJlbmRlcjtcbnNjcmlwdCQxLl9fZmlsZSA9IFwic3JjL2NvbXBvbmVudHMvRHluYW1pY1Njcm9sbGVyLnZ1ZVwiO1xuXG52YXIgc2NyaXB0ID0ge1xuICBuYW1lOiAnRHluYW1pY1Njcm9sbGVySXRlbScsXG5cbiAgaW5qZWN0OiBbXG4gICAgJ3ZzY3JvbGxEYXRhJyxcbiAgICAndnNjcm9sbFBhcmVudCcsXG4gICAgJ3ZzY3JvbGxSZXNpemVPYnNlcnZlcicsXG4gIF0sXG5cbiAgcHJvcHM6IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdnVlL3JlcXVpcmUtcHJvcC10eXBlc1xuICAgIGl0ZW06IHtcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIH0sXG5cbiAgICB3YXRjaERhdGE6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIGlmIHRoZSB2aWV3IGlzIGFjdGl2ZWx5IHVzZWQgdG8gZGlzcGxheSBhbiBpdGVtLlxuICAgICAqL1xuICAgIGFjdGl2ZToge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIH0sXG5cbiAgICBpbmRleDoge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogdW5kZWZpbmVkLFxuICAgIH0sXG5cbiAgICBzaXplRGVwZW5kZW5jaWVzOiB7XG4gICAgICB0eXBlOiBbQXJyYXksIE9iamVjdF0sXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH0sXG5cbiAgICBlbWl0UmVzaXplOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgfSxcblxuICAgIHRhZzoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogJ2RpdicsXG4gICAgfSxcbiAgfSxcblxuICBlbWl0czogW1xuICAgICdyZXNpemUnLFxuICBdLFxuXG4gIGNvbXB1dGVkOiB7XG4gICAgaWQgKCkge1xuICAgICAgaWYgKHRoaXMudnNjcm9sbERhdGEuc2ltcGxlQXJyYXkpIHJldHVybiB0aGlzLmluZGV4XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gICAgICBpZiAodGhpcy52c2Nyb2xsRGF0YS5rZXlGaWVsZCBpbiB0aGlzLml0ZW0pIHJldHVybiB0aGlzLml0ZW1bdGhpcy52c2Nyb2xsRGF0YS5rZXlGaWVsZF1cbiAgICAgIHRocm93IG5ldyBFcnJvcihga2V5RmllbGQgJyR7dGhpcy52c2Nyb2xsRGF0YS5rZXlGaWVsZH0nIG5vdCBmb3VuZCBpbiB5b3VyIGl0ZW0uIFlvdSBzaG91bGQgc2V0IGEgdmFsaWQga2V5RmllbGQgcHJvcCBvbiB5b3VyIFNjcm9sbGVyYClcbiAgICB9LFxuXG4gICAgc2l6ZSAoKSB7XG4gICAgICByZXR1cm4gdGhpcy52c2Nyb2xsRGF0YS5zaXplc1t0aGlzLmlkXSB8fCAwXG4gICAgfSxcblxuICAgIGZpbmFsQWN0aXZlICgpIHtcbiAgICAgIHJldHVybiB0aGlzLmFjdGl2ZSAmJiB0aGlzLnZzY3JvbGxEYXRhLmFjdGl2ZVxuICAgIH0sXG4gIH0sXG5cbiAgd2F0Y2g6IHtcbiAgICB3YXRjaERhdGE6ICd1cGRhdGVXYXRjaERhdGEnLFxuXG4gICAgaWQgKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgdGhpcy4kZWwuJF92c19pZCA9IHRoaXMuaWQ7XG4gICAgICBpZiAoIXRoaXMuc2l6ZSkge1xuICAgICAgICB0aGlzLm9uRGF0YVVwZGF0ZSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy4kX3NpemVPYnNlcnZlZCkge1xuICAgICAgICAvLyBJbiBjYXNlIHRoZSBvbGQgaXRlbSBoYWQgdGhlIHNhbWUgc2l6ZSwgaXQgd29uJ3QgdHJpZ2dlciB0aGUgUmVzaXplT2JzZXJ2ZXJcbiAgICAgICAgLy8gc2luY2Ugd2UgYXJlIHJldXNpbmcgdGhlIHNhbWUgRE9NIG5vZGVcbiAgICAgICAgY29uc3Qgb2xkU2l6ZSA9IHRoaXMudnNjcm9sbERhdGEuc2l6ZXNbb2xkVmFsdWVdO1xuICAgICAgICBjb25zdCBzaXplID0gdGhpcy52c2Nyb2xsRGF0YS5zaXplc1t2YWx1ZV07XG4gICAgICAgIGlmIChvbGRTaXplICE9IG51bGwgJiYgb2xkU2l6ZSAhPT0gc2l6ZSkge1xuICAgICAgICAgIHRoaXMuYXBwbHlTaXplKG9sZFNpemUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIGZpbmFsQWN0aXZlICh2YWx1ZSkge1xuICAgICAgaWYgKCF0aGlzLnNpemUpIHtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgaWYgKCF0aGlzLnZzY3JvbGxQYXJlbnQuJF91bmRlZmluZWRNYXBbdGhpcy5pZF0pIHtcbiAgICAgICAgICAgIHRoaXMudnNjcm9sbFBhcmVudC4kX3VuZGVmaW5lZFNpemVzKys7XG4gICAgICAgICAgICB0aGlzLnZzY3JvbGxQYXJlbnQuJF91bmRlZmluZWRNYXBbdGhpcy5pZF0gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy52c2Nyb2xsUGFyZW50LiRfdW5kZWZpbmVkTWFwW3RoaXMuaWRdKSB7XG4gICAgICAgICAgICB0aGlzLnZzY3JvbGxQYXJlbnQuJF91bmRlZmluZWRTaXplcy0tO1xuICAgICAgICAgICAgdGhpcy52c2Nyb2xsUGFyZW50LiRfdW5kZWZpbmVkTWFwW3RoaXMuaWRdID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnZzY3JvbGxSZXNpemVPYnNlcnZlcikge1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICB0aGlzLm9ic2VydmVTaXplKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy51bm9ic2VydmVTaXplKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodmFsdWUgJiYgdGhpcy4kX3BlbmRpbmdWU2Nyb2xsVXBkYXRlID09PSB0aGlzLmlkKSB7XG4gICAgICAgIHRoaXMudXBkYXRlU2l6ZSgpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG5cbiAgY3JlYXRlZCAoKSB7XG4gICAgaWYgKHRoaXMuJGlzU2VydmVyKSByZXR1cm5cblxuICAgIHRoaXMuJF9mb3JjZU5leHRWU2Nyb2xsVXBkYXRlID0gbnVsbDtcbiAgICB0aGlzLnVwZGF0ZVdhdGNoRGF0YSgpO1xuXG4gICAgaWYgKCF0aGlzLnZzY3JvbGxSZXNpemVPYnNlcnZlcikge1xuICAgICAgZm9yIChjb25zdCBrIGluIHRoaXMuc2l6ZURlcGVuZGVuY2llcykge1xuICAgICAgICB0aGlzLiR3YXRjaCgoKSA9PiB0aGlzLnNpemVEZXBlbmRlbmNpZXNba10sIHRoaXMub25EYXRhVXBkYXRlKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy52c2Nyb2xsUGFyZW50LiRfZXZlbnRzLm9uKCd2c2Nyb2xsOnVwZGF0ZScsIHRoaXMub25Wc2Nyb2xsVXBkYXRlKTtcbiAgICB9XG4gIH0sXG5cbiAgbW91bnRlZCAoKSB7XG4gICAgaWYgKHRoaXMuZmluYWxBY3RpdmUpIHtcbiAgICAgIHRoaXMudXBkYXRlU2l6ZSgpO1xuICAgICAgdGhpcy5vYnNlcnZlU2l6ZSgpO1xuICAgIH1cbiAgfSxcblxuICBiZWZvcmVVbm1vdW50ICgpIHtcbiAgICB0aGlzLnZzY3JvbGxQYXJlbnQuJF9ldmVudHMub2ZmKCd2c2Nyb2xsOnVwZGF0ZScsIHRoaXMub25Wc2Nyb2xsVXBkYXRlKTtcbiAgICB0aGlzLnVub2JzZXJ2ZVNpemUoKTtcbiAgfSxcblxuICBtZXRob2RzOiB7XG4gICAgdXBkYXRlU2l6ZSAoKSB7XG4gICAgICBpZiAodGhpcy5maW5hbEFjdGl2ZSkge1xuICAgICAgICBpZiAodGhpcy4kX3BlbmRpbmdTaXplVXBkYXRlICE9PSB0aGlzLmlkKSB7XG4gICAgICAgICAgdGhpcy4kX3BlbmRpbmdTaXplVXBkYXRlID0gdGhpcy5pZDtcbiAgICAgICAgICB0aGlzLiRfZm9yY2VOZXh0VlNjcm9sbFVwZGF0ZSA9IG51bGw7XG4gICAgICAgICAgdGhpcy4kX3BlbmRpbmdWU2Nyb2xsVXBkYXRlID0gbnVsbDtcbiAgICAgICAgICB0aGlzLmNvbXB1dGVTaXplKHRoaXMuaWQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLiRfZm9yY2VOZXh0VlNjcm9sbFVwZGF0ZSA9IHRoaXMuaWQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHVwZGF0ZVdhdGNoRGF0YSAoKSB7XG4gICAgICBpZiAodGhpcy53YXRjaERhdGEgJiYgIXRoaXMudnNjcm9sbFJlc2l6ZU9ic2VydmVyKSB7XG4gICAgICAgIHRoaXMuJF93YXRjaERhdGEgPSB0aGlzLiR3YXRjaCgnaXRlbScsICgpID0+IHtcbiAgICAgICAgICB0aGlzLm9uRGF0YVVwZGF0ZSgpO1xuICAgICAgICB9LCB7XG4gICAgICAgICAgZGVlcDogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuJF93YXRjaERhdGEpIHtcbiAgICAgICAgdGhpcy4kX3dhdGNoRGF0YSgpO1xuICAgICAgICB0aGlzLiRfd2F0Y2hEYXRhID0gbnVsbDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgb25Wc2Nyb2xsVXBkYXRlICh7IGZvcmNlIH0pIHtcbiAgICAgIC8vIElmIG5vdCBhY3RpdmUsIHNlY2hlZHVsZSBhIHNpemUgdXBkYXRlIHdoZW4gaXQgYmVjb21lcyBhY3RpdmVcbiAgICAgIGlmICghdGhpcy5maW5hbEFjdGl2ZSAmJiBmb3JjZSkge1xuICAgICAgICB0aGlzLiRfcGVuZGluZ1ZTY3JvbGxVcGRhdGUgPSB0aGlzLmlkO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy4kX2ZvcmNlTmV4dFZTY3JvbGxVcGRhdGUgPT09IHRoaXMuaWQgfHwgZm9yY2UgfHwgIXRoaXMuc2l6ZSkge1xuICAgICAgICB0aGlzLnVwZGF0ZVNpemUoKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgb25EYXRhVXBkYXRlICgpIHtcbiAgICAgIHRoaXMudXBkYXRlU2l6ZSgpO1xuICAgIH0sXG5cbiAgICBjb21wdXRlU2l6ZSAoaWQpIHtcbiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuaWQgPT09IGlkKSB7XG4gICAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLiRlbC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLiRlbC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgdGhpcy5hcHBseVdpZHRoSGVpZ2h0KHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJF9wZW5kaW5nU2l6ZVVwZGF0ZSA9IG51bGw7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgYXBwbHlXaWR0aEhlaWdodCAod2lkdGgsIGhlaWdodCkge1xuICAgICAgY29uc3Qgc2l6ZSA9IH5+KHRoaXMudnNjcm9sbFBhcmVudC5kaXJlY3Rpb24gPT09ICd2ZXJ0aWNhbCcgPyBoZWlnaHQgOiB3aWR0aCk7XG4gICAgICBpZiAoc2l6ZSAmJiB0aGlzLnNpemUgIT09IHNpemUpIHtcbiAgICAgICAgdGhpcy5hcHBseVNpemUoc2l6ZSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGFwcGx5U2l6ZSAoc2l6ZSkge1xuICAgICAgaWYgKHRoaXMudnNjcm9sbFBhcmVudC4kX3VuZGVmaW5lZE1hcFt0aGlzLmlkXSkge1xuICAgICAgICB0aGlzLnZzY3JvbGxQYXJlbnQuJF91bmRlZmluZWRTaXplcy0tO1xuICAgICAgICB0aGlzLnZzY3JvbGxQYXJlbnQuJF91bmRlZmluZWRNYXBbdGhpcy5pZF0gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICB0aGlzLnZzY3JvbGxEYXRhLnNpemVzW3RoaXMuaWRdID0gc2l6ZTtcbiAgICAgIGlmICh0aGlzLmVtaXRSZXNpemUpIHRoaXMuJGVtaXQoJ3Jlc2l6ZScsIHRoaXMuaWQpO1xuICAgIH0sXG5cbiAgICBvYnNlcnZlU2l6ZSAoKSB7XG4gICAgICBpZiAoIXRoaXMudnNjcm9sbFJlc2l6ZU9ic2VydmVyKSByZXR1cm5cbiAgICAgIGlmICh0aGlzLiRfc2l6ZU9ic2VydmVkKSByZXR1cm5cbiAgICAgIHRoaXMudnNjcm9sbFJlc2l6ZU9ic2VydmVyLm9ic2VydmUodGhpcy4kZWwpO1xuICAgICAgdGhpcy4kZWwuJF92c19pZCA9IHRoaXMuaWQ7XG4gICAgICB0aGlzLiRlbC4kX3ZzX29uUmVzaXplID0gdGhpcy5vblJlc2l6ZTtcbiAgICAgIHRoaXMuJF9zaXplT2JzZXJ2ZWQgPSB0cnVlO1xuICAgIH0sXG5cbiAgICB1bm9ic2VydmVTaXplICgpIHtcbiAgICAgIGlmICghdGhpcy52c2Nyb2xsUmVzaXplT2JzZXJ2ZXIpIHJldHVyblxuICAgICAgaWYgKCF0aGlzLiRfc2l6ZU9ic2VydmVkKSByZXR1cm5cbiAgICAgIHRoaXMudnNjcm9sbFJlc2l6ZU9ic2VydmVyLnVub2JzZXJ2ZSh0aGlzLiRlbCk7XG4gICAgICB0aGlzLiRlbC4kX3ZzX29uUmVzaXplID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy4kX3NpemVPYnNlcnZlZCA9IGZhbHNlO1xuICAgIH0sXG5cbiAgICBvblJlc2l6ZSAoaWQsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIGlmICh0aGlzLmlkID09PSBpZCkge1xuICAgICAgICB0aGlzLmFwcGx5V2lkdGhIZWlnaHQod2lkdGgsIGhlaWdodCk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcblxuICByZW5kZXIgKCkge1xuICAgIHJldHVybiBoKHRoaXMudGFnLCB0aGlzLiRzbG90cy5kZWZhdWx0KCkpXG4gIH0sXG59O1xuXG5zY3JpcHQuX19maWxlID0gXCJzcmMvY29tcG9uZW50cy9EeW5hbWljU2Nyb2xsZXJJdGVtLnZ1ZVwiO1xuXG5mdW5jdGlvbiBJZFN0YXRlICgpIHtcbiAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgIF9yZWYkaWRQcm9wID0gX3JlZi5pZFByb3AsXG4gICAgaWRQcm9wID0gX3JlZiRpZFByb3AgPT09IHZvaWQgMCA/IGZ1bmN0aW9uICh2bSkge1xuICAgICAgcmV0dXJuIHZtLml0ZW0uaWQ7XG4gICAgfSA6IF9yZWYkaWRQcm9wO1xuICB2YXIgc3RvcmUgPSByZWFjdGl2ZSh7fSk7XG5cbiAgLy8gQHZ1ZS9jb21wb25lbnRcbiAgcmV0dXJuIHtcbiAgICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWRTdGF0ZTogbnVsbFxuICAgICAgfTtcbiAgICB9LFxuICAgIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgdGhpcy4kX2lkID0gbnVsbDtcbiAgICAgIGlmICh0eXBlb2YgaWRQcm9wID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMuJF9nZXRJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gaWRQcm9wLmNhbGwoX3RoaXMsIF90aGlzKTtcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuJF9nZXRJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXNbaWRQcm9wXTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHRoaXMuJHdhdGNoKHRoaXMuJF9nZXRJZCwge1xuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbHVlKSB7XG4gICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG4gICAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMyLiRfaWQgPSB2YWx1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgaW1tZWRpYXRlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIHRoaXMuJF91cGRhdGVJZFN0YXRlKCk7XG4gICAgfSxcbiAgICBiZWZvcmVVcGRhdGU6IGZ1bmN0aW9uIGJlZm9yZVVwZGF0ZSgpIHtcbiAgICAgIHRoaXMuJF91cGRhdGVJZFN0YXRlKCk7XG4gICAgfSxcbiAgICBtZXRob2RzOiB7XG4gICAgICAvKipcbiAgICAgICAqIEluaXRpYWxpemUgYW4gaWRTdGF0ZVxuICAgICAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSBpZCBVbmlxdWUgaWQgZm9yIHRoZSBkYXRhXG4gICAgICAgKi8kX2lkU3RhdGVJbml0OiBmdW5jdGlvbiAkX2lkU3RhdGVJbml0KGlkKSB7XG4gICAgICAgIHZhciBmYWN0b3J5ID0gdGhpcy4kb3B0aW9ucy5pZFN0YXRlO1xuICAgICAgICBpZiAodHlwZW9mIGZhY3RvcnkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB2YXIgZGF0YSA9IGZhY3RvcnkuY2FsbCh0aGlzLCB0aGlzKTtcbiAgICAgICAgICBzdG9yZVtpZF0gPSBkYXRhO1xuICAgICAgICAgIHRoaXMuJF9pZCA9IGlkO1xuICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignW21peGluIElkU3RhdGVdIE1pc3NpbmcgYGlkU3RhdGVgIGZ1bmN0aW9uIG9uIGNvbXBvbmVudCBkZWZpbml0aW9uLicpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBFbnN1cmUgaWRTdGF0ZSBpcyBjcmVhdGVkIGFuZCB1cC10by1kYXRlXG4gICAgICAgKi8kX3VwZGF0ZUlkU3RhdGU6IGZ1bmN0aW9uICRfdXBkYXRlSWRTdGF0ZSgpIHtcbiAgICAgICAgdmFyIGlkID0gdGhpcy4kX2dldElkKCk7XG4gICAgICAgIGlmIChpZCA9PSBudWxsKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFwiTm8gaWQgZm91bmQgZm9yIElkU3RhdGUgd2l0aCBpZFByb3A6ICdcIi5jb25jYXQoaWRQcm9wLCBcIicuXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWQgIT09IHRoaXMuJF9pZCkge1xuICAgICAgICAgIGlmICghc3RvcmVbaWRdKSB7XG4gICAgICAgICAgICB0aGlzLiRfaWRTdGF0ZUluaXQoaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmlkU3RhdGUgPSBzdG9yZVtpZF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyQ29tcG9uZW50cyhhcHAsIHByZWZpeCkge1xuICBhcHAuY29tcG9uZW50KFwiXCIuY29uY2F0KHByZWZpeCwgXCJyZWN5Y2xlLXNjcm9sbGVyXCIpLCBzY3JpcHQkMik7XG4gIGFwcC5jb21wb25lbnQoXCJcIi5jb25jYXQocHJlZml4LCBcIlJlY3ljbGVTY3JvbGxlclwiKSwgc2NyaXB0JDIpO1xuICBhcHAuY29tcG9uZW50KFwiXCIuY29uY2F0KHByZWZpeCwgXCJkeW5hbWljLXNjcm9sbGVyXCIpLCBzY3JpcHQkMSk7XG4gIGFwcC5jb21wb25lbnQoXCJcIi5jb25jYXQocHJlZml4LCBcIkR5bmFtaWNTY3JvbGxlclwiKSwgc2NyaXB0JDEpO1xuICBhcHAuY29tcG9uZW50KFwiXCIuY29uY2F0KHByZWZpeCwgXCJkeW5hbWljLXNjcm9sbGVyLWl0ZW1cIiksIHNjcmlwdCk7XG4gIGFwcC5jb21wb25lbnQoXCJcIi5jb25jYXQocHJlZml4LCBcIkR5bmFtaWNTY3JvbGxlckl0ZW1cIiksIHNjcmlwdCk7XG59XG52YXIgcGx1Z2luID0ge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgdmVyc2lvbjogXCIyLjAuMC1iZXRhLjhcIixcbiAgaW5zdGFsbDogZnVuY3Rpb24gaW5zdGFsbChhcHAsIG9wdGlvbnMpIHtcbiAgICB2YXIgZmluYWxPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwge1xuICAgICAgaW5zdGFsbENvbXBvbmVudHM6IHRydWUsXG4gICAgICBjb21wb25lbnRzUHJlZml4OiAnJ1xuICAgIH0sIG9wdGlvbnMpO1xuICAgIGZvciAodmFyIGtleSBpbiBmaW5hbE9wdGlvbnMpIHtcbiAgICAgIGlmICh0eXBlb2YgZmluYWxPcHRpb25zW2tleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbmZpZ1trZXldID0gZmluYWxPcHRpb25zW2tleV07XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmaW5hbE9wdGlvbnMuaW5zdGFsbENvbXBvbmVudHMpIHtcbiAgICAgIHJlZ2lzdGVyQ29tcG9uZW50cyhhcHAsIGZpbmFsT3B0aW9ucy5jb21wb25lbnRzUHJlZml4KTtcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydCB7IHNjcmlwdCQxIGFzIER5bmFtaWNTY3JvbGxlciwgc2NyaXB0IGFzIER5bmFtaWNTY3JvbGxlckl0ZW0sIElkU3RhdGUsIHNjcmlwdCQyIGFzIFJlY3ljbGVTY3JvbGxlciwgcGx1Z2luIGFzIGRlZmF1bHQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZ1ZS12aXJ0dWFsLXNjcm9sbGVyLmVzbS5qcy5tYXBcbiIsIi8qIVxuICogcGluaWEgdjIuMy4xXG4gKiAoYykgMjAyNSBFZHVhcmRvIFNhbiBNYXJ0aW4gTW9yb3RlXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuaW1wb3J0IHsgaGFzSW5qZWN0aW9uQ29udGV4dCwgaW5qZWN0LCB0b1Jhdywgd2F0Y2gsIHVucmVmLCBtYXJrUmF3LCBlZmZlY3RTY29wZSwgcmVmLCBpc1Z1ZTIsIGlzUmVmLCBpc1JlYWN0aXZlLCBzZXQsIGdldEN1cnJlbnRTY29wZSwgb25TY29wZURpc3Bvc2UsIGdldEN1cnJlbnRJbnN0YW5jZSwgcmVhY3RpdmUsIHRvUmVmLCBkZWwsIG5leHRUaWNrLCBjb21wdXRlZCwgdG9SZWZzIH0gZnJvbSAndnVlLWRlbWknO1xuaW1wb3J0IHsgc2V0dXBEZXZ0b29sc1BsdWdpbiB9IGZyb20gJ0B2dWUvZGV2dG9vbHMtYXBpJztcblxuLyoqXG4gKiBzZXRBY3RpdmVQaW5pYSBtdXN0IGJlIGNhbGxlZCB0byBoYW5kbGUgU1NSIGF0IHRoZSB0b3Agb2YgZnVuY3Rpb25zIGxpa2VcbiAqIGBmZXRjaGAsIGBzZXR1cGAsIGBzZXJ2ZXJQcmVmZXRjaGAgYW5kIG90aGVyc1xuICovXG5sZXQgYWN0aXZlUGluaWE7XG4vKipcbiAqIFNldHMgb3IgdW5zZXRzIHRoZSBhY3RpdmUgcGluaWEuIFVzZWQgaW4gU1NSIGFuZCBpbnRlcm5hbGx5IHdoZW4gY2FsbGluZ1xuICogYWN0aW9ucyBhbmQgZ2V0dGVyc1xuICpcbiAqIEBwYXJhbSBwaW5pYSAtIFBpbmlhIGluc3RhbmNlXG4gKi9cbi8vIEB0cy1leHBlY3QtZXJyb3I6IGNhbm5vdCBjb25zdHJhaW4gdGhlIHR5cGUgb2YgdGhlIHJldHVyblxuY29uc3Qgc2V0QWN0aXZlUGluaWEgPSAocGluaWEpID0+IChhY3RpdmVQaW5pYSA9IHBpbmlhKTtcbi8qKlxuICogR2V0IHRoZSBjdXJyZW50bHkgYWN0aXZlIHBpbmlhIGlmIHRoZXJlIGlzIGFueS5cbiAqL1xuY29uc3QgZ2V0QWN0aXZlUGluaWEgPSAoKSA9PiAoaGFzSW5qZWN0aW9uQ29udGV4dCgpICYmIGluamVjdChwaW5pYVN5bWJvbCkpIHx8IGFjdGl2ZVBpbmlhO1xuY29uc3QgcGluaWFTeW1ib2wgPSAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gU3ltYm9sKCdwaW5pYScpIDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gU3ltYm9sKCkpO1xuXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbm8pIHtcbiAgICByZXR1cm4gKG8gJiZcbiAgICAgICAgdHlwZW9mIG8gPT09ICdvYmplY3QnICYmXG4gICAgICAgIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScgJiZcbiAgICAgICAgdHlwZW9mIG8udG9KU09OICE9PSAnZnVuY3Rpb24nKTtcbn1cbi8vIHR5cGUgRGVlcFJlYWRvbmx5PFQ+ID0geyByZWFkb25seSBbUCBpbiBrZXlvZiBUXTogRGVlcFJlYWRvbmx5PFRbUF0+IH1cbi8vIFRPRE86IGNhbiB3ZSBjaGFuZ2UgdGhlc2UgdG8gbnVtYmVycz9cbi8qKlxuICogUG9zc2libGUgdHlwZXMgZm9yIFN1YnNjcmlwdGlvbkNhbGxiYWNrXG4gKi9cbnZhciBNdXRhdGlvblR5cGU7XG4oZnVuY3Rpb24gKE11dGF0aW9uVHlwZSkge1xuICAgIC8qKlxuICAgICAqIERpcmVjdCBtdXRhdGlvbiBvZiB0aGUgc3RhdGU6XG4gICAgICpcbiAgICAgKiAtIGBzdG9yZS5uYW1lID0gJ25ldyBuYW1lJ2BcbiAgICAgKiAtIGBzdG9yZS4kc3RhdGUubmFtZSA9ICduZXcgbmFtZSdgXG4gICAgICogLSBgc3RvcmUubGlzdC5wdXNoKCduZXcgaXRlbScpYFxuICAgICAqL1xuICAgIE11dGF0aW9uVHlwZVtcImRpcmVjdFwiXSA9IFwiZGlyZWN0XCI7XG4gICAgLyoqXG4gICAgICogTXV0YXRlZCB0aGUgc3RhdGUgd2l0aCBgJHBhdGNoYCBhbmQgYW4gb2JqZWN0XG4gICAgICpcbiAgICAgKiAtIGBzdG9yZS4kcGF0Y2goeyBuYW1lOiAnbmV3TmFtZScgfSlgXG4gICAgICovXG4gICAgTXV0YXRpb25UeXBlW1wicGF0Y2hPYmplY3RcIl0gPSBcInBhdGNoIG9iamVjdFwiO1xuICAgIC8qKlxuICAgICAqIE11dGF0ZWQgdGhlIHN0YXRlIHdpdGggYCRwYXRjaGAgYW5kIGEgZnVuY3Rpb25cbiAgICAgKlxuICAgICAqIC0gYHN0b3JlLiRwYXRjaChzdGF0ZSA9PiBzdGF0ZS5uYW1lID0gJ25ld05hbWUnKWBcbiAgICAgKi9cbiAgICBNdXRhdGlvblR5cGVbXCJwYXRjaEZ1bmN0aW9uXCJdID0gXCJwYXRjaCBmdW5jdGlvblwiO1xuICAgIC8vIG1heWJlIHJlc2V0PyBmb3IgJHN0YXRlID0ge30gYW5kICRyZXNldFxufSkoTXV0YXRpb25UeXBlIHx8IChNdXRhdGlvblR5cGUgPSB7fSkpO1xuXG5jb25zdCBJU19DTElFTlQgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJztcblxuLypcbiAqIEZpbGVTYXZlci5qcyBBIHNhdmVBcygpIEZpbGVTYXZlciBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBPcmlnaW5hbGx5IGJ5IEVsaSBHcmV5LCBhZGFwdGVkIGFzIGFuIEVTTSBtb2R1bGUgYnkgRWR1YXJkbyBTYW4gTWFydGluXG4gKiBNb3JvdGUuXG4gKlxuICogTGljZW5zZSA6IE1JVFxuICovXG4vLyBUaGUgb25lIGFuZCBvbmx5IHdheSBvZiBnZXR0aW5nIGdsb2JhbCBzY29wZSBpbiBhbGwgZW52aXJvbm1lbnRzXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvMzI3NzE4Mi8xMDA4OTk5XG5jb25zdCBfZ2xvYmFsID0gLyojX19QVVJFX18qLyAoKCkgPT4gdHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LndpbmRvdyA9PT0gd2luZG93XG4gICAgPyB3aW5kb3dcbiAgICA6IHR5cGVvZiBzZWxmID09PSAnb2JqZWN0JyAmJiBzZWxmLnNlbGYgPT09IHNlbGZcbiAgICAgICAgPyBzZWxmXG4gICAgICAgIDogdHlwZW9mIGdsb2JhbCA9PT0gJ29iamVjdCcgJiYgZ2xvYmFsLmdsb2JhbCA9PT0gZ2xvYmFsXG4gICAgICAgICAgICA/IGdsb2JhbFxuICAgICAgICAgICAgOiB0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCdcbiAgICAgICAgICAgICAgICA/IGdsb2JhbFRoaXNcbiAgICAgICAgICAgICAgICA6IHsgSFRNTEVsZW1lbnQ6IG51bGwgfSkoKTtcbmZ1bmN0aW9uIGJvbShibG9iLCB7IGF1dG9Cb20gPSBmYWxzZSB9ID0ge30pIHtcbiAgICAvLyBwcmVwZW5kIEJPTSBmb3IgVVRGLTggWE1MIGFuZCB0ZXh0LyogdHlwZXMgKGluY2x1ZGluZyBIVE1MKVxuICAgIC8vIG5vdGU6IHlvdXIgYnJvd3NlciB3aWxsIGF1dG9tYXRpY2FsbHkgY29udmVydCBVVEYtMTYgVStGRUZGIHRvIEVGIEJCIEJGXG4gICAgaWYgKGF1dG9Cb20gJiZcbiAgICAgICAgL15cXHMqKD86dGV4dFxcL1xcUyp8YXBwbGljYXRpb25cXC94bWx8XFxTKlxcL1xcUypcXCt4bWwpXFxzKjsuKmNoYXJzZXRcXHMqPVxccyp1dGYtOC9pLnRlc3QoYmxvYi50eXBlKSkge1xuICAgICAgICByZXR1cm4gbmV3IEJsb2IoW1N0cmluZy5mcm9tQ2hhckNvZGUoMHhmZWZmKSwgYmxvYl0sIHsgdHlwZTogYmxvYi50eXBlIH0pO1xuICAgIH1cbiAgICByZXR1cm4gYmxvYjtcbn1cbmZ1bmN0aW9uIGRvd25sb2FkKHVybCwgbmFtZSwgb3B0cykge1xuICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYic7XG4gICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2F2ZUFzKHhoci5yZXNwb25zZSwgbmFtZSwgb3B0cyk7XG4gICAgfTtcbiAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignY291bGQgbm90IGRvd25sb2FkIGZpbGUnKTtcbiAgICB9O1xuICAgIHhoci5zZW5kKCk7XG59XG5mdW5jdGlvbiBjb3JzRW5hYmxlZCh1cmwpIHtcbiAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAvLyB1c2Ugc3luYyB0byBhdm9pZCBwb3B1cCBibG9ja2VyXG4gICAgeGhyLm9wZW4oJ0hFQUQnLCB1cmwsIGZhbHNlKTtcbiAgICB0cnkge1xuICAgICAgICB4aHIuc2VuZCgpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkgeyB9XG4gICAgcmV0dXJuIHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPD0gMjk5O1xufVxuLy8gYGEuY2xpY2soKWAgZG9lc24ndCB3b3JrIGZvciBhbGwgYnJvd3NlcnMgKCM0NjUpXG5mdW5jdGlvbiBjbGljayhub2RlKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgbm9kZS5kaXNwYXRjaEV2ZW50KG5ldyBNb3VzZUV2ZW50KCdjbGljaycpKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc3QgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ01vdXNlRXZlbnRzJyk7XG4gICAgICAgIGV2dC5pbml0TW91c2VFdmVudCgnY2xpY2snLCB0cnVlLCB0cnVlLCB3aW5kb3csIDAsIDAsIDAsIDgwLCAyMCwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIDAsIG51bGwpO1xuICAgICAgICBub2RlLmRpc3BhdGNoRXZlbnQoZXZ0KTtcbiAgICB9XG59XG5jb25zdCBfbmF2aWdhdG9yID0gdHlwZW9mIG5hdmlnYXRvciA9PT0gJ29iamVjdCcgPyBuYXZpZ2F0b3IgOiB7IHVzZXJBZ2VudDogJycgfTtcbi8vIERldGVjdCBXZWJWaWV3IGluc2lkZSBhIG5hdGl2ZSBtYWNPUyBhcHAgYnkgcnVsaW5nIG91dCBhbGwgYnJvd3NlcnNcbi8vIFdlIGp1c3QgbmVlZCB0byBjaGVjayBmb3IgJ1NhZmFyaScgYmVjYXVzZSBhbGwgb3RoZXIgYnJvd3NlcnMgKGJlc2lkZXMgRmlyZWZveCkgaW5jbHVkZSB0aGF0IHRvb1xuLy8gaHR0cHM6Ly93d3cud2hhdGlzbXlicm93c2VyLmNvbS9ndWlkZXMvdGhlLWxhdGVzdC11c2VyLWFnZW50L21hY29zXG5jb25zdCBpc01hY09TV2ViVmlldyA9IC8qI19fUFVSRV9fKi8gKCgpID0+IC9NYWNpbnRvc2gvLnRlc3QoX25hdmlnYXRvci51c2VyQWdlbnQpICYmXG4gICAgL0FwcGxlV2ViS2l0Ly50ZXN0KF9uYXZpZ2F0b3IudXNlckFnZW50KSAmJlxuICAgICEvU2FmYXJpLy50ZXN0KF9uYXZpZ2F0b3IudXNlckFnZW50KSkoKTtcbmNvbnN0IHNhdmVBcyA9ICFJU19DTElFTlRcbiAgICA/ICgpID0+IHsgfSAvLyBub29wXG4gICAgOiAvLyBVc2UgZG93bmxvYWQgYXR0cmlidXRlIGZpcnN0IGlmIHBvc3NpYmxlICgjMTkzIEx1bWlhIG1vYmlsZSkgdW5sZXNzIHRoaXMgaXMgYSBtYWNPUyBXZWJWaWV3IG9yIG1pbmkgcHJvZ3JhbVxuICAgICAgICB0eXBlb2YgSFRNTEFuY2hvckVsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICAnZG93bmxvYWQnIGluIEhUTUxBbmNob3JFbGVtZW50LnByb3RvdHlwZSAmJlxuICAgICAgICAgICAgIWlzTWFjT1NXZWJWaWV3XG4gICAgICAgICAgICA/IGRvd25sb2FkU2F2ZUFzXG4gICAgICAgICAgICA6IC8vIFVzZSBtc1NhdmVPck9wZW5CbG9iIGFzIGEgc2Vjb25kIGFwcHJvYWNoXG4gICAgICAgICAgICAgICAgJ21zU2F2ZU9yT3BlbkJsb2InIGluIF9uYXZpZ2F0b3JcbiAgICAgICAgICAgICAgICAgICAgPyBtc1NhdmVBc1xuICAgICAgICAgICAgICAgICAgICA6IC8vIEZhbGxiYWNrIHRvIHVzaW5nIEZpbGVSZWFkZXIgYW5kIGEgcG9wdXBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVTYXZlclNhdmVBcztcbmZ1bmN0aW9uIGRvd25sb2FkU2F2ZUFzKGJsb2IsIG5hbWUgPSAnZG93bmxvYWQnLCBvcHRzKSB7XG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICBhLmRvd25sb2FkID0gbmFtZTtcbiAgICBhLnJlbCA9ICdub29wZW5lcic7IC8vIHRhYm5hYmJpbmdcbiAgICAvLyBUT0RPOiBkZXRlY3QgY2hyb21lIGV4dGVuc2lvbnMgJiBwYWNrYWdlZCBhcHBzXG4gICAgLy8gYS50YXJnZXQgPSAnX2JsYW5rJ1xuICAgIGlmICh0eXBlb2YgYmxvYiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgLy8gU3VwcG9ydCByZWd1bGFyIGxpbmtzXG4gICAgICAgIGEuaHJlZiA9IGJsb2I7XG4gICAgICAgIGlmIChhLm9yaWdpbiAhPT0gbG9jYXRpb24ub3JpZ2luKSB7XG4gICAgICAgICAgICBpZiAoY29yc0VuYWJsZWQoYS5ocmVmKSkge1xuICAgICAgICAgICAgICAgIGRvd25sb2FkKGJsb2IsIG5hbWUsIG9wdHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYS50YXJnZXQgPSAnX2JsYW5rJztcbiAgICAgICAgICAgICAgICBjbGljayhhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNsaWNrKGEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBTdXBwb3J0IGJsb2JzXG4gICAgICAgIGEuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChhLmhyZWYpO1xuICAgICAgICB9LCA0ZTQpOyAvLyA0MHNcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjbGljayhhKTtcbiAgICAgICAgfSwgMCk7XG4gICAgfVxufVxuZnVuY3Rpb24gbXNTYXZlQXMoYmxvYiwgbmFtZSA9ICdkb3dubG9hZCcsIG9wdHMpIHtcbiAgICBpZiAodHlwZW9mIGJsb2IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmIChjb3JzRW5hYmxlZChibG9iKSkge1xuICAgICAgICAgICAgZG93bmxvYWQoYmxvYiwgbmFtZSwgb3B0cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgYS5ocmVmID0gYmxvYjtcbiAgICAgICAgICAgIGEudGFyZ2V0ID0gJ19ibGFuayc7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjbGljayhhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBAdHMtaWdub3JlOiB3b3JrcyBvbiB3aW5kb3dzXG4gICAgICAgIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGJvbShibG9iLCBvcHRzKSwgbmFtZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gZmlsZVNhdmVyU2F2ZUFzKGJsb2IsIG5hbWUsIG9wdHMsIHBvcHVwKSB7XG4gICAgLy8gT3BlbiBhIHBvcHVwIGltbWVkaWF0ZWx5IGRvIGdvIGFyb3VuZCBwb3B1cCBibG9ja2VyXG4gICAgLy8gTW9zdGx5IG9ubHkgYXZhaWxhYmxlIG9uIHVzZXIgaW50ZXJhY3Rpb24gYW5kIHRoZSBmaWxlUmVhZGVyIGlzIGFzeW5jIHNvLi4uXG4gICAgcG9wdXAgPSBwb3B1cCB8fCBvcGVuKCcnLCAnX2JsYW5rJyk7XG4gICAgaWYgKHBvcHVwKSB7XG4gICAgICAgIHBvcHVwLmRvY3VtZW50LnRpdGxlID0gcG9wdXAuZG9jdW1lbnQuYm9keS5pbm5lclRleHQgPSAnZG93bmxvYWRpbmcuLi4nO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGJsb2IgPT09ICdzdHJpbmcnKVxuICAgICAgICByZXR1cm4gZG93bmxvYWQoYmxvYiwgbmFtZSwgb3B0cyk7XG4gICAgY29uc3QgZm9yY2UgPSBibG9iLnR5cGUgPT09ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nO1xuICAgIGNvbnN0IGlzU2FmYXJpID0gL2NvbnN0cnVjdG9yL2kudGVzdChTdHJpbmcoX2dsb2JhbC5IVE1MRWxlbWVudCkpIHx8ICdzYWZhcmknIGluIF9nbG9iYWw7XG4gICAgY29uc3QgaXNDaHJvbWVJT1MgPSAvQ3JpT1NcXC9bXFxkXSsvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgaWYgKChpc0Nocm9tZUlPUyB8fCAoZm9yY2UgJiYgaXNTYWZhcmkpIHx8IGlzTWFjT1NXZWJWaWV3KSAmJlxuICAgICAgICB0eXBlb2YgRmlsZVJlYWRlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gU2FmYXJpIGRvZXNuJ3QgYWxsb3cgZG93bmxvYWRpbmcgb2YgYmxvYiBVUkxzXG4gICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsZXQgdXJsID0gcmVhZGVyLnJlc3VsdDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXJsICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHBvcHVwID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIHJlYWRlci5yZXN1bHQgdHlwZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXJsID0gaXNDaHJvbWVJT1NcbiAgICAgICAgICAgICAgICA/IHVybFxuICAgICAgICAgICAgICAgIDogdXJsLnJlcGxhY2UoL15kYXRhOlteO10qOy8sICdkYXRhOmF0dGFjaG1lbnQvZmlsZTsnKTtcbiAgICAgICAgICAgIGlmIChwb3B1cCkge1xuICAgICAgICAgICAgICAgIHBvcHVwLmxvY2F0aW9uLmhyZWYgPSB1cmw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5hc3NpZ24odXJsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvcHVwID0gbnVsbDsgLy8gcmV2ZXJzZS10YWJuYWJiaW5nICM0NjBcbiAgICAgICAgfTtcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICBpZiAocG9wdXApXG4gICAgICAgICAgICBwb3B1cC5sb2NhdGlvbi5hc3NpZ24odXJsKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9IHVybDtcbiAgICAgICAgcG9wdXAgPSBudWxsOyAvLyByZXZlcnNlLXRhYm5hYmJpbmcgIzQ2MFxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICAgICAgfSwgNGU0KTsgLy8gNDBzXG4gICAgfVxufVxuXG4vKipcbiAqIFNob3dzIGEgdG9hc3Qgb3IgY29uc29sZS5sb2dcbiAqXG4gKiBAcGFyYW0gbWVzc2FnZSAtIG1lc3NhZ2UgdG8gbG9nXG4gKiBAcGFyYW0gdHlwZSAtIGRpZmZlcmVudCBjb2xvciBvZiB0aGUgdG9vbHRpcFxuICovXG5mdW5jdGlvbiB0b2FzdE1lc3NhZ2UobWVzc2FnZSwgdHlwZSkge1xuICAgIGNvbnN0IHBpbmlhTWVzc2FnZSA9ICfwn42NICcgKyBtZXNzYWdlO1xuICAgIGlmICh0eXBlb2YgX19WVUVfREVWVE9PTFNfVE9BU1RfXyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBObyBsb25nZXIgYXZhaWxhYmxlIDooXG4gICAgICAgIF9fVlVFX0RFVlRPT0xTX1RPQVNUX18ocGluaWFNZXNzYWdlLCB0eXBlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xuICAgICAgICBjb25zb2xlLmVycm9yKHBpbmlhTWVzc2FnZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICd3YXJuJykge1xuICAgICAgICBjb25zb2xlLndhcm4ocGluaWFNZXNzYWdlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHBpbmlhTWVzc2FnZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNQaW5pYShvKSB7XG4gICAgcmV0dXJuICdfYScgaW4gbyAmJiAnaW5zdGFsbCcgaW4gbztcbn1cblxuLyoqXG4gKiBUaGlzIGZpbGUgY29udGFpbiBkZXZ0b29scyBhY3Rpb25zLCB0aGV5IGFyZSBub3QgUGluaWEgYWN0aW9ucy5cbiAqL1xuLy8gLS0tXG5mdW5jdGlvbiBjaGVja0NsaXBib2FyZEFjY2VzcygpIHtcbiAgICBpZiAoISgnY2xpcGJvYXJkJyBpbiBuYXZpZ2F0b3IpKSB7XG4gICAgICAgIHRvYXN0TWVzc2FnZShgWW91ciBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCB0aGUgQ2xpcGJvYXJkIEFQSWAsICdlcnJvcicpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5mdW5jdGlvbiBjaGVja05vdEZvY3VzZWRFcnJvcihlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmXG4gICAgICAgIGVycm9yLm1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZG9jdW1lbnQgaXMgbm90IGZvY3VzZWQnKSkge1xuICAgICAgICB0b2FzdE1lc3NhZ2UoJ1lvdSBuZWVkIHRvIGFjdGl2YXRlIHRoZSBcIkVtdWxhdGUgYSBmb2N1c2VkIHBhZ2VcIiBzZXR0aW5nIGluIHRoZSBcIlJlbmRlcmluZ1wiIHBhbmVsIG9mIGRldnRvb2xzLicsICd3YXJuJyk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5hc3luYyBmdW5jdGlvbiBhY3Rpb25HbG9iYWxDb3B5U3RhdGUocGluaWEpIHtcbiAgICBpZiAoY2hlY2tDbGlwYm9hcmRBY2Nlc3MoKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KEpTT04uc3RyaW5naWZ5KHBpbmlhLnN0YXRlLnZhbHVlKSk7XG4gICAgICAgIHRvYXN0TWVzc2FnZSgnR2xvYmFsIHN0YXRlIGNvcGllZCB0byBjbGlwYm9hcmQuJyk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoY2hlY2tOb3RGb2N1c2VkRXJyb3IoZXJyb3IpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0b2FzdE1lc3NhZ2UoYEZhaWxlZCB0byBzZXJpYWxpemUgdGhlIHN0YXRlLiBDaGVjayB0aGUgY29uc29sZSBmb3IgbW9yZSBkZXRhaWxzLmAsICdlcnJvcicpO1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiBhY3Rpb25HbG9iYWxQYXN0ZVN0YXRlKHBpbmlhKSB7XG4gICAgaWYgKGNoZWNrQ2xpcGJvYXJkQWNjZXNzKCkpXG4gICAgICAgIHJldHVybjtcbiAgICB0cnkge1xuICAgICAgICBsb2FkU3RvcmVzU3RhdGUocGluaWEsIEpTT04ucGFyc2UoYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dCgpKSk7XG4gICAgICAgIHRvYXN0TWVzc2FnZSgnR2xvYmFsIHN0YXRlIHBhc3RlZCBmcm9tIGNsaXBib2FyZC4nKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChjaGVja05vdEZvY3VzZWRFcnJvcihlcnJvcikpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRvYXN0TWVzc2FnZShgRmFpbGVkIHRvIGRlc2VyaWFsaXplIHRoZSBzdGF0ZSBmcm9tIGNsaXBib2FyZC4gQ2hlY2sgdGhlIGNvbnNvbGUgZm9yIG1vcmUgZGV0YWlscy5gLCAnZXJyb3InKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gYWN0aW9uR2xvYmFsU2F2ZVN0YXRlKHBpbmlhKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgc2F2ZUFzKG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeShwaW5pYS5zdGF0ZS52YWx1ZSldLCB7XG4gICAgICAgICAgICB0eXBlOiAndGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgfSksICdwaW5pYS1zdGF0ZS5qc29uJyk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICB0b2FzdE1lc3NhZ2UoYEZhaWxlZCB0byBleHBvcnQgdGhlIHN0YXRlIGFzIEpTT04uIENoZWNrIHRoZSBjb25zb2xlIGZvciBtb3JlIGRldGFpbHMuYCwgJ2Vycm9yJyk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH1cbn1cbmxldCBmaWxlSW5wdXQ7XG5mdW5jdGlvbiBnZXRGaWxlT3BlbmVyKCkge1xuICAgIGlmICghZmlsZUlucHV0KSB7XG4gICAgICAgIGZpbGVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIGZpbGVJbnB1dC50eXBlID0gJ2ZpbGUnO1xuICAgICAgICBmaWxlSW5wdXQuYWNjZXB0ID0gJy5qc29uJztcbiAgICB9XG4gICAgZnVuY3Rpb24gb3BlbkZpbGUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBmaWxlSW5wdXQub25jaGFuZ2UgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZXMgPSBmaWxlSW5wdXQuZmlsZXM7XG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlcylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IGZpbGVzLml0ZW0oMCk7XG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IHRleHQ6IGF3YWl0IGZpbGUudGV4dCgpLCBmaWxlIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmU6IFRPRE86IGNoYW5nZWQgZnJvbSA0LjMgdG8gNC40XG4gICAgICAgICAgICBmaWxlSW5wdXQub25jYW5jZWwgPSAoKSA9PiByZXNvbHZlKG51bGwpO1xuICAgICAgICAgICAgZmlsZUlucHV0Lm9uZXJyb3IgPSByZWplY3Q7XG4gICAgICAgICAgICBmaWxlSW5wdXQuY2xpY2soKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBvcGVuRmlsZTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGFjdGlvbkdsb2JhbE9wZW5TdGF0ZUZpbGUocGluaWEpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBvcGVuID0gZ2V0RmlsZU9wZW5lcigpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvcGVuKCk7XG4gICAgICAgIGlmICghcmVzdWx0KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCB7IHRleHQsIGZpbGUgfSA9IHJlc3VsdDtcbiAgICAgICAgbG9hZFN0b3Jlc1N0YXRlKHBpbmlhLCBKU09OLnBhcnNlKHRleHQpKTtcbiAgICAgICAgdG9hc3RNZXNzYWdlKGBHbG9iYWwgc3RhdGUgaW1wb3J0ZWQgZnJvbSBcIiR7ZmlsZS5uYW1lfVwiLmApO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdG9hc3RNZXNzYWdlKGBGYWlsZWQgdG8gaW1wb3J0IHRoZSBzdGF0ZSBmcm9tIEpTT04uIENoZWNrIHRoZSBjb25zb2xlIGZvciBtb3JlIGRldGFpbHMuYCwgJ2Vycm9yJyk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGxvYWRTdG9yZXNTdGF0ZShwaW5pYSwgc3RhdGUpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzdGF0ZSkge1xuICAgICAgICBjb25zdCBzdG9yZVN0YXRlID0gcGluaWEuc3RhdGUudmFsdWVba2V5XTtcbiAgICAgICAgLy8gc3RvcmUgaXMgYWxyZWFkeSBpbnN0YW50aWF0ZWQsIHBhdGNoIGl0XG4gICAgICAgIGlmIChzdG9yZVN0YXRlKSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHN0b3JlU3RhdGUsIHN0YXRlW2tleV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gc3RvcmUgaXMgbm90IGluc3RhbnRpYXRlZCwgc2V0IHRoZSBpbml0aWFsIHN0YXRlXG4gICAgICAgICAgICBwaW5pYS5zdGF0ZS52YWx1ZVtrZXldID0gc3RhdGVba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZm9ybWF0RGlzcGxheShkaXNwbGF5KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgX2N1c3RvbToge1xuICAgICAgICAgICAgZGlzcGxheSxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuY29uc3QgUElOSUFfUk9PVF9MQUJFTCA9ICfwn42NIFBpbmlhIChyb290KSc7XG5jb25zdCBQSU5JQV9ST09UX0lEID0gJ19yb290JztcbmZ1bmN0aW9uIGZvcm1hdFN0b3JlRm9ySW5zcGVjdG9yVHJlZShzdG9yZSkge1xuICAgIHJldHVybiBpc1BpbmlhKHN0b3JlKVxuICAgICAgICA/IHtcbiAgICAgICAgICAgIGlkOiBQSU5JQV9ST09UX0lELFxuICAgICAgICAgICAgbGFiZWw6IFBJTklBX1JPT1RfTEFCRUwsXG4gICAgICAgIH1cbiAgICAgICAgOiB7XG4gICAgICAgICAgICBpZDogc3RvcmUuJGlkLFxuICAgICAgICAgICAgbGFiZWw6IHN0b3JlLiRpZCxcbiAgICAgICAgfTtcbn1cbmZ1bmN0aW9uIGZvcm1hdFN0b3JlRm9ySW5zcGVjdG9yU3RhdGUoc3RvcmUpIHtcbiAgICBpZiAoaXNQaW5pYShzdG9yZSkpIHtcbiAgICAgICAgY29uc3Qgc3RvcmVOYW1lcyA9IEFycmF5LmZyb20oc3RvcmUuX3Mua2V5cygpKTtcbiAgICAgICAgY29uc3Qgc3RvcmVNYXAgPSBzdG9yZS5fcztcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB7XG4gICAgICAgICAgICBzdGF0ZTogc3RvcmVOYW1lcy5tYXAoKHN0b3JlSWQpID0+ICh7XG4gICAgICAgICAgICAgICAgZWRpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAga2V5OiBzdG9yZUlkLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBzdG9yZS5zdGF0ZS52YWx1ZVtzdG9yZUlkXSxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIGdldHRlcnM6IHN0b3JlTmFtZXNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChpZCkgPT4gc3RvcmVNYXAuZ2V0KGlkKS5fZ2V0dGVycylcbiAgICAgICAgICAgICAgICAubWFwKChpZCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlID0gc3RvcmVNYXAuZ2V0KGlkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGtleTogaWQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzdG9yZS5fZ2V0dGVycy5yZWR1Y2UoKGdldHRlcnMsIGtleSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0dGVyc1trZXldID0gc3RvcmVba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXR0ZXJzO1xuICAgICAgICAgICAgICAgICAgICB9LCB7fSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxuICAgIGNvbnN0IHN0YXRlID0ge1xuICAgICAgICBzdGF0ZTogT2JqZWN0LmtleXMoc3RvcmUuJHN0YXRlKS5tYXAoKGtleSkgPT4gKHtcbiAgICAgICAgICAgIGVkaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgdmFsdWU6IHN0b3JlLiRzdGF0ZVtrZXldLFxuICAgICAgICB9KSksXG4gICAgfTtcbiAgICAvLyBhdm9pZCBhZGRpbmcgZW1wdHkgZ2V0dGVyc1xuICAgIGlmIChzdG9yZS5fZ2V0dGVycyAmJiBzdG9yZS5fZ2V0dGVycy5sZW5ndGgpIHtcbiAgICAgICAgc3RhdGUuZ2V0dGVycyA9IHN0b3JlLl9nZXR0ZXJzLm1hcCgoZ2V0dGVyTmFtZSkgPT4gKHtcbiAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGtleTogZ2V0dGVyTmFtZSxcbiAgICAgICAgICAgIHZhbHVlOiBzdG9yZVtnZXR0ZXJOYW1lXSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBpZiAoc3RvcmUuX2N1c3RvbVByb3BlcnRpZXMuc2l6ZSkge1xuICAgICAgICBzdGF0ZS5jdXN0b21Qcm9wZXJ0aWVzID0gQXJyYXkuZnJvbShzdG9yZS5fY3VzdG9tUHJvcGVydGllcykubWFwKChrZXkpID0+ICh7XG4gICAgICAgICAgICBlZGl0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIHZhbHVlOiBzdG9yZVtrZXldLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJldHVybiBzdGF0ZTtcbn1cbmZ1bmN0aW9uIGZvcm1hdEV2ZW50RGF0YShldmVudHMpIHtcbiAgICBpZiAoIWV2ZW50cylcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIGlmIChBcnJheS5pc0FycmF5KGV2ZW50cykpIHtcbiAgICAgICAgLy8gVE9ETzogaGFuZGxlIGFkZCBhbmQgZGVsZXRlIGZvciBhcnJheXMgYW5kIG9iamVjdHNcbiAgICAgICAgcmV0dXJuIGV2ZW50cy5yZWR1Y2UoKGRhdGEsIGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBkYXRhLmtleXMucHVzaChldmVudC5rZXkpO1xuICAgICAgICAgICAgZGF0YS5vcGVyYXRpb25zLnB1c2goZXZlbnQudHlwZSk7XG4gICAgICAgICAgICBkYXRhLm9sZFZhbHVlW2V2ZW50LmtleV0gPSBldmVudC5vbGRWYWx1ZTtcbiAgICAgICAgICAgIGRhdGEubmV3VmFsdWVbZXZlbnQua2V5XSA9IGV2ZW50Lm5ld1ZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG9sZFZhbHVlOiB7fSxcbiAgICAgICAgICAgIGtleXM6IFtdLFxuICAgICAgICAgICAgb3BlcmF0aW9uczogW10sXG4gICAgICAgICAgICBuZXdWYWx1ZToge30sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wZXJhdGlvbjogZm9ybWF0RGlzcGxheShldmVudHMudHlwZSksXG4gICAgICAgICAgICBrZXk6IGZvcm1hdERpc3BsYXkoZXZlbnRzLmtleSksXG4gICAgICAgICAgICBvbGRWYWx1ZTogZXZlbnRzLm9sZFZhbHVlLFxuICAgICAgICAgICAgbmV3VmFsdWU6IGV2ZW50cy5uZXdWYWx1ZSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5mdW5jdGlvbiBmb3JtYXRNdXRhdGlvblR5cGUodHlwZSkge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIE11dGF0aW9uVHlwZS5kaXJlY3Q6XG4gICAgICAgICAgICByZXR1cm4gJ211dGF0aW9uJztcbiAgICAgICAgY2FzZSBNdXRhdGlvblR5cGUucGF0Y2hGdW5jdGlvbjpcbiAgICAgICAgICAgIHJldHVybiAnJHBhdGNoJztcbiAgICAgICAgY2FzZSBNdXRhdGlvblR5cGUucGF0Y2hPYmplY3Q6XG4gICAgICAgICAgICByZXR1cm4gJyRwYXRjaCc7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ3Vua25vd24nO1xuICAgIH1cbn1cblxuLy8gdGltZWxpbmUgY2FuIGJlIHBhdXNlZCB3aGVuIGRpcmVjdGx5IGNoYW5naW5nIHRoZSBzdGF0ZVxubGV0IGlzVGltZWxpbmVBY3RpdmUgPSB0cnVlO1xuY29uc3QgY29tcG9uZW50U3RhdGVUeXBlcyA9IFtdO1xuY29uc3QgTVVUQVRJT05TX0xBWUVSX0lEID0gJ3BpbmlhOm11dGF0aW9ucyc7XG5jb25zdCBJTlNQRUNUT1JfSUQgPSAncGluaWEnO1xuY29uc3QgeyBhc3NpZ246IGFzc2lnbiQxIH0gPSBPYmplY3Q7XG4vKipcbiAqIEdldHMgdGhlIGRpc3BsYXllZCBuYW1lIG9mIGEgc3RvcmUgaW4gZGV2dG9vbHNcbiAqXG4gKiBAcGFyYW0gaWQgLSBpZCBvZiB0aGUgc3RvcmVcbiAqIEByZXR1cm5zIGEgZm9ybWF0dGVkIHN0cmluZ1xuICovXG5jb25zdCBnZXRTdG9yZVR5cGUgPSAoaWQpID0+ICfwn42NICcgKyBpZDtcbi8qKlxuICogQWRkIHRoZSBwaW5pYSBwbHVnaW4gd2l0aG91dCBhbnkgc3RvcmUuIEFsbG93cyBkaXNwbGF5aW5nIGEgUGluaWEgcGx1Z2luIHRhYlxuICogYXMgc29vbiBhcyBpdCBpcyBhZGRlZCB0byB0aGUgYXBwbGljYXRpb24uXG4gKlxuICogQHBhcmFtIGFwcCAtIFZ1ZSBhcHBsaWNhdGlvblxuICogQHBhcmFtIHBpbmlhIC0gcGluaWEgaW5zdGFuY2VcbiAqL1xuZnVuY3Rpb24gcmVnaXN0ZXJQaW5pYURldnRvb2xzKGFwcCwgcGluaWEpIHtcbiAgICBzZXR1cERldnRvb2xzUGx1Z2luKHtcbiAgICAgICAgaWQ6ICdkZXYuZXNtLnBpbmlhJyxcbiAgICAgICAgbGFiZWw6ICdQaW5pYSDwn42NJyxcbiAgICAgICAgbG9nbzogJ2h0dHBzOi8vcGluaWEudnVlanMub3JnL2xvZ28uc3ZnJyxcbiAgICAgICAgcGFja2FnZU5hbWU6ICdwaW5pYScsXG4gICAgICAgIGhvbWVwYWdlOiAnaHR0cHM6Ly9waW5pYS52dWVqcy5vcmcnLFxuICAgICAgICBjb21wb25lbnRTdGF0ZVR5cGVzLFxuICAgICAgICBhcHAsXG4gICAgfSwgKGFwaSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIGFwaS5ub3cgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRvYXN0TWVzc2FnZSgnWW91IHNlZW0gdG8gYmUgdXNpbmcgYW4gb3V0ZGF0ZWQgdmVyc2lvbiBvZiBWdWUgRGV2dG9vbHMuIEFyZSB5b3Ugc3RpbGwgdXNpbmcgdGhlIEJldGEgcmVsZWFzZSBpbnN0ZWFkIG9mIHRoZSBzdGFibGUgb25lPyBZb3UgY2FuIGZpbmQgdGhlIGxpbmtzIGF0IGh0dHBzOi8vZGV2dG9vbHMudnVlanMub3JnL2d1aWRlL2luc3RhbGxhdGlvbi5odG1sLicpO1xuICAgICAgICB9XG4gICAgICAgIGFwaS5hZGRUaW1lbGluZUxheWVyKHtcbiAgICAgICAgICAgIGlkOiBNVVRBVElPTlNfTEFZRVJfSUQsXG4gICAgICAgICAgICBsYWJlbDogYFBpbmlhIPCfjY1gLFxuICAgICAgICAgICAgY29sb3I6IDB4ZTVkZjg4LFxuICAgICAgICB9KTtcbiAgICAgICAgYXBpLmFkZEluc3BlY3Rvcih7XG4gICAgICAgICAgICBpZDogSU5TUEVDVE9SX0lELFxuICAgICAgICAgICAgbGFiZWw6ICdQaW5pYSDwn42NJyxcbiAgICAgICAgICAgIGljb246ICdzdG9yYWdlJyxcbiAgICAgICAgICAgIHRyZWVGaWx0ZXJQbGFjZWhvbGRlcjogJ1NlYXJjaCBzdG9yZXMnLFxuICAgICAgICAgICAgYWN0aW9uczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2NvbnRlbnRfY29weScsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uR2xvYmFsQ29weVN0YXRlKHBpbmlhKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDogJ1NlcmlhbGl6ZSBhbmQgY29weSB0aGUgc3RhdGUnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpY29uOiAnY29udGVudF9wYXN0ZScsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYWN0aW9uR2xvYmFsUGFzdGVTdGF0ZShwaW5pYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclRyZWUoSU5TUEVDVE9SX0lEKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yU3RhdGUoSU5TUEVDVE9SX0lEKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDogJ1JlcGxhY2UgdGhlIHN0YXRlIHdpdGggdGhlIGNvbnRlbnQgb2YgeW91ciBjbGlwYm9hcmQnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpY29uOiAnc2F2ZScsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uR2xvYmFsU2F2ZVN0YXRlKHBpbmlhKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDogJ1NhdmUgdGhlIHN0YXRlIGFzIGEgSlNPTiBmaWxlJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2ZvbGRlcl9vcGVuJyxcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhY3Rpb25HbG9iYWxPcGVuU3RhdGVGaWxlKHBpbmlhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yVHJlZShJTlNQRUNUT1JfSUQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JTdGF0ZShJTlNQRUNUT1JfSUQpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiAnSW1wb3J0IHRoZSBzdGF0ZSBmcm9tIGEgSlNPTiBmaWxlJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIG5vZGVBY3Rpb25zOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpY29uOiAncmVzdG9yZScsXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdSZXNldCB0aGUgc3RhdGUgKHdpdGggXCIkcmVzZXRcIiknLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IChub2RlSWQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlID0gcGluaWEuX3MuZ2V0KG5vZGVJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN0b3JlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RNZXNzYWdlKGBDYW5ub3QgcmVzZXQgXCIke25vZGVJZH1cIiBzdG9yZSBiZWNhdXNlIGl0IHdhc24ndCBmb3VuZC5gLCAnd2FybicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHN0b3JlLiRyZXNldCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0TWVzc2FnZShgQ2Fubm90IHJlc2V0IFwiJHtub2RlSWR9XCIgc3RvcmUgYmVjYXVzZSBpdCBkb2Vzbid0IGhhdmUgYSBcIiRyZXNldFwiIG1ldGhvZCBpbXBsZW1lbnRlZC5gLCAnd2FybicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmUuJHJlc2V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RNZXNzYWdlKGBTdG9yZSBcIiR7bm9kZUlkfVwiIHJlc2V0LmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICAgICAgYXBpLm9uLmluc3BlY3RDb21wb25lbnQoKHBheWxvYWQsIGN0eCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJveHkgPSAocGF5bG9hZC5jb21wb25lbnRJbnN0YW5jZSAmJlxuICAgICAgICAgICAgICAgIHBheWxvYWQuY29tcG9uZW50SW5zdGFuY2UucHJveHkpO1xuICAgICAgICAgICAgaWYgKHByb3h5ICYmIHByb3h5Ll9wU3RvcmVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGluaWFTdG9yZXMgPSBwYXlsb2FkLmNvbXBvbmVudEluc3RhbmNlLnByb3h5Ll9wU3RvcmVzO1xuICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXMocGluaWFTdG9yZXMpLmZvckVhY2goKHN0b3JlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQuaW5zdGFuY2VEYXRhLnN0YXRlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZ2V0U3RvcmVUeXBlKHN0b3JlLiRpZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICdzdGF0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzdG9yZS5faXNPcHRpb25zQVBJXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jdXN0b206IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0b1JhdyhzdG9yZS4kc3RhdGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3Jlc3RvcmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiAnUmVzZXQgdGhlIHN0YXRlIG9mIHRoaXMgc3RvcmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHN0b3JlLiRyZXNldCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IC8vIE5PVEU6IHdvcmthcm91bmQgdG8gdW53cmFwIHRyYW5zZmVycmVkIHJlZnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoc3RvcmUuJHN0YXRlKS5yZWR1Y2UoKHN0YXRlLCBrZXkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlW2tleV0gPSBzdG9yZS4kc3RhdGVba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge30pLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlLl9nZXR0ZXJzICYmIHN0b3JlLl9nZXR0ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5pbnN0YW5jZURhdGEuc3RhdGUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZ2V0U3RvcmVUeXBlKHN0b3JlLiRpZCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAnZ2V0dGVycycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzdG9yZS5fZ2V0dGVycy5yZWR1Y2UoKGdldHRlcnMsIGtleSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0dGVyc1trZXldID0gc3RvcmVba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHdlIGp1c3Qgd2FudCB0byBzaG93IGl0IGluIGRldnRvb2xzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXR0ZXJzW2tleV0gPSBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0dGVycztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7fSksXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYXBpLm9uLmdldEluc3BlY3RvclRyZWUoKHBheWxvYWQpID0+IHtcbiAgICAgICAgICAgIGlmIChwYXlsb2FkLmFwcCA9PT0gYXBwICYmIHBheWxvYWQuaW5zcGVjdG9ySWQgPT09IElOU1BFQ1RPUl9JRCkge1xuICAgICAgICAgICAgICAgIGxldCBzdG9yZXMgPSBbcGluaWFdO1xuICAgICAgICAgICAgICAgIHN0b3JlcyA9IHN0b3Jlcy5jb25jYXQoQXJyYXkuZnJvbShwaW5pYS5fcy52YWx1ZXMoKSkpO1xuICAgICAgICAgICAgICAgIHBheWxvYWQucm9vdE5vZGVzID0gKHBheWxvYWQuZmlsdGVyXG4gICAgICAgICAgICAgICAgICAgID8gc3RvcmVzLmZpbHRlcigoc3RvcmUpID0+ICckaWQnIGluIHN0b3JlXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHN0b3JlLiRpZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluY2x1ZGVzKHBheWxvYWQuZmlsdGVyLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFBJTklBX1JPT1RfTEFCRUwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhwYXlsb2FkLmZpbHRlci50b0xvd2VyQ2FzZSgpKSlcbiAgICAgICAgICAgICAgICAgICAgOiBzdG9yZXMpLm1hcChmb3JtYXRTdG9yZUZvckluc3BlY3RvclRyZWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gRXhwb3NlIHBpbmlhIGluc3RhbmNlIGFzICRwaW5pYSB0byB3aW5kb3dcbiAgICAgICAgZ2xvYmFsVGhpcy4kcGluaWEgPSBwaW5pYTtcbiAgICAgICAgYXBpLm9uLmdldEluc3BlY3RvclN0YXRlKChwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICBpZiAocGF5bG9hZC5hcHAgPT09IGFwcCAmJiBwYXlsb2FkLmluc3BlY3RvcklkID09PSBJTlNQRUNUT1JfSUQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnNwZWN0ZWRTdG9yZSA9IHBheWxvYWQubm9kZUlkID09PSBQSU5JQV9ST09UX0lEXG4gICAgICAgICAgICAgICAgICAgID8gcGluaWFcbiAgICAgICAgICAgICAgICAgICAgOiBwaW5pYS5fcy5nZXQocGF5bG9hZC5ub2RlSWQpO1xuICAgICAgICAgICAgICAgIGlmICghaW5zcGVjdGVkU3RvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBjb3VsZCBiZSB0aGUgc2VsZWN0ZWQgc3RvcmUgcmVzdG9yZWQgZm9yIGEgZGlmZmVyZW50IHByb2plY3RcbiAgICAgICAgICAgICAgICAgICAgLy8gc28gaXQncyBiZXR0ZXIgbm90IHRvIHNheSBhbnl0aGluZyBoZXJlXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGluc3BlY3RlZFN0b3JlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEV4cG9zZSBzZWxlY3RlZCBzdG9yZSBhcyAkc3RvcmUgdG8gd2luZG93XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXlsb2FkLm5vZGVJZCAhPT0gUElOSUFfUk9PVF9JRClcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbFRoaXMuJHN0b3JlID0gdG9SYXcoaW5zcGVjdGVkU3RvcmUpO1xuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLnN0YXRlID0gZm9ybWF0U3RvcmVGb3JJbnNwZWN0b3JTdGF0ZShpbnNwZWN0ZWRTdG9yZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYXBpLm9uLmVkaXRJbnNwZWN0b3JTdGF0ZSgocGF5bG9hZCwgY3R4KSA9PiB7XG4gICAgICAgICAgICBpZiAocGF5bG9hZC5hcHAgPT09IGFwcCAmJiBwYXlsb2FkLmluc3BlY3RvcklkID09PSBJTlNQRUNUT1JfSUQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnNwZWN0ZWRTdG9yZSA9IHBheWxvYWQubm9kZUlkID09PSBQSU5JQV9ST09UX0lEXG4gICAgICAgICAgICAgICAgICAgID8gcGluaWFcbiAgICAgICAgICAgICAgICAgICAgOiBwaW5pYS5fcy5nZXQocGF5bG9hZC5ub2RlSWQpO1xuICAgICAgICAgICAgICAgIGlmICghaW5zcGVjdGVkU3RvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvYXN0TWVzc2FnZShgc3RvcmUgXCIke3BheWxvYWQubm9kZUlkfVwiIG5vdCBmb3VuZGAsICdlcnJvcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB7IHBhdGggfSA9IHBheWxvYWQ7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1BpbmlhKGluc3BlY3RlZFN0b3JlKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBhY2Nlc3Mgb25seSB0aGUgc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhdGgubGVuZ3RoICE9PSAxIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhaW5zcGVjdGVkU3RvcmUuX2N1c3RvbVByb3BlcnRpZXMuaGFzKHBhdGhbMF0pIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoWzBdIGluIGluc3BlY3RlZFN0b3JlLiRzdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC51bnNoaWZ0KCckc3RhdGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUm9vdCBhY2Nlc3MsIHdlIGNhbiBvbWl0IHRoZSBgLnZhbHVlYCBiZWNhdXNlIHRoZSBkZXZ0b29scyBBUEkgZG9lcyBpdCBmb3IgdXNcbiAgICAgICAgICAgICAgICAgICAgcGF0aC51bnNoaWZ0KCdzdGF0ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpc1RpbWVsaW5lQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcGF5bG9hZC5zZXQoaW5zcGVjdGVkU3RvcmUsIHBhdGgsIHBheWxvYWQuc3RhdGUudmFsdWUpO1xuICAgICAgICAgICAgICAgIGlzVGltZWxpbmVBY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYXBpLm9uLmVkaXRDb21wb25lbnRTdGF0ZSgocGF5bG9hZCkgPT4ge1xuICAgICAgICAgICAgaWYgKHBheWxvYWQudHlwZS5zdGFydHNXaXRoKCfwn42NJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZUlkID0gcGF5bG9hZC50eXBlLnJlcGxhY2UoL17wn42NXFxzKi8sICcnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHBpbmlhLl9zLmdldChzdG9yZUlkKTtcbiAgICAgICAgICAgICAgICBpZiAoIXN0b3JlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0b2FzdE1lc3NhZ2UoYHN0b3JlIFwiJHtzdG9yZUlkfVwiIG5vdCBmb3VuZGAsICdlcnJvcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB7IHBhdGggfSA9IHBheWxvYWQ7XG4gICAgICAgICAgICAgICAgaWYgKHBhdGhbMF0gIT09ICdzdGF0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvYXN0TWVzc2FnZShgSW52YWxpZCBwYXRoIGZvciBzdG9yZSBcIiR7c3RvcmVJZH1cIjpcXG4ke3BhdGh9XFxuT25seSBzdGF0ZSBjYW4gYmUgbW9kaWZpZWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHJld3JpdGUgdGhlIGZpcnN0IGVudHJ5IHRvIGJlIGFibGUgdG8gZGlyZWN0bHkgc2V0IHRoZSBzdGF0ZSBhc1xuICAgICAgICAgICAgICAgIC8vIHdlbGwgYXMgYW55IG90aGVyIHBhdGhcbiAgICAgICAgICAgICAgICBwYXRoWzBdID0gJyRzdGF0ZSc7XG4gICAgICAgICAgICAgICAgaXNUaW1lbGluZUFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHBheWxvYWQuc2V0KHN0b3JlLCBwYXRoLCBwYXlsb2FkLnN0YXRlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICBpc1RpbWVsaW5lQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBhZGRTdG9yZVRvRGV2dG9vbHMoYXBwLCBzdG9yZSkge1xuICAgIGlmICghY29tcG9uZW50U3RhdGVUeXBlcy5pbmNsdWRlcyhnZXRTdG9yZVR5cGUoc3RvcmUuJGlkKSkpIHtcbiAgICAgICAgY29tcG9uZW50U3RhdGVUeXBlcy5wdXNoKGdldFN0b3JlVHlwZShzdG9yZS4kaWQpKTtcbiAgICB9XG4gICAgc2V0dXBEZXZ0b29sc1BsdWdpbih7XG4gICAgICAgIGlkOiAnZGV2LmVzbS5waW5pYScsXG4gICAgICAgIGxhYmVsOiAnUGluaWEg8J+NjScsXG4gICAgICAgIGxvZ286ICdodHRwczovL3BpbmlhLnZ1ZWpzLm9yZy9sb2dvLnN2ZycsXG4gICAgICAgIHBhY2thZ2VOYW1lOiAncGluaWEnLFxuICAgICAgICBob21lcGFnZTogJ2h0dHBzOi8vcGluaWEudnVlanMub3JnJyxcbiAgICAgICAgY29tcG9uZW50U3RhdGVUeXBlcyxcbiAgICAgICAgYXBwLFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgbG9nU3RvcmVDaGFuZ2VzOiB7XG4gICAgICAgICAgICAgICAgbGFiZWw6ICdOb3RpZnkgYWJvdXQgbmV3L2RlbGV0ZWQgc3RvcmVzJyxcbiAgICAgICAgICAgICAgICB0eXBlOiAnYm9vbGVhbicsXG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIHVzZUVtb2ppczoge1xuICAgICAgICAgICAgLy8gICBsYWJlbDogJ1VzZSBlbW9qaXMgaW4gbWVzc2FnZXMg4pqh77iPJyxcbiAgICAgICAgICAgIC8vICAgdHlwZTogJ2Jvb2xlYW4nLFxuICAgICAgICAgICAgLy8gICBkZWZhdWx0VmFsdWU6IHRydWUsXG4gICAgICAgICAgICAvLyB9LFxuICAgICAgICB9LFxuICAgIH0sIChhcGkpID0+IHtcbiAgICAgICAgLy8gZ3JhY2VmdWxseSBoYW5kbGUgZXJyb3JzXG4gICAgICAgIGNvbnN0IG5vdyA9IHR5cGVvZiBhcGkubm93ID09PSAnZnVuY3Rpb24nID8gYXBpLm5vdy5iaW5kKGFwaSkgOiBEYXRlLm5vdztcbiAgICAgICAgc3RvcmUuJG9uQWN0aW9uKCh7IGFmdGVyLCBvbkVycm9yLCBuYW1lLCBhcmdzIH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwSWQgPSBydW5uaW5nQWN0aW9uSWQrKztcbiAgICAgICAgICAgIGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcbiAgICAgICAgICAgICAgICBsYXllcklkOiBNVVRBVElPTlNfTEFZRVJfSUQsXG4gICAgICAgICAgICAgICAgZXZlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbm93KCksXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn8J+bqyAnICsgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6ICdzdGFydCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlOiBmb3JtYXREaXNwbGF5KHN0b3JlLiRpZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGZvcm1hdERpc3BsYXkobmFtZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBncm91cElkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFmdGVyKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICBhY3RpdmVBY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgYXBpLmFkZFRpbWVsaW5lRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICBsYXllcklkOiBNVVRBVElPTlNfTEFZRVJfSUQsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBub3coKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn8J+brCAnICsgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnZW5kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZTogZm9ybWF0RGlzcGxheShzdG9yZS4kaWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZm9ybWF0RGlzcGxheShuYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cElkLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvbkVycm9yKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIGFjdGl2ZUFjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIGxheWVySWQ6IE1VVEFUSU9OU19MQVlFUl9JRCxcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG5vdygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nVHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn8J+SpSAnICsgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnZW5kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZTogZm9ybWF0RGlzcGxheShzdG9yZS4kaWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZm9ybWF0RGlzcGxheShuYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgIHN0b3JlLl9jdXN0b21Qcm9wZXJ0aWVzLmZvckVhY2goKG5hbWUpID0+IHtcbiAgICAgICAgICAgIHdhdGNoKCgpID0+IHVucmVmKHN0b3JlW25hbWVdKSwgKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGFwaS5ub3RpZnlDb21wb25lbnRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XG4gICAgICAgICAgICAgICAgaWYgKGlzVGltZWxpbmVBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXBpLmFkZFRpbWVsaW5lRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJJZDogTVVUQVRJT05TX0xBWUVSX0lELFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBub3coKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0NoYW5nZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBhY3RpdmVBY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB7IGRlZXA6IHRydWUgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBzdG9yZS4kc3Vic2NyaWJlKCh7IGV2ZW50cywgdHlwZSB9LCBzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgYXBpLm5vdGlmeUNvbXBvbmVudFVwZGF0ZSgpO1xuICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JTdGF0ZShJTlNQRUNUT1JfSUQpO1xuICAgICAgICAgICAgaWYgKCFpc1RpbWVsaW5lQWN0aXZlKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIC8vIHJvb3RTdG9yZS5zdGF0ZVtzdG9yZS5pZF0gPSBzdGF0ZVxuICAgICAgICAgICAgY29uc3QgZXZlbnREYXRhID0ge1xuICAgICAgICAgICAgICAgIHRpbWU6IG5vdygpLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBmb3JtYXRNdXRhdGlvblR5cGUodHlwZSksXG4gICAgICAgICAgICAgICAgZGF0YTogYXNzaWduJDEoeyBzdG9yZTogZm9ybWF0RGlzcGxheShzdG9yZS4kaWQpIH0sIGZvcm1hdEV2ZW50RGF0YShldmVudHMpKSxcbiAgICAgICAgICAgICAgICBncm91cElkOiBhY3RpdmVBY3Rpb24sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09IE11dGF0aW9uVHlwZS5wYXRjaEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgZXZlbnREYXRhLnN1YnRpdGxlID0gJ+Kkte+4jyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSBNdXRhdGlvblR5cGUucGF0Y2hPYmplY3QpIHtcbiAgICAgICAgICAgICAgICBldmVudERhdGEuc3VidGl0bGUgPSAn8J+nqSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChldmVudHMgJiYgIUFycmF5LmlzQXJyYXkoZXZlbnRzKSkge1xuICAgICAgICAgICAgICAgIGV2ZW50RGF0YS5zdWJ0aXRsZSA9IGV2ZW50cy50eXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV2ZW50cykge1xuICAgICAgICAgICAgICAgIGV2ZW50RGF0YS5kYXRhWydyYXdFdmVudChzKSddID0ge1xuICAgICAgICAgICAgICAgICAgICBfY3VzdG9tOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnRGVidWdnZXJFdmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdyYXcgRGVidWdnZXJFdmVudFtdJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBldmVudHMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcbiAgICAgICAgICAgICAgICBsYXllcklkOiBNVVRBVElPTlNfTEFZRVJfSUQsXG4gICAgICAgICAgICAgICAgZXZlbnQ6IGV2ZW50RGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCB7IGRldGFjaGVkOiB0cnVlLCBmbHVzaDogJ3N5bmMnIH0pO1xuICAgICAgICBjb25zdCBob3RVcGRhdGUgPSBzdG9yZS5faG90VXBkYXRlO1xuICAgICAgICBzdG9yZS5faG90VXBkYXRlID0gbWFya1JhdygobmV3U3RvcmUpID0+IHtcbiAgICAgICAgICAgIGhvdFVwZGF0ZShuZXdTdG9yZSk7XG4gICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XG4gICAgICAgICAgICAgICAgbGF5ZXJJZDogTVVUQVRJT05TX0xBWUVSX0lELFxuICAgICAgICAgICAgICAgIGV2ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IG5vdygpLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ/CflKUgJyArIHN0b3JlLiRpZCxcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6ICdITVIgdXBkYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmU6IGZvcm1hdERpc3BsYXkoc3RvcmUuJGlkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm86IGZvcm1hdERpc3BsYXkoYEhNUiB1cGRhdGVgKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIGRldnRvb2xzIHRvb1xuICAgICAgICAgICAgYXBpLm5vdGlmeUNvbXBvbmVudFVwZGF0ZSgpO1xuICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JUcmVlKElOU1BFQ1RPUl9JRCk7XG4gICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7ICRkaXNwb3NlIH0gPSBzdG9yZTtcbiAgICAgICAgc3RvcmUuJGRpc3Bvc2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAkZGlzcG9zZSgpO1xuICAgICAgICAgICAgYXBpLm5vdGlmeUNvbXBvbmVudFVwZGF0ZSgpO1xuICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JUcmVlKElOU1BFQ1RPUl9JRCk7XG4gICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XG4gICAgICAgICAgICBhcGkuZ2V0U2V0dGluZ3MoKS5sb2dTdG9yZUNoYW5nZXMgJiZcbiAgICAgICAgICAgICAgICB0b2FzdE1lc3NhZ2UoYERpc3Bvc2VkIFwiJHtzdG9yZS4kaWR9XCIgc3RvcmUg8J+XkWApO1xuICAgICAgICB9O1xuICAgICAgICAvLyB0cmlnZ2VyIGFuIHVwZGF0ZSBzbyBpdCBjYW4gZGlzcGxheSBuZXcgcmVnaXN0ZXJlZCBzdG9yZXNcbiAgICAgICAgYXBpLm5vdGlmeUNvbXBvbmVudFVwZGF0ZSgpO1xuICAgICAgICBhcGkuc2VuZEluc3BlY3RvclRyZWUoSU5TUEVDVE9SX0lEKTtcbiAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JTdGF0ZShJTlNQRUNUT1JfSUQpO1xuICAgICAgICBhcGkuZ2V0U2V0dGluZ3MoKS5sb2dTdG9yZUNoYW5nZXMgJiZcbiAgICAgICAgICAgIHRvYXN0TWVzc2FnZShgXCIke3N0b3JlLiRpZH1cIiBzdG9yZSBpbnN0YWxsZWQg8J+GlWApO1xuICAgIH0pO1xufVxubGV0IHJ1bm5pbmdBY3Rpb25JZCA9IDA7XG5sZXQgYWN0aXZlQWN0aW9uO1xuLyoqXG4gKiBQYXRjaGVzIGEgc3RvcmUgdG8gZW5hYmxlIGFjdGlvbiBncm91cGluZyBpbiBkZXZ0b29scyBieSB3cmFwcGluZyB0aGUgc3RvcmUgd2l0aCBhIFByb3h5IHRoYXQgaXMgcGFzc2VkIGFzIHRoZVxuICogY29udGV4dCBvZiBhbGwgYWN0aW9ucywgYWxsb3dpbmcgdXMgdG8gc2V0IGBydW5uaW5nQWN0aW9uYCBvbiBlYWNoIGFjY2VzcyBhbmQgZWZmZWN0aXZlbHkgYXNzb2NpYXRpbmcgYW55IHN0YXRlXG4gKiBtdXRhdGlvbiB0byB0aGUgYWN0aW9uLlxuICpcbiAqIEBwYXJhbSBzdG9yZSAtIHN0b3JlIHRvIHBhdGNoXG4gKiBAcGFyYW0gYWN0aW9uTmFtZXMgLSBsaXN0IG9mIGFjdGlvbnN0IHRvIHBhdGNoXG4gKi9cbmZ1bmN0aW9uIHBhdGNoQWN0aW9uRm9yR3JvdXBpbmcoc3RvcmUsIGFjdGlvbk5hbWVzLCB3cmFwV2l0aFByb3h5KSB7XG4gICAgLy8gb3JpZ2luYWwgYWN0aW9ucyBvZiB0aGUgc3RvcmUgYXMgdGhleSBhcmUgZ2l2ZW4gYnkgcGluaWEuIFdlIGFyZSBnb2luZyB0byBvdmVycmlkZSB0aGVtXG4gICAgY29uc3QgYWN0aW9ucyA9IGFjdGlvbk5hbWVzLnJlZHVjZSgoc3RvcmVBY3Rpb25zLCBhY3Rpb25OYW1lKSA9PiB7XG4gICAgICAgIC8vIHVzZSB0b1JhdyB0byBhdm9pZCB0cmFja2luZyAjNTQxXG4gICAgICAgIHN0b3JlQWN0aW9uc1thY3Rpb25OYW1lXSA9IHRvUmF3KHN0b3JlKVthY3Rpb25OYW1lXTtcbiAgICAgICAgcmV0dXJuIHN0b3JlQWN0aW9ucztcbiAgICB9LCB7fSk7XG4gICAgZm9yIChjb25zdCBhY3Rpb25OYW1lIGluIGFjdGlvbnMpIHtcbiAgICAgICAgc3RvcmVbYWN0aW9uTmFtZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyB0aGUgcnVubmluZyBhY3Rpb24gaWQgaXMgaW5jcmVtZW50ZWQgaW4gYSBiZWZvcmUgYWN0aW9uIGhvb2tcbiAgICAgICAgICAgIGNvbnN0IF9hY3Rpb25JZCA9IHJ1bm5pbmdBY3Rpb25JZDtcbiAgICAgICAgICAgIGNvbnN0IHRyYWNrZWRTdG9yZSA9IHdyYXBXaXRoUHJveHlcbiAgICAgICAgICAgICAgICA/IG5ldyBQcm94eShzdG9yZSwge1xuICAgICAgICAgICAgICAgICAgICBnZXQoLi4uYXJncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlQWN0aW9uID0gX2FjdGlvbklkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZXQoLi4uYXJncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlQWN0aW9uID0gX2FjdGlvbklkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3Quc2V0KC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgOiBzdG9yZTtcbiAgICAgICAgICAgIC8vIEZvciBTZXR1cCBTdG9yZXMgd2UgbmVlZCBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1hc3luYy1jb250ZXh0XG4gICAgICAgICAgICBhY3RpdmVBY3Rpb24gPSBfYWN0aW9uSWQ7XG4gICAgICAgICAgICBjb25zdCByZXRWYWx1ZSA9IGFjdGlvbnNbYWN0aW9uTmFtZV0uYXBwbHkodHJhY2tlZFN0b3JlLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgLy8gdGhpcyBpcyBzYWZlciBhcyBhc3luYyBhY3Rpb25zIGluIFNldHVwIFN0b3JlcyB3b3VsZCBhc3NvY2lhdGUgbXV0YXRpb25zIGRvbmUgb3V0c2lkZSBvZiB0aGUgYWN0aW9uXG4gICAgICAgICAgICBhY3RpdmVBY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gcmV0VmFsdWU7XG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG4gKiBwaW5pYS51c2UoZGV2dG9vbHNQbHVnaW4pXG4gKi9cbmZ1bmN0aW9uIGRldnRvb2xzUGx1Z2luKHsgYXBwLCBzdG9yZSwgb3B0aW9ucyB9KSB7XG4gICAgLy8gSE1SIG1vZHVsZVxuICAgIGlmIChzdG9yZS4kaWQuc3RhcnRzV2l0aCgnX19ob3Q6JykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBkZXRlY3Qgb3B0aW9uIGFwaSB2cyBzZXR1cCBhcGlcbiAgICBzdG9yZS5faXNPcHRpb25zQVBJID0gISFvcHRpb25zLnN0YXRlO1xuICAgIC8vIERvIG5vdCBvdmVyd3JpdGUgYWN0aW9ucyBtb2NrZWQgYnkgQHBpbmlhL3Rlc3RpbmcgKCMyMjk4KVxuICAgIGlmICghc3RvcmUuX3AuX3Rlc3RpbmcpIHtcbiAgICAgICAgcGF0Y2hBY3Rpb25Gb3JHcm91cGluZyhzdG9yZSwgT2JqZWN0LmtleXMob3B0aW9ucy5hY3Rpb25zKSwgc3RvcmUuX2lzT3B0aW9uc0FQSSk7XG4gICAgICAgIC8vIFVwZ3JhZGUgdGhlIEhNUiB0byBhbHNvIHVwZGF0ZSB0aGUgbmV3IGFjdGlvbnNcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxIb3RVcGRhdGUgPSBzdG9yZS5faG90VXBkYXRlO1xuICAgICAgICB0b1JhdyhzdG9yZSkuX2hvdFVwZGF0ZSA9IGZ1bmN0aW9uIChuZXdTdG9yZSkge1xuICAgICAgICAgICAgb3JpZ2luYWxIb3RVcGRhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHBhdGNoQWN0aW9uRm9yR3JvdXBpbmcoc3RvcmUsIE9iamVjdC5rZXlzKG5ld1N0b3JlLl9obXJQYXlsb2FkLmFjdGlvbnMpLCAhIXN0b3JlLl9pc09wdGlvbnNBUEkpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBhZGRTdG9yZVRvRGV2dG9vbHMoYXBwLCBcbiAgICAvLyBGSVhNRTogaXMgdGhlcmUgYSB3YXkgdG8gYWxsb3cgdGhlIGFzc2lnbm1lbnQgZnJvbSBTdG9yZTxJZCwgUywgRywgQT4gdG8gU3RvcmVHZW5lcmljP1xuICAgIHN0b3JlKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgUGluaWEgaW5zdGFuY2UgdG8gYmUgdXNlZCBieSB0aGUgYXBwbGljYXRpb25cbiAqL1xuZnVuY3Rpb24gY3JlYXRlUGluaWEoKSB7XG4gICAgY29uc3Qgc2NvcGUgPSBlZmZlY3RTY29wZSh0cnVlKTtcbiAgICAvLyBOT1RFOiBoZXJlIHdlIGNvdWxkIGNoZWNrIHRoZSB3aW5kb3cgb2JqZWN0IGZvciBhIHN0YXRlIGFuZCBkaXJlY3RseSBzZXQgaXRcbiAgICAvLyBpZiB0aGVyZSBpcyBhbnl0aGluZyBsaWtlIGl0IHdpdGggVnVlIDMgU1NSXG4gICAgY29uc3Qgc3RhdGUgPSBzY29wZS5ydW4oKCkgPT4gcmVmKHt9KSk7XG4gICAgbGV0IF9wID0gW107XG4gICAgLy8gcGx1Z2lucyBhZGRlZCBiZWZvcmUgY2FsbGluZyBhcHAudXNlKHBpbmlhKVxuICAgIGxldCB0b0JlSW5zdGFsbGVkID0gW107XG4gICAgY29uc3QgcGluaWEgPSBtYXJrUmF3KHtcbiAgICAgICAgaW5zdGFsbChhcHApIHtcbiAgICAgICAgICAgIC8vIHRoaXMgYWxsb3dzIGNhbGxpbmcgdXNlU3RvcmUoKSBvdXRzaWRlIG9mIGEgY29tcG9uZW50IHNldHVwIGFmdGVyXG4gICAgICAgICAgICAvLyBpbnN0YWxsaW5nIHBpbmlhJ3MgcGx1Z2luXG4gICAgICAgICAgICBzZXRBY3RpdmVQaW5pYShwaW5pYSk7XG4gICAgICAgICAgICBpZiAoIWlzVnVlMikge1xuICAgICAgICAgICAgICAgIHBpbmlhLl9hID0gYXBwO1xuICAgICAgICAgICAgICAgIGFwcC5wcm92aWRlKHBpbmlhU3ltYm9sLCBwaW5pYSk7XG4gICAgICAgICAgICAgICAgYXBwLmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzLiRwaW5pYSA9IHBpbmlhO1xuICAgICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgICAgICAgICAgICAgaWYgKCgoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8ICh0eXBlb2YgX19WVUVfUFJPRF9ERVZUT09MU19fICE9PSAndW5kZWZpbmVkJyAmJiBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pKSAmJiAhKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpKSAmJiBJU19DTElFTlQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJQaW5pYURldnRvb2xzKGFwcCwgcGluaWEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0b0JlSW5zdGFsbGVkLmZvckVhY2goKHBsdWdpbikgPT4gX3AucHVzaChwbHVnaW4pKTtcbiAgICAgICAgICAgICAgICB0b0JlSW5zdGFsbGVkID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHVzZShwbHVnaW4pIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fYSAmJiAhaXNWdWUyKSB7XG4gICAgICAgICAgICAgICAgdG9CZUluc3RhbGxlZC5wdXNoKHBsdWdpbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBfcC5wdXNoKHBsdWdpbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcbiAgICAgICAgX3AsXG4gICAgICAgIC8vIGl0J3MgYWN0dWFsbHkgdW5kZWZpbmVkIGhlcmVcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICBfYTogbnVsbCxcbiAgICAgICAgX2U6IHNjb3BlLFxuICAgICAgICBfczogbmV3IE1hcCgpLFxuICAgICAgICBzdGF0ZSxcbiAgICB9KTtcbiAgICAvLyBwaW5pYSBkZXZ0b29scyByZWx5IG9uIGRldiBvbmx5IGZlYXR1cmVzIHNvIHRoZXkgY2Fubm90IGJlIGZvcmNlZCB1bmxlc3NcbiAgICAvLyB0aGUgZGV2IGJ1aWxkIG9mIFZ1ZSBpcyB1c2VkLiBBdm9pZCBvbGQgYnJvd3NlcnMgbGlrZSBJRTExLlxuICAgIGlmICgoKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCAodHlwZW9mIF9fVlVFX1BST0RfREVWVE9PTFNfXyAhPT0gJ3VuZGVmaW5lZCcgJiYgX19WVUVfUFJPRF9ERVZUT09MU19fKSkgJiYgIShwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSkgJiYgSVNfQ0xJRU5UICYmIHR5cGVvZiBQcm94eSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcGluaWEudXNlKGRldnRvb2xzUGx1Z2luKTtcbiAgICB9XG4gICAgcmV0dXJuIHBpbmlhO1xufVxuLyoqXG4gKiBEaXNwb3NlIGEgUGluaWEgaW5zdGFuY2UgYnkgc3RvcHBpbmcgaXRzIGVmZmVjdFNjb3BlIGFuZCByZW1vdmluZyB0aGUgc3RhdGUsIHBsdWdpbnMgYW5kIHN0b3Jlcy4gVGhpcyBpcyBtb3N0bHlcbiAqIHVzZWZ1bCBpbiB0ZXN0cywgd2l0aCBib3RoIGEgdGVzdGluZyBwaW5pYSBvciBhIHJlZ3VsYXIgcGluaWEgYW5kIGluIGFwcGxpY2F0aW9ucyB0aGF0IHVzZSBtdWx0aXBsZSBwaW5pYSBpbnN0YW5jZXMuXG4gKiBPbmNlIGRpc3Bvc2VkLCB0aGUgcGluaWEgaW5zdGFuY2UgY2Fubm90IGJlIHVzZWQgYW55bW9yZS5cbiAqXG4gKiBAcGFyYW0gcGluaWEgLSBwaW5pYSBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiBkaXNwb3NlUGluaWEocGluaWEpIHtcbiAgICBwaW5pYS5fZS5zdG9wKCk7XG4gICAgcGluaWEuX3MuY2xlYXIoKTtcbiAgICBwaW5pYS5fcC5zcGxpY2UoMCk7XG4gICAgcGluaWEuc3RhdGUudmFsdWUgPSB7fTtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBub24gdmFsaWRcbiAgICBwaW5pYS5fYSA9IG51bGw7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgZnVuY3Rpb24gaXMgYSBgU3RvcmVEZWZpbml0aW9uYC5cbiAqXG4gKiBAcGFyYW0gZm4gLSBvYmplY3QgdG8gdGVzdFxuICogQHJldHVybnMgdHJ1ZSBpZiBgZm5gIGlzIGEgU3RvcmVEZWZpbml0aW9uXG4gKi9cbmNvbnN0IGlzVXNlU3RvcmUgPSAoZm4pID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBmbi4kaWQgPT09ICdzdHJpbmcnO1xufTtcbi8qKlxuICogTXV0YXRlcyBpbiBwbGFjZSBgbmV3U3RhdGVgIHdpdGggYG9sZFN0YXRlYCB0byBfaG90IHVwZGF0ZV8gaXQuIEl0IHdpbGxcbiAqIHJlbW92ZSBhbnkga2V5IG5vdCBleGlzdGluZyBpbiBgbmV3U3RhdGVgIGFuZCByZWN1cnNpdmVseSBtZXJnZSBwbGFpblxuICogb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0gbmV3U3RhdGUgLSBuZXcgc3RhdGUgb2JqZWN0IHRvIGJlIHBhdGNoZWRcbiAqIEBwYXJhbSBvbGRTdGF0ZSAtIG9sZCBzdGF0ZSB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIHBhdGNoIG5ld1N0YXRlXG4gKiBAcmV0dXJucyAtIG5ld1N0YXRlXG4gKi9cbmZ1bmN0aW9uIHBhdGNoT2JqZWN0KG5ld1N0YXRlLCBvbGRTdGF0ZSkge1xuICAgIC8vIG5vIG5lZWQgdG8gZ28gdGhyb3VnaCBzeW1ib2xzIGJlY2F1c2UgdGhleSBjYW5ub3QgYmUgc2VyaWFsaXplZCBhbnl3YXlcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvbGRTdGF0ZSkge1xuICAgICAgICBjb25zdCBzdWJQYXRjaCA9IG9sZFN0YXRlW2tleV07XG4gICAgICAgIC8vIHNraXAgdGhlIHdob2xlIHN1YiB0cmVlXG4gICAgICAgIGlmICghKGtleSBpbiBuZXdTdGF0ZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhcmdldFZhbHVlID0gbmV3U3RhdGVba2V5XTtcbiAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QodGFyZ2V0VmFsdWUpICYmXG4gICAgICAgICAgICBpc1BsYWluT2JqZWN0KHN1YlBhdGNoKSAmJlxuICAgICAgICAgICAgIWlzUmVmKHN1YlBhdGNoKSAmJlxuICAgICAgICAgICAgIWlzUmVhY3RpdmUoc3ViUGF0Y2gpKSB7XG4gICAgICAgICAgICBuZXdTdGF0ZVtrZXldID0gcGF0Y2hPYmplY3QodGFyZ2V0VmFsdWUsIHN1YlBhdGNoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIG9iamVjdHMgYXJlIGVpdGhlciBhIGJpdCBtb3JlIGNvbXBsZXggKGUuZy4gcmVmcykgb3IgcHJpbWl0aXZlcywgc28gd2VcbiAgICAgICAgICAgIC8vIGp1c3Qgc2V0IHRoZSB3aG9sZSB0aGluZ1xuICAgICAgICAgICAgaWYgKGlzVnVlMikge1xuICAgICAgICAgICAgICAgIHNldChuZXdTdGF0ZSwga2V5LCBzdWJQYXRjaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXdTdGF0ZVtrZXldID0gc3ViUGF0Y2g7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ld1N0YXRlO1xufVxuLyoqXG4gKiBDcmVhdGVzIGFuIF9hY2NlcHRfIGZ1bmN0aW9uIHRvIHBhc3MgdG8gYGltcG9ydC5tZXRhLmhvdGAgaW4gVml0ZSBhcHBsaWNhdGlvbnMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGpzXG4gKiBjb25zdCB1c2VVc2VyID0gZGVmaW5lU3RvcmUoLi4uKVxuICogaWYgKGltcG9ydC5tZXRhLmhvdCkge1xuICogICBpbXBvcnQubWV0YS5ob3QuYWNjZXB0KGFjY2VwdEhNUlVwZGF0ZSh1c2VVc2VyLCBpbXBvcnQubWV0YS5ob3QpKVxuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIGluaXRpYWxVc2VTdG9yZSAtIHJldHVybiBvZiB0aGUgZGVmaW5lU3RvcmUgdG8gaG90IHVwZGF0ZVxuICogQHBhcmFtIGhvdCAtIGBpbXBvcnQubWV0YS5ob3RgXG4gKi9cbmZ1bmN0aW9uIGFjY2VwdEhNUlVwZGF0ZShpbml0aWFsVXNlU3RvcmUsIGhvdCkge1xuICAgIC8vIHN0cmlwIGFzIG11Y2ggYXMgcG9zc2libGUgZnJvbSBpaWZlLnByb2RcbiAgICBpZiAoIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICByZXR1cm4gKCkgPT4geyB9O1xuICAgIH1cbiAgICByZXR1cm4gKG5ld01vZHVsZSkgPT4ge1xuICAgICAgICBjb25zdCBwaW5pYSA9IGhvdC5kYXRhLnBpbmlhIHx8IGluaXRpYWxVc2VTdG9yZS5fcGluaWE7XG4gICAgICAgIGlmICghcGluaWEpIHtcbiAgICAgICAgICAgIC8vIHRoaXMgc3RvcmUgaXMgc3RpbGwgbm90IHVzZWRcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBwcmVzZXJ2ZSB0aGUgcGluaWEgaW5zdGFuY2UgYWNyb3NzIGxvYWRzXG4gICAgICAgIGhvdC5kYXRhLnBpbmlhID0gcGluaWE7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdnb3QgZGF0YScsIG5ld1N0b3JlKVxuICAgICAgICBmb3IgKGNvbnN0IGV4cG9ydE5hbWUgaW4gbmV3TW9kdWxlKSB7XG4gICAgICAgICAgICBjb25zdCB1c2VTdG9yZSA9IG5ld01vZHVsZVtleHBvcnROYW1lXTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdjaGVja2luZyBmb3InLCBleHBvcnROYW1lKVxuICAgICAgICAgICAgaWYgKGlzVXNlU3RvcmUodXNlU3RvcmUpICYmIHBpbmlhLl9zLmhhcyh1c2VTdG9yZS4kaWQpKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0FjY2VwdGluZyB1cGRhdGUgZm9yJywgdXNlU3RvcmUuJGlkKVxuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gdXNlU3RvcmUuJGlkO1xuICAgICAgICAgICAgICAgIGlmIChpZCAhPT0gaW5pdGlhbFVzZVN0b3JlLiRpZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFRoZSBpZCBvZiB0aGUgc3RvcmUgY2hhbmdlZCBmcm9tIFwiJHtpbml0aWFsVXNlU3RvcmUuJGlkfVwiIHRvIFwiJHtpZH1cIi4gUmVsb2FkaW5nLmApO1xuICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gaW1wb3J0Lm1ldGEuaG90LmludmFsaWRhdGUoKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaG90LmludmFsaWRhdGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdTdG9yZSA9IHBpbmlhLl9zLmdldChpZCk7XG4gICAgICAgICAgICAgICAgaWYgKCFleGlzdGluZ1N0b3JlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbUGluaWFdOiBza2lwcGluZyBobXIgYmVjYXVzZSBzdG9yZSBkb2Vzbid0IGV4aXN0IHlldGApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVzZVN0b3JlKHBpbmlhLCBleGlzdGluZ1N0b3JlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG5cbmNvbnN0IG5vb3AgPSAoKSA9PiB7IH07XG5mdW5jdGlvbiBhZGRTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9ucywgY2FsbGJhY2ssIGRldGFjaGVkLCBvbkNsZWFudXAgPSBub29wKSB7XG4gICAgc3Vic2NyaXB0aW9ucy5wdXNoKGNhbGxiYWNrKTtcbiAgICBjb25zdCByZW1vdmVTdWJzY3JpcHRpb24gPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGlkeCA9IHN1YnNjcmlwdGlvbnMuaW5kZXhPZihjYWxsYmFjayk7XG4gICAgICAgIGlmIChpZHggPiAtMSkge1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9ucy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgIG9uQ2xlYW51cCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBpZiAoIWRldGFjaGVkICYmIGdldEN1cnJlbnRTY29wZSgpKSB7XG4gICAgICAgIG9uU2NvcGVEaXNwb3NlKHJlbW92ZVN1YnNjcmlwdGlvbik7XG4gICAgfVxuICAgIHJldHVybiByZW1vdmVTdWJzY3JpcHRpb247XG59XG5mdW5jdGlvbiB0cmlnZ2VyU3Vic2NyaXB0aW9ucyhzdWJzY3JpcHRpb25zLCAuLi5hcmdzKSB7XG4gICAgc3Vic2NyaXB0aW9ucy5zbGljZSgpLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpO1xuICAgIH0pO1xufVxuXG5jb25zdCBmYWxsYmFja1J1bldpdGhDb250ZXh0ID0gKGZuKSA9PiBmbigpO1xuLyoqXG4gKiBNYXJrcyBhIGZ1bmN0aW9uIGFzIGFuIGFjdGlvbiBmb3IgYCRvbkFjdGlvbmBcbiAqIEBpbnRlcm5hbFxuICovXG5jb25zdCBBQ1RJT05fTUFSS0VSID0gU3ltYm9sKCk7XG4vKipcbiAqIEFjdGlvbiBuYW1lIHN5bWJvbC4gQWxsb3dzIHRvIGFkZCBhIG5hbWUgdG8gYW4gYWN0aW9uIGFmdGVyIGRlZmluaW5nIGl0XG4gKiBAaW50ZXJuYWxcbiAqL1xuY29uc3QgQUNUSU9OX05BTUUgPSBTeW1ib2woKTtcbmZ1bmN0aW9uIG1lcmdlUmVhY3RpdmVPYmplY3RzKHRhcmdldCwgcGF0Y2hUb0FwcGx5KSB7XG4gICAgLy8gSGFuZGxlIE1hcCBpbnN0YW5jZXNcbiAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgTWFwICYmIHBhdGNoVG9BcHBseSBpbnN0YW5jZW9mIE1hcCkge1xuICAgICAgICBwYXRjaFRvQXBwbHkuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4gdGFyZ2V0LnNldChrZXksIHZhbHVlKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRhcmdldCBpbnN0YW5jZW9mIFNldCAmJiBwYXRjaFRvQXBwbHkgaW5zdGFuY2VvZiBTZXQpIHtcbiAgICAgICAgLy8gSGFuZGxlIFNldCBpbnN0YW5jZXNcbiAgICAgICAgcGF0Y2hUb0FwcGx5LmZvckVhY2godGFyZ2V0LmFkZCwgdGFyZ2V0KTtcbiAgICB9XG4gICAgLy8gbm8gbmVlZCB0byBnbyB0aHJvdWdoIHN5bWJvbHMgYmVjYXVzZSB0aGV5IGNhbm5vdCBiZSBzZXJpYWxpemVkIGFueXdheVxuICAgIGZvciAoY29uc3Qga2V5IGluIHBhdGNoVG9BcHBseSkge1xuICAgICAgICBpZiAoIXBhdGNoVG9BcHBseS5oYXNPd25Qcm9wZXJ0eShrZXkpKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGNvbnN0IHN1YlBhdGNoID0gcGF0Y2hUb0FwcGx5W2tleV07XG4gICAgICAgIGNvbnN0IHRhcmdldFZhbHVlID0gdGFyZ2V0W2tleV07XG4gICAgICAgIGlmIChpc1BsYWluT2JqZWN0KHRhcmdldFZhbHVlKSAmJlxuICAgICAgICAgICAgaXNQbGFpbk9iamVjdChzdWJQYXRjaCkgJiZcbiAgICAgICAgICAgIHRhcmdldC5oYXNPd25Qcm9wZXJ0eShrZXkpICYmXG4gICAgICAgICAgICAhaXNSZWYoc3ViUGF0Y2gpICYmXG4gICAgICAgICAgICAhaXNSZWFjdGl2ZShzdWJQYXRjaCkpIHtcbiAgICAgICAgICAgIC8vIE5PVEU6IGhlcmUgSSB3YW50ZWQgdG8gd2FybiBhYm91dCBpbmNvbnNpc3RlbnQgdHlwZXMgYnV0IGl0J3Mgbm90IHBvc3NpYmxlIGJlY2F1c2UgaW4gc2V0dXAgc3RvcmVzIG9uZSBtaWdodFxuICAgICAgICAgICAgLy8gc3RhcnQgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHkgYXMgYSBjZXJ0YWluIHR5cGUgZS5nLiBhIE1hcCwgYW5kIHRoZW4gZm9yIHNvbWUgcmVhc29uLCBkdXJpbmcgU1NSLCBjaGFuZ2UgdGhhdFxuICAgICAgICAgICAgLy8gdG8gYHVuZGVmaW5lZGAuIFdoZW4gdHJ5aW5nIHRvIGh5ZHJhdGUsIHdlIHdhbnQgdG8gb3ZlcnJpZGUgdGhlIE1hcCB3aXRoIGB1bmRlZmluZWRgLlxuICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBtZXJnZVJlYWN0aXZlT2JqZWN0cyh0YXJnZXRWYWx1ZSwgc3ViUGF0Y2gpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogc3ViUGF0Y2ggaXMgYSB2YWxpZCB2YWx1ZVxuICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzdWJQYXRjaDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuY29uc3Qgc2tpcEh5ZHJhdGVTeW1ib2wgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICA/IFN5bWJvbCgncGluaWE6c2tpcEh5ZHJhdGlvbicpXG4gICAgOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBTeW1ib2woKTtcbi8qKlxuICogVGVsbHMgUGluaWEgdG8gc2tpcCB0aGUgaHlkcmF0aW9uIHByb2Nlc3Mgb2YgYSBnaXZlbiBvYmplY3QuIFRoaXMgaXMgdXNlZnVsIGluIHNldHVwIHN0b3JlcyAob25seSkgd2hlbiB5b3UgcmV0dXJuIGFcbiAqIHN0YXRlZnVsIG9iamVjdCBpbiB0aGUgc3RvcmUgYnV0IGl0IGlzbid0IHJlYWxseSBzdGF0ZS4gZS5nLiByZXR1cm5pbmcgYSByb3V0ZXIgaW5zdGFuY2UgaW4gYSBzZXR1cCBzdG9yZS5cbiAqXG4gKiBAcGFyYW0gb2JqIC0gdGFyZ2V0IG9iamVjdFxuICogQHJldHVybnMgb2JqXG4gKi9cbmZ1bmN0aW9uIHNraXBIeWRyYXRlKG9iaikge1xuICAgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBza2lwSHlkcmF0ZVN5bWJvbCwge30pO1xufVxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgYSB2YWx1ZSBzaG91bGQgYmUgaHlkcmF0ZWRcbiAqXG4gKiBAcGFyYW0gb2JqIC0gdGFyZ2V0IHZhcmlhYmxlXG4gKiBAcmV0dXJucyB0cnVlIGlmIGBvYmpgIHNob3VsZCBiZSBoeWRyYXRlZFxuICovXG5mdW5jdGlvbiBzaG91bGRIeWRyYXRlKG9iaikge1xuICAgIHJldHVybiAhaXNQbGFpbk9iamVjdChvYmopIHx8ICFvYmouaGFzT3duUHJvcGVydHkoc2tpcEh5ZHJhdGVTeW1ib2wpO1xufVxuY29uc3QgeyBhc3NpZ24gfSA9IE9iamVjdDtcbmZ1bmN0aW9uIGlzQ29tcHV0ZWQobykge1xuICAgIHJldHVybiAhIShpc1JlZihvKSAmJiBvLmVmZmVjdCk7XG59XG5mdW5jdGlvbiBjcmVhdGVPcHRpb25zU3RvcmUoaWQsIG9wdGlvbnMsIHBpbmlhLCBob3QpIHtcbiAgICBjb25zdCB7IHN0YXRlLCBhY3Rpb25zLCBnZXR0ZXJzIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IGluaXRpYWxTdGF0ZSA9IHBpbmlhLnN0YXRlLnZhbHVlW2lkXTtcbiAgICBsZXQgc3RvcmU7XG4gICAgZnVuY3Rpb24gc2V0dXAoKSB7XG4gICAgICAgIGlmICghaW5pdGlhbFN0YXRlICYmICghKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8ICFob3QpKSB7XG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgICAgIGlmIChpc1Z1ZTIpIHtcbiAgICAgICAgICAgICAgICBzZXQocGluaWEuc3RhdGUudmFsdWUsIGlkLCBzdGF0ZSA/IHN0YXRlKCkgOiB7fSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaW5pYS5zdGF0ZS52YWx1ZVtpZF0gPSBzdGF0ZSA/IHN0YXRlKCkgOiB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBhdm9pZCBjcmVhdGluZyBhIHN0YXRlIGluIHBpbmlhLnN0YXRlLnZhbHVlXG4gICAgICAgIGNvbnN0IGxvY2FsU3RhdGUgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaG90XG4gICAgICAgICAgICA/IC8vIHVzZSByZWYoKSB0byB1bndyYXAgcmVmcyBpbnNpZGUgc3RhdGUgVE9ETzogY2hlY2sgaWYgdGhpcyBpcyBzdGlsbCBuZWNlc3NhcnlcbiAgICAgICAgICAgICAgICB0b1JlZnMocmVmKHN0YXRlID8gc3RhdGUoKSA6IHt9KS52YWx1ZSlcbiAgICAgICAgICAgIDogdG9SZWZzKHBpbmlhLnN0YXRlLnZhbHVlW2lkXSk7XG4gICAgICAgIHJldHVybiBhc3NpZ24obG9jYWxTdGF0ZSwgYWN0aW9ucywgT2JqZWN0LmtleXMoZ2V0dGVycyB8fCB7fSkucmVkdWNlKChjb21wdXRlZEdldHRlcnMsIG5hbWUpID0+IHtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgbmFtZSBpbiBsb2NhbFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBb8J+NjV06IEEgZ2V0dGVyIGNhbm5vdCBoYXZlIHRoZSBzYW1lIG5hbWUgYXMgYW5vdGhlciBzdGF0ZSBwcm9wZXJ0eS4gUmVuYW1lIG9uZSBvZiB0aGVtLiBGb3VuZCB3aXRoIFwiJHtuYW1lfVwiIGluIHN0b3JlIFwiJHtpZH1cIi5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbXB1dGVkR2V0dGVyc1tuYW1lXSA9IG1hcmtSYXcoY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldEFjdGl2ZVBpbmlhKHBpbmlhKTtcbiAgICAgICAgICAgICAgICAvLyBpdCB3YXMgY3JlYXRlZCBqdXN0IGJlZm9yZVxuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlID0gcGluaWEuX3MuZ2V0KGlkKTtcbiAgICAgICAgICAgICAgICAvLyBhbGxvdyBjcm9zcyB1c2luZyBzdG9yZXNcbiAgICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgICAgICAgICBpZiAoaXNWdWUyICYmICFzdG9yZS5fcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gZ2V0dGVycyFbbmFtZV0uY2FsbChjb250ZXh0LCBjb250ZXh0KVxuICAgICAgICAgICAgICAgIC8vIFRPRE86IGF2b2lkIHJlYWRpbmcgdGhlIGdldHRlciB3aGlsZSBhc3NpZ25pbmcgd2l0aCBhIGdsb2JhbCB2YXJpYWJsZVxuICAgICAgICAgICAgICAgIHJldHVybiBnZXR0ZXJzW25hbWVdLmNhbGwoc3RvcmUsIHN0b3JlKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBjb21wdXRlZEdldHRlcnM7XG4gICAgICAgIH0sIHt9KSk7XG4gICAgfVxuICAgIHN0b3JlID0gY3JlYXRlU2V0dXBTdG9yZShpZCwgc2V0dXAsIG9wdGlvbnMsIHBpbmlhLCBob3QsIHRydWUpO1xuICAgIHJldHVybiBzdG9yZTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVNldHVwU3RvcmUoJGlkLCBzZXR1cCwgb3B0aW9ucyA9IHt9LCBwaW5pYSwgaG90LCBpc09wdGlvbnNTdG9yZSkge1xuICAgIGxldCBzY29wZTtcbiAgICBjb25zdCBvcHRpb25zRm9yUGx1Z2luID0gYXNzaWduKHsgYWN0aW9uczoge30gfSwgb3B0aW9ucyk7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhcGluaWEuX2UuYWN0aXZlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUGluaWEgZGVzdHJveWVkJyk7XG4gICAgfVxuICAgIC8vIHdhdGNoZXIgb3B0aW9ucyBmb3IgJHN1YnNjcmliZVxuICAgIGNvbnN0ICRzdWJzY3JpYmVPcHRpb25zID0geyBkZWVwOiB0cnVlIH07XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc1Z1ZTIpIHtcbiAgICAgICAgJHN1YnNjcmliZU9wdGlvbnMub25UcmlnZ2VyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgICAgICAgaWYgKGlzTGlzdGVuaW5nKSB7XG4gICAgICAgICAgICAgICAgZGVidWdnZXJFdmVudHMgPSBldmVudDtcbiAgICAgICAgICAgICAgICAvLyBhdm9pZCB0cmlnZ2VyaW5nIHRoaXMgd2hpbGUgdGhlIHN0b3JlIGlzIGJlaW5nIGJ1aWx0IGFuZCB0aGUgc3RhdGUgaXMgYmVpbmcgc2V0IGluIHBpbmlhXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc0xpc3RlbmluZyA9PSBmYWxzZSAmJiAhc3RvcmUuX2hvdFVwZGF0aW5nKSB7XG4gICAgICAgICAgICAgICAgLy8gbGV0IHBhdGNoIHNlbmQgYWxsIHRoZSBldmVudHMgdG9nZXRoZXIgbGF0ZXJcbiAgICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRlYnVnZ2VyRXZlbnRzKSkge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlckV2ZW50cy5wdXNoKGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ/CfjY0gZGVidWdnZXJFdmVudHMgc2hvdWxkIGJlIGFuIGFycmF5LiBUaGlzIGlzIG1vc3QgbGlrZWx5IGFuIGludGVybmFsIFBpbmlhIGJ1Zy4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIGludGVybmFsIHN0YXRlXG4gICAgbGV0IGlzTGlzdGVuaW5nOyAvLyBzZXQgdG8gdHJ1ZSBhdCB0aGUgZW5kXG4gICAgbGV0IGlzU3luY0xpc3RlbmluZzsgLy8gc2V0IHRvIHRydWUgYXQgdGhlIGVuZFxuICAgIGxldCBzdWJzY3JpcHRpb25zID0gW107XG4gICAgbGV0IGFjdGlvblN1YnNjcmlwdGlvbnMgPSBbXTtcbiAgICBsZXQgZGVidWdnZXJFdmVudHM7XG4gICAgY29uc3QgaW5pdGlhbFN0YXRlID0gcGluaWEuc3RhdGUudmFsdWVbJGlkXTtcbiAgICAvLyBhdm9pZCBzZXR0aW5nIHRoZSBzdGF0ZSBmb3Igb3B0aW9uIHN0b3JlcyBpZiBpdCBpcyBzZXRcbiAgICAvLyBieSB0aGUgc2V0dXBcbiAgICBpZiAoIWlzT3B0aW9uc1N0b3JlICYmICFpbml0aWFsU3RhdGUgJiYgKCEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgIWhvdCkpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmIChpc1Z1ZTIpIHtcbiAgICAgICAgICAgIHNldChwaW5pYS5zdGF0ZS52YWx1ZSwgJGlkLCB7fSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdID0ge307XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgaG90U3RhdGUgPSByZWYoe30pO1xuICAgIC8vIGF2b2lkIHRyaWdnZXJpbmcgdG9vIG1hbnkgbGlzdGVuZXJzXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3BpbmlhL2lzc3Vlcy8xMTI5XG4gICAgbGV0IGFjdGl2ZUxpc3RlbmVyO1xuICAgIGZ1bmN0aW9uICRwYXRjaChwYXJ0aWFsU3RhdGVPck11dGF0b3IpIHtcbiAgICAgICAgbGV0IHN1YnNjcmlwdGlvbk11dGF0aW9uO1xuICAgICAgICBpc0xpc3RlbmluZyA9IGlzU3luY0xpc3RlbmluZyA9IGZhbHNlO1xuICAgICAgICAvLyByZXNldCB0aGUgZGVidWdnZXIgZXZlbnRzIHNpbmNlIHBhdGNoZXMgYXJlIHN5bmNcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgZGVidWdnZXJFdmVudHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHBhcnRpYWxTdGF0ZU9yTXV0YXRvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcGFydGlhbFN0YXRlT3JNdXRhdG9yKHBpbmlhLnN0YXRlLnZhbHVlWyRpZF0pO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uTXV0YXRpb24gPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogTXV0YXRpb25UeXBlLnBhdGNoRnVuY3Rpb24sXG4gICAgICAgICAgICAgICAgc3RvcmVJZDogJGlkLFxuICAgICAgICAgICAgICAgIGV2ZW50czogZGVidWdnZXJFdmVudHMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWVyZ2VSZWFjdGl2ZU9iamVjdHMocGluaWEuc3RhdGUudmFsdWVbJGlkXSwgcGFydGlhbFN0YXRlT3JNdXRhdG9yKTtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbk11dGF0aW9uID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IE11dGF0aW9uVHlwZS5wYXRjaE9iamVjdCxcbiAgICAgICAgICAgICAgICBwYXlsb2FkOiBwYXJ0aWFsU3RhdGVPck11dGF0b3IsXG4gICAgICAgICAgICAgICAgc3RvcmVJZDogJGlkLFxuICAgICAgICAgICAgICAgIGV2ZW50czogZGVidWdnZXJFdmVudHMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG15TGlzdGVuZXJJZCA9IChhY3RpdmVMaXN0ZW5lciA9IFN5bWJvbCgpKTtcbiAgICAgICAgbmV4dFRpY2soKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChhY3RpdmVMaXN0ZW5lciA9PT0gbXlMaXN0ZW5lcklkKSB7XG4gICAgICAgICAgICAgICAgaXNMaXN0ZW5pbmcgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaXNTeW5jTGlzdGVuaW5nID0gdHJ1ZTtcbiAgICAgICAgLy8gYmVjYXVzZSB3ZSBwYXVzZWQgdGhlIHdhdGNoZXIsIHdlIG5lZWQgdG8gbWFudWFsbHkgY2FsbCB0aGUgc3Vic2NyaXB0aW9uc1xuICAgICAgICB0cmlnZ2VyU3Vic2NyaXB0aW9ucyhzdWJzY3JpcHRpb25zLCBzdWJzY3JpcHRpb25NdXRhdGlvbiwgcGluaWEuc3RhdGUudmFsdWVbJGlkXSk7XG4gICAgfVxuICAgIGNvbnN0ICRyZXNldCA9IGlzT3B0aW9uc1N0b3JlXG4gICAgICAgID8gZnVuY3Rpb24gJHJlc2V0KCkge1xuICAgICAgICAgICAgY29uc3QgeyBzdGF0ZSB9ID0gb3B0aW9ucztcbiAgICAgICAgICAgIGNvbnN0IG5ld1N0YXRlID0gc3RhdGUgPyBzdGF0ZSgpIDoge307XG4gICAgICAgICAgICAvLyB3ZSB1c2UgYSBwYXRjaCB0byBncm91cCBhbGwgY2hhbmdlcyBpbnRvIG9uZSBzaW5nbGUgc3Vic2NyaXB0aW9uXG4gICAgICAgICAgICB0aGlzLiRwYXRjaCgoJHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRklYTUU6IHNob3VsZG4ndCBlcnJvcj9cbiAgICAgICAgICAgICAgICBhc3NpZ24oJHN0YXRlLCBuZXdTdGF0ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICA6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgICAgICAgICA/ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDwn42NOiBTdG9yZSBcIiR7JGlkfVwiIGlzIGJ1aWx0IHVzaW5nIHRoZSBzZXR1cCBzeW50YXggYW5kIGRvZXMgbm90IGltcGxlbWVudCAkcmVzZXQoKS5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBub29wO1xuICAgIGZ1bmN0aW9uICRkaXNwb3NlKCkge1xuICAgICAgICBzY29wZS5zdG9wKCk7XG4gICAgICAgIHN1YnNjcmlwdGlvbnMgPSBbXTtcbiAgICAgICAgYWN0aW9uU3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgICAgICBwaW5pYS5fcy5kZWxldGUoJGlkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGVscGVyIHRoYXQgd3JhcHMgZnVuY3Rpb24gc28gaXQgY2FuIGJlIHRyYWNrZWQgd2l0aCAkb25BY3Rpb25cbiAgICAgKiBAcGFyYW0gZm4gLSBhY3Rpb24gdG8gd3JhcFxuICAgICAqIEBwYXJhbSBuYW1lIC0gbmFtZSBvZiB0aGUgYWN0aW9uXG4gICAgICovXG4gICAgY29uc3QgYWN0aW9uID0gKGZuLCBuYW1lID0gJycpID0+IHtcbiAgICAgICAgaWYgKEFDVElPTl9NQVJLRVIgaW4gZm4pIHtcbiAgICAgICAgICAgIGZuW0FDVElPTl9OQU1FXSA9IG5hbWU7XG4gICAgICAgICAgICByZXR1cm4gZm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd3JhcHBlZEFjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNldEFjdGl2ZVBpbmlhKHBpbmlhKTtcbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBBcnJheS5mcm9tKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBjb25zdCBhZnRlckNhbGxiYWNrTGlzdCA9IFtdO1xuICAgICAgICAgICAgY29uc3Qgb25FcnJvckNhbGxiYWNrTGlzdCA9IFtdO1xuICAgICAgICAgICAgZnVuY3Rpb24gYWZ0ZXIoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBhZnRlckNhbGxiYWNrTGlzdC5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBvbkVycm9yQ2FsbGJhY2tMaXN0LnB1c2goY2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgdHJpZ2dlclN1YnNjcmlwdGlvbnMoYWN0aW9uU3Vic2NyaXB0aW9ucywge1xuICAgICAgICAgICAgICAgIGFyZ3MsXG4gICAgICAgICAgICAgICAgbmFtZTogd3JhcHBlZEFjdGlvbltBQ1RJT05fTkFNRV0sXG4gICAgICAgICAgICAgICAgc3RvcmUsXG4gICAgICAgICAgICAgICAgYWZ0ZXIsXG4gICAgICAgICAgICAgICAgb25FcnJvcixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGV0IHJldDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0ID0gZm4uYXBwbHkodGhpcyAmJiB0aGlzLiRpZCA9PT0gJGlkID8gdGhpcyA6IHN0b3JlLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgc3luYyBlcnJvcnNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRyaWdnZXJTdWJzY3JpcHRpb25zKG9uRXJyb3JDYWxsYmFja0xpc3QsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldFxuICAgICAgICAgICAgICAgICAgICAudGhlbigodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlclN1YnNjcmlwdGlvbnMoYWZ0ZXJDYWxsYmFja0xpc3QsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlclN1YnNjcmlwdGlvbnMob25FcnJvckNhbGxiYWNrTGlzdCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdHJpZ2dlciBhZnRlciBjYWxsYmFja3NcbiAgICAgICAgICAgIHRyaWdnZXJTdWJzY3JpcHRpb25zKGFmdGVyQ2FsbGJhY2tMaXN0LCByZXQpO1xuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfTtcbiAgICAgICAgd3JhcHBlZEFjdGlvbltBQ1RJT05fTUFSS0VSXSA9IHRydWU7XG4gICAgICAgIHdyYXBwZWRBY3Rpb25bQUNUSU9OX05BTUVdID0gbmFtZTsgLy8gd2lsbCBiZSBzZXQgbGF0ZXJcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogd2UgYXJlIGludGVudGlvbmFsbHkgbGltaXRpbmcgdGhlIHJldHVybmVkIHR5cGUgdG8ganVzdCBGblxuICAgICAgICAvLyBiZWNhdXNlIGFsbCB0aGUgYWRkZWQgcHJvcGVydGllcyBhcmUgaW50ZXJuYWxzIHRoYXQgYXJlIGV4cG9zZWQgdGhyb3VnaCBgJG9uQWN0aW9uKClgIG9ubHlcbiAgICAgICAgcmV0dXJuIHdyYXBwZWRBY3Rpb247XG4gICAgfTtcbiAgICBjb25zdCBfaG1yUGF5bG9hZCA9IC8qI19fUFVSRV9fKi8gbWFya1Jhdyh7XG4gICAgICAgIGFjdGlvbnM6IHt9LFxuICAgICAgICBnZXR0ZXJzOiB7fSxcbiAgICAgICAgc3RhdGU6IFtdLFxuICAgICAgICBob3RTdGF0ZSxcbiAgICB9KTtcbiAgICBjb25zdCBwYXJ0aWFsU3RvcmUgPSB7XG4gICAgICAgIF9wOiBwaW5pYSxcbiAgICAgICAgLy8gX3M6IHNjb3BlLFxuICAgICAgICAkaWQsXG4gICAgICAgICRvbkFjdGlvbjogYWRkU3Vic2NyaXB0aW9uLmJpbmQobnVsbCwgYWN0aW9uU3Vic2NyaXB0aW9ucyksXG4gICAgICAgICRwYXRjaCxcbiAgICAgICAgJHJlc2V0LFxuICAgICAgICAkc3Vic2NyaWJlKGNhbGxiYWNrLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZVN1YnNjcmlwdGlvbiA9IGFkZFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb25zLCBjYWxsYmFjaywgb3B0aW9ucy5kZXRhY2hlZCwgKCkgPT4gc3RvcFdhdGNoZXIoKSk7XG4gICAgICAgICAgICBjb25zdCBzdG9wV2F0Y2hlciA9IHNjb3BlLnJ1bigoKSA9PiB3YXRjaCgoKSA9PiBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdLCAoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5mbHVzaCA9PT0gJ3N5bmMnID8gaXNTeW5jTGlzdGVuaW5nIDogaXNMaXN0ZW5pbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVJZDogJGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogTXV0YXRpb25UeXBlLmRpcmVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50czogZGVidWdnZXJFdmVudHMsXG4gICAgICAgICAgICAgICAgICAgIH0sIHN0YXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBhc3NpZ24oe30sICRzdWJzY3JpYmVPcHRpb25zLCBvcHRpb25zKSkpO1xuICAgICAgICAgICAgcmV0dXJuIHJlbW92ZVN1YnNjcmlwdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgJGRpc3Bvc2UsXG4gICAgfTtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoaXNWdWUyKSB7XG4gICAgICAgIC8vIHN0YXJ0IGFzIG5vbiByZWFkeVxuICAgICAgICBwYXJ0aWFsU3RvcmUuX3IgPSBmYWxzZTtcbiAgICB9XG4gICAgY29uc3Qgc3RvcmUgPSByZWFjdGl2ZSgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgKCgoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8ICh0eXBlb2YgX19WVUVfUFJPRF9ERVZUT09MU19fICE9PSAndW5kZWZpbmVkJyAmJiBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pKSAmJiAhKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpKSAmJiBJU19DTElFTlQpXG4gICAgICAgID8gYXNzaWduKHtcbiAgICAgICAgICAgIF9obXJQYXlsb2FkLFxuICAgICAgICAgICAgX2N1c3RvbVByb3BlcnRpZXM6IG1hcmtSYXcobmV3IFNldCgpKSwgLy8gZGV2dG9vbHMgY3VzdG9tIHByb3BlcnRpZXNcbiAgICAgICAgfSwgcGFydGlhbFN0b3JlXG4gICAgICAgIC8vIG11c3QgYmUgYWRkZWQgbGF0ZXJcbiAgICAgICAgLy8gc2V0dXBTdG9yZVxuICAgICAgICApXG4gICAgICAgIDogcGFydGlhbFN0b3JlKTtcbiAgICAvLyBzdG9yZSB0aGUgcGFydGlhbCBzdG9yZSBub3cgc28gdGhlIHNldHVwIG9mIHN0b3JlcyBjYW4gaW5zdGFudGlhdGUgZWFjaCBvdGhlciBiZWZvcmUgdGhleSBhcmUgZmluaXNoZWQgd2l0aG91dFxuICAgIC8vIGNyZWF0aW5nIGluZmluaXRlIGxvb3BzLlxuICAgIHBpbmlhLl9zLnNldCgkaWQsIHN0b3JlKTtcbiAgICBjb25zdCBydW5XaXRoQ29udGV4dCA9IChwaW5pYS5fYSAmJiBwaW5pYS5fYS5ydW5XaXRoQ29udGV4dCkgfHwgZmFsbGJhY2tSdW5XaXRoQ29udGV4dDtcbiAgICAvLyBUT0RPOiBpZGVhIGNyZWF0ZSBza2lwU2VyaWFsaXplIHRoYXQgbWFya3MgcHJvcGVydGllcyBhcyBub24gc2VyaWFsaXphYmxlIGFuZCB0aGV5IGFyZSBza2lwcGVkXG4gICAgY29uc3Qgc2V0dXBTdG9yZSA9IHJ1bldpdGhDb250ZXh0KCgpID0+IHBpbmlhLl9lLnJ1bigoKSA9PiAoc2NvcGUgPSBlZmZlY3RTY29wZSgpKS5ydW4oKCkgPT4gc2V0dXAoeyBhY3Rpb24gfSkpKSk7XG4gICAgLy8gb3ZlcndyaXRlIGV4aXN0aW5nIGFjdGlvbnMgdG8gc3VwcG9ydCAkb25BY3Rpb25cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzZXR1cFN0b3JlKSB7XG4gICAgICAgIGNvbnN0IHByb3AgPSBzZXR1cFN0b3JlW2tleV07XG4gICAgICAgIGlmICgoaXNSZWYocHJvcCkgJiYgIWlzQ29tcHV0ZWQocHJvcCkpIHx8IGlzUmVhY3RpdmUocHJvcCkpIHtcbiAgICAgICAgICAgIC8vIG1hcmsgaXQgYXMgYSBwaWVjZSBvZiBzdGF0ZSB0byBiZSBzZXJpYWxpemVkXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGhvdCkge1xuICAgICAgICAgICAgICAgIHNldChob3RTdGF0ZS52YWx1ZSwga2V5LCB0b1JlZihzZXR1cFN0b3JlLCBrZXkpKTtcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGVPcHRpb25TdG9yZSBkaXJlY3RseSBzZXRzIHRoZSBzdGF0ZSBpbiBwaW5pYS5zdGF0ZS52YWx1ZSBzbyB3ZVxuICAgICAgICAgICAgICAgIC8vIGNhbiBqdXN0IHNraXAgdGhhdFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIWlzT3B0aW9uc1N0b3JlKSB7XG4gICAgICAgICAgICAgICAgLy8gaW4gc2V0dXAgc3RvcmVzIHdlIG11c3QgaHlkcmF0ZSB0aGUgc3RhdGUgYW5kIHN5bmMgcGluaWEgc3RhdGUgdHJlZSB3aXRoIHRoZSByZWZzIHRoZSB1c2VyIGp1c3QgY3JlYXRlZFxuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsU3RhdGUgJiYgc2hvdWxkSHlkcmF0ZShwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNSZWYocHJvcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3AudmFsdWUgPSBpbml0aWFsU3RhdGVba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByb2JhYmx5IGEgcmVhY3RpdmUgb2JqZWN0LCBsZXRzIHJlY3Vyc2l2ZWx5IGFzc2lnblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogcHJvcCBpcyB1bmtub3duXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXJnZVJlYWN0aXZlT2JqZWN0cyhwcm9wLCBpbml0aWFsU3RhdGVba2V5XSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gdHJhbnNmZXIgdGhlIHJlZiB0byB0aGUgcGluaWEgc3RhdGUgdG8ga2VlcCBldmVyeXRoaW5nIGluIHN5bmNcbiAgICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgICAgICAgICBpZiAoaXNWdWUyKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldChwaW5pYS5zdGF0ZS52YWx1ZVskaWRdLCBrZXksIHByb3ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGluaWEuc3RhdGUudmFsdWVbJGlkXVtrZXldID0gcHJvcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgIF9obXJQYXlsb2FkLnN0YXRlLnB1c2goa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGFjdGlvblxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBwcm9wID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjb25zdCBhY3Rpb25WYWx1ZSA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBob3QgPyBwcm9wIDogYWN0aW9uKHByb3AsIGtleSk7XG4gICAgICAgICAgICAvLyB0aGlzIGEgaG90IG1vZHVsZSByZXBsYWNlbWVudCBzdG9yZSBiZWNhdXNlIHRoZSBob3RVcGRhdGUgbWV0aG9kIG5lZWRzXG4gICAgICAgICAgICAvLyB0byBkbyBpdCB3aXRoIHRoZSByaWdodCBjb250ZXh0XG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgICAgIGlmIChpc1Z1ZTIpIHtcbiAgICAgICAgICAgICAgICBzZXQoc2V0dXBTdG9yZSwga2V5LCBhY3Rpb25WYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICAgICAgc2V0dXBTdG9yZVtrZXldID0gYWN0aW9uVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgIF9obXJQYXlsb2FkLmFjdGlvbnNba2V5XSA9IHByb3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBsaXN0IGFjdGlvbnMgc28gdGhleSBjYW4gYmUgdXNlZCBpbiBwbHVnaW5zXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICBvcHRpb25zRm9yUGx1Z2luLmFjdGlvbnNba2V5XSA9IHByb3A7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAvLyBhZGQgZ2V0dGVycyBmb3IgZGV2dG9vbHNcbiAgICAgICAgICAgIGlmIChpc0NvbXB1dGVkKHByb3ApKSB7XG4gICAgICAgICAgICAgICAgX2htclBheWxvYWQuZ2V0dGVyc1trZXldID0gaXNPcHRpb25zU3RvcmVcbiAgICAgICAgICAgICAgICAgICAgPyAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmdldHRlcnNba2V5XVxuICAgICAgICAgICAgICAgICAgICA6IHByb3A7XG4gICAgICAgICAgICAgICAgaWYgKElTX0NMSUVOVCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBnZXR0ZXJzID0gc2V0dXBTdG9yZS5fZ2V0dGVycyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogc2FtZVxuICAgICAgICAgICAgICAgICAgICAgICAgKHNldHVwU3RvcmUuX2dldHRlcnMgPSBtYXJrUmF3KFtdKSk7XG4gICAgICAgICAgICAgICAgICAgIGdldHRlcnMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBhZGQgdGhlIHN0YXRlLCBnZXR0ZXJzLCBhbmQgYWN0aW9uIHByb3BlcnRpZXNcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoaXNWdWUyKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHNldHVwU3RvcmUpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgc2V0KHN0b3JlLCBrZXksIHNldHVwU3RvcmVba2V5XSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXNzaWduKHN0b3JlLCBzZXR1cFN0b3JlKTtcbiAgICAgICAgLy8gYWxsb3dzIHJldHJpZXZpbmcgcmVhY3RpdmUgb2JqZWN0cyB3aXRoIGBzdG9yZVRvUmVmcygpYC4gTXVzdCBiZSBjYWxsZWQgYWZ0ZXIgYXNzaWduaW5nIHRvIHRoZSByZWFjdGl2ZSBvYmplY3QuXG4gICAgICAgIC8vIE1ha2UgYHN0b3JlVG9SZWZzKClgIHdvcmsgd2l0aCBgcmVhY3RpdmUoKWAgIzc5OVxuICAgICAgICBhc3NpZ24odG9SYXcoc3RvcmUpLCBzZXR1cFN0b3JlKTtcbiAgICB9XG4gICAgLy8gdXNlIHRoaXMgaW5zdGVhZCBvZiBhIGNvbXB1dGVkIHdpdGggc2V0dGVyIHRvIGJlIGFibGUgdG8gY3JlYXRlIGl0IGFueXdoZXJlXG4gICAgLy8gd2l0aG91dCBsaW5raW5nIHRoZSBjb21wdXRlZCBsaWZlc3BhbiB0byB3aGVyZXZlciB0aGUgc3RvcmUgaXMgZmlyc3RcbiAgICAvLyBjcmVhdGVkLlxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdG9yZSwgJyRzdGF0ZScsIHtcbiAgICAgICAgZ2V0OiAoKSA9PiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGhvdCA/IGhvdFN0YXRlLnZhbHVlIDogcGluaWEuc3RhdGUudmFsdWVbJGlkXSksXG4gICAgICAgIHNldDogKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaG90KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjYW5ub3Qgc2V0IGhvdFN0YXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkcGF0Y2goKCRzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IEZJWE1FOiBzaG91bGRuJ3QgZXJyb3I/XG4gICAgICAgICAgICAgICAgYXNzaWduKCRzdGF0ZSwgc3RhdGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgLy8gYWRkIHRoZSBob3RVcGRhdGUgYmVmb3JlIHBsdWdpbnMgdG8gYWxsb3cgdGhlbSB0byBvdmVycmlkZSBpdFxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICBzdG9yZS5faG90VXBkYXRlID0gbWFya1JhdygobmV3U3RvcmUpID0+IHtcbiAgICAgICAgICAgIHN0b3JlLl9ob3RVcGRhdGluZyA9IHRydWU7XG4gICAgICAgICAgICBuZXdTdG9yZS5faG1yUGF5bG9hZC5zdGF0ZS5mb3JFYWNoKChzdGF0ZUtleSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZUtleSBpbiBzdG9yZS4kc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3U3RhdGVUYXJnZXQgPSBuZXdTdG9yZS4kc3RhdGVbc3RhdGVLZXldO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvbGRTdGF0ZVNvdXJjZSA9IHN0b3JlLiRzdGF0ZVtzdGF0ZUtleV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbmV3U3RhdGVUYXJnZXQgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1BsYWluT2JqZWN0KG5ld1N0YXRlVGFyZ2V0KSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgaXNQbGFpbk9iamVjdChvbGRTdGF0ZVNvdXJjZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGNoT2JqZWN0KG5ld1N0YXRlVGFyZ2V0LCBvbGRTdGF0ZVNvdXJjZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmFuc2ZlciB0aGUgcmVmXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdTdG9yZS4kc3RhdGVbc3RhdGVLZXldID0gb2xkU3RhdGVTb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gcGF0Y2ggZGlyZWN0IGFjY2VzcyBwcm9wZXJ0aWVzIHRvIGFsbG93IHN0b3JlLnN0YXRlUHJvcGVydHkgdG8gd29yayBhc1xuICAgICAgICAgICAgICAgIC8vIHN0b3JlLiRzdGF0ZS5zdGF0ZVByb3BlcnR5XG4gICAgICAgICAgICAgICAgc2V0KHN0b3JlLCBzdGF0ZUtleSwgdG9SZWYobmV3U3RvcmUuJHN0YXRlLCBzdGF0ZUtleSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyByZW1vdmUgZGVsZXRlZCBzdGF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhzdG9yZS4kc3RhdGUpLmZvckVhY2goKHN0YXRlS2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEoc3RhdGVLZXkgaW4gbmV3U3RvcmUuJHN0YXRlKSkge1xuICAgICAgICAgICAgICAgICAgICBkZWwoc3RvcmUsIHN0YXRlS2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGF2b2lkIGRldnRvb2xzIGxvZ2dpbmcgdGhpcyBhcyBhIG11dGF0aW9uXG4gICAgICAgICAgICBpc0xpc3RlbmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgaXNTeW5jTGlzdGVuaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdID0gdG9SZWYobmV3U3RvcmUuX2htclBheWxvYWQsICdob3RTdGF0ZScpO1xuICAgICAgICAgICAgaXNTeW5jTGlzdGVuaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIG5leHRUaWNrKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgaXNMaXN0ZW5pbmcgPSB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFjdGlvbk5hbWUgaW4gbmV3U3RvcmUuX2htclBheWxvYWQuYWN0aW9ucykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGlvbkZuID0gbmV3U3RvcmVbYWN0aW9uTmFtZV07XG4gICAgICAgICAgICAgICAgc2V0KHN0b3JlLCBhY3Rpb25OYW1lLCBhY3Rpb24oYWN0aW9uRm4sIGFjdGlvbk5hbWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRPRE86IGRvZXMgdGhpcyB3b3JrIGluIGJvdGggc2V0dXAgYW5kIG9wdGlvbiBzdG9yZT9cbiAgICAgICAgICAgIGZvciAoY29uc3QgZ2V0dGVyTmFtZSBpbiBuZXdTdG9yZS5faG1yUGF5bG9hZC5nZXR0ZXJzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ2V0dGVyID0gbmV3U3RvcmUuX2htclBheWxvYWQuZ2V0dGVyc1tnZXR0ZXJOYW1lXTtcbiAgICAgICAgICAgICAgICBjb25zdCBnZXR0ZXJWYWx1ZSA9IGlzT3B0aW9uc1N0b3JlXG4gICAgICAgICAgICAgICAgICAgID8gLy8gc3BlY2lhbCBoYW5kbGluZyBvZiBvcHRpb25zIGFwaVxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZVBpbmlhKHBpbmlhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0dGVyLmNhbGwoc3RvcmUsIHN0b3JlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIDogZ2V0dGVyO1xuICAgICAgICAgICAgICAgIHNldChzdG9yZSwgZ2V0dGVyTmFtZSwgZ2V0dGVyVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmVtb3ZlIGRlbGV0ZWQgZ2V0dGVyc1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoc3RvcmUuX2htclBheWxvYWQuZ2V0dGVycykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG5ld1N0b3JlLl9obXJQYXlsb2FkLmdldHRlcnMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbChzdG9yZSwga2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBvbGQgYWN0aW9uc1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoc3RvcmUuX2htclBheWxvYWQuYWN0aW9ucykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG5ld1N0b3JlLl9obXJQYXlsb2FkLmFjdGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbChzdG9yZSwga2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgdmFsdWVzIHVzZWQgaW4gZGV2dG9vbHMgYW5kIHRvIGFsbG93IGRlbGV0aW5nIG5ldyBwcm9wZXJ0aWVzIGxhdGVyIG9uXG4gICAgICAgICAgICBzdG9yZS5faG1yUGF5bG9hZCA9IG5ld1N0b3JlLl9obXJQYXlsb2FkO1xuICAgICAgICAgICAgc3RvcmUuX2dldHRlcnMgPSBuZXdTdG9yZS5fZ2V0dGVycztcbiAgICAgICAgICAgIHN0b3JlLl9ob3RVcGRhdGluZyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCgoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8ICh0eXBlb2YgX19WVUVfUFJPRF9ERVZUT09MU19fICE9PSAndW5kZWZpbmVkJyAmJiBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pKSAmJiAhKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpKSAmJiBJU19DTElFTlQpIHtcbiAgICAgICAgY29uc3Qgbm9uRW51bWVyYWJsZSA9IHtcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgLy8gYXZvaWQgd2FybmluZyBvbiBkZXZ0b29scyB0cnlpbmcgdG8gZGlzcGxheSB0aGlzIHByb3BlcnR5XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICAgICAgWydfcCcsICdfaG1yUGF5bG9hZCcsICdfZ2V0dGVycycsICdfY3VzdG9tUHJvcGVydGllcyddLmZvckVhY2goKHApID0+IHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdG9yZSwgcCwgYXNzaWduKHsgdmFsdWU6IHN0b3JlW3BdIH0sIG5vbkVudW1lcmFibGUpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChpc1Z1ZTIpIHtcbiAgICAgICAgLy8gbWFyayB0aGUgc3RvcmUgYXMgcmVhZHkgYmVmb3JlIHBsdWdpbnNcbiAgICAgICAgc3RvcmUuX3IgPSB0cnVlO1xuICAgIH1cbiAgICAvLyBhcHBseSBhbGwgcGx1Z2luc1xuICAgIHBpbmlhLl9wLmZvckVhY2goKGV4dGVuZGVyKSA9PiB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgICAgIGlmICgoKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCAodHlwZW9mIF9fVlVFX1BST0RfREVWVE9PTFNfXyAhPT0gJ3VuZGVmaW5lZCcgJiYgX19WVUVfUFJPRF9ERVZUT09MU19fKSkgJiYgIShwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSkgJiYgSVNfQ0xJRU5UKSB7XG4gICAgICAgICAgICBjb25zdCBleHRlbnNpb25zID0gc2NvcGUucnVuKCgpID0+IGV4dGVuZGVyKHtcbiAgICAgICAgICAgICAgICBzdG9yZTogc3RvcmUsXG4gICAgICAgICAgICAgICAgYXBwOiBwaW5pYS5fYSxcbiAgICAgICAgICAgICAgICBwaW5pYSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zRm9yUGx1Z2luLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoZXh0ZW5zaW9ucyB8fCB7fSkuZm9yRWFjaCgoa2V5KSA9PiBzdG9yZS5fY3VzdG9tUHJvcGVydGllcy5hZGQoa2V5KSk7XG4gICAgICAgICAgICBhc3NpZ24oc3RvcmUsIGV4dGVuc2lvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXNzaWduKHN0b3JlLCBzY29wZS5ydW4oKCkgPT4gZXh0ZW5kZXIoe1xuICAgICAgICAgICAgICAgIHN0b3JlOiBzdG9yZSxcbiAgICAgICAgICAgICAgICBhcHA6IHBpbmlhLl9hLFxuICAgICAgICAgICAgICAgIHBpbmlhLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNGb3JQbHVnaW4sXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICBzdG9yZS4kc3RhdGUgJiZcbiAgICAgICAgdHlwZW9mIHN0b3JlLiRzdGF0ZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgdHlwZW9mIHN0b3JlLiRzdGF0ZS5jb25zdHJ1Y3RvciA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAhc3RvcmUuJHN0YXRlLmNvbnN0cnVjdG9yLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ1tuYXRpdmUgY29kZV0nKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYFvwn42NXTogVGhlIFwic3RhdGVcIiBtdXN0IGJlIGEgcGxhaW4gb2JqZWN0LiBJdCBjYW5ub3QgYmVcXG5gICtcbiAgICAgICAgICAgIGBcXHRzdGF0ZTogKCkgPT4gbmV3IE15Q2xhc3MoKVxcbmAgK1xuICAgICAgICAgICAgYEZvdW5kIGluIHN0b3JlIFwiJHtzdG9yZS4kaWR9XCIuYCk7XG4gICAgfVxuICAgIC8vIG9ubHkgYXBwbHkgaHlkcmF0ZSB0byBvcHRpb24gc3RvcmVzIHdpdGggYW4gaW5pdGlhbCBzdGF0ZSBpbiBwaW5pYVxuICAgIGlmIChpbml0aWFsU3RhdGUgJiZcbiAgICAgICAgaXNPcHRpb25zU3RvcmUgJiZcbiAgICAgICAgb3B0aW9ucy5oeWRyYXRlKSB7XG4gICAgICAgIG9wdGlvbnMuaHlkcmF0ZShzdG9yZS4kc3RhdGUsIGluaXRpYWxTdGF0ZSk7XG4gICAgfVxuICAgIGlzTGlzdGVuaW5nID0gdHJ1ZTtcbiAgICBpc1N5bmNMaXN0ZW5pbmcgPSB0cnVlO1xuICAgIHJldHVybiBzdG9yZTtcbn1cbi8vIGFsbG93cyB1bnVzZWQgc3RvcmVzIHRvIGJlIHRyZWUgc2hha2VuXG4vKiEgI19fTk9fU0lERV9FRkZFQ1RTX18gKi9cbmZ1bmN0aW9uIGRlZmluZVN0b3JlKFxuLy8gVE9ETzogYWRkIHByb3BlciB0eXBlcyBmcm9tIGFib3ZlXG5pZE9yT3B0aW9ucywgc2V0dXAsIHNldHVwT3B0aW9ucykge1xuICAgIGxldCBpZDtcbiAgICBsZXQgb3B0aW9ucztcbiAgICBjb25zdCBpc1NldHVwU3RvcmUgPSB0eXBlb2Ygc2V0dXAgPT09ICdmdW5jdGlvbic7XG4gICAgaWYgKHR5cGVvZiBpZE9yT3B0aW9ucyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWQgPSBpZE9yT3B0aW9ucztcbiAgICAgICAgLy8gdGhlIG9wdGlvbiBzdG9yZSBzZXR1cCB3aWxsIGNvbnRhaW4gdGhlIGFjdHVhbCBvcHRpb25zIGluIHRoaXMgY2FzZVxuICAgICAgICBvcHRpb25zID0gaXNTZXR1cFN0b3JlID8gc2V0dXBPcHRpb25zIDogc2V0dXA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBvcHRpb25zID0gaWRPck9wdGlvbnM7XG4gICAgICAgIGlkID0gaWRPck9wdGlvbnMuaWQ7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgdHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBb8J+NjV06IFwiZGVmaW5lU3RvcmUoKVwiIG11c3QgYmUgcGFzc2VkIGEgc3RvcmUgaWQgYXMgaXRzIGZpcnN0IGFyZ3VtZW50LmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVzZVN0b3JlKHBpbmlhLCBob3QpIHtcbiAgICAgICAgY29uc3QgaGFzQ29udGV4dCA9IGhhc0luamVjdGlvbkNvbnRleHQoKTtcbiAgICAgICAgcGluaWEgPVxuICAgICAgICAgICAgLy8gaW4gdGVzdCBtb2RlLCBpZ25vcmUgdGhlIGFyZ3VtZW50IHByb3ZpZGVkIGFzIHdlIGNhbiBhbHdheXMgcmV0cmlldmUgYVxuICAgICAgICAgICAgLy8gcGluaWEgaW5zdGFuY2Ugd2l0aCBnZXRBY3RpdmVQaW5pYSgpXG4gICAgICAgICAgICAoKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpICYmIGFjdGl2ZVBpbmlhICYmIGFjdGl2ZVBpbmlhLl90ZXN0aW5nID8gbnVsbCA6IHBpbmlhKSB8fFxuICAgICAgICAgICAgICAgIChoYXNDb250ZXh0ID8gaW5qZWN0KHBpbmlhU3ltYm9sLCBudWxsKSA6IG51bGwpO1xuICAgICAgICBpZiAocGluaWEpXG4gICAgICAgICAgICBzZXRBY3RpdmVQaW5pYShwaW5pYSk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWFjdGl2ZVBpbmlhKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFvwn42NXTogXCJnZXRBY3RpdmVQaW5pYSgpXCIgd2FzIGNhbGxlZCBidXQgdGhlcmUgd2FzIG5vIGFjdGl2ZSBQaW5pYS4gQXJlIHlvdSB0cnlpbmcgdG8gdXNlIGEgc3RvcmUgYmVmb3JlIGNhbGxpbmcgXCJhcHAudXNlKHBpbmlhKVwiP1xcbmAgK1xuICAgICAgICAgICAgICAgIGBTZWUgaHR0cHM6Ly9waW5pYS52dWVqcy5vcmcvY29yZS1jb25jZXB0cy9vdXRzaWRlLWNvbXBvbmVudC11c2FnZS5odG1sIGZvciBoZWxwLlxcbmAgK1xuICAgICAgICAgICAgICAgIGBUaGlzIHdpbGwgZmFpbCBpbiBwcm9kdWN0aW9uLmApO1xuICAgICAgICB9XG4gICAgICAgIHBpbmlhID0gYWN0aXZlUGluaWE7XG4gICAgICAgIGlmICghcGluaWEuX3MuaGFzKGlkKSkge1xuICAgICAgICAgICAgLy8gY3JlYXRpbmcgdGhlIHN0b3JlIHJlZ2lzdGVycyBpdCBpbiBgcGluaWEuX3NgXG4gICAgICAgICAgICBpZiAoaXNTZXR1cFN0b3JlKSB7XG4gICAgICAgICAgICAgICAgY3JlYXRlU2V0dXBTdG9yZShpZCwgc2V0dXAsIG9wdGlvbnMsIHBpbmlhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNyZWF0ZU9wdGlvbnNTdG9yZShpZCwgb3B0aW9ucywgcGluaWEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBub3QgdGhlIHJpZ2h0IGluZmVycmVkIHR5cGVcbiAgICAgICAgICAgICAgICB1c2VTdG9yZS5fcGluaWEgPSBwaW5pYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdG9yZSA9IHBpbmlhLl9zLmdldChpZCk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaG90KSB7XG4gICAgICAgICAgICBjb25zdCBob3RJZCA9ICdfX2hvdDonICsgaWQ7XG4gICAgICAgICAgICBjb25zdCBuZXdTdG9yZSA9IGlzU2V0dXBTdG9yZVxuICAgICAgICAgICAgICAgID8gY3JlYXRlU2V0dXBTdG9yZShob3RJZCwgc2V0dXAsIG9wdGlvbnMsIHBpbmlhLCB0cnVlKVxuICAgICAgICAgICAgICAgIDogY3JlYXRlT3B0aW9uc1N0b3JlKGhvdElkLCBhc3NpZ24oe30sIG9wdGlvbnMpLCBwaW5pYSwgdHJ1ZSk7XG4gICAgICAgICAgICBob3QuX2hvdFVwZGF0ZShuZXdTdG9yZSk7XG4gICAgICAgICAgICAvLyBjbGVhbnVwIHRoZSBzdGF0ZSBwcm9wZXJ0aWVzIGFuZCB0aGUgc3RvcmUgZnJvbSB0aGUgY2FjaGVcbiAgICAgICAgICAgIGRlbGV0ZSBwaW5pYS5zdGF0ZS52YWx1ZVtob3RJZF07XG4gICAgICAgICAgICBwaW5pYS5fcy5kZWxldGUoaG90SWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgSVNfQ0xJRU5UKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICAgICAgICAgIC8vIHNhdmUgc3RvcmVzIGluIGluc3RhbmNlcyB0byBhY2Nlc3MgdGhlbSBkZXZ0b29sc1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRJbnN0YW5jZSAmJlxuICAgICAgICAgICAgICAgIGN1cnJlbnRJbnN0YW5jZS5wcm94eSAmJlxuICAgICAgICAgICAgICAgIC8vIGF2b2lkIGFkZGluZyBzdG9yZXMgdGhhdCBhcmUganVzdCBidWlsdCBmb3IgaG90IG1vZHVsZSByZXBsYWNlbWVudFxuICAgICAgICAgICAgICAgICFob3QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2bSA9IGN1cnJlbnRJbnN0YW5jZS5wcm94eTtcbiAgICAgICAgICAgICAgICBjb25zdCBjYWNoZSA9ICdfcFN0b3JlcycgaW4gdm0gPyB2bS5fcFN0b3JlcyA6ICh2bS5fcFN0b3JlcyA9IHt9KTtcbiAgICAgICAgICAgICAgICBjYWNoZVtpZF0gPSBzdG9yZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBTdG9yZUdlbmVyaWMgY2Fubm90IGJlIGNhc3RlZCB0b3dhcmRzIFN0b3JlXG4gICAgICAgIHJldHVybiBzdG9yZTtcbiAgICB9XG4gICAgdXNlU3RvcmUuJGlkID0gaWQ7XG4gICAgcmV0dXJuIHVzZVN0b3JlO1xufVxuXG5sZXQgbWFwU3RvcmVTdWZmaXggPSAnU3RvcmUnO1xuLyoqXG4gKiBDaGFuZ2VzIHRoZSBzdWZmaXggYWRkZWQgYnkgYG1hcFN0b3JlcygpYC4gQ2FuIGJlIHNldCB0byBhbiBlbXB0eSBzdHJpbmcuXG4gKiBEZWZhdWx0cyB0byBgXCJTdG9yZVwiYC4gTWFrZSBzdXJlIHRvIGV4dGVuZCB0aGUgTWFwU3RvcmVzQ3VzdG9taXphdGlvblxuICogaW50ZXJmYWNlIGlmIHlvdSBhcmUgdXNpbmcgVHlwZVNjcmlwdC5cbiAqXG4gKiBAcGFyYW0gc3VmZml4IC0gbmV3IHN1ZmZpeFxuICovXG5mdW5jdGlvbiBzZXRNYXBTdG9yZVN1ZmZpeChzdWZmaXggLy8gY291bGQgYmUgJ1N0b3JlJyBidXQgdGhhdCB3b3VsZCBiZSBhbm5veWluZyBmb3IgSlNcbikge1xuICAgIG1hcFN0b3JlU3VmZml4ID0gc3VmZml4O1xufVxuLyoqXG4gKiBBbGxvd3MgdXNpbmcgc3RvcmVzIHdpdGhvdXQgdGhlIGNvbXBvc2l0aW9uIEFQSSAoYHNldHVwKClgKSBieSBnZW5lcmF0aW5nIGFuXG4gKiBvYmplY3QgdG8gYmUgc3ByZWFkIGluIHRoZSBgY29tcHV0ZWRgIGZpZWxkIG9mIGEgY29tcG9uZW50LiBJdCBhY2NlcHRzIGEgbGlzdFxuICogb2Ygc3RvcmUgZGVmaW5pdGlvbnMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGpzXG4gKiBleHBvcnQgZGVmYXVsdCB7XG4gKiAgIGNvbXB1dGVkOiB7XG4gKiAgICAgLy8gb3RoZXIgY29tcHV0ZWQgcHJvcGVydGllc1xuICogICAgIC4uLm1hcFN0b3Jlcyh1c2VVc2VyU3RvcmUsIHVzZUNhcnRTdG9yZSlcbiAqICAgfSxcbiAqXG4gKiAgIGNyZWF0ZWQoKSB7XG4gKiAgICAgdGhpcy51c2VyU3RvcmUgLy8gc3RvcmUgd2l0aCBpZCBcInVzZXJcIlxuICogICAgIHRoaXMuY2FydFN0b3JlIC8vIHN0b3JlIHdpdGggaWQgXCJjYXJ0XCJcbiAqICAgfVxuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIHN0b3JlcyAtIGxpc3Qgb2Ygc3RvcmVzIHRvIG1hcCB0byBhbiBvYmplY3RcbiAqL1xuZnVuY3Rpb24gbWFwU3RvcmVzKC4uLnN0b3Jlcykge1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgQXJyYXkuaXNBcnJheShzdG9yZXNbMF0pKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgW/CfjY1dOiBEaXJlY3RseSBwYXNzIGFsbCBzdG9yZXMgdG8gXCJtYXBTdG9yZXMoKVwiIHdpdGhvdXQgcHV0dGluZyB0aGVtIGluIGFuIGFycmF5OlxcbmAgK1xuICAgICAgICAgICAgYFJlcGxhY2VcXG5gICtcbiAgICAgICAgICAgIGBcXHRtYXBTdG9yZXMoW3VzZUF1dGhTdG9yZSwgdXNlQ2FydFN0b3JlXSlcXG5gICtcbiAgICAgICAgICAgIGB3aXRoXFxuYCArXG4gICAgICAgICAgICBgXFx0bWFwU3RvcmVzKHVzZUF1dGhTdG9yZSwgdXNlQ2FydFN0b3JlKVxcbmAgK1xuICAgICAgICAgICAgYFRoaXMgd2lsbCBmYWlsIGluIHByb2R1Y3Rpb24gaWYgbm90IGZpeGVkLmApO1xuICAgICAgICBzdG9yZXMgPSBzdG9yZXNbMF07XG4gICAgfVxuICAgIHJldHVybiBzdG9yZXMucmVkdWNlKChyZWR1Y2VkLCB1c2VTdG9yZSkgPT4ge1xuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiAkaWQgaXMgYWRkZWQgYnkgZGVmaW5lU3RvcmVcbiAgICAgICAgcmVkdWNlZFt1c2VTdG9yZS4kaWQgKyBtYXBTdG9yZVN1ZmZpeF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdXNlU3RvcmUodGhpcy4kcGluaWEpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gcmVkdWNlZDtcbiAgICB9LCB7fSk7XG59XG4vKipcbiAqIEFsbG93cyB1c2luZyBzdGF0ZSBhbmQgZ2V0dGVycyBmcm9tIG9uZSBzdG9yZSB3aXRob3V0IHVzaW5nIHRoZSBjb21wb3NpdGlvblxuICogQVBJIChgc2V0dXAoKWApIGJ5IGdlbmVyYXRpbmcgYW4gb2JqZWN0IHRvIGJlIHNwcmVhZCBpbiB0aGUgYGNvbXB1dGVkYCBmaWVsZFxuICogb2YgYSBjb21wb25lbnQuXG4gKlxuICogQHBhcmFtIHVzZVN0b3JlIC0gc3RvcmUgdG8gbWFwIGZyb21cbiAqIEBwYXJhbSBrZXlzT3JNYXBwZXIgLSBhcnJheSBvciBvYmplY3RcbiAqL1xuZnVuY3Rpb24gbWFwU3RhdGUodXNlU3RvcmUsIGtleXNPck1hcHBlcikge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGtleXNPck1hcHBlcilcbiAgICAgICAgPyBrZXlzT3JNYXBwZXIucmVkdWNlKChyZWR1Y2VkLCBrZXkpID0+IHtcbiAgICAgICAgICAgIHJlZHVjZWRba2V5XSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBGSVhNRTogc2hvdWxkIHdvcms/XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZVN0b3JlKHRoaXMuJHBpbmlhKVtrZXldO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiByZWR1Y2VkO1xuICAgICAgICB9LCB7fSlcbiAgICAgICAgOiBPYmplY3Qua2V5cyhrZXlzT3JNYXBwZXIpLnJlZHVjZSgocmVkdWNlZCwga2V5KSA9PiB7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICByZWR1Y2VkW2tleV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcmUgPSB1c2VTdG9yZSh0aGlzLiRwaW5pYSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcmVLZXkgPSBrZXlzT3JNYXBwZXJba2V5XTtcbiAgICAgICAgICAgICAgICAvLyBmb3Igc29tZSByZWFzb24gVFMgaXMgdW5hYmxlIHRvIGluZmVyIHRoZSB0eXBlIG9mIHN0b3JlS2V5IHRvIGJlIGFcbiAgICAgICAgICAgICAgICAvLyBmdW5jdGlvblxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2Ygc3RvcmVLZXkgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICAgICAgPyBzdG9yZUtleS5jYWxsKHRoaXMsIHN0b3JlKVxuICAgICAgICAgICAgICAgICAgICA6IC8vIEB0cy1leHBlY3QtZXJyb3I6IEZJWE1FOiBzaG91bGQgd29yaz9cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlW3N0b3JlS2V5XTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gcmVkdWNlZDtcbiAgICAgICAgfSwge30pO1xufVxuLyoqXG4gKiBBbGlhcyBmb3IgYG1hcFN0YXRlKClgLiBZb3Ugc2hvdWxkIHVzZSBgbWFwU3RhdGUoKWAgaW5zdGVhZC5cbiAqIEBkZXByZWNhdGVkIHVzZSBgbWFwU3RhdGUoKWAgaW5zdGVhZC5cbiAqL1xuY29uc3QgbWFwR2V0dGVycyA9IG1hcFN0YXRlO1xuLyoqXG4gKiBBbGxvd3MgZGlyZWN0bHkgdXNpbmcgYWN0aW9ucyBmcm9tIHlvdXIgc3RvcmUgd2l0aG91dCB1c2luZyB0aGUgY29tcG9zaXRpb25cbiAqIEFQSSAoYHNldHVwKClgKSBieSBnZW5lcmF0aW5nIGFuIG9iamVjdCB0byBiZSBzcHJlYWQgaW4gdGhlIGBtZXRob2RzYCBmaWVsZFxuICogb2YgYSBjb21wb25lbnQuXG4gKlxuICogQHBhcmFtIHVzZVN0b3JlIC0gc3RvcmUgdG8gbWFwIGZyb21cbiAqIEBwYXJhbSBrZXlzT3JNYXBwZXIgLSBhcnJheSBvciBvYmplY3RcbiAqL1xuZnVuY3Rpb24gbWFwQWN0aW9ucyh1c2VTdG9yZSwga2V5c09yTWFwcGVyKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoa2V5c09yTWFwcGVyKVxuICAgICAgICA/IGtleXNPck1hcHBlci5yZWR1Y2UoKHJlZHVjZWQsIGtleSkgPT4ge1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgcmVkdWNlZFtrZXldID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBGSVhNRTogc2hvdWxkIHdvcms/XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZVN0b3JlKHRoaXMuJHBpbmlhKVtrZXldKC4uLmFyZ3MpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiByZWR1Y2VkO1xuICAgICAgICB9LCB7fSlcbiAgICAgICAgOiBPYmplY3Qua2V5cyhrZXlzT3JNYXBwZXIpLnJlZHVjZSgocmVkdWNlZCwga2V5KSA9PiB7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICByZWR1Y2VkW2tleV0gPSBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IEZJWE1FOiBzaG91bGQgd29yaz9cbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlU3RvcmUodGhpcy4kcGluaWEpW2tleXNPck1hcHBlcltrZXldXSguLi5hcmdzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gcmVkdWNlZDtcbiAgICAgICAgfSwge30pO1xufVxuLyoqXG4gKiBBbGxvd3MgdXNpbmcgc3RhdGUgYW5kIGdldHRlcnMgZnJvbSBvbmUgc3RvcmUgd2l0aG91dCB1c2luZyB0aGUgY29tcG9zaXRpb25cbiAqIEFQSSAoYHNldHVwKClgKSBieSBnZW5lcmF0aW5nIGFuIG9iamVjdCB0byBiZSBzcHJlYWQgaW4gdGhlIGBjb21wdXRlZGAgZmllbGRcbiAqIG9mIGEgY29tcG9uZW50LlxuICpcbiAqIEBwYXJhbSB1c2VTdG9yZSAtIHN0b3JlIHRvIG1hcCBmcm9tXG4gKiBAcGFyYW0ga2V5c09yTWFwcGVyIC0gYXJyYXkgb3Igb2JqZWN0XG4gKi9cbmZ1bmN0aW9uIG1hcFdyaXRhYmxlU3RhdGUodXNlU3RvcmUsIGtleXNPck1hcHBlcikge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGtleXNPck1hcHBlcilcbiAgICAgICAgPyBrZXlzT3JNYXBwZXIucmVkdWNlKChyZWR1Y2VkLCBrZXkpID0+IHtcbiAgICAgICAgICAgIHJlZHVjZWRba2V5XSA9IHtcbiAgICAgICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1c2VTdG9yZSh0aGlzLiRwaW5pYSlba2V5XTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNldCh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHVzZVN0b3JlKHRoaXMuJHBpbmlhKVtrZXldID0gdmFsdWUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHJlZHVjZWQ7XG4gICAgICAgIH0sIHt9KVxuICAgICAgICA6IE9iamVjdC5rZXlzKGtleXNPck1hcHBlcikucmVkdWNlKChyZWR1Y2VkLCBrZXkpID0+IHtcbiAgICAgICAgICAgIHJlZHVjZWRba2V5XSA9IHtcbiAgICAgICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1c2VTdG9yZSh0aGlzLiRwaW5pYSlba2V5c09yTWFwcGVyW2tleV1dO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAodXNlU3RvcmUodGhpcy4kcGluaWEpW2tleXNPck1hcHBlcltrZXldXSA9IHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiByZWR1Y2VkO1xuICAgICAgICB9LCB7fSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBvYmplY3Qgb2YgcmVmZXJlbmNlcyB3aXRoIGFsbCB0aGUgc3RhdGUsIGdldHRlcnMsIGFuZCBwbHVnaW4tYWRkZWRcbiAqIHN0YXRlIHByb3BlcnRpZXMgb2YgdGhlIHN0b3JlLiBTaW1pbGFyIHRvIGB0b1JlZnMoKWAgYnV0IHNwZWNpZmljYWxseVxuICogZGVzaWduZWQgZm9yIFBpbmlhIHN0b3JlcyBzbyBtZXRob2RzIGFuZCBub24gcmVhY3RpdmUgcHJvcGVydGllcyBhcmVcbiAqIGNvbXBsZXRlbHkgaWdub3JlZC5cbiAqXG4gKiBAcGFyYW0gc3RvcmUgLSBzdG9yZSB0byBleHRyYWN0IHRoZSByZWZzIGZyb21cbiAqL1xuZnVuY3Rpb24gc3RvcmVUb1JlZnMoc3RvcmUpIHtcbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3BpbmlhL2lzc3Vlcy84NTJcbiAgICAvLyBJdCdzIGVhc2llciB0byBqdXN0IHVzZSB0b1JlZnMoKSBldmVuIGlmIGl0IGluY2x1ZGVzIG1vcmUgc3R1ZmZcbiAgICBpZiAoaXNWdWUyKSB7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHRvUmVmcyBpbmNsdWRlIG1ldGhvZHMgYW5kIG90aGVyc1xuICAgICAgICByZXR1cm4gdG9SZWZzKHN0b3JlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHJhd1N0b3JlID0gdG9SYXcoc3RvcmUpO1xuICAgICAgICBjb25zdCByZWZzID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHJhd1N0b3JlKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHJhd1N0b3JlW2tleV07XG4gICAgICAgICAgICAvLyBUaGVyZSBpcyBubyBuYXRpdmUgbWV0aG9kIHRvIGNoZWNrIGZvciBhIGNvbXB1dGVkXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvY29yZS9wdWxsLzQxNjVcbiAgICAgICAgICAgIGlmICh2YWx1ZS5lZmZlY3QpIHtcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiB0b28gaGFyZCB0byB0eXBlIGNvcnJlY3RseVxuICAgICAgICAgICAgICAgIHJlZnNba2V5XSA9XG4gICAgICAgICAgICAgICAgICAgIC8vIC4uLlxuICAgICAgICAgICAgICAgICAgICBjb21wdXRlZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IHN0b3JlW2tleV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZVtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzUmVmKHZhbHVlKSB8fCBpc1JlYWN0aXZlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHRoZSBrZXkgaXMgc3RhdGUgb3IgZ2V0dGVyXG4gICAgICAgICAgICAgICAgcmVmc1trZXldID1cbiAgICAgICAgICAgICAgICAgICAgLy8gLS0tXG4gICAgICAgICAgICAgICAgICAgIHRvUmVmKHN0b3JlLCBrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWZzO1xuICAgIH1cbn1cblxuLyoqXG4gKiBWdWUgMiBQbHVnaW4gdGhhdCBtdXN0IGJlIGluc3RhbGxlZCBmb3IgcGluaWEgdG8gd29yay4gTm90ZSAqKnlvdSBkb24ndCBuZWVkXG4gKiB0aGlzIHBsdWdpbiBpZiB5b3UgYXJlIHVzaW5nIE51eHQuanMqKi4gVXNlIHRoZSBgYnVpbGRNb2R1bGVgIGluc3RlYWQ6XG4gKiBodHRwczovL3BpbmlhLnZ1ZWpzLm9yZy9zc3IvbnV4dC5odG1sLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBqc1xuICogaW1wb3J0IFZ1ZSBmcm9tICd2dWUnXG4gKiBpbXBvcnQgeyBQaW5pYVZ1ZVBsdWdpbiwgY3JlYXRlUGluaWEgfSBmcm9tICdwaW5pYSdcbiAqXG4gKiBWdWUudXNlKFBpbmlhVnVlUGx1Z2luKVxuICogY29uc3QgcGluaWEgPSBjcmVhdGVQaW5pYSgpXG4gKlxuICogbmV3IFZ1ZSh7XG4gKiAgIGVsOiAnI2FwcCcsXG4gKiAgIC8vIC4uLlxuICogICBwaW5pYSxcbiAqIH0pXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gX1Z1ZSAtIGBWdWVgIGltcG9ydGVkIGZyb20gJ3Z1ZScuXG4gKi9cbmNvbnN0IFBpbmlhVnVlUGx1Z2luID0gZnVuY3Rpb24gKF9WdWUpIHtcbiAgICAvLyBFcXVpdmFsZW50IG9mXG4gICAgLy8gYXBwLmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzLiRwaW5pYSA9IHBpbmlhXG4gICAgX1Z1ZS5taXhpbih7XG4gICAgICAgIGJlZm9yZUNyZWF0ZSgpIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMucGluaWEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwaW5pYSA9IG9wdGlvbnMucGluaWE7XG4gICAgICAgICAgICAgICAgLy8gSEFDSzogdGFrZW4gZnJvbSBwcm92aWRlKCk6IGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy9jb21wb3NpdGlvbi1hcGkvYmxvYi9tYWluL3NyYy9hcGlzL2luamVjdC50cyNMMzFcbiAgICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fcHJvdmlkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZUNhY2hlID0ge307XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnX3Byb3ZpZGVkJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiBwcm92aWRlQ2FjaGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQ6ICh2KSA9PiBPYmplY3QuYXNzaWduKHByb3ZpZGVDYWNoZSwgdiksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9wcm92aWRlZFtwaW5pYVN5bWJvbF0gPSBwaW5pYTtcbiAgICAgICAgICAgICAgICAvLyBwcm9wYWdhdGUgdGhlIHBpbmlhIGluc3RhbmNlIGluIGFuIFNTUiBmcmllbmRseSB3YXlcbiAgICAgICAgICAgICAgICAvLyBhdm9pZCBhZGRpbmcgaXQgdG8gbnV4dCB0d2ljZVxuICAgICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLiRwaW5pYSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRwaW5pYSA9IHBpbmlhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwaW5pYS5fYSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgaWYgKElTX0NMSUVOVCkge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGFsbG93cyBjYWxsaW5nIHVzZVN0b3JlKCkgb3V0c2lkZSBvZiBhIGNvbXBvbmVudCBzZXR1cCBhZnRlclxuICAgICAgICAgICAgICAgICAgICAvLyBpbnN0YWxsaW5nIHBpbmlhJ3MgcGx1Z2luXG4gICAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZVBpbmlhKHBpbmlhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCgoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8ICh0eXBlb2YgX19WVUVfUFJPRF9ERVZUT09MU19fICE9PSAndW5kZWZpbmVkJyAmJiBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pKSAmJiAhKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpKSAmJiBJU19DTElFTlQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJQaW5pYURldnRvb2xzKHBpbmlhLl9hLCBwaW5pYSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXRoaXMuJHBpbmlhICYmIG9wdGlvbnMucGFyZW50ICYmIG9wdGlvbnMucGFyZW50LiRwaW5pYSkge1xuICAgICAgICAgICAgICAgIHRoaXMuJHBpbmlhID0gb3B0aW9ucy5wYXJlbnQuJHBpbmlhO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZXN0cm95ZWQoKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fcFN0b3JlcztcbiAgICAgICAgfSxcbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IE11dGF0aW9uVHlwZSwgUGluaWFWdWVQbHVnaW4sIGFjY2VwdEhNUlVwZGF0ZSwgY3JlYXRlUGluaWEsIGRlZmluZVN0b3JlLCBkaXNwb3NlUGluaWEsIGdldEFjdGl2ZVBpbmlhLCBtYXBBY3Rpb25zLCBtYXBHZXR0ZXJzLCBtYXBTdGF0ZSwgbWFwU3RvcmVzLCBtYXBXcml0YWJsZVN0YXRlLCBzZXRBY3RpdmVQaW5pYSwgc2V0TWFwU3RvcmVTdWZmaXgsIHNob3VsZEh5ZHJhdGUsIHNraXBIeWRyYXRlLCBzdG9yZVRvUmVmcyB9O1xuIiwiLyoqXG4gKiBBIHJlZmVyZW5jZSB0byBnbG9iYWxUaGlzLCB3aXRoIHN1cHBvcnRcbiAqIGZvciBicm93c2VycyB0aGF0IGRvbid0IHlldCBzdXBwb3J0IHRoZSBzcGVjLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgJGdsb2JhbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIC8vIFdlJ3JlIHJ1bm5pbmcgaW4gYSBtb2Rlcm4gZW52aXJvbm1lbnQuXG4gICAgICAgIHJldHVybiBnbG9iYWxUaGlzO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAvLyBXZSdyZSBydW5uaW5nIGluIE5vZGVKU1xuICAgICAgICByZXR1cm4gZ2xvYmFsO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgLy8gV2UncmUgcnVubmluZyBpbiBhIHdvcmtlci5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIC8vIFdlJ3JlIHJ1bm5pbmcgaW4gdGhlIGJyb3dzZXIncyBtYWluIHRocmVhZC5cbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gSG9wZWZ1bGx5IHdlIG5ldmVyIGdldCBoZXJlLi4uXG4gICAgICAgIC8vIE5vdCBhbGwgZW52aXJvbm1lbnRzIGFsbG93IGV2YWwgYW5kIEZ1bmN0aW9uLiBVc2Ugb25seSBhcyBhIGxhc3QgcmVzb3J0OlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmNcbiAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG4gICAgfVxuICAgIGNhdGNoIChfYSkge1xuICAgICAgICAvLyBJZiBhbGwgZmFpbHMsIGdpdmUgdXAgYW5kIGNyZWF0ZSBhbiBvYmplY3QuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvY29uc2lzdGVudC10eXBlLWFzc2VydGlvbnNcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbn0pKCk7XG4vLyBBUEktb25seSBQb2x5ZmlsbCBmb3IgdHJ1c3RlZFR5cGVzXG5pZiAoJGdsb2JhbC50cnVzdGVkVHlwZXMgPT09IHZvaWQgMCkge1xuICAgICRnbG9iYWwudHJ1c3RlZFR5cGVzID0geyBjcmVhdGVQb2xpY3k6IChuLCByKSA9PiByIH07XG59XG5jb25zdCBwcm9wQ29uZmlnID0ge1xuICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgd3JpdGFibGU6IGZhbHNlLFxufTtcbmlmICgkZ2xvYmFsLkZBU1QgPT09IHZvaWQgMCkge1xuICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkoJGdsb2JhbCwgXCJGQVNUXCIsIE9iamVjdC5hc3NpZ24oeyB2YWx1ZTogT2JqZWN0LmNyZWF0ZShudWxsKSB9LCBwcm9wQ29uZmlnKSk7XG59XG4vKipcbiAqIFRoZSBGQVNUIGdsb2JhbC5cbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY29uc3QgRkFTVCA9ICRnbG9iYWwuRkFTVDtcbmlmIChGQVNULmdldEJ5SWQgPT09IHZvaWQgMCkge1xuICAgIGNvbnN0IHN0b3JhZ2UgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkoRkFTVCwgXCJnZXRCeUlkXCIsIE9iamVjdC5hc3NpZ24oeyB2YWx1ZShpZCwgaW5pdGlhbGl6ZSkge1xuICAgICAgICAgICAgbGV0IGZvdW5kID0gc3RvcmFnZVtpZF07XG4gICAgICAgICAgICBpZiAoZm91bmQgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIGZvdW5kID0gaW5pdGlhbGl6ZSA/IChzdG9yYWdlW2lkXSA9IGluaXRpYWxpemUoKSkgOiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgICAgICB9IH0sIHByb3BDb25maWcpKTtcbn1cbi8qKlxuICogQSByZWFkb25seSwgZW1wdHkgYXJyYXkuXG4gKiBAcmVtYXJrc1xuICogVHlwaWNhbGx5IHJldHVybmVkIGJ5IEFQSXMgdGhhdCByZXR1cm4gYXJyYXlzIHdoZW4gdGhlcmUgYXJlXG4gKiBubyBhY3R1YWwgaXRlbXMgdG8gcmV0dXJuLlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjb25zdCBlbXB0eUFycmF5ID0gT2JqZWN0LmZyZWV6ZShbXSk7XG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiBjYXBhYmxlIG9mIGxvY2F0aW5nIG1ldGFkYXRhIGFzc29jaWF0ZWQgd2l0aCBhIHR5cGUuXG4gKiBAcmV0dXJucyBBIG1ldGFkYXRhIGxvY2F0b3IgZnVuY3Rpb24uXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1ldGFkYXRhTG9jYXRvcigpIHtcbiAgICBjb25zdCBtZXRhZGF0YUxvb2t1cCA9IG5ldyBXZWFrTWFwKCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgbGV0IG1ldGFkYXRhID0gbWV0YWRhdGFMb29rdXAuZ2V0KHRhcmdldCk7XG4gICAgICAgIGlmIChtZXRhZGF0YSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBsZXQgY3VycmVudFRhcmdldCA9IFJlZmxlY3QuZ2V0UHJvdG90eXBlT2YodGFyZ2V0KTtcbiAgICAgICAgICAgIHdoaWxlIChtZXRhZGF0YSA9PT0gdm9pZCAwICYmIGN1cnJlbnRUYXJnZXQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBtZXRhZGF0YSA9IG1ldGFkYXRhTG9va3VwLmdldChjdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBjdXJyZW50VGFyZ2V0ID0gUmVmbGVjdC5nZXRQcm90b3R5cGVPZihjdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1ldGFkYXRhID0gbWV0YWRhdGEgPT09IHZvaWQgMCA/IFtdIDogbWV0YWRhdGEuc2xpY2UoMCk7XG4gICAgICAgICAgICBtZXRhZGF0YUxvb2t1cC5zZXQodGFyZ2V0LCBtZXRhZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1ldGFkYXRhO1xuICAgIH07XG59XG4iLCJpbXBvcnQgeyAkZ2xvYmFsIH0gZnJvbSBcIi4vcGxhdGZvcm0uanNcIjtcbmNvbnN0IHVwZGF0ZVF1ZXVlID0gJGdsb2JhbC5GQVNULmdldEJ5SWQoMSAvKiB1cGRhdGVRdWV1ZSAqLywgKCkgPT4ge1xuICAgIGNvbnN0IHRhc2tzID0gW107XG4gICAgY29uc3QgcGVuZGluZ0Vycm9ycyA9IFtdO1xuICAgIGZ1bmN0aW9uIHRocm93Rmlyc3RFcnJvcigpIHtcbiAgICAgICAgaWYgKHBlbmRpbmdFcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBwZW5kaW5nRXJyb3JzLnNoaWZ0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gdHJ5UnVuVGFzayh0YXNrKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0YXNrLmNhbGwoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHBlbmRpbmdFcnJvcnMucHVzaChlcnJvcik7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHRocm93Rmlyc3RFcnJvciwgMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gcHJvY2VzcygpIHtcbiAgICAgICAgY29uc3QgY2FwYWNpdHkgPSAxMDI0O1xuICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICB3aGlsZSAoaW5kZXggPCB0YXNrcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRyeVJ1blRhc2sodGFza3NbaW5kZXhdKTtcbiAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAvLyBQcmV2ZW50IGxlYWtpbmcgbWVtb3J5IGZvciBsb25nIGNoYWlucyBvZiByZWN1cnNpdmUgY2FsbHMgdG8gYERPTS5xdWV1ZVVwZGF0ZWAuXG4gICAgICAgICAgICAvLyBJZiB3ZSBjYWxsIGBET00ucXVldWVVcGRhdGVgIHdpdGhpbiBhIHRhc2sgc2NoZWR1bGVkIGJ5IGBET00ucXVldWVVcGRhdGVgLCB0aGUgcXVldWUgd2lsbFxuICAgICAgICAgICAgLy8gZ3JvdywgYnV0IHRvIGF2b2lkIGFuIE8obikgd2FsayBmb3IgZXZlcnkgdGFzayB3ZSBleGVjdXRlLCB3ZSBkb24ndFxuICAgICAgICAgICAgLy8gc2hpZnQgdGFza3Mgb2ZmIHRoZSBxdWV1ZSBhZnRlciB0aGV5IGhhdmUgYmVlbiBleGVjdXRlZC5cbiAgICAgICAgICAgIC8vIEluc3RlYWQsIHdlIHBlcmlvZGljYWxseSBzaGlmdCAxMDI0IHRhc2tzIG9mZiB0aGUgcXVldWUuXG4gICAgICAgICAgICBpZiAoaW5kZXggPiBjYXBhY2l0eSkge1xuICAgICAgICAgICAgICAgIC8vIE1hbnVhbGx5IHNoaWZ0IGFsbCB2YWx1ZXMgc3RhcnRpbmcgYXQgdGhlIGluZGV4IGJhY2sgdG8gdGhlXG4gICAgICAgICAgICAgICAgLy8gYmVnaW5uaW5nIG9mIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBzY2FuID0gMCwgbmV3TGVuZ3RoID0gdGFza3MubGVuZ3RoIC0gaW5kZXg7IHNjYW4gPCBuZXdMZW5ndGg7IHNjYW4rKykge1xuICAgICAgICAgICAgICAgICAgICB0YXNrc1tzY2FuXSA9IHRhc2tzW3NjYW4gKyBpbmRleF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRhc2tzLmxlbmd0aCAtPSBpbmRleDtcbiAgICAgICAgICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGFza3MubGVuZ3RoID0gMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gZW5xdWV1ZShjYWxsYWJsZSkge1xuICAgICAgICBpZiAodGFza3MubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgJGdsb2JhbC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUocHJvY2Vzcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGFza3MucHVzaChjYWxsYWJsZSk7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3QuZnJlZXplKHtcbiAgICAgICAgZW5xdWV1ZSxcbiAgICAgICAgcHJvY2VzcyxcbiAgICB9KTtcbn0pO1xuLyogZXNsaW50LWRpc2FibGUgKi9cbmNvbnN0IGZhc3RIVE1MUG9saWN5ID0gJGdsb2JhbC50cnVzdGVkVHlwZXMuY3JlYXRlUG9saWN5KFwiZmFzdC1odG1sXCIsIHtcbiAgICBjcmVhdGVIVE1MOiBodG1sID0+IGh0bWwsXG59KTtcbi8qIGVzbGludC1lbmFibGUgKi9cbmxldCBodG1sUG9saWN5ID0gZmFzdEhUTUxQb2xpY3k7XG5jb25zdCBtYXJrZXIgPSBgZmFzdC0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA4KX1gO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGNvbnN0IF9pbnRlcnBvbGF0aW9uU3RhcnQgPSBgJHttYXJrZXJ9e2A7XG4vKiogQGludGVybmFsICovXG5leHBvcnQgY29uc3QgX2ludGVycG9sYXRpb25FbmQgPSBgfSR7bWFya2VyfWA7XG4vKipcbiAqIENvbW1vbiBET00gQVBJcy5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IERPTSA9IE9iamVjdC5mcmVlemUoe1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBET00gc3VwcG9ydHMgdGhlIGFkb3B0ZWRTdHlsZVNoZWV0cyBmZWF0dXJlLlxuICAgICAqL1xuICAgIHN1cHBvcnRzQWRvcHRlZFN0eWxlU2hlZXRzOiBBcnJheS5pc0FycmF5KGRvY3VtZW50LmFkb3B0ZWRTdHlsZVNoZWV0cykgJiZcbiAgICAgICAgXCJyZXBsYWNlXCIgaW4gQ1NTU3R5bGVTaGVldC5wcm90b3R5cGUsXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgSFRNTCB0cnVzdGVkIHR5cGVzIHBvbGljeSB1c2VkIGJ5IHRoZSB0ZW1wbGF0aW5nIGVuZ2luZS5cbiAgICAgKiBAcGFyYW0gcG9saWN5IC0gVGhlIHBvbGljeSB0byBzZXQgZm9yIEhUTUwuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIEFQSSBjYW4gb25seSBiZSBjYWxsZWQgb25jZSwgZm9yIHNlY3VyaXR5IHJlYXNvbnMuIEl0IHNob3VsZCBiZVxuICAgICAqIGNhbGxlZCBieSB0aGUgYXBwbGljYXRpb24gZGV2ZWxvcGVyIGF0IHRoZSBzdGFydCBvZiB0aGVpciBwcm9ncmFtLlxuICAgICAqL1xuICAgIHNldEhUTUxQb2xpY3kocG9saWN5KSB7XG4gICAgICAgIGlmIChodG1sUG9saWN5ICE9PSBmYXN0SFRNTFBvbGljeSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIEhUTUwgcG9saWN5IGNhbiBvbmx5IGJlIHNldCBvbmNlLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBodG1sUG9saWN5ID0gcG9saWN5O1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogVHVybnMgYSBzdHJpbmcgaW50byB0cnVzdGVkIEhUTUwgdXNpbmcgdGhlIGNvbmZpZ3VyZWQgdHJ1c3RlZCB0eXBlcyBwb2xpY3kuXG4gICAgICogQHBhcmFtIGh0bWwgLSBUaGUgc3RyaW5nIHRvIHR1cm4gaW50byB0cnVzdGVkIEhUTUwuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBVc2VkIGludGVybmFsbHkgYnkgdGhlIHRlbXBsYXRlIGVuZ2luZSB3aGVuIGNyZWF0aW5nIHRlbXBsYXRlc1xuICAgICAqIGFuZCBzZXR0aW5nIGlubmVySFRNTC5cbiAgICAgKi9cbiAgICBjcmVhdGVIVE1MKGh0bWwpIHtcbiAgICAgICAgcmV0dXJuIGh0bWxQb2xpY3kuY3JlYXRlSFRNTChodG1sKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgdGhlIHByb3ZpZGVkIG5vZGUgaXMgYSB0ZW1wbGF0ZSBtYXJrZXIgdXNlZCBieSB0aGUgcnVudGltZS5cbiAgICAgKiBAcGFyYW0gbm9kZSAtIFRoZSBub2RlIHRvIHRlc3QuXG4gICAgICovXG4gICAgaXNNYXJrZXIobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZSAmJiBub2RlLm5vZGVUeXBlID09PSA4ICYmIG5vZGUuZGF0YS5zdGFydHNXaXRoKG1hcmtlcik7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIG1hcmtlciBub2RlLCBleHRyYWN0IHRoZSB7QGxpbmsgSFRNTERpcmVjdGl2ZX0gaW5kZXggZnJvbSB0aGUgcGxhY2Vob2xkZXIuXG4gICAgICogQHBhcmFtIG5vZGUgLSBUaGUgbWFya2VyIG5vZGUgdG8gZXh0cmFjdCB0aGUgaW5kZXggZnJvbS5cbiAgICAgKi9cbiAgICBleHRyYWN0RGlyZWN0aXZlSW5kZXhGcm9tTWFya2VyKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KG5vZGUuZGF0YS5yZXBsYWNlKGAke21hcmtlcn06YCwgXCJcIikpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHBsYWNlaG9sZGVyIHN0cmluZyBzdWl0YWJsZSBmb3IgbWFya2luZyBvdXQgYSBsb2NhdGlvbiAqd2l0aGluKlxuICAgICAqIGFuIGF0dHJpYnV0ZSB2YWx1ZSBvciBIVE1MIGNvbnRlbnQuXG4gICAgICogQHBhcmFtIGluZGV4IC0gVGhlIGRpcmVjdGl2ZSBpbmRleCB0byBjcmVhdGUgdGhlIHBsYWNlaG9sZGVyIGZvci5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFVzZWQgaW50ZXJuYWxseSBieSBiaW5kaW5nIGRpcmVjdGl2ZXMuXG4gICAgICovXG4gICAgY3JlYXRlSW50ZXJwb2xhdGlvblBsYWNlaG9sZGVyKGluZGV4KSB7XG4gICAgICAgIHJldHVybiBgJHtfaW50ZXJwb2xhdGlvblN0YXJ0fSR7aW5kZXh9JHtfaW50ZXJwb2xhdGlvbkVuZH1gO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHBsYWNlaG9sZGVyIHRoYXQgbWFuaWZlc3RzIGl0c2VsZiBhcyBhbiBhdHRyaWJ1dGUgb24gYW5cbiAgICAgKiBlbGVtZW50LlxuICAgICAqIEBwYXJhbSBhdHRyaWJ1dGVOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGN1c3RvbSBhdHRyaWJ1dGUuXG4gICAgICogQHBhcmFtIGluZGV4IC0gVGhlIGRpcmVjdGl2ZSBpbmRleCB0byBjcmVhdGUgdGhlIHBsYWNlaG9sZGVyIGZvci5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFVzZWQgaW50ZXJuYWxseSBieSBhdHRyaWJ1dGUgZGlyZWN0aXZlcyBzdWNoIGFzIGByZWZgLCBgc2xvdHRlZGAsIGFuZCBgY2hpbGRyZW5gLlxuICAgICAqL1xuICAgIGNyZWF0ZUN1c3RvbUF0dHJpYnV0ZVBsYWNlaG9sZGVyKGF0dHJpYnV0ZU5hbWUsIGluZGV4KSB7XG4gICAgICAgIHJldHVybiBgJHthdHRyaWJ1dGVOYW1lfT1cIiR7dGhpcy5jcmVhdGVJbnRlcnBvbGF0aW9uUGxhY2Vob2xkZXIoaW5kZXgpfVwiYDtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBwbGFjZWhvbGRlciB0aGF0IG1hbmlmZXN0cyBpdHNlbGYgYXMgYSBtYXJrZXIgd2l0aGluIHRoZSBET00gc3RydWN0dXJlLlxuICAgICAqIEBwYXJhbSBpbmRleCAtIFRoZSBkaXJlY3RpdmUgaW5kZXggdG8gY3JlYXRlIHRoZSBwbGFjZWhvbGRlciBmb3IuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBVc2VkIGludGVybmFsbHkgYnkgc3RydWN0dXJhbCBkaXJlY3RpdmVzIHN1Y2ggYXMgYHJlcGVhdGAuXG4gICAgICovXG4gICAgY3JlYXRlQmxvY2tQbGFjZWhvbGRlcihpbmRleCkge1xuICAgICAgICByZXR1cm4gYDwhLS0ke21hcmtlcn06JHtpbmRleH0tLT5gO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogU2NoZWR1bGVzIERPTSB1cGRhdGUgd29yayBpbiB0aGUgbmV4dCBhc3luYyBiYXRjaC5cbiAgICAgKiBAcGFyYW0gY2FsbGFibGUgLSBUaGUgY2FsbGFibGUgZnVuY3Rpb24gb3Igb2JqZWN0IHRvIHF1ZXVlLlxuICAgICAqL1xuICAgIHF1ZXVlVXBkYXRlOiB1cGRhdGVRdWV1ZS5lbnF1ZXVlLFxuICAgIC8qKlxuICAgICAqIEltbWVkaWF0ZWx5IHByb2Nlc3NlcyBhbGwgd29yayBwcmV2aW91c2x5IHNjaGVkdWxlZFxuICAgICAqIHRocm91Z2ggcXVldWVVcGRhdGUuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIGFsc28gZm9yY2VzIG5leHRVcGRhdGUgcHJvbWlzZXNcbiAgICAgKiB0byByZXNvbHZlLlxuICAgICAqL1xuICAgIHByb2Nlc3NVcGRhdGVzOiB1cGRhdGVRdWV1ZS5wcm9jZXNzLFxuICAgIC8qKlxuICAgICAqIFJlc29sdmVzIHdpdGggdGhlIG5leHQgRE9NIHVwZGF0ZS5cbiAgICAgKi9cbiAgICBuZXh0VXBkYXRlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UodXBkYXRlUXVldWUuZW5xdWV1ZSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBTZXRzIGFuIGF0dHJpYnV0ZSB2YWx1ZSBvbiBhbiBlbGVtZW50LlxuICAgICAqIEBwYXJhbSBlbGVtZW50IC0gVGhlIGVsZW1lbnQgdG8gc2V0IHRoZSBhdHRyaWJ1dGUgdmFsdWUgb24uXG4gICAgICogQHBhcmFtIGF0dHJpYnV0ZU5hbWUgLSBUaGUgYXR0cmlidXRlIG5hbWUgdG8gc2V0LlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlIHRvIHNldC5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIElmIHRoZSB2YWx1ZSBpcyBgbnVsbGAgb3IgYHVuZGVmaW5lZGAsIHRoZSBhdHRyaWJ1dGUgaXMgcmVtb3ZlZCwgb3RoZXJ3aXNlXG4gICAgICogaXQgaXMgc2V0IHRvIHRoZSBwcm92aWRlZCB2YWx1ZSB1c2luZyB0aGUgc3RhbmRhcmQgYHNldEF0dHJpYnV0ZWAgQVBJLlxuICAgICAqL1xuICAgIHNldEF0dHJpYnV0ZShlbGVtZW50LCBhdHRyaWJ1dGVOYW1lLCB2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFNldHMgYSBib29sZWFuIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gZWxlbWVudCAtIFRoZSBlbGVtZW50IHRvIHNldCB0aGUgYm9vbGVhbiBhdHRyaWJ1dGUgdmFsdWUgb24uXG4gICAgICogQHBhcmFtIGF0dHJpYnV0ZU5hbWUgLSBUaGUgYXR0cmlidXRlIG5hbWUgdG8gc2V0LlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlIHRvIHNldC5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIElmIHRoZSB2YWx1ZSBpcyB0cnVlLCB0aGUgYXR0cmlidXRlIGlzIGFkZGVkOyBvdGhlcndpc2UgaXQgaXMgcmVtb3ZlZC5cbiAgICAgKi9cbiAgICBzZXRCb29sZWFuQXR0cmlidXRlKGVsZW1lbnQsIGF0dHJpYnV0ZU5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHZhbHVlXG4gICAgICAgICAgICA/IGVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsIFwiXCIpXG4gICAgICAgICAgICA6IGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwgdGhlIGNoaWxkIG5vZGVzIG9mIHRoZSBwcm92aWRlZCBwYXJlbnQgbm9kZS5cbiAgICAgKiBAcGFyYW0gcGFyZW50IC0gVGhlIG5vZGUgdG8gcmVtb3ZlIHRoZSBjaGlsZHJlbiBmcm9tLlxuICAgICAqL1xuICAgIHJlbW92ZUNoaWxkTm9kZXMocGFyZW50KSB7XG4gICAgICAgIGZvciAobGV0IGNoaWxkID0gcGFyZW50LmZpcnN0Q2hpbGQ7IGNoaWxkICE9PSBudWxsOyBjaGlsZCA9IHBhcmVudC5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgVHJlZVdhbGtlciBjb25maWd1cmVkIHRvIHdhbGsgYSB0ZW1wbGF0ZSBmcmFnbWVudC5cbiAgICAgKiBAcGFyYW0gZnJhZ21lbnQgLSBUaGUgZnJhZ21lbnQgdG8gd2Fsay5cbiAgICAgKi9cbiAgICBjcmVhdGVUZW1wbGF0ZVdhbGtlcihmcmFnbWVudCkge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihmcmFnbWVudCwgMTMzLCAvLyBlbGVtZW50LCB0ZXh0LCBjb21tZW50XG4gICAgICAgIG51bGwsIGZhbHNlKTtcbiAgICB9LFxufSk7XG4iLCIvKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBOb3RpZmllcn0gdGhhdCBlZmZpY2llbnRseSBrZWVwcyB0cmFjayBvZlxuICogc3Vic2NyaWJlcnMgaW50ZXJlc3RlZCBpbiBhIHNwZWNpZmljIGNoYW5nZSBub3RpZmljYXRpb24gb24gYW5cbiAqIG9ic2VydmFibGUgc291cmNlLlxuICpcbiAqIEByZW1hcmtzXG4gKiBUaGlzIHNldCBpcyBvcHRpbWl6ZWQgZm9yIHRoZSBtb3N0IGNvbW1vbiBzY2VuYXJpbyBvZiAxIG9yIDIgc3Vic2NyaWJlcnMuXG4gKiBXaXRoIHRoaXMgaW4gbWluZCwgaXQgY2FuIHN0b3JlIGEgc3Vic2NyaWJlciBpbiBhbiBpbnRlcm5hbCBmaWVsZCwgYWxsb3dpbmcgaXQgdG8gYXZvaWQgQXJyYXkjcHVzaCBvcGVyYXRpb25zLlxuICogSWYgdGhlIHNldCBldmVyIGV4Y2VlZHMgdHdvIHN1YnNjcmliZXJzLCBpdCB1cGdyYWRlcyB0byBhbiBhcnJheSBhdXRvbWF0aWNhbGx5LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgU3Vic2NyaWJlclNldCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBTdWJzY3JpYmVyU2V0IGZvciB0aGUgc3BlY2lmaWVkIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0gc291cmNlIC0gVGhlIG9iamVjdCBzb3VyY2UgdGhhdCBzdWJzY3JpYmVycyB3aWxsIHJlY2VpdmUgbm90aWZpY2F0aW9ucyBmcm9tLlxuICAgICAqIEBwYXJhbSBpbml0aWFsU3Vic2NyaWJlciAtIEFuIGluaXRpYWwgc3Vic2NyaWJlciB0byBjaGFuZ2VzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNvdXJjZSwgaW5pdGlhbFN1YnNjcmliZXIpIHtcbiAgICAgICAgdGhpcy5zdWIxID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnN1YjIgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuc3BpbGxvdmVyID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5zdWIxID0gaW5pdGlhbFN1YnNjcmliZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyB3aGV0aGVyIHRoZSBwcm92aWRlZCBzdWJzY3JpYmVyIGhhcyBiZWVuIGFkZGVkIHRvIHRoaXMgc2V0LlxuICAgICAqIEBwYXJhbSBzdWJzY3JpYmVyIC0gVGhlIHN1YnNjcmliZXIgdG8gdGVzdCBmb3IgaW5jbHVzaW9uIGluIHRoaXMgc2V0LlxuICAgICAqL1xuICAgIGhhcyhzdWJzY3JpYmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNwaWxsb3ZlciA9PT0gdm9pZCAwXG4gICAgICAgICAgICA/IHRoaXMuc3ViMSA9PT0gc3Vic2NyaWJlciB8fCB0aGlzLnN1YjIgPT09IHN1YnNjcmliZXJcbiAgICAgICAgICAgIDogdGhpcy5zcGlsbG92ZXIuaW5kZXhPZihzdWJzY3JpYmVyKSAhPT0gLTE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN1YnNjcmliZXMgdG8gbm90aWZpY2F0aW9uIG9mIGNoYW5nZXMgaW4gYW4gb2JqZWN0J3Mgc3RhdGUuXG4gICAgICogQHBhcmFtIHN1YnNjcmliZXIgLSBUaGUgb2JqZWN0IHRoYXQgaXMgc3Vic2NyaWJpbmcgZm9yIGNoYW5nZSBub3RpZmljYXRpb24uXG4gICAgICovXG4gICAgc3Vic2NyaWJlKHN1YnNjcmliZXIpIHtcbiAgICAgICAgY29uc3Qgc3BpbGxvdmVyID0gdGhpcy5zcGlsbG92ZXI7XG4gICAgICAgIGlmIChzcGlsbG92ZXIgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaGFzKHN1YnNjcmliZXIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc3ViMSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWIxID0gc3Vic2NyaWJlcjtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zdWIyID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN1YjIgPSBzdWJzY3JpYmVyO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3BpbGxvdmVyID0gW3RoaXMuc3ViMSwgdGhpcy5zdWIyLCBzdWJzY3JpYmVyXTtcbiAgICAgICAgICAgIHRoaXMuc3ViMSA9IHZvaWQgMDtcbiAgICAgICAgICAgIHRoaXMuc3ViMiA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gc3BpbGxvdmVyLmluZGV4T2Yoc3Vic2NyaWJlcik7XG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgc3BpbGxvdmVyLnB1c2goc3Vic2NyaWJlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVW5zdWJzY3JpYmVzIGZyb20gbm90aWZpY2F0aW9uIG9mIGNoYW5nZXMgaW4gYW4gb2JqZWN0J3Mgc3RhdGUuXG4gICAgICogQHBhcmFtIHN1YnNjcmliZXIgLSBUaGUgb2JqZWN0IHRoYXQgaXMgdW5zdWJzY3JpYmluZyBmcm9tIGNoYW5nZSBub3RpZmljYXRpb24uXG4gICAgICovXG4gICAgdW5zdWJzY3JpYmUoc3Vic2NyaWJlcikge1xuICAgICAgICBjb25zdCBzcGlsbG92ZXIgPSB0aGlzLnNwaWxsb3ZlcjtcbiAgICAgICAgaWYgKHNwaWxsb3ZlciA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdWIxID09PSBzdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWIxID0gdm9pZCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5zdWIyID09PSBzdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWIyID0gdm9pZCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBzcGlsbG92ZXIuaW5kZXhPZihzdWJzY3JpYmVyKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBzcGlsbG92ZXIuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhbGwgc3Vic2NyaWJlcnMuXG4gICAgICogQHBhcmFtIGFyZ3MgLSBEYXRhIHBhc3NlZCBhbG9uZyB0byBzdWJzY3JpYmVycyBkdXJpbmcgbm90aWZpY2F0aW9uLlxuICAgICAqL1xuICAgIG5vdGlmeShhcmdzKSB7XG4gICAgICAgIGNvbnN0IHNwaWxsb3ZlciA9IHRoaXMuc3BpbGxvdmVyO1xuICAgICAgICBjb25zdCBzb3VyY2UgPSB0aGlzLnNvdXJjZTtcbiAgICAgICAgaWYgKHNwaWxsb3ZlciA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBjb25zdCBzdWIxID0gdGhpcy5zdWIxO1xuICAgICAgICAgICAgY29uc3Qgc3ViMiA9IHRoaXMuc3ViMjtcbiAgICAgICAgICAgIGlmIChzdWIxICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICBzdWIxLmhhbmRsZUNoYW5nZShzb3VyY2UsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN1YjIgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHN1YjIuaGFuZGxlQ2hhbmdlKHNvdXJjZSwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBzcGlsbG92ZXIubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIHNwaWxsb3ZlcltpXS5oYW5kbGVDaGFuZ2Uoc291cmNlLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQW4gaW1wbGVtZW50YXRpb24gb2YgTm90aWZpZXIgdGhhdCBhbGxvd3Mgc3Vic2NyaWJlcnMgdG8gYmUgbm90aWZpZWRcbiAqIG9mIGluZGl2aWR1YWwgcHJvcGVydHkgY2hhbmdlcyBvbiBhbiBvYmplY3QuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBQcm9wZXJ0eUNoYW5nZU5vdGlmaWVyIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIFByb3BlcnR5Q2hhbmdlTm90aWZpZXIgZm9yIHRoZSBzcGVjaWZpZWQgc291cmNlLlxuICAgICAqIEBwYXJhbSBzb3VyY2UgLSBUaGUgb2JqZWN0IHNvdXJjZSB0aGF0IHN1YnNjcmliZXJzIHdpbGwgcmVjZWl2ZSBub3RpZmljYXRpb25zIGZyb20uXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc291cmNlKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlcnMgPSB7fTtcbiAgICAgICAgdGhpcy5zb3VyY2VTdWJzY3JpYmVycyA9IG51bGw7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhbGwgc3Vic2NyaWJlcnMsIGJhc2VkIG9uIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkuXG4gICAgICogQHBhcmFtIHByb3BlcnR5TmFtZSAtIFRoZSBwcm9wZXJ0eSBuYW1lLCBwYXNzZWQgYWxvbmcgdG8gc3Vic2NyaWJlcnMgZHVyaW5nIG5vdGlmaWNhdGlvbi5cbiAgICAgKi9cbiAgICBub3RpZnkocHJvcGVydHlOYW1lKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3Qgc3Vic2NyaWJlcnMgPSB0aGlzLnN1YnNjcmliZXJzW3Byb3BlcnR5TmFtZV07XG4gICAgICAgIGlmIChzdWJzY3JpYmVycyAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVycy5ub3RpZnkocHJvcGVydHlOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICAoX2EgPSB0aGlzLnNvdXJjZVN1YnNjcmliZXJzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eubm90aWZ5KHByb3BlcnR5TmFtZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN1YnNjcmliZXMgdG8gbm90aWZpY2F0aW9uIG9mIGNoYW5nZXMgaW4gYW4gb2JqZWN0J3Mgc3RhdGUuXG4gICAgICogQHBhcmFtIHN1YnNjcmliZXIgLSBUaGUgb2JqZWN0IHRoYXQgaXMgc3Vic2NyaWJpbmcgZm9yIGNoYW5nZSBub3RpZmljYXRpb24uXG4gICAgICogQHBhcmFtIHByb3BlcnR5VG9XYXRjaCAtIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0aGF0IHRoZSBzdWJzY3JpYmVyIGlzIGludGVyZXN0ZWQgaW4gd2F0Y2hpbmcgZm9yIGNoYW5nZXMuXG4gICAgICovXG4gICAgc3Vic2NyaWJlKHN1YnNjcmliZXIsIHByb3BlcnR5VG9XYXRjaCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmIChwcm9wZXJ0eVRvV2F0Y2gpIHtcbiAgICAgICAgICAgIGxldCBzdWJzY3JpYmVycyA9IHRoaXMuc3Vic2NyaWJlcnNbcHJvcGVydHlUb1dhdGNoXTtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpYmVycyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVyc1twcm9wZXJ0eVRvV2F0Y2hdID0gc3Vic2NyaWJlcnMgPSBuZXcgU3Vic2NyaWJlclNldCh0aGlzLnNvdXJjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdWJzY3JpYmVycy5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZVN1YnNjcmliZXJzID1cbiAgICAgICAgICAgICAgICAoX2EgPSB0aGlzLnNvdXJjZVN1YnNjcmliZXJzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBuZXcgU3Vic2NyaWJlclNldCh0aGlzLnNvdXJjZSk7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZVN1YnNjcmliZXJzLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbnN1YnNjcmliZXMgZnJvbSBub3RpZmljYXRpb24gb2YgY2hhbmdlcyBpbiBhbiBvYmplY3QncyBzdGF0ZS5cbiAgICAgKiBAcGFyYW0gc3Vic2NyaWJlciAtIFRoZSBvYmplY3QgdGhhdCBpcyB1bnN1YnNjcmliaW5nIGZyb20gY2hhbmdlIG5vdGlmaWNhdGlvbi5cbiAgICAgKiBAcGFyYW0gcHJvcGVydHlUb1Vud2F0Y2ggLSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdGhhdCB0aGUgc3Vic2NyaWJlciBpcyBubyBsb25nZXIgaW50ZXJlc3RlZCBpbiB3YXRjaGluZy5cbiAgICAgKi9cbiAgICB1bnN1YnNjcmliZShzdWJzY3JpYmVyLCBwcm9wZXJ0eVRvVW53YXRjaCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmIChwcm9wZXJ0eVRvVW53YXRjaCkge1xuICAgICAgICAgICAgY29uc3Qgc3Vic2NyaWJlcnMgPSB0aGlzLnN1YnNjcmliZXJzW3Byb3BlcnR5VG9VbndhdGNoXTtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpYmVycyAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlcnMudW5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAoX2EgPSB0aGlzLnNvdXJjZVN1YnNjcmliZXJzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudW5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBET00gfSBmcm9tIFwiLi4vZG9tLmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVNZXRhZGF0YUxvY2F0b3IsIEZBU1QgfSBmcm9tIFwiLi4vcGxhdGZvcm0uanNcIjtcbmltcG9ydCB7IFByb3BlcnR5Q2hhbmdlTm90aWZpZXIsIFN1YnNjcmliZXJTZXQgfSBmcm9tIFwiLi9ub3RpZmllci5qc1wiO1xuLyoqXG4gKiBDb21tb24gT2JzZXJ2YWJsZSBBUElzLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgT2JzZXJ2YWJsZSA9IEZBU1QuZ2V0QnlJZCgyIC8qIG9ic2VydmFibGUgKi8sICgpID0+IHtcbiAgICBjb25zdCB2b2xhdGlsZVJlZ2V4ID0gLyg6fCYmfFxcfFxcfHxpZikvO1xuICAgIGNvbnN0IG5vdGlmaWVyTG9va3VwID0gbmV3IFdlYWtNYXAoKTtcbiAgICBjb25zdCBxdWV1ZVVwZGF0ZSA9IERPTS5xdWV1ZVVwZGF0ZTtcbiAgICBsZXQgd2F0Y2hlciA9IHZvaWQgMDtcbiAgICBsZXQgY3JlYXRlQXJyYXlPYnNlcnZlciA9IChhcnJheSkgPT4ge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IGNhbGwgZW5hYmxlQXJyYXlPYnNlcnZhdGlvbiBiZWZvcmUgb2JzZXJ2aW5nIGFycmF5cy5cIik7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBnZXROb3RpZmllcihzb3VyY2UpIHtcbiAgICAgICAgbGV0IGZvdW5kID0gc291cmNlLiRmYXN0Q29udHJvbGxlciB8fCBub3RpZmllckxvb2t1cC5nZXQoc291cmNlKTtcbiAgICAgICAgaWYgKGZvdW5kID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNvdXJjZSkpIHtcbiAgICAgICAgICAgICAgICBmb3VuZCA9IGNyZWF0ZUFycmF5T2JzZXJ2ZXIoc291cmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5vdGlmaWVyTG9va3VwLnNldChzb3VyY2UsIChmb3VuZCA9IG5ldyBQcm9wZXJ0eUNoYW5nZU5vdGlmaWVyKHNvdXJjZSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm91bmQ7XG4gICAgfVxuICAgIGNvbnN0IGdldEFjY2Vzc29ycyA9IGNyZWF0ZU1ldGFkYXRhTG9jYXRvcigpO1xuICAgIGNsYXNzIERlZmF1bHRPYnNlcnZhYmxlQWNjZXNzb3Ige1xuICAgICAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgdGhpcy5maWVsZCA9IGBfJHtuYW1lfWA7XG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrID0gYCR7bmFtZX1DaGFuZ2VkYDtcbiAgICAgICAgfVxuICAgICAgICBnZXRWYWx1ZShzb3VyY2UpIHtcbiAgICAgICAgICAgIGlmICh3YXRjaGVyICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICB3YXRjaGVyLndhdGNoKHNvdXJjZSwgdGhpcy5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzb3VyY2VbdGhpcy5maWVsZF07XG4gICAgICAgIH1cbiAgICAgICAgc2V0VmFsdWUoc291cmNlLCBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgZmllbGQgPSB0aGlzLmZpZWxkO1xuICAgICAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBzb3VyY2VbZmllbGRdO1xuICAgICAgICAgICAgaWYgKG9sZFZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHNvdXJjZVtmaWVsZF0gPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBjYWxsYmFjayA9IHNvdXJjZVt0aGlzLmNhbGxiYWNrXTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChzb3VyY2UsIG9sZFZhbHVlLCBuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdldE5vdGlmaWVyKHNvdXJjZSkubm90aWZ5KHRoaXMubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xhc3MgQmluZGluZ09ic2VydmVySW1wbGVtZW50YXRpb24gZXh0ZW5kcyBTdWJzY3JpYmVyU2V0IHtcbiAgICAgICAgY29uc3RydWN0b3IoYmluZGluZywgaW5pdGlhbFN1YnNjcmliZXIsIGlzVm9sYXRpbGVCaW5kaW5nID0gZmFsc2UpIHtcbiAgICAgICAgICAgIHN1cGVyKGJpbmRpbmcsIGluaXRpYWxTdWJzY3JpYmVyKTtcbiAgICAgICAgICAgIHRoaXMuYmluZGluZyA9IGJpbmRpbmc7XG4gICAgICAgICAgICB0aGlzLmlzVm9sYXRpbGVCaW5kaW5nID0gaXNWb2xhdGlsZUJpbmRpbmc7XG4gICAgICAgICAgICB0aGlzLm5lZWRzUmVmcmVzaCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm5lZWRzUXVldWUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5maXJzdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmxhc3QgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5wcm9wZXJ0eVNvdXJjZSA9IHZvaWQgMDtcbiAgICAgICAgICAgIHRoaXMucHJvcGVydHlOYW1lID0gdm9pZCAwO1xuICAgICAgICAgICAgdGhpcy5ub3RpZmllciA9IHZvaWQgMDtcbiAgICAgICAgICAgIHRoaXMubmV4dCA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgICBvYnNlcnZlKHNvdXJjZSwgY29udGV4dCkge1xuICAgICAgICAgICAgaWYgKHRoaXMubmVlZHNSZWZyZXNoICYmIHRoaXMubGFzdCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNXYXRjaGVyID0gd2F0Y2hlcjtcbiAgICAgICAgICAgIHdhdGNoZXIgPSB0aGlzLm5lZWRzUmVmcmVzaCA/IHRoaXMgOiB2b2lkIDA7XG4gICAgICAgICAgICB0aGlzLm5lZWRzUmVmcmVzaCA9IHRoaXMuaXNWb2xhdGlsZUJpbmRpbmc7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmJpbmRpbmcoc291cmNlLCBjb250ZXh0KTtcbiAgICAgICAgICAgIHdhdGNoZXIgPSBwcmV2aW91c1dhdGNoZXI7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5sYXN0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLmZpcnN0O1xuICAgICAgICAgICAgICAgIHdoaWxlIChjdXJyZW50ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudC5ub3RpZmllci51bnN1YnNjcmliZSh0aGlzLCBjdXJyZW50LnByb3BlcnR5TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMubGFzdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5uZWVkc1JlZnJlc2ggPSB0aGlzLm5lZWRzUXVldWUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHdhdGNoKHByb3BlcnR5U291cmNlLCBwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHByZXYgPSB0aGlzLmxhc3Q7XG4gICAgICAgICAgICBjb25zdCBub3RpZmllciA9IGdldE5vdGlmaWVyKHByb3BlcnR5U291cmNlKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBwcmV2ID09PSBudWxsID8gdGhpcy5maXJzdCA6IHt9O1xuICAgICAgICAgICAgY3VycmVudC5wcm9wZXJ0eVNvdXJjZSA9IHByb3BlcnR5U291cmNlO1xuICAgICAgICAgICAgY3VycmVudC5wcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWU7XG4gICAgICAgICAgICBjdXJyZW50Lm5vdGlmaWVyID0gbm90aWZpZXI7XG4gICAgICAgICAgICBub3RpZmllci5zdWJzY3JpYmUodGhpcywgcHJvcGVydHlOYW1lKTtcbiAgICAgICAgICAgIGlmIChwcmV2ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLm5lZWRzUmVmcmVzaCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBEZWNsYXJpbmcgdGhlIHZhcmlhYmxlIHByaW9yIHRvIGFzc2lnbm1lbnQgYmVsb3cgY2lyY3VtdmVudHNcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBidWcgaW4gQW5ndWxhcidzIG9wdGltaXphdGlvbiBwcm9jZXNzIGNhdXNpbmcgaW5maW5pdGUgcmVjdXJzaW9uXG4gICAgICAgICAgICAgICAgICAgIC8vIG9mIHRoaXMgd2F0Y2goKSBtZXRob2QuIERldGFpbHMgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9mYXN0L2lzc3Vlcy80OTY5XG4gICAgICAgICAgICAgICAgICAgIGxldCBwcmV2VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHdhdGNoZXIgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSAqL1xuICAgICAgICAgICAgICAgICAgICBwcmV2VmFsdWUgPSBwcmV2LnByb3BlcnR5U291cmNlW3ByZXYucHJvcGVydHlOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzICovXG4gICAgICAgICAgICAgICAgICAgIHdhdGNoZXIgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydHlTb3VyY2UgPT09IHByZXZWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZWVkc1JlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByZXYubmV4dCA9IGN1cnJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxhc3QgPSBjdXJyZW50O1xuICAgICAgICB9XG4gICAgICAgIGhhbmRsZUNoYW5nZSgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5lZWRzUXVldWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5lZWRzUXVldWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBxdWV1ZVVwZGF0ZSh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYWxsKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMubGFzdCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMubmVlZHNRdWV1ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVjb3JkcygpIHtcbiAgICAgICAgICAgIGxldCBuZXh0ID0gdGhpcy5maXJzdDtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmV4dDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gbmV4dDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCA9IG5leHQubmV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGN1cnJlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0LmZyZWV6ZSh7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICogQHBhcmFtIGZhY3RvcnkgLSBUaGUgZmFjdG9yeSB1c2VkIHRvIGNyZWF0ZSBhcnJheSBvYnNlcnZlcnMuXG4gICAgICAgICAqL1xuICAgICAgICBzZXRBcnJheU9ic2VydmVyRmFjdG9yeShmYWN0b3J5KSB7XG4gICAgICAgICAgICBjcmVhdGVBcnJheU9ic2VydmVyID0gZmFjdG9yeTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgYSBub3RpZmllciBmb3IgYW4gb2JqZWN0IG9yIEFycmF5LlxuICAgICAgICAgKiBAcGFyYW0gc291cmNlIC0gVGhlIG9iamVjdCBvciBBcnJheSB0byBnZXQgdGhlIG5vdGlmaWVyIGZvci5cbiAgICAgICAgICovXG4gICAgICAgIGdldE5vdGlmaWVyLFxuICAgICAgICAvKipcbiAgICAgICAgICogUmVjb3JkcyBhIHByb3BlcnR5IGNoYW5nZSBmb3IgYSBzb3VyY2Ugb2JqZWN0LlxuICAgICAgICAgKiBAcGFyYW0gc291cmNlIC0gVGhlIG9iamVjdCB0byByZWNvcmQgdGhlIGNoYW5nZSBhZ2FpbnN0LlxuICAgICAgICAgKiBAcGFyYW0gcHJvcGVydHlOYW1lIC0gVGhlIHByb3BlcnR5IHRvIHRyYWNrIGFzIGNoYW5nZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0cmFjayhzb3VyY2UsIHByb3BlcnR5TmFtZSkge1xuICAgICAgICAgICAgaWYgKHdhdGNoZXIgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHdhdGNoZXIud2F0Y2goc291cmNlLCBwcm9wZXJ0eU5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogTm90aWZpZXMgd2F0Y2hlcnMgdGhhdCB0aGUgY3VycmVudGx5IGV4ZWN1dGluZyBwcm9wZXJ0eSBnZXR0ZXIgb3IgZnVuY3Rpb24gaXMgdm9sYXRpbGVcbiAgICAgICAgICogd2l0aCByZXNwZWN0IHRvIGl0cyBvYnNlcnZhYmxlIGRlcGVuZGVuY2llcy5cbiAgICAgICAgICovXG4gICAgICAgIHRyYWNrVm9sYXRpbGUoKSB7XG4gICAgICAgICAgICBpZiAod2F0Y2hlciAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgd2F0Y2hlci5uZWVkc1JlZnJlc2ggPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogTm90aWZpZXMgc3Vic2NyaWJlcnMgb2YgYSBzb3VyY2Ugb2JqZWN0IG9mIGNoYW5nZXMuXG4gICAgICAgICAqIEBwYXJhbSBzb3VyY2UgLSB0aGUgb2JqZWN0IHRvIG5vdGlmeSBvZiBjaGFuZ2VzLlxuICAgICAgICAgKiBAcGFyYW0gYXJncyAtIFRoZSBjaGFuZ2UgYXJncyB0byBwYXNzIHRvIHN1YnNjcmliZXJzLlxuICAgICAgICAgKi9cbiAgICAgICAgbm90aWZ5KHNvdXJjZSwgYXJncykge1xuICAgICAgICAgICAgZ2V0Tm90aWZpZXIoc291cmNlKS5ub3RpZnkoYXJncyk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIGFuIG9ic2VydmFibGUgcHJvcGVydHkgb24gYW4gb2JqZWN0IG9yIHByb3RvdHlwZS5cbiAgICAgICAgICogQHBhcmFtIHRhcmdldCAtIFRoZSB0YXJnZXQgb2JqZWN0IHRvIGRlZmluZSB0aGUgb2JzZXJ2YWJsZSBvbi5cbiAgICAgICAgICogQHBhcmFtIG5hbWVPckFjY2Vzc29yIC0gVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIGRlZmluZSBhcyBvYnNlcnZhYmxlO1xuICAgICAgICAgKiBvciBhIGN1c3RvbSBhY2Nlc3NvciB0aGF0IHNwZWNpZmllcyB0aGUgcHJvcGVydHkgbmFtZSBhbmQgYWNjZXNzb3IgaW1wbGVtZW50YXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICBkZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIG5hbWVPckFjY2Vzc29yKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG5hbWVPckFjY2Vzc29yID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgbmFtZU9yQWNjZXNzb3IgPSBuZXcgRGVmYXVsdE9ic2VydmFibGVBY2Nlc3NvcihuYW1lT3JBY2Nlc3Nvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnZXRBY2Nlc3NvcnModGFyZ2V0KS5wdXNoKG5hbWVPckFjY2Vzc29yKTtcbiAgICAgICAgICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBuYW1lT3JBY2Nlc3Nvci5uYW1lLCB7XG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hbWVPckFjY2Vzc29yLmdldFZhbHVlKHRoaXMpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZU9yQWNjZXNzb3Iuc2V0VmFsdWUodGhpcywgbmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpbmRzIGFsbCB0aGUgb2JzZXJ2YWJsZSBhY2Nlc3NvcnMgZGVmaW5lZCBvbiB0aGUgdGFyZ2V0LFxuICAgICAgICAgKiBpbmNsdWRpbmcgaXRzIHByb3RvdHlwZSBjaGFpbi5cbiAgICAgICAgICogQHBhcmFtIHRhcmdldCAtIFRoZSB0YXJnZXQgb2JqZWN0IHRvIHNlYXJjaCBmb3IgYWNjZXNzb3Igb24uXG4gICAgICAgICAqL1xuICAgICAgICBnZXRBY2Nlc3NvcnMsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEge0BsaW5rIEJpbmRpbmdPYnNlcnZlcn0gdGhhdCBjYW4gd2F0Y2ggdGhlXG4gICAgICAgICAqIHByb3ZpZGVkIHtAbGluayBCaW5kaW5nfSBmb3IgY2hhbmdlcy5cbiAgICAgICAgICogQHBhcmFtIGJpbmRpbmcgLSBUaGUgYmluZGluZyB0byBvYnNlcnZlLlxuICAgICAgICAgKiBAcGFyYW0gaW5pdGlhbFN1YnNjcmliZXIgLSBBbiBpbml0aWFsIHN1YnNjcmliZXIgdG8gY2hhbmdlcyBpbiB0aGUgYmluZGluZyB2YWx1ZS5cbiAgICAgICAgICogQHBhcmFtIGlzVm9sYXRpbGVCaW5kaW5nIC0gSW5kaWNhdGVzIHdoZXRoZXIgdGhlIGJpbmRpbmcncyBkZXBlbmRlbmN5IGxpc3QgbXVzdCBiZSByZS1ldmFsdWF0ZWQgb24gZXZlcnkgdmFsdWUgZXZhbHVhdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIGJpbmRpbmcoYmluZGluZywgaW5pdGlhbFN1YnNjcmliZXIsIGlzVm9sYXRpbGVCaW5kaW5nID0gdGhpcy5pc1ZvbGF0aWxlQmluZGluZyhiaW5kaW5nKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCaW5kaW5nT2JzZXJ2ZXJJbXBsZW1lbnRhdGlvbihiaW5kaW5nLCBpbml0aWFsU3Vic2NyaWJlciwgaXNWb2xhdGlsZUJpbmRpbmcpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIGEgYmluZGluZyBleHByZXNzaW9uIGlzIHZvbGF0aWxlIGFuZCBuZWVkcyB0byBoYXZlIGl0cyBkZXBlbmRlbmN5IGxpc3QgcmUtZXZhbHVhdGVkXG4gICAgICAgICAqIG9uIGV2ZXJ5IGV2YWx1YXRpb24gb2YgdGhlIHZhbHVlLlxuICAgICAgICAgKiBAcGFyYW0gYmluZGluZyAtIFRoZSBiaW5kaW5nIHRvIGluc3BlY3QuXG4gICAgICAgICAqL1xuICAgICAgICBpc1ZvbGF0aWxlQmluZGluZyhiaW5kaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gdm9sYXRpbGVSZWdleC50ZXN0KGJpbmRpbmcudG9TdHJpbmcoKSk7XG4gICAgICAgIH0sXG4gICAgfSk7XG59KTtcbi8qKlxuICogRGVjb3JhdG9yOiBEZWZpbmVzIGFuIG9ic2VydmFibGUgcHJvcGVydHkgb24gdGhlIHRhcmdldC5cbiAqIEBwYXJhbSB0YXJnZXQgLSBUaGUgdGFyZ2V0IHRvIGRlZmluZSB0aGUgb2JzZXJ2YWJsZSBvbi5cbiAqIEBwYXJhbSBuYW1lT3JBY2Nlc3NvciAtIFRoZSBwcm9wZXJ0eSBuYW1lIG9yIGFjY2Vzc29yIHRvIGRlZmluZSB0aGUgb2JzZXJ2YWJsZSBhcy5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9ic2VydmFibGUodGFyZ2V0LCBuYW1lT3JBY2Nlc3Nvcikge1xuICAgIE9ic2VydmFibGUuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBuYW1lT3JBY2Nlc3Nvcik7XG59XG4vKipcbiAqIERlY29yYXRvcjogTWFya3MgYSBwcm9wZXJ0eSBnZXR0ZXIgYXMgaGF2aW5nIHZvbGF0aWxlIG9ic2VydmFibGUgZGVwZW5kZW5jaWVzLlxuICogQHBhcmFtIHRhcmdldCAtIFRoZSB0YXJnZXQgdGhhdCB0aGUgcHJvcGVydHkgaXMgZGVmaW5lZCBvbi5cbiAqIEBwYXJhbSBuYW1lIC0gVGhlIHByb3BlcnR5IG5hbWUuXG4gKiBAcGFyYW0gbmFtZSAtIFRoZSBleGlzdGluZyBkZXNjcmlwdG9yLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gdm9sYXRpbGUodGFyZ2V0LCBuYW1lLCBkZXNjcmlwdG9yKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGRlc2NyaXB0b3IsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBPYnNlcnZhYmxlLnRyYWNrVm9sYXRpbGUoKTtcbiAgICAgICAgICAgIHJldHVybiBkZXNjcmlwdG9yLmdldC5hcHBseSh0aGlzKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbmNvbnN0IGNvbnRleHRFdmVudCA9IEZBU1QuZ2V0QnlJZCgzIC8qIGNvbnRleHRFdmVudCAqLywgKCkgPT4ge1xuICAgIGxldCBjdXJyZW50ID0gbnVsbDtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KGV2ZW50KSB7XG4gICAgICAgICAgICBjdXJyZW50ID0gZXZlbnQ7XG4gICAgICAgIH0sXG4gICAgfTtcbn0pO1xuLyoqXG4gKiBQcm92aWRlcyBhZGRpdGlvbmFsIGNvbnRleHR1YWwgaW5mb3JtYXRpb24gYXZhaWxhYmxlIHRvIGJlaGF2aW9ycyBhbmQgZXhwcmVzc2lvbnMuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBFeGVjdXRpb25Db250ZXh0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpbmRleCBvZiB0aGUgY3VycmVudCBpdGVtIHdpdGhpbiBhIHJlcGVhdCBjb250ZXh0LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbGVuZ3RoIG9mIHRoZSBjdXJyZW50IGNvbGxlY3Rpb24gd2l0aGluIGEgcmVwZWF0IGNvbnRleHQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcGFyZW50IGRhdGEgb2JqZWN0IHdpdGhpbiBhIHJlcGVhdCBjb250ZXh0LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wYXJlbnQgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHBhcmVudCBleGVjdXRpb24gY29udGV4dCB3aGVuIGluIG5lc3RlZCBjb250ZXh0IHNjZW5hcmlvcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGFyZW50Q29udGV4dCA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGV2ZW50IHdpdGhpbiBhbiBldmVudCBoYW5kbGVyLlxuICAgICAqL1xuICAgIGdldCBldmVudCgpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHRFdmVudC5nZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIGN1cnJlbnQgaXRlbSB3aXRoaW4gYSByZXBlYXQgY29udGV4dFxuICAgICAqIGhhcyBhbiBldmVuIGluZGV4LlxuICAgICAqL1xuICAgIGdldCBpc0V2ZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4ICUgMiA9PT0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIGN1cnJlbnQgaXRlbSB3aXRoaW4gYSByZXBlYXQgY29udGV4dFxuICAgICAqIGhhcyBhbiBvZGQgaW5kZXguXG4gICAgICovXG4gICAgZ2V0IGlzT2RkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleCAlIDIgIT09IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBjdXJyZW50IGl0ZW0gd2l0aGluIGEgcmVwZWF0IGNvbnRleHRcbiAgICAgKiBpcyB0aGUgZmlyc3QgaXRlbSBpbiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgaXNGaXJzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXggPT09IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBjdXJyZW50IGl0ZW0gd2l0aGluIGEgcmVwZWF0IGNvbnRleHRcbiAgICAgKiBpcyBzb21ld2hlcmUgaW4gdGhlIG1pZGRsZSBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgaXNJbk1pZGRsZSgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmlzRmlyc3QgJiYgIXRoaXMuaXNMYXN0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgY3VycmVudCBpdGVtIHdpdGhpbiBhIHJlcGVhdCBjb250ZXh0XG4gICAgICogaXMgdGhlIGxhc3QgaXRlbSBpbiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgaXNMYXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleCA9PT0gdGhpcy5sZW5ndGggLSAxO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBldmVudCBmb3IgdGhlIGN1cnJlbnQgZXhlY3V0aW9uIGNvbnRleHQuXG4gICAgICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIHNldC5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzdGF0aWMgc2V0RXZlbnQoZXZlbnQpIHtcbiAgICAgICAgY29udGV4dEV2ZW50LnNldChldmVudCk7XG4gICAgfVxufVxuT2JzZXJ2YWJsZS5kZWZpbmVQcm9wZXJ0eShFeGVjdXRpb25Db250ZXh0LnByb3RvdHlwZSwgXCJpbmRleFwiKTtcbk9ic2VydmFibGUuZGVmaW5lUHJvcGVydHkoRXhlY3V0aW9uQ29udGV4dC5wcm90b3R5cGUsIFwibGVuZ3RoXCIpO1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBleGVjdXRpb24gY29udGV4dCB1c2VkIGluIGJpbmRpbmcgZXhwcmVzc2lvbnMuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBkZWZhdWx0RXhlY3V0aW9uQ29udGV4dCA9IE9iamVjdC5zZWFsKG5ldyBFeGVjdXRpb25Db250ZXh0KCkpO1xuIiwiaW1wb3J0IHsgRE9NIH0gZnJvbSBcIi4uL2RvbS5qc1wiO1xuLyoqXG4gKiBJbnN0cnVjdHMgdGhlIHRlbXBsYXRlIGVuZ2luZSB0byBhcHBseSBiZWhhdmlvciB0byBhIG5vZGUuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBIVE1MRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpbmRleCBvZiB0aGUgRE9NIG5vZGUgdG8gd2hpY2ggdGhlIGNyZWF0ZWQgYmVoYXZpb3Igd2lsbCBhcHBseS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFyZ2V0SW5kZXggPSAwO1xuICAgIH1cbn1cbi8qKlxuICogQSB7QGxpbmsgSFRNTERpcmVjdGl2ZX0gdGhhdCB0YXJnZXRzIGEgbmFtZWQgYXR0cmlidXRlIG9yIHByb3BlcnR5IG9uIGEgbm9kZS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFRhcmdldGVkSFRNTERpcmVjdGl2ZSBleHRlbmRzIEhUTUxEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWNlaG9sZGVyIHN0cmluZyBiYXNlZCBvbiB0aGUgZGlyZWN0aXZlJ3MgaW5kZXggd2l0aGluIHRoZSB0ZW1wbGF0ZS5cbiAgICAgICAgICogQHBhcmFtIGluZGV4IC0gVGhlIGluZGV4IG9mIHRoZSBkaXJlY3RpdmUgd2l0aGluIHRoZSB0ZW1wbGF0ZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY3JlYXRlUGxhY2Vob2xkZXIgPSBET00uY3JlYXRlSW50ZXJwb2xhdGlvblBsYWNlaG9sZGVyO1xuICAgIH1cbn1cbi8qKlxuICogQSBkaXJlY3RpdmUgdGhhdCBhdHRhY2hlcyBzcGVjaWFsIGJlaGF2aW9yIHRvIGFuIGVsZW1lbnQgdmlhIGEgY3VzdG9tIGF0dHJpYnV0ZS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEF0dGFjaGVkQmVoYXZpb3JIVE1MRGlyZWN0aXZlIGV4dGVuZHMgSFRNTERpcmVjdGl2ZSB7XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBiZWhhdmlvcjsgdXNlZCBhcyBhIGN1c3RvbSBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIGJlaGF2aW9yIC0gVGhlIGJlaGF2aW9yIHRvIGluc3RhbnRpYXRlIGFuZCBhdHRhY2ggdG8gdGhlIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIHRvIHBhc3MgdG8gdGhlIGJlaGF2aW9yIGR1cmluZyBjcmVhdGlvbi5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBiZWhhdmlvciwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmJlaGF2aW9yID0gYmVoYXZpb3I7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBwbGFjZWhvbGRlciBzdHJpbmcgYmFzZWQgb24gdGhlIGRpcmVjdGl2ZSdzIGluZGV4IHdpdGhpbiB0aGUgdGVtcGxhdGUuXG4gICAgICogQHBhcmFtIGluZGV4IC0gVGhlIGluZGV4IG9mIHRoZSBkaXJlY3RpdmUgd2l0aGluIHRoZSB0ZW1wbGF0ZS5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIENyZWF0ZXMgYSBjdXN0b20gYXR0cmlidXRlIHBsYWNlaG9sZGVyLlxuICAgICAqL1xuICAgIGNyZWF0ZVBsYWNlaG9sZGVyKGluZGV4KSB7XG4gICAgICAgIHJldHVybiBET00uY3JlYXRlQ3VzdG9tQXR0cmlidXRlUGxhY2Vob2xkZXIodGhpcy5uYW1lLCBpbmRleCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBiZWhhdmlvciBmb3IgdGhlIHByb3ZpZGVkIHRhcmdldCBub2RlLlxuICAgICAqIEBwYXJhbSB0YXJnZXQgLSBUaGUgbm9kZSBpbnN0YW5jZSB0byBjcmVhdGUgdGhlIGJlaGF2aW9yIGZvci5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIGBiZWhhdmlvcmAgdHlwZSB0aGlzIGRpcmVjdGl2ZSB3YXMgY29uc3RydWN0ZWQgd2l0aFxuICAgICAqIGFuZCBwYXNzZXMgdGhlIHRhcmdldCBhbmQgb3B0aW9ucyB0byB0aGF0IGBiZWhhdmlvcmAncyBjb25zdHJ1Y3Rvci5cbiAgICAgKi9cbiAgICBjcmVhdGVCZWhhdmlvcih0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmJlaGF2aW9yKHRhcmdldCwgdGhpcy5vcHRpb25zKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBET00gfSBmcm9tIFwiLi4vZG9tLmpzXCI7XG5pbXBvcnQgeyBFeGVjdXRpb25Db250ZXh0LCBPYnNlcnZhYmxlLCB9IGZyb20gXCIuLi9vYnNlcnZhdGlvbi9vYnNlcnZhYmxlLmpzXCI7XG5pbXBvcnQgeyBUYXJnZXRlZEhUTUxEaXJlY3RpdmUgfSBmcm9tIFwiLi9odG1sLWRpcmVjdGl2ZS5qc1wiO1xuZnVuY3Rpb24gbm9ybWFsQmluZChzb3VyY2UsIGNvbnRleHQpIHtcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIGlmICh0aGlzLmJpbmRpbmdPYnNlcnZlciA9PT0gbnVsbCkge1xuICAgICAgICB0aGlzLmJpbmRpbmdPYnNlcnZlciA9IE9ic2VydmFibGUuYmluZGluZyh0aGlzLmJpbmRpbmcsIHRoaXMsIHRoaXMuaXNCaW5kaW5nVm9sYXRpbGUpO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZVRhcmdldCh0aGlzLmJpbmRpbmdPYnNlcnZlci5vYnNlcnZlKHNvdXJjZSwgY29udGV4dCkpO1xufVxuZnVuY3Rpb24gdHJpZ2dlckJpbmQoc291cmNlLCBjb250ZXh0KSB7XG4gICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICB0aGlzLnRhcmdldC5hZGRFdmVudExpc3RlbmVyKHRoaXMudGFyZ2V0TmFtZSwgdGhpcyk7XG59XG5mdW5jdGlvbiBub3JtYWxVbmJpbmQoKSB7XG4gICAgdGhpcy5iaW5kaW5nT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgIHRoaXMuc291cmNlID0gbnVsbDtcbiAgICB0aGlzLmNvbnRleHQgPSBudWxsO1xufVxuZnVuY3Rpb24gY29udGVudFVuYmluZCgpIHtcbiAgICB0aGlzLmJpbmRpbmdPYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgdGhpcy5zb3VyY2UgPSBudWxsO1xuICAgIHRoaXMuY29udGV4dCA9IG51bGw7XG4gICAgY29uc3QgdmlldyA9IHRoaXMudGFyZ2V0LiRmYXN0VmlldztcbiAgICBpZiAodmlldyAhPT0gdm9pZCAwICYmIHZpZXcuaXNDb21wb3NlZCkge1xuICAgICAgICB2aWV3LnVuYmluZCgpO1xuICAgICAgICB2aWV3Lm5lZWRzQmluZE9ubHkgPSB0cnVlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRyaWdnZXJVbmJpbmQoKSB7XG4gICAgdGhpcy50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLnRhcmdldE5hbWUsIHRoaXMpO1xuICAgIHRoaXMuc291cmNlID0gbnVsbDtcbiAgICB0aGlzLmNvbnRleHQgPSBudWxsO1xufVxuZnVuY3Rpb24gdXBkYXRlQXR0cmlidXRlVGFyZ2V0KHZhbHVlKSB7XG4gICAgRE9NLnNldEF0dHJpYnV0ZSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXROYW1lLCB2YWx1ZSk7XG59XG5mdW5jdGlvbiB1cGRhdGVCb29sZWFuQXR0cmlidXRlVGFyZ2V0KHZhbHVlKSB7XG4gICAgRE9NLnNldEJvb2xlYW5BdHRyaWJ1dGUodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0TmFtZSwgdmFsdWUpO1xufVxuZnVuY3Rpb24gdXBkYXRlQ29udGVudFRhcmdldCh2YWx1ZSkge1xuICAgIC8vIElmIHRoZXJlJ3Mgbm8gYWN0dWFsIHZhbHVlLCB0aGVuIHRoaXMgZXF1YXRlcyB0byB0aGVcbiAgICAvLyBlbXB0eSBzdHJpbmcgZm9yIHRoZSBwdXJwb3NlcyBvZiBjb250ZW50IGJpbmRpbmdzLlxuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlID0gXCJcIjtcbiAgICB9XG4gICAgLy8gSWYgdGhlIHZhbHVlIGhhcyBhIFwiY3JlYXRlXCIgbWV0aG9kLCB0aGVuIGl0J3MgYSB0ZW1wbGF0ZS1saWtlLlxuICAgIGlmICh2YWx1ZS5jcmVhdGUpIHtcbiAgICAgICAgdGhpcy50YXJnZXQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICBsZXQgdmlldyA9IHRoaXMudGFyZ2V0LiRmYXN0VmlldztcbiAgICAgICAgLy8gSWYgdGhlcmUncyBubyBwcmV2aW91cyB2aWV3IHRoYXQgd2UgbWlnaHQgYmUgYWJsZSB0b1xuICAgICAgICAvLyByZXVzZSB0aGVuIGNyZWF0ZSBhIG5ldyB2aWV3IGZyb20gdGhlIHRlbXBsYXRlLlxuICAgICAgICBpZiAodmlldyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB2aWV3ID0gdmFsdWUuY3JlYXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhIHByZXZpb3VzIHZpZXcsIGJ1dCBpdCB3YXNuJ3QgY3JlYXRlZFxuICAgICAgICAgICAgLy8gZnJvbSB0aGUgc2FtZSB0ZW1wbGF0ZSBhcyB0aGUgbmV3IHZhbHVlLCB0aGVuIHdlXG4gICAgICAgICAgICAvLyBuZWVkIHRvIHJlbW92ZSB0aGUgb2xkIHZpZXcgaWYgaXQncyBzdGlsbCBpbiB0aGUgRE9NXG4gICAgICAgICAgICAvLyBhbmQgY3JlYXRlIGEgbmV3IHZpZXcgZnJvbSB0aGUgdGVtcGxhdGUuXG4gICAgICAgICAgICBpZiAodGhpcy50YXJnZXQuJGZhc3RUZW1wbGF0ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodmlldy5pc0NvbXBvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcudW5iaW5kKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZpZXcgPSB2YWx1ZS5jcmVhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgdGhlIHZhbHVlIGlzIHRoZSBzYW1lIGFzIHRoZSBwcmV2aW91cyB0ZW1wbGF0ZVxuICAgICAgICAvLyBhbmQgdGhhdCB0aGVyZSdzIGFjdHVhbGx5IG5vIG5lZWQgdG8gY29tcG9zZSBpdC5cbiAgICAgICAgaWYgKCF2aWV3LmlzQ29tcG9zZWQpIHtcbiAgICAgICAgICAgIHZpZXcuaXNDb21wb3NlZCA9IHRydWU7XG4gICAgICAgICAgICB2aWV3LmJpbmQodGhpcy5zb3VyY2UsIHRoaXMuY29udGV4dCk7XG4gICAgICAgICAgICB2aWV3Lmluc2VydEJlZm9yZSh0aGlzLnRhcmdldCk7XG4gICAgICAgICAgICB0aGlzLnRhcmdldC4kZmFzdFZpZXcgPSB2aWV3O1xuICAgICAgICAgICAgdGhpcy50YXJnZXQuJGZhc3RUZW1wbGF0ZSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZpZXcubmVlZHNCaW5kT25seSkge1xuICAgICAgICAgICAgdmlldy5uZWVkc0JpbmRPbmx5ID0gZmFsc2U7XG4gICAgICAgICAgICB2aWV3LmJpbmQodGhpcy5zb3VyY2UsIHRoaXMuY29udGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLnRhcmdldC4kZmFzdFZpZXc7XG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGEgdmlldyBhbmQgaXQncyBjdXJyZW50bHkgY29tcG9zZWQgaW50b1xuICAgICAgICAvLyB0aGUgRE9NLCB0aGVuIHdlIG5lZWQgdG8gcmVtb3ZlIGl0LlxuICAgICAgICBpZiAodmlldyAhPT0gdm9pZCAwICYmIHZpZXcuaXNDb21wb3NlZCkge1xuICAgICAgICAgICAgdmlldy5pc0NvbXBvc2VkID0gZmFsc2U7XG4gICAgICAgICAgICB2aWV3LnJlbW92ZSgpO1xuICAgICAgICAgICAgaWYgKHZpZXcubmVlZHNCaW5kT25seSkge1xuICAgICAgICAgICAgICAgIHZpZXcubmVlZHNCaW5kT25seSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmlldy51bmJpbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRhcmdldC50ZXh0Q29udGVudCA9IHZhbHVlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHVwZGF0ZVByb3BlcnR5VGFyZ2V0KHZhbHVlKSB7XG4gICAgdGhpcy50YXJnZXRbdGhpcy50YXJnZXROYW1lXSA9IHZhbHVlO1xufVxuZnVuY3Rpb24gdXBkYXRlQ2xhc3NUYXJnZXQodmFsdWUpIHtcbiAgICBjb25zdCBjbGFzc1ZlcnNpb25zID0gdGhpcy5jbGFzc1ZlcnNpb25zIHx8IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgY29uc3QgdGFyZ2V0ID0gdGhpcy50YXJnZXQ7XG4gICAgbGV0IHZlcnNpb24gPSB0aGlzLnZlcnNpb24gfHwgMDtcbiAgICAvLyBBZGQgdGhlIGNsYXNzZXMsIHRyYWNraW5nIHRoZSB2ZXJzaW9uIGF0IHdoaWNoIHRoZXkgd2VyZSBhZGRlZC5cbiAgICBpZiAodmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSB2YWx1ZS5zcGxpdCgvXFxzKy8pO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBuYW1lcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50TmFtZSA9IG5hbWVzW2ldO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnROYW1lID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbGFzc1ZlcnNpb25zW2N1cnJlbnROYW1lXSA9IHZlcnNpb247XG4gICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZChjdXJyZW50TmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5jbGFzc1ZlcnNpb25zID0gY2xhc3NWZXJzaW9ucztcbiAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uICsgMTtcbiAgICAvLyBJZiB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsIHRvIGFkZCBjbGFzc2VzLCB0aGVyZSdzIG5vIG5lZWQgdG8gcmVtb3ZlIG9sZCBvbmVzLlxuICAgIGlmICh2ZXJzaW9uID09PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gUmVtb3ZlIGNsYXNzZXMgZnJvbSB0aGUgcHJldmlvdXMgdmVyc2lvbi5cbiAgICB2ZXJzaW9uIC09IDE7XG4gICAgZm9yIChjb25zdCBuYW1lIGluIGNsYXNzVmVyc2lvbnMpIHtcbiAgICAgICAgaWYgKGNsYXNzVmVyc2lvbnNbbmFtZV0gPT09IHZlcnNpb24pIHtcbiAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBBIGRpcmVjdGl2ZSB0aGF0IGNvbmZpZ3VyZXMgZGF0YSBiaW5kaW5nIHRvIGVsZW1lbnQgY29udGVudCBhbmQgYXR0cmlidXRlcy5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEhUTUxCaW5kaW5nRGlyZWN0aXZlIGV4dGVuZHMgVGFyZ2V0ZWRIVE1MRGlyZWN0aXZlIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEJpbmRpbmdEaXJlY3RpdmUuXG4gICAgICogQHBhcmFtIGJpbmRpbmcgLSBBIGJpbmRpbmcgdGhhdCByZXR1cm5zIHRoZSBkYXRhIHVzZWQgdG8gdXBkYXRlIHRoZSBET00uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYmluZGluZykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmJpbmRpbmcgPSBiaW5kaW5nO1xuICAgICAgICB0aGlzLmJpbmQgPSBub3JtYWxCaW5kO1xuICAgICAgICB0aGlzLnVuYmluZCA9IG5vcm1hbFVuYmluZDtcbiAgICAgICAgdGhpcy51cGRhdGVUYXJnZXQgPSB1cGRhdGVBdHRyaWJ1dGVUYXJnZXQ7XG4gICAgICAgIHRoaXMuaXNCaW5kaW5nVm9sYXRpbGUgPSBPYnNlcnZhYmxlLmlzVm9sYXRpbGVCaW5kaW5nKHRoaXMuYmluZGluZyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMvc2V0cyB0aGUgbmFtZSBvZiB0aGUgYXR0cmlidXRlIG9yIHByb3BlcnR5IHRoYXQgdGhpc1xuICAgICAqIGJpbmRpbmcgaXMgdGFyZ2V0aW5nLlxuICAgICAqL1xuICAgIGdldCB0YXJnZXROYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcmlnaW5hbFRhcmdldE5hbWU7XG4gICAgfVxuICAgIHNldCB0YXJnZXROYW1lKHZhbHVlKSB7XG4gICAgICAgIHRoaXMub3JpZ2luYWxUYXJnZXROYW1lID0gdmFsdWU7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh2YWx1ZVswXSkge1xuICAgICAgICAgICAgY2FzZSBcIjpcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFuZWRUYXJnZXROYW1lID0gdmFsdWUuc3Vic3RyKDEpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGFyZ2V0ID0gdXBkYXRlUHJvcGVydHlUYXJnZXQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xlYW5lZFRhcmdldE5hbWUgPT09IFwiaW5uZXJIVE1MXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmluZGluZyA9IHRoaXMuYmluZGluZztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iaW5kaW5nID0gKHMsIGMpID0+IERPTS5jcmVhdGVIVE1MKGJpbmRpbmcocywgYykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCI/XCI6XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhbmVkVGFyZ2V0TmFtZSA9IHZhbHVlLnN1YnN0cigxKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRhcmdldCA9IHVwZGF0ZUJvb2xlYW5BdHRyaWJ1dGVUYXJnZXQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQFwiOlxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYW5lZFRhcmdldE5hbWUgPSB2YWx1ZS5zdWJzdHIoMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5iaW5kID0gdHJpZ2dlckJpbmQ7XG4gICAgICAgICAgICAgICAgdGhpcy51bmJpbmQgPSB0cmlnZ2VyVW5iaW5kO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFuZWRUYXJnZXROYW1lID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcImNsYXNzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUYXJnZXQgPSB1cGRhdGVDbGFzc1RhcmdldDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFrZXMgdGhpcyBiaW5kaW5nIHRhcmdldCB0aGUgY29udGVudCBvZiBhbiBlbGVtZW50IHJhdGhlciB0aGFuXG4gICAgICogYSBwYXJ0aWN1bGFyIGF0dHJpYnV0ZSBvciBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICB0YXJnZXRBdENvbnRlbnQoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlVGFyZ2V0ID0gdXBkYXRlQ29udGVudFRhcmdldDtcbiAgICAgICAgdGhpcy51bmJpbmQgPSBjb250ZW50VW5iaW5kO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIHRoZSBydW50aW1lIEJpbmRpbmdCZWhhdmlvciBpbnN0YW5jZSBiYXNlZCBvbiB0aGUgY29uZmlndXJhdGlvblxuICAgICAqIGluZm9ybWF0aW9uIHN0b3JlZCBpbiB0aGUgQmluZGluZ0RpcmVjdGl2ZS5cbiAgICAgKiBAcGFyYW0gdGFyZ2V0IC0gVGhlIHRhcmdldCBub2RlIHRoYXQgdGhlIGJpbmRpbmcgYmVoYXZpb3Igc2hvdWxkIGF0dGFjaCB0by5cbiAgICAgKi9cbiAgICBjcmVhdGVCZWhhdmlvcih0YXJnZXQpIHtcbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZSAqL1xuICAgICAgICByZXR1cm4gbmV3IEJpbmRpbmdCZWhhdmlvcih0YXJnZXQsIHRoaXMuYmluZGluZywgdGhpcy5pc0JpbmRpbmdWb2xhdGlsZSwgdGhpcy5iaW5kLCB0aGlzLnVuYmluZCwgdGhpcy51cGRhdGVUYXJnZXQsIHRoaXMuY2xlYW5lZFRhcmdldE5hbWUpO1xuICAgIH1cbn1cbi8qKlxuICogQSBiZWhhdmlvciB0aGF0IHVwZGF0ZXMgY29udGVudCBhbmQgYXR0cmlidXRlcyBiYXNlZCBvbiBhIGNvbmZpZ3VyZWRcbiAqIEJpbmRpbmdEaXJlY3RpdmUuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBCaW5kaW5nQmVoYXZpb3Ige1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgQmluZGluZ0JlaGF2aW9yLlxuICAgICAqIEBwYXJhbSB0YXJnZXQgLSBUaGUgdGFyZ2V0IG9mIHRoZSBkYXRhIHVwZGF0ZXMuXG4gICAgICogQHBhcmFtIGJpbmRpbmcgLSBUaGUgYmluZGluZyB0aGF0IHJldHVybnMgdGhlIGxhdGVzdCB2YWx1ZSBmb3IgYW4gdXBkYXRlLlxuICAgICAqIEBwYXJhbSBpc0JpbmRpbmdWb2xhdGlsZSAtIEluZGljYXRlcyB3aGV0aGVyIHRoZSBiaW5kaW5nIGhhcyB2b2xhdGlsZSBkZXBlbmRlbmNpZXMuXG4gICAgICogQHBhcmFtIGJpbmQgLSBUaGUgb3BlcmF0aW9uIHRvIHBlcmZvcm0gZHVyaW5nIGJpbmRpbmcuXG4gICAgICogQHBhcmFtIHVuYmluZCAtIFRoZSBvcGVyYXRpb24gdG8gcGVyZm9ybSBkdXJpbmcgdW5iaW5kaW5nLlxuICAgICAqIEBwYXJhbSB1cGRhdGVUYXJnZXQgLSBUaGUgb3BlcmF0aW9uIHRvIHBlcmZvcm0gd2hlbiB1cGRhdGluZy5cbiAgICAgKiBAcGFyYW0gdGFyZ2V0TmFtZSAtIFRoZSBuYW1lIG9mIHRoZSB0YXJnZXQgYXR0cmlidXRlIG9yIHByb3BlcnR5IHRvIHVwZGF0ZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0YXJnZXQsIGJpbmRpbmcsIGlzQmluZGluZ1ZvbGF0aWxlLCBiaW5kLCB1bmJpbmQsIHVwZGF0ZVRhcmdldCwgdGFyZ2V0TmFtZSkge1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuc291cmNlID0gbnVsbDtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBudWxsO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuYmluZGluZ09ic2VydmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIHRoaXMuYmluZGluZyA9IGJpbmRpbmc7XG4gICAgICAgIHRoaXMuaXNCaW5kaW5nVm9sYXRpbGUgPSBpc0JpbmRpbmdWb2xhdGlsZTtcbiAgICAgICAgdGhpcy5iaW5kID0gYmluZDtcbiAgICAgICAgdGhpcy51bmJpbmQgPSB1bmJpbmQ7XG4gICAgICAgIHRoaXMudXBkYXRlVGFyZ2V0ID0gdXBkYXRlVGFyZ2V0O1xuICAgICAgICB0aGlzLnRhcmdldE5hbWUgPSB0YXJnZXROYW1lO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgaGFuZGxlQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVRhcmdldCh0aGlzLmJpbmRpbmdPYnNlcnZlci5vYnNlcnZlKHRoaXMuc291cmNlLCB0aGlzLmNvbnRleHQpKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGhhbmRsZUV2ZW50KGV2ZW50KSB7XG4gICAgICAgIEV4ZWN1dGlvbkNvbnRleHQuc2V0RXZlbnQoZXZlbnQpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmJpbmRpbmcodGhpcy5zb3VyY2UsIHRoaXMuY29udGV4dCk7XG4gICAgICAgIEV4ZWN1dGlvbkNvbnRleHQuc2V0RXZlbnQobnVsbCk7XG4gICAgICAgIGlmIChyZXN1bHQgIT09IHRydWUpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBfaW50ZXJwb2xhdGlvbkVuZCwgX2ludGVycG9sYXRpb25TdGFydCwgRE9NIH0gZnJvbSBcIi4uL2RvbS5qc1wiO1xuaW1wb3J0IHsgSFRNTEJpbmRpbmdEaXJlY3RpdmUgfSBmcm9tIFwiLi9iaW5kaW5nLmpzXCI7XG5sZXQgc2hhcmVkQ29udGV4dCA9IG51bGw7XG5jbGFzcyBDb21waWxhdGlvbkNvbnRleHQge1xuICAgIGFkZEZhY3RvcnkoZmFjdG9yeSkge1xuICAgICAgICBmYWN0b3J5LnRhcmdldEluZGV4ID0gdGhpcy50YXJnZXRJbmRleDtcbiAgICAgICAgdGhpcy5iZWhhdmlvckZhY3Rvcmllcy5wdXNoKGZhY3RvcnkpO1xuICAgIH1cbiAgICBjYXB0dXJlQ29udGVudEJpbmRpbmcoZGlyZWN0aXZlKSB7XG4gICAgICAgIGRpcmVjdGl2ZS50YXJnZXRBdENvbnRlbnQoKTtcbiAgICAgICAgdGhpcy5hZGRGYWN0b3J5KGRpcmVjdGl2ZSk7XG4gICAgfVxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLmJlaGF2aW9yRmFjdG9yaWVzID0gW107XG4gICAgICAgIHRoaXMudGFyZ2V0SW5kZXggPSAtMTtcbiAgICB9XG4gICAgcmVsZWFzZSgpIHtcbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzICovXG4gICAgICAgIHNoYXJlZENvbnRleHQgPSB0aGlzO1xuICAgIH1cbiAgICBzdGF0aWMgYm9ycm93KGRpcmVjdGl2ZXMpIHtcbiAgICAgICAgY29uc3Qgc2hhcmVhYmxlID0gc2hhcmVkQ29udGV4dCB8fCBuZXcgQ29tcGlsYXRpb25Db250ZXh0KCk7XG4gICAgICAgIHNoYXJlYWJsZS5kaXJlY3RpdmVzID0gZGlyZWN0aXZlcztcbiAgICAgICAgc2hhcmVhYmxlLnJlc2V0KCk7XG4gICAgICAgIHNoYXJlZENvbnRleHQgPSBudWxsO1xuICAgICAgICByZXR1cm4gc2hhcmVhYmxlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZUFnZ3JlZ2F0ZUJpbmRpbmcocGFydHMpIHtcbiAgICBpZiAocGFydHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiBwYXJ0c1swXTtcbiAgICB9XG4gICAgbGV0IHRhcmdldE5hbWU7XG4gICAgY29uc3QgcGFydENvdW50ID0gcGFydHMubGVuZ3RoO1xuICAgIGNvbnN0IGZpbmFsUGFydHMgPSBwYXJ0cy5tYXAoKHgpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB4ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4geDtcbiAgICAgICAgfVxuICAgICAgICB0YXJnZXROYW1lID0geC50YXJnZXROYW1lIHx8IHRhcmdldE5hbWU7XG4gICAgICAgIHJldHVybiB4LmJpbmRpbmc7XG4gICAgfSk7XG4gICAgY29uc3QgYmluZGluZyA9IChzY29wZSwgY29udGV4dCkgPT4ge1xuICAgICAgICBsZXQgb3V0cHV0ID0gXCJcIjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0Q291bnQ7ICsraSkge1xuICAgICAgICAgICAgb3V0cHV0ICs9IGZpbmFsUGFydHNbaV0oc2NvcGUsIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfTtcbiAgICBjb25zdCBkaXJlY3RpdmUgPSBuZXcgSFRNTEJpbmRpbmdEaXJlY3RpdmUoYmluZGluZyk7XG4gICAgZGlyZWN0aXZlLnRhcmdldE5hbWUgPSB0YXJnZXROYW1lO1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG59XG5jb25zdCBpbnRlcnBvbGF0aW9uRW5kTGVuZ3RoID0gX2ludGVycG9sYXRpb25FbmQubGVuZ3RoO1xuZnVuY3Rpb24gcGFyc2VDb250ZW50KGNvbnRleHQsIHZhbHVlKSB7XG4gICAgY29uc3QgdmFsdWVQYXJ0cyA9IHZhbHVlLnNwbGl0KF9pbnRlcnBvbGF0aW9uU3RhcnQpO1xuICAgIGlmICh2YWx1ZVBhcnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgYmluZGluZ1BhcnRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gdmFsdWVQYXJ0cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSB2YWx1ZVBhcnRzW2ldO1xuICAgICAgICBjb25zdCBpbmRleCA9IGN1cnJlbnQuaW5kZXhPZihfaW50ZXJwb2xhdGlvbkVuZCk7XG4gICAgICAgIGxldCBsaXRlcmFsO1xuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICBsaXRlcmFsID0gY3VycmVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGl2ZUluZGV4ID0gcGFyc2VJbnQoY3VycmVudC5zdWJzdHJpbmcoMCwgaW5kZXgpKTtcbiAgICAgICAgICAgIGJpbmRpbmdQYXJ0cy5wdXNoKGNvbnRleHQuZGlyZWN0aXZlc1tkaXJlY3RpdmVJbmRleF0pO1xuICAgICAgICAgICAgbGl0ZXJhbCA9IGN1cnJlbnQuc3Vic3RyaW5nKGluZGV4ICsgaW50ZXJwb2xhdGlvbkVuZExlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxpdGVyYWwgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIGJpbmRpbmdQYXJ0cy5wdXNoKGxpdGVyYWwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBiaW5kaW5nUGFydHM7XG59XG5mdW5jdGlvbiBjb21waWxlQXR0cmlidXRlcyhjb250ZXh0LCBub2RlLCBpbmNsdWRlQmFzaWNWYWx1ZXMgPSBmYWxzZSkge1xuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBub2RlLmF0dHJpYnV0ZXM7XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gYXR0cmlidXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGNvbnN0IGF0dHIgPSBhdHRyaWJ1dGVzW2ldO1xuICAgICAgICBjb25zdCBhdHRyVmFsdWUgPSBhdHRyLnZhbHVlO1xuICAgICAgICBjb25zdCBwYXJzZVJlc3VsdCA9IHBhcnNlQ29udGVudChjb250ZXh0LCBhdHRyVmFsdWUpO1xuICAgICAgICBsZXQgcmVzdWx0ID0gbnVsbDtcbiAgICAgICAgaWYgKHBhcnNlUmVzdWx0ID09PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoaW5jbHVkZUJhc2ljVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IEhUTUxCaW5kaW5nRGlyZWN0aXZlKCgpID0+IGF0dHJWYWx1ZSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnRhcmdldE5hbWUgPSBhdHRyLm5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSBjcmVhdGVBZ2dyZWdhdGVCaW5kaW5nKHBhcnNlUmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdWx0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZU5vZGUoYXR0cik7XG4gICAgICAgICAgICBpLS07XG4gICAgICAgICAgICBpaS0tO1xuICAgICAgICAgICAgY29udGV4dC5hZGRGYWN0b3J5KHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBjb21waWxlQ29udGVudChjb250ZXh0LCBub2RlLCB3YWxrZXIpIHtcbiAgICBjb25zdCBwYXJzZVJlc3VsdCA9IHBhcnNlQ29udGVudChjb250ZXh0LCBub2RlLnRleHRDb250ZW50KTtcbiAgICBpZiAocGFyc2VSZXN1bHQgIT09IG51bGwpIHtcbiAgICAgICAgbGV0IGxhc3ROb2RlID0gbm9kZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gcGFyc2VSZXN1bHQubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFBhcnQgPSBwYXJzZVJlc3VsdFtpXTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnROb2RlID0gaSA9PT0gMFxuICAgICAgICAgICAgICAgID8gbm9kZVxuICAgICAgICAgICAgICAgIDogbGFzdE5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIiksIGxhc3ROb2RlLm5leHRTaWJsaW5nKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY3VycmVudFBhcnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZS50ZXh0Q29udGVudCA9IGN1cnJlbnRQYXJ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VycmVudE5vZGUudGV4dENvbnRlbnQgPSBcIiBcIjtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmNhcHR1cmVDb250ZW50QmluZGluZyhjdXJyZW50UGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsYXN0Tm9kZSA9IGN1cnJlbnROb2RlO1xuICAgICAgICAgICAgY29udGV4dC50YXJnZXRJbmRleCsrO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnROb2RlICE9PSBub2RlKSB7XG4gICAgICAgICAgICAgICAgd2Fsa2VyLm5leHROb2RlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC50YXJnZXRJbmRleC0tO1xuICAgIH1cbn1cbi8qKlxuICogQ29tcGlsZXMgYSB0ZW1wbGF0ZSBhbmQgYXNzb2NpYXRlZCBkaXJlY3RpdmVzIGludG8gYSByYXcgY29tcGlsYXRpb25cbiAqIHJlc3VsdCB3aGljaCBpbmNsdWRlIGEgY2xvbmVhYmxlIERvY3VtZW50RnJhZ21lbnQgYW5kIGZhY3RvcmllcyBjYXBhYmxlXG4gKiBvZiBhdHRhY2hpbmcgcnVudGltZSBiZWhhdmlvciB0byBub2RlcyB3aXRoaW4gdGhlIGZyYWdtZW50LlxuICogQHBhcmFtIHRlbXBsYXRlIC0gVGhlIHRlbXBsYXRlIHRvIGNvbXBpbGUuXG4gKiBAcGFyYW0gZGlyZWN0aXZlcyAtIFRoZSBkaXJlY3RpdmVzIHJlZmVyZW5jZWQgYnkgdGhlIHRlbXBsYXRlLlxuICogQHJlbWFya3NcbiAqIFRoZSB0ZW1wbGF0ZSB0aGF0IGlzIHByb3ZpZGVkIGZvciBjb21waWxhdGlvbiBpcyBhbHRlcmVkIGluLXBsYWNlXG4gKiBhbmQgY2Fubm90IGJlIGNvbXBpbGVkIGFnYWluLiBJZiB0aGUgb3JpZ2luYWwgdGVtcGxhdGUgbXVzdCBiZSBwcmVzZXJ2ZWQsXG4gKiBpdCBpcyByZWNvbW1lbmRlZCB0aGF0IHlvdSBjbG9uZSB0aGUgb3JpZ2luYWwgYW5kIHBhc3MgdGhlIGNsb25lIHRvIHRoaXMgQVBJLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcGlsZVRlbXBsYXRlKHRlbXBsYXRlLCBkaXJlY3RpdmVzKSB7XG4gICAgY29uc3QgZnJhZ21lbnQgPSB0ZW1wbGF0ZS5jb250ZW50O1xuICAgIC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTExMTE4NjRcbiAgICBkb2N1bWVudC5hZG9wdE5vZGUoZnJhZ21lbnQpO1xuICAgIGNvbnN0IGNvbnRleHQgPSBDb21waWxhdGlvbkNvbnRleHQuYm9ycm93KGRpcmVjdGl2ZXMpO1xuICAgIGNvbXBpbGVBdHRyaWJ1dGVzKGNvbnRleHQsIHRlbXBsYXRlLCB0cnVlKTtcbiAgICBjb25zdCBob3N0QmVoYXZpb3JGYWN0b3JpZXMgPSBjb250ZXh0LmJlaGF2aW9yRmFjdG9yaWVzO1xuICAgIGNvbnRleHQucmVzZXQoKTtcbiAgICBjb25zdCB3YWxrZXIgPSBET00uY3JlYXRlVGVtcGxhdGVXYWxrZXIoZnJhZ21lbnQpO1xuICAgIGxldCBub2RlO1xuICAgIHdoaWxlICgobm9kZSA9IHdhbGtlci5uZXh0Tm9kZSgpKSkge1xuICAgICAgICBjb250ZXh0LnRhcmdldEluZGV4Kys7XG4gICAgICAgIHN3aXRjaCAobm9kZS5ub2RlVHlwZSkge1xuICAgICAgICAgICAgY2FzZSAxOiAvLyBlbGVtZW50IG5vZGVcbiAgICAgICAgICAgICAgICBjb21waWxlQXR0cmlidXRlcyhjb250ZXh0LCBub2RlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzogLy8gdGV4dCBub2RlXG4gICAgICAgICAgICAgICAgY29tcGlsZUNvbnRlbnQoY29udGV4dCwgbm9kZSwgd2Fsa2VyKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgODogLy8gY29tbWVudFxuICAgICAgICAgICAgICAgIGlmIChET00uaXNNYXJrZXIobm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5hZGRGYWN0b3J5KGRpcmVjdGl2ZXNbRE9NLmV4dHJhY3REaXJlY3RpdmVJbmRleEZyb21NYXJrZXIobm9kZSldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHRhcmdldE9mZnNldCA9IDA7XG4gICAgaWYgKFxuICAgIC8vIElmIHRoZSBmaXJzdCBub2RlIGluIGEgZnJhZ21lbnQgaXMgYSBtYXJrZXIsIHRoYXQgbWVhbnMgaXQncyBhbiB1bnN0YWJsZSBmaXJzdCBub2RlLFxuICAgIC8vIGJlY2F1c2Ugc29tZXRoaW5nIGxpa2UgYSB3aGVuLCByZXBlYXQsIGV0Yy4gY291bGQgYWRkIG5vZGVzIGJlZm9yZSB0aGUgbWFya2VyLlxuICAgIC8vIFRvIG1pdGlnYXRlIHRoaXMsIHdlIGluc2VydCBhIHN0YWJsZSBmaXJzdCBub2RlLiBIb3dldmVyLCBpZiB3ZSBpbnNlcnQgYSBub2RlLFxuICAgIC8vIHRoYXQgd2lsbCBhbHRlciB0aGUgcmVzdWx0IG9mIHRoZSBUcmVlV2Fsa2VyLiBTbywgd2UgYWxzbyBuZWVkIHRvIG9mZnNldCB0aGUgdGFyZ2V0IGluZGV4LlxuICAgIERPTS5pc01hcmtlcihmcmFnbWVudC5maXJzdENoaWxkKSB8fFxuICAgICAgICAvLyBPciBpZiB0aGVyZSBpcyBvbmx5IG9uZSBub2RlIGFuZCBhIGRpcmVjdGl2ZSwgaXQgbWVhbnMgdGhlIHRlbXBsYXRlJ3MgY29udGVudFxuICAgICAgICAvLyBpcyAqb25seSogdGhlIGRpcmVjdGl2ZS4gSW4gdGhhdCBjYXNlLCBIVE1MVmlldy5kaXNwb3NlKCkgbWlzc2VzIGFueSBub2RlcyBpbnNlcnRlZCBieVxuICAgICAgICAvLyB0aGUgZGlyZWN0aXZlLiBJbnNlcnRpbmcgYSBuZXcgbm9kZSBlbnN1cmVzIHByb3BlciBkaXNwb3NhbCBvZiBub2RlcyBhZGRlZCBieSB0aGUgZGlyZWN0aXZlLlxuICAgICAgICAoZnJhZ21lbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiYgZGlyZWN0aXZlcy5sZW5ndGgpKSB7XG4gICAgICAgIGZyYWdtZW50Lmluc2VydEJlZm9yZShkb2N1bWVudC5jcmVhdGVDb21tZW50KFwiXCIpLCBmcmFnbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgdGFyZ2V0T2Zmc2V0ID0gLTE7XG4gICAgfVxuICAgIGNvbnN0IHZpZXdCZWhhdmlvckZhY3RvcmllcyA9IGNvbnRleHQuYmVoYXZpb3JGYWN0b3JpZXM7XG4gICAgY29udGV4dC5yZWxlYXNlKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZnJhZ21lbnQsXG4gICAgICAgIHZpZXdCZWhhdmlvckZhY3RvcmllcyxcbiAgICAgICAgaG9zdEJlaGF2aW9yRmFjdG9yaWVzLFxuICAgICAgICB0YXJnZXRPZmZzZXQsXG4gICAgfTtcbn1cbiIsIi8vIEEgc2luZ2xldG9uIFJhbmdlIGluc3RhbmNlIHVzZWQgdG8gZWZmaWNpZW50bHkgcmVtb3ZlIHJhbmdlcyBvZiBET00gbm9kZXMuXG4vLyBTZWUgdGhlIGltcGxlbWVudGF0aW9uIG9mIEhUTUxWaWV3IGJlbG93IGZvciBmdXJ0aGVyIGRldGFpbHMuXG5jb25zdCByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4vKipcbiAqIFRoZSBzdGFuZGFyZCBWaWV3IGltcGxlbWVudGF0aW9uLCB3aGljaCBhbHNvIGltcGxlbWVudHMgRWxlbWVudFZpZXcgYW5kIFN5bnRoZXRpY1ZpZXcuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBIVE1MVmlldyB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhbiBpbnN0YW5jZSBvZiBIVE1MVmlldy5cbiAgICAgKiBAcGFyYW0gZnJhZ21lbnQgLSBUaGUgaHRtbCBmcmFnbWVudCB0aGF0IGNvbnRhaW5zIHRoZSBub2RlcyBmb3IgdGhpcyB2aWV3LlxuICAgICAqIEBwYXJhbSBiZWhhdmlvcnMgLSBUaGUgYmVoYXZpb3JzIHRvIGJlIGFwcGxpZWQgdG8gdGhpcyB2aWV3LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGZyYWdtZW50LCBiZWhhdmlvcnMpIHtcbiAgICAgICAgdGhpcy5mcmFnbWVudCA9IGZyYWdtZW50O1xuICAgICAgICB0aGlzLmJlaGF2aW9ycyA9IGJlaGF2aW9ycztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBkYXRhIHRoYXQgdGhlIHZpZXcgaXMgYm91bmQgdG8uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNvdXJjZSA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZXhlY3V0aW9uIGNvbnRleHQgdGhlIHZpZXcgaXMgcnVubmluZyB3aXRoaW4uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBudWxsO1xuICAgICAgICB0aGlzLmZpcnN0Q2hpbGQgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuICAgICAgICB0aGlzLmxhc3RDaGlsZCA9IGZyYWdtZW50Lmxhc3RDaGlsZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwZW5kcyB0aGUgdmlldydzIERPTSBub2RlcyB0byB0aGUgcmVmZXJlbmNlZCBub2RlLlxuICAgICAqIEBwYXJhbSBub2RlIC0gVGhlIHBhcmVudCBub2RlIHRvIGFwcGVuZCB0aGUgdmlldydzIERPTSBub2RlcyB0by5cbiAgICAgKi9cbiAgICBhcHBlbmRUbyhub2RlKSB7XG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy5mcmFnbWVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluc2VydHMgdGhlIHZpZXcncyBET00gbm9kZXMgYmVmb3JlIHRoZSByZWZlcmVuY2VkIG5vZGUuXG4gICAgICogQHBhcmFtIG5vZGUgLSBUaGUgbm9kZSB0byBpbnNlcnQgdGhlIHZpZXcncyBET00gYmVmb3JlLlxuICAgICAqL1xuICAgIGluc2VydEJlZm9yZShub2RlKSB7XG4gICAgICAgIGlmICh0aGlzLmZyYWdtZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgICAgICAgbm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmZyYWdtZW50LCBub2RlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IHRoaXMubGFzdENoaWxkO1xuICAgICAgICAgICAgaWYgKG5vZGUucHJldmlvdXNTaWJsaW5nID09PSBlbmQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3QgcGFyZW50Tm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5maXJzdENoaWxkO1xuICAgICAgICAgICAgbGV0IG5leHQ7XG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudCAhPT0gZW5kKSB7XG4gICAgICAgICAgICAgICAgbmV4dCA9IGN1cnJlbnQubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgcGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY3VycmVudCwgbm9kZSk7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IG5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnROb2RlLmluc2VydEJlZm9yZShlbmQsIG5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHZpZXcncyBET00gbm9kZXMuXG4gICAgICogVGhlIG5vZGVzIGFyZSBub3QgZGlzcG9zZWQgYW5kIHRoZSB2aWV3IGNhbiBsYXRlciBiZSByZS1pbnNlcnRlZC5cbiAgICAgKi9cbiAgICByZW1vdmUoKSB7XG4gICAgICAgIGNvbnN0IGZyYWdtZW50ID0gdGhpcy5mcmFnbWVudDtcbiAgICAgICAgY29uc3QgZW5kID0gdGhpcy5sYXN0Q2hpbGQ7XG4gICAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5maXJzdENoaWxkO1xuICAgICAgICBsZXQgbmV4dDtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT09IGVuZCkge1xuICAgICAgICAgICAgbmV4dCA9IGN1cnJlbnQubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChjdXJyZW50KTtcbiAgICAgICAgICAgIGN1cnJlbnQgPSBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGVuZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHZpZXcgYW5kIHVuYmluZHMgaXRzIGJlaGF2aW9ycywgZGlzcG9zaW5nIG9mIERPTSBub2RlcyBhZnRlcndhcmQuXG4gICAgICogT25jZSBhIHZpZXcgaGFzIGJlZW4gZGlzcG9zZWQsIGl0IGNhbm5vdCBiZSBpbnNlcnRlZCBvciBib3VuZCBhZ2Fpbi5cbiAgICAgKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmZpcnN0Q2hpbGQucGFyZW50Tm9kZTtcbiAgICAgICAgY29uc3QgZW5kID0gdGhpcy5sYXN0Q2hpbGQ7XG4gICAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5maXJzdENoaWxkO1xuICAgICAgICBsZXQgbmV4dDtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT09IGVuZCkge1xuICAgICAgICAgICAgbmV4dCA9IGN1cnJlbnQubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoY3VycmVudCk7XG4gICAgICAgICAgICBjdXJyZW50ID0gbmV4dDtcbiAgICAgICAgfVxuICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoZW5kKTtcbiAgICAgICAgY29uc3QgYmVoYXZpb3JzID0gdGhpcy5iZWhhdmlvcnM7XG4gICAgICAgIGNvbnN0IG9sZFNvdXJjZSA9IHRoaXMuc291cmNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBiZWhhdmlvcnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgYmVoYXZpb3JzW2ldLnVuYmluZChvbGRTb3VyY2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJpbmRzIGEgdmlldydzIGJlaGF2aW9ycyB0byBpdHMgYmluZGluZyBzb3VyY2UuXG4gICAgICogQHBhcmFtIHNvdXJjZSAtIFRoZSBiaW5kaW5nIHNvdXJjZSBmb3IgdGhlIHZpZXcncyBiaW5kaW5nIGJlaGF2aW9ycy5cbiAgICAgKiBAcGFyYW0gY29udGV4dCAtIFRoZSBleGVjdXRpb24gY29udGV4dCB0byBydW4gdGhlIGJlaGF2aW9ycyB3aXRoaW4uXG4gICAgICovXG4gICAgYmluZChzb3VyY2UsIGNvbnRleHQpIHtcbiAgICAgICAgY29uc3QgYmVoYXZpb3JzID0gdGhpcy5iZWhhdmlvcnM7XG4gICAgICAgIGlmICh0aGlzLnNvdXJjZSA9PT0gc291cmNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5zb3VyY2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IG9sZFNvdXJjZSA9IHRoaXMuc291cmNlO1xuICAgICAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gYmVoYXZpb3JzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gYmVoYXZpb3JzW2ldO1xuICAgICAgICAgICAgICAgIGN1cnJlbnQudW5iaW5kKG9sZFNvdXJjZSk7XG4gICAgICAgICAgICAgICAgY3VycmVudC5iaW5kKHNvdXJjZSwgY29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBiZWhhdmlvcnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGJlaGF2aW9yc1tpXS5iaW5kKHNvdXJjZSwgY29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVW5iaW5kcyBhIHZpZXcncyBiZWhhdmlvcnMgZnJvbSBpdHMgYmluZGluZyBzb3VyY2UuXG4gICAgICovXG4gICAgdW5iaW5kKCkge1xuICAgICAgICBpZiAodGhpcy5zb3VyY2UgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBiZWhhdmlvcnMgPSB0aGlzLmJlaGF2aW9ycztcbiAgICAgICAgY29uc3Qgb2xkU291cmNlID0gdGhpcy5zb3VyY2U7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGJlaGF2aW9ycy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBiZWhhdmlvcnNbaV0udW5iaW5kKG9sZFNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zb3VyY2UgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFZmZpY2llbnRseSBkaXNwb3NlcyBvZiBhIGNvbnRpZ3VvdXMgcmFuZ2Ugb2Ygc3ludGhldGljIHZpZXcgaW5zdGFuY2VzLlxuICAgICAqIEBwYXJhbSB2aWV3cyAtIEEgY29udGlndW91cyByYW5nZSBvZiB2aWV3cyB0byBiZSBkaXNwb3NlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZGlzcG9zZUNvbnRpZ3VvdXNCYXRjaCh2aWV3cykge1xuICAgICAgICBpZiAodmlld3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmFuZ2Uuc2V0U3RhcnRCZWZvcmUodmlld3NbMF0uZmlyc3RDaGlsZCk7XG4gICAgICAgIHJhbmdlLnNldEVuZEFmdGVyKHZpZXdzW3ZpZXdzLmxlbmd0aCAtIDFdLmxhc3RDaGlsZCk7XG4gICAgICAgIHJhbmdlLmRlbGV0ZUNvbnRlbnRzKCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHZpZXdzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSB2aWV3c1tpXTtcbiAgICAgICAgICAgIGNvbnN0IGJlaGF2aW9ycyA9IHZpZXcuYmVoYXZpb3JzO1xuICAgICAgICAgICAgY29uc3Qgb2xkU291cmNlID0gdmlldy5zb3VyY2U7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgamogPSBiZWhhdmlvcnMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgICAgICAgIGJlaGF2aW9yc1tqXS51bmJpbmQob2xkU291cmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IERPTSB9IGZyb20gXCIuLi9kb20uanNcIjtcbmltcG9ydCB7IGRlZmF1bHRFeGVjdXRpb25Db250ZXh0IH0gZnJvbSBcIi4uL29ic2VydmF0aW9uL29ic2VydmFibGUuanNcIjtcbmltcG9ydCB7IGNvbXBpbGVUZW1wbGF0ZSB9IGZyb20gXCIuL2NvbXBpbGVyLmpzXCI7XG5pbXBvcnQgeyBIVE1MVmlldyB9IGZyb20gXCIuL3ZpZXcuanNcIjtcbmltcG9ydCB7IEhUTUxEaXJlY3RpdmUsIFRhcmdldGVkSFRNTERpcmVjdGl2ZSwgfSBmcm9tIFwiLi9odG1sLWRpcmVjdGl2ZS5qc1wiO1xuaW1wb3J0IHsgSFRNTEJpbmRpbmdEaXJlY3RpdmUgfSBmcm9tIFwiLi9iaW5kaW5nLmpzXCI7XG4vKipcbiAqIEEgdGVtcGxhdGUgY2FwYWJsZSBvZiBjcmVhdGluZyBIVE1MVmlldyBpbnN0YW5jZXMgb3IgcmVuZGVyaW5nIGRpcmVjdGx5IHRvIERPTS5cbiAqIEBwdWJsaWNcbiAqL1xuLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycyAqL1xuZXhwb3J0IGNsYXNzIFZpZXdUZW1wbGF0ZSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBWaWV3VGVtcGxhdGUuXG4gICAgICogQHBhcmFtIGh0bWwgLSBUaGUgaHRtbCByZXByZXNlbnRpbmcgd2hhdCB0aGlzIHRlbXBsYXRlIHdpbGwgaW5zdGFudGlhdGUsIGluY2x1ZGluZyBwbGFjZWhvbGRlcnMgZm9yIGRpcmVjdGl2ZXMuXG4gICAgICogQHBhcmFtIGRpcmVjdGl2ZXMgLSBUaGUgZGlyZWN0aXZlcyB0aGF0IHdpbGwgYmUgY29ubmVjdGVkIHRvIHBsYWNlaG9sZGVycyBpbiB0aGUgaHRtbC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihodG1sLCBkaXJlY3RpdmVzKSB7XG4gICAgICAgIHRoaXMuYmVoYXZpb3JDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuaGFzSG9zdEJlaGF2aW9ycyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmZyYWdtZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXJnZXRPZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLnZpZXdCZWhhdmlvckZhY3RvcmllcyA9IG51bGw7XG4gICAgICAgIHRoaXMuaG9zdEJlaGF2aW9yRmFjdG9yaWVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5odG1sID0gaHRtbDtcbiAgICAgICAgdGhpcy5kaXJlY3RpdmVzID0gZGlyZWN0aXZlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBIVE1MVmlldyBpbnN0YW5jZSBiYXNlZCBvbiB0aGlzIHRlbXBsYXRlIGRlZmluaXRpb24uXG4gICAgICogQHBhcmFtIGhvc3RCaW5kaW5nVGFyZ2V0IC0gVGhlIGVsZW1lbnQgdGhhdCBob3N0IGJlaGF2aW9ycyB3aWxsIGJlIGJvdW5kIHRvLlxuICAgICAqL1xuICAgIGNyZWF0ZShob3N0QmluZGluZ1RhcmdldCkge1xuICAgICAgICBpZiAodGhpcy5mcmFnbWVudCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbGV0IHRlbXBsYXRlO1xuICAgICAgICAgICAgY29uc3QgaHRtbCA9IHRoaXMuaHRtbDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaHRtbCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IERPTS5jcmVhdGVIVE1MKGh0bWwpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZlYyA9IHRlbXBsYXRlLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICAgICAgaWYgKGZlYyAhPT0gbnVsbCAmJiBmZWMudGFnTmFtZSA9PT0gXCJURU1QTEFURVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlID0gZmVjO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlID0gaHRtbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNvbXBpbGVUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcy5kaXJlY3RpdmVzKTtcbiAgICAgICAgICAgIHRoaXMuZnJhZ21lbnQgPSByZXN1bHQuZnJhZ21lbnQ7XG4gICAgICAgICAgICB0aGlzLnZpZXdCZWhhdmlvckZhY3RvcmllcyA9IHJlc3VsdC52aWV3QmVoYXZpb3JGYWN0b3JpZXM7XG4gICAgICAgICAgICB0aGlzLmhvc3RCZWhhdmlvckZhY3RvcmllcyA9IHJlc3VsdC5ob3N0QmVoYXZpb3JGYWN0b3JpZXM7XG4gICAgICAgICAgICB0aGlzLnRhcmdldE9mZnNldCA9IHJlc3VsdC50YXJnZXRPZmZzZXQ7XG4gICAgICAgICAgICB0aGlzLmJlaGF2aW9yQ291bnQgPVxuICAgICAgICAgICAgICAgIHRoaXMudmlld0JlaGF2aW9yRmFjdG9yaWVzLmxlbmd0aCArIHRoaXMuaG9zdEJlaGF2aW9yRmFjdG9yaWVzLmxlbmd0aDtcbiAgICAgICAgICAgIHRoaXMuaGFzSG9zdEJlaGF2aW9ycyA9IHRoaXMuaG9zdEJlaGF2aW9yRmFjdG9yaWVzLmxlbmd0aCA+IDA7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZnJhZ21lbnQgPSB0aGlzLmZyYWdtZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgY29uc3Qgdmlld0ZhY3RvcmllcyA9IHRoaXMudmlld0JlaGF2aW9yRmFjdG9yaWVzO1xuICAgICAgICBjb25zdCBiZWhhdmlvcnMgPSBuZXcgQXJyYXkodGhpcy5iZWhhdmlvckNvdW50KTtcbiAgICAgICAgY29uc3Qgd2Fsa2VyID0gRE9NLmNyZWF0ZVRlbXBsYXRlV2Fsa2VyKGZyYWdtZW50KTtcbiAgICAgICAgbGV0IGJlaGF2aW9ySW5kZXggPSAwO1xuICAgICAgICBsZXQgdGFyZ2V0SW5kZXggPSB0aGlzLnRhcmdldE9mZnNldDtcbiAgICAgICAgbGV0IG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKTtcbiAgICAgICAgZm9yIChsZXQgaWkgPSB2aWV3RmFjdG9yaWVzLmxlbmd0aDsgYmVoYXZpb3JJbmRleCA8IGlpOyArK2JlaGF2aW9ySW5kZXgpIHtcbiAgICAgICAgICAgIGNvbnN0IGZhY3RvcnkgPSB2aWV3RmFjdG9yaWVzW2JlaGF2aW9ySW5kZXhdO1xuICAgICAgICAgICAgY29uc3QgZmFjdG9yeUluZGV4ID0gZmFjdG9yeS50YXJnZXRJbmRleDtcbiAgICAgICAgICAgIHdoaWxlIChub2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZGV4ID09PSBmYWN0b3J5SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgYmVoYXZpb3JzW2JlaGF2aW9ySW5kZXhdID0gZmFjdG9yeS5jcmVhdGVCZWhhdmlvcihub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBub2RlID0gd2Fsa2VyLm5leHROb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEluZGV4Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhhc0hvc3RCZWhhdmlvcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGhvc3RGYWN0b3JpZXMgPSB0aGlzLmhvc3RCZWhhdmlvckZhY3RvcmllcztcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGhvc3RGYWN0b3JpZXMubGVuZ3RoOyBpIDwgaWk7ICsraSwgKytiZWhhdmlvckluZGV4KSB7XG4gICAgICAgICAgICAgICAgYmVoYXZpb3JzW2JlaGF2aW9ySW5kZXhdID0gaG9zdEZhY3Rvcmllc1tpXS5jcmVhdGVCZWhhdmlvcihob3N0QmluZGluZ1RhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBIVE1MVmlldyhmcmFnbWVudCwgYmVoYXZpb3JzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBIVE1MVmlldyBmcm9tIHRoaXMgdGVtcGxhdGUsIGJpbmRzIGl0IHRvIHRoZSBzb3VyY2UsIGFuZCB0aGVuIGFwcGVuZHMgaXQgdG8gdGhlIGhvc3QuXG4gICAgICogQHBhcmFtIHNvdXJjZSAtIFRoZSBkYXRhIHNvdXJjZSB0byBiaW5kIHRoZSB0ZW1wbGF0ZSB0by5cbiAgICAgKiBAcGFyYW0gaG9zdCAtIFRoZSBFbGVtZW50IHdoZXJlIHRoZSB0ZW1wbGF0ZSB3aWxsIGJlIHJlbmRlcmVkLlxuICAgICAqIEBwYXJhbSBob3N0QmluZGluZ1RhcmdldCAtIEFuIEhUTUwgZWxlbWVudCB0byB0YXJnZXQgdGhlIGhvc3QgYmluZGluZ3MgYXQgaWYgZGlmZmVyZW50IGZyb20gdGhlXG4gICAgICogaG9zdCB0aGF0IHRoZSB0ZW1wbGF0ZSBpcyBiZWluZyBhdHRhY2hlZCB0by5cbiAgICAgKi9cbiAgICByZW5kZXIoc291cmNlLCBob3N0LCBob3N0QmluZGluZ1RhcmdldCkge1xuICAgICAgICBpZiAodHlwZW9mIGhvc3QgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGhvc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChob3N0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaG9zdEJpbmRpbmdUYXJnZXQgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgaG9zdEJpbmRpbmdUYXJnZXQgPSBob3N0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmNyZWF0ZShob3N0QmluZGluZ1RhcmdldCk7XG4gICAgICAgIHZpZXcuYmluZChzb3VyY2UsIGRlZmF1bHRFeGVjdXRpb25Db250ZXh0KTtcbiAgICAgICAgdmlldy5hcHBlbmRUbyhob3N0KTtcbiAgICAgICAgcmV0dXJuIHZpZXc7XG4gICAgfVxufVxuLy8gTXVjaCB0aGFua3MgdG8gTGl0SFRNTCBmb3Igd29ya2luZyB0aGlzIG91dCFcbmNvbnN0IGxhc3RBdHRyaWJ1dGVOYW1lUmVnZXggPSBcbi8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4ICovXG4vKFsgXFx4MDlcXHgwYVxceDBjXFx4MGRdKShbXlxcMC1cXHgxRlxceDdGLVxceDlGIFwiJz49L10rKShbIFxceDA5XFx4MGFcXHgwY1xceDBkXSo9WyBcXHgwOVxceDBhXFx4MGNcXHgwZF0qKD86W14gXFx4MDlcXHgwYVxceDBjXFx4MGRcIidgPD49XSp8XCJbXlwiXSp8J1teJ10qKSkkLztcbi8qKlxuICogVHJhbnNmb3JtcyBhIHRlbXBsYXRlIGxpdGVyYWwgc3RyaW5nIGludG8gYSByZW5kZXJhYmxlIFZpZXdUZW1wbGF0ZS5cbiAqIEBwYXJhbSBzdHJpbmdzIC0gVGhlIHN0cmluZyBmcmFnbWVudHMgdGhhdCBhcmUgaW50ZXJwb2xhdGVkIHdpdGggdGhlIHZhbHVlcy5cbiAqIEBwYXJhbSB2YWx1ZXMgLSBUaGUgdmFsdWVzIHRoYXQgYXJlIGludGVycG9sYXRlZCB3aXRoIHRoZSBzdHJpbmcgZnJhZ21lbnRzLlxuICogQHJlbWFya3NcbiAqIFRoZSBodG1sIGhlbHBlciBzdXBwb3J0cyBpbnRlcnBvbGF0aW9uIG9mIHN0cmluZ3MsIG51bWJlcnMsIGJpbmRpbmcgZXhwcmVzc2lvbnMsXG4gKiBvdGhlciB0ZW1wbGF0ZSBpbnN0YW5jZXMsIGFuZCBEaXJlY3RpdmUgaW5zdGFuY2VzLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gaHRtbChzdHJpbmdzLCAuLi52YWx1ZXMpIHtcbiAgICBjb25zdCBkaXJlY3RpdmVzID0gW107XG4gICAgbGV0IGh0bWwgPSBcIlwiO1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHN0cmluZ3MubGVuZ3RoIC0gMTsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFN0cmluZyA9IHN0cmluZ3NbaV07XG4gICAgICAgIGxldCB2YWx1ZSA9IHZhbHVlc1tpXTtcbiAgICAgICAgaHRtbCArPSBjdXJyZW50U3RyaW5nO1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBWaWV3VGVtcGxhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlID0gdmFsdWU7XG4gICAgICAgICAgICB2YWx1ZSA9ICgpID0+IHRlbXBsYXRlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdmFsdWUgPSBuZXcgSFRNTEJpbmRpbmdEaXJlY3RpdmUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFRhcmdldGVkSFRNTERpcmVjdGl2ZSkge1xuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBsYXN0QXR0cmlidXRlTmFtZVJlZ2V4LmV4ZWMoY3VycmVudFN0cmluZyk7XG4gICAgICAgICAgICBpZiAobWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZS50YXJnZXROYW1lID0gbWF0Y2hbMl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSFRNTERpcmVjdGl2ZSkge1xuICAgICAgICAgICAgLy8gU2luY2Ugbm90IGFsbCB2YWx1ZXMgYXJlIGRpcmVjdGl2ZXMsIHdlIGNhbid0IHVzZSBpXG4gICAgICAgICAgICAvLyBhcyB0aGUgaW5kZXggZm9yIHRoZSBwbGFjZWhvbGRlci4gSW5zdGVhZCwgd2UgbmVlZCB0b1xuICAgICAgICAgICAgLy8gdXNlIGRpcmVjdGl2ZXMubGVuZ3RoIHRvIGdldCB0aGUgbmV4dCBpbmRleC5cbiAgICAgICAgICAgIGh0bWwgKz0gdmFsdWUuY3JlYXRlUGxhY2Vob2xkZXIoZGlyZWN0aXZlcy5sZW5ndGgpO1xuICAgICAgICAgICAgZGlyZWN0aXZlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGh0bWwgKz0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaHRtbCArPSBzdHJpbmdzW3N0cmluZ3MubGVuZ3RoIC0gMV07XG4gICAgcmV0dXJuIG5ldyBWaWV3VGVtcGxhdGUoaHRtbCwgZGlyZWN0aXZlcyk7XG59XG4iLCJpbXBvcnQgeyBET00gfSBmcm9tIFwiLi4vZG9tLmpzXCI7XG4vKipcbiAqIFJlcHJlc2VudHMgc3R5bGVzIHRoYXQgY2FuIGJlIGFwcGxpZWQgdG8gYSBjdXN0b20gZWxlbWVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEVsZW1lbnRTdHlsZXMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnRhcmdldHMgPSBuZXcgV2Vha1NldCgpO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgYWRkU3R5bGVzVG8odGFyZ2V0KSB7XG4gICAgICAgIHRoaXMudGFyZ2V0cy5hZGQodGFyZ2V0KTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIHJlbW92ZVN0eWxlc0Zyb20odGFyZ2V0KSB7XG4gICAgICAgIHRoaXMudGFyZ2V0cy5kZWxldGUodGFyZ2V0KTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGlzQXR0YWNoZWRUbyh0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0cy5oYXModGFyZ2V0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXNzb2NpYXRlcyBiZWhhdmlvcnMgd2l0aCB0aGlzIHNldCBvZiBzdHlsZXMuXG4gICAgICogQHBhcmFtIGJlaGF2aW9ycyAtIFRoZSBiZWhhdmlvcnMgdG8gYXNzb2NpYXRlLlxuICAgICAqL1xuICAgIHdpdGhCZWhhdmlvcnMoLi4uYmVoYXZpb3JzKSB7XG4gICAgICAgIHRoaXMuYmVoYXZpb3JzID1cbiAgICAgICAgICAgIHRoaXMuYmVoYXZpb3JzID09PSBudWxsID8gYmVoYXZpb3JzIDogdGhpcy5iZWhhdmlvcnMuY29uY2F0KGJlaGF2aW9ycyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlIEVsZW1lbnRTdHlsZXMgZnJvbSBDb21wb3NhYmxlU3R5bGVzLlxuICovXG5FbGVtZW50U3R5bGVzLmNyZWF0ZSA9ICgoKSA9PiB7XG4gICAgaWYgKERPTS5zdXBwb3J0c0Fkb3B0ZWRTdHlsZVNoZWV0cykge1xuICAgICAgICBjb25zdCBzdHlsZVNoZWV0Q2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgICAgIHJldHVybiAoc3R5bGVzKSA9PiBcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICBuZXcgQWRvcHRlZFN0eWxlU2hlZXRzU3R5bGVzKHN0eWxlcywgc3R5bGVTaGVldENhY2hlKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgIHJldHVybiAoc3R5bGVzKSA9PiBuZXcgU3R5bGVFbGVtZW50U3R5bGVzKHN0eWxlcyk7XG59KSgpO1xuZnVuY3Rpb24gcmVkdWNlU3R5bGVzKHN0eWxlcykge1xuICAgIHJldHVybiBzdHlsZXNcbiAgICAgICAgLm1hcCgoeCkgPT4geCBpbnN0YW5jZW9mIEVsZW1lbnRTdHlsZXMgPyByZWR1Y2VTdHlsZXMoeC5zdHlsZXMpIDogW3hdKVxuICAgICAgICAucmVkdWNlKChwcmV2LCBjdXJyKSA9PiBwcmV2LmNvbmNhdChjdXJyKSwgW10pO1xufVxuZnVuY3Rpb24gcmVkdWNlQmVoYXZpb3JzKHN0eWxlcykge1xuICAgIHJldHVybiBzdHlsZXNcbiAgICAgICAgLm1hcCgoeCkgPT4gKHggaW5zdGFuY2VvZiBFbGVtZW50U3R5bGVzID8geC5iZWhhdmlvcnMgOiBudWxsKSlcbiAgICAgICAgLnJlZHVjZSgocHJldiwgY3VycikgPT4ge1xuICAgICAgICBpZiAoY3VyciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZXYgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHByZXYgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJldi5jb25jYXQoY3Vycik7XG4gICAgfSwgbnVsbCk7XG59XG4vKipcbiAqIEEgU3ltYm9sIHRoYXQgY2FuIGJlIGFkZGVkIHRvIGEgQ1NTU3R5bGVTaGVldCB0byBjYXVzZSBpdCB0byBiZSBwcmVwZW5kZWQgKHJhdGhlciB0aGFuIGFwcGVuZGVkKSB0byBhZG9wdGVkU3R5bGVTaGVldHMuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBwcmVwZW5kVG9BZG9wdGVkU3R5bGVTaGVldHNTeW1ib2wgPSBTeW1ib2woXCJwcmVwZW5kVG9BZG9wdGVkU3R5bGVTaGVldHNcIik7XG5mdW5jdGlvbiBzZXBhcmF0ZVNoZWV0c1RvUHJlcGVuZChzaGVldHMpIHtcbiAgICBjb25zdCBwcmVwZW5kID0gW107XG4gICAgY29uc3QgYXBwZW5kID0gW107XG4gICAgc2hlZXRzLmZvckVhY2goeCA9PiAoeFtwcmVwZW5kVG9BZG9wdGVkU3R5bGVTaGVldHNTeW1ib2xdID8gcHJlcGVuZCA6IGFwcGVuZCkucHVzaCh4KSk7XG4gICAgcmV0dXJuIHsgcHJlcGVuZCwgYXBwZW5kIH07XG59XG5sZXQgYWRkQWRvcHRlZFN0eWxlU2hlZXRzID0gKHRhcmdldCwgc2hlZXRzKSA9PiB7XG4gICAgY29uc3QgeyBwcmVwZW5kLCBhcHBlbmQgfSA9IHNlcGFyYXRlU2hlZXRzVG9QcmVwZW5kKHNoZWV0cyk7XG4gICAgdGFyZ2V0LmFkb3B0ZWRTdHlsZVNoZWV0cyA9IFsuLi5wcmVwZW5kLCAuLi50YXJnZXQuYWRvcHRlZFN0eWxlU2hlZXRzLCAuLi5hcHBlbmRdO1xufTtcbmxldCByZW1vdmVBZG9wdGVkU3R5bGVTaGVldHMgPSAodGFyZ2V0LCBzaGVldHMpID0+IHtcbiAgICB0YXJnZXQuYWRvcHRlZFN0eWxlU2hlZXRzID0gdGFyZ2V0LmFkb3B0ZWRTdHlsZVNoZWV0cy5maWx0ZXIoKHgpID0+IHNoZWV0cy5pbmRleE9mKHgpID09PSAtMSk7XG59O1xuaWYgKERPTS5zdXBwb3J0c0Fkb3B0ZWRTdHlsZVNoZWV0cykge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIFRlc3QgaWYgYnJvd3NlciBpbXBsZW1lbnRhdGlvbiB1c2VzIEZyb3plbkFycmF5LlxuICAgICAgICAvLyBJZiBub3QsIHVzZSBwdXNoIC8gc3BsaWNlIHRvIGFsdGVyIHRoZSBzdHlsZXNoZWV0c1xuICAgICAgICAvLyBpbiBwbGFjZS4gVGhpcyBjaXJjdW12ZW50cyBhIGJ1ZyBpbiBTYWZhcmkgMTYuNCB3aGVyZVxuICAgICAgICAvLyBwZXJpb2RpY2FsbHksIGFzc2lnbmluZyB0aGUgYXJyYXkgd291bGQgcHJldmlvdXNseVxuICAgICAgICAvLyBjYXVzZSBzaGVldHMgdG8gYmUgcmVtb3ZlZC5cbiAgICAgICAgZG9jdW1lbnQuYWRvcHRlZFN0eWxlU2hlZXRzLnB1c2goKTtcbiAgICAgICAgZG9jdW1lbnQuYWRvcHRlZFN0eWxlU2hlZXRzLnNwbGljZSgpO1xuICAgICAgICBhZGRBZG9wdGVkU3R5bGVTaGVldHMgPSAodGFyZ2V0LCBzaGVldHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgcHJlcGVuZCwgYXBwZW5kIH0gPSBzZXBhcmF0ZVNoZWV0c1RvUHJlcGVuZChzaGVldHMpO1xuICAgICAgICAgICAgdGFyZ2V0LmFkb3B0ZWRTdHlsZVNoZWV0cy5zcGxpY2UoMCwgMCwgLi4ucHJlcGVuZCk7XG4gICAgICAgICAgICB0YXJnZXQuYWRvcHRlZFN0eWxlU2hlZXRzLnB1c2goLi4uYXBwZW5kKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVtb3ZlQWRvcHRlZFN0eWxlU2hlZXRzID0gKHRhcmdldCwgc2hlZXRzKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNoZWV0IG9mIHNoZWV0cykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGFyZ2V0LmFkb3B0ZWRTdHlsZVNoZWV0cy5pbmRleE9mKHNoZWV0KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5hZG9wdGVkU3R5bGVTaGVldHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIC8vIERvIG5vdGhpbmcgaWYgYW4gZXJyb3IgaXMgdGhyb3duLCB0aGUgZGVmYXVsdFxuICAgICAgICAvLyBjYXNlIGhhbmRsZXMgRnJvemVuQXJyYXkuXG4gICAgfVxufVxuLyoqXG4gKiBodHRwczovL3dpY2cuZ2l0aHViLmlvL2NvbnN0cnVjdC1zdHlsZXNoZWV0cy9cbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3dlYi91cGRhdGVzLzIwMTkvMDIvY29uc3RydWN0YWJsZS1zdHlsZXNoZWV0c1xuICpcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY2xhc3MgQWRvcHRlZFN0eWxlU2hlZXRzU3R5bGVzIGV4dGVuZHMgRWxlbWVudFN0eWxlcyB7XG4gICAgY29uc3RydWN0b3Ioc3R5bGVzLCBzdHlsZVNoZWV0Q2FjaGUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zdHlsZXMgPSBzdHlsZXM7XG4gICAgICAgIHRoaXMuc3R5bGVTaGVldENhY2hlID0gc3R5bGVTaGVldENhY2hlO1xuICAgICAgICB0aGlzLl9zdHlsZVNoZWV0cyA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5iZWhhdmlvcnMgPSByZWR1Y2VCZWhhdmlvcnMoc3R5bGVzKTtcbiAgICB9XG4gICAgZ2V0IHN0eWxlU2hlZXRzKCkge1xuICAgICAgICBpZiAodGhpcy5fc3R5bGVTaGVldHMgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgY29uc3Qgc3R5bGVzID0gdGhpcy5zdHlsZXM7XG4gICAgICAgICAgICBjb25zdCBzdHlsZVNoZWV0Q2FjaGUgPSB0aGlzLnN0eWxlU2hlZXRDYWNoZTtcbiAgICAgICAgICAgIHRoaXMuX3N0eWxlU2hlZXRzID0gcmVkdWNlU3R5bGVzKHN0eWxlcykubWFwKCh4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHggaW5zdGFuY2VvZiBDU1NTdHlsZVNoZWV0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgc2hlZXQgPSBzdHlsZVNoZWV0Q2FjaGUuZ2V0KHgpO1xuICAgICAgICAgICAgICAgIGlmIChzaGVldCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoZWV0ID0gbmV3IENTU1N0eWxlU2hlZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgc2hlZXQucmVwbGFjZVN5bmMoeCk7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlU2hlZXRDYWNoZS5zZXQoeCwgc2hlZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gc2hlZXQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fc3R5bGVTaGVldHM7XG4gICAgfVxuICAgIGFkZFN0eWxlc1RvKHRhcmdldCkge1xuICAgICAgICBhZGRBZG9wdGVkU3R5bGVTaGVldHModGFyZ2V0LCB0aGlzLnN0eWxlU2hlZXRzKTtcbiAgICAgICAgc3VwZXIuYWRkU3R5bGVzVG8odGFyZ2V0KTtcbiAgICB9XG4gICAgcmVtb3ZlU3R5bGVzRnJvbSh0YXJnZXQpIHtcbiAgICAgICAgcmVtb3ZlQWRvcHRlZFN0eWxlU2hlZXRzKHRhcmdldCwgdGhpcy5zdHlsZVNoZWV0cyk7XG4gICAgICAgIHN1cGVyLnJlbW92ZVN0eWxlc0Zyb20odGFyZ2V0KTtcbiAgICB9XG59XG5sZXQgc3R5bGVDbGFzc0lkID0gMDtcbmZ1bmN0aW9uIGdldE5leHRTdHlsZUNsYXNzKCkge1xuICAgIHJldHVybiBgZmFzdC1zdHlsZS1jbGFzcy0keysrc3R5bGVDbGFzc0lkfWA7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY2xhc3MgU3R5bGVFbGVtZW50U3R5bGVzIGV4dGVuZHMgRWxlbWVudFN0eWxlcyB7XG4gICAgY29uc3RydWN0b3Ioc3R5bGVzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc3R5bGVzID0gc3R5bGVzO1xuICAgICAgICB0aGlzLmJlaGF2aW9ycyA9IG51bGw7XG4gICAgICAgIHRoaXMuYmVoYXZpb3JzID0gcmVkdWNlQmVoYXZpb3JzKHN0eWxlcyk7XG4gICAgICAgIHRoaXMuc3R5bGVTaGVldHMgPSByZWR1Y2VTdHlsZXMoc3R5bGVzKTtcbiAgICAgICAgdGhpcy5zdHlsZUNsYXNzID0gZ2V0TmV4dFN0eWxlQ2xhc3MoKTtcbiAgICB9XG4gICAgYWRkU3R5bGVzVG8odGFyZ2V0KSB7XG4gICAgICAgIGNvbnN0IHN0eWxlU2hlZXRzID0gdGhpcy5zdHlsZVNoZWV0cztcbiAgICAgICAgY29uc3Qgc3R5bGVDbGFzcyA9IHRoaXMuc3R5bGVDbGFzcztcbiAgICAgICAgdGFyZ2V0ID0gdGhpcy5ub3JtYWxpemVUYXJnZXQodGFyZ2V0KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHlsZVNoZWV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gc3R5bGVTaGVldHNbaV07XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IHN0eWxlQ2xhc3M7XG4gICAgICAgICAgICB0YXJnZXQuYXBwZW5kKGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyLmFkZFN0eWxlc1RvKHRhcmdldCk7XG4gICAgfVxuICAgIHJlbW92ZVN0eWxlc0Zyb20odGFyZ2V0KSB7XG4gICAgICAgIHRhcmdldCA9IHRoaXMubm9ybWFsaXplVGFyZ2V0KHRhcmdldCk7XG4gICAgICAgIGNvbnN0IHN0eWxlcyA9IHRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKGAuJHt0aGlzLnN0eWxlQ2xhc3N9YCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHN0eWxlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB0YXJnZXQucmVtb3ZlQ2hpbGQoc3R5bGVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5yZW1vdmVTdHlsZXNGcm9tKHRhcmdldCk7XG4gICAgfVxuICAgIGlzQXR0YWNoZWRUbyh0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmlzQXR0YWNoZWRUbyh0aGlzLm5vcm1hbGl6ZVRhcmdldCh0YXJnZXQpKTtcbiAgICB9XG4gICAgbm9ybWFsaXplVGFyZ2V0KHRhcmdldCkge1xuICAgICAgICByZXR1cm4gdGFyZ2V0ID09PSBkb2N1bWVudCA/IGRvY3VtZW50LmJvZHkgOiB0YXJnZXQ7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gXCIuLi9vYnNlcnZhdGlvbi9vYnNlcnZhYmxlLmpzXCI7XG5pbXBvcnQgeyBET00gfSBmcm9tIFwiLi4vZG9tLmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVNZXRhZGF0YUxvY2F0b3IgfSBmcm9tIFwiLi4vcGxhdGZvcm0uanNcIjtcbi8qKlxuICogTWV0YWRhdGEgdXNlZCB0byBjb25maWd1cmUgYSBjdXN0b20gYXR0cmlidXRlJ3MgYmVoYXZpb3IuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBBdHRyaWJ1dGVDb25maWd1cmF0aW9uID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgLyoqXG4gICAgICogTG9jYXRlcyBhbGwgYXR0cmlidXRlIGNvbmZpZ3VyYXRpb25zIGFzc29jaWF0ZWQgd2l0aCBhIHR5cGUuXG4gICAgICovXG4gICAgbG9jYXRlOiBjcmVhdGVNZXRhZGF0YUxvY2F0b3IoKSxcbn0pO1xuLyoqXG4gKiBBIHtAbGluayBWYWx1ZUNvbnZlcnRlcn0gdGhhdCBjb252ZXJ0cyB0byBhbmQgZnJvbSBgYm9vbGVhbmAgdmFsdWVzLlxuICogQHJlbWFya3NcbiAqIFVzZWQgYXV0b21hdGljYWxseSB3aGVuIHRoZSBgYm9vbGVhbmAge0BsaW5rIEF0dHJpYnV0ZU1vZGV9IGlzIHNlbGVjdGVkLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgYm9vbGVhbkNvbnZlcnRlciA9IHtcbiAgICB0b1ZpZXcodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlID8gXCJ0cnVlXCIgOiBcImZhbHNlXCI7XG4gICAgfSxcbiAgICBmcm9tVmlldyh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwgfHxcbiAgICAgICAgICAgIHZhbHVlID09PSB2b2lkIDAgfHxcbiAgICAgICAgICAgIHZhbHVlID09PSBcImZhbHNlXCIgfHxcbiAgICAgICAgICAgIHZhbHVlID09PSBmYWxzZSB8fFxuICAgICAgICAgICAgdmFsdWUgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxufTtcbi8qKlxuICogQSB7QGxpbmsgVmFsdWVDb252ZXJ0ZXJ9IHRoYXQgY29udmVydHMgdG8gYW5kIGZyb20gYG51bWJlcmAgdmFsdWVzLlxuICogQHJlbWFya3NcbiAqIFRoaXMgY29udmVydGVyIGFsbG93cyBmb3IgbnVsbGFibGUgbnVtYmVycywgcmV0dXJuaW5nIGBudWxsYCBpZiB0aGVcbiAqIGlucHV0IHdhcyBgbnVsbGAsIGB1bmRlZmluZWRgLCBvciBgTmFOYC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IG51bGxhYmxlTnVtYmVyQ29udmVydGVyID0ge1xuICAgIHRvVmlldyh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbnVtYmVyID0gdmFsdWUgKiAxO1xuICAgICAgICByZXR1cm4gaXNOYU4obnVtYmVyKSA/IG51bGwgOiBudW1iZXIudG9TdHJpbmcoKTtcbiAgICB9LFxuICAgIGZyb21WaWV3KHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBudW1iZXIgPSB2YWx1ZSAqIDE7XG4gICAgICAgIHJldHVybiBpc05hTihudW1iZXIpID8gbnVsbCA6IG51bWJlcjtcbiAgICB9LFxufTtcbi8qKlxuICogQW4gaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIEFjY2Vzc29yfSB0aGF0IHN1cHBvcnRzIHJlYWN0aXZpdHksXG4gKiBjaGFuZ2UgY2FsbGJhY2tzLCBhdHRyaWJ1dGUgcmVmbGVjdGlvbiwgYW5kIHR5cGUgY29udmVyc2lvbiBmb3JcbiAqIGN1c3RvbSBlbGVtZW50cy5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEF0dHJpYnV0ZURlZmluaXRpb24ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgQXR0cmlidXRlRGVmaW5pdGlvbi5cbiAgICAgKiBAcGFyYW0gT3duZXIgLSBUaGUgY2xhc3MgY29uc3RydWN0b3IgdGhhdCBvd25zIHRoaXMgYXR0cmlidXRlLlxuICAgICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IGFzc29jaWF0ZWQgd2l0aCB0aGUgYXR0cmlidXRlLlxuICAgICAqIEBwYXJhbSBhdHRyaWJ1dGUgLSBUaGUgbmFtZSBvZiB0aGUgYXR0cmlidXRlIGluIEhUTUwuXG4gICAgICogQHBhcmFtIG1vZGUgLSBUaGUge0BsaW5rIEF0dHJpYnV0ZU1vZGV9IHRoYXQgZGVzY3JpYmVzIHRoZSBiZWhhdmlvciBvZiB0aGlzIGF0dHJpYnV0ZS5cbiAgICAgKiBAcGFyYW0gY29udmVydGVyIC0gQSB7QGxpbmsgVmFsdWVDb252ZXJ0ZXJ9IHRoYXQgaW50ZWdyYXRlcyB3aXRoIHRoZSBwcm9wZXJ0eSBnZXR0ZXIvc2V0dGVyXG4gICAgICogdG8gY29udmVydCB2YWx1ZXMgdG8gYW5kIGZyb20gYSBET00gc3RyaW5nLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKE93bmVyLCBuYW1lLCBhdHRyaWJ1dGUgPSBuYW1lLnRvTG93ZXJDYXNlKCksIG1vZGUgPSBcInJlZmxlY3RcIiwgY29udmVydGVyKSB7XG4gICAgICAgIHRoaXMuZ3VhcmRzID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzLk93bmVyID0gT3duZXI7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlID0gYXR0cmlidXRlO1xuICAgICAgICB0aGlzLm1vZGUgPSBtb2RlO1xuICAgICAgICB0aGlzLmNvbnZlcnRlciA9IGNvbnZlcnRlcjtcbiAgICAgICAgdGhpcy5maWVsZE5hbWUgPSBgXyR7bmFtZX1gO1xuICAgICAgICB0aGlzLmNhbGxiYWNrTmFtZSA9IGAke25hbWV9Q2hhbmdlZGA7XG4gICAgICAgIHRoaXMuaGFzQ2FsbGJhY2sgPSB0aGlzLmNhbGxiYWNrTmFtZSBpbiBPd25lci5wcm90b3R5cGU7XG4gICAgICAgIGlmIChtb2RlID09PSBcImJvb2xlYW5cIiAmJiBjb252ZXJ0ZXIgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgdGhpcy5jb252ZXJ0ZXIgPSBib29sZWFuQ29udmVydGVyO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUvcHJvcGVydHkgb24gdGhlIHNvdXJjZSBlbGVtZW50LlxuICAgICAqIEBwYXJhbSBzb3VyY2UgLSBUaGUgc291cmNlIGVsZW1lbnQgdG8gYWNjZXNzLlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBzZXQgdGhlIGF0dHJpYnV0ZS9wcm9wZXJ0eSB0by5cbiAgICAgKi9cbiAgICBzZXRWYWx1ZShzb3VyY2UsIG5ld1ZhbHVlKSB7XG4gICAgICAgIGNvbnN0IG9sZFZhbHVlID0gc291cmNlW3RoaXMuZmllbGROYW1lXTtcbiAgICAgICAgY29uc3QgY29udmVydGVyID0gdGhpcy5jb252ZXJ0ZXI7XG4gICAgICAgIGlmIChjb252ZXJ0ZXIgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgbmV3VmFsdWUgPSBjb252ZXJ0ZXIuZnJvbVZpZXcobmV3VmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvbGRWYWx1ZSAhPT0gbmV3VmFsdWUpIHtcbiAgICAgICAgICAgIHNvdXJjZVt0aGlzLmZpZWxkTmFtZV0gPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMudHJ5UmVmbGVjdFRvQXR0cmlidXRlKHNvdXJjZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5oYXNDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHNvdXJjZVt0aGlzLmNhbGxiYWNrTmFtZV0ob2xkVmFsdWUsIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNvdXJjZS4kZmFzdENvbnRyb2xsZXIubm90aWZ5KHRoaXMubmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZS9wcm9wZXJ0eSBvbiB0aGUgc291cmNlIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHNvdXJjZSAtIFRoZSBzb3VyY2UgZWxlbWVudCB0byBhY2Nlc3MuXG4gICAgICovXG4gICAgZ2V0VmFsdWUoc291cmNlKSB7XG4gICAgICAgIE9ic2VydmFibGUudHJhY2soc291cmNlLCB0aGlzLm5hbWUpO1xuICAgICAgICByZXR1cm4gc291cmNlW3RoaXMuZmllbGROYW1lXTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIG9uQXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGVsZW1lbnQsIHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmd1YXJkcy5oYXMoZWxlbWVudCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmd1YXJkcy5hZGQoZWxlbWVudCk7XG4gICAgICAgIHRoaXMuc2V0VmFsdWUoZWxlbWVudCwgdmFsdWUpO1xuICAgICAgICB0aGlzLmd1YXJkcy5kZWxldGUoZWxlbWVudCk7XG4gICAgfVxuICAgIHRyeVJlZmxlY3RUb0F0dHJpYnV0ZShlbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IG1vZGUgPSB0aGlzLm1vZGU7XG4gICAgICAgIGNvbnN0IGd1YXJkcyA9IHRoaXMuZ3VhcmRzO1xuICAgICAgICBpZiAoZ3VhcmRzLmhhcyhlbGVtZW50KSB8fCBtb2RlID09PSBcImZyb21WaWV3XCIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBET00ucXVldWVVcGRhdGUoKCkgPT4ge1xuICAgICAgICAgICAgZ3VhcmRzLmFkZChlbGVtZW50KTtcbiAgICAgICAgICAgIGNvbnN0IGxhdGVzdFZhbHVlID0gZWxlbWVudFt0aGlzLmZpZWxkTmFtZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwicmVmbGVjdFwiOlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb252ZXJ0ZXIgPSB0aGlzLmNvbnZlcnRlcjtcbiAgICAgICAgICAgICAgICAgICAgRE9NLnNldEF0dHJpYnV0ZShlbGVtZW50LCB0aGlzLmF0dHJpYnV0ZSwgY29udmVydGVyICE9PSB2b2lkIDAgPyBjb252ZXJ0ZXIudG9WaWV3KGxhdGVzdFZhbHVlKSA6IGxhdGVzdFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgICAgICAgICAgRE9NLnNldEJvb2xlYW5BdHRyaWJ1dGUoZWxlbWVudCwgdGhpcy5hdHRyaWJ1dGUsIGxhdGVzdFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBndWFyZHMuZGVsZXRlKGVsZW1lbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29sbGVjdHMgYWxsIGF0dHJpYnV0ZSBkZWZpbml0aW9ucyBhc3NvY2lhdGVkIHdpdGggdGhlIG93bmVyLlxuICAgICAqIEBwYXJhbSBPd25lciAtIFRoZSBjbGFzcyBjb25zdHJ1Y3RvciB0byBjb2xsZWN0IGF0dHJpYnV0ZSBmb3IuXG4gICAgICogQHBhcmFtIGF0dHJpYnV0ZUxpc3RzIC0gQW55IGV4aXN0aW5nIGF0dHJpYnV0ZXMgdG8gY29sbGVjdCBhbmQgbWVyZ2Ugd2l0aCB0aG9zZSBhc3NvY2lhdGVkIHdpdGggdGhlIG93bmVyLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHN0YXRpYyBjb2xsZWN0KE93bmVyLCAuLi5hdHRyaWJ1dGVMaXN0cykge1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gW107XG4gICAgICAgIGF0dHJpYnV0ZUxpc3RzLnB1c2goQXR0cmlidXRlQ29uZmlndXJhdGlvbi5sb2NhdGUoT3duZXIpKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gYXR0cmlidXRlTGlzdHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgbGlzdCA9IGF0dHJpYnV0ZUxpc3RzW2ldO1xuICAgICAgICAgICAgaWYgKGxpc3QgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDAsIGpqID0gbGlzdC5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29uZmlnID0gbGlzdFtqXTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLnB1c2gobmV3IEF0dHJpYnV0ZURlZmluaXRpb24oT3duZXIsIGNvbmZpZykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcy5wdXNoKG5ldyBBdHRyaWJ1dGVEZWZpbml0aW9uKE93bmVyLCBjb25maWcucHJvcGVydHksIGNvbmZpZy5hdHRyaWJ1dGUsIGNvbmZpZy5tb2RlLCBjb25maWcuY29udmVydGVyKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGVzO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhdHRyKGNvbmZpZ09yVGFyZ2V0LCBwcm9wKSB7XG4gICAgbGV0IGNvbmZpZztcbiAgICBmdW5jdGlvbiBkZWNvcmF0b3IoJHRhcmdldCwgJHByb3ApIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAvLyBOb24gaW52b2NhdGlvbjpcbiAgICAgICAgICAgIC8vIC0gQGF0dHJcbiAgICAgICAgICAgIC8vIEludm9jYXRpb24gd2l0aCBvciB3L28gb3B0czpcbiAgICAgICAgICAgIC8vIC0gQGF0dHIoKVxuICAgICAgICAgICAgLy8gLSBAYXR0cih7Li4ub3B0c30pXG4gICAgICAgICAgICBjb25maWcucHJvcGVydHkgPSAkcHJvcDtcbiAgICAgICAgfVxuICAgICAgICBBdHRyaWJ1dGVDb25maWd1cmF0aW9uLmxvY2F0ZSgkdGFyZ2V0LmNvbnN0cnVjdG9yKS5wdXNoKGNvbmZpZyk7XG4gICAgfVxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICAvLyBOb24gaW52b2NhdGlvbjpcbiAgICAgICAgLy8gLSBAYXR0clxuICAgICAgICBjb25maWcgPSB7fTtcbiAgICAgICAgZGVjb3JhdG9yKGNvbmZpZ09yVGFyZ2V0LCBwcm9wKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBJbnZvY2F0aW9uIHdpdGggb3Igdy9vIG9wdHM6XG4gICAgLy8gLSBAYXR0cigpXG4gICAgLy8gLSBAYXR0cih7Li4ub3B0c30pXG4gICAgY29uZmlnID0gY29uZmlnT3JUYXJnZXQgPT09IHZvaWQgMCA/IHt9IDogY29uZmlnT3JUYXJnZXQ7XG4gICAgcmV0dXJuIGRlY29yYXRvcjtcbn1cbiIsImltcG9ydCB7IEZBU1QgfSBmcm9tIFwiLi4vcGxhdGZvcm0uanNcIjtcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tIFwiLi4vb2JzZXJ2YXRpb24vb2JzZXJ2YWJsZS5qc1wiO1xuaW1wb3J0IHsgRWxlbWVudFN0eWxlcyB9IGZyb20gXCIuLi9zdHlsZXMvZWxlbWVudC1zdHlsZXMuanNcIjtcbmltcG9ydCB7IEF0dHJpYnV0ZURlZmluaXRpb24gfSBmcm9tIFwiLi9hdHRyaWJ1dGVzLmpzXCI7XG5jb25zdCBkZWZhdWx0U2hhZG93T3B0aW9ucyA9IHsgbW9kZTogXCJvcGVuXCIgfTtcbmNvbnN0IGRlZmF1bHRFbGVtZW50T3B0aW9ucyA9IHt9O1xuY29uc3QgZmFzdFJlZ2lzdHJ5ID0gRkFTVC5nZXRCeUlkKDQgLyogZWxlbWVudFJlZ2lzdHJ5ICovLCAoKSA9PiB7XG4gICAgY29uc3QgdHlwZVRvRGVmaW5pdGlvbiA9IG5ldyBNYXAoKTtcbiAgICByZXR1cm4gT2JqZWN0LmZyZWV6ZSh7XG4gICAgICAgIHJlZ2lzdGVyKGRlZmluaXRpb24pIHtcbiAgICAgICAgICAgIGlmICh0eXBlVG9EZWZpbml0aW9uLmhhcyhkZWZpbml0aW9uLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHlwZVRvRGVmaW5pdGlvbi5zZXQoZGVmaW5pdGlvbi50eXBlLCBkZWZpbml0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9LFxuICAgICAgICBnZXRCeVR5cGUoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZVRvRGVmaW5pdGlvbi5nZXQoa2V5KTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn0pO1xuLyoqXG4gKiBEZWZpbmVzIG1ldGFkYXRhIGZvciBhIEZBU1RFbGVtZW50LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgRkFTVEVsZW1lbnREZWZpbml0aW9uIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEZBU1RFbGVtZW50RGVmaW5pdGlvbi5cbiAgICAgKiBAcGFyYW0gdHlwZSAtIFRoZSB0eXBlIHRoaXMgZGVmaW5pdGlvbiBpcyBiZWluZyBjcmVhdGVkIGZvci5cbiAgICAgKiBAcGFyYW0gbmFtZU9yQ29uZmlnIC0gVGhlIG5hbWUgb2YgdGhlIGVsZW1lbnQgdG8gZGVmaW5lIG9yIGEgY29uZmlnIG9iamVjdFxuICAgICAqIHRoYXQgZGVzY3JpYmVzIHRoZSBlbGVtZW50IHRvIGRlZmluZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBuYW1lT3JDb25maWcgPSB0eXBlLmRlZmluaXRpb24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lT3JDb25maWcgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIG5hbWVPckNvbmZpZyA9IHsgbmFtZTogbmFtZU9yQ29uZmlnIH07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZU9yQ29uZmlnLm5hbWU7XG4gICAgICAgIHRoaXMudGVtcGxhdGUgPSBuYW1lT3JDb25maWcudGVtcGxhdGU7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBBdHRyaWJ1dGVEZWZpbml0aW9uLmNvbGxlY3QodHlwZSwgbmFtZU9yQ29uZmlnLmF0dHJpYnV0ZXMpO1xuICAgICAgICBjb25zdCBvYnNlcnZlZEF0dHJpYnV0ZXMgPSBuZXcgQXJyYXkoYXR0cmlidXRlcy5sZW5ndGgpO1xuICAgICAgICBjb25zdCBwcm9wZXJ0eUxvb2t1cCA9IHt9O1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVMb29rdXAgPSB7fTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gYXR0cmlidXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gYXR0cmlidXRlc1tpXTtcbiAgICAgICAgICAgIG9ic2VydmVkQXR0cmlidXRlc1tpXSA9IGN1cnJlbnQuYXR0cmlidXRlO1xuICAgICAgICAgICAgcHJvcGVydHlMb29rdXBbY3VycmVudC5uYW1lXSA9IGN1cnJlbnQ7XG4gICAgICAgICAgICBhdHRyaWJ1dGVMb29rdXBbY3VycmVudC5hdHRyaWJ1dGVdID0gY3VycmVudDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuICAgICAgICB0aGlzLm9ic2VydmVkQXR0cmlidXRlcyA9IG9ic2VydmVkQXR0cmlidXRlcztcbiAgICAgICAgdGhpcy5wcm9wZXJ0eUxvb2t1cCA9IHByb3BlcnR5TG9va3VwO1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZUxvb2t1cCA9IGF0dHJpYnV0ZUxvb2t1cDtcbiAgICAgICAgdGhpcy5zaGFkb3dPcHRpb25zID1cbiAgICAgICAgICAgIG5hbWVPckNvbmZpZy5zaGFkb3dPcHRpb25zID09PSB2b2lkIDBcbiAgICAgICAgICAgICAgICA/IGRlZmF1bHRTaGFkb3dPcHRpb25zXG4gICAgICAgICAgICAgICAgOiBuYW1lT3JDb25maWcuc2hhZG93T3B0aW9ucyA9PT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICA/IHZvaWQgMFxuICAgICAgICAgICAgICAgICAgICA6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdFNoYWRvd09wdGlvbnMpLCBuYW1lT3JDb25maWcuc2hhZG93T3B0aW9ucyk7XG4gICAgICAgIHRoaXMuZWxlbWVudE9wdGlvbnMgPVxuICAgICAgICAgICAgbmFtZU9yQ29uZmlnLmVsZW1lbnRPcHRpb25zID09PSB2b2lkIDBcbiAgICAgICAgICAgICAgICA/IGRlZmF1bHRFbGVtZW50T3B0aW9uc1xuICAgICAgICAgICAgICAgIDogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0RWxlbWVudE9wdGlvbnMpLCBuYW1lT3JDb25maWcuZWxlbWVudE9wdGlvbnMpO1xuICAgICAgICB0aGlzLnN0eWxlcyA9XG4gICAgICAgICAgICBuYW1lT3JDb25maWcuc3R5bGVzID09PSB2b2lkIDBcbiAgICAgICAgICAgICAgICA/IHZvaWQgMFxuICAgICAgICAgICAgICAgIDogQXJyYXkuaXNBcnJheShuYW1lT3JDb25maWcuc3R5bGVzKVxuICAgICAgICAgICAgICAgICAgICA/IEVsZW1lbnRTdHlsZXMuY3JlYXRlKG5hbWVPckNvbmZpZy5zdHlsZXMpXG4gICAgICAgICAgICAgICAgICAgIDogbmFtZU9yQ29uZmlnLnN0eWxlcyBpbnN0YW5jZW9mIEVsZW1lbnRTdHlsZXNcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbmFtZU9yQ29uZmlnLnN0eWxlc1xuICAgICAgICAgICAgICAgICAgICAgICAgOiBFbGVtZW50U3R5bGVzLmNyZWF0ZShbbmFtZU9yQ29uZmlnLnN0eWxlc10pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgaWYgdGhpcyBlbGVtZW50IGhhcyBiZWVuIGRlZmluZWQgaW4gYXQgbGVhc3Qgb25lIHJlZ2lzdHJ5LlxuICAgICAqL1xuICAgIGdldCBpc0RlZmluZWQoKSB7XG4gICAgICAgIHJldHVybiAhIWZhc3RSZWdpc3RyeS5nZXRCeVR5cGUodGhpcy50eXBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVmaW5lcyBhIGN1c3RvbSBlbGVtZW50IGJhc2VkIG9uIHRoaXMgZGVmaW5pdGlvbi5cbiAgICAgKiBAcGFyYW0gcmVnaXN0cnkgLSBUaGUgZWxlbWVudCByZWdpc3RyeSB0byBkZWZpbmUgdGhlIGVsZW1lbnQgaW4uXG4gICAgICovXG4gICAgZGVmaW5lKHJlZ2lzdHJ5ID0gY3VzdG9tRWxlbWVudHMpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IHRoaXMudHlwZTtcbiAgICAgICAgaWYgKGZhc3RSZWdpc3RyeS5yZWdpc3Rlcih0aGlzKSkge1xuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHRoaXMuYXR0cmlidXRlcztcbiAgICAgICAgICAgIGNvbnN0IHByb3RvID0gdHlwZS5wcm90b3R5cGU7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBhdHRyaWJ1dGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBPYnNlcnZhYmxlLmRlZmluZVByb3BlcnR5KHByb3RvLCBhdHRyaWJ1dGVzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodHlwZSwgXCJvYnNlcnZlZEF0dHJpYnV0ZXNcIiwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLm9ic2VydmVkQXR0cmlidXRlcyxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZWdpc3RyeS5nZXQodGhpcy5uYW1lKSkge1xuICAgICAgICAgICAgcmVnaXN0cnkuZGVmaW5lKHRoaXMubmFtZSwgdHlwZSwgdGhpcy5lbGVtZW50T3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuLyoqXG4gKiBHZXRzIHRoZSBlbGVtZW50IGRlZmluaXRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdHlwZS5cbiAqIEBwYXJhbSB0eXBlIC0gVGhlIGN1c3RvbSBlbGVtZW50IHR5cGUgdG8gcmV0cmlldmUgdGhlIGRlZmluaXRpb24gZm9yLlxuICovXG5GQVNURWxlbWVudERlZmluaXRpb24uZm9yVHlwZSA9IGZhc3RSZWdpc3RyeS5nZXRCeVR5cGU7XG4iLCJpbXBvcnQgeyBET00gfSBmcm9tIFwiLi4vZG9tLmpzXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eUNoYW5nZU5vdGlmaWVyIH0gZnJvbSBcIi4uL29ic2VydmF0aW9uL25vdGlmaWVyLmpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0RXhlY3V0aW9uQ29udGV4dCwgT2JzZXJ2YWJsZSB9IGZyb20gXCIuLi9vYnNlcnZhdGlvbi9vYnNlcnZhYmxlLmpzXCI7XG5pbXBvcnQgeyBGQVNURWxlbWVudERlZmluaXRpb24gfSBmcm9tIFwiLi9mYXN0LWRlZmluaXRpb25zLmpzXCI7XG5jb25zdCBzaGFkb3dSb290cyA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCBkZWZhdWx0RXZlbnRPcHRpb25zID0ge1xuICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgY29tcG9zZWQ6IHRydWUsXG4gICAgY2FuY2VsYWJsZTogdHJ1ZSxcbn07XG5mdW5jdGlvbiBnZXRTaGFkb3dSb290KGVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWxlbWVudC5zaGFkb3dSb290IHx8IHNoYWRvd1Jvb3RzLmdldChlbGVtZW50KSB8fCBudWxsO1xufVxuLyoqXG4gKiBDb250cm9scyB0aGUgbGlmZWN5Y2xlIGFuZCByZW5kZXJpbmcgb2YgYSBgRkFTVEVsZW1lbnRgLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgQ29udHJvbGxlciBleHRlbmRzIFByb3BlcnR5Q2hhbmdlTm90aWZpZXIge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBDb250cm9sbGVyIHRvIGNvbnRyb2wgdGhlIHNwZWNpZmllZCBlbGVtZW50LlxuICAgICAqIEBwYXJhbSBlbGVtZW50IC0gVGhlIGVsZW1lbnQgdG8gYmUgY29udHJvbGxlZCBieSB0aGlzIGNvbnRyb2xsZXIuXG4gICAgICogQHBhcmFtIGRlZmluaXRpb24gLSBUaGUgZWxlbWVudCBkZWZpbml0aW9uIG1ldGFkYXRhIHRoYXQgaW5zdHJ1Y3RzIHRoaXNcbiAgICAgKiBjb250cm9sbGVyIGluIGhvdyB0byBoYW5kbGUgcmVuZGVyaW5nIGFuZCBvdGhlciBwbGF0Zm9ybSBpbnRlZ3JhdGlvbnMuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgZGVmaW5pdGlvbikge1xuICAgICAgICBzdXBlcihlbGVtZW50KTtcbiAgICAgICAgdGhpcy5ib3VuZE9ic2VydmFibGVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5iZWhhdmlvcnMgPSBudWxsO1xuICAgICAgICB0aGlzLm5lZWRzSW5pdGlhbGl6YXRpb24gPSB0cnVlO1xuICAgICAgICB0aGlzLl90ZW1wbGF0ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuX3N0eWxlcyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2lzQ29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIGFsbG93cyBPYnNlcnZhYmxlLmdldE5vdGlmaWVyKC4uLikgdG8gcmV0dXJuIHRoZSBDb250cm9sbGVyXG4gICAgICAgICAqIHdoZW4gdGhlIG5vdGlmaWVyIGZvciB0aGUgQ29udHJvbGxlciBpdHNlbGYgaXMgYmVpbmcgcmVxdWVzdGVkLiBUaGVcbiAgICAgICAgICogcmVzdWx0IGlzIHRoYXQgdGhlIE9ic2VydmFibGUgc3lzdGVtIGRvZXMgbm90IG5lZWQgdG8gY3JlYXRlIGEgc2VwYXJhdGVcbiAgICAgICAgICogaW5zdGFuY2Ugb2YgTm90aWZpZXIgZm9yIG9ic2VydmFibGVzIG9uIHRoZSBDb250cm9sbGVyLiBUaGUgY29tcG9uZW50IGFuZFxuICAgICAgICAgKiB0aGUgY29udHJvbGxlciB3aWxsIG5vdyBzaGFyZSB0aGUgc2FtZSBub3RpZmllciwgcmVtb3Zpbmcgb25lLW9iamVjdCBjb25zdHJ1Y3RcbiAgICAgICAgICogcGVyIHdlYiBjb21wb25lbnQgaW5zdGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLiRmYXN0Q29udHJvbGxlciA9IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdmlldyBhc3NvY2lhdGVkIHdpdGggdGhlIGN1c3RvbSBlbGVtZW50LlxuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBJZiBgbnVsbGAgdGhlbiB0aGUgZWxlbWVudCBpcyBtYW5hZ2luZyBpdHMgb3duIHJlbmRlcmluZy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmlldyA9IG51bGw7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbiA9IGRlZmluaXRpb247XG4gICAgICAgIGNvbnN0IHNoYWRvd09wdGlvbnMgPSBkZWZpbml0aW9uLnNoYWRvd09wdGlvbnM7XG4gICAgICAgIGlmIChzaGFkb3dPcHRpb25zICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGNvbnN0IHNoYWRvd1Jvb3QgPSBlbGVtZW50LmF0dGFjaFNoYWRvdyhzaGFkb3dPcHRpb25zKTtcbiAgICAgICAgICAgIGlmIChzaGFkb3dPcHRpb25zLm1vZGUgPT09IFwiY2xvc2VkXCIpIHtcbiAgICAgICAgICAgICAgICBzaGFkb3dSb290cy5zZXQoZWxlbWVudCwgc2hhZG93Um9vdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2FwdHVyZSBhbnkgb2JzZXJ2YWJsZSB2YWx1ZXMgdGhhdCB3ZXJlIHNldCBieSB0aGUgYmluZGluZyBlbmdpbmUgYmVmb3JlXG4gICAgICAgIC8vIHRoZSBicm93c2VyIHVwZ3JhZGVkIHRoZSBlbGVtZW50LiBUaGVuIGRlbGV0ZSB0aGUgcHJvcGVydHkgc2luY2UgaXQgd2lsbFxuICAgICAgICAvLyBzaGFkb3cgdGhlIGdldHRlci9zZXR0ZXIgdGhhdCBpcyByZXF1aXJlZCB0byBtYWtlIHRoZSBvYnNlcnZhYmxlIG9wZXJhdGUuXG4gICAgICAgIC8vIExhdGVyLCBpbiB0aGUgY29ubmVjdCBjYWxsYmFjaywgd2UnbGwgcmUtYXBwbHkgdGhlIHZhbHVlcy5cbiAgICAgICAgY29uc3QgYWNjZXNzb3JzID0gT2JzZXJ2YWJsZS5nZXRBY2Nlc3NvcnMoZWxlbWVudCk7XG4gICAgICAgIGlmIChhY2Nlc3NvcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgYm91bmRPYnNlcnZhYmxlcyA9ICh0aGlzLmJvdW5kT2JzZXJ2YWJsZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGFjY2Vzc29ycy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcGVydHlOYW1lID0gYWNjZXNzb3JzW2ldLm5hbWU7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBlbGVtZW50W3Byb3BlcnR5TmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGVsZW1lbnRbcHJvcGVydHlOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgYm91bmRPYnNlcnZhYmxlc1twcm9wZXJ0eU5hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB3aGV0aGVyIG9yIG5vdCB0aGUgY3VzdG9tIGVsZW1lbnQgaGFzIGJlZW5cbiAgICAgKiBjb25uZWN0ZWQgdG8gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIGdldCBpc0Nvbm5lY3RlZCgpIHtcbiAgICAgICAgT2JzZXJ2YWJsZS50cmFjayh0aGlzLCBcImlzQ29ubmVjdGVkXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5faXNDb25uZWN0ZWQ7XG4gICAgfVxuICAgIHNldElzQ29ubmVjdGVkKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2lzQ29ubmVjdGVkID0gdmFsdWU7XG4gICAgICAgIE9ic2VydmFibGUubm90aWZ5KHRoaXMsIFwiaXNDb25uZWN0ZWRcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMvc2V0cyB0aGUgdGVtcGxhdGUgdXNlZCB0byByZW5kZXIgdGhlIGNvbXBvbmVudC5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgdmFsdWUgY2FuIG9ubHkgYmUgYWNjdXJhdGVseSByZWFkIGFmdGVyIGNvbm5lY3QgYnV0IGNhbiBiZSBzZXQgYXQgYW55IHRpbWUuXG4gICAgICovXG4gICAgZ2V0IHRlbXBsYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGVtcGxhdGU7XG4gICAgfVxuICAgIHNldCB0ZW1wbGF0ZSh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5fdGVtcGxhdGUgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdGVtcGxhdGUgPSB2YWx1ZTtcbiAgICAgICAgaWYgKCF0aGlzLm5lZWRzSW5pdGlhbGl6YXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVGVtcGxhdGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMvc2V0cyB0aGUgcHJpbWFyeSBzdHlsZXMgdXNlZCBmb3IgdGhlIGNvbXBvbmVudC5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgdmFsdWUgY2FuIG9ubHkgYmUgYWNjdXJhdGVseSByZWFkIGFmdGVyIGNvbm5lY3QgYnV0IGNhbiBiZSBzZXQgYXQgYW55IHRpbWUuXG4gICAgICovXG4gICAgZ2V0IHN0eWxlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0eWxlcztcbiAgICB9XG4gICAgc2V0IHN0eWxlcyh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5fc3R5bGVzID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9zdHlsZXMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU3R5bGVzKHRoaXMuX3N0eWxlcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc3R5bGVzID0gdmFsdWU7XG4gICAgICAgIGlmICghdGhpcy5uZWVkc0luaXRpYWxpemF0aW9uICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmFkZFN0eWxlcyh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBzdHlsZXMgdG8gdGhpcyBlbGVtZW50LiBQcm92aWRpbmcgYW4gSFRNTFN0eWxlRWxlbWVudCB3aWxsIGF0dGFjaCB0aGUgZWxlbWVudCBpbnN0YW5jZSB0byB0aGUgc2hhZG93Um9vdC5cbiAgICAgKiBAcGFyYW0gc3R5bGVzIC0gVGhlIHN0eWxlcyB0byBhZGQuXG4gICAgICovXG4gICAgYWRkU3R5bGVzKHN0eWxlcykge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBnZXRTaGFkb3dSb290KHRoaXMuZWxlbWVudCkgfHxcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5nZXRSb290Tm9kZSgpO1xuICAgICAgICBpZiAoc3R5bGVzIGluc3RhbmNlb2YgSFRNTFN0eWxlRWxlbWVudCkge1xuICAgICAgICAgICAgdGFyZ2V0LmFwcGVuZChzdHlsZXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFzdHlsZXMuaXNBdHRhY2hlZFRvKHRhcmdldCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZUJlaGF2aW9ycyA9IHN0eWxlcy5iZWhhdmlvcnM7XG4gICAgICAgICAgICBzdHlsZXMuYWRkU3R5bGVzVG8odGFyZ2V0KTtcbiAgICAgICAgICAgIGlmIChzb3VyY2VCZWhhdmlvcnMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEJlaGF2aW9ycyhzb3VyY2VCZWhhdmlvcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgc3R5bGVzIGZyb20gdGhpcyBlbGVtZW50LiBQcm92aWRpbmcgYW4gSFRNTFN0eWxlRWxlbWVudCB3aWxsIGRldGFjaCB0aGUgZWxlbWVudCBpbnN0YW5jZSBmcm9tIHRoZSBzaGFkb3dSb290LlxuICAgICAqIEBwYXJhbSBzdHlsZXMgLSB0aGUgc3R5bGVzIHRvIHJlbW92ZS5cbiAgICAgKi9cbiAgICByZW1vdmVTdHlsZXMoc3R5bGVzKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGdldFNoYWRvd1Jvb3QodGhpcy5lbGVtZW50KSB8fFxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmdldFJvb3ROb2RlKCk7XG4gICAgICAgIGlmIChzdHlsZXMgaW5zdGFuY2VvZiBIVE1MU3R5bGVFbGVtZW50KSB7XG4gICAgICAgICAgICB0YXJnZXQucmVtb3ZlQ2hpbGQoc3R5bGVzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdHlsZXMuaXNBdHRhY2hlZFRvKHRhcmdldCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZUJlaGF2aW9ycyA9IHN0eWxlcy5iZWhhdmlvcnM7XG4gICAgICAgICAgICBzdHlsZXMucmVtb3ZlU3R5bGVzRnJvbSh0YXJnZXQpO1xuICAgICAgICAgICAgaWYgKHNvdXJjZUJlaGF2aW9ycyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQmVoYXZpb3JzKHNvdXJjZUJlaGF2aW9ycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBiZWhhdmlvcnMgdG8gdGhpcyBlbGVtZW50LlxuICAgICAqIEBwYXJhbSBiZWhhdmlvcnMgLSBUaGUgYmVoYXZpb3JzIHRvIGFkZC5cbiAgICAgKi9cbiAgICBhZGRCZWhhdmlvcnMoYmVoYXZpb3JzKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldEJlaGF2aW9ycyA9IHRoaXMuYmVoYXZpb3JzIHx8ICh0aGlzLmJlaGF2aW9ycyA9IG5ldyBNYXAoKSk7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IGJlaGF2aW9ycy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGJlaGF2aW9yc1RvQmluZCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBiZWhhdmlvciA9IGJlaGF2aW9yc1tpXTtcbiAgICAgICAgICAgIGlmICh0YXJnZXRCZWhhdmlvcnMuaGFzKGJlaGF2aW9yKSkge1xuICAgICAgICAgICAgICAgIHRhcmdldEJlaGF2aW9ycy5zZXQoYmVoYXZpb3IsIHRhcmdldEJlaGF2aW9ycy5nZXQoYmVoYXZpb3IpICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRCZWhhdmlvcnMuc2V0KGJlaGF2aW9yLCAxKTtcbiAgICAgICAgICAgICAgICBiZWhhdmlvcnNUb0JpbmQucHVzaChiZWhhdmlvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2lzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiZWhhdmlvcnNUb0JpbmQubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBiZWhhdmlvcnNUb0JpbmRbaV0uYmluZChlbGVtZW50LCBkZWZhdWx0RXhlY3V0aW9uQ29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBiZWhhdmlvcnMgZnJvbSB0aGlzIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIGJlaGF2aW9ycyAtIFRoZSBiZWhhdmlvcnMgdG8gcmVtb3ZlLlxuICAgICAqIEBwYXJhbSBmb3JjZSAtIEZvcmNlcyB1bmJpbmRpbmcgb2YgYmVoYXZpb3JzLlxuICAgICAqL1xuICAgIHJlbW92ZUJlaGF2aW9ycyhiZWhhdmlvcnMsIGZvcmNlID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0QmVoYXZpb3JzID0gdGhpcy5iZWhhdmlvcnM7XG4gICAgICAgIGlmICh0YXJnZXRCZWhhdmlvcnMgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsZW5ndGggPSBiZWhhdmlvcnMubGVuZ3RoO1xuICAgICAgICBjb25zdCBiZWhhdmlvcnNUb1VuYmluZCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBiZWhhdmlvciA9IGJlaGF2aW9yc1tpXTtcbiAgICAgICAgICAgIGlmICh0YXJnZXRCZWhhdmlvcnMuaGFzKGJlaGF2aW9yKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gdGFyZ2V0QmVoYXZpb3JzLmdldChiZWhhdmlvcikgLSAxO1xuICAgICAgICAgICAgICAgIGNvdW50ID09PSAwIHx8IGZvcmNlXG4gICAgICAgICAgICAgICAgICAgID8gdGFyZ2V0QmVoYXZpb3JzLmRlbGV0ZShiZWhhdmlvcikgJiYgYmVoYXZpb3JzVG9VbmJpbmQucHVzaChiZWhhdmlvcilcbiAgICAgICAgICAgICAgICAgICAgOiB0YXJnZXRCZWhhdmlvcnMuc2V0KGJlaGF2aW9yLCBjb3VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2lzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiZWhhdmlvcnNUb1VuYmluZC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGJlaGF2aW9yc1RvVW5iaW5kW2ldLnVuYmluZChlbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSdW5zIGNvbm5lY3RlZCBsaWZlY3ljbGUgYmVoYXZpb3Igb24gdGhlIGFzc29jaWF0ZWQgZWxlbWVudC5cbiAgICAgKi9cbiAgICBvbkNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBpZiAodGhpcy5faXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuICAgICAgICBpZiAodGhpcy5uZWVkc0luaXRpYWxpemF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmZpbmlzaEluaXRpYWxpemF0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy52aWV3ICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXcuYmluZChlbGVtZW50LCBkZWZhdWx0RXhlY3V0aW9uQ29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYmVoYXZpb3JzID0gdGhpcy5iZWhhdmlvcnM7XG4gICAgICAgIGlmIChiZWhhdmlvcnMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2JlaGF2aW9yXSBvZiBiZWhhdmlvcnMpIHtcbiAgICAgICAgICAgICAgICBiZWhhdmlvci5iaW5kKGVsZW1lbnQsIGRlZmF1bHRFeGVjdXRpb25Db250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldElzQ29ubmVjdGVkKHRydWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSdW5zIGRpc2Nvbm5lY3RlZCBsaWZlY3ljbGUgYmVoYXZpb3Igb24gdGhlIGFzc29jaWF0ZWQgZWxlbWVudC5cbiAgICAgKi9cbiAgICBvbkRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2lzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRJc0Nvbm5lY3RlZChmYWxzZSk7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLnZpZXc7XG4gICAgICAgIGlmICh2aWV3ICE9PSBudWxsKSB7XG4gICAgICAgICAgICB2aWV3LnVuYmluZCgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJlaGF2aW9ycyA9IHRoaXMuYmVoYXZpb3JzO1xuICAgICAgICBpZiAoYmVoYXZpb3JzICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgZm9yIChjb25zdCBbYmVoYXZpb3JdIG9mIGJlaGF2aW9ycykge1xuICAgICAgICAgICAgICAgIGJlaGF2aW9yLnVuYmluZChlbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSdW5zIHRoZSBhdHRyaWJ1dGUgY2hhbmdlZCBjYWxsYmFjayBmb3IgdGhlIGFzc29jaWF0ZWQgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgdGhhdCBjaGFuZ2VkLlxuICAgICAqIEBwYXJhbSBvbGRWYWx1ZSAtIFRoZSBwcmV2aW91cyB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlLlxuICAgICAqIEBwYXJhbSBuZXdWYWx1ZSAtIFRoZSBuZXcgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZS5cbiAgICAgKi9cbiAgICBvbkF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICAgICAgY29uc3QgYXR0ckRlZiA9IHRoaXMuZGVmaW5pdGlvbi5hdHRyaWJ1dGVMb29rdXBbbmFtZV07XG4gICAgICAgIGlmIChhdHRyRGVmICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGF0dHJEZWYub25BdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sodGhpcy5lbGVtZW50LCBuZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRW1pdHMgYSBjdXN0b20gSFRNTCBldmVudC5cbiAgICAgKiBAcGFyYW0gdHlwZSAtIFRoZSB0eXBlIG5hbWUgb2YgdGhlIGV2ZW50LlxuICAgICAqIEBwYXJhbSBkZXRhaWwgLSBUaGUgZXZlbnQgZGV0YWlsIG9iamVjdCB0byBzZW5kIHdpdGggdGhlIGV2ZW50LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIGV2ZW50IG9wdGlvbnMuIEJ5IGRlZmF1bHQgYnViYmxlcyBhbmQgY29tcG9zZWQuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBPbmx5IGVtaXRzIGV2ZW50cyBpZiBjb25uZWN0ZWQuXG4gICAgICovXG4gICAgZW1pdCh0eXBlLCBkZXRhaWwsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuX2lzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KHR5cGUsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IGRldGFpbCB9LCBkZWZhdWx0RXZlbnRPcHRpb25zKSwgb3B0aW9ucykpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZpbmlzaEluaXRpYWxpemF0aW9uKCkge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuICAgICAgICBjb25zdCBib3VuZE9ic2VydmFibGVzID0gdGhpcy5ib3VuZE9ic2VydmFibGVzO1xuICAgICAgICAvLyBJZiB3ZSBoYXZlIGFueSBvYnNlcnZhYmxlcyB0aGF0IHdlcmUgYm91bmQsIHJlLWFwcGx5IHRoZWlyIHZhbHVlcy5cbiAgICAgICAgaWYgKGJvdW5kT2JzZXJ2YWJsZXMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5TmFtZXMgPSBPYmplY3Qua2V5cyhib3VuZE9ic2VydmFibGVzKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHByb3BlcnR5TmFtZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5TmFtZSA9IHByb3BlcnR5TmFtZXNbaV07XG4gICAgICAgICAgICAgICAgZWxlbWVudFtwcm9wZXJ0eU5hbWVdID0gYm91bmRPYnNlcnZhYmxlc1twcm9wZXJ0eU5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ib3VuZE9ic2VydmFibGVzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWZpbml0aW9uID0gdGhpcy5kZWZpbml0aW9uO1xuICAgICAgICAvLyAxLiBUZW1wbGF0ZSBvdmVycmlkZXMgdGFrZSB0b3AgcHJlY2VkZW5jZS5cbiAgICAgICAgaWYgKHRoaXMuX3RlbXBsYXRlID09PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnJlc29sdmVUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIC8vIDIuIEFsbG93IGZvciBlbGVtZW50IGluc3RhbmNlIG92ZXJyaWRlcyBuZXh0LlxuICAgICAgICAgICAgICAgIHRoaXMuX3RlbXBsYXRlID0gdGhpcy5lbGVtZW50LnJlc29sdmVUZW1wbGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGVmaW5pdGlvbi50ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIC8vIDMuIERlZmF1bHQgdG8gdGhlIHN0YXRpYyBkZWZpbml0aW9uLlxuICAgICAgICAgICAgICAgIHRoaXMuX3RlbXBsYXRlID0gZGVmaW5pdGlvbi50ZW1wbGF0ZSB8fCBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIElmIHdlIGhhdmUgYSB0ZW1wbGF0ZSBhZnRlciB0aGUgYWJvdmUgcHJvY2VzcywgcmVuZGVyIGl0LlxuICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIHRlbXBsYXRlLCB0aGVuIHRoZSBlbGVtZW50IGF1dGhvciBoYXMgb3B0ZWQgaW50b1xuICAgICAgICAvLyBjdXN0b20gcmVuZGVyaW5nIGFuZCB0aGV5IHdpbGwgbWFuYWdlZCB0aGUgc2hhZG93IHJvb3QncyBjb250ZW50IHRoZW1zZWx2ZXMuXG4gICAgICAgIGlmICh0aGlzLl90ZW1wbGF0ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJUZW1wbGF0ZSh0aGlzLl90ZW1wbGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gMS4gU3R5bGVzIG92ZXJyaWRlcyB0YWtlIHRvcCBwcmVjZWRlbmNlLlxuICAgICAgICBpZiAodGhpcy5fc3R5bGVzID09PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnJlc29sdmVTdHlsZXMpIHtcbiAgICAgICAgICAgICAgICAvLyAyLiBBbGxvdyBmb3IgZWxlbWVudCBpbnN0YW5jZSBvdmVycmlkZXMgbmV4dC5cbiAgICAgICAgICAgICAgICB0aGlzLl9zdHlsZXMgPSB0aGlzLmVsZW1lbnQucmVzb2x2ZVN0eWxlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGVmaW5pdGlvbi5zdHlsZXMpIHtcbiAgICAgICAgICAgICAgICAvLyAzLiBEZWZhdWx0IHRvIHRoZSBzdGF0aWMgZGVmaW5pdGlvbi5cbiAgICAgICAgICAgICAgICB0aGlzLl9zdHlsZXMgPSBkZWZpbml0aW9uLnN0eWxlcyB8fCBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIElmIHdlIGhhdmUgc3R5bGVzIGFmdGVyIHRoZSBhYm92ZSBwcm9jZXNzLCBhZGQgdGhlbS5cbiAgICAgICAgaWYgKHRoaXMuX3N0eWxlcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5hZGRTdHlsZXModGhpcy5fc3R5bGVzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5lZWRzSW5pdGlhbGl6YXRpb24gPSBmYWxzZTtcbiAgICB9XG4gICAgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgLy8gV2hlbiBnZXR0aW5nIHRoZSBob3N0IHRvIHJlbmRlciB0bywgd2Ugc3RhcnQgYnkgbG9va2luZ1xuICAgICAgICAvLyB1cCB0aGUgc2hhZG93IHJvb3QuIElmIHRoZXJlIGlzbid0IG9uZSwgdGhlbiB0aGF0IG1lYW5zXG4gICAgICAgIC8vIHdlJ3JlIGRvaW5nIGEgTGlnaHQgRE9NIHJlbmRlciB0byB0aGUgZWxlbWVudCdzIGRpcmVjdCBjaGlsZHJlbi5cbiAgICAgICAgY29uc3QgaG9zdCA9IGdldFNoYWRvd1Jvb3QoZWxlbWVudCkgfHwgZWxlbWVudDtcbiAgICAgICAgaWYgKHRoaXMudmlldyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhbHJlYWR5IGEgdmlldywgd2UgbmVlZCB0byB1bmJpbmQgYW5kIHJlbW92ZSB0aHJvdWdoIGRpc3Bvc2UuXG4gICAgICAgICAgICB0aGlzLnZpZXcuZGlzcG9zZSgpO1xuICAgICAgICAgICAgdGhpcy52aWV3ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghdGhpcy5uZWVkc0luaXRpYWxpemF0aW9uKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSB3YXMgcHJldmlvdXMgY3VzdG9tIHJlbmRlcmluZywgd2UgbmVlZCB0byBjbGVhciBvdXQgdGhlIGhvc3QuXG4gICAgICAgICAgICBET00ucmVtb3ZlQ2hpbGROb2Rlcyhob3N0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgICAgICAgIC8vIElmIGEgbmV3IHRlbXBsYXRlIHdhcyBwcm92aWRlZCwgcmVuZGVyIGl0LlxuICAgICAgICAgICAgdGhpcy52aWV3ID0gdGVtcGxhdGUucmVuZGVyKGVsZW1lbnQsIGhvc3QsIGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvY2F0ZXMgb3IgY3JlYXRlcyBhIGNvbnRyb2xsZXIgZm9yIHRoZSBzcGVjaWZpZWQgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0gZWxlbWVudCAtIFRoZSBlbGVtZW50IHRvIHJldHVybiB0aGUgY29udHJvbGxlciBmb3IuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGUgc3BlY2lmaWVkIGVsZW1lbnQgbXVzdCBoYXZlIGEge0BsaW5rIEZBU1RFbGVtZW50RGVmaW5pdGlvbn1cbiAgICAgKiByZWdpc3RlcmVkIGVpdGhlciB0aHJvdWdoIHRoZSB1c2Ugb2YgdGhlIHtAbGluayBjdXN0b21FbGVtZW50fVxuICAgICAqIGRlY29yYXRvciBvciBhIGNhbGwgdG8gYEZBU1RFbGVtZW50LmRlZmluZWAuXG4gICAgICovXG4gICAgc3RhdGljIGZvckN1c3RvbUVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gZWxlbWVudC4kZmFzdENvbnRyb2xsZXI7XG4gICAgICAgIGlmIChjb250cm9sbGVyICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHJldHVybiBjb250cm9sbGVyO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlZmluaXRpb24gPSBGQVNURWxlbWVudERlZmluaXRpb24uZm9yVHlwZShlbGVtZW50LmNvbnN0cnVjdG9yKTtcbiAgICAgICAgaWYgKGRlZmluaXRpb24gPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBGQVNURWxlbWVudCBkZWZpbml0aW9uLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKGVsZW1lbnQuJGZhc3RDb250cm9sbGVyID0gbmV3IENvbnRyb2xsZXIoZWxlbWVudCwgZGVmaW5pdGlvbikpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiLi9jb250cm9sbGVyLmpzXCI7XG5pbXBvcnQgeyBGQVNURWxlbWVudERlZmluaXRpb24sIH0gZnJvbSBcIi4vZmFzdC1kZWZpbml0aW9ucy5qc1wiO1xuLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1mdW5jdGlvbi1yZXR1cm4tdHlwZSAqL1xuZnVuY3Rpb24gY3JlYXRlRkFTVEVsZW1lbnQoQmFzZVR5cGUpIHtcbiAgICByZXR1cm4gY2xhc3MgZXh0ZW5kcyBCYXNlVHlwZSB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lICovXG4gICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgQ29udHJvbGxlci5mb3JDdXN0b21FbGVtZW50KHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgICRlbWl0KHR5cGUsIGRldGFpbCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGZhc3RDb250cm9sbGVyLmVtaXQodHlwZSwgZGV0YWlsLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIHRoaXMuJGZhc3RDb250cm9sbGVyLm9uQ29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIHRoaXMuJGZhc3RDb250cm9sbGVyLm9uRGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLiRmYXN0Q29udHJvbGxlci5vbkF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbn1cbi8qKlxuICogQSBtaW5pbWFsIGJhc2UgY2xhc3MgZm9yIEZBU1RFbGVtZW50cyB0aGF0IGFsc28gcHJvdmlkZXNcbiAqIHN0YXRpYyBoZWxwZXJzIGZvciB3b3JraW5nIHdpdGggRkFTVEVsZW1lbnRzLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgRkFTVEVsZW1lbnQgPSBPYmplY3QuYXNzaWduKGNyZWF0ZUZBU1RFbGVtZW50KEhUTUxFbGVtZW50KSwge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgRkFTVEVsZW1lbnQgYmFzZSBjbGFzcyBpbmhlcml0ZWQgZnJvbSB0aGVcbiAgICAgKiBwcm92aWRlZCBiYXNlIHR5cGUuXG4gICAgICogQHBhcmFtIEJhc2VUeXBlIC0gVGhlIGJhc2UgZWxlbWVudCB0eXBlIHRvIGluaGVyaXQgZnJvbS5cbiAgICAgKi9cbiAgICBmcm9tKEJhc2VUeXBlKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVGQVNURWxlbWVudChCYXNlVHlwZSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBEZWZpbmVzIGEgcGxhdGZvcm0gY3VzdG9tIGVsZW1lbnQgYmFzZWQgb24gdGhlIHByb3ZpZGVkIHR5cGUgYW5kIGRlZmluaXRpb24uXG4gICAgICogQHBhcmFtIHR5cGUgLSBUaGUgY3VzdG9tIGVsZW1lbnQgdHlwZSB0byBkZWZpbmUuXG4gICAgICogQHBhcmFtIG5hbWVPckRlZiAtIFRoZSBuYW1lIG9mIHRoZSBlbGVtZW50IHRvIGRlZmluZSBvciBhIGRlZmluaXRpb24gb2JqZWN0XG4gICAgICogdGhhdCBkZXNjcmliZXMgdGhlIGVsZW1lbnQgdG8gZGVmaW5lLlxuICAgICAqL1xuICAgIGRlZmluZSh0eXBlLCBuYW1lT3JEZWYpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGQVNURWxlbWVudERlZmluaXRpb24odHlwZSwgbmFtZU9yRGVmKS5kZWZpbmUoKS50eXBlO1xuICAgIH0sXG59KTtcbi8qKlxuICogRGVjb3JhdG9yOiBEZWZpbmVzIGEgcGxhdGZvcm0gY3VzdG9tIGVsZW1lbnQgYmFzZWQgb24gYEZBU1RFbGVtZW50YC5cbiAqIEBwYXJhbSBuYW1lT3JEZWYgLSBUaGUgbmFtZSBvZiB0aGUgZWxlbWVudCB0byBkZWZpbmUgb3IgYSBkZWZpbml0aW9uIG9iamVjdFxuICogdGhhdCBkZXNjcmliZXMgdGhlIGVsZW1lbnQgdG8gZGVmaW5lLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3VzdG9tRWxlbWVudChuYW1lT3JEZWYpIHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LWZ1bmN0aW9uLXJldHVybi10eXBlICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgIG5ldyBGQVNURWxlbWVudERlZmluaXRpb24odHlwZSwgbmFtZU9yRGVmKS5kZWZpbmUoKTtcbiAgICB9O1xufVxuIiwiLyoqXG4gKiBEaXJlY3RpdmUgZm9yIHVzZSBpbiB7QGxpbmsgY3NzfS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBDU1NEaXJlY3RpdmUge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBDU1MgZnJhZ21lbnQgdG8gaW50ZXJwb2xhdGUgaW50byB0aGUgQ1NTIGRvY3VtZW50LlxuICAgICAqIEByZXR1cm5zIC0gdGhlIHN0cmluZyB0byBpbnRlcnBvbGF0ZSBpbnRvIENTU1xuICAgICAqL1xuICAgIGNyZWF0ZUNTUygpIHtcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBiZWhhdmlvciB0byBiaW5kIHRvIHRoZSBob3N0IGVsZW1lbnQuXG4gICAgICogQHJldHVybnMgLSB0aGUgYmVoYXZpb3IgdG8gYmluZCB0byB0aGUgaG9zdCBlbGVtZW50LCBvciB1bmRlZmluZWQuXG4gICAgICovXG4gICAgY3JlYXRlQmVoYXZpb3IoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ1NTRGlyZWN0aXZlIH0gZnJvbSBcIi4vY3NzLWRpcmVjdGl2ZS5qc1wiO1xuaW1wb3J0IHsgRWxlbWVudFN0eWxlcyB9IGZyb20gXCIuL2VsZW1lbnQtc3R5bGVzLmpzXCI7XG5mdW5jdGlvbiBjb2xsZWN0U3R5bGVzKHN0cmluZ3MsIHZhbHVlcykge1xuICAgIGNvbnN0IHN0eWxlcyA9IFtdO1xuICAgIGxldCBjc3NTdHJpbmcgPSBcIlwiO1xuICAgIGNvbnN0IGJlaGF2aW9ycyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHN0cmluZ3MubGVuZ3RoIC0gMTsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgY3NzU3RyaW5nICs9IHN0cmluZ3NbaV07XG4gICAgICAgIGxldCB2YWx1ZSA9IHZhbHVlc1tpXTtcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQ1NTRGlyZWN0aXZlKSB7XG4gICAgICAgICAgICBjb25zdCBiZWhhdmlvciA9IHZhbHVlLmNyZWF0ZUJlaGF2aW9yKCk7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmNyZWF0ZUNTUygpO1xuICAgICAgICAgICAgaWYgKGJlaGF2aW9yKSB7XG4gICAgICAgICAgICAgICAgYmVoYXZpb3JzLnB1c2goYmVoYXZpb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEVsZW1lbnRTdHlsZXMgfHwgdmFsdWUgaW5zdGFuY2VvZiBDU1NTdHlsZVNoZWV0KSB7XG4gICAgICAgICAgICBpZiAoY3NzU3RyaW5nLnRyaW0oKSAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIHN0eWxlcy5wdXNoKGNzc1N0cmluZyk7XG4gICAgICAgICAgICAgICAgY3NzU3RyaW5nID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0eWxlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNzc1N0cmluZyArPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjc3NTdHJpbmcgKz0gc3RyaW5nc1tzdHJpbmdzLmxlbmd0aCAtIDFdO1xuICAgIGlmIChjc3NTdHJpbmcudHJpbSgpICE9PSBcIlwiKSB7XG4gICAgICAgIHN0eWxlcy5wdXNoKGNzc1N0cmluZyk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHN0eWxlcyxcbiAgICAgICAgYmVoYXZpb3JzLFxuICAgIH07XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgYSB0ZW1wbGF0ZSBsaXRlcmFsIHN0cmluZyBpbnRvIHN0eWxlcy5cbiAqIEBwYXJhbSBzdHJpbmdzIC0gVGhlIHN0cmluZyBmcmFnbWVudHMgdGhhdCBhcmUgaW50ZXJwb2xhdGVkIHdpdGggdGhlIHZhbHVlcy5cbiAqIEBwYXJhbSB2YWx1ZXMgLSBUaGUgdmFsdWVzIHRoYXQgYXJlIGludGVycG9sYXRlZCB3aXRoIHRoZSBzdHJpbmcgZnJhZ21lbnRzLlxuICogQHJlbWFya3NcbiAqIFRoZSBjc3MgaGVscGVyIHN1cHBvcnRzIGludGVycG9sYXRpb24gb2Ygc3RyaW5ncyBhbmQgRWxlbWVudFN0eWxlIGluc3RhbmNlcy5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNzcyhzdHJpbmdzLCAuLi52YWx1ZXMpIHtcbiAgICBjb25zdCB7IHN0eWxlcywgYmVoYXZpb3JzIH0gPSBjb2xsZWN0U3R5bGVzKHN0cmluZ3MsIHZhbHVlcyk7XG4gICAgY29uc3QgZWxlbWVudFN0eWxlcyA9IEVsZW1lbnRTdHlsZXMuY3JlYXRlKHN0eWxlcyk7XG4gICAgaWYgKGJlaGF2aW9ycy5sZW5ndGgpIHtcbiAgICAgICAgZWxlbWVudFN0eWxlcy53aXRoQmVoYXZpb3JzKC4uLmJlaGF2aW9ycyk7XG4gICAgfVxuICAgIHJldHVybiBlbGVtZW50U3R5bGVzO1xufVxuY2xhc3MgQ1NTUGFydGlhbCBleHRlbmRzIENTU0RpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3Ioc3R5bGVzLCBiZWhhdmlvcnMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5iZWhhdmlvcnMgPSBiZWhhdmlvcnM7XG4gICAgICAgIHRoaXMuY3NzID0gXCJcIjtcbiAgICAgICAgY29uc3Qgc3R5bGVzaGVldHMgPSBzdHlsZXMucmVkdWNlKChhY2N1bXVsYXRlZCwgY3VycmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjdXJyZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jc3MgKz0gY3VycmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkLnB1c2goY3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYWNjdW11bGF0ZWQ7XG4gICAgICAgIH0sIFtdKTtcbiAgICAgICAgaWYgKHN0eWxlc2hlZXRzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5zdHlsZXMgPSBFbGVtZW50U3R5bGVzLmNyZWF0ZShzdHlsZXNoZWV0cyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlQmVoYXZpb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBjcmVhdGVDU1MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNzcztcbiAgICB9XG4gICAgYmluZChlbCkge1xuICAgICAgICBpZiAodGhpcy5zdHlsZXMpIHtcbiAgICAgICAgICAgIGVsLiRmYXN0Q29udHJvbGxlci5hZGRTdHlsZXModGhpcy5zdHlsZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmJlaGF2aW9ycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGVsLiRmYXN0Q29udHJvbGxlci5hZGRCZWhhdmlvcnModGhpcy5iZWhhdmlvcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVuYmluZChlbCkge1xuICAgICAgICBpZiAodGhpcy5zdHlsZXMpIHtcbiAgICAgICAgICAgIGVsLiRmYXN0Q29udHJvbGxlci5yZW1vdmVTdHlsZXModGhpcy5zdHlsZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmJlaGF2aW9ycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGVsLiRmYXN0Q29udHJvbGxlci5yZW1vdmVCZWhhdmlvcnModGhpcy5iZWhhdmlvcnMpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIGEgdGVtcGxhdGUgbGl0ZXJhbCBzdHJpbmcgaW50byBwYXJ0aWFsIENTUy5cbiAqIEBwYXJhbSBzdHJpbmdzIC0gVGhlIHN0cmluZyBmcmFnbWVudHMgdGhhdCBhcmUgaW50ZXJwb2xhdGVkIHdpdGggdGhlIHZhbHVlcy5cbiAqIEBwYXJhbSB2YWx1ZXMgLSBUaGUgdmFsdWVzIHRoYXQgYXJlIGludGVycG9sYXRlZCB3aXRoIHRoZSBzdHJpbmcgZnJhZ21lbnRzLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3NzUGFydGlhbChzdHJpbmdzLCAuLi52YWx1ZXMpIHtcbiAgICBjb25zdCB7IHN0eWxlcywgYmVoYXZpb3JzIH0gPSBjb2xsZWN0U3R5bGVzKHN0cmluZ3MsIHZhbHVlcyk7XG4gICAgcmV0dXJuIG5ldyBDU1NQYXJ0aWFsKHN0eWxlcywgYmVoYXZpb3JzKTtcbn1cbiIsImltcG9ydCB7IEF0dGFjaGVkQmVoYXZpb3JIVE1MRGlyZWN0aXZlIH0gZnJvbSBcIi4vaHRtbC1kaXJlY3RpdmUuanNcIjtcbi8qKlxuICogVGhlIHJ1bnRpbWUgYmVoYXZpb3IgZm9yIHRlbXBsYXRlIHJlZmVyZW5jZXMuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWZCZWhhdmlvciB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBSZWZCZWhhdmlvci5cbiAgICAgKiBAcGFyYW0gdGFyZ2V0IC0gVGhlIGVsZW1lbnQgdG8gcmVmZXJlbmNlLlxuICAgICAqIEBwYXJhbSBwcm9wZXJ0eU5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gYXNzaWduIHRoZSByZWZlcmVuY2UgdG8uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodGFyZ2V0LCBwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIHRoaXMucHJvcGVydHlOYW1lID0gcHJvcGVydHlOYW1lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCaW5kIHRoaXMgYmVoYXZpb3IgdG8gdGhlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0gc291cmNlIC0gVGhlIHNvdXJjZSB0byBiaW5kIHRvLlxuICAgICAqIEBwYXJhbSBjb250ZXh0IC0gVGhlIGV4ZWN1dGlvbiBjb250ZXh0IHRoYXQgdGhlIGJpbmRpbmcgaXMgb3BlcmF0aW5nIHdpdGhpbi5cbiAgICAgKi9cbiAgICBiaW5kKHNvdXJjZSkge1xuICAgICAgICBzb3VyY2VbdGhpcy5wcm9wZXJ0eU5hbWVdID0gdGhpcy50YXJnZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVuYmluZHMgdGhpcyBiZWhhdmlvciBmcm9tIHRoZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHNvdXJjZSAtIFRoZSBzb3VyY2UgdG8gdW5iaW5kIGZyb20uXG4gICAgICovXG4gICAgLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvbiAqL1xuICAgIHVuYmluZCgpIHsgfVxufVxuLyoqXG4gKiBBIGRpcmVjdGl2ZSB0aGF0IG9ic2VydmVzIHRoZSB1cGRhdGVzIGEgcHJvcGVydHkgd2l0aCBhIHJlZmVyZW5jZSB0byB0aGUgZWxlbWVudC5cbiAqIEBwYXJhbSBwcm9wZXJ0eU5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gYXNzaWduIHRoZSByZWZlcmVuY2UgdG8uXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWYocHJvcGVydHlOYW1lKSB7XG4gICAgcmV0dXJuIG5ldyBBdHRhY2hlZEJlaGF2aW9ySFRNTERpcmVjdGl2ZShcImZhc3QtcmVmXCIsIFJlZkJlaGF2aW9yLCBwcm9wZXJ0eU5hbWUpO1xufVxuIiwiLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgb3Igbm90IGFuIG9iamVjdCBpcyBhIGZ1bmN0aW9uLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgaXNGdW5jdGlvbiA9IChvYmplY3QpID0+IHR5cGVvZiBvYmplY3QgPT09IFwiZnVuY3Rpb25cIjtcbiIsImltcG9ydCB7IGlzRnVuY3Rpb24gfSBmcm9tIFwiLi4vaW50ZXJmYWNlcy5qc1wiO1xuY29uc3Qgbm9UZW1wbGF0ZSA9ICgpID0+IG51bGw7XG5mdW5jdGlvbiBub3JtYWxpemVCaW5kaW5nKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPyBub1RlbXBsYXRlIDogaXNGdW5jdGlvbih2YWx1ZSkgPyB2YWx1ZSA6ICgpID0+IHZhbHVlO1xufVxuLyoqXG4gKiBBIGRpcmVjdGl2ZSB0aGF0IGVuYWJsZXMgYmFzaWMgY29uZGl0aW9uYWwgcmVuZGVyaW5nIGluIGEgdGVtcGxhdGUuXG4gKiBAcGFyYW0gYmluZGluZyAtIFRoZSBjb25kaXRpb24gdG8gdGVzdCBmb3IgcmVuZGVyaW5nLlxuICogQHBhcmFtIHRlbXBsYXRlT3JUZW1wbGF0ZUJpbmRpbmcgLSBUaGUgdGVtcGxhdGUgb3IgYSBiaW5kaW5nIHRoYXQgZ2V0c1xuICogdGhlIHRlbXBsYXRlIHRvIHJlbmRlciB3aGVuIHRoZSBjb25kaXRpb24gaXMgdHJ1ZS5cbiAqIEBwYXJhbSBlbHNlVGVtcGxhdGVPclRlbXBsYXRlQmluZGluZyAtIE9wdGlvbmFsIHRlbXBsYXRlIG9yIGJpbmRpbmcgdGhhdCB0aGF0XG4gKiBnZXRzIHRoZSB0ZW1wbGF0ZSB0byByZW5kZXIgd2hlbiB0aGUgY29uZGl0aW9uYWwgaXMgZmFsc2UuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aGVuKGJpbmRpbmcsIHRlbXBsYXRlT3JUZW1wbGF0ZUJpbmRpbmcsIGVsc2VUZW1wbGF0ZU9yVGVtcGxhdGVCaW5kaW5nKSB7XG4gICAgY29uc3QgZGF0YUJpbmRpbmcgPSBpc0Z1bmN0aW9uKGJpbmRpbmcpID8gYmluZGluZyA6ICgpID0+IGJpbmRpbmc7XG4gICAgY29uc3QgdGVtcGxhdGVCaW5kaW5nID0gbm9ybWFsaXplQmluZGluZyh0ZW1wbGF0ZU9yVGVtcGxhdGVCaW5kaW5nKTtcbiAgICBjb25zdCBlbHNlQmluZGluZyA9IG5vcm1hbGl6ZUJpbmRpbmcoZWxzZVRlbXBsYXRlT3JUZW1wbGF0ZUJpbmRpbmcpO1xuICAgIHJldHVybiAoc291cmNlLCBjb250ZXh0KSA9PiBkYXRhQmluZGluZyhzb3VyY2UsIGNvbnRleHQpXG4gICAgICAgID8gdGVtcGxhdGVCaW5kaW5nKHNvdXJjZSwgY29udGV4dClcbiAgICAgICAgOiBlbHNlQmluZGluZyhzb3VyY2UsIGNvbnRleHQpO1xufVxuIiwiaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gXCIuLi9vYnNlcnZhdGlvbi9vYnNlcnZhYmxlLmpzXCI7XG5pbXBvcnQgeyBlbXB0eUFycmF5IH0gZnJvbSBcIi4uL3BsYXRmb3JtLmpzXCI7XG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGZpbHRlciBhIE5vZGUgYXJyYXksIHNlbGVjdGluZyBvbmx5IGVsZW1lbnRzLlxuICogQHBhcmFtIHNlbGVjdG9yIC0gQW4gb3B0aW9uYWwgc2VsZWN0b3IgdG8gcmVzdHJpY3QgdGhlIGZpbHRlciB0by5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVsZW1lbnRzKHNlbGVjdG9yKSB7XG4gICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsdWUsIGluZGV4LCBhcnJheSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLm5vZGVUeXBlID09PSAxICYmIHZhbHVlLm1hdGNoZXMoc2VsZWN0b3IpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLm5vZGVUeXBlID09PSAxO1xuICAgIH07XG59XG4vKipcbiAqIEEgYmFzZSBjbGFzcyBmb3Igbm9kZSBvYnNlcnZhdGlvbi5cbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY2xhc3MgTm9kZU9ic2VydmF0aW9uQmVoYXZpb3Ige1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgTm9kZU9ic2VydmF0aW9uQmVoYXZpb3IuXG4gICAgICogQHBhcmFtIHRhcmdldCAtIFRoZSB0YXJnZXQgdG8gYXNzaWduIHRoZSBub2RlcyBwcm9wZXJ0eSBvbi5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIHRvIHVzZSBpbiBjb25maWd1cmluZyBub2RlIG9ic2VydmF0aW9uLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRhcmdldCwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCaW5kIHRoaXMgYmVoYXZpb3IgdG8gdGhlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0gc291cmNlIC0gVGhlIHNvdXJjZSB0byBiaW5kIHRvLlxuICAgICAqIEBwYXJhbSBjb250ZXh0IC0gVGhlIGV4ZWN1dGlvbiBjb250ZXh0IHRoYXQgdGhlIGJpbmRpbmcgaXMgb3BlcmF0aW5nIHdpdGhpbi5cbiAgICAgKi9cbiAgICBiaW5kKHNvdXJjZSkge1xuICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5vcHRpb25zLnByb3BlcnR5O1xuICAgICAgICB0aGlzLnNob3VsZFVwZGF0ZSA9IE9ic2VydmFibGUuZ2V0QWNjZXNzb3JzKHNvdXJjZSkuc29tZSgoeCkgPT4geC5uYW1lID09PSBuYW1lKTtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMudXBkYXRlVGFyZ2V0KHRoaXMuY29tcHV0ZU5vZGVzKCkpO1xuICAgICAgICBpZiAodGhpcy5zaG91bGRVcGRhdGUpIHtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVuYmluZHMgdGhpcyBiZWhhdmlvciBmcm9tIHRoZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHNvdXJjZSAtIFRoZSBzb3VyY2UgdG8gdW5iaW5kIGZyb20uXG4gICAgICovXG4gICAgdW5iaW5kKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVRhcmdldChlbXB0eUFycmF5KTtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5zaG91bGRVcGRhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBoYW5kbGVFdmVudCgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVUYXJnZXQodGhpcy5jb21wdXRlTm9kZXMoKSk7XG4gICAgfVxuICAgIGNvbXB1dGVOb2RlcygpIHtcbiAgICAgICAgbGV0IG5vZGVzID0gdGhpcy5nZXROb2RlcygpO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmZpbHRlciAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBub2RlcyA9IG5vZGVzLmZpbHRlcih0aGlzLm9wdGlvbnMuZmlsdGVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm9kZXM7XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldCh2YWx1ZSkge1xuICAgICAgICB0aGlzLnNvdXJjZVt0aGlzLm9wdGlvbnMucHJvcGVydHldID0gdmFsdWU7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQXR0YWNoZWRCZWhhdmlvckhUTUxEaXJlY3RpdmUgfSBmcm9tIFwiLi9odG1sLWRpcmVjdGl2ZS5qc1wiO1xuaW1wb3J0IHsgTm9kZU9ic2VydmF0aW9uQmVoYXZpb3IgfSBmcm9tIFwiLi9ub2RlLW9ic2VydmF0aW9uLmpzXCI7XG4vKipcbiAqIFRoZSBydW50aW1lIGJlaGF2aW9yIGZvciBzbG90dGVkIG5vZGUgb2JzZXJ2YXRpb24uXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBTbG90dGVkQmVoYXZpb3IgZXh0ZW5kcyBOb2RlT2JzZXJ2YXRpb25CZWhhdmlvciB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBTbG90dGVkQmVoYXZpb3IuXG4gICAgICogQHBhcmFtIHRhcmdldCAtIFRoZSBzbG90IGVsZW1lbnQgdGFyZ2V0IHRvIG9ic2VydmUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyB0byB1c2Ugd2hlbiBvYnNlcnZpbmcgdGhlIHNsb3QuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodGFyZ2V0LCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKHRhcmdldCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJlZ2lucyBvYnNlcnZhdGlvbiBvZiB0aGUgbm9kZXMuXG4gICAgICovXG4gICAgb2JzZXJ2ZSgpIHtcbiAgICAgICAgdGhpcy50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcInNsb3RjaGFuZ2VcIiwgdGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc2Nvbm5lY3RzIG9ic2VydmF0aW9uIG9mIHRoZSBub2Rlcy5cbiAgICAgKi9cbiAgICBkaXNjb25uZWN0KCkge1xuICAgICAgICB0aGlzLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwic2xvdGNoYW5nZVwiLCB0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBub2RlcyB0aGF0IHNob3VsZCBiZSBhc3NpZ25lZCB0byB0aGUgdGFyZ2V0LlxuICAgICAqL1xuICAgIGdldE5vZGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50YXJnZXQuYXNzaWduZWROb2Rlcyh0aGlzLm9wdGlvbnMpO1xuICAgIH1cbn1cbi8qKlxuICogQSBkaXJlY3RpdmUgdGhhdCBvYnNlcnZlcyB0aGUgYGFzc2lnbmVkTm9kZXMoKWAgb2YgYSBzbG90IGFuZCB1cGRhdGVzIGEgcHJvcGVydHlcbiAqIHdoZW5ldmVyIHRoZXkgY2hhbmdlLlxuICogQHBhcmFtIHByb3BlcnR5T3JPcHRpb25zIC0gVGhlIG9wdGlvbnMgdXNlZCB0byBjb25maWd1cmUgc2xvdHRlZCBub2RlIG9ic2VydmF0aW9uLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2xvdHRlZChwcm9wZXJ0eU9yT3B0aW9ucykge1xuICAgIGlmICh0eXBlb2YgcHJvcGVydHlPck9wdGlvbnMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcHJvcGVydHlPck9wdGlvbnMgPSB7IHByb3BlcnR5OiBwcm9wZXJ0eU9yT3B0aW9ucyB9O1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEF0dGFjaGVkQmVoYXZpb3JIVE1MRGlyZWN0aXZlKFwiZmFzdC1zbG90dGVkXCIsIFNsb3R0ZWRCZWhhdmlvciwgcHJvcGVydHlPck9wdGlvbnMpO1xufVxuIiwiaW1wb3J0IHsgaHRtbCwgcmVmIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG4vKipcbiAqIEEgbWl4aW4gY2xhc3MgaW1wbGVtZW50aW5nIHN0YXJ0IGFuZCBlbmQgZWxlbWVudHMuXG4gKiBUaGVzZSBhcmUgZ2VuZXJhbGx5IHVzZWQgdG8gZGVjb3JhdGUgdGV4dCBlbGVtZW50cyB3aXRoIGljb25zIG9yIG90aGVyIHZpc3VhbCBpbmRpY2F0b3JzLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgU3RhcnRFbmQge1xuICAgIGhhbmRsZVN0YXJ0Q29udGVudENoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5zdGFydENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwic3RhcnRcIiwgdGhpcy5zdGFydC5hc3NpZ25lZE5vZGVzKCkubGVuZ3RoID4gMCk7XG4gICAgfVxuICAgIGhhbmRsZUVuZENvbnRlbnRDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMuZW5kQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJlbmRcIiwgdGhpcy5lbmQuYXNzaWduZWROb2RlcygpLmxlbmd0aCA+IDApO1xuICAgIH1cbn1cbi8qKlxuICogVGhlIHRlbXBsYXRlIGZvciB0aGUgZW5kIGVsZW1lbnQuXG4gKiBGb3IgdXNlIHdpdGgge0BsaW5rIFN0YXJ0RW5kfVxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGVuZFNsb3RUZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBodG1sIGBcbiAgICA8c3BhblxuICAgICAgICBwYXJ0PVwiZW5kXCJcbiAgICAgICAgJHtyZWYoXCJlbmRDb250YWluZXJcIil9XG4gICAgICAgIGNsYXNzPSR7eCA9PiAoZGVmaW5pdGlvbi5lbmQgPyBcImVuZFwiIDogdm9pZCAwKX1cbiAgICA+XG4gICAgICAgIDxzbG90IG5hbWU9XCJlbmRcIiAke3JlZihcImVuZFwiKX0gQHNsb3RjaGFuZ2U9XCIke3ggPT4geC5oYW5kbGVFbmRDb250ZW50Q2hhbmdlKCl9XCI+XG4gICAgICAgICAgICAke2RlZmluaXRpb24uZW5kIHx8IFwiXCJ9XG4gICAgICAgIDwvc2xvdD5cbiAgICA8L3NwYW4+XG5gO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSBzdGFydCBlbGVtZW50LlxuICogRm9yIHVzZSB3aXRoIHtAbGluayBTdGFydEVuZH1cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBzdGFydFNsb3RUZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBodG1sIGBcbiAgICA8c3BhblxuICAgICAgICBwYXJ0PVwic3RhcnRcIlxuICAgICAgICAke3JlZihcInN0YXJ0Q29udGFpbmVyXCIpfVxuICAgICAgICBjbGFzcz1cIiR7eCA9PiAoZGVmaW5pdGlvbi5zdGFydCA/IFwic3RhcnRcIiA6IHZvaWQgMCl9XCJcbiAgICA+XG4gICAgICAgIDxzbG90XG4gICAgICAgICAgICBuYW1lPVwic3RhcnRcIlxuICAgICAgICAgICAgJHtyZWYoXCJzdGFydFwiKX1cbiAgICAgICAgICAgIEBzbG90Y2hhbmdlPVwiJHt4ID0+IHguaGFuZGxlU3RhcnRDb250ZW50Q2hhbmdlKCl9XCJcbiAgICAgICAgPlxuICAgICAgICAgICAgJHtkZWZpbml0aW9uLnN0YXJ0IHx8IFwiXCJ9XG4gICAgICAgIDwvc2xvdD5cbiAgICA8L3NwYW4+XG5gO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSBlbmQgZWxlbWVudC5cbiAqIEZvciB1c2Ugd2l0aCB7QGxpbmsgU3RhcnRFbmR9XG4gKlxuICogQHB1YmxpY1xuICogQGRlcHJlY2F0ZWQgLSB1c2UgZW5kU2xvdFRlbXBsYXRlXG4gKi9cbmV4cG9ydCBjb25zdCBlbmRUZW1wbGF0ZSA9IGh0bWwgYFxuICAgIDxzcGFuIHBhcnQ9XCJlbmRcIiAke3JlZihcImVuZENvbnRhaW5lclwiKX0+XG4gICAgICAgIDxzbG90XG4gICAgICAgICAgICBuYW1lPVwiZW5kXCJcbiAgICAgICAgICAgICR7cmVmKFwiZW5kXCIpfVxuICAgICAgICAgICAgQHNsb3RjaGFuZ2U9XCIke3ggPT4geC5oYW5kbGVFbmRDb250ZW50Q2hhbmdlKCl9XCJcbiAgICAgICAgPjwvc2xvdD5cbiAgICA8L3NwYW4+XG5gO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSBzdGFydCBlbGVtZW50LlxuICogRm9yIHVzZSB3aXRoIHtAbGluayBTdGFydEVuZH1cbiAqXG4gKiBAcHVibGljXG4gKiBAZGVwcmVjYXRlZCAtIHVzZSBzdGFydFNsb3RUZW1wbGF0ZVxuICovXG5leHBvcnQgY29uc3Qgc3RhcnRUZW1wbGF0ZSA9IGh0bWwgYFxuICAgIDxzcGFuIHBhcnQ9XCJzdGFydFwiICR7cmVmKFwic3RhcnRDb250YWluZXJcIil9PlxuICAgICAgICA8c2xvdFxuICAgICAgICAgICAgbmFtZT1cInN0YXJ0XCJcbiAgICAgICAgICAgICR7cmVmKFwic3RhcnRcIil9XG4gICAgICAgICAgICBAc2xvdGNoYW5nZT1cIiR7eCA9PiB4LmhhbmRsZVN0YXJ0Q29udGVudENoYW5nZSgpfVwiXG4gICAgICAgID48L3Nsb3Q+XG4gICAgPC9zcGFuPlxuYDtcbiIsIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NyZWF0ZUJpbmRpbmcobywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRHZXQocmVjZWl2ZXIsIHByaXZhdGVNYXApIHtcclxuICAgIGlmICghcHJpdmF0ZU1hcC5oYXMocmVjZWl2ZXIpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHJpdmF0ZU1hcC5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgcHJpdmF0ZU1hcCwgdmFsdWUpIHtcclxuICAgIGlmICghcHJpdmF0ZU1hcC5oYXMocmVjZWl2ZXIpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlTWFwLnNldChyZWNlaXZlciwgdmFsdWUpO1xyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcbiIsIi8qKlxuICogQmlnIHRoYW5rcyB0byBodHRwczovL2dpdGh1Yi5jb20vZmtsZXV2ZXIgYW5kIHRoZSBodHRwczovL2dpdGh1Yi5jb20vYXVyZWxpYS9hdXJlbGlhIHByb2plY3RcbiAqIGZvciB0aGUgYnVsayBvZiB0aGlzIGNvZGUgYW5kIG1hbnkgb2YgdGhlIGFzc29jaWF0ZWQgdGVzdHMuXG4gKi9cbmltcG9ydCB7IGVtcHR5QXJyYXksIEZBU1RFbGVtZW50IH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG4vLyBUaW55IHBvbHlmaWxsIGZvciBUeXBlU2NyaXB0J3MgUmVmbGVjdCBtZXRhZGF0YSBBUEkuXG5jb25zdCBtZXRhZGF0YUJ5VGFyZ2V0ID0gbmV3IE1hcCgpO1xuaWYgKCEoXCJtZXRhZGF0YVwiIGluIFJlZmxlY3QpKSB7XG4gICAgUmVmbGVjdC5tZXRhZGF0YSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKGtleSwgdmFsdWUsIHRhcmdldCk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhID0gZnVuY3Rpb24gKGtleSwgdmFsdWUsIHRhcmdldCkge1xuICAgICAgICBsZXQgbWV0YWRhdGEgPSBtZXRhZGF0YUJ5VGFyZ2V0LmdldCh0YXJnZXQpO1xuICAgICAgICBpZiAobWV0YWRhdGEgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgbWV0YWRhdGFCeVRhcmdldC5zZXQodGFyZ2V0LCAobWV0YWRhdGEgPSBuZXcgTWFwKCkpKTtcbiAgICAgICAgfVxuICAgICAgICBtZXRhZGF0YS5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgfTtcbiAgICBSZWZsZWN0LmdldE93bk1ldGFkYXRhID0gZnVuY3Rpb24gKGtleSwgdGFyZ2V0KSB7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gbWV0YWRhdGFCeVRhcmdldC5nZXQodGFyZ2V0KTtcbiAgICAgICAgaWYgKG1ldGFkYXRhICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHJldHVybiBtZXRhZGF0YS5nZXQoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH07XG59XG4vKipcbiAqIEEgdXRpbGl0eSBjbGFzcyB1c2VkIHRoYXQgY29uc3RydWN0cyBhbmQgcmVnaXN0ZXJzIHJlc29sdmVycyBmb3IgYSBkZXBlbmRlbmN5XG4gKiBpbmplY3Rpb24gY29udGFpbmVyLiBTdXBwb3J0cyBhIHN0YW5kYXJkIHNldCBvZiBvYmplY3QgbGlmZXRpbWVzLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgUmVzb2x2ZXJCdWlsZGVyIHtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb250YWluZXIgLSBUaGUgY29udGFpbmVyIHRvIGNyZWF0ZSByZXNvbHZlcnMgZm9yLlxuICAgICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5IHRvIHJlZ2lzdGVyIHJlc29sdmVycyB1bmRlci5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIGtleSkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSByZXNvbHZlciBmb3IgYW4gZXhpc3Rpbmcgb2JqZWN0IGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBpbnN0YW5jZSB0byByZXNvbHZlLlxuICAgICAqIEByZXR1cm5zIFRoZSByZXNvbHZlci5cbiAgICAgKi9cbiAgICBpbnN0YW5jZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclJlc29sdmVyKDAgLyogaW5zdGFuY2UgKi8sIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlc29sdmVyIHRoYXQgZW5mb3JjZXMgYSBzaW5nbGV0b24gbGlmZXRpbWUuXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHR5cGUgdG8gY3JlYXRlIGFuZCBjYWNoZSB0aGUgc2luZ2xldG9uIGZvci5cbiAgICAgKiBAcmV0dXJucyBUaGUgcmVzb2x2ZXIuXG4gICAgICovXG4gICAgc2luZ2xldG9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyUmVzb2x2ZXIoMSAvKiBzaW5nbGV0b24gKi8sIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlc29sdmVyIHRoYXQgY3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBmb3IgZXZlcnkgZGVwZW5kZW5jeSByZXF1ZXN0LlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB0eXBlIHRvIGNyZWF0ZSBpbnN0YW5jZXMgb2YuXG4gICAgICogQHJldHVybnMgLSBUaGUgcmVzb2x2ZXIuXG4gICAgICovXG4gICAgdHJhbnNpZW50KHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyUmVzb2x2ZXIoMiAvKiB0cmFuc2llbnQgKi8sIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlc29sdmVyIHRoYXQgaW52b2tlcyBhIGNhbGxiYWNrIGZ1bmN0aW9uIGZvciBldmVyeSBkZXBlbmRlbmN5IHJlc29sdXRpb25cbiAgICAgKiByZXF1ZXN0LCBhbGxvd2luZyBjdXN0b20gbG9naWMgdG8gcmV0dXJuIHRoZSBkZXBlbmRlbmN5LlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBjYWxsYmFjayB0byBjYWxsIGR1cmluZyByZXNvbHV0aW9uLlxuICAgICAqIEByZXR1cm5zIFRoZSByZXNvbHZlci5cbiAgICAgKi9cbiAgICBjYWxsYmFjayh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclJlc29sdmVyKDMgLyogY2FsbGJhY2sgKi8sIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlc29sdmVyIHRoYXQgaW52b2tlcyBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRoZSBmaXJzdCB0aW1lIHRoYXQgYSBkZXBlbmRlbmN5XG4gICAgICogcmVzb2x1dGlvbiBpcyByZXF1ZXN0ZWQuIFRoZSByZXR1cm5lZCB2YWx1ZSBpcyB0aGVuIGNhY2hlZCBhbmQgcHJvdmlkZWQgZm9yIGFsbFxuICAgICAqIHN1YnNlcXVlbnQgcmVxdWVzdHMuXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIGNhbGxiYWNrIHRvIGNhbGwgZHVyaW5nIHRoZSBmaXJzdCByZXNvbHV0aW9uLlxuICAgICAqIEByZXR1cm5zIFRoZSByZXNvbHZlci5cbiAgICAgKi9cbiAgICBjYWNoZWRDYWxsYmFjayh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclJlc29sdmVyKDMgLyogY2FsbGJhY2sgKi8sIGNhY2hlQ2FsbGJhY2tSZXN1bHQodmFsdWUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWxpYXNlcyB0aGUgY3VycmVudCBrZXkgdG8gYSBkaWZmZXJlbnQga2V5LlxuICAgICAqIEBwYXJhbSBkZXN0aW5hdGlvbktleSAtIFRoZSBrZXkgdG8gcG9pbnQgdGhlIGFsaWFzIHRvLlxuICAgICAqIEByZXR1cm5zIFRoZSByZXNvbHZlci5cbiAgICAgKi9cbiAgICBhbGlhc1RvKGRlc3RpbmF0aW9uS2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyUmVzb2x2ZXIoNSAvKiBhbGlhcyAqLywgZGVzdGluYXRpb25LZXkpO1xuICAgIH1cbiAgICByZWdpc3RlclJlc29sdmVyKHN0cmF0ZWd5LCBzdGF0ZSkge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lciwga2V5IH0gPSB0aGlzO1xuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvbiAqL1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMua2V5ID0gKHZvaWQgMCk7XG4gICAgICAgIHJldHVybiBjb250YWluZXIucmVnaXN0ZXJSZXNvbHZlcihrZXksIG5ldyBSZXNvbHZlckltcGwoa2V5LCBzdHJhdGVneSwgc3RhdGUpKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjbG9uZUFycmF5V2l0aFBvc3NpYmxlUHJvcHMoc291cmNlKSB7XG4gICAgY29uc3QgY2xvbmUgPSBzb3VyY2Uuc2xpY2UoKTtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcbiAgICBjb25zdCBsZW4gPSBrZXlzLmxlbmd0aDtcbiAgICBsZXQga2V5O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgaWYgKCFpc0FycmF5SW5kZXgoa2V5KSkge1xuICAgICAgICAgICAgY2xvbmVba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjbG9uZTtcbn1cbi8qKlxuICogQSBzZXQgb2YgZGVmYXVsdCByZXNvbHZlcnMgdXNlZnVsIGluIGNvbmZpZ3VyaW5nIGEgY29udGFpbmVyLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgRGVmYXVsdFJlc29sdmVyID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgLyoqXG4gICAgICogRGlzYWJsZXMgYXV0by1yZWdpc3RyYXRpb24gYW5kIHRocm93cyBmb3IgYWxsIHVuLXJlZ2lzdGVyZWQgZGVwZW5kZW5jaWVzLlxuICAgICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5IHRvIGNyZWF0ZSB0aGUgcmVzb2x2ZXIgZm9yLlxuICAgICAqL1xuICAgIG5vbmUoa2V5KSB7XG4gICAgICAgIHRocm93IEVycm9yKGAke2tleS50b1N0cmluZygpfSBub3QgcmVnaXN0ZXJlZCwgZGlkIHlvdSBmb3JnZXQgdG8gYWRkIEBzaW5nbGV0b24oKT9gKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFByb3ZpZGVzIGRlZmF1bHQgc2luZ2xldG9uIHJlc29sdXRpb24gYmVoYXZpb3IgZHVyaW5nIGF1dG8tcmVnaXN0cmF0aW9uLlxuICAgICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5IHRvIGNyZWF0ZSB0aGUgcmVzb2x2ZXIgZm9yLlxuICAgICAqIEByZXR1cm5zIFRoZSByZXNvbHZlci5cbiAgICAgKi9cbiAgICBzaW5nbGV0b24oa2V5KSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZXJJbXBsKGtleSwgMSAvKiBzaW5nbGV0b24gKi8sIGtleSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBQcm92aWRlcyBkZWZhdWx0IHRyYW5zaWVudCByZXNvbHV0aW9uIGJlaGF2aW9yIGR1cmluZyBhdXRvLXJlZ2lzdHJhdGlvbi5cbiAgICAgKiBAcGFyYW0ga2V5IC0gVGhlIGtleSB0byBjcmVhdGUgdGhlIHJlc29sdmVyIGZvci5cbiAgICAgKiBAcmV0dXJucyBUaGUgcmVzb2x2ZXIuXG4gICAgICovXG4gICAgdHJhbnNpZW50KGtleSkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVySW1wbChrZXksIDIgLyogdHJhbnNpZW50ICovLCBrZXkpO1xuICAgIH0sXG59KTtcbi8qKlxuICogQ29uZmlndXJhdGlvbiBmb3IgYSBkZXBlbmRlbmN5IGluamVjdGlvbiBjb250YWluZXIuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBDb250YWluZXJDb25maWd1cmF0aW9uID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgLyoqXG4gICAgICogVGhlIGRlZmF1bHQgY29uZmlndXJhdGlvbiB1c2VkIHdoZW4gY3JlYXRpbmcgYSBET00tZGlzY29ubmVjdGVkIGNvbnRhaW5lci5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoZSBkZWZhdWx0IGNyZWF0ZXMgYSByb290IGNvbnRhaW5lciwgd2l0aCBubyBwYXJlbnQgY29udGFpbmVyLiBJdCBkb2VzIG5vdCBoYW5kbGVcbiAgICAgKiBvd25lciByZXF1ZXN0cyBhbmQgaXQgdXNlcyBzaW5nbGV0b24gcmVzb2x1dGlvbiBiZWhhdmlvciBmb3IgYXV0by1yZWdpc3RyYXRpb24uXG4gICAgICovXG4gICAgZGVmYXVsdDogT2JqZWN0LmZyZWV6ZSh7XG4gICAgICAgIHBhcmVudExvY2F0b3I6ICgpID0+IG51bGwsXG4gICAgICAgIHJlc3BvbnNpYmxlRm9yT3duZXJSZXF1ZXN0czogZmFsc2UsXG4gICAgICAgIGRlZmF1bHRSZXNvbHZlcjogRGVmYXVsdFJlc29sdmVyLnNpbmdsZXRvbixcbiAgICB9KSxcbn0pO1xuY29uc3QgZGVwZW5kZW5jeUxvb2t1cCA9IG5ldyBNYXAoKTtcbmZ1bmN0aW9uIGdldFBhcmFtVHlwZXMoa2V5KSB7XG4gICAgcmV0dXJuIChUeXBlKSA9PiB7XG4gICAgICAgIHJldHVybiBSZWZsZWN0LmdldE93bk1ldGFkYXRhKGtleSwgVHlwZSk7XG4gICAgfTtcbn1cbmxldCByb290RE9NQ29udGFpbmVyID0gbnVsbDtcbi8qKlxuICogVGhlIGdhdGV3YXkgdG8gZGVwZW5kZW5jeSBpbmplY3Rpb24gQVBJcy5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IERJID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBkZXBlbmRlbmN5IGluamVjdGlvbiBjb250YWluZXIuXG4gICAgICogQHBhcmFtIGNvbmZpZyAtIFRoZSBjb25maWd1cmF0aW9uIGZvciB0aGUgY29udGFpbmVyLlxuICAgICAqIEByZXR1cm5zIEEgbmV3bHkgY3JlYXRlZCBkZXBlbmRlbmN5IGluamVjdGlvbiBjb250YWluZXIuXG4gICAgICovXG4gICAgY3JlYXRlQ29udGFpbmVyKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gbmV3IENvbnRhaW5lckltcGwobnVsbCwgT2JqZWN0LmFzc2lnbih7fSwgQ29udGFpbmVyQ29uZmlndXJhdGlvbi5kZWZhdWx0LCBjb25maWcpKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBkZXBlbmRlbmN5IGluamVjdGlvbiBjb250YWluZXIgcmVzcG9uc2libGUgZm9yIHByb3ZpZGluZyBkZXBlbmRlbmNpZXNcbiAgICAgKiB0byB0aGUgc3BlY2lmaWVkIG5vZGUuXG4gICAgICogQHBhcmFtIG5vZGUgLSBUaGUgbm9kZSB0byBmaW5kIHRoZSByZXNwb25zaWJsZSBjb250YWluZXIgZm9yLlxuICAgICAqIEByZXR1cm5zIFRoZSBjb250YWluZXIgcmVzcG9uc2libGUgZm9yIHByb3ZpZGluZyBkZXBlbmRlbmNpZXMgdG8gdGhlIG5vZGUuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIHdpbGwgYmUgdGhlIHNhbWUgYXMgdGhlIHBhcmVudCBjb250YWluZXIgaWYgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgICogZG9lcyBub3QgaXRzZWxmIGhvc3QgYSBjb250YWluZXIgY29uZmlndXJlZCB3aXRoIHJlc3BvbnNpYmxlRm9yT3duZXJSZXF1ZXN0cy5cbiAgICAgKi9cbiAgICBmaW5kUmVzcG9uc2libGVDb250YWluZXIobm9kZSkge1xuICAgICAgICBjb25zdCBvd25lZCA9IG5vZGUuJCRjb250YWluZXIkJDtcbiAgICAgICAgaWYgKG93bmVkICYmIG93bmVkLnJlc3BvbnNpYmxlRm9yT3duZXJSZXF1ZXN0cykge1xuICAgICAgICAgICAgcmV0dXJuIG93bmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBESS5maW5kUGFyZW50Q29udGFpbmVyKG5vZGUpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogRmluZCB0aGUgZGVwZW5kZW5jeSBpbmplY3Rpb24gY29udGFpbmVyIHVwIHRoZSBET00gdHJlZSBmcm9tIHRoaXMgbm9kZS5cbiAgICAgKiBAcGFyYW0gbm9kZSAtIFRoZSBub2RlIHRvIGZpbmQgdGhlIHBhcmVudCBjb250YWluZXIgZm9yLlxuICAgICAqIEByZXR1cm5zIFRoZSBwYXJlbnQgY29udGFpbmVyIG9mIHRoaXMgbm9kZS5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgd2lsbCBiZSB0aGUgc2FtZSBhcyB0aGUgcmVzcG9uc2libGUgY29udGFpbmVyIGlmIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgICAqIGRvZXMgbm90IGl0c2VsZiBob3N0IGEgY29udGFpbmVyIGNvbmZpZ3VyZWQgd2l0aCByZXNwb25zaWJsZUZvck93bmVyUmVxdWVzdHMuXG4gICAgICovXG4gICAgZmluZFBhcmVudENvbnRhaW5lcihub2RlKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KERJTG9jYXRlUGFyZW50RXZlbnRUeXBlLCB7XG4gICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgY29tcG9zZWQ6IHRydWUsXG4gICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZGV0YWlsOiB7IGNvbnRhaW5lcjogdm9pZCAwIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBub2RlLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICByZXR1cm4gZXZlbnQuZGV0YWlsLmNvbnRhaW5lciB8fCBESS5nZXRPckNyZWF0ZURPTUNvbnRhaW5lcigpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGRlcGVuZGVuY3kgaW5qZWN0aW9uIGNvbnRhaW5lciBpZiBvbmUgaXMgZXhwbGljaXRseSBvd25lZCBieSB0aGUgc3BlY2lmaWVkXG4gICAgICogbm9kZS4gSWYgb25lIGlzIG5vdCBvd25lZCwgdGhlbiBhIG5ldyBjb250YWluZXIgaXMgY3JlYXRlZCBhbmQgYXNzaWduZWQgdG8gdGhlIG5vZGUuXG4gICAgICogQHBhcmFtIG5vZGUgLSBUaGUgbm9kZSB0byBmaW5kIG9yIGNyZWF0ZSB0aGUgY29udGFpbmVyIGZvci5cbiAgICAgKiBAcGFyYW0gY29uZmlnIC0gVGhlIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBjb250YWluZXIgaWYgb25lIG5lZWRzIHRvIGJlIGNyZWF0ZWQuXG4gICAgICogQHJldHVybnMgVGhlIGxvY2F0ZWQgb3IgY3JlYXRlZCBjb250YWluZXIuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIEFQSSBkb2VzIG5vdCBzZWFyY2ggZm9yIGEgcmVzcG9uc2libGUgb3IgcGFyZW50IGNvbnRhaW5lci4gSXQgbG9va3Mgb25seSBmb3IgYSBjb250YWluZXJcbiAgICAgKiBkaXJlY3RseSBkZWZpbmVkIG9uIHRoZSBzcGVjaWZpZWQgbm9kZSBhbmQgY3JlYXRlcyBvbmUgYXQgdGhhdCBsb2NhdGlvbiBpZiBvbmUgZG9lcyBub3RcbiAgICAgKiBhbHJlYWR5IGV4aXN0LlxuICAgICAqL1xuICAgIGdldE9yQ3JlYXRlRE9NQ29udGFpbmVyKG5vZGUsIGNvbmZpZykge1xuICAgICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiAocm9vdERPTUNvbnRhaW5lciB8fFxuICAgICAgICAgICAgICAgIChyb290RE9NQ29udGFpbmVyID0gbmV3IENvbnRhaW5lckltcGwobnVsbCwgT2JqZWN0LmFzc2lnbih7fSwgQ29udGFpbmVyQ29uZmlndXJhdGlvbi5kZWZhdWx0LCBjb25maWcsIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50TG9jYXRvcjogKCkgPT4gbnVsbCxcbiAgICAgICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG5vZGUuJCRjb250YWluZXIkJCB8fFxuICAgICAgICAgICAgbmV3IENvbnRhaW5lckltcGwobm9kZSwgT2JqZWN0LmFzc2lnbih7fSwgQ29udGFpbmVyQ29uZmlndXJhdGlvbi5kZWZhdWx0LCBjb25maWcsIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRMb2NhdG9yOiBESS5maW5kUGFyZW50Q29udGFpbmVyLFxuICAgICAgICAgICAgfSkpKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIFwiZGVzaWduOnBhcmFtdHlwZXNcIiBtZXRhZGF0YSBmb3IgdGhlIHNwZWNpZmllZCB0eXBlLlxuICAgICAqIEBwYXJhbSBUeXBlIC0gVGhlIHR5cGUgdG8gZ2V0IHRoZSBtZXRhZGF0YSBmb3IuXG4gICAgICogQHJldHVybnMgVGhlIG1ldGFkYXRhIGFycmF5IG9yIHVuZGVmaW5lZCBpZiBubyBtZXRhZGF0YSBpcyBmb3VuZC5cbiAgICAgKi9cbiAgICBnZXREZXNpZ25QYXJhbXR5cGVzOiBnZXRQYXJhbVR5cGVzKFwiZGVzaWduOnBhcmFtdHlwZXNcIiksXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgXCJkaTpwYXJhbXR5cGVzXCIgbWV0YWRhdGEgZm9yIHRoZSBzcGVjaWZpZWQgdHlwZS5cbiAgICAgKiBAcGFyYW0gVHlwZSAtIFRoZSB0eXBlIHRvIGdldCB0aGUgbWV0YWRhdGEgZm9yLlxuICAgICAqIEByZXR1cm5zIFRoZSBtZXRhZGF0YSBhcnJheSBvciB1bmRlZmluZWQgaWYgbm8gbWV0YWRhdGEgaXMgZm91bmQuXG4gICAgICovXG4gICAgZ2V0QW5ub3RhdGlvblBhcmFtdHlwZXM6IGdldFBhcmFtVHlwZXMoXCJkaTpwYXJhbXR5cGVzXCIpLFxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIFR5cGUgLSBHZXRzIHRoZSBcImRpOnBhcmFtdHlwZXNcIiBtZXRhZGF0YSBmb3IgdGhlIHNwZWNpZmllZCB0eXBlLiBJZiBub25lIGlzIGZvdW5kLFxuICAgICAqIGFuIGVtcHR5IG1ldGFkYXRhIGFycmF5IGlzIGNyZWF0ZWQgYW5kIGFkZGVkLlxuICAgICAqIEByZXR1cm5zIFRoZSBtZXRhZGF0YSBhcnJheS5cbiAgICAgKi9cbiAgICBnZXRPckNyZWF0ZUFubm90YXRpb25QYXJhbVR5cGVzKFR5cGUpIHtcbiAgICAgICAgbGV0IGFubm90YXRpb25QYXJhbXR5cGVzID0gdGhpcy5nZXRBbm5vdGF0aW9uUGFyYW10eXBlcyhUeXBlKTtcbiAgICAgICAgaWYgKGFubm90YXRpb25QYXJhbXR5cGVzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoXCJkaTpwYXJhbXR5cGVzXCIsIChhbm5vdGF0aW9uUGFyYW10eXBlcyA9IFtdKSwgVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFubm90YXRpb25QYXJhbXR5cGVzO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZGVwZW5kZW5jeSBrZXlzIHJlcHJlc2VudGluZyB3aGF0IGlzIG5lZWRlZCB0byBpbnN0YW50aWF0ZSB0aGUgc3BlY2lmaWVkIHR5cGUuXG4gICAgICogQHBhcmFtIFR5cGUgLSBUaGUgdHlwZSB0byBnZXQgdGhlIGRlcGVuZGVuY2llcyBmb3IuXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2YgZGVwZW5kZW5jeSBrZXlzLlxuICAgICAqL1xuICAgIGdldERlcGVuZGVuY2llcyhUeXBlKSB7XG4gICAgICAgIC8vIE5vdGU6IEV2ZXJ5IGRldGFpbCBvZiB0aGlzIGdldERlcGVuZGVuY2llcyBtZXRob2QgaXMgcHJldHR5IGRlbGliZXJhdGUgYXQgdGhlIG1vbWVudCwgYW5kIHByb2JhYmx5IG5vdCB5ZXQgMTAwJSB0ZXN0ZWQgZnJvbSBldmVyeSBwb3NzaWJsZSBhbmdsZSxcbiAgICAgICAgLy8gc28gYmUgY2FyZWZ1bCB3aXRoIG1ha2luZyBjaGFuZ2VzIGhlcmUgYXMgaXQgY2FuIGhhdmUgYSBodWdlIGltcGFjdCBvbiBjb21wbGV4IGVuZCB1c2VyIGFwcHMuXG4gICAgICAgIC8vIFByZWZlcmFibHksIG9ubHkgbWFrZSBjaGFuZ2VzIHRvIHRoZSBkZXBlbmRlbmN5IHJlc29sdXRpb24gcHJvY2VzcyB2aWEgYSBSRkMuXG4gICAgICAgIGxldCBkZXBlbmRlbmNpZXMgPSBkZXBlbmRlbmN5TG9va3VwLmdldChUeXBlKTtcbiAgICAgICAgaWYgKGRlcGVuZGVuY2llcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAvLyBUeXBlLmxlbmd0aCBpcyB0aGUgbnVtYmVyIG9mIGNvbnN0cnVjdG9yIHBhcmFtZXRlcnMuIElmIHRoaXMgaXMgMCwgaXQgY291bGQgbWVhbiB0aGUgY2xhc3MgaGFzIGFuIGVtcHR5IGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAvLyBidXQgaXQgY291bGQgYWxzbyBtZWFuIHRoZSBjbGFzcyBoYXMgbm8gY29uc3RydWN0b3IgYXQgYWxsIChpbiB3aGljaCBjYXNlIGl0IGluaGVyaXRzIHRoZSBjb25zdHJ1Y3RvciBmcm9tIHRoZSBwcm90b3R5cGUpLlxuICAgICAgICAgICAgLy8gTm9uLXplcm8gY29uc3RydWN0b3IgbGVuZ3RoICsgbm8gcGFyYW10eXBlcyBtZWFucyBlbWl0RGVjb3JhdG9yTWV0YWRhdGEgaXMgb2ZmLCBvciB0aGUgY2xhc3MgaGFzIG5vIGRlY29yYXRvci5cbiAgICAgICAgICAgIC8vIFdlJ3JlIG5vdCBkb2luZyBhbnl0aGluZyB3aXRoIHRoZSBhYm92ZSByaWdodCBub3csIGJ1dCBpdCdzIGdvb2QgdG8ga2VlcCBpbiBtaW5kIGZvciBhbnkgZnV0dXJlIGlzc3Vlcy5cbiAgICAgICAgICAgIGNvbnN0IGluamVjdCA9IFR5cGUuaW5qZWN0O1xuICAgICAgICAgICAgaWYgKGluamVjdCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgLy8gZGVzaWduOnBhcmFtdHlwZXMgaXMgc2V0IGJ5IHRzYyB3aGVuIGVtaXREZWNvcmF0b3JNZXRhZGF0YSBpcyBlbmFibGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IGRlc2lnblBhcmFtdHlwZXMgPSBESS5nZXREZXNpZ25QYXJhbXR5cGVzKFR5cGUpO1xuICAgICAgICAgICAgICAgIC8vIGRpOnBhcmFtdHlwZXMgaXMgc2V0IGJ5IHRoZSBwYXJhbWV0ZXIgZGVjb3JhdG9yIGZyb20gREkuY3JlYXRlSW50ZXJmYWNlIG9yIGJ5IEBpbmplY3RcbiAgICAgICAgICAgICAgICBjb25zdCBhbm5vdGF0aW9uUGFyYW10eXBlcyA9IERJLmdldEFubm90YXRpb25QYXJhbXR5cGVzKFR5cGUpO1xuICAgICAgICAgICAgICAgIGlmIChkZXNpZ25QYXJhbXR5cGVzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFubm90YXRpb25QYXJhbXR5cGVzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgZ28gdXAgdGhlIHByb3RvdHlwZSBpZiBuZWl0aGVyIHN0YXRpYyBpbmplY3Qgbm9yIGFueSBvZiB0aGUgcGFyYW10eXBlcyBpcyBkZWZpbmVkLCBhc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlcmUgaXMgbm8gc291bmQgd2F5IHRvIG1lcmdlIGEgdHlwZSdzIGRlcHMgd2l0aCBpdHMgcHJvdG90eXBlJ3MgZGVwc1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgUHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIFByb3RvID09PSBcImZ1bmN0aW9uXCIgJiYgUHJvdG8gIT09IEZ1bmN0aW9uLnByb3RvdHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llcyA9IGNsb25lQXJyYXlXaXRoUG9zc2libGVQcm9wcyhESS5nZXREZXBlbmRlbmNpZXMoUHJvdG8pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZGVzaWduOnBhcmFtdHlwZXMgc28ganVzdCB1c2UgdGhlIGRpOnBhcmFtdHlwZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llcyA9IGNsb25lQXJyYXlXaXRoUG9zc2libGVQcm9wcyhhbm5vdGF0aW9uUGFyYW10eXBlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYW5ub3RhdGlvblBhcmFtdHlwZXMgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBObyBkaTpwYXJhbXR5cGVzIHNvIGp1c3QgdXNlIHRoZSBkZXNpZ246cGFyYW10eXBlc1xuICAgICAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXMgPSBjbG9uZUFycmF5V2l0aFBvc3NpYmxlUHJvcHMoZGVzaWduUGFyYW10eXBlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSd2ZSBnb3QgYm90aCwgc28gbWVyZ2UgdGhlbSAoaW4gY2FzZSBvZiBjb25mbGljdCBvbiBzYW1lIGluZGV4LCBkaTpwYXJhbXR5cGVzIHRha2UgcHJlY2VkZW5jZSlcbiAgICAgICAgICAgICAgICAgICAgZGVwZW5kZW5jaWVzID0gY2xvbmVBcnJheVdpdGhQb3NzaWJsZVByb3BzKGRlc2lnblBhcmFtdHlwZXMpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbGVuID0gYW5ub3RhdGlvblBhcmFtdHlwZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYXVBbm5vdGF0aW9uUGFyYW10eXBlO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdUFubm90YXRpb25QYXJhbXR5cGUgPSBhbm5vdGF0aW9uUGFyYW10eXBlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdUFubm90YXRpb25QYXJhbXR5cGUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llc1tpXSA9IGF1QW5ub3RhdGlvblBhcmFtdHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoYW5ub3RhdGlvblBhcmFtdHlwZXMpO1xuICAgICAgICAgICAgICAgICAgICBsZW4gPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGtleTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNBcnJheUluZGV4KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXNba2V5XSA9IGFubm90YXRpb25QYXJhbXR5cGVzW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBJZ25vcmUgcGFyYW10eXBlcyBpZiB3ZSBoYXZlIHN0YXRpYyBpbmplY3RcbiAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXMgPSBjbG9uZUFycmF5V2l0aFBvc3NpYmxlUHJvcHMoaW5qZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlcGVuZGVuY3lMb29rdXAuc2V0KFR5cGUsIGRlcGVuZGVuY2llcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlcGVuZGVuY2llcztcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIERlZmluZXMgYSBwcm9wZXJ0eSBvbiBhIHdlYiBjb21wb25lbnQgY2xhc3MuIFRoZSB2YWx1ZSBvZiB0aGlzIHByb3BlcnR5IHdpbGxcbiAgICAgKiBiZSByZXNvbHZlZCBmcm9tIHRoZSBkZXBlbmRlbmN5IGluamVjdGlvbiBjb250YWluZXIgcmVzcG9uc2libGUgZm9yIHRoZSBlbGVtZW50XG4gICAgICogaW5zdGFuY2UsIGJhc2VkIG9uIHdoZXJlIGl0IGlzIGNvbm5lY3RlZCBpbiB0aGUgRE9NLlxuICAgICAqIEBwYXJhbSB0YXJnZXQgLSBUaGUgdGFyZ2V0IHRvIGRlZmluZSB0aGUgcHJvcGVydHkgb24uXG4gICAgICogQHBhcmFtIHByb3BlcnR5TmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBkZWZpbmUuXG4gICAgICogQHBhcmFtIGtleSAtIFRoZSBkZXBlbmRlbmN5IGluamVjdGlvbiBrZXkuXG4gICAgICogQHBhcmFtIHJlc3BlY3RDb25uZWN0aW9uIC0gSW5kaWNhdGVzIHdoZXRoZXIgb3Igbm90IHRvIHVwZGF0ZSB0aGUgcHJvcGVydHkgdmFsdWUgaWYgdGhlXG4gICAgICogaG9zdGluZyBjb21wb25lbnQgaXMgZGlzY29ubmVjdGVkIGFuZCB0aGVuIHJlLWNvbm5lY3RlZCBhdCBhIGRpZmZlcmVudCBsb2NhdGlvbiBpbiB0aGUgRE9NLlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVGhlIHJlc3BlY3RDb25uZWN0aW9uIG9wdGlvbiBpcyBvbmx5IGFwcGxpY2FibGUgdG8gZWxlbWVudHMgdGhhdCBkZXNjZW5kIGZyb20gRkFTVEVsZW1lbnQuXG4gICAgICovXG4gICAgZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eU5hbWUsIGtleSwgcmVzcGVjdENvbm5lY3Rpb24gPSBmYWxzZSkge1xuICAgICAgICBjb25zdCBkaVByb3BlcnR5S2V5ID0gYCRkaV8ke3Byb3BlcnR5TmFtZX1gO1xuICAgICAgICBSZWZsZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHlOYW1lLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSB0aGlzW2RpUHJvcGVydHlLZXldO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMgaW5zdGFuY2VvZiBIVE1MRWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBESS5maW5kUmVzcG9uc2libGVDb250YWluZXIodGhpcylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogREkuZ2V0T3JDcmVhdGVET01Db250YWluZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjb250YWluZXIuZ2V0KGtleSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbZGlQcm9wZXJ0eUtleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BlY3RDb25uZWN0aW9uICYmIHRoaXMgaW5zdGFuY2VvZiBGQVNURWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90aWZpZXIgPSB0aGlzLiRmYXN0Q29udHJvbGxlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZUNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdDb250YWluZXIgPSBESS5maW5kUmVzcG9uc2libGVDb250YWluZXIodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBuZXdDb250YWluZXIuZ2V0KGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzW2RpUHJvcGVydHlLZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1tkaVByb3BlcnR5S2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmllci5ub3RpZnkocHJvcGVydHlOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpZXIuc3Vic2NyaWJlKHsgaGFuZGxlQ2hhbmdlIH0sIFwiaXNDb25uZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZGVwZW5kZW5jeSBpbmplY3Rpb24ga2V5LlxuICAgICAqIEBwYXJhbSBuYW1lQ29uZmlnT3JDYWxsYmFjayAtIEEgZnJpZW5kbHkgbmFtZSBmb3IgdGhlIGtleSBvciBhIGxhbWJkYSB0aGF0IGNvbmZpZ3VyZXMgYVxuICAgICAqIGRlZmF1bHQgcmVzb2x1dGlvbiBmb3IgdGhlIGRlcGVuZGVuY3kuXG4gICAgICogQHBhcmFtIGNvbmZpZ3Vyb3IgLSBJZiBhIGZyaWVuZGx5IG5hbWUgd2FzIHByb3ZpZGVkIGZvciB0aGUgZmlyc3QgcGFyYW1ldGVyLCB0aGVuIGFuIG9wdGlvbmFsXG4gICAgICogbGFtYmRhIHRoYXQgY29uZmlndXJlcyBhIGRlZmF1bHQgcmVzb2x1dGlvbiBmb3IgdGhlIGRlcGVuZGVuY3kgY2FuIGJlIHByb3ZpZGVkIHNlY29uZC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBrZXkuXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGUgY3JlYXRlZCBrZXkgY2FuIGJlIHVzZWQgYXMgYSBwcm9wZXJ0eSBkZWNvcmF0b3Igb3IgY29uc3RydWN0b3IgcGFyYW1ldGVyIGRlY29yYXRvcixcbiAgICAgKiBpbiBhZGRpdGlvbiB0byBpdHMgc3RhbmRhcmQgdXNlIGluIGFuIGluamVjdCBhcnJheSBvciB0aHJvdWdoIGRpcmVjdCBjb250YWluZXIgQVBJcy5cbiAgICAgKi9cbiAgICBjcmVhdGVJbnRlcmZhY2UobmFtZUNvbmZpZ09yQ2FsbGJhY2ssIGNvbmZpZ3Vyb3IpIHtcbiAgICAgICAgY29uc3QgY29uZmlndXJlID0gdHlwZW9mIG5hbWVDb25maWdPckNhbGxiYWNrID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICAgID8gbmFtZUNvbmZpZ09yQ2FsbGJhY2tcbiAgICAgICAgICAgIDogY29uZmlndXJvcjtcbiAgICAgICAgY29uc3QgZnJpZW5kbHlOYW1lID0gdHlwZW9mIG5hbWVDb25maWdPckNhbGxiYWNrID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IG5hbWVDb25maWdPckNhbGxiYWNrXG4gICAgICAgICAgICA6IG5hbWVDb25maWdPckNhbGxiYWNrICYmIFwiZnJpZW5kbHlOYW1lXCIgaW4gbmFtZUNvbmZpZ09yQ2FsbGJhY2tcbiAgICAgICAgICAgICAgICA/IG5hbWVDb25maWdPckNhbGxiYWNrLmZyaWVuZGx5TmFtZSB8fCBkZWZhdWx0RnJpZW5kbHlOYW1lXG4gICAgICAgICAgICAgICAgOiBkZWZhdWx0RnJpZW5kbHlOYW1lO1xuICAgICAgICBjb25zdCByZXNwZWN0Q29ubmVjdGlvbiA9IHR5cGVvZiBuYW1lQ29uZmlnT3JDYWxsYmFjayA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBmYWxzZVxuICAgICAgICAgICAgOiBuYW1lQ29uZmlnT3JDYWxsYmFjayAmJiBcInJlc3BlY3RDb25uZWN0aW9uXCIgaW4gbmFtZUNvbmZpZ09yQ2FsbGJhY2tcbiAgICAgICAgICAgICAgICA/IG5hbWVDb25maWdPckNhbGxiYWNrLnJlc3BlY3RDb25uZWN0aW9uIHx8IGZhbHNlXG4gICAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgY29uc3QgSW50ZXJmYWNlID0gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHksIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09IG51bGwgfHwgbmV3LnRhcmdldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyByZWdpc3RyYXRpb24gZm9yIGludGVyZmFjZTogJyR7SW50ZXJmYWNlLmZyaWVuZGx5TmFtZX0nYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICBESS5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCBJbnRlcmZhY2UsIHJlc3BlY3RDb25uZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFubm90YXRpb25QYXJhbXR5cGVzID0gREkuZ2V0T3JDcmVhdGVBbm5vdGF0aW9uUGFyYW1UeXBlcyh0YXJnZXQpO1xuICAgICAgICAgICAgICAgIGFubm90YXRpb25QYXJhbXR5cGVzW2luZGV4XSA9IEludGVyZmFjZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgSW50ZXJmYWNlLiRpc0ludGVyZmFjZSA9IHRydWU7XG4gICAgICAgIEludGVyZmFjZS5mcmllbmRseU5hbWUgPSBmcmllbmRseU5hbWUgPT0gbnVsbCA/IFwiKGFub255bW91cylcIiA6IGZyaWVuZGx5TmFtZTtcbiAgICAgICAgaWYgKGNvbmZpZ3VyZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBJbnRlcmZhY2UucmVnaXN0ZXIgPSBmdW5jdGlvbiAoY29udGFpbmVyLCBrZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlndXJlKG5ldyBSZXNvbHZlckJ1aWxkZXIoY29udGFpbmVyLCBrZXkgIT09IG51bGwgJiYga2V5ICE9PSB2b2lkIDAgPyBrZXkgOiBJbnRlcmZhY2UpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgSW50ZXJmYWNlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgICAgICAgICByZXR1cm4gYEludGVyZmFjZVN5bWJvbDwke0ludGVyZmFjZS5mcmllbmRseU5hbWV9PmA7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBJbnRlcmZhY2U7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBBIGRlY29yYXRvciB0aGF0IHNwZWNpZmllcyB3aGF0IHRvIGluamVjdCBpbnRvIGl0cyB0YXJnZXQuXG4gICAgICogQHBhcmFtIGRlcGVuZGVuY2llcyAtIFRoZSBkZXBlbmRlbmNpZXMgdG8gaW5qZWN0LlxuICAgICAqIEByZXR1cm5zIFRoZSBkZWNvcmF0b3IgdG8gYmUgYXBwbGllZCB0byB0aGUgdGFyZ2V0IGNsYXNzLlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVGhlIGRlY29yYXRvciBjYW4gYmUgdXNlZCB0byBkZWNvcmF0ZSBhIGNsYXNzLCBsaXN0aW5nIGFsbCBvZiB0aGUgY2xhc3NlcyBkZXBlbmRlbmNpZXMuXG4gICAgICogT3IgaXQgY2FuIGJlIHVzZWQgdG8gZGVjb3JhdGUgYSBjb25zdHJ1Y3RvciBwYXJhbXRlciwgaW5kaWNhdGluZyB3aGF0IHRvIGluamVjdCBmb3IgdGhhdFxuICAgICAqIHBhcmFtZXRlci5cbiAgICAgKiBPciBpdCBjYW4gYmUgdXNlZCBmb3IgYSB3ZWIgY29tcG9uZW50IHByb3BlcnR5LCBpbmRpY2F0aW5nIHdoYXQgdGhhdCBwcm9wZXJ0eSBzaG91bGQgcmVzb2x2ZSB0by5cbiAgICAgKi9cbiAgICBpbmplY3QoLi4uZGVwZW5kZW5jaWVzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXksIGRlc2NyaXB0b3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZGVzY3JpcHRvciA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIC8vIEl0J3MgYSBwYXJhbWV0ZXIgZGVjb3JhdG9yLlxuICAgICAgICAgICAgICAgIGNvbnN0IGFubm90YXRpb25QYXJhbXR5cGVzID0gREkuZ2V0T3JDcmVhdGVBbm5vdGF0aW9uUGFyYW1UeXBlcyh0YXJnZXQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlcCA9IGRlcGVuZGVuY2llc1swXTtcbiAgICAgICAgICAgICAgICBpZiAoZGVwICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgYW5ub3RhdGlvblBhcmFtdHlwZXNbZGVzY3JpcHRvcl0gPSBkZXA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgREkuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIGRlcGVuZGVuY2llc1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhbm5vdGF0aW9uUGFyYW10eXBlcyA9IGRlc2NyaXB0b3JcbiAgICAgICAgICAgICAgICAgICAgPyBESS5nZXRPckNyZWF0ZUFubm90YXRpb25QYXJhbVR5cGVzKGRlc2NyaXB0b3IudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIDogREkuZ2V0T3JDcmVhdGVBbm5vdGF0aW9uUGFyYW1UeXBlcyh0YXJnZXQpO1xuICAgICAgICAgICAgICAgIGxldCBkZXA7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXBlbmRlbmNpZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVwID0gZGVwZW5kZW5jaWVzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVwICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFubm90YXRpb25QYXJhbXR5cGVzW2ldID0gZGVwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIHRoZSBgdGFyZ2V0YCBjbGFzcyBhcyBhIHRyYW5zaWVudCBkZXBlbmRlbmN5OyBlYWNoIHRpbWUgdGhlIGRlcGVuZGVuY3kgaXMgcmVzb2x2ZWRcbiAgICAgKiBhIG5ldyBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGFyZ2V0IC0gVGhlIGNsYXNzIC8gY29uc3RydWN0b3IgZnVuY3Rpb24gdG8gcmVnaXN0ZXIgYXMgdHJhbnNpZW50LlxuICAgICAqIEByZXR1cm5zIFRoZSBzYW1lIGNsYXNzLCB3aXRoIGEgc3RhdGljIGByZWdpc3RlcmAgbWV0aG9kIHRoYXQgdGFrZXMgYSBjb250YWluZXIgYW5kIHJldHVybnMgdGhlIGFwcHJvcHJpYXRlIHJlc29sdmVyLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBPbiBhbiBleGlzdGluZyBjbGFzc1xuICAgICAqIGBgYHRzXG4gICAgICogY2xhc3MgRm9vIHsgfVxuICAgICAqIERJLnRyYW5zaWVudChGb28pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBJbmxpbmUgZGVjbGFyYXRpb25cbiAgICAgKlxuICAgICAqIGBgYHRzXG4gICAgICogY29uc3QgRm9vID0gREkudHJhbnNpZW50KGNsYXNzIHsgfSk7XG4gICAgICogLy8gRm9vIGlzIG5vdyBzdHJvbmdseSB0eXBlZCB3aXRoIHJlZ2lzdGVyXG4gICAgICogRm9vLnJlZ2lzdGVyKGNvbnRhaW5lcik7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgdHJhbnNpZW50KHRhcmdldCkge1xuICAgICAgICB0YXJnZXQucmVnaXN0ZXIgPSBmdW5jdGlvbiByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvbiA9IFJlZ2lzdHJhdGlvbi50cmFuc2llbnQodGFyZ2V0LCB0YXJnZXQpO1xuICAgICAgICAgICAgcmV0dXJuIHJlZ2lzdHJhdGlvbi5yZWdpc3Rlcihjb250YWluZXIpO1xuICAgICAgICB9O1xuICAgICAgICB0YXJnZXQucmVnaXN0ZXJJblJlcXVlc3RvciA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIHRoZSBgdGFyZ2V0YCBjbGFzcyBhcyBhIHNpbmdsZXRvbiBkZXBlbmRlbmN5OyB0aGUgY2xhc3Mgd2lsbCBvbmx5IGJlIGNyZWF0ZWQgb25jZS4gRWFjaFxuICAgICAqIGNvbnNlY3V0aXZlIHRpbWUgdGhlIGRlcGVuZGVuY3kgaXMgcmVzb2x2ZWQsIHRoZSBzYW1lIGluc3RhbmNlIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGFyZ2V0IC0gVGhlIGNsYXNzIC8gY29uc3RydWN0b3IgZnVuY3Rpb24gdG8gcmVnaXN0ZXIgYXMgYSBzaW5nbGV0b24uXG4gICAgICogQHJldHVybnMgVGhlIHNhbWUgY2xhc3MsIHdpdGggYSBzdGF0aWMgYHJlZ2lzdGVyYCBtZXRob2QgdGhhdCB0YWtlcyBhIGNvbnRhaW5lciBhbmQgcmV0dXJucyB0aGUgYXBwcm9wcmlhdGUgcmVzb2x2ZXIuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBPbiBhbiBleGlzdGluZyBjbGFzc1xuICAgICAqIGBgYHRzXG4gICAgICogY2xhc3MgRm9vIHsgfVxuICAgICAqIERJLnNpbmdsZXRvbihGb28pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBJbmxpbmUgZGVjbGFyYXRpb25cbiAgICAgKiBgYGB0c1xuICAgICAqIGNvbnN0IEZvbyA9IERJLnNpbmdsZXRvbihjbGFzcyB7IH0pO1xuICAgICAqIC8vIEZvbyBpcyBub3cgc3Ryb25nbHkgdHlwZWQgd2l0aCByZWdpc3RlclxuICAgICAqIEZvby5yZWdpc3Rlcihjb250YWluZXIpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNpbmdsZXRvbih0YXJnZXQsIG9wdGlvbnMgPSBkZWZhdWx0U2luZ2xldG9uT3B0aW9ucykge1xuICAgICAgICB0YXJnZXQucmVnaXN0ZXIgPSBmdW5jdGlvbiByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvbiA9IFJlZ2lzdHJhdGlvbi5zaW5nbGV0b24odGFyZ2V0LCB0YXJnZXQpO1xuICAgICAgICAgICAgcmV0dXJuIHJlZ2lzdHJhdGlvbi5yZWdpc3Rlcihjb250YWluZXIpO1xuICAgICAgICB9O1xuICAgICAgICB0YXJnZXQucmVnaXN0ZXJJblJlcXVlc3RvciA9IG9wdGlvbnMuc2NvcGVkO1xuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH0sXG59KTtcbi8qKlxuICogVGhlIGludGVyZmFjZSBrZXkgdGhhdCByZXNvbHZlcyB0aGUgZGVwZW5kZW5jeSBpbmplY3Rpb24gY29udGFpbmVyIGl0c2VsZi5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IENvbnRhaW5lciA9IERJLmNyZWF0ZUludGVyZmFjZShcIkNvbnRhaW5lclwiKTtcbi8qKlxuICogVGhlIGludGVyZmFjZSBrZXkgdGhhdCByZXNvbHZlcyB0aGUgc2VydmljZSBsb2NhdG9yIGl0c2VsZi5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IFNlcnZpY2VMb2NhdG9yID0gQ29udGFpbmVyO1xuZnVuY3Rpb24gY3JlYXRlUmVzb2x2ZXIoZ2V0dGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgY29uc3QgcmVzb2x2ZXIgPSBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcikge1xuICAgICAgICAgICAgREkuaW5qZWN0KHJlc29sdmVyKSh0YXJnZXQsIHByb3BlcnR5LCBkZXNjcmlwdG9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVzb2x2ZXIuJGlzUmVzb2x2ZXIgPSB0cnVlO1xuICAgICAgICByZXNvbHZlci5yZXNvbHZlID0gZnVuY3Rpb24gKGhhbmRsZXIsIHJlcXVlc3Rvcikge1xuICAgICAgICAgICAgcmV0dXJuIGdldHRlcihrZXksIGhhbmRsZXIsIHJlcXVlc3Rvcik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByZXNvbHZlcjtcbiAgICB9O1xufVxuLyoqXG4gKiBBIGRlY29yYXRvciB0aGF0IHNwZWNpZmllcyB3aGF0IHRvIGluamVjdCBpbnRvIGl0cyB0YXJnZXQuXG4gKiBAcGFyYW0gZGVwZW5kZW5jaWVzIC0gVGhlIGRlcGVuZGVuY2llcyB0byBpbmplY3QuXG4gKiBAcmV0dXJucyBUaGUgZGVjb3JhdG9yIHRvIGJlIGFwcGxpZWQgdG8gdGhlIHRhcmdldCBjbGFzcy5cbiAqIEByZW1hcmtzXG4gKiBUaGUgZGVjb3JhdG9yIGNhbiBiZSB1c2VkIHRvIGRlY29yYXRlIGEgY2xhc3MsIGxpc3RpbmcgYWxsIG9mIHRoZSBjbGFzc2VzIGRlcGVuZGVuY2llcy5cbiAqIE9yIGl0IGNhbiBiZSB1c2VkIHRvIGRlY29yYXRlIGEgY29uc3RydWN0b3IgcGFyYW10ZXIsIGluZGljYXRpbmcgd2hhdCB0byBpbmplY3QgZm9yIHRoYXRcbiAqIHBhcmFtZXRlci5cbiAqIE9yIGl0IGNhbiBiZSB1c2VkIGZvciBhIHdlYiBjb21wb25lbnQgcHJvcGVydHksIGluZGljYXRpbmcgd2hhdCB0aGF0IHByb3BlcnR5IHNob3VsZCByZXNvbHZlIHRvLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGluamVjdCA9IERJLmluamVjdDtcbmZ1bmN0aW9uIHRyYW5zaWVudERlY29yYXRvcih0YXJnZXQpIHtcbiAgICByZXR1cm4gREkudHJhbnNpZW50KHRhcmdldCk7XG59XG5leHBvcnQgZnVuY3Rpb24gdHJhbnNpZW50KHRhcmdldCkge1xuICAgIHJldHVybiB0YXJnZXQgPT0gbnVsbCA/IHRyYW5zaWVudERlY29yYXRvciA6IHRyYW5zaWVudERlY29yYXRvcih0YXJnZXQpO1xufVxuY29uc3QgZGVmYXVsdFNpbmdsZXRvbk9wdGlvbnMgPSB7IHNjb3BlZDogZmFsc2UgfTtcbmZ1bmN0aW9uIHNpbmdsZXRvbkRlY29yYXRvcih0YXJnZXQpIHtcbiAgICByZXR1cm4gREkuc2luZ2xldG9uKHRhcmdldCk7XG59XG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNpbmdsZXRvbih0YXJnZXRPck9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIHRhcmdldE9yT3B0aW9ucyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBESS5zaW5nbGV0b24odGFyZ2V0T3JPcHRpb25zKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgkdGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBESS5zaW5nbGV0b24oJHRhcmdldCwgdGFyZ2V0T3JPcHRpb25zKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlQWxsUmVzb2x2ZXIoZ2V0dGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChrZXksIHNlYXJjaEFuY2VzdG9ycykge1xuICAgICAgICBzZWFyY2hBbmNlc3RvcnMgPSAhIXNlYXJjaEFuY2VzdG9ycztcbiAgICAgICAgY29uc3QgcmVzb2x2ZXIgPSBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcikge1xuICAgICAgICAgICAgREkuaW5qZWN0KHJlc29sdmVyKSh0YXJnZXQsIHByb3BlcnR5LCBkZXNjcmlwdG9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVzb2x2ZXIuJGlzUmVzb2x2ZXIgPSB0cnVlO1xuICAgICAgICByZXNvbHZlci5yZXNvbHZlID0gZnVuY3Rpb24gKGhhbmRsZXIsIHJlcXVlc3Rvcikge1xuICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb24gKi9cbiAgICAgICAgICAgIHJldHVybiBnZXR0ZXIoa2V5LCBoYW5kbGVyLCByZXF1ZXN0b3IsIHNlYXJjaEFuY2VzdG9ycyk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByZXNvbHZlcjtcbiAgICB9O1xufVxuLyoqXG4gKiBBIGRlY29yYXRvciBhbmQgREkgcmVzb2x2ZXIgdGhhdCB3aWxsIHJlc29sdmUgYW4gYXJyYXkgb2YgYWxsIGRlcGVuZGVuY2llc1xuICogcmVnaXN0ZXJlZCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5LlxuICogQHBhcmFtIGtleSAtIFRoZSBrZXkgdG8gcmVzb2x2ZSBhbGwgZGVwZW5kZW5jaWVzIGZvci5cbiAqIEBwYXJhbSBzZWFyY2hBbmNlc3RvcnMgLSBbb3B0aW9uYWxdIEluZGljYXRlcyB3aGV0aGVyIHRvIHNlYXJjaCBhbmNlc3RvciBjb250YWluZXJzLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgYWxsID0gY3JlYXRlQWxsUmVzb2x2ZXIoKGtleSwgaGFuZGxlciwgcmVxdWVzdG9yLCBzZWFyY2hBbmNlc3RvcnMpID0+IHJlcXVlc3Rvci5nZXRBbGwoa2V5LCBzZWFyY2hBbmNlc3RvcnMpKTtcbi8qKlxuICogQSBkZWNvcmF0b3IgdGhhdCBsYXppbHkgaW5qZWN0cyBhIGRlcGVuZGVuY3kgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGBLZXlgIGlzIHByZXNlbnQgYXQgdGhlIHRpbWUgb2YgZnVuY3Rpb24gY2FsbC5cbiAqXG4gKiBAZXhhbXBsZVxuICogWW91IG5lZWQgdG8gbWFrZSB5b3VyIGFyZ3VtZW50IGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSB0eXBlLCBmb3IgZXhhbXBsZVxuICogYGBgdHNcbiAqIGNsYXNzIEZvbyB7XG4gKiAgIGNvbnN0cnVjdG9yKCBAbGF6eSgncmFuZG9tJykgcHVibGljIHJhbmRvbTogKCkgPT4gbnVtYmVyIClcbiAqIH1cbiAqIGNvbnN0IGZvbyA9IGNvbnRhaW5lci5nZXQoRm9vKTsgLy8gaW5zdGFuY2VvZiBGb29cbiAqIGZvby5yYW5kb20oKTsgLy8gdGhyb3dzXG4gKiBgYGBcbiAqIHdvdWxkIHRocm93IGFuIGV4Y2VwdGlvbiBiZWNhdXNlIHlvdSBoYXZlbid0IHJlZ2lzdGVyZWQgYCdyYW5kb20nYCBiZWZvcmUgY2FsbGluZyB0aGUgbWV0aG9kLlxuICogQGV4YW1wbGVcbiAqIFRoaXMsIHdvdWxkIGdpdmUgeW91IGEgbmV3ICdNYXRoLnJhbmRvbSgpJyBudW1iZXIgZWFjaCB0aW1lLlxuICogYGBgdHNcbiAqIGNsYXNzIEZvbyB7XG4gKiAgIGNvbnN0cnVjdG9yKCBAbGF6eSgncmFuZG9tJykgcHVibGljIHJhbmRvbTogKCkgPT4gcmFuZG9tIClcbiAqIH1cbiAqIGNvbnRhaW5lci5yZWdpc3RlcihSZWdpc3RyYXRpb24uY2FsbGJhY2soJ3JhbmRvbScsIE1hdGgucmFuZG9tICkpO1xuICogY29udGFpbmVyLmdldChGb28pLnJhbmRvbSgpOyAvLyBzb21lIHJhbmRvbSBudW1iZXJcbiAqIGNvbnRhaW5lci5nZXQoRm9vKS5yYW5kb20oKTsgLy8gYW5vdGhlciByYW5kb20gbnVtYmVyXG4gKiBgYGBcbiAqXG4gKiBgQGxhenlgIGRvZXMgbm90IG1hbmFnZSB0aGUgbGlmZWN5Y2xlIG9mIHRoZSB1bmRlcmx5aW5nIGtleS4gSWYgeW91IHdhbnQgYSBzaW5nbGV0b24sIHlvdSBoYXZlIHRvIHJlZ2lzdGVyIGFzIGFcbiAqIGBzaW5nbGV0b25gLCBgdHJhbnNpZW50YCB3b3VsZCBhbHNvIGJlaGF2ZSBhcyB5b3Ugd291bGQgZXhwZWN0LCBwcm92aWRpbmcgeW91IGEgbmV3IGluc3RhbmNlIGVhY2ggdGltZS5cbiAqXG4gKiBAcGFyYW0ga2V5IC0gVGhlIGtleSB0byBsYXppbHkgcmVzb2x2ZS5cbiAqIHNlZSB7QGxpbmsgREkuY3JlYXRlSW50ZXJmYWNlfSBvbiBpbnRlcmFjdGlvbnMgd2l0aCBpbnRlcmZhY2VzXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgbGF6eSA9IGNyZWF0ZVJlc29sdmVyKChrZXksIGhhbmRsZXIsIHJlcXVlc3RvcikgPT4ge1xuICAgIHJldHVybiAoKSA9PiByZXF1ZXN0b3IuZ2V0KGtleSk7XG59KTtcbi8qKlxuICogQSBkZWNvcmF0b3IgdGhhdCBhbGxvd3MgeW91IHRvIG9wdGlvbmFsbHkgaW5qZWN0IGEgZGVwZW5kZW5jeSBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgW1tgS2V5YF1dIGlzIHByZXNlbnQsIGZvciBleGFtcGxlOlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBjbGFzcyBGb28ge1xuICogICBjb25zdHJ1Y3RvciggQGluamVjdCgnbXlzdHJpbmcnKSBwdWJsaWMgc3RyOiBzdHJpbmcgPSAnc29tZXN0cmluZycgKVxuICogfVxuICogY29udGFpbmVyLmdldChGb28pOyAvLyB0aHJvd3NcbiAqIGBgYFxuICogd291bGQgZmFpbFxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY2xhc3MgRm9vIHtcbiAqICAgY29uc3RydWN0b3IoIEBvcHRpb25hbCgnbXlzdHJpbmcnKSBwdWJsaWMgc3RyOiBzdHJpbmcgPSAnc29tZXN0cmluZycgKVxuICogfVxuICogY29udGFpbmVyLmdldChGb28pLnN0ciAvLyBzb21lc3RyaW5nXG4gKiBgYGBcbiAqIGlmIHlvdSB1c2UgaXQgd2l0aG91dCBhIGRlZmF1bHQgaXQgd2lsbCBpbmplY3QgYHVuZGVmaW5lZGAsIHNvIHJlbWVtYmVyIHRvIG1hcmsgeW91ciBpbnB1dCB0eXBlIGFzXG4gKiBwb3NzaWJseSBgdW5kZWZpbmVkYCFcbiAqXG4gKiBAcGFyYW0ga2V5IC0gVGhlIGtleSB0byBvcHRpb25hbGx5IHJlc29sdmUuXG4gKiBzZWUge0BsaW5rIERJLmNyZWF0ZUludGVyZmFjZX0gb24gaW50ZXJhY3Rpb25zIHdpdGggaW50ZXJmYWNlc1xuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IG9wdGlvbmFsID0gY3JlYXRlUmVzb2x2ZXIoKGtleSwgaGFuZGxlciwgcmVxdWVzdG9yKSA9PiB7XG4gICAgaWYgKHJlcXVlc3Rvci5oYXMoa2V5LCB0cnVlKSkge1xuICAgICAgICByZXR1cm4gcmVxdWVzdG9yLmdldChrZXkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59KTtcbi8qKlxuICogQSBkZWNvcmF0b3IgdGhhdCB0ZWxscyB0aGUgY29udGFpbmVyIG5vdCB0byB0cnkgdG8gaW5qZWN0IGEgZGVwZW5kZW5jeS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpZ25vcmUodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcikge1xuICAgIERJLmluamVjdChpZ25vcmUpKHRhcmdldCwgcHJvcGVydHksIGRlc2NyaXB0b3IpO1xufVxuLy8gSGFjazogY2FzdGluZyBiZWxvdyB1c2VkIHRvIHByZXZlbnQgVFMgZnJvbSBnZW5lcmF0ZSBhIG5hbWVzcGFjZSB3aGljaCBjYW4ndCBiZSBjb21tZW50ZWRcbi8vIGFuZCByZXN1bHRzIGluIGRvY3VtZW50YXRpb24gdmFsaWRhdGlvbiBlcnJvcnMuXG5pZ25vcmUuJGlzUmVzb2x2ZXIgPSB0cnVlO1xuaWdub3JlLnJlc29sdmUgPSAoKSA9PiB1bmRlZmluZWQ7XG4vKipcbiAqIEEgZGVjb3JhdG9yIHRoYXQgaW5kaWNhdGVzIHRoYXQgYSBuZXcgaW5zdGFuY2Ugc2hvdWxkIGJlIGluamVjdGVkIHNjb3BlZCB0byB0aGVcbiAqIGNvbnRhaW5lciB0aGF0IHJlcXVlc3RlZCB0aGUgaW5zdGFuY2UuXG4gKiBAcGFyYW0ga2V5IC0gVGhlIGRlcGVuZGVuY3kga2V5IGZvciB0aGUgbmV3IGluc3RhbmNlLlxuICogQHJlbWFya3NcbiAqIFRoaXMgY3JlYXRlcyBhIHJlc29sdmVyIHdpdGggYW4gaW5zdGFuY2Ugc3RyYXRlZ3kgcG9pbnRpbmcgdG8gdGhlIG5ldyBpbnN0YW5jZSwgZWZmZWN0aXZlbHlcbiAqIG1ha2luZyB0aGlzIGEgc2luZ2xldG9uLCBzY29wZWQgdG8gdGhlIGNvbnRhaW5lciBvciBET00ncyBzdWJ0cmVlLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IG5ld0luc3RhbmNlRm9yU2NvcGUgPSBjcmVhdGVSZXNvbHZlcigoa2V5LCBoYW5kbGVyLCByZXF1ZXN0b3IpID0+IHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IGNyZWF0ZU5ld0luc3RhbmNlKGtleSwgaGFuZGxlcik7XG4gICAgY29uc3QgcmVzb2x2ZXIgPSBuZXcgUmVzb2x2ZXJJbXBsKGtleSwgMCAvKiBpbnN0YW5jZSAqLywgaW5zdGFuY2UpO1xuICAgIHJlcXVlc3Rvci5yZWdpc3RlclJlc29sdmVyKGtleSwgcmVzb2x2ZXIpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbn0pO1xuLyoqXG4gKiBBIGRlY29yYXRvciB0aGF0IGluZGljYXRlcyB0aGF0IGEgbmV3IGluc3RhbmNlIHNob3VsZCBiZSBpbmplY3RlZC5cbiAqIEBwYXJhbSBrZXkgLSBUaGUgZGVwZW5kZW5jeSBrZXkgZm9yIHRoZSBuZXcgaW5zdGFuY2UuXG4gKiBAcmVtYXJrc1xuICogVGhlIGluc3RhbmNlIGlzIG5vdCBpbnRlcm5hbGx5IGNhY2hlZCB3aXRoIGEgcmVzb2x2ZXIgYXMgbmV3SW5zdGFuY2VGb3JTY29wZSBkb2VzLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IG5ld0luc3RhbmNlT2YgPSBjcmVhdGVSZXNvbHZlcigoa2V5LCBoYW5kbGVyLCBfcmVxdWVzdG9yKSA9PiBjcmVhdGVOZXdJbnN0YW5jZShrZXksIGhhbmRsZXIpKTtcbmZ1bmN0aW9uIGNyZWF0ZU5ld0luc3RhbmNlKGtleSwgaGFuZGxlcikge1xuICAgIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uICovXG4gICAgcmV0dXJuIGhhbmRsZXIuZ2V0RmFjdG9yeShrZXkpLmNvbnN0cnVjdChoYW5kbGVyKTtcbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBSZXNvbHZlckltcGwge1xuICAgIGNvbnN0cnVjdG9yKGtleSwgc3RyYXRlZ3ksIHN0YXRlKSB7XG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xuICAgICAgICB0aGlzLnN0cmF0ZWd5ID0gc3RyYXRlZ3k7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgdGhpcy5yZXNvbHZpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgZ2V0ICRpc1Jlc29sdmVyKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmVnaXN0ZXIoY29udGFpbmVyKSB7XG4gICAgICAgIHJldHVybiBjb250YWluZXIucmVnaXN0ZXJSZXNvbHZlcih0aGlzLmtleSwgdGhpcyk7XG4gICAgfVxuICAgIHJlc29sdmUoaGFuZGxlciwgcmVxdWVzdG9yKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5zdHJhdGVneSkge1xuICAgICAgICAgICAgY2FzZSAwIC8qIGluc3RhbmNlICovOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICAgICAgICAgICAgY2FzZSAxIC8qIHNpbmdsZXRvbiAqLzoge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc29sdmluZykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEN5Y2xpYyBkZXBlbmRlbmN5IGZvdW5kOiAke3RoaXMuc3RhdGUubmFtZX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgIC5nZXRGYWN0b3J5KHRoaXMuc3RhdGUpXG4gICAgICAgICAgICAgICAgICAgIC5jb25zdHJ1Y3QocmVxdWVzdG9yKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0cmF0ZWd5ID0gMCAvKiBpbnN0YW5jZSAqLztcbiAgICAgICAgICAgICAgICB0aGlzLnJlc29sdmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAyIC8qIHRyYW5zaWVudCAqLzoge1xuICAgICAgICAgICAgICAgIC8vIEFsd2F5cyBjcmVhdGUgdHJhbnNpZW50cyBmcm9tIHRoZSByZXF1ZXN0aW5nIGNvbnRhaW5lclxuICAgICAgICAgICAgICAgIGNvbnN0IGZhY3RvcnkgPSBoYW5kbGVyLmdldEZhY3RvcnkodGhpcy5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGZhY3RvcnkgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBSZXNvbHZlciBmb3IgJHtTdHJpbmcodGhpcy5rZXkpfSByZXR1cm5lZCBhIG51bGwgZmFjdG9yeWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFjdG9yeS5jb25zdHJ1Y3QocmVxdWVzdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgMyAvKiBjYWxsYmFjayAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZShoYW5kbGVyLCByZXF1ZXN0b3IsIHRoaXMpO1xuICAgICAgICAgICAgY2FzZSA0IC8qIGFycmF5ICovOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlWzBdLnJlc29sdmUoaGFuZGxlciwgcmVxdWVzdG9yKTtcbiAgICAgICAgICAgIGNhc2UgNSAvKiBhbGlhcyAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdG9yLmdldCh0aGlzLnN0YXRlKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHJlc29sdmVyIHN0cmF0ZWd5IHNwZWNpZmllZDogJHt0aGlzLnN0cmF0ZWd5fS5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRGYWN0b3J5KGNvbnRhaW5lcikge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgc3dpdGNoICh0aGlzLnN0cmF0ZWd5KSB7XG4gICAgICAgICAgICBjYXNlIDEgLyogc2luZ2xldG9uICovOlxuICAgICAgICAgICAgY2FzZSAyIC8qIHRyYW5zaWVudCAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGFpbmVyLmdldEZhY3RvcnkodGhpcy5zdGF0ZSk7XG4gICAgICAgICAgICBjYXNlIDUgLyogYWxpYXMgKi86XG4gICAgICAgICAgICAgICAgcmV0dXJuIChfYyA9IChfYiA9IChfYSA9IGNvbnRhaW5lci5nZXRSZXNvbHZlcih0aGlzLnN0YXRlKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldEZhY3RvcnkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYWxsKF9hLCBjb250YWluZXIpKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBudWxsO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNvbnRhaW5lckdldEtleShkKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KGQpO1xufVxuZnVuY3Rpb24gdHJhbnNmb3JtSW5zdGFuY2UoaW5zdCwgdHJhbnNmb3JtKSB7XG4gICAgcmV0dXJuIHRyYW5zZm9ybShpbnN0KTtcbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBGYWN0b3J5SW1wbCB7XG4gICAgY29uc3RydWN0b3IoVHlwZSwgZGVwZW5kZW5jaWVzKSB7XG4gICAgICAgIHRoaXMuVHlwZSA9IFR5cGU7XG4gICAgICAgIHRoaXMuZGVwZW5kZW5jaWVzID0gZGVwZW5kZW5jaWVzO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybWVycyA9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0cnVjdChjb250YWluZXIsIGR5bmFtaWNEZXBlbmRlbmNpZXMpIHtcbiAgICAgICAgbGV0IGluc3RhbmNlO1xuICAgICAgICBpZiAoZHluYW1pY0RlcGVuZGVuY2llcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBpbnN0YW5jZSA9IG5ldyB0aGlzLlR5cGUoLi4udGhpcy5kZXBlbmRlbmNpZXMubWFwKGNvbnRhaW5lckdldEtleSwgY29udGFpbmVyKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbnN0YW5jZSA9IG5ldyB0aGlzLlR5cGUoLi4udGhpcy5kZXBlbmRlbmNpZXMubWFwKGNvbnRhaW5lckdldEtleSwgY29udGFpbmVyKSwgLi4uZHluYW1pY0RlcGVuZGVuY2llcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudHJhbnNmb3JtZXJzID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1lcnMucmVkdWNlKHRyYW5zZm9ybUluc3RhbmNlLCBpbnN0YW5jZSk7XG4gICAgfVxuICAgIHJlZ2lzdGVyVHJhbnNmb3JtZXIodHJhbnNmb3JtZXIpIHtcbiAgICAgICAgKHRoaXMudHJhbnNmb3JtZXJzIHx8ICh0aGlzLnRyYW5zZm9ybWVycyA9IFtdKSkucHVzaCh0cmFuc2Zvcm1lcik7XG4gICAgfVxufVxuY29uc3QgY29udGFpbmVyUmVzb2x2ZXIgPSB7XG4gICAgJGlzUmVzb2x2ZXI6IHRydWUsXG4gICAgcmVzb2x2ZShoYW5kbGVyLCByZXF1ZXN0b3IpIHtcbiAgICAgICAgcmV0dXJuIHJlcXVlc3RvcjtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGlzUmVnaXN0cnkob2JqKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmoucmVnaXN0ZXIgPT09IFwiZnVuY3Rpb25cIjtcbn1cbmZ1bmN0aW9uIGlzU2VsZlJlZ2lzdHJ5KG9iaikge1xuICAgIHJldHVybiBpc1JlZ2lzdHJ5KG9iaikgJiYgdHlwZW9mIG9iai5yZWdpc3RlckluUmVxdWVzdG9yID09PSBcImJvb2xlYW5cIjtcbn1cbmZ1bmN0aW9uIGlzUmVnaXN0ZXJJblJlcXVlc3RlcihvYmopIHtcbiAgICByZXR1cm4gaXNTZWxmUmVnaXN0cnkob2JqKSAmJiBvYmoucmVnaXN0ZXJJblJlcXVlc3Rvcjtcbn1cbmZ1bmN0aW9uIGlzQ2xhc3Mob2JqKSB7XG4gICAgcmV0dXJuIG9iai5wcm90b3R5cGUgIT09IHZvaWQgMDtcbn1cbmNvbnN0IEluc3RyaW5zaWNUeXBlTmFtZXMgPSBuZXcgU2V0KFtcbiAgICBcIkFycmF5XCIsXG4gICAgXCJBcnJheUJ1ZmZlclwiLFxuICAgIFwiQm9vbGVhblwiLFxuICAgIFwiRGF0YVZpZXdcIixcbiAgICBcIkRhdGVcIixcbiAgICBcIkVycm9yXCIsXG4gICAgXCJFdmFsRXJyb3JcIixcbiAgICBcIkZsb2F0MzJBcnJheVwiLFxuICAgIFwiRmxvYXQ2NEFycmF5XCIsXG4gICAgXCJGdW5jdGlvblwiLFxuICAgIFwiSW50OEFycmF5XCIsXG4gICAgXCJJbnQxNkFycmF5XCIsXG4gICAgXCJJbnQzMkFycmF5XCIsXG4gICAgXCJNYXBcIixcbiAgICBcIk51bWJlclwiLFxuICAgIFwiT2JqZWN0XCIsXG4gICAgXCJQcm9taXNlXCIsXG4gICAgXCJSYW5nZUVycm9yXCIsXG4gICAgXCJSZWZlcmVuY2VFcnJvclwiLFxuICAgIFwiUmVnRXhwXCIsXG4gICAgXCJTZXRcIixcbiAgICBcIlNoYXJlZEFycmF5QnVmZmVyXCIsXG4gICAgXCJTdHJpbmdcIixcbiAgICBcIlN5bnRheEVycm9yXCIsXG4gICAgXCJUeXBlRXJyb3JcIixcbiAgICBcIlVpbnQ4QXJyYXlcIixcbiAgICBcIlVpbnQ4Q2xhbXBlZEFycmF5XCIsXG4gICAgXCJVaW50MTZBcnJheVwiLFxuICAgIFwiVWludDMyQXJyYXlcIixcbiAgICBcIlVSSUVycm9yXCIsXG4gICAgXCJXZWFrTWFwXCIsXG4gICAgXCJXZWFrU2V0XCIsXG5dKTtcbmNvbnN0IERJTG9jYXRlUGFyZW50RXZlbnRUeXBlID0gXCJfX0RJX0xPQ0FURV9QQVJFTlRfX1wiO1xuY29uc3QgZmFjdG9yaWVzID0gbmV3IE1hcCgpO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIENvbnRhaW5lckltcGwge1xuICAgIGNvbnN0cnVjdG9yKG93bmVyLCBjb25maWcpIHtcbiAgICAgICAgdGhpcy5vd25lciA9IG93bmVyO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRGVwdGggPSAwO1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBudWxsO1xuICAgICAgICBpZiAob3duZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgIG93bmVyLiQkY29udGFpbmVyJCQgPSB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVzb2x2ZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLnJlc29sdmVycy5zZXQoQ29udGFpbmVyLCBjb250YWluZXJSZXNvbHZlcik7XG4gICAgICAgIGlmIChvd25lciBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgICAgICAgIG93bmVyLmFkZEV2ZW50TGlzdGVuZXIoRElMb2NhdGVQYXJlbnRFdmVudFR5cGUsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGUuY29tcG9zZWRQYXRoKClbMF0gIT09IHRoaXMub3duZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5kZXRhaWwuY29udGFpbmVyID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICBpZiAodGhpcy5fcGFyZW50ID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRoaXMuX3BhcmVudCA9IHRoaXMuY29uZmlnLnBhcmVudExvY2F0b3IodGhpcy5vd25lcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudDtcbiAgICB9XG4gICAgZ2V0IGRlcHRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQgPT09IG51bGwgPyAwIDogdGhpcy5wYXJlbnQuZGVwdGggKyAxO1xuICAgIH1cbiAgICBnZXQgcmVzcG9uc2libGVGb3JPd25lclJlcXVlc3RzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25maWcucmVzcG9uc2libGVGb3JPd25lclJlcXVlc3RzO1xuICAgIH1cbiAgICByZWdpc3RlcldpdGhDb250ZXh0KGNvbnRleHQsIC4uLnBhcmFtcykge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLnJlZ2lzdGVyKC4uLnBhcmFtcyk7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZWdpc3RlciguLi5wYXJhbXMpIHtcbiAgICAgICAgaWYgKCsrdGhpcy5yZWdpc3RlckRlcHRoID09PSAxMDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBhdXRvcmVnaXN0ZXIgZGVwZW5kZW5jeVwiKTtcbiAgICAgICAgICAgIC8vIE1vc3QgbGlrZWx5IGNhdXNlIGlzIHRyeWluZyB0byByZWdpc3RlciBhIHBsYWluIG9iamVjdCB0aGF0IGRvZXMgbm90IGhhdmUgYVxuICAgICAgICAgICAgLy8gcmVnaXN0ZXIgbWV0aG9kIGFuZCBpcyBub3QgYSBjbGFzcyBjb25zdHJ1Y3RvclxuICAgICAgICB9XG4gICAgICAgIGxldCBjdXJyZW50O1xuICAgICAgICBsZXQga2V5cztcbiAgICAgICAgbGV0IHZhbHVlO1xuICAgICAgICBsZXQgajtcbiAgICAgICAgbGV0IGpqO1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBwYXJhbXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgY3VycmVudCA9IHBhcmFtc1tpXTtcbiAgICAgICAgICAgIGlmICghaXNPYmplY3QoY3VycmVudCkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc1JlZ2lzdHJ5KGN1cnJlbnQpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudC5yZWdpc3Rlcih0aGlzLCBjb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzQ2xhc3MoY3VycmVudCkpIHtcbiAgICAgICAgICAgICAgICBSZWdpc3RyYXRpb24uc2luZ2xldG9uKGN1cnJlbnQsIGN1cnJlbnQpLnJlZ2lzdGVyKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAga2V5cyA9IE9iamVjdC5rZXlzKGN1cnJlbnQpO1xuICAgICAgICAgICAgICAgIGogPSAwO1xuICAgICAgICAgICAgICAgIGpqID0ga2V5cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZm9yICg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY3VycmVudFtrZXlzW2pdXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc09iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdGU6IHdlIGNvdWxkIHJlbW92ZSB0aGlzIGlmLWJyYW5jaCBhbmQgY2FsbCB0aGlzLnJlZ2lzdGVyIGRpcmVjdGx5XG4gICAgICAgICAgICAgICAgICAgIC8vIC0gdGhlIGV4dHJhIGNoZWNrIGlzIGp1c3QgYSBwZXJmIHR3ZWFrIHRvIGNyZWF0ZSBmZXdlciB1bm5lY2Vzc2FyeSBhcnJheXMgYnkgdGhlIHNwcmVhZCBvcGVyYXRvclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNSZWdpc3RyeSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnJlZ2lzdGVyKHRoaXMsIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3Rlcih2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLS10aGlzLnJlZ2lzdGVyRGVwdGg7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZWdpc3RlclJlc29sdmVyKGtleSwgcmVzb2x2ZXIpIHtcbiAgICAgICAgdmFsaWRhdGVLZXkoa2V5KTtcbiAgICAgICAgY29uc3QgcmVzb2x2ZXJzID0gdGhpcy5yZXNvbHZlcnM7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlc29sdmVycy5nZXQoa2V5KTtcbiAgICAgICAgaWYgKHJlc3VsdCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXNvbHZlcnMuc2V0KGtleSwgcmVzb2x2ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFJlc29sdmVySW1wbCAmJlxuICAgICAgICAgICAgcmVzdWx0LnN0cmF0ZWd5ID09PSA0IC8qIGFycmF5ICovKSB7XG4gICAgICAgICAgICByZXN1bHQuc3RhdGUucHVzaChyZXNvbHZlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXNvbHZlcnMuc2V0KGtleSwgbmV3IFJlc29sdmVySW1wbChrZXksIDQgLyogYXJyYXkgKi8sIFtyZXN1bHQsIHJlc29sdmVyXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNvbHZlcjtcbiAgICB9XG4gICAgcmVnaXN0ZXJUcmFuc2Zvcm1lcihrZXksIHRyYW5zZm9ybWVyKSB7XG4gICAgICAgIGNvbnN0IHJlc29sdmVyID0gdGhpcy5nZXRSZXNvbHZlcihrZXkpO1xuICAgICAgICBpZiAocmVzb2x2ZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXNvbHZlci5nZXRGYWN0b3J5KSB7XG4gICAgICAgICAgICBjb25zdCBmYWN0b3J5ID0gcmVzb2x2ZXIuZ2V0RmFjdG9yeSh0aGlzKTtcbiAgICAgICAgICAgIGlmIChmYWN0b3J5ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGlzIHR5cGUgY2FzdCBpcyBhIGJpdCBvZiBhIGhhY2t5IG9uZSwgbmVjZXNzYXJ5IGR1ZSB0byB0aGUgZHVwbGljaXR5IG9mIElSZXNvbHZlckxpa2UuXG4gICAgICAgICAgICAvLyBQcm9ibGVtIGlzIHRoYXQgdGhhdCBpbnRlcmZhY2UncyB0eXBlIGFyZyBjYW4gYmUgb2YgdHlwZSBLZXksIGJ1dCB0aGUgZ2V0RmFjdG9yeSBtZXRob2Qgb25seSB3b3JrcyBvblxuICAgICAgICAgICAgLy8gdHlwZSBDb25zdHJ1Y3RhYmxlLiBTbyB0aGUgcmV0dXJuIHR5cGUgb2YgdGhhdCBvcHRpb25hbCBtZXRob2QgaGFzIHRoaXMgYWRkaXRpb25hbCBjb25zdHJhaW50LCB3aGljaFxuICAgICAgICAgICAgLy8gc2VlbXMgdG8gY29uZnVzZSB0aGUgdHlwZSBjaGVja2VyLlxuICAgICAgICAgICAgZmFjdG9yeS5yZWdpc3RlclRyYW5zZm9ybWVyKHRyYW5zZm9ybWVyKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0UmVzb2x2ZXIoa2V5LCBhdXRvUmVnaXN0ZXIgPSB0cnVlKSB7XG4gICAgICAgIHZhbGlkYXRlS2V5KGtleSk7XG4gICAgICAgIGlmIChrZXkucmVzb2x2ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICB9XG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhcyAqL1xuICAgICAgICBsZXQgY3VycmVudCA9IHRoaXM7XG4gICAgICAgIGxldCByZXNvbHZlcjtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmVzb2x2ZXIgPSBjdXJyZW50LnJlc29sdmVycy5nZXQoa2V5KTtcbiAgICAgICAgICAgIGlmIChyZXNvbHZlciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQucGFyZW50ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IGlzUmVnaXN0ZXJJblJlcXVlc3RlcihrZXkpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY3VycmVudDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF1dG9SZWdpc3RlciA/IHRoaXMuaml0UmVnaXN0ZXIoa2V5LCBoYW5kbGVyKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaGFzKGtleSwgc2VhcmNoQW5jZXN0b3JzID0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZXJzLmhhcyhrZXkpXG4gICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgIDogc2VhcmNoQW5jZXN0b3JzICYmIHRoaXMucGFyZW50ICE9IG51bGxcbiAgICAgICAgICAgICAgICA/IHRoaXMucGFyZW50LmhhcyhrZXksIHRydWUpXG4gICAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0KGtleSkge1xuICAgICAgICB2YWxpZGF0ZUtleShrZXkpO1xuICAgICAgICBpZiAoa2V5LiRpc1Jlc29sdmVyKSB7XG4gICAgICAgICAgICByZXR1cm4ga2V5LnJlc29sdmUodGhpcywgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzICovXG4gICAgICAgIGxldCBjdXJyZW50ID0gdGhpcztcbiAgICAgICAgbGV0IHJlc29sdmVyO1xuICAgICAgICB3aGlsZSAoY3VycmVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXNvbHZlciA9IGN1cnJlbnQucmVzb2x2ZXJzLmdldChrZXkpO1xuICAgICAgICAgICAgaWYgKHJlc29sdmVyID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudC5wYXJlbnQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gaXNSZWdpc3RlckluUmVxdWVzdGVyKGtleSlcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgOiBjdXJyZW50O1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlciA9IHRoaXMuaml0UmVnaXN0ZXIoa2V5LCBoYW5kbGVyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVyLnJlc29sdmUoY3VycmVudCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlci5yZXNvbHZlKGN1cnJlbnQsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIHJlc29sdmUga2V5OiAke1N0cmluZyhrZXkpfWApO1xuICAgIH1cbiAgICBnZXRBbGwoa2V5LCBzZWFyY2hBbmNlc3RvcnMgPSBmYWxzZSkge1xuICAgICAgICB2YWxpZGF0ZUtleShrZXkpO1xuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXMgKi9cbiAgICAgICAgY29uc3QgcmVxdWVzdG9yID0gdGhpcztcbiAgICAgICAgbGV0IGN1cnJlbnQgPSByZXF1ZXN0b3I7XG4gICAgICAgIGxldCByZXNvbHZlcjtcbiAgICAgICAgaWYgKHNlYXJjaEFuY2VzdG9ycykge1xuICAgICAgICAgICAgbGV0IHJlc29sdXRpb25zID0gZW1wdHlBcnJheTtcbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlciA9IGN1cnJlbnQucmVzb2x2ZXJzLmdldChrZXkpO1xuICAgICAgICAgICAgICAgIGlmIChyZXNvbHZlciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb25zID0gcmVzb2x1dGlvbnMuY29uY2F0KFxuICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvbiAqL1xuICAgICAgICAgICAgICAgICAgICBidWlsZEFsbFJlc3BvbnNlKHJlc29sdmVyLCBjdXJyZW50LCByZXF1ZXN0b3IpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdXRpb25zO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJlc29sdmVyID0gY3VycmVudC5yZXNvbHZlcnMuZ2V0KGtleSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc29sdmVyID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50O1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlBcnJheTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJ1aWxkQWxsUmVzcG9uc2UocmVzb2x2ZXIsIGN1cnJlbnQsIHJlcXVlc3Rvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbXB0eUFycmF5O1xuICAgIH1cbiAgICBnZXRGYWN0b3J5KFR5cGUpIHtcbiAgICAgICAgbGV0IGZhY3RvcnkgPSBmYWN0b3JpZXMuZ2V0KFR5cGUpO1xuICAgICAgICBpZiAoZmFjdG9yeSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBpZiAoaXNOYXRpdmVGdW5jdGlvbihUeXBlKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtUeXBlLm5hbWV9IGlzIGEgbmF0aXZlIGZ1bmN0aW9uIGFuZCB0aGVyZWZvcmUgY2Fubm90IGJlIHNhZmVseSBjb25zdHJ1Y3RlZCBieSBESS4gSWYgdGhpcyBpcyBpbnRlbnRpb25hbCwgcGxlYXNlIHVzZSBhIGNhbGxiYWNrIG9yIGNhY2hlZENhbGxiYWNrIHJlc29sdmVyLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmFjdG9yaWVzLnNldChUeXBlLCAoZmFjdG9yeSA9IG5ldyBGYWN0b3J5SW1wbChUeXBlLCBESS5nZXREZXBlbmRlbmNpZXMoVHlwZSkpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhY3Rvcnk7XG4gICAgfVxuICAgIHJlZ2lzdGVyRmFjdG9yeShrZXksIGZhY3RvcnkpIHtcbiAgICAgICAgZmFjdG9yaWVzLnNldChrZXksIGZhY3RvcnkpO1xuICAgIH1cbiAgICBjcmVhdGVDaGlsZChjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb250YWluZXJJbXBsKG51bGwsIE9iamVjdC5hc3NpZ24oe30sIHRoaXMuY29uZmlnLCBjb25maWcsIHsgcGFyZW50TG9jYXRvcjogKCkgPT4gdGhpcyB9KSk7XG4gICAgfVxuICAgIGppdFJlZ2lzdGVyKGtleUFzVmFsdWUsIGhhbmRsZXIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBrZXlBc1ZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGVkIHRvIGppdFJlZ2lzdGVyIHNvbWV0aGluZyB0aGF0IGlzIG5vdCBhIGNvbnN0cnVjdG9yOiAnJHtrZXlBc1ZhbHVlfScuIERpZCB5b3UgZm9yZ2V0IHRvIHJlZ2lzdGVyIHRoaXMgZGVwZW5kZW5jeT9gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoSW5zdHJpbnNpY1R5cGVOYW1lcy5oYXMoa2V5QXNWYWx1ZS5uYW1lKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gaml0UmVnaXN0ZXIgYW4gaW50cmluc2ljIHR5cGU6ICR7a2V5QXNWYWx1ZS5uYW1lfS4gRGlkIHlvdSBmb3JnZXQgdG8gYWRkIEBpbmplY3QoS2V5KWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1JlZ2lzdHJ5KGtleUFzVmFsdWUpKSB7XG4gICAgICAgICAgICBjb25zdCByZWdpc3RyYXRpb25SZXNvbHZlciA9IGtleUFzVmFsdWUucmVnaXN0ZXIoaGFuZGxlcik7XG4gICAgICAgICAgICBpZiAoIShyZWdpc3RyYXRpb25SZXNvbHZlciBpbnN0YW5jZW9mIE9iamVjdCkgfHxcbiAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25SZXNvbHZlci5yZXNvbHZlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdSZXNvbHZlciA9IGhhbmRsZXIucmVzb2x2ZXJzLmdldChrZXlBc1ZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAobmV3UmVzb2x2ZXIgIT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdSZXNvbHZlcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQSB2YWxpZCByZXNvbHZlciB3YXMgbm90IHJldHVybmVkIGZyb20gdGhlIHN0YXRpYyByZWdpc3RlciBtZXRob2RcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVnaXN0cmF0aW9uUmVzb2x2ZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5QXNWYWx1ZS4kaXNJbnRlcmZhY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGVkIHRvIGppdFJlZ2lzdGVyIGFuIGludGVyZmFjZTogJHtrZXlBc1ZhbHVlLmZyaWVuZGx5TmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVyID0gdGhpcy5jb25maWcuZGVmYXVsdFJlc29sdmVyKGtleUFzVmFsdWUsIGhhbmRsZXIpO1xuICAgICAgICAgICAgaGFuZGxlci5yZXNvbHZlcnMuc2V0KGtleUFzVmFsdWUsIHJlc29sdmVyKTtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlcjtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNvbnN0IGNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIGNhY2hlQ2FsbGJhY2tSZXN1bHQoZnVuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChoYW5kbGVyLCByZXF1ZXN0b3IsIHJlc29sdmVyKSB7XG4gICAgICAgIGlmIChjYWNoZS5oYXMocmVzb2x2ZXIpKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGUuZ2V0KHJlc29sdmVyKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0ID0gZnVuKGhhbmRsZXIsIHJlcXVlc3RvciwgcmVzb2x2ZXIpO1xuICAgICAgICBjYWNoZS5zZXQocmVzb2x2ZXIsIHQpO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xufVxuLyoqXG4gKiBZb3UgY2FuIHVzZSB0aGUgcmVzdWx0aW5nIFJlZ2lzdHJhdGlvbiBvZiBhbnkgb2YgdGhlIGZhY3RvcnkgbWV0aG9kc1xuICogdG8gcmVnaXN0ZXIgd2l0aCB0aGUgY29udGFpbmVyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqIGNsYXNzIEZvbyB7fVxuICogY29uc3QgY29udGFpbmVyID0gREkuY3JlYXRlQ29udGFpbmVyKCk7XG4gKiBjb250YWluZXIucmVnaXN0ZXIoUmVnaXN0cmF0aW9uLmluc3RhbmNlKEZvbywgbmV3IEZvbygpKSk7XG4gKiBjb250YWluZXIuZ2V0KEZvbyk7XG4gKiBgYGBcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBSZWdpc3RyYXRpb24gPSBPYmplY3QuZnJlZXplKHtcbiAgICAvKipcbiAgICAgKiBBbGxvd3MgeW91IHRvIHBhc3MgYW4gaW5zdGFuY2UuXG4gICAgICogRXZlcnkgdGltZSB5b3UgcmVxdWVzdCB0aGlzIHtAbGluayBLZXl9IHlvdSB3aWxsIGdldCB0aGlzIGluc3RhbmNlIGJhY2suXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIFJlZ2lzdHJhdGlvbi5pbnN0YW5jZShGb28sIG5ldyBGb28oKSkpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIGtleSAtIFRoZSBrZXkgdG8gcmVnaXN0ZXIgdGhlIGluc3RhbmNlIHVuZGVyLlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBpbnN0YW5jZSB0byByZXR1cm4gd2hlbiB0aGUga2V5IGlzIHJlcXVlc3RlZC5cbiAgICAgKi9cbiAgICBpbnN0YW5jZShrZXksIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZXJJbXBsKGtleSwgMCAvKiBpbnN0YW5jZSAqLywgdmFsdWUpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBmcm9tIHRoZSBjbGFzcy5cbiAgICAgKiBFdmVyeSB0aW1lIHlvdSByZXF1ZXN0IHRoaXMge0BsaW5rIEtleX0geW91IHdpbGwgZ2V0IHRoZSBzYW1lIG9uZSBiYWNrLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBSZWdpc3RyYXRpb24uc2luZ2xldG9uKEZvbywgRm9vKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5IHRvIHJlZ2lzdGVyIHRoZSBzaW5nbGV0b24gdW5kZXIuXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIGNsYXNzIHRvIGluc3RhbnRpYXRlIGFzIGEgc2luZ2xldG9uIHdoZW4gZmlyc3QgcmVxdWVzdGVkLlxuICAgICAqL1xuICAgIHNpbmdsZXRvbihrZXksIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZXJJbXBsKGtleSwgMSAvKiBzaW5nbGV0b24gKi8sIHZhbHVlKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2UgZnJvbSBhIGNsYXNzLlxuICAgICAqIEV2ZXJ5IHRpbWUgeW91IHJlcXVlc3QgdGhpcyB7QGxpbmsgS2V5fSB5b3Ugd2lsbCBnZXQgYSBuZXcgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIFJlZ2lzdHJhdGlvbi5pbnN0YW5jZShGb28sIEZvbyk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0ga2V5IC0gVGhlIGtleSB0byByZWdpc3RlciB0aGUgaW5zdGFuY2UgdHlwZSB1bmRlci5cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgY2xhc3MgdG8gaW5zdGFudGlhdGUgZWFjaCB0aW1lIHRoZSBrZXkgaXMgcmVxdWVzdGVkLlxuICAgICAqL1xuICAgIHRyYW5zaWVudChrZXksIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZXJJbXBsKGtleSwgMiAvKiB0cmFuc2llbnQgKi8sIHZhbHVlKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIERlbGVnYXRlcyB0byBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHByb3ZpZGUgdGhlIGRlcGVuZGVuY3kuXG4gICAgICogRXZlcnkgdGltZSB5b3UgcmVxdWVzdCB0aGlzIHtAbGluayBLZXl9IHRoZSBjYWxsYmFjayB3aWxsIGJlIGludm9rZWQgdG8gcHJvdmlkZVxuICAgICAqIHRoZSBkZXBlbmRlbmN5LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBSZWdpc3RyYXRpb24uY2FsbGJhY2soRm9vLCAoKSA9PiBuZXcgRm9vKCkpO1xuICAgICAqIFJlZ2lzdHJhdGlvbi5jYWxsYmFjayhCYXIsIChjOiBDb250YWluZXIpID0+IG5ldyBCYXIoYy5nZXQoRm9vKSkpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIGtleSAtIFRoZSBrZXkgdG8gcmVnaXN0ZXIgdGhlIGNhbGxiYWNrIGZvci5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBUaGUgZnVuY3Rpb24gdGhhdCBpcyBleHBlY3RlZCB0byByZXR1cm4gdGhlIGRlcGVuZGVuY3kuXG4gICAgICovXG4gICAgY2FsbGJhY2soa2V5LCBjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVySW1wbChrZXksIDMgLyogY2FsbGJhY2sgKi8sIGNhbGxiYWNrKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIERlbGVnYXRlcyB0byBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHByb3ZpZGUgdGhlIGRlcGVuZGVuY3kgYW5kIHRoZW4gY2FjaGVzIHRoZVxuICAgICAqIGRlcGVuZGVuY3kgZm9yIGZ1dHVyZSByZXF1ZXN0cy5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogUmVnaXN0cmF0aW9uLmNhY2hlZENhbGxiYWNrKEZvbywgKCkgPT4gbmV3IEZvbygpKTtcbiAgICAgKiBSZWdpc3RyYXRpb24uY2FjaGVkQ2FsbGJhY2soQmFyLCAoYzogQ29udGFpbmVyKSA9PiBuZXcgQmFyKGMuZ2V0KEZvbykpKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5IHRvIHJlZ2lzdGVyIHRoZSBjYWxsYmFjayBmb3IuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gVGhlIGZ1bmN0aW9uIHRoYXQgaXMgZXhwZWN0ZWQgdG8gcmV0dXJuIHRoZSBkZXBlbmRlbmN5LlxuICAgICAqIEByZW1hcmtzXG4gICAgICogSWYgeW91IHBhc3MgdGhlIHNhbWUgUmVnaXN0cmF0aW9uIHRvIGFub3RoZXIgY29udGFpbmVyLCB0aGUgc2FtZSBjYWNoZWQgdmFsdWUgd2lsbCBiZSB1c2VkLlxuICAgICAqIFNob3VsZCBhbGwgcmVmZXJlbmNlcyB0byB0aGUgcmVzb2x2ZXIgcmV0dXJuZWQgYmUgcmVtb3ZlZCwgdGhlIGNhY2hlIHdpbGwgZXhwaXJlLlxuICAgICAqL1xuICAgIGNhY2hlZENhbGxiYWNrKGtleSwgY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlckltcGwoa2V5LCAzIC8qIGNhbGxiYWNrICovLCBjYWNoZUNhbGxiYWNrUmVzdWx0KGNhbGxiYWNrKSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFsdGVybmF0ZSB7QGxpbmsgS2V5fSB0byByZXRyaWV2ZSBhbiBpbnN0YW5jZSBieS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogUmVnaXN0ZXIuc2luZ2xldG9uKEZvbywgRm9vKVxuICAgICAqIFJlZ2lzdGVyLmFsaWFzVG8oRm9vLCBNeUZvb3MpO1xuICAgICAqXG4gICAgICogY29udGFpbmVyLmdldEFsbChNeUZvb3MpIC8vIGNvbnRhaW5zIGFuIGluc3RhbmNlIG9mIEZvb1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIG9yaWdpbmFsS2V5IC0gVGhlIG9yaWdpbmFsIGtleSB0aGF0IGhhcyBiZWVuIHJlZ2lzdGVyZWQuXG4gICAgICogQHBhcmFtIGFsaWFzS2V5IC0gVGhlIGFsaWFzIHRvIHRoZSBvcmlnaW5hbCBrZXkuXG4gICAgICovXG4gICAgYWxpYXNUbyhvcmlnaW5hbEtleSwgYWxpYXNLZXkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlckltcGwoYWxpYXNLZXksIDUgLyogYWxpYXMgKi8sIG9yaWdpbmFsS2V5KTtcbiAgICB9LFxufSk7XG4vKiogQGludGVybmFsICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVLZXkoa2V5KSB7XG4gICAgaWYgKGtleSA9PT0gbnVsbCB8fCBrZXkgPT09IHZvaWQgMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJrZXkvdmFsdWUgY2Fubm90IGJlIG51bGwgb3IgdW5kZWZpbmVkLiBBcmUgeW91IHRyeWluZyB0byBpbmplY3QvcmVnaXN0ZXIgc29tZXRoaW5nIHRoYXQgZG9lc24ndCBleGlzdCB3aXRoIERJP1wiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBidWlsZEFsbFJlc3BvbnNlKHJlc29sdmVyLCBoYW5kbGVyLCByZXF1ZXN0b3IpIHtcbiAgICBpZiAocmVzb2x2ZXIgaW5zdGFuY2VvZiBSZXNvbHZlckltcGwgJiZcbiAgICAgICAgcmVzb2x2ZXIuc3RyYXRlZ3kgPT09IDQgLyogYXJyYXkgKi8pIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSByZXNvbHZlci5zdGF0ZTtcbiAgICAgICAgbGV0IGkgPSBzdGF0ZS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBuZXcgQXJyYXkoaSk7XG4gICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgIHJlc3VsdHNbaV0gPSBzdGF0ZVtpXS5yZXNvbHZlKGhhbmRsZXIsIHJlcXVlc3Rvcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuICAgIHJldHVybiBbcmVzb2x2ZXIucmVzb2x2ZShoYW5kbGVyLCByZXF1ZXN0b3IpXTtcbn1cbmNvbnN0IGRlZmF1bHRGcmllbmRseU5hbWUgPSBcIihhbm9ueW1vdXMpXCI7XG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsKSB8fCB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIjtcbn1cbi8qKlxuICogRGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHZhbHVlIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSBmbiAtIFRoZSBmdW5jdGlvbiB0byBjaGVjay5cbiAqIEByZXR1cm5zIGB0cnVlYCBpcyB0aGUgZnVuY3Rpb24gaXMgYSBuYXRpdmUgZnVuY3Rpb24sIG90aGVyd2lzZSBgZmFsc2VgXG4gKi9cbmNvbnN0IGlzTmF0aXZlRnVuY3Rpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGxvb2t1cCA9IG5ldyBXZWFrTWFwKCk7XG4gICAgbGV0IGlzTmF0aXZlID0gZmFsc2U7XG4gICAgbGV0IHNvdXJjZVRleHQgPSBcIlwiO1xuICAgIGxldCBpID0gMDtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIGlzTmF0aXZlID0gbG9va3VwLmdldChmbik7XG4gICAgICAgIGlmIChpc05hdGl2ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBzb3VyY2VUZXh0ID0gZm4udG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGkgPSBzb3VyY2VUZXh0Lmxlbmd0aDtcbiAgICAgICAgICAgIC8vIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi8jcHJvZC1OYXRpdmVGdW5jdGlvblxuICAgICAgICAgICAgaXNOYXRpdmUgPVxuICAgICAgICAgICAgICAgIC8vIDI5IGlzIHRoZSBsZW5ndGggb2YgJ2Z1bmN0aW9uICgpIHsgW25hdGl2ZSBjb2RlXSB9JyB3aGljaCBpcyB0aGUgc21hbGxlc3QgbGVuZ3RoIG9mIGEgbmF0aXZlIGZ1bmN0aW9uIHN0cmluZ1xuICAgICAgICAgICAgICAgIGkgPj0gMjkgJiZcbiAgICAgICAgICAgICAgICAgICAgLy8gMTAwIHNlZW1zIHRvIGJlIGEgc2FmZSB1cHBlciBib3VuZCBvZiB0aGUgbWF4IGxlbmd0aCBvZiBhIG5hdGl2ZSBmdW5jdGlvbi4gSW4gQ2hyb21lIGFuZCBGRiBpdCdzIDU2LCBpbiBFZGdlIGl0J3MgNjEuXG4gICAgICAgICAgICAgICAgICAgIGkgPD0gMTAwICYmXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgd2hvbGUgaGV1cmlzdGljICpjb3VsZCogYmUgdHJpY2tlZCBieSBhIGNvbW1lbnQuIERvIHdlIG5lZWQgdG8gY2FyZSBhYm91dCB0aGF0P1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDEpID09PSAweDdkICYmIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogdGhlIHNwZWMgaXMgYSBsaXR0bGUgdmFndWUgYWJvdXQgdGhlIHByZWNpc2UgY29uc3RyYWludHMsIHNvIHdlIGRvIG5lZWQgdG8gdGVzdCB0aGlzIGFjcm9zcyB2YXJpb3VzIGJyb3dzZXJzIHRvIG1ha2Ugc3VyZSBqdXN0IG9uZSB3aGl0ZXNwYWNlIGlzIGEgc2FmZSBhc3N1bXB0aW9uLlxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDIpIDw9IDB4MjAgJiYgLy8gd2hpdGVzcGFjZVxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDMpID09PSAweDVkICYmIC8vIF1cbiAgICAgICAgICAgICAgICAgICAgc291cmNlVGV4dC5jaGFyQ29kZUF0KGkgLSA0KSA9PT0gMHg2NSAmJiAvLyBlXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZVRleHQuY2hhckNvZGVBdChpIC0gNSkgPT09IDB4NjQgJiYgLy8gZFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDYpID09PSAweDZmICYmIC8vIG9cbiAgICAgICAgICAgICAgICAgICAgc291cmNlVGV4dC5jaGFyQ29kZUF0KGkgLSA3KSA9PT0gMHg2MyAmJiAvLyBjXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZVRleHQuY2hhckNvZGVBdChpIC0gOCkgPT09IDB4MjAgJiYgLy9cbiAgICAgICAgICAgICAgICAgICAgc291cmNlVGV4dC5jaGFyQ29kZUF0KGkgLSA5KSA9PT0gMHg2NSAmJiAvLyBlXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZVRleHQuY2hhckNvZGVBdChpIC0gMTApID09PSAweDc2ICYmIC8vIHZcbiAgICAgICAgICAgICAgICAgICAgc291cmNlVGV4dC5jaGFyQ29kZUF0KGkgLSAxMSkgPT09IDB4NjkgJiYgLy8gaVxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDEyKSA9PT0gMHg3NCAmJiAvLyB0XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZVRleHQuY2hhckNvZGVBdChpIC0gMTMpID09PSAweDYxICYmIC8vIGFcbiAgICAgICAgICAgICAgICAgICAgc291cmNlVGV4dC5jaGFyQ29kZUF0KGkgLSAxNCkgPT09IDB4NmUgJiYgLy8gblxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDE1KSA9PT0gMHg1ODsgLy8gW1xuICAgICAgICAgICAgbG9va3VwLnNldChmbiwgaXNOYXRpdmUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc05hdGl2ZTtcbiAgICB9O1xufSkoKTtcbmNvbnN0IGlzTnVtZXJpY0xvb2t1cCA9IHt9O1xuZnVuY3Rpb24gaXNBcnJheUluZGV4KHZhbHVlKSB7XG4gICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlID49IDAgJiYgKHZhbHVlIHwgMCkgPT09IHZhbHVlO1xuICAgICAgICBjYXNlIFwic3RyaW5nXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGlzTnVtZXJpY0xvb2t1cFt2YWx1ZV07XG4gICAgICAgICAgICBpZiAocmVzdWx0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoaXNOdW1lcmljTG9va3VwW3ZhbHVlXSA9IGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjaCA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgY2ggPSB2YWx1ZS5jaGFyQ29kZUF0KGkpO1xuICAgICAgICAgICAgICAgIGlmICgoaSA9PT0gMCAmJiBjaCA9PT0gMHgzMCAmJiBsZW5ndGggPiAxKSAvKiBtdXN0IG5vdCBzdGFydCB3aXRoIDAgKi8gfHxcbiAgICAgICAgICAgICAgICAgICAgY2ggPCAweDMwIC8qIDAgKi8gfHxcbiAgICAgICAgICAgICAgICAgICAgY2ggPiAweDM5IC8qIDkgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChpc051bWVyaWNMb29rdXBbdmFsdWVdID0gZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAoaXNOdW1lcmljTG9va3VwW3ZhbHVlXSA9IHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgRWxlbWVudFN0eWxlcywgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IERJLCBSZWdpc3RyYXRpb24gfSBmcm9tIFwiLi4vZGkvZGkuanNcIjtcbmZ1bmN0aW9uIHByZXNlbnRhdGlvbktleUZyb21UYWcodGFnTmFtZSkge1xuICAgIHJldHVybiBgJHt0YWdOYW1lLnRvTG93ZXJDYXNlKCl9OnByZXNlbnRhdGlvbmA7XG59XG5jb25zdCBwcmVzZW50YXRpb25SZWdpc3RyeSA9IG5ldyBNYXAoKTtcbi8qKlxuICogQW4gQVBJIGdhdGV3YXkgdG8gY29tcG9uZW50IHByZXNlbnRhdGlvbiBmZWF0dXJlcy5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IENvbXBvbmVudFByZXNlbnRhdGlvbiA9IE9iamVjdC5mcmVlemUoe1xuICAgIC8qKlxuICAgICAqIERlZmluZXMgYSBjb21wb25lbnQgcHJlc2VudGF0aW9uIGZvciBhbiBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB0YWdOYW1lIC0gVGhlIGVsZW1lbnQgbmFtZSB0byBkZWZpbmUgdGhlIHByZXNlbnRhdGlvbiBmb3IuXG4gICAgICogQHBhcmFtIHByZXNlbnRhdGlvbiAtIFRoZSBwcmVzZW50YXRpb24gdGhhdCB3aWxsIGJlIGFwcGxpZWQgdG8gbWF0Y2hpbmcgZWxlbWVudHMuXG4gICAgICogQHBhcmFtIGNvbnRhaW5lciAtIFRoZSBkZXBlbmRlbmN5IGluamVjdGlvbiBjb250YWluZXIgdG8gcmVnaXN0ZXIgdGhlIGNvbmZpZ3VyYXRpb24gaW4uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGRlZmluZSh0YWdOYW1lLCBwcmVzZW50YXRpb24sIGNvbnRhaW5lcikge1xuICAgICAgICBjb25zdCBrZXkgPSBwcmVzZW50YXRpb25LZXlGcm9tVGFnKHRhZ05hbWUpO1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHByZXNlbnRhdGlvblJlZ2lzdHJ5LmdldChrZXkpO1xuICAgICAgICBpZiAoZXhpc3RpbmcgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcHJlc2VudGF0aW9uUmVnaXN0cnkuc2V0KGtleSwgcHJlc2VudGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZhbHNlIGluZGljYXRlcyB0aGF0IHdlIGhhdmUgbW9yZSB0aGFuIG9uZSBwcmVzZW50YXRpb25cbiAgICAgICAgICAgIC8vIHJlZ2lzdGVyZWQgZm9yIGEgdGFnTmFtZSBhbmQgd2UgbXVzdCByZXNvbHZlIHRocm91Z2ggRElcbiAgICAgICAgICAgIHByZXNlbnRhdGlvblJlZ2lzdHJ5LnNldChrZXksIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoUmVnaXN0cmF0aW9uLmluc3RhbmNlKGtleSwgcHJlc2VudGF0aW9uKSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBGaW5kcyBhIGNvbXBvbmVudCBwcmVzZW50YXRpb24gZm9yIHRoZSBzcGVjaWZpZWQgZWxlbWVudCBuYW1lLFxuICAgICAqIHNlYXJjaGluZyB0aGUgRE9NIGhpZXJhcmNoeSBzdGFydGluZyBmcm9tIHRoZSBwcm92aWRlZCBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB0YWdOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGVsZW1lbnQgdG8gbG9jYXRlIHRoZSBwcmVzZW50YXRpb24gZm9yLlxuICAgICAqIEBwYXJhbSBlbGVtZW50IC0gVGhlIGVsZW1lbnQgdG8gYmVnaW4gdGhlIHNlYXJjaCBmcm9tLlxuICAgICAqIEByZXR1cm5zIFRoZSBjb21wb25lbnQgcHJlc2VudGF0aW9uIG9yIG51bGwgaWYgbm9uZSBpcyBmb3VuZC5cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZm9yVGFnKHRhZ05hbWUsIGVsZW1lbnQpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gcHJlc2VudGF0aW9uS2V5RnJvbVRhZyh0YWdOYW1lKTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBwcmVzZW50YXRpb25SZWdpc3RyeS5nZXQoa2V5KTtcbiAgICAgICAgaWYgKGV4aXN0aW5nID09PSBmYWxzZSkge1xuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gREkuZmluZFJlc3BvbnNpYmxlQ29udGFpbmVyKGVsZW1lbnQpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5nZXQoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXhpc3RpbmcgfHwgbnVsbDtcbiAgICB9LFxufSk7XG4vKipcbiAqIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mIENvbXBvbmVudFByZXNlbnRhdGlvbiwgdXNlZCBieSBGb3VuZGF0aW9uRWxlbWVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIERlZmF1bHRDb21wb25lbnRQcmVzZW50YXRpb24ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgRGVmYXVsdENvbXBvbmVudFByZXNlbnRhdGlvbi5cbiAgICAgKiBAcGFyYW0gdGVtcGxhdGUgLSBUaGUgdGVtcGxhdGUgdG8gYXBwbHkgdG8gdGhlIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHN0eWxlcyAtIFRoZSBzdHlsZXMgdG8gYXBwbHkgdG8gdGhlIGVsZW1lbnQuXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlLCBzdHlsZXMpIHtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlIHx8IG51bGw7XG4gICAgICAgIHRoaXMuc3R5bGVzID1cbiAgICAgICAgICAgIHN0eWxlcyA9PT0gdm9pZCAwXG4gICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgOiBBcnJheS5pc0FycmF5KHN0eWxlcylcbiAgICAgICAgICAgICAgICAgICAgPyBFbGVtZW50U3R5bGVzLmNyZWF0ZShzdHlsZXMpXG4gICAgICAgICAgICAgICAgICAgIDogc3R5bGVzIGluc3RhbmNlb2YgRWxlbWVudFN0eWxlc1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBzdHlsZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIDogRWxlbWVudFN0eWxlcy5jcmVhdGUoW3N0eWxlc10pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBwcmVzZW50YXRpb24gZGV0YWlscyB0byB0aGUgc3BlY2lmaWVkIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIGVsZW1lbnQgLSBUaGUgZWxlbWVudCB0byBhcHBseSB0aGUgcHJlc2VudGF0aW9uIGRldGFpbHMgdG8uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGFwcGx5VG8oZWxlbWVudCkge1xuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gZWxlbWVudC4kZmFzdENvbnRyb2xsZXI7XG4gICAgICAgIGlmIChjb250cm9sbGVyLnRlbXBsYXRlID09PSBudWxsKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLnRlbXBsYXRlID0gdGhpcy50ZW1wbGF0ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJvbGxlci5zdHlsZXMgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuc3R5bGVzID0gdGhpcy5zdHlsZXM7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBGQVNURWxlbWVudCwgb2JzZXJ2YWJsZSB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuaW1wb3J0IHsgQ29tcG9uZW50UHJlc2VudGF0aW9uLCBEZWZhdWx0Q29tcG9uZW50UHJlc2VudGF0aW9uLCB9IGZyb20gXCIuLi9kZXNpZ24tc3lzdGVtL2NvbXBvbmVudC1wcmVzZW50YXRpb24uanNcIjtcbi8qKlxuICogRGVmaW5lcyBhIGZvdW5kYXRpb24gZWxlbWVudCBjbGFzcyB0aGF0OlxuICogMS4gQ29ubmVjdHMgdGhlIGVsZW1lbnQgdG8gaXRzIENvbXBvbmVudFByZXNlbnRhdGlvblxuICogMi4gQWxsb3dzIHJlc29sdmluZyB0aGUgZWxlbWVudCB0ZW1wbGF0ZSBmcm9tIHRoZSBpbnN0YW5jZSBvciBDb21wb25lbnRQcmVzZW50YXRpb25cbiAqIDMuIEFsbG93cyByZXNvbHZpbmcgdGhlIGVsZW1lbnQgc3R5bGVzIGZyb20gdGhlIGluc3RhbmNlIG9yIENvbXBvbmVudFByZXNlbnRhdGlvblxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEZvdW5kYXRpb25FbGVtZW50IGV4dGVuZHMgRkFTVEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLl9wcmVzZW50YXRpb24gPSB2b2lkIDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgcHJvcGVydHkgd2hpY2ggcmVzb2x2ZXMgdGhlIENvbXBvbmVudFByZXNlbnRhdGlvbiBpbnN0YW5jZVxuICAgICAqIGZvciB0aGUgY3VycmVudCBjb21wb25lbnQuXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldCAkcHJlc2VudGF0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5fcHJlc2VudGF0aW9uID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRoaXMuX3ByZXNlbnRhdGlvbiA9IENvbXBvbmVudFByZXNlbnRhdGlvbi5mb3JUYWcodGhpcy50YWdOYW1lLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fcHJlc2VudGF0aW9uO1xuICAgIH1cbiAgICB0ZW1wbGF0ZUNoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuJGZhc3RDb250cm9sbGVyLnRlbXBsYXRlID0gdGhpcy50ZW1wbGF0ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdHlsZXNDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5zdHlsZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy4kZmFzdENvbnRyb2xsZXIuc3R5bGVzID0gdGhpcy5zdHlsZXM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbm5lY3RlZCBjYWxsYmFjayBmb3IgdGhpcyBGQVNURWxlbWVudC5cbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgbWV0aG9kIGlzIGludm9rZWQgYnkgdGhlIHBsYXRmb3JtIHdoZW5ldmVyIHRoaXMgRm91bmRhdGlvbkVsZW1lbnRcbiAgICAgKiBiZWNvbWVzIGNvbm5lY3RlZCB0byB0aGUgZG9jdW1lbnQuXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICBpZiAodGhpcy4kcHJlc2VudGF0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLiRwcmVzZW50YXRpb24uYXBwbHlUbyh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWZpbmVzIGFuIGVsZW1lbnQgcmVnaXN0cnkgZnVuY3Rpb24gd2l0aCBhIHNldCBvZiBlbGVtZW50IGRlZmluaXRpb24gZGVmYXVsdHMuXG4gICAgICogQHBhcmFtIGVsZW1lbnREZWZpbml0aW9uIC0gVGhlIGRlZmluaXRpb24gb2YgdGhlIGVsZW1lbnQgdG8gY3JlYXRlIHRoZSByZWdpc3RyeVxuICAgICAqIGZ1bmN0aW9uIGZvci5cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc3RhdGljIGNvbXBvc2UoZWxlbWVudERlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIChvdmVycmlkZURlZmluaXRpb24gPSB7fSkgPT4gbmV3IEZvdW5kYXRpb25FbGVtZW50UmVnaXN0cnkodGhpcyA9PT0gRm91bmRhdGlvbkVsZW1lbnRcbiAgICAgICAgICAgID8gY2xhc3MgZXh0ZW5kcyBGb3VuZGF0aW9uRWxlbWVudCB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHRoaXMsIGVsZW1lbnREZWZpbml0aW9uLCBvdmVycmlkZURlZmluaXRpb24pO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIEZvdW5kYXRpb25FbGVtZW50LnByb3RvdHlwZSwgXCJ0ZW1wbGF0ZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgRm91bmRhdGlvbkVsZW1lbnQucHJvdG90eXBlLCBcInN0eWxlc1wiLCB2b2lkIDApO1xuZnVuY3Rpb24gcmVzb2x2ZU9wdGlvbihvcHRpb24sIGNvbnRleHQsIGRlZmluaXRpb24pIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBvcHRpb24oY29udGV4dCwgZGVmaW5pdGlvbik7XG4gICAgfVxuICAgIHJldHVybiBvcHRpb247XG59XG4vKipcbiAqIFJlZ2lzdHJ5IGNhcGFibGUgb2YgZGVmaW5pbmcgcHJlc2VudGF0aW9uIHByb3BlcnRpZXMgZm9yIGEgRE9NIENvbnRhaW5lciBoaWVyYXJjaHkuXG4gKlxuICogQGludGVybmFsXG4gKi9cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycyAqL1xuZXhwb3J0IGNsYXNzIEZvdW5kYXRpb25FbGVtZW50UmVnaXN0cnkge1xuICAgIGNvbnN0cnVjdG9yKHR5cGUsIGVsZW1lbnREZWZpbml0aW9uLCBvdmVycmlkZURlZmluaXRpb24pIHtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5lbGVtZW50RGVmaW5pdGlvbiA9IGVsZW1lbnREZWZpbml0aW9uO1xuICAgICAgICB0aGlzLm92ZXJyaWRlRGVmaW5pdGlvbiA9IG92ZXJyaWRlRGVmaW5pdGlvbjtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9uID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLmVsZW1lbnREZWZpbml0aW9uKSwgdGhpcy5vdmVycmlkZURlZmluaXRpb24pO1xuICAgIH1cbiAgICByZWdpc3Rlcihjb250YWluZXIsIGNvbnRleHQpIHtcbiAgICAgICAgY29uc3QgZGVmaW5pdGlvbiA9IHRoaXMuZGVmaW5pdGlvbjtcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGVEZWZpbml0aW9uID0gdGhpcy5vdmVycmlkZURlZmluaXRpb247XG4gICAgICAgIGNvbnN0IHByZWZpeCA9IGRlZmluaXRpb24ucHJlZml4IHx8IGNvbnRleHQuZWxlbWVudFByZWZpeDtcbiAgICAgICAgY29uc3QgbmFtZSA9IGAke3ByZWZpeH0tJHtkZWZpbml0aW9uLmJhc2VOYW1lfWA7XG4gICAgICAgIGNvbnRleHQudHJ5RGVmaW5lRWxlbWVudCh7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgdHlwZTogdGhpcy50eXBlLFxuICAgICAgICAgICAgYmFzZUNsYXNzOiB0aGlzLmVsZW1lbnREZWZpbml0aW9uLmJhc2VDbGFzcyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiB4ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmVzZW50YXRpb24gPSBuZXcgRGVmYXVsdENvbXBvbmVudFByZXNlbnRhdGlvbihyZXNvbHZlT3B0aW9uKGRlZmluaXRpb24udGVtcGxhdGUsIHgsIGRlZmluaXRpb24pLCByZXNvbHZlT3B0aW9uKGRlZmluaXRpb24uc3R5bGVzLCB4LCBkZWZpbml0aW9uKSk7XG4gICAgICAgICAgICAgICAgeC5kZWZpbmVQcmVzZW50YXRpb24ocHJlc2VudGF0aW9uKTtcbiAgICAgICAgICAgICAgICBsZXQgc2hhZG93T3B0aW9ucyA9IHJlc29sdmVPcHRpb24oZGVmaW5pdGlvbi5zaGFkb3dPcHRpb25zLCB4LCBkZWZpbml0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAoeC5zaGFkb3dSb290TW9kZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgZGVzaWduIHN5c3RlbSBoYXMgb3ZlcnJpZGRlbiB0aGUgc2hhZG93IHJvb3QgbW9kZSwgd2UgbmVlZCBzcGVjaWFsIGhhbmRsaW5nLlxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hhZG93T3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIHNoYWRvdyBvcHRpb25zIHByZXNlbnQgaW4gdGhlIGRlZmluaXRpb24sIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVpdGhlciB0aGUgY29tcG9uZW50IGl0c2VsZiBoYXMgc3BlY2lmaWVkIGFuIG9wdGlvbiBvciB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZ2lzdHJ5IGZ1bmN0aW9uIGhhcyBvdmVycmlkZGVuIGl0LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvdmVycmlkZURlZmluaXRpb24uc2hhZG93T3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZXJlIHdlcmUgc2hhZG93IG9wdGlvbnMgcHJvdmlkZWQgYnkgdGhlIGNvbXBvbmVudCBhbmQgbm90IG92ZXJyaWRkZW4gYnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcmVnaXN0cnkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93T3B0aW9ucy5tb2RlID0geC5zaGFkb3dSb290TW9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzaGFkb3dPcHRpb25zICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY29tcG9uZW50IGF1dGhvciBkaWQgbm90IHByb3ZpZGUgc2hhZG93IG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgZGlkIG5vdCBudWxsIHRoZW0gb3V0IChsaWdodCBkb20gb3B0LWluKSB0aGVuIHRoZXlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlcmUgcmVseWluZyBvbiB0aGUgRkFTVEVsZW1lbnQgZGVmYXVsdC4gU28sIGlmIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVzaWduIHN5c3RlbSBwcm92aWRlcyBhIG1vZGUsIHdlIG5lZWQgdG8gY3JlYXRlIHRoZSBvcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0byBvdmVycmlkZSB0aGUgZGVmYXVsdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd09wdGlvbnMgPSB7IG1vZGU6IHguc2hhZG93Um9vdE1vZGUgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB4LmRlZmluZUVsZW1lbnQoe1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50T3B0aW9uczogcmVzb2x2ZU9wdGlvbihkZWZpbml0aW9uLmVsZW1lbnRPcHRpb25zLCB4LCBkZWZpbml0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgc2hhZG93T3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogcmVzb2x2ZU9wdGlvbihkZWZpbml0aW9uLmF0dHJpYnV0ZXMsIHgsIGRlZmluaXRpb24pLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyogZXNsaW50LWVuYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnMgKi9cbiIsImltcG9ydCB7IEF0dHJpYnV0ZUNvbmZpZ3VyYXRpb24gfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbi8qKlxuICogQXBwbHkgbWl4aW5zIHRvIGEgY29uc3RydWN0b3IuXG4gKiBTb3VyY2VkIGZyb20ge0BsaW5rIGh0dHBzOi8vd3d3LnR5cGVzY3JpcHRsYW5nLm9yZy9kb2NzL2hhbmRib29rL21peGlucy5odG1sIHwgVHlwZVNjcmlwdCBEb2N1bWVudGF0aW9uIH0uXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseU1peGlucyhkZXJpdmVkQ3RvciwgLi4uYmFzZUN0b3JzKSB7XG4gICAgY29uc3QgZGVyaXZlZEF0dHJpYnV0ZXMgPSBBdHRyaWJ1dGVDb25maWd1cmF0aW9uLmxvY2F0ZShkZXJpdmVkQ3Rvcik7XG4gICAgYmFzZUN0b3JzLmZvckVhY2goYmFzZUN0b3IgPT4ge1xuICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiYXNlQ3Rvci5wcm90b3R5cGUpLmZvckVhY2gobmFtZSA9PiB7XG4gICAgICAgICAgICBpZiAobmFtZSAhPT0gXCJjb25zdHJ1Y3RvclwiKSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGRlcml2ZWRDdG9yLnByb3RvdHlwZSwgbmFtZSwgXG4gICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb24gKi9cbiAgICAgICAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGJhc2VDdG9yLnByb3RvdHlwZSwgbmFtZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYmFzZUF0dHJpYnV0ZXMgPSBBdHRyaWJ1dGVDb25maWd1cmF0aW9uLmxvY2F0ZShiYXNlQ3Rvcik7XG4gICAgICAgIGJhc2VBdHRyaWJ1dGVzLmZvckVhY2goeCA9PiBkZXJpdmVkQXR0cmlidXRlcy5wdXNoKHgpKTtcbiAgICB9KTtcbn1cbiIsIi8qKlxuICogU3RhbmRhcmQgb3JpZW50YXRpb24gdmFsdWVzXG4gKi9cbmV4cG9ydCBjb25zdCBPcmllbnRhdGlvbiA9IHtcbiAgICBob3Jpem9udGFsOiBcImhvcml6b250YWxcIixcbiAgICB2ZXJ0aWNhbDogXCJ2ZXJ0aWNhbFwiLFxufTtcbiIsIi8qKlxuICogUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGxhc3QgZWxlbWVudCBpbiB0aGUgYXJyYXkgd2hlcmUgcHJlZGljYXRlIGlzIHRydWUsIGFuZCAtMSBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIGFycmF5IC0gdGhlIGFycmF5IHRvIHRlc3RcbiAqIEBwYXJhbSBwcmVkaWNhdGUgLSBmaW5kIGNhbGxzIHByZWRpY2F0ZSBvbmNlIGZvciBlYWNoIGVsZW1lbnQgb2YgdGhlIGFycmF5LCBpbiBkZXNjZW5kaW5nIG9yZGVyLCB1bnRpbCBpdCBmaW5kcyBvbmUgd2hlcmUgcHJlZGljYXRlIHJldHVybnMgdHJ1ZS4gSWYgc3VjaCBhbiBlbGVtZW50IGlzIGZvdW5kLCBmaW5kTGFzdEluZGV4IGltbWVkaWF0ZWx5IHJldHVybnMgdGhhdCBlbGVtZW50IGluZGV4LiBPdGhlcndpc2UsIGZpbmRJbmRleCByZXR1cm5zIC0xLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZExhc3RJbmRleChhcnJheSwgcHJlZGljYXRlKSB7XG4gICAgbGV0IGsgPSBhcnJheS5sZW5ndGg7XG4gICAgd2hpbGUgKGstLSkge1xuICAgICAgICBpZiAocHJlZGljYXRlKGFycmF5W2tdLCBrLCBhcnJheSkpIHtcbiAgICAgICAgICAgIHJldHVybiBrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbn1cbiIsIi8qKlxuICogQ2hlY2tzIGlmIHRoZSBET00gaXMgYXZhaWxhYmxlIHRvIGFjY2VzcyBhbmQgdXNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYW5Vc2VET00oKSB7XG4gICAgcmV0dXJuICEhKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmRvY3VtZW50ICYmIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcbn1cbiIsImltcG9ydCB7IGNhblVzZURPTSB9IGZyb20gXCJleGVudi1lczZcIjtcbi8qKlxuICogQSB0ZXN0IHRoYXQgZW5zdXJlcyB0aGF0IGFsbCBhcmd1bWVudHMgYXJlIEhUTUwgRWxlbWVudHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzSFRNTEVsZW1lbnQoLi4uYXJncykge1xuICAgIHJldHVybiBhcmdzLmV2ZXJ5KChhcmcpID0+IGFyZyBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KTtcbn1cbi8qKlxuICogUmV0dXJucyBhbGwgZGlzcGxheWVkIGVsZW1lbnRzIGluc2lkZSBvZiBhIHJvb3Qgbm9kZSB0aGF0IG1hdGNoIGEgcHJvdmlkZWQgc2VsZWN0b3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERpc3BsYXllZE5vZGVzKHJvb3ROb2RlLCBzZWxlY3Rvcikge1xuICAgIGlmICghcm9vdE5vZGUgfHwgIXNlbGVjdG9yIHx8ICFpc0hUTUxFbGVtZW50KHJvb3ROb2RlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG5vZGVzID0gQXJyYXkuZnJvbShyb290Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSk7XG4gICAgLy8gb2Zmc2V0UGFyZW50IHdpbGwgYmUgbnVsbCBpZiB0aGUgZWxlbWVudCBpc24ndCBjdXJyZW50bHkgZGlzcGxheWVkLFxuICAgIC8vIHNvIHRoaXMgd2lsbCBhbGxvdyB1cyB0byBvcGVyYXRlIG9ubHkgb24gdmlzaWJsZSBub2Rlc1xuICAgIHJldHVybiBub2Rlcy5maWx0ZXIoKG5vZGUpID0+IG5vZGUub2Zmc2V0UGFyZW50ICE9PSBudWxsKTtcbn1cbi8qKlxuICogR2V0cyB0aGUgbnVtZXJpYyBrZXkgY29kZSBhc3NvY2lhdGVkIHdpdGggYSBrZXlib2FyZCBldmVudC4gVGhpcyBtZXRob2QgaXMgZm9yIHVzZSB3aXRoIERPTSBsZXZlbCAzIGV2ZW50c1xuICogdGhhdCBzdGlsbCB1c2UgdGhlIGRlcHJlY2F0ZWQga2V5Q29kZSBwcm9wZXJ0eS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEtleUNvZGUoZXZlbnQpIHtcbiAgICByZXR1cm4gZXZlbnQgPT09IG51bGwgPyBudWxsIDogZXZlbnQud2hpY2ggfHwgZXZlbnQua2V5Q29kZSB8fCBldmVudC5jaGFyQ29kZTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgbm9uY2UgdXNlZCBpbiB0aGUgcGFnZSwgaWYgYW55LlxuICpcbiAqIEJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9jc3NpbmpzL2pzcy9ibG9iL21hc3Rlci9wYWNrYWdlcy9qc3Mvc3JjL0RvbVJlbmRlcmVyLmpzXG4gKi9cbmZ1bmN0aW9uIGdldE5vbmNlKCkge1xuICAgIGNvbnN0IG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtZXRhW3Byb3BlcnR5PVwiY3NwLW5vbmNlXCJdJyk7XG4gICAgaWYgKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUuZ2V0QXR0cmlidXRlKFwiY29udGVudFwiKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi8qKlxuICogVGVzdCBpZiB0aGUgZG9jdW1lbnQgc3VwcG9ydHMgOmZvY3VzLXZpc2libGVcbiAqL1xubGV0IF9jYW5Vc2VGb2N1c1Zpc2libGU7XG5leHBvcnQgZnVuY3Rpb24gY2FuVXNlRm9jdXNWaXNpYmxlKCkge1xuICAgIGlmICh0eXBlb2YgX2NhblVzZUZvY3VzVmlzaWJsZSA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgcmV0dXJuIF9jYW5Vc2VGb2N1c1Zpc2libGU7XG4gICAgfVxuICAgIGlmICghY2FuVXNlRE9NKCkpIHtcbiAgICAgICAgX2NhblVzZUZvY3VzVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gX2NhblVzZUZvY3VzVmlzaWJsZTtcbiAgICB9XG4gICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZSBkb2N1bWVudCBzdXBwb3J0cyB0aGUgZm9jdXMtdmlzaWJsZSBlbGVtZW50XG4gICAgY29uc3Qgc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICAgIC8vIElmIG5vbmNlcyBhcmUgcHJlc2VudCBvbiB0aGUgcGFnZSwgdXNlIGl0IHdoZW4gY3JlYXRpbmcgdGhlIHN0eWxlIGVsZW1lbnRcbiAgICAvLyB0byB0ZXN0IGZvY3VzLXZpc2libGUgc3VwcG9ydC5cbiAgICBjb25zdCBzdHlsZU5vbmNlID0gZ2V0Tm9uY2UoKTtcbiAgICBpZiAoc3R5bGVOb25jZSAhPT0gbnVsbCkge1xuICAgICAgICBzdHlsZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwibm9uY2VcIiwgc3R5bGVOb25jZSk7XG4gICAgfVxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcbiAgICB0cnkge1xuICAgICAgICBzdHlsZUVsZW1lbnQuc2hlZXQuaW5zZXJ0UnVsZShcImZvbzpmb2N1cy12aXNpYmxlIHtjb2xvcjppbmhlcml0fVwiLCAwKTtcbiAgICAgICAgX2NhblVzZUZvY3VzVmlzaWJsZSA9IHRydWU7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIF9jYW5Vc2VGb2N1c1Zpc2libGUgPSBmYWxzZTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIGRvY3VtZW50LmhlYWQucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIF9jYW5Vc2VGb2N1c1Zpc2libGU7XG59XG5sZXQgX2NhblVzZUNzc0dyaWQ7XG5leHBvcnQgZnVuY3Rpb24gY2FuVXNlQ3NzR3JpZCgpIHtcbiAgICBpZiAodHlwZW9mIF9jYW5Vc2VDc3NHcmlkID09PSBcImJvb2xlYW5cIikge1xuICAgICAgICByZXR1cm4gX2NhblVzZUNzc0dyaWQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIF9jYW5Vc2VDc3NHcmlkID0gQ1NTLnN1cHBvcnRzKFwiZGlzcGxheVwiLCBcImdyaWRcIik7XG4gICAgfVxuICAgIGNhdGNoIChfYSkge1xuICAgICAgICBfY2FuVXNlQ3NzR3JpZCA9IGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gX2NhblVzZUNzc0dyaWQ7XG59XG5leHBvcnQgZnVuY3Rpb24gY2FuVXNlRm9yY2VkQ29sb3JzKCkge1xuICAgIHJldHVybiAoY2FuVXNlRE9NKCkgJiZcbiAgICAgICAgKHdpbmRvdy5tYXRjaE1lZGlhKFwiKGZvcmNlZC1jb2xvcnM6IG5vbmUpXCIpLm1hdGNoZXMgfHxcbiAgICAgICAgICAgIHdpbmRvdy5tYXRjaE1lZGlhKFwiKGZvcmNlZC1jb2xvcnM6IGFjdGl2ZSlcIikubWF0Y2hlcykpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0RG9jdW1lbnRDYWNoZSgpIHtcbiAgICBfY2FuVXNlQ3NzR3JpZCA9IHVuZGVmaW5lZDtcbiAgICBfY2FuVXNlRm9jdXNWaXNpYmxlID0gdW5kZWZpbmVkO1xufVxuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgJ2NhblVzZUZvcmNlZENvbG9ycycgaW5zdGVhZFxuICovXG5leHBvcnQgY29uc3QgY2FuVXNlZEZvcmNlZENvbG9ycyA9IGNhblVzZUZvcmNlZENvbG9ycztcbiIsIi8qKlxuICogS2V5IENvZGUgdmFsdWVzXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2UgaW5kaXZpZHVhbCBzdHJpbmcga2V5IGV4cG9ydHNcbiAqL1xuZXhwb3J0IHZhciBLZXlDb2RlcztcbihmdW5jdGlvbiAoS2V5Q29kZXMpIHtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcImFsdFwiXSA9IDE4XSA9IFwiYWx0XCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJhcnJvd0Rvd25cIl0gPSA0MF0gPSBcImFycm93RG93blwiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wiYXJyb3dMZWZ0XCJdID0gMzddID0gXCJhcnJvd0xlZnRcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcImFycm93UmlnaHRcIl0gPSAzOV0gPSBcImFycm93UmlnaHRcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcImFycm93VXBcIl0gPSAzOF0gPSBcImFycm93VXBcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcImJhY2tcIl0gPSA4XSA9IFwiYmFja1wiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wiYmFja1NsYXNoXCJdID0gMjIwXSA9IFwiYmFja1NsYXNoXCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJicmVha1wiXSA9IDE5XSA9IFwiYnJlYWtcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcImNhcHNMb2NrXCJdID0gMjBdID0gXCJjYXBzTG9ja1wiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wiY2xvc2VCcmFja2V0XCJdID0gMjIxXSA9IFwiY2xvc2VCcmFja2V0XCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJjb2xvblwiXSA9IDE4Nl0gPSBcImNvbG9uXCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJjb2xvbjJcIl0gPSA1OV0gPSBcImNvbG9uMlwiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wiY29tbWFcIl0gPSAxODhdID0gXCJjb21tYVwiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wiY3RybFwiXSA9IDE3XSA9IFwiY3RybFwiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wiZGVsZXRlXCJdID0gNDZdID0gXCJkZWxldGVcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcImVuZFwiXSA9IDM1XSA9IFwiZW5kXCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJlbnRlclwiXSA9IDEzXSA9IFwiZW50ZXJcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcImVxdWFsc1wiXSA9IDE4N10gPSBcImVxdWFsc1wiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wiZXF1YWxzMlwiXSA9IDYxXSA9IFwiZXF1YWxzMlwiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wiZXF1YWxzM1wiXSA9IDEwN10gPSBcImVxdWFsczNcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcImVzY2FwZVwiXSA9IDI3XSA9IFwiZXNjYXBlXCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJmb3J3YXJkU2xhc2hcIl0gPSAxOTFdID0gXCJmb3J3YXJkU2xhc2hcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcImZ1bmN0aW9uMVwiXSA9IDExMl0gPSBcImZ1bmN0aW9uMVwiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wiZnVuY3Rpb24xMFwiXSA9IDEyMV0gPSBcImZ1bmN0aW9uMTBcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcImZ1bmN0aW9uMTFcIl0gPSAxMjJdID0gXCJmdW5jdGlvbjExXCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJmdW5jdGlvbjEyXCJdID0gMTIzXSA9IFwiZnVuY3Rpb24xMlwiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wiZnVuY3Rpb24yXCJdID0gMTEzXSA9IFwiZnVuY3Rpb24yXCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJmdW5jdGlvbjNcIl0gPSAxMTRdID0gXCJmdW5jdGlvbjNcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcImZ1bmN0aW9uNFwiXSA9IDExNV0gPSBcImZ1bmN0aW9uNFwiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wiZnVuY3Rpb241XCJdID0gMTE2XSA9IFwiZnVuY3Rpb241XCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJmdW5jdGlvbjZcIl0gPSAxMTddID0gXCJmdW5jdGlvbjZcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcImZ1bmN0aW9uN1wiXSA9IDExOF0gPSBcImZ1bmN0aW9uN1wiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wiZnVuY3Rpb244XCJdID0gMTE5XSA9IFwiZnVuY3Rpb244XCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJmdW5jdGlvbjlcIl0gPSAxMjBdID0gXCJmdW5jdGlvbjlcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcImhvbWVcIl0gPSAzNl0gPSBcImhvbWVcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcImluc2VydFwiXSA9IDQ1XSA9IFwiaW5zZXJ0XCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJtZW51XCJdID0gOTNdID0gXCJtZW51XCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJtaW51c1wiXSA9IDE4OV0gPSBcIm1pbnVzXCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJtaW51czJcIl0gPSAxMDldID0gXCJtaW51czJcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcIm51bUxvY2tcIl0gPSAxNDRdID0gXCJudW1Mb2NrXCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJudW1QYWQwXCJdID0gOTZdID0gXCJudW1QYWQwXCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJudW1QYWQxXCJdID0gOTddID0gXCJudW1QYWQxXCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJudW1QYWQyXCJdID0gOThdID0gXCJudW1QYWQyXCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJudW1QYWQzXCJdID0gOTldID0gXCJudW1QYWQzXCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJudW1QYWQ0XCJdID0gMTAwXSA9IFwibnVtUGFkNFwiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wibnVtUGFkNVwiXSA9IDEwMV0gPSBcIm51bVBhZDVcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcIm51bVBhZDZcIl0gPSAxMDJdID0gXCJudW1QYWQ2XCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJudW1QYWQ3XCJdID0gMTAzXSA9IFwibnVtUGFkN1wiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wibnVtUGFkOFwiXSA9IDEwNF0gPSBcIm51bVBhZDhcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcIm51bVBhZDlcIl0gPSAxMDVdID0gXCJudW1QYWQ5XCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJudW1QYWREaXZpZGVcIl0gPSAxMTFdID0gXCJudW1QYWREaXZpZGVcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcIm51bVBhZERvdFwiXSA9IDExMF0gPSBcIm51bVBhZERvdFwiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wibnVtUGFkTWludXNcIl0gPSAxMDldID0gXCJudW1QYWRNaW51c1wiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wibnVtUGFkTXVsdGlwbHlcIl0gPSAxMDZdID0gXCJudW1QYWRNdWx0aXBseVwiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wibnVtUGFkUGx1c1wiXSA9IDEwN10gPSBcIm51bVBhZFBsdXNcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcIm9wZW5CcmFja2V0XCJdID0gMjE5XSA9IFwib3BlbkJyYWNrZXRcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcInBhZ2VEb3duXCJdID0gMzRdID0gXCJwYWdlRG93blwiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wicGFnZVVwXCJdID0gMzNdID0gXCJwYWdlVXBcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcInBlcmlvZFwiXSA9IDE5MF0gPSBcInBlcmlvZFwiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wicHJpbnRcIl0gPSA0NF0gPSBcInByaW50XCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJxdW90ZVwiXSA9IDIyMl0gPSBcInF1b3RlXCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJzY3JvbGxMb2NrXCJdID0gMTQ1XSA9IFwic2Nyb2xsTG9ja1wiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wic2hpZnRcIl0gPSAxNl0gPSBcInNoaWZ0XCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJzcGFjZVwiXSA9IDMyXSA9IFwic3BhY2VcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcInRhYlwiXSA9IDldID0gXCJ0YWJcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcInRpbGRlXCJdID0gMTkyXSA9IFwidGlsZGVcIjtcbiAgICBLZXlDb2Rlc1tLZXlDb2Rlc1tcIndpbmRvd3NMZWZ0XCJdID0gOTFdID0gXCJ3aW5kb3dzTGVmdFwiO1xuICAgIEtleUNvZGVzW0tleUNvZGVzW1wid2luZG93c09wZXJhXCJdID0gMjE5XSA9IFwid2luZG93c09wZXJhXCI7XG4gICAgS2V5Q29kZXNbS2V5Q29kZXNbXCJ3aW5kb3dzUmlnaHRcIl0gPSA5Ml0gPSBcIndpbmRvd3NSaWdodFwiO1xufSkoS2V5Q29kZXMgfHwgKEtleUNvZGVzID0ge30pKTtcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZUFsdCA9IDE4O1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlQXJyb3dEb3duID0gNDA7XG4vKipcbiAqIEBkZXByZWNhdGVkIC0gS2V5Q29kZXMgYXJlIGRlcHJlY2F0ZWQsIHVzZSBzdHJpbmcga2V5IGV4cG9ydHNcbiAqL1xuZXhwb3J0IGNvbnN0IGtleUNvZGVBcnJvd0xlZnQgPSAzNztcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZUFycm93UmlnaHQgPSAzOTtcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZUFycm93VXAgPSAzODtcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZUJhY2sgPSA4O1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlQmFja1NsYXNoID0gMjIwO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlQnJlYWsgPSAxOTtcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZUNhcHNMb2NrID0gMjA7XG4vKipcbiAqIEBkZXByZWNhdGVkIC0gS2V5Q29kZXMgYXJlIGRlcHJlY2F0ZWQsIHVzZSBzdHJpbmcga2V5IGV4cG9ydHNcbiAqL1xuZXhwb3J0IGNvbnN0IGtleUNvZGVDbG9zZUJyYWNrZXQgPSAyMjE7XG4vKipcbiAqIEBkZXByZWNhdGVkIC0gS2V5Q29kZXMgYXJlIGRlcHJlY2F0ZWQsIHVzZSBzdHJpbmcga2V5IGV4cG9ydHNcbiAqL1xuZXhwb3J0IGNvbnN0IGtleUNvZGVDb2xvbiA9IDE4Njtcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZUNvbG9uMiA9IDU5OyAvLyBPcGVyYSBhbmQgRmlyZWZveFxuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlQ29tbWEgPSAxODg7XG4vKipcbiAqIEBkZXByZWNhdGVkIC0gS2V5Q29kZXMgYXJlIGRlcHJlY2F0ZWQsIHVzZSBzdHJpbmcga2V5IGV4cG9ydHNcbiAqL1xuZXhwb3J0IGNvbnN0IGtleUNvZGVDdHJsID0gMTc7XG4vKipcbiAqIEBkZXByZWNhdGVkIC0gS2V5Q29kZXMgYXJlIGRlcHJlY2F0ZWQsIHVzZSBzdHJpbmcga2V5IGV4cG9ydHNcbiAqL1xuZXhwb3J0IGNvbnN0IGtleUNvZGVEZWxldGUgPSA0Njtcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZUVuZCA9IDM1O1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlRW50ZXIgPSAxMztcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZUVxdWFscyA9IDE4Nztcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZUVxdWFsczIgPSA2MTsgLy8gT3BlcmFcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZUVxdWFsczMgPSAxMDc7IC8vIEZpcmVmb3hcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZUVzY2FwZSA9IDI3O1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlRm9yd2FyZFNsYXNoID0gMTkxO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlRnVuY3Rpb24xID0gMTEyO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlRnVuY3Rpb24xMCA9IDEyMTtcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZUZ1bmN0aW9uMTEgPSAxMjI7XG4vKipcbiAqIEBkZXByZWNhdGVkIC0gS2V5Q29kZXMgYXJlIGRlcHJlY2F0ZWQsIHVzZSBzdHJpbmcga2V5IGV4cG9ydHNcbiAqL1xuZXhwb3J0IGNvbnN0IGtleUNvZGVGdW5jdGlvbjEyID0gMTIzO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlRnVuY3Rpb24yID0gMTEzO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlRnVuY3Rpb24zID0gMTE0O1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlRnVuY3Rpb240ID0gMTE1O1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlRnVuY3Rpb241ID0gMTE2O1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlRnVuY3Rpb242ID0gMTE3O1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlRnVuY3Rpb243ID0gMTE4O1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlRnVuY3Rpb244ID0gMTE5O1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlRnVuY3Rpb245ID0gMTIwO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlSG9tZSA9IDM2O1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlSW5zZXJ0ID0gNDU7XG4vKipcbiAqIEBkZXByZWNhdGVkIC0gS2V5Q29kZXMgYXJlIGRlcHJlY2F0ZWQsIHVzZSBzdHJpbmcga2V5IGV4cG9ydHNcbiAqL1xuZXhwb3J0IGNvbnN0IGtleUNvZGVNZW51ID0gOTM7XG4vKipcbiAqIEBkZXByZWNhdGVkIC0gS2V5Q29kZXMgYXJlIGRlcHJlY2F0ZWQsIHVzZSBzdHJpbmcga2V5IGV4cG9ydHNcbiAqL1xuZXhwb3J0IGNvbnN0IGtleUNvZGVNaW51cyA9IDE4OTtcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZU1pbnVzMiA9IDEwOTsgLy8gT3BlcmEgYW5kIEZpcmVmb3hcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZU51bUxvY2sgPSAxNDQ7XG4vKipcbiAqIEBkZXByZWNhdGVkIC0gS2V5Q29kZXMgYXJlIGRlcHJlY2F0ZWQsIHVzZSBzdHJpbmcga2V5IGV4cG9ydHNcbiAqL1xuZXhwb3J0IGNvbnN0IGtleUNvZGVOdW1QYWQwID0gOTY7XG4vKipcbiAqIEBkZXByZWNhdGVkIC0gS2V5Q29kZXMgYXJlIGRlcHJlY2F0ZWQsIHVzZSBzdHJpbmcga2V5IGV4cG9ydHNcbiAqL1xuZXhwb3J0IGNvbnN0IGtleUNvZGVOdW1QYWQxID0gOTc7XG4vKipcbiAqIEBkZXByZWNhdGVkIC0gS2V5Q29kZXMgYXJlIGRlcHJlY2F0ZWQsIHVzZSBzdHJpbmcga2V5IGV4cG9ydHNcbiAqL1xuZXhwb3J0IGNvbnN0IGtleUNvZGVOdW1QYWQyID0gOTg7XG4vKipcbiAqIEBkZXByZWNhdGVkIC0gS2V5Q29kZXMgYXJlIGRlcHJlY2F0ZWQsIHVzZSBzdHJpbmcga2V5IGV4cG9ydHNcbiAqL1xuZXhwb3J0IGNvbnN0IGtleUNvZGVOdW1QYWQzID0gOTk7XG4vKipcbiAqIEBkZXByZWNhdGVkIC0gS2V5Q29kZXMgYXJlIGRlcHJlY2F0ZWQsIHVzZSBzdHJpbmcga2V5IGV4cG9ydHNcbiAqL1xuZXhwb3J0IGNvbnN0IGtleUNvZGVOdW1QYWQ0ID0gMTAwO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlTnVtUGFkNSA9IDEwMTtcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZU51bVBhZDYgPSAxMDI7XG4vKipcbiAqIEBkZXByZWNhdGVkIC0gS2V5Q29kZXMgYXJlIGRlcHJlY2F0ZWQsIHVzZSBzdHJpbmcga2V5IGV4cG9ydHNcbiAqL1xuZXhwb3J0IGNvbnN0IGtleUNvZGVOdW1QYWQ3ID0gMTAzO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlTnVtUGFkOCA9IDEwNDtcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZU51bVBhZDkgPSAxMDU7XG4vKipcbiAqIEBkZXByZWNhdGVkIC0gS2V5Q29kZXMgYXJlIGRlcHJlY2F0ZWQsIHVzZSBzdHJpbmcga2V5IGV4cG9ydHNcbiAqL1xuZXhwb3J0IGNvbnN0IGtleUNvZGVOdW1QYWREaXZpZGUgPSAxMTE7XG4vKipcbiAqIEBkZXByZWNhdGVkIC0gS2V5Q29kZXMgYXJlIGRlcHJlY2F0ZWQsIHVzZSBzdHJpbmcga2V5IGV4cG9ydHNcbiAqL1xuZXhwb3J0IGNvbnN0IGtleUNvZGVOdW1QYWREb3QgPSAxMTA7XG4vKipcbiAqIEBkZXByZWNhdGVkIC0gS2V5Q29kZXMgYXJlIGRlcHJlY2F0ZWQsIHVzZSBzdHJpbmcga2V5IGV4cG9ydHNcbiAqL1xuZXhwb3J0IGNvbnN0IGtleUNvZGVOdW1QYWRNaW51cyA9IDEwOTtcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZU51bVBhZE11bHRpcGx5ID0gMTA2O1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlTnVtUGFkUGx1cyA9IDEwNztcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZU9wZW5CcmFja2V0ID0gMjE5O1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlUGFnZURvd24gPSAzNDtcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZVBhZ2VVcCA9IDMzO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlUGVyaW9kID0gMTkwO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlUHJpbnQgPSA0NDtcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZVF1b3RlID0gMjIyO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlU2Nyb2xsTG9jayA9IDE0NTtcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZVNoaWZ0ID0gMTY7XG4vKipcbiAqIEBkZXByZWNhdGVkIC0gS2V5Q29kZXMgYXJlIGRlcHJlY2F0ZWQsIHVzZSBzdHJpbmcga2V5IGV4cG9ydHNcbiAqL1xuZXhwb3J0IGNvbnN0IGtleUNvZGVTcGFjZSA9IDMyO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlVGFiID0gOTtcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZVRpbGRlID0gMTkyO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCAtIEtleUNvZGVzIGFyZSBkZXByZWNhdGVkLCB1c2Ugc3RyaW5nIGtleSBleHBvcnRzXG4gKi9cbmV4cG9ydCBjb25zdCBrZXlDb2RlV2luZG93c0xlZnQgPSA5MTtcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZVdpbmRvd3NPcGVyYSA9IDIxOTsgLy8gT3BlcmFcbi8qKlxuICogQGRlcHJlY2F0ZWQgLSBLZXlDb2RlcyBhcmUgZGVwcmVjYXRlZCwgdXNlIHN0cmluZyBrZXkgZXhwb3J0c1xuICovXG5leHBvcnQgY29uc3Qga2V5Q29kZVdpbmRvd3NSaWdodCA9IDkyO1xuLyoqXG4gKiBTdHJpbmcgdmFsdWVzIGZvciB1c2Ugd2l0aCBLZXlib2FyZEV2ZW50LmtleVxuICovXG5leHBvcnQgY29uc3Qga2V5QXJyb3dEb3duID0gXCJBcnJvd0Rvd25cIjtcbmV4cG9ydCBjb25zdCBrZXlBcnJvd0xlZnQgPSBcIkFycm93TGVmdFwiO1xuZXhwb3J0IGNvbnN0IGtleUFycm93UmlnaHQgPSBcIkFycm93UmlnaHRcIjtcbmV4cG9ydCBjb25zdCBrZXlBcnJvd1VwID0gXCJBcnJvd1VwXCI7XG5leHBvcnQgY29uc3Qga2V5RW50ZXIgPSBcIkVudGVyXCI7XG5leHBvcnQgY29uc3Qga2V5RXNjYXBlID0gXCJFc2NhcGVcIjtcbmV4cG9ydCBjb25zdCBrZXlIb21lID0gXCJIb21lXCI7XG5leHBvcnQgY29uc3Qga2V5RW5kID0gXCJFbmRcIjtcbmV4cG9ydCBjb25zdCBrZXlGdW5jdGlvbjIgPSBcIkYyXCI7XG5leHBvcnQgY29uc3Qga2V5UGFnZURvd24gPSBcIlBhZ2VEb3duXCI7XG5leHBvcnQgY29uc3Qga2V5UGFnZVVwID0gXCJQYWdlVXBcIjtcbmV4cG9ydCBjb25zdCBrZXlTcGFjZSA9IFwiIFwiO1xuZXhwb3J0IGNvbnN0IGtleVRhYiA9IFwiVGFiXCI7XG5leHBvcnQgY29uc3Qga2V5QmFja3NwYWNlID0gXCJCYWNrc3BhY2VcIjtcbmV4cG9ydCBjb25zdCBrZXlEZWxldGUgPSBcIkRlbGV0ZVwiO1xuZXhwb3J0IGNvbnN0IEFycm93S2V5cyA9IHtcbiAgICBBcnJvd0Rvd246IGtleUFycm93RG93bixcbiAgICBBcnJvd0xlZnQ6IGtleUFycm93TGVmdCxcbiAgICBBcnJvd1JpZ2h0OiBrZXlBcnJvd1JpZ2h0LFxuICAgIEFycm93VXA6IGtleUFycm93VXAsXG59O1xuIiwiLyoqXG4gKiBUaGlzIG1ldGhvZCBrZWVwcyBhIGdpdmVuIHZhbHVlIHdpdGhpbiB0aGUgYm91bmRzIG9mIGEgbWluIGFuZCBtYXggdmFsdWUuIElmIHRoZSB2YWx1ZVxuICogaXMgbGFyZ2VyIHRoYW4gdGhlIG1heCwgdGhlIG1pbmltdW0gdmFsdWUgd2lsbCBiZSByZXR1cm5lZC4gSWYgdGhlIHZhbHVlIGlzIHNtYWxsZXIgdGhhbiB0aGUgbWluaW11bSxcbiAqIHRoZSBtYXhpbXVtIHdpbGwgYmUgcmV0dXJuZWQuIE90aGVyd2lzZSwgdGhlIHZhbHVlIGlzIHJldHVybmVkIHVuLWNoYW5nZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3cmFwSW5Cb3VuZHMobWluLCBtYXgsIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIDwgbWluKSB7XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZhbHVlID4gbWF4KSB7XG4gICAgICAgIHJldHVybiBtaW47XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cbi8qKlxuICogRW5zdXJlcyB0aGF0IGEgdmFsdWUgaXMgYmV0d2VlbiBhIG1pbiBhbmQgbWF4IHZhbHVlLiBJZiB2YWx1ZSBpcyBsb3dlciB0aGFuIG1pbiwgbWluIHdpbGwgYmUgcmV0dXJuZWQuXG4gKiBJZiB2YWx1ZSBpcyBncmVhdGVyIHRoYW4gbWF4LCBtYXggd2lsbCBiZSByZXR1cm5lZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbWl0KG1pbiwgbWF4LCB2YWx1ZSkge1xuICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1heCh2YWx1ZSwgbWluKSwgbWF4KTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiBhIG51bWJlciB2YWx1ZSBpcyB3aXRoaW4gYSBzcGVjaWZpZWQgcmFuZ2UuXG4gKlxuICogQHBhcmFtIHZhbHVlIC0gdGhlIHZhbHVlIHRvIGNoZWNrXG4gKiBAcGFyYW0gbWluIC0gdGhlIHJhbmdlIHN0YXJ0XG4gKiBAcGFyYW0gbWF4IC0gdGhlIHJhbmdlIGVuZFxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5SYW5nZSh2YWx1ZSwgbWluLCBtYXggPSAwKSB7XG4gICAgW21pbiwgbWF4XSA9IFttaW4sIG1heF0uc29ydCgoYSwgYikgPT4gYSAtIGIpO1xuICAgIHJldHVybiBtaW4gPD0gdmFsdWUgJiYgdmFsdWUgPCBtYXg7XG59XG4iLCJsZXQgdW5pcXVlSWRDb3VudGVyID0gMDtcbi8qKlxuICogR2VuZXJhdGVzIGEgdW5pcXVlIElEIGJhc2VkIG9uIGluY3JlbWVudGluZyBhIGNvdW50ZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bmlxdWVJZChwcmVmaXggPSBcIlwiKSB7XG4gICAgcmV0dXJuIGAke3ByZWZpeH0ke3VuaXF1ZUlkQ291bnRlcisrfWA7XG59XG4vKipcbiAqIEJ1aWxkcyBhIHN0cmluZyBmcm9tIGEgZm9ybWF0IHNwZWNpZmllciBhbmQgcmVwbGFjZW1lbnQgcGFyYW1ldGVycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdChmb3JtYXRTcGVjaWZpZXIsIC4uLnBhcmFtZXRlcnMpIHtcbiAgICByZXR1cm4gZm9ybWF0U3BlY2lmaWVyLnJlcGxhY2UoL3soXFxkKyl9L2csIGZ1bmN0aW9uIChtYXRjaCwgaW5kZXgpIHtcbiAgICAgICAgaWYgKGluZGV4ID49IHBhcmFtZXRlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJhbWV0ZXJzW2luZGV4XTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJudW1iZXJcIiAmJiAhdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9KTtcbn1cbi8qKlxuICogQ2hlY2sgdG8gc2VlIGlmIG9uZSBzdHJpbmcgc3RhcnRzIHdpdGggYW5vdGhlclxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRzV2l0aChzdHJpbmdUb1NlYXJjaCwgc2VhcmNoRm9yLCBwb3NpdGlvbiA9IDApIHtcbiAgICBpZiAoIXN0cmluZ1RvU2VhcmNoIHx8ICFzZWFyY2hGb3IpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gc3RyaW5nVG9TZWFyY2guc3Vic3RyKHBvc2l0aW9uLCBzZWFyY2hGb3IubGVuZ3RoKSA9PT0gc2VhcmNoRm9yO1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSBzcGVjaWZpZWQgc3RyaW5nIGlzIHVuZGVmaW5lZCwgbnVsbCwgZW1wdHksIG9yIHdoaXRlc3BhY2UuXG4gKiBUcnVlIGlmIHRoZSB2YWx1ZSBpcyB1bmRlZmluZWQsIG51bGwsIGVtcHR5LCBvciB3aGl0ZXNwYWNlLCBvdGhlcndpc2UgZmFsc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc051bGxPcldoaXRlU3BhY2UodmFsdWUpIHtcbiAgICByZXR1cm4gIXZhbHVlIHx8ICF2YWx1ZS50cmltKCk7XG59XG4vKipcbiAqIENvbnZlcnRzIGEgc3RyaW5nIHRvIFBhc2NhbCBDYXNlXG4gKiB3aGVyZSB0aGUgZmlyc3QgbGV0dGVyIG9mIGVhY2ggY29tcG91bmQgd29yZCBpcyBjYXBpdGFsaXplZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhc2NhbENhc2UodmFsdWUpIHtcbiAgICBsZXQgbmV3VmFsdWUgPSBgJHt2YWx1ZX1gXG4gICAgICAgIC5yZXBsYWNlKG5ldyBSZWdFeHAoL1stX10rLywgXCJnXCIpLCBcIiBcIilcbiAgICAgICAgLnJlcGxhY2UobmV3IFJlZ0V4cCgvW15cXHdcXHNdLywgXCJnXCIpLCBcIlwiKVxuICAgICAgICAucmVwbGFjZSgvXlxccyt8XFxzKyR8XFxzKyg/PVxccykvZywgXCJcIilcbiAgICAgICAgLnJlcGxhY2UobmV3IFJlZ0V4cCgvXFxzKyguKShcXHcqKS8sIFwiZ1wiKSwgKCQxLCAkMiwgJDMpID0+IGAkeyQyLnRvVXBwZXJDYXNlKCkgKyAkMy50b0xvd2VyQ2FzZSgpfWApXG4gICAgICAgIC5yZXBsYWNlKG5ldyBSZWdFeHAoL1xcdy8pLCBzID0+IHMudG9VcHBlckNhc2UoKSk7XG4gICAgbGV0IGZpcnN0TG93ZXJJZHggPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3VmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgY3VyckNoYXIgPSBuZXdWYWx1ZS5jaGFyQXQoaSk7XG4gICAgICAgIGlmIChjdXJyQ2hhciA9PSBjdXJyQ2hhci50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICBmaXJzdExvd2VySWR4ID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChmaXJzdExvd2VySWR4ID4gMSkge1xuICAgICAgICBuZXdWYWx1ZSA9XG4gICAgICAgICAgICBgJHtuZXdWYWx1ZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKX0ke25ld1ZhbHVlXG4gICAgICAgICAgICAgICAgLnNsaWNlKDEsIGZpcnN0TG93ZXJJZHggLSAxKVxuICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpfWAgKyBuZXdWYWx1ZS5zbGljZShmaXJzdExvd2VySWR4IC0gMSk7XG4gICAgfVxuICAgIHJldHVybiBuZXdWYWx1ZTtcbn1cbi8qKlxuICogY29udmVydHMgYSBzdHJpbmcgZnJvbSBjYW1lbENhc2Ugb3IgcGFzY2FsQ2FzZSB0byBzcGluYWwtY2FzZVxuICogd2hpY2ggaXMgYW4gbG93ZXJjYXNlIGRhc2ggc2VwYXJhdGVkIG5hbWluZyBzdHlsZS5cbiAqXG4gKiBBbiBleGFtcGxlIG9mIHNwaW5hbCBjYXNlOiBmb28tYmFyLWJhdFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3BpbmFsQ2FzZSh2YWx1ZSkge1xuICAgIGNvbnN0IHZhbHVlV2l0aExvd2VyQ2FzZUZpcnN0TGV0dGVyID0gYCR7dmFsdWVcbiAgICAgICAgLmNoYXJBdCgwKVxuICAgICAgICAudG9Mb3dlckNhc2UoKX0ke3ZhbHVlLnNsaWNlKDEpfWA7XG4gICAgcmV0dXJuIHZhbHVlV2l0aExvd2VyQ2FzZUZpcnN0TGV0dGVyLnJlcGxhY2UoLyhbQS1aXXxbMC05XSkvZywgZnVuY3Rpb24gKG1hdGNoLCBncm91cDEpIHtcbiAgICAgICAgcmV0dXJuIGAtJHtncm91cDEudG9Mb3dlckNhc2UoKX1gO1xuICAgIH0pO1xufVxuIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgYXR0ciB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuLyoqXG4gKiBTb21lIHN0YXRlcyBhbmQgcHJvcGVydGllcyBhcmUgYXBwbGljYWJsZSB0byBhbGwgaG9zdCBsYW5ndWFnZSBlbGVtZW50cyByZWdhcmRsZXNzIG9mIHdoZXRoZXIgYSByb2xlIGlzIGFwcGxpZWQuXG4gKiBUaGUgZm9sbG93aW5nIGdsb2JhbCBzdGF0ZXMgYW5kIHByb3BlcnRpZXMgYXJlIHN1cHBvcnRlZCBieSBhbGwgcm9sZXMgYW5kIGJ5IGFsbCBiYXNlIG1hcmt1cCBlbGVtZW50cy5cbiAqIHtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvd2FpLWFyaWEtMS4xLyNnbG9iYWxfc3RhdGVzfVxuICpcbiAqIFRoaXMgaXMgaW50ZW5kZWQgdG8gYmUgdXNlZCBhcyBhIG1peGluLiBCZSBzdXJlIHlvdSBleHRlbmQgRkFTVEVsZW1lbnQuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMge1xufVxuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhcmlhLWF0b21pY1wiIH0pXG5dLCBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcy5wcm90b3R5cGUsIFwiYXJpYUF0b21pY1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhcmlhLWJ1c3lcIiB9KVxuXSwgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMucHJvdG90eXBlLCBcImFyaWFCdXN5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImFyaWEtY29udHJvbHNcIiB9KVxuXSwgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMucHJvdG90eXBlLCBcImFyaWFDb250cm9sc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhcmlhLWN1cnJlbnRcIiB9KVxuXSwgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMucHJvdG90eXBlLCBcImFyaWFDdXJyZW50XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImFyaWEtZGVzY3JpYmVkYnlcIiB9KVxuXSwgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMucHJvdG90eXBlLCBcImFyaWFEZXNjcmliZWRieVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhcmlhLWRldGFpbHNcIiB9KVxuXSwgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMucHJvdG90eXBlLCBcImFyaWFEZXRhaWxzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImFyaWEtZGlzYWJsZWRcIiB9KVxuXSwgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMucHJvdG90eXBlLCBcImFyaWFEaXNhYmxlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhcmlhLWVycm9ybWVzc2FnZVwiIH0pXG5dLCBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcy5wcm90b3R5cGUsIFwiYXJpYUVycm9ybWVzc2FnZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhcmlhLWZsb3d0b1wiIH0pXG5dLCBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcy5wcm90b3R5cGUsIFwiYXJpYUZsb3d0b1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhcmlhLWhhc3BvcHVwXCIgfSlcbl0sIEFSSUFHbG9iYWxTdGF0ZXNBbmRQcm9wZXJ0aWVzLnByb3RvdHlwZSwgXCJhcmlhSGFzcG9wdXBcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiYXJpYS1oaWRkZW5cIiB9KVxuXSwgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMucHJvdG90eXBlLCBcImFyaWFIaWRkZW5cIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiYXJpYS1pbnZhbGlkXCIgfSlcbl0sIEFSSUFHbG9iYWxTdGF0ZXNBbmRQcm9wZXJ0aWVzLnByb3RvdHlwZSwgXCJhcmlhSW52YWxpZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhcmlhLWtleXNob3J0Y3V0c1wiIH0pXG5dLCBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcy5wcm90b3R5cGUsIFwiYXJpYUtleXNob3J0Y3V0c1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhcmlhLWxhYmVsXCIgfSlcbl0sIEFSSUFHbG9iYWxTdGF0ZXNBbmRQcm9wZXJ0aWVzLnByb3RvdHlwZSwgXCJhcmlhTGFiZWxcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiYXJpYS1sYWJlbGxlZGJ5XCIgfSlcbl0sIEFSSUFHbG9iYWxTdGF0ZXNBbmRQcm9wZXJ0aWVzLnByb3RvdHlwZSwgXCJhcmlhTGFiZWxsZWRieVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhcmlhLWxpdmVcIiB9KVxuXSwgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMucHJvdG90eXBlLCBcImFyaWFMaXZlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImFyaWEtb3duc1wiIH0pXG5dLCBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcy5wcm90b3R5cGUsIFwiYXJpYU93bnNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwiYXJpYS1yZWxldmFudFwiIH0pXG5dLCBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcy5wcm90b3R5cGUsIFwiYXJpYVJlbGV2YW50XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImFyaWEtcm9sZWRlc2NyaXB0aW9uXCIgfSlcbl0sIEFSSUFHbG9iYWxTdGF0ZXNBbmRQcm9wZXJ0aWVzLnByb3RvdHlwZSwgXCJhcmlhUm9sZWRlc2NyaXB0aW9uXCIsIHZvaWQgMCk7XG4iLCJpbXBvcnQgeyBodG1sLCByZWYsIHNsb3R0ZWQgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGVuZFNsb3RUZW1wbGF0ZSwgc3RhcnRTbG90VGVtcGxhdGUgfSBmcm9tIFwiLi4vcGF0dGVybnMvc3RhcnQtZW5kLmpzXCI7XG4vKipcbiAqIFRoZSB0ZW1wbGF0ZSBmb3IgdGhlIHtAbGluayBAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbiMoQnV0dG9uOmNsYXNzKX0gY29tcG9uZW50LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgYnV0dG9uVGVtcGxhdGUgPSAoY29udGV4dCwgZGVmaW5pdGlvbikgPT4gaHRtbCBgXG4gICAgPGJ1dHRvblxuICAgICAgICBjbGFzcz1cImNvbnRyb2xcIlxuICAgICAgICBwYXJ0PVwiY29udHJvbFwiXG4gICAgICAgID9hdXRvZm9jdXM9XCIke3ggPT4geC5hdXRvZm9jdXN9XCJcbiAgICAgICAgP2Rpc2FibGVkPVwiJHt4ID0+IHguZGlzYWJsZWR9XCJcbiAgICAgICAgZm9ybT1cIiR7eCA9PiB4LmZvcm1JZH1cIlxuICAgICAgICBmb3JtYWN0aW9uPVwiJHt4ID0+IHguZm9ybWFjdGlvbn1cIlxuICAgICAgICBmb3JtZW5jdHlwZT1cIiR7eCA9PiB4LmZvcm1lbmN0eXBlfVwiXG4gICAgICAgIGZvcm1tZXRob2Q9XCIke3ggPT4geC5mb3JtbWV0aG9kfVwiXG4gICAgICAgIGZvcm1ub3ZhbGlkYXRlPVwiJHt4ID0+IHguZm9ybW5vdmFsaWRhdGV9XCJcbiAgICAgICAgZm9ybXRhcmdldD1cIiR7eCA9PiB4LmZvcm10YXJnZXR9XCJcbiAgICAgICAgbmFtZT1cIiR7eCA9PiB4Lm5hbWV9XCJcbiAgICAgICAgdHlwZT1cIiR7eCA9PiB4LnR5cGV9XCJcbiAgICAgICAgdmFsdWU9XCIke3ggPT4geC52YWx1ZX1cIlxuICAgICAgICBhcmlhLWF0b21pYz1cIiR7eCA9PiB4LmFyaWFBdG9taWN9XCJcbiAgICAgICAgYXJpYS1idXN5PVwiJHt4ID0+IHguYXJpYUJ1c3l9XCJcbiAgICAgICAgYXJpYS1jb250cm9scz1cIiR7eCA9PiB4LmFyaWFDb250cm9sc31cIlxuICAgICAgICBhcmlhLWN1cnJlbnQ9XCIke3ggPT4geC5hcmlhQ3VycmVudH1cIlxuICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PVwiJHt4ID0+IHguYXJpYURlc2NyaWJlZGJ5fVwiXG4gICAgICAgIGFyaWEtZGV0YWlscz1cIiR7eCA9PiB4LmFyaWFEZXRhaWxzfVwiXG4gICAgICAgIGFyaWEtZGlzYWJsZWQ9XCIke3ggPT4geC5hcmlhRGlzYWJsZWR9XCJcbiAgICAgICAgYXJpYS1lcnJvcm1lc3NhZ2U9XCIke3ggPT4geC5hcmlhRXJyb3JtZXNzYWdlfVwiXG4gICAgICAgIGFyaWEtZXhwYW5kZWQ9XCIke3ggPT4geC5hcmlhRXhwYW5kZWR9XCJcbiAgICAgICAgYXJpYS1mbG93dG89XCIke3ggPT4geC5hcmlhRmxvd3RvfVwiXG4gICAgICAgIGFyaWEtaGFzcG9wdXA9XCIke3ggPT4geC5hcmlhSGFzcG9wdXB9XCJcbiAgICAgICAgYXJpYS1oaWRkZW49XCIke3ggPT4geC5hcmlhSGlkZGVufVwiXG4gICAgICAgIGFyaWEtaW52YWxpZD1cIiR7eCA9PiB4LmFyaWFJbnZhbGlkfVwiXG4gICAgICAgIGFyaWEta2V5c2hvcnRjdXRzPVwiJHt4ID0+IHguYXJpYUtleXNob3J0Y3V0c31cIlxuICAgICAgICBhcmlhLWxhYmVsPVwiJHt4ID0+IHguYXJpYUxhYmVsfVwiXG4gICAgICAgIGFyaWEtbGFiZWxsZWRieT1cIiR7eCA9PiB4LmFyaWFMYWJlbGxlZGJ5fVwiXG4gICAgICAgIGFyaWEtbGl2ZT1cIiR7eCA9PiB4LmFyaWFMaXZlfVwiXG4gICAgICAgIGFyaWEtb3ducz1cIiR7eCA9PiB4LmFyaWFPd25zfVwiXG4gICAgICAgIGFyaWEtcHJlc3NlZD1cIiR7eCA9PiB4LmFyaWFQcmVzc2VkfVwiXG4gICAgICAgIGFyaWEtcmVsZXZhbnQ9XCIke3ggPT4geC5hcmlhUmVsZXZhbnR9XCJcbiAgICAgICAgYXJpYS1yb2xlZGVzY3JpcHRpb249XCIke3ggPT4geC5hcmlhUm9sZWRlc2NyaXB0aW9ufVwiXG4gICAgICAgICR7cmVmKFwiY29udHJvbFwiKX1cbiAgICA+XG4gICAgICAgICR7c3RhcnRTbG90VGVtcGxhdGUoY29udGV4dCwgZGVmaW5pdGlvbil9XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiY29udGVudFwiIHBhcnQ9XCJjb250ZW50XCI+XG4gICAgICAgICAgICA8c2xvdCAke3Nsb3R0ZWQoXCJkZWZhdWx0U2xvdHRlZENvbnRlbnRcIil9Pjwvc2xvdD5cbiAgICAgICAgPC9zcGFuPlxuICAgICAgICAke2VuZFNsb3RUZW1wbGF0ZShjb250ZXh0LCBkZWZpbml0aW9uKX1cbiAgICA8L2J1dHRvbj5cbmA7XG4iLCJpbXBvcnQgeyBhdHRyLCBib29sZWFuQ29udmVydGVyLCBET00sIGVtcHR5QXJyYXksIG9ic2VydmFibGUsIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBrZXlFbnRlciB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3Qtd2ViLXV0aWxpdGllc1wiO1xuY29uc3QgcHJveHlTbG90TmFtZSA9IFwiZm9ybS1hc3NvY2lhdGVkLXByb3h5XCI7XG5jb25zdCBFbGVtZW50SW50ZXJuYWxzS2V5ID0gXCJFbGVtZW50SW50ZXJuYWxzXCI7XG4vKipcbiAqIEBhbHBoYVxuICovXG5leHBvcnQgY29uc3Qgc3VwcG9ydHNFbGVtZW50SW50ZXJuYWxzID0gRWxlbWVudEludGVybmFsc0tleSBpbiB3aW5kb3cgJiZcbiAgICBcInNldEZvcm1WYWx1ZVwiIGluIHdpbmRvd1tFbGVtZW50SW50ZXJuYWxzS2V5XS5wcm90b3R5cGU7XG5jb25zdCBJbnRlcm5hbHNNYXAgPSBuZXcgV2Vha01hcCgpO1xuLyoqXG4gKiBCYXNlIGZ1bmN0aW9uIGZvciBwcm92aWRpbmcgQ3VzdG9tIEVsZW1lbnQgRm9ybSBBc3NvY2lhdGlvbi5cbiAqXG4gKiBAYWxwaGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEZvcm1Bc3NvY2lhdGVkKEJhc2VDdG9yKSB7XG4gICAgY29uc3QgQyA9IGNsYXNzIGV4dGVuZHMgQmFzZUN0b3Ige1xuICAgICAgICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gICAgICAgICAgICBzdXBlciguLi5hcmdzKTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVHJhY2sgd2hldGhlciB0aGUgdmFsdWUgaGFzIGJlZW4gY2hhbmdlZCBmcm9tIHRoZSBpbml0aWFsIHZhbHVlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuZGlydHlWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBTZXRzIHRoZSBlbGVtZW50J3MgZGlzYWJsZWQgc3RhdGUuIEEgZGlzYWJsZWQgZWxlbWVudCB3aWxsIG5vdCBiZSBpbmNsdWRlZCBkdXJpbmcgZm9ybSBzdWJtaXNzaW9uLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEByZW1hcmtzXG4gICAgICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogZGlzYWJsZWRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGVzZSBhcmUgZXZlbnRzIHRoYXQgYXJlIHN0aWxsIGZpcmVkIGJ5IHRoZSBwcm94eVxuICAgICAgICAgICAgICogZWxlbWVudCBiYXNlZCBvbiB1c2VyIC8gcHJvZ3JhbW1hdGljIGludGVyYWN0aW9uLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIFRoZSBwcm94eSBpbXBsZW1lbnRhdGlvbiBzaG91bGQgYmUgdHJhbnNwYXJlbnQgdG9cbiAgICAgICAgICAgICAqIHRoZSBhcHAgYXV0aG9yLCBzbyBibG9jayB0aGVzZSBldmVudHMgZnJvbSBlbWl0dGluZy5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5wcm94eUV2ZW50c1RvQmxvY2sgPSBbXCJjaGFuZ2VcIiwgXCJjbGlja1wiXTtcbiAgICAgICAgICAgIHRoaXMucHJveHlJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5yZXF1aXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsVmFsdWUgPSB0aGlzLmluaXRpYWxWYWx1ZSB8fCBcIlwiO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmVsZW1lbnRJbnRlcm5hbHMpIHtcbiAgICAgICAgICAgICAgICAvLyBXaGVuIGVsZW1lbnRJbnRlcm5hbHMgaXMgbm90IHN1cHBvcnRlZCwgZm9ybVJlc2V0Q2FsbGJhY2sgaXNcbiAgICAgICAgICAgICAgICAvLyBib3VuZCB0byBhbiBldmVudCBsaXN0ZW5lciwgc28gZW5zdXJlIHRoZSBoYW5kbGVyJ3MgYHRoaXNgXG4gICAgICAgICAgICAgICAgLy8gY29udGV4dCBpcyBjb3JyZWN0LlxuICAgICAgICAgICAgICAgIHRoaXMuZm9ybVJlc2V0Q2FsbGJhY2sgPSB0aGlzLmZvcm1SZXNldENhbGxiYWNrLmJpbmQodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE11c3QgZXZhbHVhdGUgdG8gdHJ1ZSB0byBlbmFibGUgZWxlbWVudEludGVybmFscy5cbiAgICAgICAgICogRmVhdHVyZSBkZXRlY3RzIEFQSSBzdXBwb3J0IGFuZCByZXNvbHZlIHJlc3BlY3RpdmVseVxuICAgICAgICAgKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHN0YXRpYyBnZXQgZm9ybUFzc29jaWF0ZWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc3VwcG9ydHNFbGVtZW50SW50ZXJuYWxzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRoZSB2YWxpZGl0eSBzdGF0ZSBvZiB0aGUgZWxlbWVudFxuICAgICAgICAgKlxuICAgICAgICAgKiBAYWxwaGFcbiAgICAgICAgICovXG4gICAgICAgIGdldCB2YWxpZGl0eSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRJbnRlcm5hbHNcbiAgICAgICAgICAgICAgICA/IHRoaXMuZWxlbWVudEludGVybmFscy52YWxpZGl0eVxuICAgICAgICAgICAgICAgIDogdGhpcy5wcm94eS52YWxpZGl0eTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0cmlldmUgYSByZWZlcmVuY2UgdG8gdGhlIGFzc29jaWF0ZWQgZm9ybS5cbiAgICAgICAgICogUmV0dXJucyBudWxsIGlmIG5vdCBhc3NvY2lhdGVkIHRvIGFueSBmb3JtLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAYWxwaGFcbiAgICAgICAgICovXG4gICAgICAgIGdldCBmb3JtKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudEludGVybmFscyA/IHRoaXMuZWxlbWVudEludGVybmFscy5mb3JtIDogdGhpcy5wcm94eS5mb3JtO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXRyaWV2ZSB0aGUgbG9jYWxpemVkIHZhbGlkYXRpb24gbWVzc2FnZSxcbiAgICAgICAgICogb3IgY3VzdG9tIHZhbGlkYXRpb24gbWVzc2FnZSBpZiBzZXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBhbHBoYVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0IHZhbGlkYXRpb25NZXNzYWdlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudEludGVybmFsc1xuICAgICAgICAgICAgICAgID8gdGhpcy5lbGVtZW50SW50ZXJuYWxzLnZhbGlkYXRpb25NZXNzYWdlXG4gICAgICAgICAgICAgICAgOiB0aGlzLnByb3h5LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRoZSBlbGVtZW50IHdpbGwgYmUgdmFsaWRhdGVkIHdoZW4gdGhlXG4gICAgICAgICAqIGZvcm0gaXMgc3VibWl0dGVkXG4gICAgICAgICAqL1xuICAgICAgICBnZXQgd2lsbFZhbGlkYXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudEludGVybmFsc1xuICAgICAgICAgICAgICAgID8gdGhpcy5lbGVtZW50SW50ZXJuYWxzLndpbGxWYWxpZGF0ZVxuICAgICAgICAgICAgICAgIDogdGhpcy5wcm94eS53aWxsVmFsaWRhdGU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgcmVmZXJlbmNlIHRvIGFsbCBhc3NvY2lhdGVkIGxhYmVsIGVsZW1lbnRzXG4gICAgICAgICAqL1xuICAgICAgICBnZXQgbGFiZWxzKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudEludGVybmFscykge1xuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuZnJlZXplKEFycmF5LmZyb20odGhpcy5lbGVtZW50SW50ZXJuYWxzLmxhYmVscykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmXG4gICAgICAgICAgICAgICAgdGhpcy5wcm94eS5vd25lckRvY3VtZW50ICYmXG4gICAgICAgICAgICAgICAgdGhpcy5pZCkge1xuICAgICAgICAgICAgICAgIC8vIExhYmVscyBhc3NvY2lhdGVkIGJ5IHdyYXBwaW5nIHRoZSBlbGVtZW50OiA8bGFiZWw+PGN1c3RvbS1lbGVtZW50PjwvY3VzdG9tLWVsZW1lbnQ+PC9sYWJlbD5cbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRMYWJlbHMgPSB0aGlzLnByb3h5LmxhYmVscztcbiAgICAgICAgICAgICAgICAvLyBMYWJlbHMgYXNzb2NpYXRlZCB1c2luZyB0aGUgYGZvcmAgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgY29uc3QgZm9yTGFiZWxzID0gQXJyYXkuZnJvbSh0aGlzLnByb3h5LmdldFJvb3ROb2RlKCkucXVlcnlTZWxlY3RvckFsbChgW2Zvcj0nJHt0aGlzLmlkfSddYCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVscyA9IHBhcmVudExhYmVsc1xuICAgICAgICAgICAgICAgICAgICA/IGZvckxhYmVscy5jb25jYXQoQXJyYXkuZnJvbShwYXJlbnRMYWJlbHMpKVxuICAgICAgICAgICAgICAgICAgICA6IGZvckxhYmVscztcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmZyZWV6ZShsYWJlbHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5QXJyYXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEludm9rZWQgd2hlbiB0aGUgYHZhbHVlYCBwcm9wZXJ0eSBjaGFuZ2VzXG4gICAgICAgICAqIEBwYXJhbSBwcmV2aW91cyAtIHRoZSBwcmV2aW91cyB2YWx1ZVxuICAgICAgICAgKiBAcGFyYW0gbmV4dCAtIHRoZSBuZXcgdmFsdWVcbiAgICAgICAgICpcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSWYgZWxlbWVudHMgZXh0ZW5kaW5nIGBGb3JtQXNzb2NpYXRlZGAgaW1wbGVtZW50IGEgYHZhbHVlQ2hhbmdlZGAgbWV0aG9kXG4gICAgICAgICAqIFRoZXkgbXVzdCBiZSBzdXJlIHRvIGludm9rZSBgc3VwZXIudmFsdWVDaGFuZ2VkKHByZXZpb3VzLCBuZXh0KWAgdG8gZW5zdXJlXG4gICAgICAgICAqIHByb3BlciBmdW5jdGlvbmluZyBvZiBgRm9ybUFzc29jaWF0ZWRgXG4gICAgICAgICAqL1xuICAgICAgICB2YWx1ZUNoYW5nZWQocHJldmlvdXMsIG5leHQpIHtcbiAgICAgICAgICAgIHRoaXMuZGlydHlWYWx1ZSA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm94eS52YWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICB0aGlzLnNldEZvcm1WYWx1ZSh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50VmFsdWVDaGFuZ2VkKCkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuY3VycmVudFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnZva2VkIHdoZW4gdGhlIGBpbml0aWFsVmFsdWVgIHByb3BlcnR5IGNoYW5nZXNcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHByZXZpb3VzIC0gdGhlIHByZXZpb3VzIHZhbHVlXG4gICAgICAgICAqIEBwYXJhbSBuZXh0IC0gdGhlIG5ldyB2YWx1ZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBJZiBlbGVtZW50cyBleHRlbmRpbmcgYEZvcm1Bc3NvY2lhdGVkYCBpbXBsZW1lbnQgYSBgaW5pdGlhbFZhbHVlQ2hhbmdlZGAgbWV0aG9kXG4gICAgICAgICAqIFRoZXkgbXVzdCBiZSBzdXJlIHRvIGludm9rZSBgc3VwZXIuaW5pdGlhbFZhbHVlQ2hhbmdlZChwcmV2aW91cywgbmV4dClgIHRvIGVuc3VyZVxuICAgICAgICAgKiBwcm9wZXIgZnVuY3Rpb25pbmcgb2YgYEZvcm1Bc3NvY2lhdGVkYFxuICAgICAgICAgKi9cbiAgICAgICAgaW5pdGlhbFZhbHVlQ2hhbmdlZChwcmV2aW91cywgbmV4dCkge1xuICAgICAgICAgICAgLy8gSWYgdGhlIHZhbHVlIGlzIGNsZWFuIGFuZCB0aGUgY29tcG9uZW50IGlzIGNvbm5lY3RlZCB0byB0aGUgRE9NXG4gICAgICAgICAgICAvLyB0aGVuIHNldCB2YWx1ZSBlcXVhbCB0byB0aGUgYXR0cmlidXRlIHZhbHVlLlxuICAgICAgICAgICAgaWYgKCF0aGlzLmRpcnR5VmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5pbml0aWFsVmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXJ0eVZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEludm9rZWQgd2hlbiB0aGUgYGRpc2FibGVkYCBwcm9wZXJ0eSBjaGFuZ2VzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBwcmV2aW91cyAtIHRoZSBwcmV2aW91cyB2YWx1ZVxuICAgICAgICAgKiBAcGFyYW0gbmV4dCAtIHRoZSBuZXcgdmFsdWVcbiAgICAgICAgICpcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSWYgZWxlbWVudHMgZXh0ZW5kaW5nIGBGb3JtQXNzb2NpYXRlZGAgaW1wbGVtZW50IGEgYGRpc2FibGVkQ2hhbmdlZGAgbWV0aG9kXG4gICAgICAgICAqIFRoZXkgbXVzdCBiZSBzdXJlIHRvIGludm9rZSBgc3VwZXIuZGlzYWJsZWRDaGFuZ2VkKHByZXZpb3VzLCBuZXh0KWAgdG8gZW5zdXJlXG4gICAgICAgICAqIHByb3BlciBmdW5jdGlvbmluZyBvZiBgRm9ybUFzc29jaWF0ZWRgXG4gICAgICAgICAqL1xuICAgICAgICBkaXNhYmxlZENoYW5nZWQocHJldmlvdXMsIG5leHQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3h5LmRpc2FibGVkID0gdGhpcy5kaXNhYmxlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIERPTS5xdWV1ZVVwZGF0ZSgoKSA9PiB0aGlzLmNsYXNzTGlzdC50b2dnbGUoXCJkaXNhYmxlZFwiLCB0aGlzLmRpc2FibGVkKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEludm9rZWQgd2hlbiB0aGUgYG5hbWVgIHByb3BlcnR5IGNoYW5nZXNcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHByZXZpb3VzIC0gdGhlIHByZXZpb3VzIHZhbHVlXG4gICAgICAgICAqIEBwYXJhbSBuZXh0IC0gdGhlIG5ldyB2YWx1ZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBJZiBlbGVtZW50cyBleHRlbmRpbmcgYEZvcm1Bc3NvY2lhdGVkYCBpbXBsZW1lbnQgYSBgbmFtZUNoYW5nZWRgIG1ldGhvZFxuICAgICAgICAgKiBUaGV5IG11c3QgYmUgc3VyZSB0byBpbnZva2UgYHN1cGVyLm5hbWVDaGFuZ2VkKHByZXZpb3VzLCBuZXh0KWAgdG8gZW5zdXJlXG4gICAgICAgICAqIHByb3BlciBmdW5jdGlvbmluZyBvZiBgRm9ybUFzc29jaWF0ZWRgXG4gICAgICAgICAqL1xuICAgICAgICBuYW1lQ2hhbmdlZChwcmV2aW91cywgbmV4dCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJveHkubmFtZSA9IHRoaXMubmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogSW52b2tlZCB3aGVuIHRoZSBgcmVxdWlyZWRgIHByb3BlcnR5IGNoYW5nZXNcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHByZXZpb3VzIC0gdGhlIHByZXZpb3VzIHZhbHVlXG4gICAgICAgICAqIEBwYXJhbSBuZXh0IC0gdGhlIG5ldyB2YWx1ZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBJZiBlbGVtZW50cyBleHRlbmRpbmcgYEZvcm1Bc3NvY2lhdGVkYCBpbXBsZW1lbnQgYSBgcmVxdWlyZWRDaGFuZ2VkYCBtZXRob2RcbiAgICAgICAgICogVGhleSBtdXN0IGJlIHN1cmUgdG8gaW52b2tlIGBzdXBlci5yZXF1aXJlZENoYW5nZWQocHJldmlvdXMsIG5leHQpYCB0byBlbnN1cmVcbiAgICAgICAgICogcHJvcGVyIGZ1bmN0aW9uaW5nIG9mIGBGb3JtQXNzb2NpYXRlZGBcbiAgICAgICAgICovXG4gICAgICAgIHJlcXVpcmVkQ2hhbmdlZChwcmV2LCBuZXh0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm94eS5yZXF1aXJlZCA9IHRoaXMucmVxdWlyZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBET00ucXVldWVVcGRhdGUoKCkgPT4gdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwicmVxdWlyZWRcIiwgdGhpcy5yZXF1aXJlZCkpO1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZWxlbWVudCBpbnRlcm5hbHMgb2JqZWN0LiBXaWxsIG9ubHkgZXhpc3RcbiAgICAgICAgICogaW4gYnJvd3NlcnMgc3VwcG9ydGluZyB0aGUgYXR0YWNoSW50ZXJuYWxzIEFQSVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0IGVsZW1lbnRJbnRlcm5hbHMoKSB7XG4gICAgICAgICAgICBpZiAoIXN1cHBvcnRzRWxlbWVudEludGVybmFscykge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGludGVybmFscyA9IEludGVybmFsc01hcC5nZXQodGhpcyk7XG4gICAgICAgICAgICBpZiAoIWludGVybmFscykge1xuICAgICAgICAgICAgICAgIGludGVybmFscyA9IHRoaXMuYXR0YWNoSW50ZXJuYWxzKCk7XG4gICAgICAgICAgICAgICAgSW50ZXJuYWxzTWFwLnNldCh0aGlzLCBpbnRlcm5hbHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGludGVybmFscztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCB0aGlzLl9rZXlwcmVzc0hhbmRsZXIpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuaW5pdGlhbFZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlydHlWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmVsZW1lbnRJbnRlcm5hbHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmF0dGFjaFByb3h5KCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZm9ybSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsIHRoaXMuZm9ybVJlc2V0Q2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgICAgICB0aGlzLnByb3h5RXZlbnRzVG9CbG9jay5mb3JFYWNoKG5hbWUgPT4gdGhpcy5wcm94eS5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIHRoaXMuc3RvcFByb3BhZ2F0aW9uKSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZWxlbWVudEludGVybmFscyAmJiB0aGlzLmZvcm0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsIHRoaXMuZm9ybVJlc2V0Q2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm4gdGhlIGN1cnJlbnQgdmFsaWRpdHkgb2YgdGhlIGVsZW1lbnQuXG4gICAgICAgICAqL1xuICAgICAgICBjaGVja1ZhbGlkaXR5KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudEludGVybmFsc1xuICAgICAgICAgICAgICAgID8gdGhpcy5lbGVtZW50SW50ZXJuYWxzLmNoZWNrVmFsaWRpdHkoKVxuICAgICAgICAgICAgICAgIDogdGhpcy5wcm94eS5jaGVja1ZhbGlkaXR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybiB0aGUgY3VycmVudCB2YWxpZGl0eSBvZiB0aGUgZWxlbWVudC5cbiAgICAgICAgICogSWYgZmFsc2UsIGZpcmVzIGFuIGludmFsaWQgZXZlbnQgYXQgdGhlIGVsZW1lbnQuXG4gICAgICAgICAqL1xuICAgICAgICByZXBvcnRWYWxpZGl0eSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRJbnRlcm5hbHNcbiAgICAgICAgICAgICAgICA/IHRoaXMuZWxlbWVudEludGVybmFscy5yZXBvcnRWYWxpZGl0eSgpXG4gICAgICAgICAgICAgICAgOiB0aGlzLnByb3h5LnJlcG9ydFZhbGlkaXR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0aGUgdmFsaWRpdHkgb2YgdGhlIGNvbnRyb2wuIEluIGNhc2VzIHdoZW4gdGhlIGVsZW1lbnRJbnRlcm5hbHMgb2JqZWN0IGlzIG5vdFxuICAgICAgICAgKiBhdmFpbGFibGUgKGFuZCB0aGUgcHJveHkgZWxlbWVudCBpcyB1c2VkIHRvIHJlcG9ydCB2YWxpZGl0eSksIHRoaXMgZnVuY3Rpb24gd2lsbFxuICAgICAgICAgKiBkbyBub3RoaW5nIHVubGVzcyBhIG1lc3NhZ2UgaXMgcHJvdmlkZWQsIGF0IHdoaWNoIHBvaW50IHRoZSBzZXRDdXN0b21WYWxpZGl0eSBtZXRob2RcbiAgICAgICAgICogb2YgdGhlIHByb3h5IGVsZW1lbnQgd2lsbCBiZSBpbnZva2VkIHdpdGggdGhlIHByb3ZpZGVkIG1lc3NhZ2UuXG4gICAgICAgICAqIEBwYXJhbSBmbGFncyAtIFZhbGlkaXR5IGZsYWdzXG4gICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gT3B0aW9uYWwgbWVzc2FnZSB0byBzdXBwbHlcbiAgICAgICAgICogQHBhcmFtIGFuY2hvciAtIE9wdGlvbmFsIGVsZW1lbnQgdXNlZCBieSBVQSB0byBkaXNwbGF5IGFuIGludGVyYWN0aXZlIHZhbGlkYXRpb24gVUlcbiAgICAgICAgICovXG4gICAgICAgIHNldFZhbGlkaXR5KGZsYWdzLCBtZXNzYWdlLCBhbmNob3IpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnRJbnRlcm5hbHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRJbnRlcm5hbHMuc2V0VmFsaWRpdHkoZmxhZ3MsIG1lc3NhZ2UsIGFuY2hvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHRoaXMucHJveHkuc2V0Q3VzdG9tVmFsaWRpdHkobWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEludm9rZWQgd2hlbiBhIGNvbm5lY3RlZCBjb21wb25lbnQncyBmb3JtIG9yIGZpZWxkc2V0IGhhcyBpdHMgZGlzYWJsZWRcbiAgICAgICAgICogc3RhdGUgY2hhbmdlZC5cbiAgICAgICAgICogQHBhcmFtIGRpc2FibGVkIC0gdGhlIGRpc2FibGVkIHZhbHVlIG9mIHRoZSBmb3JtIC8gZmllbGRzZXRcbiAgICAgICAgICovXG4gICAgICAgIGZvcm1EaXNhYmxlZENhbGxiYWNrKGRpc2FibGVkKSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVkID0gZGlzYWJsZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZm9ybVJlc2V0Q2FsbGJhY2soKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5pbml0aWFsVmFsdWU7XG4gICAgICAgICAgICB0aGlzLmRpcnR5VmFsdWUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQXR0YWNoIHRoZSBwcm94eSBlbGVtZW50IHRvIHRoZSBET01cbiAgICAgICAgICovXG4gICAgICAgIGF0dGFjaFByb3h5KCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByb3h5SW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3h5SW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMucHJveHkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIHRoaXMucHJveHlFdmVudHNUb0Jsb2NrLmZvckVhY2gobmFtZSA9PiB0aGlzLnByb3h5LmFkZEV2ZW50TGlzdGVuZXIobmFtZSwgdGhpcy5zdG9wUHJvcGFnYXRpb24pKTtcbiAgICAgICAgICAgICAgICAvLyBUaGVzZSBhcmUgdHlwaWNhbGx5IG1hcHBlZCB0byB0aGUgcHJveHkgZHVyaW5nXG4gICAgICAgICAgICAgICAgLy8gcHJvcGVydHkgY2hhbmdlIGNhbGxiYWNrcywgYnV0IGR1cmluZyBpbml0aWFsaXphdGlvblxuICAgICAgICAgICAgICAgIC8vIG9uIHRoZSBpbml0aWFsIGNhbGwgb2YgdGhlIGNhbGxiYWNrLCB0aGUgcHJveHkgaXNcbiAgICAgICAgICAgICAgICAvLyBzdGlsbCB1bmRlZmluZWQuIFdlIHNob3VsZCBmaW5kIGEgYmV0dGVyIHdheSB0byBhZGRyZXNzIHRoaXMuXG4gICAgICAgICAgICAgICAgdGhpcy5wcm94eS5kaXNhYmxlZCA9IHRoaXMuZGlzYWJsZWQ7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm94eS5yZXF1aXJlZCA9IHRoaXMucmVxdWlyZWQ7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm94eS5uYW1lID0gdGhpcy5uYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMudmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm94eS52YWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucHJveHkuc2V0QXR0cmlidXRlKFwic2xvdFwiLCBwcm94eVNsb3ROYW1lKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3h5U2xvdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzbG90XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJveHlTbG90LnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgcHJveHlTbG90TmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAoX2EgPSB0aGlzLnNoYWRvd1Jvb3QpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hcHBlbmRDaGlsZCh0aGlzLnByb3h5U2xvdCk7XG4gICAgICAgICAgICB0aGlzLmFwcGVuZENoaWxkKHRoaXMucHJveHkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRhY2ggdGhlIHByb3h5IGVsZW1lbnQgZnJvbSB0aGUgRE9NXG4gICAgICAgICAqL1xuICAgICAgICBkZXRhY2hQcm94eSgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2hpbGQodGhpcy5wcm94eSk7XG4gICAgICAgICAgICAoX2EgPSB0aGlzLnNoYWRvd1Jvb3QpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yZW1vdmVDaGlsZCh0aGlzLnByb3h5U2xvdCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIHtAaW5oZXJpdERvYyAoRm9ybUFzc29jaWF0ZWQ6aW50ZXJmYWNlKS52YWxpZGF0ZX0gKi9cbiAgICAgICAgdmFsaWRhdGUoYW5jaG9yKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWYWxpZGl0eSh0aGlzLnByb3h5LnZhbGlkaXR5LCB0aGlzLnByb3h5LnZhbGlkYXRpb25NZXNzYWdlLCBhbmNob3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBc3NvY2lhdGVzIHRoZSBwcm92aWRlZCB2YWx1ZSAoYW5kIG9wdGlvbmFsIHN0YXRlKSB3aXRoIHRoZSBwYXJlbnQgZm9ybS5cbiAgICAgICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHNldFxuICAgICAgICAgKiBAcGFyYW0gc3RhdGUgLSBUaGUgc3RhdGUgb2JqZWN0IHByb3ZpZGVkIHRvIGR1cmluZyBzZXNzaW9uIHJlc3RvcmVzIGFuZCB3aGVuIGF1dG9maWxsaW5nLlxuICAgICAgICAgKi9cbiAgICAgICAgc2V0Rm9ybVZhbHVlKHZhbHVlLCBzdGF0ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudEludGVybmFscykge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudEludGVybmFscy5zZXRGb3JtVmFsdWUodmFsdWUsIHN0YXRlIHx8IHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBfa2V5cHJlc3NIYW5kbGVyKGUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICAgICAgICBjYXNlIGtleUVudGVyOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5mb3JtIGluc3RhbmNlb2YgSFRNTEZvcm1FbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbXBsaWNpdCBzdWJtaXNzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0QnV0dG9uID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoXCJbdHlwZT1zdWJtaXRdXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdEJ1dHRvbiA9PT0gbnVsbCB8fCBkZWZhdWx0QnV0dG9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkZWZhdWx0QnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVzZWQgdG8gc3RvcCBwcm9wYWdhdGlvbiBvZiBwcm94eSBlbGVtZW50IGV2ZW50c1xuICAgICAgICAgKiBAcGFyYW0gZSAtIEV2ZW50IG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgc3RvcFByb3BhZ2F0aW9uKGUpIHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGF0dHIoeyBtb2RlOiBcImJvb2xlYW5cIiB9KShDLnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiKTtcbiAgICBhdHRyKHsgbW9kZTogXCJmcm9tVmlld1wiLCBhdHRyaWJ1dGU6IFwidmFsdWVcIiB9KShDLnByb3RvdHlwZSwgXCJpbml0aWFsVmFsdWVcIik7XG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJjdXJyZW50LXZhbHVlXCIgfSkoQy5wcm90b3R5cGUsIFwiY3VycmVudFZhbHVlXCIpO1xuICAgIGF0dHIoQy5wcm90b3R5cGUsIFwibmFtZVwiKTtcbiAgICBhdHRyKHsgbW9kZTogXCJib29sZWFuXCIgfSkoQy5wcm90b3R5cGUsIFwicmVxdWlyZWRcIik7XG4gICAgb2JzZXJ2YWJsZShDLnByb3RvdHlwZSwgXCJ2YWx1ZVwiKTtcbiAgICByZXR1cm4gQztcbn1cbi8qKlxuICogQGFscGhhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBDaGVja2FibGVGb3JtQXNzb2NpYXRlZChCYXNlQ3Rvcikge1xuICAgIGNsYXNzIEMgZXh0ZW5kcyBGb3JtQXNzb2NpYXRlZChCYXNlQ3Rvcikge1xuICAgIH1cbiAgICBjbGFzcyBEIGV4dGVuZHMgQyB7XG4gICAgICAgIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIHN1cGVyKGFyZ3MpO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUcmFja3Mgd2hldGhlciB0aGUgXCJjaGVja2VkXCIgcHJvcGVydHkgaGFzIGJlZW4gY2hhbmdlZC5cbiAgICAgICAgICAgICAqIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIHByb3ZpZGUgY29uc2lzdGVudCBiZWhhdmlvciB3aXRoXG4gICAgICAgICAgICAgKiBub3JtYWwgaW5wdXQgY2hlY2tib3hlc1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0aGlzLmRpcnR5Q2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQcm92aWRlcyB0aGUgZGVmYXVsdCBjaGVja2VkbmVzcyBvZiB0aGUgaW5wdXQgZWxlbWVudFxuICAgICAgICAgICAgICogUGFzc2VkIGRvd24gdG8gcHJveHlcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgICAgICogSFRNTCBBdHRyaWJ1dGU6IGNoZWNrZWRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5jaGVja2VkQXR0cmlidXRlID0gZmFsc2U7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoZSBjaGVja2VkIHN0YXRlIG9mIHRoZSBjb250cm9sLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAvLyBSZS1pbml0aWFsaXplIGRpcnR5Q2hlY2tlZCBiZWNhdXNlIGluaXRpYWxpemF0aW9uIG9mIG90aGVyIHZhbHVlc1xuICAgICAgICAgICAgLy8gY2F1c2VzIGl0IHRvIGJlY29tZSB0cnVlXG4gICAgICAgICAgICB0aGlzLmRpcnR5Q2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNoZWNrZWRBdHRyaWJ1dGVDaGFuZ2VkKCkge1xuICAgICAgICAgICAgdGhpcy5kZWZhdWx0Q2hlY2tlZCA9IHRoaXMuY2hlY2tlZEF0dHJpYnV0ZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICBkZWZhdWx0Q2hlY2tlZENoYW5nZWQoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZGlydHlDaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgLy8gU2V0dGluZyB0aGlzLmNoZWNrZWQgd2lsbCBjYXVzZSB1cyB0byBlbnRlciBhIGRpcnR5IHN0YXRlLFxuICAgICAgICAgICAgICAgIC8vIGJ1dCBpZiB3ZSBhcmUgY2xlYW4gd2hlbiBkZWZhdWx0Q2hlY2tlZCBpcyBjaGFuZ2VkLCB3ZSB3YW50IHRvIHN0YXlcbiAgICAgICAgICAgICAgICAvLyBpbiBhIGNsZWFuIHN0YXRlLCBzbyByZXNldCB0aGlzLmRpcnR5Q2hlY2tlZFxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZCA9IHRoaXMuZGVmYXVsdENoZWNrZWQ7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXJ0eUNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjaGVja2VkQ2hhbmdlZChwcmV2LCBuZXh0KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZGlydHlDaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXJ0eUNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jdXJyZW50Q2hlY2tlZCA9IHRoaXMuY2hlY2tlZDtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRm9ybSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm94eS5jaGVja2VkID0gdGhpcy5jaGVja2VkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByZXYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoXCJjaGFuZ2VcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudENoZWNrZWRDaGFuZ2VkKHByZXYsIG5leHQpIHtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tlZCA9IHRoaXMuY3VycmVudENoZWNrZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlRm9ybSgpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5jaGVja2VkID8gdGhpcy52YWx1ZSA6IG51bGw7XG4gICAgICAgICAgICB0aGlzLnNldEZvcm1WYWx1ZSh2YWx1ZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRm9ybSgpO1xuICAgICAgICB9XG4gICAgICAgIGZvcm1SZXNldENhbGxiYWNrKCkge1xuICAgICAgICAgICAgc3VwZXIuZm9ybVJlc2V0Q2FsbGJhY2soKTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tlZCA9ICEhdGhpcy5jaGVja2VkQXR0cmlidXRlO1xuICAgICAgICAgICAgdGhpcy5kaXJ0eUNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImNoZWNrZWRcIiwgbW9kZTogXCJib29sZWFuXCIgfSkoRC5wcm90b3R5cGUsIFwiY2hlY2tlZEF0dHJpYnV0ZVwiKTtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImN1cnJlbnQtY2hlY2tlZFwiLCBjb252ZXJ0ZXI6IGJvb2xlYW5Db252ZXJ0ZXIgfSkoRC5wcm90b3R5cGUsIFwiY3VycmVudENoZWNrZWRcIik7XG4gICAgb2JzZXJ2YWJsZShELnByb3RvdHlwZSwgXCJkZWZhdWx0Q2hlY2tlZFwiKTtcbiAgICBvYnNlcnZhYmxlKEQucHJvdG90eXBlLCBcImNoZWNrZWRcIik7XG4gICAgcmV0dXJuIEQ7XG59XG4iLCJpbXBvcnQgeyBGb3JtQXNzb2NpYXRlZCB9IGZyb20gXCIuLi9mb3JtLWFzc29jaWF0ZWQvZm9ybS1hc3NvY2lhdGVkLmpzXCI7XG5pbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCB9IGZyb20gXCIuLi9mb3VuZGF0aW9uLWVsZW1lbnQvZm91bmRhdGlvbi1lbGVtZW50LmpzXCI7XG5jbGFzcyBfQnV0dG9uIGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xufVxuLyoqXG4gKiBBIGZvcm0tYXNzb2NpYXRlZCBiYXNlIGNsYXNzIGZvciB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uIyhCdXR0b246Y2xhc3MpfSBjb21wb25lbnQuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBGb3JtQXNzb2NpYXRlZEJ1dHRvbiBleHRlbmRzIEZvcm1Bc3NvY2lhdGVkKF9CdXR0b24pIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5wcm94eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBvYnNlcnZhYmxlIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcywgU3RhcnRFbmQsIH0gZnJvbSBcIi4uL3BhdHRlcm5zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBhcHBseU1peGlucyB9IGZyb20gXCIuLi91dGlsaXRpZXMvYXBwbHktbWl4aW5zLmpzXCI7XG5pbXBvcnQgeyBGb3JtQXNzb2NpYXRlZEJ1dHRvbiB9IGZyb20gXCIuL2J1dHRvbi5mb3JtLWFzc29jaWF0ZWQuanNcIjtcbi8qKlxuICogQSBCdXR0b24gQ3VzdG9tIEhUTUwgRWxlbWVudC5cbiAqIEJhc2VkIGxhcmdlbHkgb24gdGhlIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0VsZW1lbnQvYnV0dG9uIHwgPGJ1dHRvbj4gZWxlbWVudCB9LlxuICpcbiAqIEBzbG90IHN0YXJ0IC0gQ29udGVudCB3aGljaCBjYW4gYmUgcHJvdmlkZWQgYmVmb3JlIHRoZSBidXR0b24gY29udGVudFxuICogQHNsb3QgZW5kIC0gQ29udGVudCB3aGljaCBjYW4gYmUgcHJvdmlkZWQgYWZ0ZXIgdGhlIGJ1dHRvbiBjb250ZW50XG4gKiBAc2xvdCAtIFRoZSBkZWZhdWx0IHNsb3QgZm9yIGJ1dHRvbiBjb250ZW50XG4gKiBAY3NzcGFydCBjb250cm9sIC0gVGhlIGJ1dHRvbiBlbGVtZW50XG4gKiBAY3NzcGFydCBjb250ZW50IC0gVGhlIGVsZW1lbnQgd3JhcHBpbmcgYnV0dG9uIGNvbnRlbnRcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBCdXR0b24gZXh0ZW5kcyBGb3JtQXNzb2NpYXRlZEJ1dHRvbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcmV2ZW50IGV2ZW50cyB0byBwcm9wYWdhdGUgaWYgZGlzYWJsZWQgYW5kIGhhcyBubyBzbG90dGVkIGNvbnRlbnQgd3JhcHBlZCBpbiBIVE1MIGVsZW1lbnRzXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVDbGljayA9IChlKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCAmJiAoKF9hID0gdGhpcy5kZWZhdWx0U2xvdHRlZENvbnRlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sZW5ndGgpIDw9IDEpIHtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogU3VibWl0cyB0aGUgcGFyZW50IGZvcm1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlU3VibWlzc2lvbiA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5mb3JtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYXR0YWNoZWQgPSB0aGlzLnByb3h5LmlzQ29ubmVjdGVkO1xuICAgICAgICAgICAgaWYgKCFhdHRhY2hlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXR0YWNoUHJveHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEJyb3dzZXIgc3VwcG9ydCBmb3IgcmVxdWVzdFN1Ym1pdCBpcyBub3QgY29tcHJlaGVuc2l2ZVxuICAgICAgICAgICAgLy8gc28gY2xpY2sgdGhlIHByb3h5IGlmIGl0IGlzbid0IHN1cHBvcnRlZFxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuZm9ybS5yZXF1ZXN0U3VibWl0ID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICAgICAgICA/IHRoaXMuZm9ybS5yZXF1ZXN0U3VibWl0KHRoaXMucHJveHkpXG4gICAgICAgICAgICAgICAgOiB0aGlzLnByb3h5LmNsaWNrKCk7XG4gICAgICAgICAgICBpZiAoIWF0dGFjaGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXRhY2hQcm94eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogUmVzZXRzIHRoZSBwYXJlbnQgZm9ybVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVGb3JtUmVzZXQgPSAoKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAoX2EgPSB0aGlzLmZvcm0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yZXNldCgpO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogT3ZlcnJpZGVzIHRoZSBmb2N1cyBjYWxsIGZvciB3aGVyZSBkZWxlZ2F0ZXNGb2N1cyBpcyB1bnN1cHBvcnRlZC5cbiAgICAgICAgICogVGhpcyBjaGVjayB3b3JrcyBmb3IgQ2hyb21lLCBFZGdlIENocm9taXVtLCBGaXJlRm94LCBhbmQgU2FmYXJpXG4gICAgICAgICAqIFJlbGV2YW50IFBSIG9uIHRoZSBGaXJlZm94IGJyb3dzZXI6IGh0dHBzOi8vcGhhYnJpY2F0b3Iuc2VydmljZXMubW96aWxsYS5jb20vRDEyMzg1OFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVVbnN1cHBvcnRlZERlbGVnYXRlc0ZvY3VzID0gKCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIGRlbGVnYXRlc0ZvY3VzIGlzIHN1cHBvcnRlZFxuICAgICAgICAgICAgaWYgKHdpbmRvdy5TaGFkb3dSb290ICYmXG4gICAgICAgICAgICAgICAgIXdpbmRvdy5TaGFkb3dSb290LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShcImRlbGVnYXRlc0ZvY3VzXCIpICYmXG4gICAgICAgICAgICAgICAgKChfYSA9IHRoaXMuJGZhc3RDb250cm9sbGVyLmRlZmluaXRpb24uc2hhZG93T3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRlbGVnYXRlc0ZvY3VzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXMgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZvcm1hY3Rpb25DaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJveHkuZm9ybUFjdGlvbiA9IHRoaXMuZm9ybWFjdGlvbjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3JtZW5jdHlwZUNoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5wcm94eS5mb3JtRW5jdHlwZSA9IHRoaXMuZm9ybWVuY3R5cGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9ybW1ldGhvZENoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5wcm94eS5mb3JtTWV0aG9kID0gdGhpcy5mb3JtbWV0aG9kO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvcm1ub3ZhbGlkYXRlQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5LmZvcm1Ob1ZhbGlkYXRlID0gdGhpcy5mb3Jtbm92YWxpZGF0ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3JtdGFyZ2V0Q2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5LmZvcm1UYXJnZXQgPSB0aGlzLmZvcm10YXJnZXQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHlwZUNoYW5nZWQocHJldmlvdXMsIG5leHQpIHtcbiAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5LnR5cGUgPSB0aGlzLnR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgbmV4dCA9PT0gXCJzdWJtaXRcIiAmJiB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmhhbmRsZVN1Ym1pc3Npb24pO1xuICAgICAgICBwcmV2aW91cyA9PT0gXCJzdWJtaXRcIiAmJiB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmhhbmRsZVN1Ym1pc3Npb24pO1xuICAgICAgICBuZXh0ID09PSBcInJlc2V0XCIgJiYgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVGb3JtUmVzZXQpO1xuICAgICAgICBwcmV2aW91cyA9PT0gXCJyZXNldFwiICYmIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaGFuZGxlRm9ybVJlc2V0KTtcbiAgICB9XG4gICAgLyoqIHtAaW5oZXJpdERvYyAoRm9ybUFzc29jaWF0ZWQ6aW50ZXJmYWNlKS52YWxpZGF0ZX0gKi9cbiAgICB2YWxpZGF0ZSgpIHtcbiAgICAgICAgc3VwZXIudmFsaWRhdGUodGhpcy5jb250cm9sKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5wcm94eS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIHRoaXMudHlwZSk7XG4gICAgICAgIHRoaXMuaGFuZGxlVW5zdXBwb3J0ZWREZWxlZ2F0ZXNGb2N1cygpO1xuICAgICAgICBjb25zdCBlbGVtZW50cyA9IEFycmF5LmZyb20oKF9hID0gdGhpcy5jb250cm9sKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2hpbGRyZW4pO1xuICAgICAgICBpZiAoZWxlbWVudHMpIHtcbiAgICAgICAgICAgIGVsZW1lbnRzLmZvckVhY2goKHNwYW4pID0+IHtcbiAgICAgICAgICAgICAgICBzcGFuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmhhbmRsZUNsaWNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gQXJyYXkuZnJvbSgoX2EgPSB0aGlzLmNvbnRyb2wpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jaGlsZHJlbik7XG4gICAgICAgIGlmIChlbGVtZW50cykge1xuICAgICAgICAgICAgZWxlbWVudHMuZm9yRWFjaCgoc3BhbikgPT4ge1xuICAgICAgICAgICAgICAgIHNwYW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaGFuZGxlQ2xpY2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIEJ1dHRvbi5wcm90b3R5cGUsIFwiYXV0b2ZvY3VzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcImZvcm1cIiB9KVxuXSwgQnV0dG9uLnByb3RvdHlwZSwgXCJmb3JtSWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIEJ1dHRvbi5wcm90b3R5cGUsIFwiZm9ybWFjdGlvblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgQnV0dG9uLnByb3RvdHlwZSwgXCJmb3JtZW5jdHlwZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgQnV0dG9uLnByb3RvdHlwZSwgXCJmb3JtbWV0aG9kXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIEJ1dHRvbi5wcm90b3R5cGUsIFwiZm9ybW5vdmFsaWRhdGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIEJ1dHRvbi5wcm90b3R5cGUsIFwiZm9ybXRhcmdldFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgQnV0dG9uLnByb3RvdHlwZSwgXCJ0eXBlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBCdXR0b24ucHJvdG90eXBlLCBcImRlZmF1bHRTbG90dGVkQ29udGVudFwiLCB2b2lkIDApO1xuLyoqXG4gKiBJbmNsdWRlcyBBUklBIHN0YXRlcyBhbmQgcHJvcGVydGllcyByZWxhdGluZyB0byB0aGUgQVJJQSBidXR0b24gcm9sZVxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIERlbGVnYXRlc0FSSUFCdXR0b24ge1xufVxuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhcmlhLWV4cGFuZGVkXCIgfSlcbl0sIERlbGVnYXRlc0FSSUFCdXR0b24ucHJvdG90eXBlLCBcImFyaWFFeHBhbmRlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJhcmlhLXByZXNzZWRcIiB9KVxuXSwgRGVsZWdhdGVzQVJJQUJ1dHRvbi5wcm90b3R5cGUsIFwiYXJpYVByZXNzZWRcIiwgdm9pZCAwKTtcbmFwcGx5TWl4aW5zKERlbGVnYXRlc0FSSUFCdXR0b24sIEFSSUFHbG9iYWxTdGF0ZXNBbmRQcm9wZXJ0aWVzKTtcbmFwcGx5TWl4aW5zKEJ1dHRvbiwgU3RhcnRFbmQsIERlbGVnYXRlc0FSSUFCdXR0b24pO1xuIiwiaW1wb3J0IHsgaHRtbCwgc2xvdHRlZCB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jKENoZWNrYm94OmNsYXNzKX0gY29tcG9uZW50LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgY2hlY2tib3hUZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBodG1sIGBcbiAgICA8dGVtcGxhdGVcbiAgICAgICAgcm9sZT1cImNoZWNrYm94XCJcbiAgICAgICAgYXJpYS1jaGVja2VkPVwiJHt4ID0+IHguY2hlY2tlZH1cIlxuICAgICAgICBhcmlhLXJlcXVpcmVkPVwiJHt4ID0+IHgucmVxdWlyZWR9XCJcbiAgICAgICAgYXJpYS1kaXNhYmxlZD1cIiR7eCA9PiB4LmRpc2FibGVkfVwiXG4gICAgICAgIGFyaWEtcmVhZG9ubHk9XCIke3ggPT4geC5yZWFkT25seX1cIlxuICAgICAgICB0YWJpbmRleD1cIiR7eCA9PiAoeC5kaXNhYmxlZCA/IG51bGwgOiAwKX1cIlxuICAgICAgICBAa2V5cHJlc3M9XCIkeyh4LCBjKSA9PiB4LmtleXByZXNzSGFuZGxlcihjLmV2ZW50KX1cIlxuICAgICAgICBAY2xpY2s9XCIkeyh4LCBjKSA9PiB4LmNsaWNrSGFuZGxlcihjLmV2ZW50KX1cIlxuICAgICAgICBjbGFzcz1cIiR7eCA9PiAoeC5yZWFkT25seSA/IFwicmVhZG9ubHlcIiA6IFwiXCIpfSAke3ggPT4geC5jaGVja2VkID8gXCJjaGVja2VkXCIgOiBcIlwifSAke3ggPT4gKHguaW5kZXRlcm1pbmF0ZSA/IFwiaW5kZXRlcm1pbmF0ZVwiIDogXCJcIil9XCJcbiAgICA+XG4gICAgICAgIDxkaXYgcGFydD1cImNvbnRyb2xcIiBjbGFzcz1cImNvbnRyb2xcIj5cbiAgICAgICAgICAgIDxzbG90IG5hbWU9XCJjaGVja2VkLWluZGljYXRvclwiPlxuICAgICAgICAgICAgICAgICR7ZGVmaW5pdGlvbi5jaGVja2VkSW5kaWNhdG9yIHx8IFwiXCJ9XG4gICAgICAgICAgICA8L3Nsb3Q+XG4gICAgICAgICAgICA8c2xvdCBuYW1lPVwiaW5kZXRlcm1pbmF0ZS1pbmRpY2F0b3JcIj5cbiAgICAgICAgICAgICAgICAke2RlZmluaXRpb24uaW5kZXRlcm1pbmF0ZUluZGljYXRvciB8fCBcIlwifVxuICAgICAgICAgICAgPC9zbG90PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGxhYmVsXG4gICAgICAgICAgICBwYXJ0PVwibGFiZWxcIlxuICAgICAgICAgICAgY2xhc3M9XCIke3ggPT4geC5kZWZhdWx0U2xvdHRlZE5vZGVzICYmIHguZGVmYXVsdFNsb3R0ZWROb2Rlcy5sZW5ndGhcbiAgICA/IFwibGFiZWxcIlxuICAgIDogXCJsYWJlbCBsYWJlbF9faGlkZGVuXCJ9XCJcbiAgICAgICAgPlxuICAgICAgICAgICAgPHNsb3QgJHtzbG90dGVkKFwiZGVmYXVsdFNsb3R0ZWROb2Rlc1wiKX0+PC9zbG90PlxuICAgICAgICA8L2xhYmVsPlxuICAgIDwvdGVtcGxhdGU+XG5gO1xuIiwiaW1wb3J0IHsgQ2hlY2thYmxlRm9ybUFzc29jaWF0ZWQgfSBmcm9tIFwiLi4vZm9ybS1hc3NvY2lhdGVkL2Zvcm0tYXNzb2NpYXRlZC5qc1wiO1xuaW1wb3J0IHsgRm91bmRhdGlvbkVsZW1lbnQgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuY2xhc3MgX0NoZWNrYm94IGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xufVxuLyoqXG4gKiBBIGZvcm0tYXNzb2NpYXRlZCBiYXNlIGNsYXNzIGZvciB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uIyhDaGVja2JveDpjbGFzcyl9IGNvbXBvbmVudC5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIEZvcm1Bc3NvY2lhdGVkQ2hlY2tib3ggZXh0ZW5kcyBDaGVja2FibGVGb3JtQXNzb2NpYXRlZChfQ2hlY2tib3gpIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5wcm94eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBvYnNlcnZhYmxlIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBrZXlTcGFjZSB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3Qtd2ViLXV0aWxpdGllc1wiO1xuaW1wb3J0IHsgRm9ybUFzc29jaWF0ZWRDaGVja2JveCB9IGZyb20gXCIuL2NoZWNrYm94LmZvcm0tYXNzb2NpYXRlZC5qc1wiO1xuLyoqXG4gKiBBIENoZWNrYm94IEN1c3RvbSBIVE1MIEVsZW1lbnQuXG4gKiBJbXBsZW1lbnRzIHRoZSB7QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLTEuMS8jY2hlY2tib3ggfCBBUklBIGNoZWNrYm94IH0uXG4gKlxuICogQHNsb3QgY2hlY2tlZC1pbmRpY2F0b3IgLSBUaGUgY2hlY2tlZCBpbmRpY2F0b3JcbiAqIEBzbG90IGluZGV0ZXJtaW5hdGUtaW5kaWNhdG9yIC0gVGhlIGluZGV0ZXJtaW5hdGUgaW5kaWNhdG9yXG4gKiBAc2xvdCAtIFRoZSBkZWZhdWx0IHNsb3QgZm9yIHRoZSBsYWJlbFxuICogQGNzc3BhcnQgY29udHJvbCAtIFRoZSBlbGVtZW50IHJlcHJlc2VudGluZyB0aGUgdmlzdWFsIGNoZWNrYm94IGNvbnRyb2xcbiAqIEBjc3NwYXJ0IGxhYmVsIC0gVGhlIGxhYmVsXG4gKiBAZmlyZXMgY2hhbmdlIC0gRW1pdHMgYSBjdXN0b20gY2hhbmdlIGV2ZW50IHdoZW4gdGhlIGNoZWNrZWQgc3RhdGUgY2hhbmdlc1xuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIENoZWNrYm94IGV4dGVuZHMgRm9ybUFzc29jaWF0ZWRDaGVja2JveCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZWxlbWVudCdzIHZhbHVlIHRvIGJlIGluY2x1ZGVkIGluIGZvcm0gc3VibWlzc2lvbiB3aGVuIGNoZWNrZWQuXG4gICAgICAgICAqIERlZmF1bHQgdG8gXCJvblwiIHRvIHJlYWNoIHBhcml0eSB3aXRoIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXVxuICAgICAgICAgKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5pdGlhbFZhbHVlID0gXCJvblwiO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGluZGV0ZXJtaW5hdGUgc3RhdGUgb2YgdGhlIGNvbnRyb2xcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5kZXRlcm1pbmF0ZSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmtleXByZXNzSGFuZGxlciA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkT25seSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICAgICAgICBjYXNlIGtleVNwYWNlOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbmRldGVybWluYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV0ZXJtaW5hdGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWQgPSAhdGhpcy5jaGVja2VkO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbGlja0hhbmRsZXIgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkICYmICF0aGlzLnJlYWRPbmx5KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXRlcm1pbmF0ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV0ZXJtaW5hdGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkID0gIXRoaXMuY2hlY2tlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wcm94eS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIik7XG4gICAgfVxuICAgIHJlYWRPbmx5Q2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5LnJlYWRPbmx5ID0gdGhpcy5yZWFkT25seTtcbiAgICAgICAgfVxuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwicmVhZG9ubHlcIiwgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIENoZWNrYm94LnByb3RvdHlwZSwgXCJyZWFkT25seVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgQ2hlY2tib3gucHJvdG90eXBlLCBcImRlZmF1bHRTbG90dGVkTm9kZXNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIENoZWNrYm94LnByb3RvdHlwZSwgXCJpbmRldGVybWluYXRlXCIsIHZvaWQgMCk7XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBvYnNlcnZhYmxlLCBPYnNlcnZhYmxlIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBpc0hUTUxFbGVtZW50IH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzXCI7XG5pbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCB9IGZyb20gXCIuLi9mb3VuZGF0aW9uLWVsZW1lbnQvZm91bmRhdGlvbi1lbGVtZW50LmpzXCI7XG5pbXBvcnQgeyBBUklBR2xvYmFsU3RhdGVzQW5kUHJvcGVydGllcyB9IGZyb20gXCIuLi9wYXR0ZXJucy9hcmlhLWdsb2JhbC5qc1wiO1xuaW1wb3J0IHsgU3RhcnRFbmQgfSBmcm9tIFwiLi4vcGF0dGVybnMvc3RhcnQtZW5kLmpzXCI7XG5pbXBvcnQgeyBhcHBseU1peGlucyB9IGZyb20gXCIuLi91dGlsaXRpZXMvYXBwbHktbWl4aW5zLmpzXCI7XG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIGVsZW1lbnQgaXMgYSB7QGxpbmsgKExpc3Rib3hPcHRpb246Y2xhc3MpfVxuICpcbiAqIEBwYXJhbSBlbGVtZW50IC0gdGhlIGVsZW1lbnQgdG8gdGVzdC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTGlzdGJveE9wdGlvbihlbCkge1xuICAgIHJldHVybiAoaXNIVE1MRWxlbWVudChlbCkgJiZcbiAgICAgICAgKGVsLmdldEF0dHJpYnV0ZShcInJvbGVcIikgPT09IFwib3B0aW9uXCIgfHxcbiAgICAgICAgICAgIGVsIGluc3RhbmNlb2YgSFRNTE9wdGlvbkVsZW1lbnQpKTtcbn1cbi8qKlxuICogQW4gT3B0aW9uIEN1c3RvbSBIVE1MIEVsZW1lbnQuXG4gKiBJbXBsZW1lbnRzIHtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvd2FpLWFyaWEtMS4xLyNvcHRpb24gfCBBUklBIG9wdGlvbiB9LlxuICpcbiAqIEBzbG90IHN0YXJ0IC0gQ29udGVudCB3aGljaCBjYW4gYmUgcHJvdmlkZWQgYmVmb3JlIHRoZSBsaXN0Ym94IG9wdGlvbiBjb250ZW50XG4gKiBAc2xvdCBlbmQgLSBDb250ZW50IHdoaWNoIGNhbiBiZSBwcm92aWRlZCBhZnRlciB0aGUgbGlzdGJveCBvcHRpb24gY29udGVudFxuICogQHNsb3QgLSBUaGUgZGVmYXVsdCBzbG90IGZvciBsaXN0Ym94IG9wdGlvbiBjb250ZW50XG4gKiBAY3NzcGFydCBjb250ZW50IC0gV3JhcHMgdGhlIGxpc3Rib3ggb3B0aW9uIGNvbnRlbnRcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBMaXN0Ym94T3B0aW9uIGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKHRleHQsIHZhbHVlLCBkZWZhdWx0U2VsZWN0ZWQsIHNlbGVjdGVkKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZGVmYXVsdFNlbGVjdGVkIHN0YXRlIG9mIHRoZSBvcHRpb24uXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVmYXVsdFNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmFja3Mgd2hldGhlciB0aGUgXCJzZWxlY3RlZFwiIHByb3BlcnR5IGhhcyBiZWVuIGNoYW5nZWQuXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kaXJ0eVNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY2hlY2tlZCBzdGF0ZSBvZiB0aGUgY29udHJvbC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IHRoaXMuZGVmYXVsdFNlbGVjdGVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogVHJhY2sgd2hldGhlciB0aGUgdmFsdWUgaGFzIGJlZW4gY2hhbmdlZCBmcm9tIHRoZSBpbml0aWFsIHZhbHVlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRpcnR5VmFsdWUgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRleHQpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dENvbnRlbnQgPSB0ZXh0O1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmYXVsdFNlbGVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRTZWxlY3RlZCA9IGRlZmF1bHRTZWxlY3RlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBzZWxlY3RlZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByb3h5ID0gbmV3IE9wdGlvbihgJHt0aGlzLnRleHRDb250ZW50fWAsIHRoaXMuaW5pdGlhbFZhbHVlLCB0aGlzLmRlZmF1bHRTZWxlY3RlZCwgdGhpcy5zZWxlY3RlZCk7XG4gICAgICAgIHRoaXMucHJveHkuZGlzYWJsZWQgPSB0aGlzLmRpc2FibGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBhcmlhQ2hlY2tlZCBwcm9wZXJ0eSB3aGVuIHRoZSBjaGVja2VkIHByb3BlcnR5IGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJldiAtIHRoZSBwcmV2aW91cyBjaGVja2VkIHZhbHVlXG4gICAgICogQHBhcmFtIG5leHQgLSB0aGUgY3VycmVudCBjaGVja2VkIHZhbHVlXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY2hlY2tlZENoYW5nZWQocHJldiwgbmV4dCkge1xuICAgICAgICBpZiAodHlwZW9mIG5leHQgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgICAgICB0aGlzLmFyaWFDaGVja2VkID0gbmV4dCA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXJpYUNoZWNrZWQgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBwcm94eSdzIHRleHQgY29udGVudCB3aGVuIHRoZSBkZWZhdWx0IHNsb3QgY2hhbmdlcy5cbiAgICAgKiBAcGFyYW0gcHJldiAtIHRoZSBwcmV2aW91cyBjb250ZW50IHZhbHVlXG4gICAgICogQHBhcmFtIG5leHQgLSB0aGUgY3VycmVudCBjb250ZW50IHZhbHVlXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb250ZW50Q2hhbmdlZChwcmV2LCBuZXh0KSB7XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTE9wdGlvbkVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJveHkudGV4dENvbnRlbnQgPSB0aGlzLnRleHRDb250ZW50O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJGVtaXQoXCJjb250ZW50Y2hhbmdlXCIsIG51bGwsIHsgYnViYmxlczogdHJ1ZSB9KTtcbiAgICB9XG4gICAgZGVmYXVsdFNlbGVjdGVkQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRpcnR5U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSB0aGlzLmRlZmF1bHRTZWxlY3RlZDtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTE9wdGlvbkVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3h5LnNlbGVjdGVkID0gdGhpcy5kZWZhdWx0U2VsZWN0ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGlzYWJsZWRDaGFuZ2VkKHByZXYsIG5leHQpIHtcbiAgICAgICAgdGhpcy5hcmlhRGlzYWJsZWQgPSB0aGlzLmRpc2FibGVkID8gXCJ0cnVlXCIgOiBcImZhbHNlXCI7XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTE9wdGlvbkVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJveHkuZGlzYWJsZWQgPSB0aGlzLmRpc2FibGVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbGVjdGVkQXR0cmlidXRlQ2hhbmdlZCgpIHtcbiAgICAgICAgdGhpcy5kZWZhdWx0U2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkQXR0cmlidXRlO1xuICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxPcHRpb25FbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5LmRlZmF1bHRTZWxlY3RlZCA9IHRoaXMuZGVmYXVsdFNlbGVjdGVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbGVjdGVkQ2hhbmdlZCgpIHtcbiAgICAgICAgdGhpcy5hcmlhU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkID8gXCJ0cnVlXCIgOiBcImZhbHNlXCI7XG4gICAgICAgIGlmICghdGhpcy5kaXJ0eVNlbGVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmRpcnR5U2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnByb3h5IGluc3RhbmNlb2YgSFRNTE9wdGlvbkVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJveHkuc2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIGluaXRpYWxWYWx1ZUNoYW5nZWQocHJldmlvdXMsIG5leHQpIHtcbiAgICAgICAgLy8gSWYgdGhlIHZhbHVlIGlzIGNsZWFuIGFuZCB0aGUgY29tcG9uZW50IGlzIGNvbm5lY3RlZCB0byB0aGUgRE9NXG4gICAgICAgIC8vIHRoZW4gc2V0IHZhbHVlIGVxdWFsIHRvIHRoZSBhdHRyaWJ1dGUgdmFsdWUuXG4gICAgICAgIGlmICghdGhpcy5kaXJ0eVZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5pbml0aWFsVmFsdWU7XG4gICAgICAgICAgICB0aGlzLmRpcnR5VmFsdWUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgbGFiZWwoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIChfYSA9IHRoaXMudmFsdWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHRoaXMudGV4dDtcbiAgICB9XG4gICAgZ2V0IHRleHQoKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiAoX2IgPSAoX2EgPSB0aGlzLnRleHRDb250ZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucmVwbGFjZSgvXFxzKy9nLCBcIiBcIikudHJpbSgpKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgIH1cbiAgICBzZXQgdmFsdWUobmV4dCkge1xuICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IGAke25leHQgIT09IG51bGwgJiYgbmV4dCAhPT0gdm9pZCAwID8gbmV4dCA6IFwiXCJ9YDtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgdGhpcy5kaXJ0eVZhbHVlID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMucHJveHkgaW5zdGFuY2VvZiBIVE1MT3B0aW9uRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5wcm94eS52YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIE9ic2VydmFibGUubm90aWZ5KHRoaXMsIFwidmFsdWVcIik7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBPYnNlcnZhYmxlLnRyYWNrKHRoaXMsIFwidmFsdWVcIik7XG4gICAgICAgIHJldHVybiAoX2EgPSB0aGlzLl92YWx1ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdGhpcy50ZXh0O1xuICAgIH1cbiAgICBnZXQgZm9ybSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJveHkgPyB0aGlzLnByb3h5LmZvcm0gOiBudWxsO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIExpc3Rib3hPcHRpb24ucHJvdG90eXBlLCBcImNoZWNrZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIExpc3Rib3hPcHRpb24ucHJvdG90eXBlLCBcImNvbnRlbnRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIExpc3Rib3hPcHRpb24ucHJvdG90eXBlLCBcImRlZmF1bHRTZWxlY3RlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IG1vZGU6IFwiYm9vbGVhblwiIH0pXG5dLCBMaXN0Ym94T3B0aW9uLnByb3RvdHlwZSwgXCJkaXNhYmxlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJzZWxlY3RlZFwiLCBtb2RlOiBcImJvb2xlYW5cIiB9KVxuXSwgTGlzdGJveE9wdGlvbi5wcm90b3R5cGUsIFwic2VsZWN0ZWRBdHRyaWJ1dGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIExpc3Rib3hPcHRpb24ucHJvdG90eXBlLCBcInNlbGVjdGVkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgYXR0cmlidXRlOiBcInZhbHVlXCIsIG1vZGU6IFwiZnJvbVZpZXdcIiB9KVxuXSwgTGlzdGJveE9wdGlvbi5wcm90b3R5cGUsIFwiaW5pdGlhbFZhbHVlXCIsIHZvaWQgMCk7XG4vKipcbiAqIFN0YXRlcyBhbmQgcHJvcGVydGllcyByZWxhdGluZyB0byB0aGUgQVJJQSBgb3B0aW9uYCByb2xlLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIERlbGVnYXRlc0FSSUFMaXN0Ym94T3B0aW9uIHtcbn1cbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIERlbGVnYXRlc0FSSUFMaXN0Ym94T3B0aW9uLnByb3RvdHlwZSwgXCJhcmlhQ2hlY2tlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgRGVsZWdhdGVzQVJJQUxpc3Rib3hPcHRpb24ucHJvdG90eXBlLCBcImFyaWFQb3NJblNldFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgRGVsZWdhdGVzQVJJQUxpc3Rib3hPcHRpb24ucHJvdG90eXBlLCBcImFyaWFTZWxlY3RlZFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgRGVsZWdhdGVzQVJJQUxpc3Rib3hPcHRpb24ucHJvdG90eXBlLCBcImFyaWFTZXRTaXplXCIsIHZvaWQgMCk7XG5hcHBseU1peGlucyhEZWxlZ2F0ZXNBUklBTGlzdGJveE9wdGlvbiwgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMpO1xuYXBwbHlNaXhpbnMoTGlzdGJveE9wdGlvbiwgU3RhcnRFbmQsIERlbGVnYXRlc0FSSUFMaXN0Ym94T3B0aW9uKTtcbiIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGF0dHIsIG9ic2VydmFibGUsIE9ic2VydmFibGUgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGZpbmRMYXN0SW5kZXgsIGtleUFycm93RG93biwga2V5QXJyb3dVcCwga2V5RW5kLCBrZXlFbnRlciwga2V5RXNjYXBlLCBrZXlIb21lLCBrZXlTcGFjZSwga2V5VGFiLCB1bmlxdWVJZCwgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LXdlYi11dGlsaXRpZXNcIjtcbmltcG9ydCB7IEZvdW5kYXRpb25FbGVtZW50IH0gZnJvbSBcIi4uL2ZvdW5kYXRpb24tZWxlbWVudC9mb3VuZGF0aW9uLWVsZW1lbnQuanNcIjtcbmltcG9ydCB7IGlzTGlzdGJveE9wdGlvbiB9IGZyb20gXCIuLi9saXN0Ym94LW9wdGlvbi9saXN0Ym94LW9wdGlvbi5qc1wiO1xuaW1wb3J0IHsgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMgfSBmcm9tIFwiLi4vcGF0dGVybnMvYXJpYS1nbG9iYWwuanNcIjtcbmltcG9ydCB7IGFwcGx5TWl4aW5zIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9hcHBseS1taXhpbnMuanNcIjtcbi8qKlxuICogQSBMaXN0Ym94IEN1c3RvbSBIVE1MIEVsZW1lbnQuXG4gKiBJbXBsZW1lbnRzIHRoZSB7QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLTEuMS8jbGlzdGJveCB8IEFSSUEgbGlzdGJveCB9LlxuICpcbiAqIEBzbG90IC0gVGhlIGRlZmF1bHQgc2xvdCBmb3IgdGhlIGxpc3Rib3ggb3B0aW9uc1xuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIExpc3Rib3ggZXh0ZW5kcyBGb3VuZGF0aW9uRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaW50ZXJuYWwgdW5maWx0ZXJlZCBsaXN0IG9mIHNlbGVjdGFibGUgb3B0aW9ucy5cbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaW5kZXggb2YgdGhlIHNlbGVjdGVkIG9wdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gLTE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNvbGxlY3Rpb24gb2YgdGhlIHNlbGVjdGVkIG9wdGlvbnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHN0YW5kYXJkIGBjbGlja2AgZXZlbnQgY3JlYXRlcyBhIGBmb2N1c2AgZXZlbnQgYmVmb3JlIGZpcmluZywgc28gYVxuICAgICAgICAgKiBgbW91c2Vkb3duYCBldmVudCBpcyB1c2VkIHRvIHNraXAgdGhhdCBpbml0aWFsIGZvY3VzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2hvdWxkU2tpcEZvY3VzID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY3VycmVudCB0eXBlYWhlYWQgYnVmZmVyIHN0cmluZy5cbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGVhaGVhZEJ1ZmZlciA9IFwiXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGbGFnIGZvciB0aGUgdHlwZWFoZWFkIHRpbWVvdXQgZXhwaXJhdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGVhaGVhZEV4cGlyZWQgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRpbWVvdXQgSUQgZm9yIHRoZSB0eXBlYWhlYWQgaGFuZGxlci5cbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGVhaGVhZFRpbWVvdXQgPSAtMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZpcnN0IHNlbGVjdGVkIG9wdGlvbi5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldCBmaXJzdFNlbGVjdGVkT3B0aW9uKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiAoX2EgPSB0aGlzLnNlbGVjdGVkT3B0aW9uc1swXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZXJlIGlzIG9uZSBvciBtb3JlIHNlbGVjdGFibGUgb3B0aW9uLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZ2V0IGhhc1NlbGVjdGFibGVPcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmxlbmd0aCA+IDAgJiYgIXRoaXMub3B0aW9ucy5ldmVyeShvID0+IG8uZGlzYWJsZWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIG9wdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0IGxlbmd0aCgpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgcmV0dXJuIChfYiA9IChfYSA9IHRoaXMub3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxlbmd0aCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxpc3Qgb2Ygb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXQgb3B0aW9ucygpIHtcbiAgICAgICAgT2JzZXJ2YWJsZS50cmFjayh0aGlzLCBcIm9wdGlvbnNcIik7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xuICAgIH1cbiAgICBzZXQgb3B0aW9ucyh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gdmFsdWU7XG4gICAgICAgIE9ic2VydmFibGUubm90aWZ5KHRoaXMsIFwib3B0aW9uc1wiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmxhZyBmb3IgdGhlIHR5cGVhaGVhZCB0aW1lb3V0IGV4cGlyYXRpb24uXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCB1c2UgYExpc3Rib3gudHlwZWFoZWFkRXhwaXJlZGBcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXQgdHlwZUFoZWFkRXhwaXJlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZWFoZWFkRXhwaXJlZDtcbiAgICB9XG4gICAgc2V0IHR5cGVBaGVhZEV4cGlyZWQodmFsdWUpIHtcbiAgICAgICAgdGhpcy50eXBlYWhlYWRFeHBpcmVkID0gdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBjbGljayBldmVudHMgZm9yIGxpc3Rib3ggb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNsaWNrSGFuZGxlcihlKSB7XG4gICAgICAgIGNvbnN0IGNhcHR1cmVkID0gZS50YXJnZXQuY2xvc2VzdChgb3B0aW9uLFtyb2xlPW9wdGlvbl1gKTtcbiAgICAgICAgaWYgKGNhcHR1cmVkICYmICFjYXB0dXJlZC5kaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gdGhpcy5vcHRpb25zLmluZGV4T2YoY2FwdHVyZWQpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5zdXJlcyB0aGF0IHRoZSBwcm92aWRlZCBvcHRpb24gaXMgZm9jdXNlZCBhbmQgc2Nyb2xsZWQgaW50byB2aWV3LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvblRvRm9jdXMgLSBUaGUgb3B0aW9uIHRvIGZvY3VzXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZm9jdXNBbmRTY3JvbGxPcHRpb25JbnRvVmlldyhvcHRpb25Ub0ZvY3VzID0gdGhpcy5maXJzdFNlbGVjdGVkT3B0aW9uKSB7XG4gICAgICAgIC8vIFRvIGVuc3VyZSB0aGF0IHRoZSBicm93c2VyIGhhbmRsZXMgYm90aCBgZm9jdXMoKWAgYW5kIGBzY3JvbGxJbnRvVmlldygpYCwgdGhlXG4gICAgICAgIC8vIHRpbWluZyBoZXJlIG5lZWRzIHRvIGd1YXJhbnRlZSB0aGF0IHRoZXkgaGFwcGVuIG9uIGRpZmZlcmVudCBmcmFtZXMuIFNpbmNlIHRoaXNcbiAgICAgICAgLy8gZnVuY3Rpb24gaXMgdHlwaWNhbGx5IGNhbGxlZCBmcm9tIHRoZSBgb3BlbkNoYW5nZWRgIG9ic2VydmVyLCBgRE9NLnF1ZXVlVXBkYXRlYFxuICAgICAgICAvLyBjYXVzZXMgdGhlIGNhbGxzIHRvIGJlIGdyb3VwZWQgaW50byB0aGUgc2FtZSBmcmFtZS4gVG8gcHJldmVudCB0aGlzLFxuICAgICAgICAvLyBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYCBpcyB1c2VkIGluc3RlYWQgb2YgYERPTS5xdWV1ZVVwZGF0ZWAuXG4gICAgICAgIGlmICh0aGlzLmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpICYmIG9wdGlvblRvRm9jdXMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIG9wdGlvblRvRm9jdXMuZm9jdXMoKTtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgb3B0aW9uVG9Gb2N1cy5zY3JvbGxJbnRvVmlldyh7IGJsb2NrOiBcIm5lYXJlc3RcIiB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgYGZvY3VzaW5gIGFjdGlvbnMgZm9yIHRoZSBjb21wb25lbnQuIFdoZW4gdGhlIGNvbXBvbmVudCByZWNlaXZlcyBmb2N1cyxcbiAgICAgKiB0aGUgbGlzdCBvZiBzZWxlY3RlZCBvcHRpb25zIGlzIHJlZnJlc2hlZCBhbmQgdGhlIGZpcnN0IHNlbGVjdGVkIG9wdGlvbiBpcyBzY3JvbGxlZFxuICAgICAqIGludG8gdmlldy5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGZvY3VzaW5IYW5kbGVyKGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNob3VsZFNraXBGb2N1cyAmJiBlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkT3B0aW9ucygpO1xuICAgICAgICAgICAgdGhpcy5mb2N1c0FuZFNjcm9sbE9wdGlvbkludG9WaWV3KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaG91bGRTa2lwRm9jdXMgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgb3B0aW9ucyB3aGljaCBtYXRjaCB0aGUgY3VycmVudCB0eXBlYWhlYWQgYnVmZmVyLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZ2V0VHlwZWFoZWFkTWF0Y2hlcygpIHtcbiAgICAgICAgY29uc3QgcGF0dGVybiA9IHRoaXMudHlwZWFoZWFkQnVmZmVyLnJlcGxhY2UoL1suKitcXC0/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKTtcbiAgICAgICAgY29uc3QgcmUgPSBuZXcgUmVnRXhwKGBeJHtwYXR0ZXJufWAsIFwiZ2lcIik7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZmlsdGVyKChvKSA9PiBvLnRleHQudHJpbSgpLm1hdGNoKHJlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgdGhlIGluZGV4IG9mIHRoZSBuZXh0IG9wdGlvbiB3aGljaCBpcyBzZWxlY3RhYmxlLCBpZiBhbnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJldiAtIHRoZSBwcmV2aW91cyBzZWxlY3RlZCBpbmRleFxuICAgICAqIEBwYXJhbSBuZXh0IC0gdGhlIG5leHQgaW5kZXggdG8gc2VsZWN0XG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXRTZWxlY3RhYmxlSW5kZXgocHJldiA9IHRoaXMuc2VsZWN0ZWRJbmRleCwgbmV4dCkge1xuICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSBwcmV2ID4gbmV4dCA/IC0xIDogcHJldiA8IG5leHQgPyAxIDogMDtcbiAgICAgICAgY29uc3QgcG90ZW50aWFsRGlyZWN0aW9uID0gcHJldiArIGRpcmVjdGlvbjtcbiAgICAgICAgbGV0IG5leHRTZWxlY3RhYmxlT3B0aW9uID0gbnVsbDtcbiAgICAgICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGNhc2UgLTE6IHtcbiAgICAgICAgICAgICAgICBuZXh0U2VsZWN0YWJsZU9wdGlvbiA9IHRoaXMub3B0aW9ucy5yZWR1Y2VSaWdodCgobmV4dFNlbGVjdGFibGVPcHRpb24sIHRoaXNPcHRpb24sIGluZGV4KSA9PiAhbmV4dFNlbGVjdGFibGVPcHRpb24gJiZcbiAgICAgICAgICAgICAgICAgICAgIXRoaXNPcHRpb24uZGlzYWJsZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPCBwb3RlbnRpYWxEaXJlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzT3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIDogbmV4dFNlbGVjdGFibGVPcHRpb24sIG5leHRTZWxlY3RhYmxlT3B0aW9uKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgMToge1xuICAgICAgICAgICAgICAgIG5leHRTZWxlY3RhYmxlT3B0aW9uID0gdGhpcy5vcHRpb25zLnJlZHVjZSgobmV4dFNlbGVjdGFibGVPcHRpb24sIHRoaXNPcHRpb24sIGluZGV4KSA9PiAhbmV4dFNlbGVjdGFibGVPcHRpb24gJiZcbiAgICAgICAgICAgICAgICAgICAgIXRoaXNPcHRpb24uZGlzYWJsZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPiBwb3RlbnRpYWxEaXJlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzT3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIDogbmV4dFNlbGVjdGFibGVPcHRpb24sIG5leHRTZWxlY3RhYmxlT3B0aW9uKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmluZGV4T2YobmV4dFNlbGVjdGFibGVPcHRpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGV4dGVybmFsIGNoYW5nZXMgdG8gY2hpbGQgb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzb3VyY2UgLSB0aGUgc291cmNlIG9iamVjdFxuICAgICAqIEBwYXJhbSBwcm9wZXJ0eU5hbWUgLSB0aGUgcHJvcGVydHlcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGhhbmRsZUNoYW5nZShzb3VyY2UsIHByb3BlcnR5TmFtZSkge1xuICAgICAgICBzd2l0Y2ggKHByb3BlcnR5TmFtZSkge1xuICAgICAgICAgICAgY2FzZSBcInNlbGVjdGVkXCI6IHtcbiAgICAgICAgICAgICAgICBpZiAoTGlzdGJveC5zbG90dGVkT3B0aW9uRmlsdGVyKHNvdXJjZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gdGhpcy5vcHRpb25zLmluZGV4T2Yoc291cmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZE9wdGlvbnMoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb3ZlcyBmb2N1cyB0byBhbiBvcHRpb24gd2hvc2UgbGFiZWwgbWF0Y2hlcyBjaGFyYWN0ZXJzIHR5cGVkIGJ5IHRoZSB1c2VyLlxuICAgICAqIENvbnNlY3V0aXZlIGtleXN0cm9rZXMgYXJlIGJhdGNoZWQgaW50byBhIGJ1ZmZlciBvZiBzZWFyY2ggdGV4dCB1c2VkXG4gICAgICogdG8gbWF0Y2ggYWdhaW5zdCB0aGUgc2V0IG9mIG9wdGlvbnMuICBJZiBgVFlQRV9BSEVBRF9USU1FT1VUX01TYCBwYXNzZXNcbiAgICAgKiBiZXR3ZWVuIGNvbnNlY3V0aXZlIGtleXN0cm9rZXMsIHRoZSBzZWFyY2ggcmVzdGFydHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ga2V5IC0gdGhlIGtleSB0byBiZSBldmFsdWF0ZWRcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGhhbmRsZVR5cGVBaGVhZChrZXkpIHtcbiAgICAgICAgaWYgKHRoaXMudHlwZWFoZWFkVGltZW91dCkge1xuICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnR5cGVhaGVhZFRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudHlwZWFoZWFkVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+ICh0aGlzLnR5cGVhaGVhZEV4cGlyZWQgPSB0cnVlKSwgTGlzdGJveC5UWVBFX0FIRUFEX1RJTUVPVVRfTVMpO1xuICAgICAgICBpZiAoa2V5Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnR5cGVhaGVhZEJ1ZmZlciA9IGAke3RoaXMudHlwZWFoZWFkRXhwaXJlZCA/IFwiXCIgOiB0aGlzLnR5cGVhaGVhZEJ1ZmZlcn0ke2tleX1gO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGBrZXlkb3duYCBhY3Rpb25zIGZvciBsaXN0Ym94IG5hdmlnYXRpb24gYW5kIHR5cGVhaGVhZC5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGtleWRvd25IYW5kbGVyKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2hvdWxkU2tpcEZvY3VzID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGtleSA9IGUua2V5O1xuICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgICAgLy8gU2VsZWN0IHRoZSBmaXJzdCBhdmFpbGFibGUgb3B0aW9uXG4gICAgICAgICAgICBjYXNlIGtleUhvbWU6IHtcbiAgICAgICAgICAgICAgICBpZiAoIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdEZpcnN0T3B0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2VsZWN0IHRoZSBuZXh0IHNlbGVjdGFibGUgb3B0aW9uXG4gICAgICAgICAgICBjYXNlIGtleUFycm93RG93bjoge1xuICAgICAgICAgICAgICAgIGlmICghZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TmV4dE9wdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNlbGVjdCB0aGUgcHJldmlvdXMgc2VsZWN0YWJsZSBvcHRpb25cbiAgICAgICAgICAgIGNhc2Uga2V5QXJyb3dVcDoge1xuICAgICAgICAgICAgICAgIGlmICghZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0UHJldmlvdXNPcHRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBTZWxlY3QgdGhlIGxhc3QgYXZhaWxhYmxlIG9wdGlvblxuICAgICAgICAgICAgY2FzZSBrZXlFbmQ6IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RMYXN0T3B0aW9uKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIGtleVRhYjoge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNBbmRTY3JvbGxPcHRpb25JbnRvVmlldygpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBrZXlFbnRlcjpcbiAgICAgICAgICAgIGNhc2Uga2V5RXNjYXBlOiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIGtleVNwYWNlOiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudHlwZWFoZWFkRXhwaXJlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBTZW5kIGtleSB0byBUeXBlYWhlYWQgaGFuZGxlclxuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIGlmIChrZXkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlVHlwZUFoZWFkKGAke2tleX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJldmVudHMgYGZvY3VzaW5gIGV2ZW50cyBmcm9tIGZpcmluZyBiZWZvcmUgYGNsaWNrYCBldmVudHMgd2hlbiB0aGVcbiAgICAgKiBlbGVtZW50IGlzIHVuZm9jdXNlZC5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIG1vdXNlZG93bkhhbmRsZXIoZSkge1xuICAgICAgICB0aGlzLnNob3VsZFNraXBGb2N1cyA9ICF0aGlzLmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3dpdGNoZXMgYmV0d2VlbiBzaW5nbGUtc2VsZWN0aW9uIGFuZCBtdWx0aS1zZWxlY3Rpb24gbW9kZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwcmV2IC0gdGhlIHByZXZpb3VzIHZhbHVlIG9mIHRoZSBgbXVsdGlwbGVgIGF0dHJpYnV0ZVxuICAgICAqIEBwYXJhbSBuZXh0IC0gdGhlIG5leHQgdmFsdWUgb2YgdGhlIGBtdWx0aXBsZWAgYXR0cmlidXRlXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBtdWx0aXBsZUNoYW5nZWQocHJldiwgbmV4dCkge1xuICAgICAgICB0aGlzLmFyaWFNdWx0aVNlbGVjdGFibGUgPSBuZXh0ID8gXCJ0cnVlXCIgOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBsaXN0IG9mIHNlbGVjdGVkIG9wdGlvbnMgd2hlbiB0aGUgYHNlbGVjdGVkSW5kZXhgIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJldiAtIHRoZSBwcmV2aW91cyBzZWxlY3RlZCBpbmRleCB2YWx1ZVxuICAgICAqIEBwYXJhbSBuZXh0IC0gdGhlIGN1cnJlbnQgc2VsZWN0ZWQgaW5kZXggdmFsdWVcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHNlbGVjdGVkSW5kZXhDaGFuZ2VkKHByZXYsIG5leHQpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoIXRoaXMuaGFzU2VsZWN0YWJsZU9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IC0xO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoKF9hID0gdGhpcy5vcHRpb25zW3RoaXMuc2VsZWN0ZWRJbmRleF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kaXNhYmxlZCkgJiYgdHlwZW9mIHByZXYgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGFibGVJbmRleCA9IHRoaXMuZ2V0U2VsZWN0YWJsZUluZGV4KHByZXYsIG5leHQpO1xuICAgICAgICAgICAgY29uc3QgbmV3TmV4dCA9IHNlbGVjdGFibGVJbmRleCA+IC0xID8gc2VsZWN0YWJsZUluZGV4IDogcHJldjtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IG5ld05leHQ7XG4gICAgICAgICAgICBpZiAobmV4dCA9PT0gbmV3TmV4dCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleENoYW5nZWQobmV4dCwgbmV3TmV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRTZWxlY3RlZE9wdGlvbnMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgc2VsZWN0ZWRuZXNzIG9mIGVhY2ggb3B0aW9uIHdoZW4gdGhlIGxpc3Qgb2Ygc2VsZWN0ZWQgb3B0aW9ucyBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByZXYgLSB0aGUgcHJldmlvdXMgbGlzdCBvZiBzZWxlY3RlZCBvcHRpb25zXG4gICAgICogQHBhcmFtIG5leHQgLSB0aGUgY3VycmVudCBsaXN0IG9mIHNlbGVjdGVkIG9wdGlvbnNcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHNlbGVjdGVkT3B0aW9uc0NoYW5nZWQocHJldiwgbmV4dCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkTmV4dCA9IG5leHQuZmlsdGVyKExpc3Rib3guc2xvdHRlZE9wdGlvbkZpbHRlcik7XG4gICAgICAgIChfYSA9IHRoaXMub3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZvckVhY2gobyA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3RpZmllciA9IE9ic2VydmFibGUuZ2V0Tm90aWZpZXIobyk7XG4gICAgICAgICAgICBub3RpZmllci51bnN1YnNjcmliZSh0aGlzLCBcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgby5zZWxlY3RlZCA9IGZpbHRlcmVkTmV4dC5pbmNsdWRlcyhvKTtcbiAgICAgICAgICAgIG5vdGlmaWVyLnN1YnNjcmliZSh0aGlzLCBcInNlbGVjdGVkXCIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW92ZXMgZm9jdXMgdG8gdGhlIGZpcnN0IHNlbGVjdGFibGUgb3B0aW9uLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNlbGVjdEZpcnN0T3B0aW9uKCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IChfYiA9IChfYSA9IHRoaXMub3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZpbmRJbmRleChvID0+ICFvLmRpc2FibGVkKSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogLTE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogTW92ZXMgZm9jdXMgdG8gdGhlIGxhc3Qgc2VsZWN0YWJsZSBvcHRpb24uXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzZWxlY3RMYXN0T3B0aW9uKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IGZpbmRMYXN0SW5kZXgodGhpcy5vcHRpb25zLCBvID0+ICFvLmRpc2FibGVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb3ZlcyBmb2N1cyB0byB0aGUgbmV4dCBzZWxlY3RhYmxlIG9wdGlvbi5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHNlbGVjdE5leHRPcHRpb24oKSB7XG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJiB0aGlzLnNlbGVjdGVkSW5kZXggPCB0aGlzLm9wdGlvbnMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ICs9IDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogTW92ZXMgZm9jdXMgdG8gdGhlIHByZXZpb3VzIHNlbGVjdGFibGUgb3B0aW9uLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc2VsZWN0UHJldmlvdXNPcHRpb24oKSB7XG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJiB0aGlzLnNlbGVjdGVkSW5kZXggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSB0aGlzLnNlbGVjdGVkSW5kZXggLSAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHNlbGVjdGVkIGluZGV4IHRvIG1hdGNoIHRoZSBmaXJzdCBzZWxlY3RlZCBvcHRpb24uXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzZXREZWZhdWx0U2VsZWN0ZWRPcHRpb24oKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IChfYiA9IChfYSA9IHRoaXMub3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZpbmRJbmRleChlbCA9PiBlbC5kZWZhdWx0U2VsZWN0ZWQpKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAtMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyBhbiBvcHRpb24gYXMgc2VsZWN0ZWQgYW5kIGdpdmVzIGl0IGZvY3VzLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNldFNlbGVjdGVkT3B0aW9ucygpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIGlmICgoX2EgPSB0aGlzLm9wdGlvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zID0gW3RoaXMub3B0aW9uc1t0aGlzLnNlbGVjdGVkSW5kZXhdXTtcbiAgICAgICAgICAgIHRoaXMuYXJpYUFjdGl2ZURlc2NlbmRhbnQgPSAoX2MgPSAoX2IgPSB0aGlzLmZpcnN0U2VsZWN0ZWRPcHRpb24pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5pZCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogXCJcIjtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNBbmRTY3JvbGxPcHRpb25JbnRvVmlldygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGxpc3Qgb2Ygb3B0aW9ucyBhbmQgcmVzZXRzIHRoZSBzZWxlY3RlZCBvcHRpb24gd2hlbiB0aGUgc2xvdHRlZCBvcHRpb24gY29udGVudCBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByZXYgLSB0aGUgcHJldmlvdXMgbGlzdCBvZiBzbG90dGVkIG9wdGlvbnNcbiAgICAgKiBAcGFyYW0gbmV4dCAtIHRoZSBjdXJyZW50IGxpc3Qgb2Ygc2xvdHRlZCBvcHRpb25zXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzbG90dGVkT3B0aW9uc0NoYW5nZWQocHJldiwgbmV4dCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBuZXh0LnJlZHVjZSgob3B0aW9ucywgaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzTGlzdGJveE9wdGlvbihpdGVtKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMucHVzaChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgICAgICB9LCBbXSk7XG4gICAgICAgIGNvbnN0IHNldFNpemUgPSBgJHt0aGlzLm9wdGlvbnMubGVuZ3RofWA7XG4gICAgICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChvcHRpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbi5pZCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbi5pZCA9IHVuaXF1ZUlkKFwib3B0aW9uLVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wdGlvbi5hcmlhUG9zSW5TZXQgPSBgJHtpbmRleCArIDF9YDtcbiAgICAgICAgICAgIG9wdGlvbi5hcmlhU2V0U2l6ZSA9IHNldFNpemU7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRPcHRpb25zKCk7XG4gICAgICAgICAgICB0aGlzLnNldERlZmF1bHRTZWxlY3RlZE9wdGlvbigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGZpbHRlcmVkIGxpc3Qgb2Ygb3B0aW9ucyB3aGVuIHRoZSB0eXBlYWhlYWQgYnVmZmVyIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJldiAtIHRoZSBwcmV2aW91cyB0eXBlYWhlYWQgYnVmZmVyIHZhbHVlXG4gICAgICogQHBhcmFtIG5leHQgLSB0aGUgY3VycmVudCB0eXBlYWhlYWQgYnVmZmVyIHZhbHVlXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0eXBlYWhlYWRCdWZmZXJDaGFuZ2VkKHByZXYsIG5leHQpIHtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlYWhlYWRNYXRjaGVzID0gdGhpcy5nZXRUeXBlYWhlYWRNYXRjaGVzKCk7XG4gICAgICAgICAgICBpZiAodHlwZWFoZWFkTWF0Y2hlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZEluZGV4ID0gdGhpcy5vcHRpb25zLmluZGV4T2YodHlwZWFoZWFkTWF0Y2hlc1swXSk7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkSW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSBzZWxlY3RlZEluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudHlwZWFoZWFkRXhwaXJlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBBIHN0YXRpYyBmaWx0ZXIgdG8gaW5jbHVkZSBvbmx5IHNlbGVjdGFibGUgb3B0aW9ucy5cbiAqXG4gKiBAcGFyYW0gbiAtIGVsZW1lbnQgdG8gZmlsdGVyXG4gKiBAcHVibGljXG4gKi9cbkxpc3Rib3guc2xvdHRlZE9wdGlvbkZpbHRlciA9IChuKSA9PiBpc0xpc3Rib3hPcHRpb24obikgJiYgIW4uaGlkZGVuO1xuLyoqXG4gKiBUeXBlYWhlYWQgdGltZW91dCBpbiBtaWxsaXNlY29uZHMuXG4gKlxuICogQGludGVybmFsXG4gKi9cbkxpc3Rib3guVFlQRV9BSEVBRF9USU1FT1VUX01TID0gMTAwMDtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBtb2RlOiBcImJvb2xlYW5cIiB9KVxuXSwgTGlzdGJveC5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIExpc3Rib3gucHJvdG90eXBlLCBcInNlbGVjdGVkSW5kZXhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIExpc3Rib3gucHJvdG90eXBlLCBcInNlbGVjdGVkT3B0aW9uc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgTGlzdGJveC5wcm90b3R5cGUsIFwic2xvdHRlZE9wdGlvbnNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIExpc3Rib3gucHJvdG90eXBlLCBcInR5cGVhaGVhZEJ1ZmZlclwiLCB2b2lkIDApO1xuLyoqXG4gKiBJbmNsdWRlcyBBUklBIHN0YXRlcyBhbmQgcHJvcGVydGllcyByZWxhdGluZyB0byB0aGUgQVJJQSBsaXN0Ym94IHJvbGVcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWxlZ2F0ZXNBUklBTGlzdGJveCB7XG59XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBEZWxlZ2F0ZXNBUklBTGlzdGJveC5wcm90b3R5cGUsIFwiYXJpYUFjdGl2ZURlc2NlbmRhbnRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIERlbGVnYXRlc0FSSUFMaXN0Ym94LnByb3RvdHlwZSwgXCJhcmlhRGlzYWJsZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIERlbGVnYXRlc0FSSUFMaXN0Ym94LnByb3RvdHlwZSwgXCJhcmlhRXhwYW5kZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIERlbGVnYXRlc0FSSUFMaXN0Ym94LnByb3RvdHlwZSwgXCJhcmlhTXVsdGlTZWxlY3RhYmxlXCIsIHZvaWQgMCk7XG5hcHBseU1peGlucyhEZWxlZ2F0ZXNBUklBTGlzdGJveCwgQVJJQUdsb2JhbFN0YXRlc0FuZFByb3BlcnRpZXMpO1xuYXBwbHlNaXhpbnMoTGlzdGJveCwgRGVsZWdhdGVzQVJJQUxpc3Rib3gpO1xuIiwiLyoqXG4gKiBQb3NpdGlvbmluZyBkaXJlY3Rpb25zIGZvciB0aGUgbGlzdGJveCB3aGVuIGEgc2VsZWN0IGlzIG9wZW4uXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBTZWxlY3RQb3NpdGlvbiA9IHtcbiAgICBhYm92ZTogXCJhYm92ZVwiLFxuICAgIGJlbG93OiBcImJlbG93XCIsXG59O1xuIiwiLyoqXG4gKiBSZXRyaWV2ZXMgdGhlIFwiY29tcG9zZWQgcGFyZW50XCIgZWxlbWVudCBvZiBhIG5vZGUsIGlnbm9yaW5nIERPTSB0cmVlIGJvdW5kYXJpZXMuXG4gKiBXaGVuIHRoZSBwYXJlbnQgb2YgYSBub2RlIGlzIGEgc2hhZG93LXJvb3QsIGl0IHdpbGwgcmV0dXJuIHRoZSBob3N0XG4gKiBlbGVtZW50IG9mIHRoZSBzaGFkb3cgcm9vdC4gT3RoZXJ3aXNlIGl0IHdpbGwgcmV0dXJuIHRoZSBwYXJlbnQgbm9kZSBvciBudWxsIGlmXG4gKiBubyBwYXJlbnQgbm9kZSBleGlzdHMuXG4gKiBAcGFyYW0gZWxlbWVudCAtIFRoZSBlbGVtZW50IGZvciB3aGljaCB0byByZXRyaWV2ZSB0aGUgY29tcG9zZWQgcGFyZW50XG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcG9zZWRQYXJlbnQoZWxlbWVudCkge1xuICAgIGNvbnN0IHBhcmVudE5vZGUgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgaWYgKHBhcmVudE5vZGUpIHtcbiAgICAgICAgcmV0dXJuIHBhcmVudE5vZGU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCByb290Tm9kZSA9IGVsZW1lbnQuZ2V0Um9vdE5vZGUoKTtcbiAgICAgICAgaWYgKHJvb3ROb2RlLmhvc3QgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgLy8gdGhpcyBpcyBzaGFkb3ctcm9vdFxuICAgICAgICAgICAgcmV0dXJuIHJvb3ROb2RlLmhvc3Q7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4iLCJpbXBvcnQgeyBjb21wb3NlZFBhcmVudCB9IGZyb20gXCIuL2NvbXBvc2VkLXBhcmVudC5qc1wiO1xuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSByZWZlcmVuY2UgZWxlbWVudCBjb250YWlucyB0aGUgdGVzdCBlbGVtZW50IGluIGEgXCJjb21wb3NlZFwiIERPTSB0cmVlIHRoYXRcbiAqIGlnbm9yZXMgc2hhZG93IERPTSBib3VuZGFyaWVzLlxuICpcbiAqIFJldHVybnMgdHJ1ZSBvZiB0aGUgdGVzdCBlbGVtZW50IGlzIGEgZGVzY2VuZGVudCBvZiB0aGUgcmVmZXJlbmNlLCBvciBleGlzdCBpblxuICogYSBzaGFkb3cgRE9NIHRoYXQgaXMgYSBsb2dpY2FsIGRlc2NlbmRlbnQgb2YgdGhlIHJlZmVyZW5jZS4gT3RoZXJ3aXNlIHJldHVybnMgZmFsc2UuXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gVGhlIGVsZW1lbnQgdG8gdGVzdCBmb3IgY29udGFpbm1lbnQgYWdhaW5zdC5cbiAqIEBwYXJhbSB0ZXN0IC0gVGhlIGVsZW1lbnQgYmVpbmcgdGVzdGVkIGZvciBjb250YWlubWVudC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wb3NlZENvbnRhaW5zKHJlZmVyZW5jZSwgdGVzdCkge1xuICAgIGxldCBjdXJyZW50ID0gdGVzdDtcbiAgICB3aGlsZSAoY3VycmVudCAhPT0gbnVsbCkge1xuICAgICAgICBpZiAoY3VycmVudCA9PT0gcmVmZXJlbmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50ID0gY29tcG9zZWRQYXJlbnQoY3VycmVudCk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbiIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IERPTSwgRWxlbWVudFN0eWxlcywgRkFTVEVsZW1lbnQsIG9ic2VydmFibGUsIE9ic2VydmFibGUsIHByZXBlbmRUb0Fkb3B0ZWRTdHlsZVNoZWV0c1N5bWJvbCwgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmV4cG9ydCBjb25zdCBkZWZhdWx0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5mdW5jdGlvbiBpc0Zhc3RFbGVtZW50KGVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWxlbWVudCBpbnN0YW5jZW9mIEZBU1RFbGVtZW50O1xufVxuY2xhc3MgUXVldWVkU3R5bGVTaGVldFRhcmdldCB7XG4gICAgc2V0UHJvcGVydHkobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgRE9NLnF1ZXVlVXBkYXRlKCgpID0+IHRoaXMudGFyZ2V0LnNldFByb3BlcnR5KG5hbWUsIHZhbHVlKSk7XG4gICAgfVxuICAgIHJlbW92ZVByb3BlcnR5KG5hbWUpIHtcbiAgICAgICAgRE9NLnF1ZXVlVXBkYXRlKCgpID0+IHRoaXMudGFyZ2V0LnJlbW92ZVByb3BlcnR5KG5hbWUpKTtcbiAgICB9XG59XG4vKipcbiAqIEhhbmRsZXMgc2V0dGluZyBwcm9wZXJ0aWVzIGZvciBhIEZBU1RFbGVtZW50IHVzaW5nIENvbnN0cnVjdGFibGUgU3R5bGVzaGVldHNcbiAqL1xuY2xhc3MgQ29uc3RydWN0YWJsZVN0eWxlU2hlZXRUYXJnZXQgZXh0ZW5kcyBRdWV1ZWRTdHlsZVNoZWV0VGFyZ2V0IHtcbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2UpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgY29uc3Qgc2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xuICAgICAgICBzaGVldFtwcmVwZW5kVG9BZG9wdGVkU3R5bGVTaGVldHNTeW1ib2xdID0gdHJ1ZTtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBzaGVldC5jc3NSdWxlc1tzaGVldC5pbnNlcnRSdWxlKFwiOmhvc3R7fVwiKV0uc3R5bGU7XG4gICAgICAgIHNvdXJjZS4kZmFzdENvbnRyb2xsZXIuYWRkU3R5bGVzKEVsZW1lbnRTdHlsZXMuY3JlYXRlKFtzaGVldF0pKTtcbiAgICB9XG59XG5jbGFzcyBEb2N1bWVudFN0eWxlU2hlZXRUYXJnZXQgZXh0ZW5kcyBRdWV1ZWRTdHlsZVNoZWV0VGFyZ2V0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgY29uc3Qgc2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xuICAgICAgICB0aGlzLnRhcmdldCA9IHNoZWV0LmNzc1J1bGVzW3NoZWV0Lmluc2VydFJ1bGUoXCI6cm9vdHt9XCIpXS5zdHlsZTtcbiAgICAgICAgZG9jdW1lbnQuYWRvcHRlZFN0eWxlU2hlZXRzID0gW1xuICAgICAgICAgICAgLi4uZG9jdW1lbnQuYWRvcHRlZFN0eWxlU2hlZXRzLFxuICAgICAgICAgICAgc2hlZXQsXG4gICAgICAgIF07XG4gICAgfVxufVxuY2xhc3MgSGVhZFN0eWxlRWxlbWVudFN0eWxlU2hlZXRUYXJnZXQgZXh0ZW5kcyBRdWV1ZWRTdHlsZVNoZWV0VGFyZ2V0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0aGlzLnN0eWxlKTtcbiAgICAgICAgY29uc3QgeyBzaGVldCB9ID0gdGhpcy5zdHlsZTtcbiAgICAgICAgLy8gQmVjYXVzZSB0aGUgSFRNTFN0eWxlRWxlbWVudCBoYXMgYmVlbiBhcHBlbmRlZCxcbiAgICAgICAgLy8gdGhlcmUgc2hvdWxkbid0IGV4aXN0IGEgY2FzZSB3aGVyZSBgc2hlZXRgIGlzIG51bGwsXG4gICAgICAgIC8vIGJ1dCBpZi1jaGVjayBpdCBqdXN0IGluIGNhc2UuXG4gICAgICAgIGlmIChzaGVldCkge1xuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2pzZG9tL2pzZG9tIHVzZXMgaHR0cHM6Ly9naXRodWIuY29tL05WL0NTU09NIGZvciBpdCdzIENTU09NIGltcGxlbWVudGF0aW9uLFxuICAgICAgICAgICAgLy8gd2hpY2ggaW1wbGVtZW50cyB0aGUgRE9NIExldmVsIDIgc3BlYyBmb3IgQ1NTU3R5bGVTaGVldCB3aGVyZSBpbnNlcnRSdWxlKCkgcmVxdWlyZXMgYW4gaW5kZXggYXJndW1lbnQuXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHNoZWV0Lmluc2VydFJ1bGUoXCI6cm9vdHt9XCIsIHNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XG4gICAgICAgICAgICB0aGlzLnRhcmdldCA9IHNoZWV0LmNzc1J1bGVzW2luZGV4XS5zdHlsZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogSGFuZGxlcyBzZXR0aW5nIHByb3BlcnRpZXMgZm9yIGEgRkFTVEVsZW1lbnQgdXNpbmcgYW4gSFRNTFN0eWxlRWxlbWVudFxuICovXG5jbGFzcyBTdHlsZUVsZW1lbnRTdHlsZVNoZWV0VGFyZ2V0IHtcbiAgICBjb25zdHJ1Y3Rvcih0YXJnZXQpIHtcbiAgICAgICAgdGhpcy5zdG9yZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBudWxsO1xuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gdGFyZ2V0LiRmYXN0Q29udHJvbGxlcjtcbiAgICAgICAgdGhpcy5zdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgY29udHJvbGxlci5hZGRTdHlsZXModGhpcy5zdHlsZSk7XG4gICAgICAgIE9ic2VydmFibGUuZ2V0Tm90aWZpZXIoY29udHJvbGxlcikuc3Vic2NyaWJlKHRoaXMsIFwiaXNDb25uZWN0ZWRcIik7XG4gICAgICAgIHRoaXMuaGFuZGxlQ2hhbmdlKGNvbnRyb2xsZXIsIFwiaXNDb25uZWN0ZWRcIik7XG4gICAgfVxuICAgIHRhcmdldENoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgdGhpcy5zdG9yZS5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldC5zZXRQcm9wZXJ0eShrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLnN0b3JlLnNldChuYW1lLCB2YWx1ZSk7XG4gICAgICAgIERPTS5xdWV1ZVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy50YXJnZXQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldC5zZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW1vdmVQcm9wZXJ0eShuYW1lKSB7XG4gICAgICAgIHRoaXMuc3RvcmUuZGVsZXRlKG5hbWUpO1xuICAgICAgICBET00ucXVldWVVcGRhdGUoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXQucmVtb3ZlUHJvcGVydHkobmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2Uoc291cmNlLCBrZXkpIHtcbiAgICAgICAgLy8gSFRNTFN0eWxlRWxlbWVudC5zaGVldCBpcyBudWxsIGlmIHRoZSBlbGVtZW50IGlzbid0IGNvbm5lY3RlZCB0byB0aGUgRE9NLFxuICAgICAgICAvLyBzbyB0aGlzIG1ldGhvZCByZWFjdHMgdG8gY2hhbmdlcyBpbiBET00gY29ubmVjdGlvbiBmb3IgdGhlIGVsZW1lbnQgaG9zdGluZ1xuICAgICAgICAvLyB0aGUgSFRNTFN0eWxlRWxlbWVudC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gQWxsIHJ1bGVzIGFwcGxpZWQgdmlhIHRoZSBDU1NPTSBhbHNvIGdldCBjbGVhcmVkIHdoZW4gdGhlIGVsZW1lbnQgZGlzY29ubmVjdHMsXG4gICAgICAgIC8vIHNvIHdlIG5lZWQgdG8gYWRkIGEgbmV3IHJ1bGUgZWFjaCB0aW1lIGFuZCBwb3B1bGF0ZSBpdCB3aXRoIHRoZSBzdG9yZWQgcHJvcGVydGllc1xuICAgICAgICBjb25zdCB7IHNoZWV0IH0gPSB0aGlzLnN0eWxlO1xuICAgICAgICBpZiAoc2hlZXQpIHtcbiAgICAgICAgICAgIC8vIFNhZmFyaSB3aWxsIHRocm93IGlmIHdlIHRyeSB0byB1c2UgdGhlIHJldHVybiByZXN1bHQgb2YgaW5zZXJ0UnVsZSgpXG4gICAgICAgICAgICAvLyB0byBpbmRleCB0aGUgcnVsZSBpbmxpbmUsIHNvIHN0b3JlIGFzIGEgY29uc3QgcHJpb3IgdG8gaW5kZXhpbmcuXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vanNkb20vanNkb20gdXNlcyBodHRwczovL2dpdGh1Yi5jb20vTlYvQ1NTT00gZm9yIGl0J3MgQ1NTT00gaW1wbGVtZW50YXRpb24sXG4gICAgICAgICAgICAvLyB3aGljaCBpbXBsZW1lbnRzIHRoZSBET00gTGV2ZWwgMiBzcGVjIGZvciBDU1NTdHlsZVNoZWV0IHdoZXJlIGluc2VydFJ1bGUoKSByZXF1aXJlcyBhbiBpbmRleCBhcmd1bWVudC5cbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gc2hlZXQuaW5zZXJ0UnVsZShcIjpob3N0e31cIiwgc2hlZXQuY3NzUnVsZXMubGVuZ3RoKTtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gc2hlZXQuY3NzUnVsZXNbaW5kZXhdLnN0eWxlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50YXJnZXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgU3R5bGVFbGVtZW50U3R5bGVTaGVldFRhcmdldC5wcm90b3R5cGUsIFwidGFyZ2V0XCIsIHZvaWQgMCk7XG4vKipcbiAqIEhhbmRsZXMgc2V0dGluZyBwcm9wZXJ0aWVzIGZvciBhIG5vcm1hbCBIVE1MRWxlbWVudFxuICovXG5jbGFzcyBFbGVtZW50U3R5bGVTaGVldFRhcmdldCB7XG4gICAgY29uc3RydWN0b3Ioc291cmNlKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gc291cmNlLnN0eWxlO1xuICAgIH1cbiAgICBzZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgICAgICBET00ucXVldWVVcGRhdGUoKCkgPT4gdGhpcy50YXJnZXQuc2V0UHJvcGVydHkobmFtZSwgdmFsdWUpKTtcbiAgICB9XG4gICAgcmVtb3ZlUHJvcGVydHkobmFtZSkge1xuICAgICAgICBET00ucXVldWVVcGRhdGUoKCkgPT4gdGhpcy50YXJnZXQucmVtb3ZlUHJvcGVydHkobmFtZSkpO1xuICAgIH1cbn1cbi8qKlxuICogQ29udHJvbHMgZW1pc3Npb24gZm9yIGRlZmF1bHQgdmFsdWVzLiBUaGlzIGNvbnRyb2wgaXMgY2FwYWJsZVxuICogb2YgZW1pdHRpbmcgdG8gbXVsdGlwbGUge0BsaW5rIFByb3BlcnR5VGFyZ2V0IHwgUHJvcGVydHlUYXJnZXRzfSxcbiAqIGFuZCBvbmx5IGVtaXRzIGlmIGl0IGhhcyBhdCBsZWFzdCBvbmUgcm9vdC5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIFJvb3RTdHlsZVNoZWV0VGFyZ2V0IHtcbiAgICBzZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgICAgICBSb290U3R5bGVTaGVldFRhcmdldC5wcm9wZXJ0aWVzW25hbWVdID0gdmFsdWU7XG4gICAgICAgIGZvciAoY29uc3QgdGFyZ2V0IG9mIFJvb3RTdHlsZVNoZWV0VGFyZ2V0LnJvb3RzLnZhbHVlcygpKSB7XG4gICAgICAgICAgICBQcm9wZXJ0eVRhcmdldE1hbmFnZXIuZ2V0T3JDcmVhdGUoUm9vdFN0eWxlU2hlZXRUYXJnZXQubm9ybWFsaXplUm9vdCh0YXJnZXQpKS5zZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlUHJvcGVydHkobmFtZSkge1xuICAgICAgICBkZWxldGUgUm9vdFN0eWxlU2hlZXRUYXJnZXQucHJvcGVydGllc1tuYW1lXTtcbiAgICAgICAgZm9yIChjb25zdCB0YXJnZXQgb2YgUm9vdFN0eWxlU2hlZXRUYXJnZXQucm9vdHMudmFsdWVzKCkpIHtcbiAgICAgICAgICAgIFByb3BlcnR5VGFyZ2V0TWFuYWdlci5nZXRPckNyZWF0ZShSb290U3R5bGVTaGVldFRhcmdldC5ub3JtYWxpemVSb290KHRhcmdldCkpLnJlbW92ZVByb3BlcnR5KG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyByZWdpc3RlclJvb3Qocm9vdCkge1xuICAgICAgICBjb25zdCB7IHJvb3RzIH0gPSBSb290U3R5bGVTaGVldFRhcmdldDtcbiAgICAgICAgaWYgKCFyb290cy5oYXMocm9vdCkpIHtcbiAgICAgICAgICAgIHJvb3RzLmFkZChyb290KTtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IFByb3BlcnR5VGFyZ2V0TWFuYWdlci5nZXRPckNyZWF0ZSh0aGlzLm5vcm1hbGl6ZVJvb3Qocm9vdCkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gUm9vdFN0eWxlU2hlZXRUYXJnZXQucHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIHRhcmdldC5zZXRQcm9wZXJ0eShrZXksIFJvb3RTdHlsZVNoZWV0VGFyZ2V0LnByb3BlcnRpZXNba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHVucmVnaXN0ZXJSb290KHJvb3QpIHtcbiAgICAgICAgY29uc3QgeyByb290cyB9ID0gUm9vdFN0eWxlU2hlZXRUYXJnZXQ7XG4gICAgICAgIGlmIChyb290cy5oYXMocm9vdCkpIHtcbiAgICAgICAgICAgIHJvb3RzLmRlbGV0ZShyb290KTtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IFByb3BlcnR5VGFyZ2V0TWFuYWdlci5nZXRPckNyZWF0ZShSb290U3R5bGVTaGVldFRhcmdldC5ub3JtYWxpemVSb290KHJvb3QpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIFJvb3RTdHlsZVNoZWV0VGFyZ2V0LnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQucmVtb3ZlUHJvcGVydHkoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBkb2N1bWVudCB3aGVuIHByb3ZpZGVkIHRoZSBkZWZhdWx0IGVsZW1lbnQsXG4gICAgICogb3RoZXJ3aXNlIGlzIGEgbm8tb3BcbiAgICAgKiBAcGFyYW0gcm9vdCAtIHRoZSByb290IHRvIG5vcm1hbGl6ZVxuICAgICAqL1xuICAgIHN0YXRpYyBub3JtYWxpemVSb290KHJvb3QpIHtcbiAgICAgICAgcmV0dXJuIHJvb3QgPT09IGRlZmF1bHRFbGVtZW50ID8gZG9jdW1lbnQgOiByb290O1xuICAgIH1cbn1cblJvb3RTdHlsZVNoZWV0VGFyZ2V0LnJvb3RzID0gbmV3IFNldCgpO1xuUm9vdFN0eWxlU2hlZXRUYXJnZXQucHJvcGVydGllcyA9IHt9O1xuLy8gQ2FjaGVzIFByb3BlcnR5VGFyZ2V0IGluc3RhbmNlc1xuY29uc3QgcHJvcGVydHlUYXJnZXRDYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG4vLyBVc2UgQ29uc3RydWN0YWJsZSBTdHlsZVNoZWV0cyBmb3IgRkFTVCBlbGVtZW50cyB3aGVuIHN1cHBvcnRlZCwgb3RoZXJ3aXNlIHVzZVxuLy8gSFRNTFN0eWxlRWxlbWVudCBpbnN0YW5jZXNcbmNvbnN0IHByb3BlcnR5VGFyZ2V0Q3RvciA9IERPTS5zdXBwb3J0c0Fkb3B0ZWRTdHlsZVNoZWV0c1xuICAgID8gQ29uc3RydWN0YWJsZVN0eWxlU2hlZXRUYXJnZXRcbiAgICA6IFN0eWxlRWxlbWVudFN0eWxlU2hlZXRUYXJnZXQ7XG4vKipcbiAqIE1hbmFnZXMgY3JlYXRpb24gYW5kIGNhY2hpbmcgb2YgUHJvcGVydHlUYXJnZXQgaW5zdGFuY2VzLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY29uc3QgUHJvcGVydHlUYXJnZXRNYW5hZ2VyID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgZ2V0T3JDcmVhdGUoc291cmNlKSB7XG4gICAgICAgIGlmIChwcm9wZXJ0eVRhcmdldENhY2hlLmhhcyhzb3VyY2UpKSB7XG4gICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvbiAqL1xuICAgICAgICAgICAgcmV0dXJuIHByb3BlcnR5VGFyZ2V0Q2FjaGUuZ2V0KHNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHRhcmdldDtcbiAgICAgICAgaWYgKHNvdXJjZSA9PT0gZGVmYXVsdEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRhcmdldCA9IG5ldyBSb290U3R5bGVTaGVldFRhcmdldCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIERvY3VtZW50KSB7XG4gICAgICAgICAgICB0YXJnZXQgPSBET00uc3VwcG9ydHNBZG9wdGVkU3R5bGVTaGVldHNcbiAgICAgICAgICAgICAgICA/IG5ldyBEb2N1bWVudFN0eWxlU2hlZXRUYXJnZXQoKVxuICAgICAgICAgICAgICAgIDogbmV3IEhlYWRTdHlsZUVsZW1lbnRTdHlsZVNoZWV0VGFyZ2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNGYXN0RWxlbWVudChzb3VyY2UpKSB7XG4gICAgICAgICAgICB0YXJnZXQgPSBuZXcgcHJvcGVydHlUYXJnZXRDdG9yKHNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXQgPSBuZXcgRWxlbWVudFN0eWxlU2hlZXRUYXJnZXQoc291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICBwcm9wZXJ0eVRhcmdldENhY2hlLnNldChzb3VyY2UsIHRhcmdldCk7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfSxcbn0pO1xuIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgQ1NTRGlyZWN0aXZlLCBkZWZhdWx0RXhlY3V0aW9uQ29udGV4dCwgRkFTVEVsZW1lbnQsIG9ic2VydmFibGUsIE9ic2VydmFibGUsIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBjb21wb3NlZFBhcmVudCB9IGZyb20gXCIuLi91dGlsaXRpZXMvY29tcG9zZWQtcGFyZW50LmpzXCI7XG5pbXBvcnQgeyBjb21wb3NlZENvbnRhaW5zIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9jb21wb3NlZC1jb250YWlucy5qc1wiO1xuaW1wb3J0IHsgUHJvcGVydHlUYXJnZXRNYW5hZ2VyLCBSb290U3R5bGVTaGVldFRhcmdldCwgfSBmcm9tIFwiLi9jdXN0b20tcHJvcGVydHktbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgZGVmYXVsdEVsZW1lbnQgfSBmcm9tIFwiLi9jdXN0b20tcHJvcGVydHktbWFuYWdlci5qc1wiO1xuLyoqXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgKERlc2lnblRva2VuOmludGVyZmFjZSl9XG4gKi9cbmNsYXNzIERlc2lnblRva2VuSW1wbCBleHRlbmRzIENTU0RpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IoY29uZmlndXJhdGlvbikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJzID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgdGhpcy5fYXBwbGllZFRvID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzLm5hbWUgPSBjb25maWd1cmF0aW9uLm5hbWU7XG4gICAgICAgIGlmIChjb25maWd1cmF0aW9uLmNzc0N1c3RvbVByb3BlcnR5TmFtZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5jc3NDdXN0b21Qcm9wZXJ0eSA9IGAtLSR7Y29uZmlndXJhdGlvbi5jc3NDdXN0b21Qcm9wZXJ0eU5hbWV9YDtcbiAgICAgICAgICAgIHRoaXMuY3NzVmFyID0gYHZhcigke3RoaXMuY3NzQ3VzdG9tUHJvcGVydHl9KWA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pZCA9IERlc2lnblRva2VuSW1wbC51bmlxdWVJZCgpO1xuICAgICAgICBEZXNpZ25Ub2tlbkltcGwudG9rZW5zQnlJZC5zZXQodGhpcy5pZCwgdGhpcyk7XG4gICAgfVxuICAgIGdldCBhcHBsaWVkVG8oKSB7XG4gICAgICAgIHJldHVybiBbLi4udGhpcy5fYXBwbGllZFRvXTtcbiAgICB9XG4gICAgc3RhdGljIGZyb20obmFtZU9yQ29uZmlnKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGVzaWduVG9rZW5JbXBsKHtcbiAgICAgICAgICAgIG5hbWU6IHR5cGVvZiBuYW1lT3JDb25maWcgPT09IFwic3RyaW5nXCIgPyBuYW1lT3JDb25maWcgOiBuYW1lT3JDb25maWcubmFtZSxcbiAgICAgICAgICAgIGNzc0N1c3RvbVByb3BlcnR5TmFtZTogdHlwZW9mIG5hbWVPckNvbmZpZyA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgID8gbmFtZU9yQ29uZmlnXG4gICAgICAgICAgICAgICAgOiBuYW1lT3JDb25maWcuY3NzQ3VzdG9tUHJvcGVydHlOYW1lID09PSB2b2lkIDBcbiAgICAgICAgICAgICAgICAgICAgPyBuYW1lT3JDb25maWcubmFtZVxuICAgICAgICAgICAgICAgICAgICA6IG5hbWVPckNvbmZpZy5jc3NDdXN0b21Qcm9wZXJ0eU5hbWUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgaXNDU1NEZXNpZ25Ub2tlbih0b2tlbikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHRva2VuLmNzc0N1c3RvbVByb3BlcnR5ID09PSBcInN0cmluZ1wiO1xuICAgIH1cbiAgICBzdGF0aWMgaXNEZXJpdmVkRGVzaWduVG9rZW5WYWx1ZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYSB0b2tlbiBieSBJRC4gUmV0dXJucyB1bmRlZmluZWQgaWYgdGhlIHRva2VuIHdhcyBub3QgZm91bmQuXG4gICAgICogQHBhcmFtIGlkIC0gVGhlIElEIG9mIHRoZSB0b2tlblxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgc3RhdGljIGdldFRva2VuQnlJZChpZCkge1xuICAgICAgICByZXR1cm4gRGVzaWduVG9rZW5JbXBsLnRva2Vuc0J5SWQuZ2V0KGlkKTtcbiAgICB9XG4gICAgZ2V0T3JDcmVhdGVTdWJzY3JpYmVyU2V0KHRhcmdldCA9IHRoaXMpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnN1YnNjcmliZXJzLmdldCh0YXJnZXQpIHx8XG4gICAgICAgICAgICAodGhpcy5zdWJzY3JpYmVycy5zZXQodGFyZ2V0LCBuZXcgU2V0KCkpICYmIHRoaXMuc3Vic2NyaWJlcnMuZ2V0KHRhcmdldCkpKTtcbiAgICB9XG4gICAgY3JlYXRlQ1NTKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jc3NWYXIgfHwgXCJcIjtcbiAgICB9XG4gICAgZ2V0VmFsdWVGb3IoZWxlbWVudCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IERlc2lnblRva2VuTm9kZS5nZXRPckNyZWF0ZShlbGVtZW50KS5nZXQodGhpcyk7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBWYWx1ZSBjb3VsZCBub3QgYmUgcmV0cmlldmVkIGZvciB0b2tlbiBuYW1lZCBcIiR7dGhpcy5uYW1lfVwiLiBFbnN1cmUgdGhlIHZhbHVlIGlzIHNldCBmb3IgJHtlbGVtZW50fSBvciBhbiBhbmNlc3RvciBvZiAke2VsZW1lbnR9LmApO1xuICAgIH1cbiAgICBzZXRWYWx1ZUZvcihlbGVtZW50LCB2YWx1ZSkge1xuICAgICAgICB0aGlzLl9hcHBsaWVkVG8uYWRkKGVsZW1lbnQpO1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEZXNpZ25Ub2tlbkltcGwpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdGhpcy5hbGlhcyh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgRGVzaWduVG9rZW5Ob2RlLmdldE9yQ3JlYXRlKGVsZW1lbnQpLnNldCh0aGlzLCB2YWx1ZSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBkZWxldGVWYWx1ZUZvcihlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2FwcGxpZWRUby5kZWxldGUoZWxlbWVudCk7XG4gICAgICAgIGlmIChEZXNpZ25Ub2tlbk5vZGUuZXhpc3RzRm9yKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICBEZXNpZ25Ub2tlbk5vZGUuZ2V0T3JDcmVhdGUoZWxlbWVudCkuZGVsZXRlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB3aXRoRGVmYXVsdCh2YWx1ZSkge1xuICAgICAgICB0aGlzLnNldFZhbHVlRm9yKGRlZmF1bHRFbGVtZW50LCB2YWx1ZSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzdWJzY3JpYmUoc3Vic2NyaWJlciwgdGFyZ2V0KSB7XG4gICAgICAgIGNvbnN0IHN1YnNjcmliZXJTZXQgPSB0aGlzLmdldE9yQ3JlYXRlU3Vic2NyaWJlclNldCh0YXJnZXQpO1xuICAgICAgICBpZiAodGFyZ2V0ICYmICFEZXNpZ25Ub2tlbk5vZGUuZXhpc3RzRm9yKHRhcmdldCkpIHtcbiAgICAgICAgICAgIERlc2lnblRva2VuTm9kZS5nZXRPckNyZWF0ZSh0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc3Vic2NyaWJlclNldC5oYXMoc3Vic2NyaWJlcikpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXJTZXQuYWRkKHN1YnNjcmliZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKHN1YnNjcmliZXIsIHRhcmdldCkge1xuICAgICAgICBjb25zdCBsaXN0ID0gdGhpcy5zdWJzY3JpYmVycy5nZXQodGFyZ2V0IHx8IHRoaXMpO1xuICAgICAgICBpZiAobGlzdCAmJiBsaXN0LmhhcyhzdWJzY3JpYmVyKSkge1xuICAgICAgICAgICAgbGlzdC5kZWxldGUoc3Vic2NyaWJlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgc3Vic2NyaWJlcnMgdGhhdCB0aGUgdmFsdWUgZm9yIGFuIGVsZW1lbnQgaGFzIGNoYW5nZWQuXG4gICAgICogQHBhcmFtIGVsZW1lbnQgLSBUaGUgZWxlbWVudCB0byBlbWl0IGEgbm90aWZpY2F0aW9uIGZvclxuICAgICAqL1xuICAgIG5vdGlmeShlbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHJlY29yZCA9IE9iamVjdC5mcmVlemUoeyB0b2tlbjogdGhpcywgdGFyZ2V0OiBlbGVtZW50IH0pO1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpYmVycy5oYXModGhpcykpIHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlcnMuZ2V0KHRoaXMpLmZvckVhY2goc3ViID0+IHN1Yi5oYW5kbGVDaGFuZ2UocmVjb3JkKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3Vic2NyaWJlcnMuaGFzKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmliZXJzLmdldChlbGVtZW50KS5mb3JFYWNoKHN1YiA9PiBzdWIuaGFuZGxlQ2hhbmdlKHJlY29yZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFsaWFzIHRoZSB0b2tlbiB0byB0aGUgcHJvdmlkZWQgdG9rZW4uXG4gICAgICogQHBhcmFtIHRva2VuIC0gdGhlIHRva2VuIHRvIGFsaWFzIHRvXG4gICAgICovXG4gICAgYWxpYXModG9rZW4pIHtcbiAgICAgICAgcmV0dXJuICgodGFyZ2V0KSA9PiB0b2tlbi5nZXRWYWx1ZUZvcih0YXJnZXQpKTtcbiAgICB9XG59XG5EZXNpZ25Ub2tlbkltcGwudW5pcXVlSWQgPSAoKCkgPT4ge1xuICAgIGxldCBpZCA9IDA7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgaWQrKztcbiAgICAgICAgcmV0dXJuIGlkLnRvU3RyaW5nKDE2KTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogVG9rZW4gc3RvcmFnZSBieSB0b2tlbiBJRFxuICovXG5EZXNpZ25Ub2tlbkltcGwudG9rZW5zQnlJZCA9IG5ldyBNYXAoKTtcbmNsYXNzIEN1c3RvbVByb3BlcnR5UmVmbGVjdG9yIHtcbiAgICBzdGFydFJlZmxlY3Rpb24odG9rZW4sIHRhcmdldCkge1xuICAgICAgICB0b2tlbi5zdWJzY3JpYmUodGhpcywgdGFyZ2V0KTtcbiAgICAgICAgdGhpcy5oYW5kbGVDaGFuZ2UoeyB0b2tlbiwgdGFyZ2V0IH0pO1xuICAgIH1cbiAgICBzdG9wUmVmbGVjdGlvbih0b2tlbiwgdGFyZ2V0KSB7XG4gICAgICAgIHRva2VuLnVuc3Vic2NyaWJlKHRoaXMsIHRhcmdldCk7XG4gICAgICAgIHRoaXMucmVtb3ZlKHRva2VuLCB0YXJnZXQpO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UocmVjb3JkKSB7XG4gICAgICAgIGNvbnN0IHsgdG9rZW4sIHRhcmdldCB9ID0gcmVjb3JkO1xuICAgICAgICB0aGlzLmFkZCh0b2tlbiwgdGFyZ2V0KTtcbiAgICB9XG4gICAgYWRkKHRva2VuLCB0YXJnZXQpIHtcbiAgICAgICAgUHJvcGVydHlUYXJnZXRNYW5hZ2VyLmdldE9yQ3JlYXRlKHRhcmdldCkuc2V0UHJvcGVydHkodG9rZW4uY3NzQ3VzdG9tUHJvcGVydHksIHRoaXMucmVzb2x2ZUNTU1ZhbHVlKERlc2lnblRva2VuTm9kZS5nZXRPckNyZWF0ZSh0YXJnZXQpLmdldCh0b2tlbikpKTtcbiAgICB9XG4gICAgcmVtb3ZlKHRva2VuLCB0YXJnZXQpIHtcbiAgICAgICAgUHJvcGVydHlUYXJnZXRNYW5hZ2VyLmdldE9yQ3JlYXRlKHRhcmdldCkucmVtb3ZlUHJvcGVydHkodG9rZW4uY3NzQ3VzdG9tUHJvcGVydHkpO1xuICAgIH1cbiAgICByZXNvbHZlQ1NTVmFsdWUodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS5jcmVhdGVDU1MgPT09IFwiZnVuY3Rpb25cIiA/IHZhbHVlLmNyZWF0ZUNTUygpIDogdmFsdWU7XG4gICAgfVxufVxuLyoqXG4gKiBBIGxpZ2h0IHdyYXBwZXIgYXJvdW5kIEJpbmRpbmdPYnNlcnZlciB0byBoYW5kbGUgdmFsdWUgY2FjaGluZyBhbmRcbiAqIHRva2VuIG5vdGlmaWNhdGlvblxuICovXG5jbGFzcyBEZXNpZ25Ub2tlbkJpbmRpbmdPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3Ioc291cmNlLCB0b2tlbiwgbm9kZSkge1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy50b2tlbiA9IHRva2VuO1xuICAgICAgICB0aGlzLm5vZGUgPSBub2RlO1xuICAgICAgICB0aGlzLmRlcGVuZGVuY2llcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IE9ic2VydmFibGUuYmluZGluZyhzb3VyY2UsIHRoaXMsIGZhbHNlKTtcbiAgICAgICAgLy8gVGhpcyBpcyBhIGxpdHRsZSBiaXQgaGFja3kgYmVjYXVzZSBpdCdzIHVzaW5nIGludGVybmFsIEFQSXMgb2YgQmluZGluZ09ic2VydmVySW1wbC5cbiAgICAgICAgLy8gQmluZGluZ09ic2VydmVySW1wbCBxdWV1ZXMgdXBkYXRlcyB0byBiYXRjaCBpdCdzIG5vdGlmaWNhdGlvbnMgd2hpY2ggZG9lc24ndCB3b3JrIGZvciB0aGlzXG4gICAgICAgIC8vIHNjZW5hcmlvIGJlY2F1c2UgdGhlIERlc2lnblRva2VuLmdldFZhbHVlRm9yIEFQSSBpcyBub3QgYXN5bmMuIFdpdGhvdXQgdGhpcywgdXNpbmcgRGVzaWduVG9rZW4uZ2V0VmFsdWVGb3IoKVxuICAgICAgICAvLyBhZnRlciBEZXNpZ25Ub2tlbi5zZXRWYWx1ZUZvcigpIHdoZW4gc2V0dGluZyBhIGRlcGVuZGVuY3kgb2YgdGhlIHZhbHVlIGJlaW5nIHJldHJpZXZlZCBjYW4gcmV0dXJuIGEgc3RhbGVcbiAgICAgICAgLy8gdmFsdWUuIEFzc2lnbmluZyAuaGFuZGxlQ2hhbmdlIHRvIC5jYWxsIGZvcmNlcyBpbW1lZGlhdGUgaW52b2NhdGlvbiBvZiB0aGlzIGNsYXNzZXMgaGFuZGxlQ2hhbmdlKCkgbWV0aG9kLFxuICAgICAgICAvLyBhbGxvd2luZyByZXNvbHV0aW9uIG9mIHZhbHVlcyBzeW5jaHJvbm91c2x5LlxuICAgICAgICAvLyBUT0RPOiBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L2Zhc3QvaXNzdWVzLzUxMTBcbiAgICAgICAgdGhpcy5vYnNlcnZlci5oYW5kbGVDaGFuZ2UgPSB0aGlzLm9ic2VydmVyLmNhbGw7XG4gICAgICAgIHRoaXMuaGFuZGxlQ2hhbmdlKCk7XG4gICAgfVxuICAgIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBoYW5kbGVDaGFuZ2UoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLm5vZGUuc3RvcmUuc2V0KHRoaXMudG9rZW4sIHRoaXMub2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLm5vZGUudGFyZ2V0LCBkZWZhdWx0RXhlY3V0aW9uQ29udGV4dCkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBTdG9yZXMgcmVzb2x2ZWQgdG9rZW4vdmFsdWUgcGFpcnMgYW5kIG5vdGlmaWVzIG9uIGNoYW5nZXNcbiAqL1xuY2xhc3MgU3RvcmUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnZhbHVlcyA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgc2V0KHRva2VuLCB2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZXMuZ2V0KHRva2VuKSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzLnNldCh0b2tlbiwgdmFsdWUpO1xuICAgICAgICAgICAgT2JzZXJ2YWJsZS5nZXROb3RpZmllcih0aGlzKS5ub3RpZnkodG9rZW4uaWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCh0b2tlbikge1xuICAgICAgICBPYnNlcnZhYmxlLnRyYWNrKHRoaXMsIHRva2VuLmlkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzLmdldCh0b2tlbik7XG4gICAgfVxuICAgIGRlbGV0ZSh0b2tlbikge1xuICAgICAgICB0aGlzLnZhbHVlcy5kZWxldGUodG9rZW4pO1xuICAgICAgICBPYnNlcnZhYmxlLmdldE5vdGlmaWVyKHRoaXMpLm5vdGlmeSh0b2tlbi5pZCk7XG4gICAgfVxuICAgIGFsbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzLmVudHJpZXMoKTtcbiAgICB9XG59XG5jb25zdCBub2RlQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgY2hpbGRUb1BhcmVudCA9IG5ldyBXZWFrTWFwKCk7XG4vKipcbiAqIEEgbm9kZSByZXNwb25zaWJsZSBmb3Igc2V0dGluZyBhbmQgZ2V0dGluZyB0b2tlbiB2YWx1ZXMsXG4gKiBlbWl0dGluZyB2YWx1ZXMgdG8gQ1NTIGN1c3RvbSBwcm9wZXJ0aWVzLCBhbmQgbWFpbnRhaW5pbmdcbiAqIGluaGVyaXRhbmNlIHN0cnVjdHVyZXMuXG4gKi9cbmNsYXNzIERlc2lnblRva2VuTm9kZSB7XG4gICAgY29uc3RydWN0b3IodGFyZ2V0KSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcmVzIGFsbCByZXNvbHZlZCB0b2tlbiB2YWx1ZXMgZm9yIGEgbm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdG9yZSA9IG5ldyBTdG9yZSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQWxsIGNoaWxkcmVuIGFzc2lnbmVkIHRvIHRoZSBub2RlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbGwgdmFsdWVzIGV4cGxpY2l0bHkgYXNzaWduZWQgdG8gdGhlIG5vZGUgaW4gdGhlaXIgcmF3IGZvcm1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYXNzaWduZWRWYWx1ZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUb2tlbnMgY3VycmVudGx5IGJlaW5nIHJlZmxlY3RlZCB0byBDU1MgY3VzdG9tIHByb3BlcnRpZXNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVmbGVjdGluZyA9IG5ldyBTZXQoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJpbmRpbmcgb2JzZXJ2ZXJzIGZvciBhc3NpZ25lZCBhbmQgaW5oZXJpdGVkIGRlcml2ZWQgdmFsdWVzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5iaW5kaW5nT2JzZXJ2ZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRW1pdHMgbm90aWZpY2F0aW9ucyB0byB0b2tlbiB3aGVuIHRva2VuIHZhbHVlc1xuICAgICAgICAgKiBjaGFuZ2UgdGhlIERlc2lnblRva2VuTm9kZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50b2tlblZhbHVlQ2hhbmdlSGFuZGxlciA9IHtcbiAgICAgICAgICAgIGhhbmRsZUNoYW5nZTogKHNvdXJjZSwgYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBEZXNpZ25Ub2tlbkltcGwuZ2V0VG9rZW5CeUlkKGFyZyk7XG4gICAgICAgICAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdGlmeSBhbnkgdG9rZW4gc3Vic2NyaWJlcnNcbiAgICAgICAgICAgICAgICAgICAgdG9rZW4ubm90aWZ5KHRoaXMudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDU1NUb2tlblJlZmxlY3Rpb24oc291cmNlLCB0b2tlbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgbm9kZUNhY2hlLnNldCh0YXJnZXQsIHRoaXMpO1xuICAgICAgICAvLyBNYXAgc3RvcmUgY2hhbmdlIG5vdGlmaWNhdGlvbnMgdG8gdG9rZW4gY2hhbmdlIG5vdGlmaWNhdGlvbnNcbiAgICAgICAgT2JzZXJ2YWJsZS5nZXROb3RpZmllcih0aGlzLnN0b3JlKS5zdWJzY3JpYmUodGhpcy50b2tlblZhbHVlQ2hhbmdlSGFuZGxlcik7XG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBGQVNURWxlbWVudCkge1xuICAgICAgICAgICAgdGFyZ2V0LiRmYXN0Q29udHJvbGxlci5hZGRCZWhhdmlvcnMoW3RoaXNdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0YXJnZXQuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYmluZCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBEZXNpZ25Ub2tlbk5vZGUgZm9yIGFuIGVsZW1lbnQuXG4gICAgICogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBpZiBvbmUgZG9lcyBub3QgYWxyZWFkeSBleGlzdCBmb3IgYSBub2RlLFxuICAgICAqIG90aGVyd2lzZSByZXR1cm5zIHRoZSBjYWNoZWQgaW5zdGFuY2VcbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YXJnZXQgLSBUaGUgSFRNTCBlbGVtZW50IHRvIHJldHJpZXZlIGEgRGVzaWduVG9rZW5Ob2RlIGZvclxuICAgICAqL1xuICAgIHN0YXRpYyBnZXRPckNyZWF0ZSh0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIG5vZGVDYWNoZS5nZXQodGFyZ2V0KSB8fCBuZXcgRGVzaWduVG9rZW5Ob2RlKHRhcmdldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgYSBEZXNpZ25Ub2tlbk5vZGUgaGFzIGJlZW4gY3JlYXRlZCBmb3IgYSB0YXJnZXRcbiAgICAgKiBAcGFyYW0gdGFyZ2V0IC0gVGhlIGVsZW1lbnQgdG8gdGVzdFxuICAgICAqL1xuICAgIHN0YXRpYyBleGlzdHNGb3IodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBub2RlQ2FjaGUuaGFzKHRhcmdldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlYXJjaGVzIGZvciBhbmQgcmV0dXJuIHRoZSBuZWFyZXN0IHBhcmVudCBEZXNpZ25Ub2tlbk5vZGUuXG4gICAgICogTnVsbCBpcyByZXR1cm5lZCBpZiBubyBub2RlIGlzIGZvdW5kIG9yIHRoZSBub2RlIHByb3ZpZGVkIGlzIGZvciBhIGRlZmF1bHQgZWxlbWVudC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZmluZFBhcmVudChub2RlKSB7XG4gICAgICAgIGlmICghKGRlZmF1bHRFbGVtZW50ID09PSBub2RlLnRhcmdldCkpIHtcbiAgICAgICAgICAgIGxldCBwYXJlbnQgPSBjb21wb3NlZFBhcmVudChub2RlLnRhcmdldCk7XG4gICAgICAgICAgICB3aGlsZSAocGFyZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVDYWNoZS5oYXMocGFyZW50KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZUNhY2hlLmdldChwYXJlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBjb21wb3NlZFBhcmVudChwYXJlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIERlc2lnblRva2VuTm9kZS5nZXRPckNyZWF0ZShkZWZhdWx0RWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBjbG9zZXN0IG5vZGUgd2l0aCBhIHZhbHVlIGV4cGxpY2l0bHkgYXNzaWduZWQgZm9yIGEgdG9rZW4sIG90aGVyd2lzZSBudWxsLlxuICAgICAqIEBwYXJhbSB0b2tlbiAtIFRoZSB0b2tlbiB0byBsb29rIGZvclxuICAgICAqIEBwYXJhbSBzdGFydCAtIFRoZSBub2RlIHRvIHN0YXJ0IGxvb2tpbmcgZm9yIHZhbHVlIGFzc2lnbm1lbnRcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHN0YXRpYyBmaW5kQ2xvc2VzdEFzc2lnbmVkTm9kZSh0b2tlbiwgc3RhcnQpIHtcbiAgICAgICAgbGV0IGN1cnJlbnQgPSBzdGFydDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnQuaGFzKHRva2VuKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50XG4gICAgICAgICAgICAgICAgPyBjdXJyZW50LnBhcmVudFxuICAgICAgICAgICAgICAgIDogY3VycmVudC50YXJnZXQgIT09IGRlZmF1bHRFbGVtZW50XG4gICAgICAgICAgICAgICAgICAgID8gRGVzaWduVG9rZW5Ob2RlLmdldE9yQ3JlYXRlKGRlZmF1bHRFbGVtZW50KVxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIH0gd2hpbGUgKGN1cnJlbnQgIT09IG51bGwpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHBhcmVudCBEZXNpZ25Ub2tlbk5vZGUsIG9yIG51bGwuXG4gICAgICovXG4gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgcmV0dXJuIGNoaWxkVG9QYXJlbnQuZ2V0KHRoaXMpIHx8IG51bGw7XG4gICAgfVxuICAgIHVwZGF0ZUNTU1Rva2VuUmVmbGVjdGlvbihzb3VyY2UsIHRva2VuKSB7XG4gICAgICAgIGlmIChEZXNpZ25Ub2tlbkltcGwuaXNDU1NEZXNpZ25Ub2tlbih0b2tlbikpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgY29uc3QgcmVmbGVjdGluZyA9IHRoaXMuaXNSZWZsZWN0aW5nKHRva2VuKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRWYWx1ZSA9IHBhcmVudC5nZXQodG9rZW4pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZVZhbHVlID0gc291cmNlLmdldCh0b2tlbik7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudFZhbHVlICE9PSBzb3VyY2VWYWx1ZSAmJiAhcmVmbGVjdGluZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZmxlY3RUb0NTUyh0b2tlbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcmVudFZhbHVlID09PSBzb3VyY2VWYWx1ZSAmJiByZWZsZWN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcFJlZmxlY3RUb0NTUyh0b2tlbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXJlZmxlY3RpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZmxlY3RUb0NTUyh0b2tlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGEgdG9rZW4gaGFzIGJlZW4gYXNzaWduZWQgYW4gZXhwbGljaXQgdmFsdWUgdGhlIG5vZGUuXG4gICAgICogQHBhcmFtIHRva2VuIC0gdGhlIHRva2VuIHRvIGNoZWNrLlxuICAgICAqL1xuICAgIGhhcyh0b2tlbikge1xuICAgICAgICByZXR1cm4gdGhpcy5hc3NpZ25lZFZhbHVlcy5oYXModG9rZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSB2YWx1ZSBvZiBhIHRva2VuIGZvciBhIG5vZGVcbiAgICAgKiBAcGFyYW0gdG9rZW4gLSBUaGUgdG9rZW4gdG8gcmV0cmlldmUgdGhlIHZhbHVlIGZvclxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgZ2V0KHRva2VuKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5zdG9yZS5nZXQodG9rZW4pO1xuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJhdyA9IHRoaXMuZ2V0UmF3KHRva2VuKTtcbiAgICAgICAgaWYgKHJhdyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmh5ZHJhdGUodG9rZW4sIHJhdyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXQodG9rZW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgcmF3IGFzc2lnbmVkIHZhbHVlIG9mIGEgdG9rZW4gZnJvbSB0aGUgbmVhcmVzdCBhc3NpZ25lZCBub2RlLlxuICAgICAqIEBwYXJhbSB0b2tlbiAtIFRoZSB0b2tlbiB0byByZXRyaWV2ZSBhIHJhdyB2YWx1ZSBmb3JcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGdldFJhdyh0b2tlbikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh0aGlzLmFzc2lnbmVkVmFsdWVzLmhhcyh0b2tlbikpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFzc2lnbmVkVmFsdWVzLmdldCh0b2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChfYSA9IERlc2lnblRva2VuTm9kZS5maW5kQ2xvc2VzdEFzc2lnbmVkTm9kZSh0b2tlbiwgdGhpcykpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRSYXcodG9rZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIGEgdG9rZW4gdG8gYSB2YWx1ZSBmb3IgYSBub2RlXG4gICAgICogQHBhcmFtIHRva2VuIC0gVGhlIHRva2VuIHRvIHNldFxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBzZXQgdGhlIHRva2VuIHRvXG4gICAgICovXG4gICAgc2V0KHRva2VuLCB2YWx1ZSkge1xuICAgICAgICBpZiAoRGVzaWduVG9rZW5JbXBsLmlzRGVyaXZlZERlc2lnblRva2VuVmFsdWUodGhpcy5hc3NpZ25lZFZhbHVlcy5nZXQodG9rZW4pKSkge1xuICAgICAgICAgICAgdGhpcy50ZWFyRG93bkJpbmRpbmdPYnNlcnZlcih0b2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hc3NpZ25lZFZhbHVlcy5zZXQodG9rZW4sIHZhbHVlKTtcbiAgICAgICAgaWYgKERlc2lnblRva2VuSW1wbC5pc0Rlcml2ZWREZXNpZ25Ub2tlblZhbHVlKHZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy5zZXR1cEJpbmRpbmdPYnNlcnZlcih0b2tlbiwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdG9yZS5zZXQodG9rZW4sIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIGEgdG9rZW4gdmFsdWUgZm9yIHRoZSBub2RlLlxuICAgICAqIEBwYXJhbSB0b2tlbiAtIFRoZSB0b2tlbiB0byBkZWxldGUgdGhlIHZhbHVlIGZvclxuICAgICAqL1xuICAgIGRlbGV0ZSh0b2tlbikge1xuICAgICAgICB0aGlzLmFzc2lnbmVkVmFsdWVzLmRlbGV0ZSh0b2tlbik7XG4gICAgICAgIHRoaXMudGVhckRvd25CaW5kaW5nT2JzZXJ2ZXIodG9rZW4pO1xuICAgICAgICBjb25zdCB1cHN0cmVhbSA9IHRoaXMuZ2V0UmF3KHRva2VuKTtcbiAgICAgICAgaWYgKHVwc3RyZWFtKSB7XG4gICAgICAgICAgICB0aGlzLmh5ZHJhdGUodG9rZW4sIHVwc3RyZWFtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcmUuZGVsZXRlKHRva2VuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VkIHdoZW4gdGhlIERlc2lnblRva2VuTm9kZS50YXJnZXQgaXMgYXR0YWNoZWQgdG8gdGhlIGRvY3VtZW50XG4gICAgICovXG4gICAgYmluZCgpIHtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gRGVzaWduVG9rZW5Ob2RlLmZpbmRQYXJlbnQodGhpcyk7XG4gICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB0aGlzLmFzc2lnbmVkVmFsdWVzLmtleXMoKSkge1xuICAgICAgICAgICAga2V5Lm5vdGlmeSh0aGlzLnRhcmdldCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSW52b2tlZCB3aGVuIHRoZSBEZXNpZ25Ub2tlbk5vZGUudGFyZ2V0IGlzIGRldGFjaGVkIGZyb20gdGhlIGRvY3VtZW50XG4gICAgICovXG4gICAgdW5iaW5kKCkge1xuICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IGNoaWxkVG9QYXJlbnQuZ2V0KHRoaXMpO1xuICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdG9rZW4gb2YgdGhpcy5iaW5kaW5nT2JzZXJ2ZXJzLmtleXMoKSkge1xuICAgICAgICAgICAgdGhpcy50ZWFyRG93bkJpbmRpbmdPYnNlcnZlcih0b2tlbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwZW5kcyBhIGNoaWxkIHRvIGEgcGFyZW50IERlc2lnblRva2VuTm9kZS5cbiAgICAgKiBAcGFyYW0gY2hpbGQgLSBUaGUgY2hpbGQgdG8gYXBwZW5kIHRvIHRoZSBub2RlXG4gICAgICovXG4gICAgYXBwZW5kQ2hpbGQoY2hpbGQpIHtcbiAgICAgICAgaWYgKGNoaWxkLnBhcmVudCkge1xuICAgICAgICAgICAgY2hpbGRUb1BhcmVudC5nZXQoY2hpbGQpLnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZVBhcmVudCA9IHRoaXMuY2hpbGRyZW4uZmlsdGVyKHggPT4gY2hpbGQuY29udGFpbnMoeCkpO1xuICAgICAgICBjaGlsZFRvUGFyZW50LnNldChjaGlsZCwgdGhpcyk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgICAgIHJlUGFyZW50LmZvckVhY2goeCA9PiBjaGlsZC5hcHBlbmRDaGlsZCh4KSk7XG4gICAgICAgIE9ic2VydmFibGUuZ2V0Tm90aWZpZXIodGhpcy5zdG9yZSkuc3Vic2NyaWJlKGNoaWxkKTtcbiAgICAgICAgLy8gSG93IGNhbiB3ZSBub3Qgbm90aWZ5ICpldmVyeSogc3Vic2NyaWJlcj9cbiAgICAgICAgZm9yIChjb25zdCBbdG9rZW4sIHZhbHVlXSBvZiB0aGlzLnN0b3JlLmFsbCgpKSB7XG4gICAgICAgICAgICBjaGlsZC5oeWRyYXRlKHRva2VuLCB0aGlzLmJpbmRpbmdPYnNlcnZlcnMuaGFzKHRva2VuKSA/IHRoaXMuZ2V0UmF3KHRva2VuKSA6IHZhbHVlKTtcbiAgICAgICAgICAgIC8vIE5lZWQgdG8gc3RvcCByZWZsZWN0aW5nIGFueSB0b2tlbnMgdGhhdCBjYW4gbm93IGJlIGluaGVyaXRlZFxuICAgICAgICAgICAgY2hpbGQudXBkYXRlQ1NTVG9rZW5SZWZsZWN0aW9uKGNoaWxkLnN0b3JlLCB0b2tlbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGNoaWxkIGZyb20gYSBub2RlLlxuICAgICAqIEBwYXJhbSBjaGlsZCAtIFRoZSBjaGlsZCB0byByZW1vdmUuXG4gICAgICovXG4gICAgcmVtb3ZlQ2hpbGQoY2hpbGQpIHtcbiAgICAgICAgY29uc3QgY2hpbGRJbmRleCA9IHRoaXMuY2hpbGRyZW4uaW5kZXhPZihjaGlsZCk7XG4gICAgICAgIGlmIChjaGlsZEluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoY2hpbGRJbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgT2JzZXJ2YWJsZS5nZXROb3RpZmllcih0aGlzLnN0b3JlKS51bnN1YnNjcmliZShjaGlsZCk7XG4gICAgICAgIGlmIChjaGlsZC5wYXJlbnQgIT09IHRoaXMpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWxldGVkID0gY2hpbGRUb1BhcmVudC5kZWxldGUoY2hpbGQpO1xuICAgICAgICBmb3IgKGNvbnN0IFt0b2tlbl0gb2YgdGhpcy5zdG9yZS5hbGwoKSkge1xuICAgICAgICAgICAgY2hpbGQuaHlkcmF0ZSh0b2tlbiwgY2hpbGQuZ2V0UmF3KHRva2VuKSk7XG4gICAgICAgICAgICAvLyBOZWVkIHRvIHN0YXJ0IHJlZmxlY3RpbmcgYW55IGFzc2lnbmVkIHZhbHVlcyB0aGF0IHdlcmUgcHJldmlvdXNseSBpbmhlcml0ZWRcbiAgICAgICAgICAgIGNoaWxkLnVwZGF0ZUNTU1Rva2VuUmVmbGVjdGlvbihjaGlsZC5zdG9yZSwgdG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWxldGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUZXN0cyB3aGV0aGVyIGEgcHJvdmlkZWQgbm9kZSBpcyBjb250YWluZWQgYnlcbiAgICAgKiB0aGUgY2FsbGluZyBub2RlLlxuICAgICAqIEBwYXJhbSB0ZXN0IC0gVGhlIG5vZGUgdG8gdGVzdFxuICAgICAqL1xuICAgIGNvbnRhaW5zKHRlc3QpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBvc2VkQ29udGFpbnModGhpcy50YXJnZXQsIHRlc3QudGFyZ2V0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5zdHJ1Y3RzIHRoZSBub2RlIHRvIHJlZmxlY3QgYSBkZXNpZ24gdG9rZW4gZm9yIHRoZSBwcm92aWRlZCB0b2tlbi5cbiAgICAgKiBAcGFyYW0gdG9rZW4gLSBUaGUgZGVzaWduIHRva2VuIHRvIHJlZmxlY3RcbiAgICAgKi9cbiAgICByZWZsZWN0VG9DU1ModG9rZW4pIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzUmVmbGVjdGluZyh0b2tlbikpIHtcbiAgICAgICAgICAgIHRoaXMucmVmbGVjdGluZy5hZGQodG9rZW4pO1xuICAgICAgICAgICAgRGVzaWduVG9rZW5Ob2RlLmNzc0N1c3RvbVByb3BlcnR5UmVmbGVjdG9yLnN0YXJ0UmVmbGVjdGlvbih0b2tlbiwgdGhpcy50YXJnZXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIHJlZmxlY3RpbmcgYSBEZXNpZ25Ub2tlbiB0byBDU1NcbiAgICAgKiBAcGFyYW0gdG9rZW4gLSBUaGUgZGVzaWduIHRva2VuIHRvIHN0b3AgcmVmbGVjdGluZ1xuICAgICAqL1xuICAgIHN0b3BSZWZsZWN0VG9DU1ModG9rZW4pIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWZsZWN0aW5nKHRva2VuKSkge1xuICAgICAgICAgICAgdGhpcy5yZWZsZWN0aW5nLmRlbGV0ZSh0b2tlbik7XG4gICAgICAgICAgICBEZXNpZ25Ub2tlbk5vZGUuY3NzQ3VzdG9tUHJvcGVydHlSZWZsZWN0b3Iuc3RvcFJlZmxlY3Rpb24odG9rZW4sIHRoaXMudGFyZ2V0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIGEgdG9rZW4gaXMgYmVpbmcgcmVmbGVjdGVkIHRvIENTUyBmb3IgYSBub2RlLlxuICAgICAqIEBwYXJhbSB0b2tlbiAtIFRoZSB0b2tlbiB0byBjaGVjayBmb3IgcmVmbGVjdGlvblxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgaXNSZWZsZWN0aW5nKHRva2VuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmxlY3RpbmcuaGFzKHRva2VuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGNoYW5nZXMgdG8gdXBzdHJlYW0gdG9rZW5zXG4gICAgICogQHBhcmFtIHNvdXJjZSAtIFRoZSBwYXJlbnQgRGVzaWduVG9rZW5Ob2RlXG4gICAgICogQHBhcmFtIHByb3BlcnR5IC0gVGhlIHRva2VuIElEIHRoYXQgY2hhbmdlZFxuICAgICAqL1xuICAgIGhhbmRsZUNoYW5nZShzb3VyY2UsIHByb3BlcnR5KSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gRGVzaWduVG9rZW5JbXBsLmdldFRva2VuQnlJZChwcm9wZXJ0eSk7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmh5ZHJhdGUodG9rZW4sIHRoaXMuZ2V0UmF3KHRva2VuKSk7XG4gICAgICAgIHRoaXMudXBkYXRlQ1NTVG9rZW5SZWZsZWN0aW9uKHRoaXMuc3RvcmUsIHRva2VuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSHlkcmF0ZXMgYSB0b2tlbiB3aXRoIGEgRGVzaWduVG9rZW5WYWx1ZSwgbWFraW5nIHJldHJpZXZhbCBhdmFpbGFibGUuXG4gICAgICogQHBhcmFtIHRva2VuIC0gVGhlIHRva2VuIHRvIGh5ZHJhdGVcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gaHlkcmF0ZVxuICAgICAqL1xuICAgIGh5ZHJhdGUodG9rZW4sIHZhbHVlKSB7XG4gICAgICAgIGlmICghdGhpcy5oYXModG9rZW4pKSB7XG4gICAgICAgICAgICBjb25zdCBvYnNlcnZlciA9IHRoaXMuYmluZGluZ09ic2VydmVycy5nZXQodG9rZW4pO1xuICAgICAgICAgICAgaWYgKERlc2lnblRva2VuSW1wbC5pc0Rlcml2ZWREZXNpZ25Ub2tlblZhbHVlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGlmIChvYnNlcnZlcikge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgYmluZGluZyBzb3VyY2UgZG9lc24ndCBtYXRjaCwgd2UgbmVlZFxuICAgICAgICAgICAgICAgICAgICAvLyB0byB1cGRhdGUgdGhlIGJpbmRpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9ic2VydmVyLnNvdXJjZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVhckRvd25CaW5kaW5nT2JzZXJ2ZXIodG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR1cEJpbmRpbmdPYnNlcnZlcih0b2tlbiwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHVwQmluZGluZ09ic2VydmVyKHRva2VuLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG9ic2VydmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVhckRvd25CaW5kaW5nT2JzZXJ2ZXIodG9rZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnN0b3JlLnNldCh0b2tlbiwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdXAgYSBiaW5kaW5nIG9ic2VydmVyIGZvciBhIGRlcml2ZWQgdG9rZW4gdmFsdWUgdGhhdCBub3RpZmllcyB0b2tlblxuICAgICAqIHN1YnNjcmliZXJzIG9uIGNoYW5nZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0b2tlbiAtIFRoZSB0b2tlbiB0byBub3RpZnkgd2hlbiB0aGUgYmluZGluZyB1cGRhdGVzXG4gICAgICogQHBhcmFtIHNvdXJjZSAtIFRoZSBiaW5kaW5nIHNvdXJjZVxuICAgICAqL1xuICAgIHNldHVwQmluZGluZ09ic2VydmVyKHRva2VuLCBzb3VyY2UpIHtcbiAgICAgICAgY29uc3QgYmluZGluZyA9IG5ldyBEZXNpZ25Ub2tlbkJpbmRpbmdPYnNlcnZlcihzb3VyY2UsIHRva2VuLCB0aGlzKTtcbiAgICAgICAgdGhpcy5iaW5kaW5nT2JzZXJ2ZXJzLnNldCh0b2tlbiwgYmluZGluZyk7XG4gICAgICAgIHJldHVybiBiaW5kaW5nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUZWFyIGRvd24gYSBiaW5kaW5nIG9ic2VydmVyIGZvciBhIHRva2VuLlxuICAgICAqL1xuICAgIHRlYXJEb3duQmluZGluZ09ic2VydmVyKHRva2VuKSB7XG4gICAgICAgIGlmICh0aGlzLmJpbmRpbmdPYnNlcnZlcnMuaGFzKHRva2VuKSkge1xuICAgICAgICAgICAgdGhpcy5iaW5kaW5nT2JzZXJ2ZXJzLmdldCh0b2tlbikuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgdGhpcy5iaW5kaW5nT2JzZXJ2ZXJzLmRlbGV0ZSh0b2tlbik7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLyoqXG4gKiBSZXNwb25zaWJsZSBmb3IgcmVmbGVjdGluZyB0b2tlbnMgdG8gQ1NTIGN1c3RvbSBwcm9wZXJ0aWVzXG4gKi9cbkRlc2lnblRva2VuTm9kZS5jc3NDdXN0b21Qcm9wZXJ0eVJlZmxlY3RvciA9IG5ldyBDdXN0b21Qcm9wZXJ0eVJlZmxlY3RvcigpO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgRGVzaWduVG9rZW5Ob2RlLnByb3RvdHlwZSwgXCJjaGlsZHJlblwiLCB2b2lkIDApO1xuZnVuY3Rpb24gY3JlYXRlKG5hbWVPckNvbmZpZykge1xuICAgIHJldHVybiBEZXNpZ25Ub2tlbkltcGwuZnJvbShuYW1lT3JDb25maWcpO1xufVxuLyogZXNsaW50LWVuYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnMgKi9cbi8qKlxuICogRmFjdG9yeSBvYmplY3QgZm9yIGNyZWF0aW5nIHtAbGluayAoRGVzaWduVG9rZW46aW50ZXJmYWNlKX0gaW5zdGFuY2VzLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgRGVzaWduVG9rZW4gPSBPYmplY3QuZnJlZXplKHtcbiAgICBjcmVhdGUsXG4gICAgLyoqXG4gICAgICogSW5mb3JtcyBEZXNpZ25Ub2tlbiB0aGF0IGFuIEhUTUxFbGVtZW50IGZvciB3aGljaCB0b2tlbnMgaGF2ZVxuICAgICAqIGJlZW4gc2V0IGhhcyBiZWVuIGNvbm5lY3RlZCB0byB0aGUgZG9jdW1lbnQuXG4gICAgICpcbiAgICAgKiBUaGUgYnJvd3NlciBkb2VzIG5vdCBwcm92aWRlIGEgcmVsaWFibGUgbWVjaGFuaXNtIHRvIG9ic2VydmUgYW4gSFRNTEVsZW1lbnQncyBjb25uZWN0ZWRuZXNzXG4gICAgICogaW4gYWxsIHNjZW5hcmlvcywgc28gaW52b2tpbmcgdGhpcyBtZXRob2QgbWFudWFsbHkgaXMgbmVjZXNzYXJ5IHdoZW46XG4gICAgICpcbiAgICAgKiAxLiBUb2tlbiB2YWx1ZXMgYXJlIHNldCBmb3IgYW4gSFRNTEVsZW1lbnQuXG4gICAgICogMi4gVGhlIEhUTUxFbGVtZW50IGRvZXMgbm90IGluaGVyaXQgZnJvbSBGQVNURWxlbWVudC5cbiAgICAgKiAzLiBUaGUgSFRNTEVsZW1lbnQgaXMgbm90IGNvbm5lY3RlZCB0byB0aGUgZG9jdW1lbnQgd2hlbiB0b2tlbiB2YWx1ZXMgYXJlIHNldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbGVtZW50IC0gVGhlIGVsZW1lbnQgdG8gbm90aWZ5XG4gICAgICogQHJldHVybnMgLSB0cnVlIGlmIG5vdGlmaWNhdGlvbiB3YXMgc3VjY2Vzc2Z1bCwgb3RoZXJ3aXNlIGZhbHNlLlxuICAgICAqL1xuICAgIG5vdGlmeUNvbm5lY3Rpb24oZWxlbWVudCkge1xuICAgICAgICBpZiAoIWVsZW1lbnQuaXNDb25uZWN0ZWQgfHwgIURlc2lnblRva2VuTm9kZS5leGlzdHNGb3IoZWxlbWVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBEZXNpZ25Ub2tlbk5vZGUuZ2V0T3JDcmVhdGUoZWxlbWVudCkuYmluZCgpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEluZm9ybXMgRGVzaWduVG9rZW4gdGhhdCBhbiBIVE1MRWxlbWVudCBmb3Igd2hpY2ggdG9rZW5zIGhhdmVcbiAgICAgKiBiZWVuIHNldCBoYXMgYmVlbiBkaXNjb25uZWN0ZWQgdG8gdGhlIGRvY3VtZW50LlxuICAgICAqXG4gICAgICogVGhlIGJyb3dzZXIgZG9lcyBub3QgcHJvdmlkZSBhIHJlbGlhYmxlIG1lY2hhbmlzbSB0byBvYnNlcnZlIGFuIEhUTUxFbGVtZW50J3MgY29ubmVjdGVkbmVzc1xuICAgICAqIGluIGFsbCBzY2VuYXJpb3MsIHNvIGludm9raW5nIHRoaXMgbWV0aG9kIG1hbnVhbGx5IGlzIG5lY2Vzc2FyeSB3aGVuOlxuICAgICAqXG4gICAgICogMS4gVG9rZW4gdmFsdWVzIGFyZSBzZXQgZm9yIGFuIEhUTUxFbGVtZW50LlxuICAgICAqIDIuIFRoZSBIVE1MRWxlbWVudCBkb2VzIG5vdCBpbmhlcml0IGZyb20gRkFTVEVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWxlbWVudCAtIFRoZSBlbGVtZW50IHRvIG5vdGlmeVxuICAgICAqIEByZXR1cm5zIC0gdHJ1ZSBpZiBub3RpZmljYXRpb24gd2FzIHN1Y2Nlc3NmdWwsIG90aGVyd2lzZSBmYWxzZS5cbiAgICAgKi9cbiAgICBub3RpZnlEaXNjb25uZWN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQuaXNDb25uZWN0ZWQgfHwgIURlc2lnblRva2VuTm9kZS5leGlzdHNGb3IoZWxlbWVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBEZXNpZ25Ub2tlbk5vZGUuZ2V0T3JDcmVhdGUoZWxlbWVudCkudW5iaW5kKCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGFuZCBlbGVtZW50IG9yIGRvY3VtZW50IGFzIGEgRGVzaWduVG9rZW4gcm9vdC5cbiAgICAgKiB7QGxpbmsgQ1NTRGVzaWduVG9rZW4gfCBDU1NEZXNpZ25Ub2tlbnN9IHdpdGggZGVmYXVsdCB2YWx1ZXMgYXNzaWduZWQgdmlhXG4gICAgICoge0BsaW5rIChEZXNpZ25Ub2tlbjppbnRlcmZhY2UpLndpdGhEZWZhdWx0fSB3aWxsIGVtaXQgQ1NTIGN1c3RvbSBwcm9wZXJ0aWVzIHRvIGFsbFxuICAgICAqIHJlZ2lzdGVyZWQgcm9vdHMuXG4gICAgICogQHBhcmFtIHRhcmdldCAtIFRoZSByb290IHRvIHJlZ2lzdGVyXG4gICAgICovXG4gICAgcmVnaXN0ZXJSb290KHRhcmdldCA9IGRlZmF1bHRFbGVtZW50KSB7XG4gICAgICAgIFJvb3RTdHlsZVNoZWV0VGFyZ2V0LnJlZ2lzdGVyUm9vdCh0YXJnZXQpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogVW5yZWdpc3RlciBhbiBlbGVtZW50IG9yIGRvY3VtZW50IGFzIGEgRGVzaWduVG9rZW4gcm9vdC5cbiAgICAgKiBAcGFyYW0gdGFyZ2V0IC0gVGhlIHJvb3QgdG8gZGVyZWdpc3RlclxuICAgICAqL1xuICAgIHVucmVnaXN0ZXJSb290KHRhcmdldCA9IGRlZmF1bHRFbGVtZW50KSB7XG4gICAgICAgIFJvb3RTdHlsZVNoZWV0VGFyZ2V0LnVucmVnaXN0ZXJSb290KHRhcmdldCk7XG4gICAgfSxcbn0pO1xuLyogZXNsaW50LWVuYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uICovXG4iLCJpbXBvcnQgeyBGQVNURWxlbWVudERlZmluaXRpb24gfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IEZvdW5kYXRpb25FbGVtZW50IH0gZnJvbSBcIi4uL2ZvdW5kYXRpb24tZWxlbWVudC9mb3VuZGF0aW9uLWVsZW1lbnQuanNcIjtcbmltcG9ydCB7IERJLCBSZWdpc3RyYXRpb24gfSBmcm9tIFwiLi4vZGkvZGkuanNcIjtcbmltcG9ydCB7IERlc2lnblRva2VuIH0gZnJvbSBcIi4uL2Rlc2lnbi10b2tlbi9kZXNpZ24tdG9rZW4uanNcIjtcbmltcG9ydCB7IENvbXBvbmVudFByZXNlbnRhdGlvbiB9IGZyb20gXCIuL2NvbXBvbmVudC1wcmVzZW50YXRpb24uanNcIjtcbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb24gKi9cbi8qKlxuICogSW5kaWNhdGVzIHdoYXQgdG8gZG8gd2l0aCBhbiBhbWJpZ3VvdXMgKGR1cGxpY2F0ZSkgZWxlbWVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IEVsZW1lbnREaXNhbWJpZ3VhdGlvbiA9IE9iamVjdC5mcmVlemUoe1xuICAgIC8qKlxuICAgICAqIFNraXAgZGVmaW5pbmcgdGhlIGVsZW1lbnQgYnV0IHN0aWxsIGNhbGwgdGhlIHByb3ZpZGVkIGNhbGxiYWNrIHBhc3NlZFxuICAgICAqIHRvIERlc2lnblN5c3RlbVJlZ2lzdHJhdGlvbkNvbnRleHQudHJ5RGVmaW5lRWxlbWVudFxuICAgICAqL1xuICAgIGRlZmluaXRpb25DYWxsYmFja09ubHk6IG51bGwsXG4gICAgLyoqXG4gICAgICogSWdub3JlIHRoZSBkdXBsaWNhdGUgZWxlbWVudCBlbnRpcmVseS5cbiAgICAgKi9cbiAgICBpZ25vcmVEdXBsaWNhdGU6IFN5bWJvbCgpLFxufSk7XG5jb25zdCBlbGVtZW50VHlwZXNCeVRhZyA9IG5ldyBNYXAoKTtcbmNvbnN0IGVsZW1lbnRUYWdzQnlUeXBlID0gbmV3IE1hcCgpO1xubGV0IHJvb3REZXNpZ25TeXN0ZW0gPSBudWxsO1xuY29uc3QgZGVzaWduU3lzdGVtS2V5ID0gREkuY3JlYXRlSW50ZXJmYWNlKHggPT4geC5jYWNoZWRDYWxsYmFjayhoYW5kbGVyID0+IHtcbiAgICBpZiAocm9vdERlc2lnblN5c3RlbSA9PT0gbnVsbCkge1xuICAgICAgICByb290RGVzaWduU3lzdGVtID0gbmV3IERlZmF1bHREZXNpZ25TeXN0ZW0obnVsbCwgaGFuZGxlcik7XG4gICAgfVxuICAgIHJldHVybiByb290RGVzaWduU3lzdGVtO1xufSkpO1xuLyoqXG4gKiBBbiBBUEkgZ2F0ZXdheSB0byBkZXNpZ24gc3lzdGVtIGZlYXR1cmVzLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgRGVzaWduU3lzdGVtID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgSFRNTCBlbGVtZW50IG5hbWUgdGhhdCB0aGUgdHlwZSBpcyBkZWZpbmVkIGFzLlxuICAgICAqIEBwYXJhbSB0eXBlIC0gVGhlIHR5cGUgdG8gbG9va3VwLlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICB0YWdGb3IodHlwZSkge1xuICAgICAgICByZXR1cm4gZWxlbWVudFRhZ3NCeVR5cGUuZ2V0KHR5cGUpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogU2VhcmNoZXMgdGhlIERPTSBoaWVyYXJjaHkgZm9yIHRoZSBkZXNpZ24gc3lzdGVtIHRoYXQgaXMgcmVzcG9uc2libGVcbiAgICAgKiBmb3IgdGhlIHByb3ZpZGVkIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIGVsZW1lbnQgLSBUaGUgZWxlbWVudCB0byBsb2NhdGUgdGhlIGRlc2lnbiBzeXN0ZW0gZm9yLlxuICAgICAqIEByZXR1cm5zIFRoZSBsb2NhdGVkIGRlc2lnbiBzeXN0ZW0uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHJlc3BvbnNpYmxlRm9yKGVsZW1lbnQpIHtcbiAgICAgICAgY29uc3Qgb3duZWQgPSBlbGVtZW50LiQkZGVzaWduU3lzdGVtJCQ7XG4gICAgICAgIGlmIChvd25lZCkge1xuICAgICAgICAgICAgcmV0dXJuIG93bmVkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IERJLmZpbmRSZXNwb25zaWJsZUNvbnRhaW5lcihlbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5nZXQoZGVzaWduU3lzdGVtS2V5KTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIERlc2lnblN5c3RlbSBpZiBvbmUgaXMgZXhwbGljaXRseSBkZWZpbmVkIG9uIHRoZSBwcm92aWRlZCBlbGVtZW50O1xuICAgICAqIG90aGVyd2lzZSBjcmVhdGVzIGEgZGVzaWduIHN5c3RlbSBkZWZpbmVkIGRpcmVjdGx5IG9uIHRoZSBlbGVtZW50LlxuICAgICAqIEBwYXJhbSBlbGVtZW50IC0gVGhlIGVsZW1lbnQgdG8gZ2V0IG9yIGNyZWF0ZSBhIGRlc2lnbiBzeXN0ZW0gZm9yLlxuICAgICAqIEByZXR1cm5zIFRoZSBkZXNpZ24gc3lzdGVtLlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXRPckNyZWF0ZShub2RlKSB7XG4gICAgICAgIGlmICghbm9kZSkge1xuICAgICAgICAgICAgaWYgKHJvb3REZXNpZ25TeXN0ZW0gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByb290RGVzaWduU3lzdGVtID0gREkuZ2V0T3JDcmVhdGVET01Db250YWluZXIoKS5nZXQoZGVzaWduU3lzdGVtS2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb290RGVzaWduU3lzdGVtO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG93bmVkID0gbm9kZS4kJGRlc2lnblN5c3RlbSQkO1xuICAgICAgICBpZiAob3duZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBvd25lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBESS5nZXRPckNyZWF0ZURPTUNvbnRhaW5lcihub2RlKTtcbiAgICAgICAgaWYgKGNvbnRhaW5lci5oYXMoZGVzaWduU3lzdGVtS2V5LCBmYWxzZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBjb250YWluZXIuZ2V0KGRlc2lnblN5c3RlbUtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzeXN0ZW0gPSBuZXcgRGVmYXVsdERlc2lnblN5c3RlbShub2RlLCBjb250YWluZXIpO1xuICAgICAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKFJlZ2lzdHJhdGlvbi5pbnN0YW5jZShkZXNpZ25TeXN0ZW1LZXksIHN5c3RlbSkpO1xuICAgICAgICAgICAgcmV0dXJuIHN5c3RlbTtcbiAgICAgICAgfVxuICAgIH0sXG59KTtcbmZ1bmN0aW9uIGV4dHJhY3RUcnlEZWZpbmVFbGVtZW50UGFyYW1zKHBhcmFtcywgZWxlbWVudERlZmluaXRpb25UeXBlLCBlbGVtZW50RGVmaW5pdGlvbkNhbGxiYWNrKSB7XG4gICAgaWYgKHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IHBhcmFtcyxcbiAgICAgICAgICAgIHR5cGU6IGVsZW1lbnREZWZpbml0aW9uVHlwZSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBlbGVtZW50RGVmaW5pdGlvbkNhbGxiYWNrLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9XG59XG5jbGFzcyBEZWZhdWx0RGVzaWduU3lzdGVtIHtcbiAgICBjb25zdHJ1Y3Rvcihvd25lciwgY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMub3duZXIgPSBvd25lcjtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIHRoaXMuZGVzaWduVG9rZW5zSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcmVmaXggPSBcImZhc3RcIjtcbiAgICAgICAgdGhpcy5zaGFkb3dSb290TW9kZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5kaXNhbWJpZ3VhdGUgPSAoKSA9PiBFbGVtZW50RGlzYW1iaWd1YXRpb24uZGVmaW5pdGlvbkNhbGxiYWNrT25seTtcbiAgICAgICAgaWYgKG93bmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgICBvd25lci4kJGRlc2lnblN5c3RlbSQkID0gdGhpcztcbiAgICAgICAgfVxuICAgIH1cbiAgICB3aXRoUHJlZml4KHByZWZpeCkge1xuICAgICAgICB0aGlzLnByZWZpeCA9IHByZWZpeDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHdpdGhTaGFkb3dSb290TW9kZShtb2RlKSB7XG4gICAgICAgIHRoaXMuc2hhZG93Um9vdE1vZGUgPSBtb2RlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgd2l0aEVsZW1lbnREaXNhbWJpZ3VhdGlvbihjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmRpc2FtYmlndWF0ZSA9IGNhbGxiYWNrO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgd2l0aERlc2lnblRva2VuUm9vdChyb290KSB7XG4gICAgICAgIHRoaXMuZGVzaWduVG9rZW5Sb290ID0gcm9vdDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJlZ2lzdGVyKC4uLnJlZ2lzdHJhdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXI7XG4gICAgICAgIGNvbnN0IGVsZW1lbnREZWZpbml0aW9uRW50cmllcyA9IFtdO1xuICAgICAgICBjb25zdCBkaXNhbWJpZ3VhdGUgPSB0aGlzLmRpc2FtYmlndWF0ZTtcbiAgICAgICAgY29uc3Qgc2hhZG93Um9vdE1vZGUgPSB0aGlzLnNoYWRvd1Jvb3RNb2RlO1xuICAgICAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICAgICAgZWxlbWVudFByZWZpeDogdGhpcy5wcmVmaXgsXG4gICAgICAgICAgICB0cnlEZWZpbmVFbGVtZW50KHBhcmFtcywgZWxlbWVudERlZmluaXRpb25UeXBlLCBlbGVtZW50RGVmaW5pdGlvbkNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXh0cmFjdGVkUGFyYW1zID0gZXh0cmFjdFRyeURlZmluZUVsZW1lbnRQYXJhbXMocGFyYW1zLCBlbGVtZW50RGVmaW5pdGlvblR5cGUsIGVsZW1lbnREZWZpbml0aW9uQ2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgbmFtZSwgY2FsbGJhY2ssIGJhc2VDbGFzcyB9ID0gZXh0cmFjdGVkUGFyYW1zO1xuICAgICAgICAgICAgICAgIGxldCB7IHR5cGUgfSA9IGV4dHJhY3RlZFBhcmFtcztcbiAgICAgICAgICAgICAgICBsZXQgZWxlbWVudE5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgICAgIGxldCB0eXBlRm91bmRCeU5hbWUgPSBlbGVtZW50VHlwZXNCeVRhZy5nZXQoZWxlbWVudE5hbWUpO1xuICAgICAgICAgICAgICAgIGxldCBuZWVkc0RlZmluZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHR5cGVGb3VuZEJ5TmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBkaXNhbWJpZ3VhdGUoZWxlbWVudE5hbWUsIHR5cGUsIHR5cGVGb3VuZEJ5TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVsZW1lbnREaXNhbWJpZ3VhdGlvbi5pZ25vcmVEdXBsaWNhdGU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFbGVtZW50RGlzYW1iaWd1YXRpb24uZGVmaW5pdGlvbkNhbGxiYWNrT25seTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZWVkc0RlZmluZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVGb3VuZEJ5TmFtZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudE5hbWUgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZUZvdW5kQnlOYW1lID0gZWxlbWVudFR5cGVzQnlUYWcuZ2V0KGVsZW1lbnROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobmVlZHNEZWZpbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRUYWdzQnlUeXBlLmhhcyh0eXBlKSB8fCB0eXBlID09PSBGb3VuZGF0aW9uRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9IGNsYXNzIGV4dGVuZHMgdHlwZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRUeXBlc0J5VGFnLnNldChlbGVtZW50TmFtZSwgdHlwZSk7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRUYWdzQnlUeXBlLnNldCh0eXBlLCBlbGVtZW50TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChiYXNlQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRUYWdzQnlUeXBlLnNldChiYXNlQ2xhc3MsIGVsZW1lbnROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbGVtZW50RGVmaW5pdGlvbkVudHJpZXMucHVzaChuZXcgRWxlbWVudERlZmluaXRpb25FbnRyeShjb250YWluZXIsIGVsZW1lbnROYW1lLCB0eXBlLCBzaGFkb3dSb290TW9kZSwgY2FsbGJhY2ssIG5lZWRzRGVmaW5lKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBpZiAoIXRoaXMuZGVzaWduVG9rZW5zSW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzaWduVG9rZW5zSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVzaWduVG9rZW5Sb290ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgRGVzaWduVG9rZW4ucmVnaXN0ZXJSb290KHRoaXMuZGVzaWduVG9rZW5Sb290KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXJXaXRoQ29udGV4dChjb250ZXh0LCAuLi5yZWdpc3RyYXRpb25zKTtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbGVtZW50RGVmaW5pdGlvbkVudHJpZXMpIHtcbiAgICAgICAgICAgIGVudHJ5LmNhbGxiYWNrKGVudHJ5KTtcbiAgICAgICAgICAgIGlmIChlbnRyeS53aWxsRGVmaW5lICYmIGVudHJ5LmRlZmluaXRpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBlbnRyeS5kZWZpbml0aW9uLmRlZmluZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbmNsYXNzIEVsZW1lbnREZWZpbml0aW9uRW50cnkge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lciwgbmFtZSwgdHlwZSwgc2hhZG93Um9vdE1vZGUsIGNhbGxiYWNrLCB3aWxsRGVmaW5lKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLnNoYWRvd1Jvb3RNb2RlID0gc2hhZG93Um9vdE1vZGU7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgdGhpcy53aWxsRGVmaW5lID0gd2lsbERlZmluZTtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9uID0gbnVsbDtcbiAgICB9XG4gICAgZGVmaW5lUHJlc2VudGF0aW9uKHByZXNlbnRhdGlvbikge1xuICAgICAgICBDb21wb25lbnRQcmVzZW50YXRpb24uZGVmaW5lKHRoaXMubmFtZSwgcHJlc2VudGF0aW9uLCB0aGlzLmNvbnRhaW5lcik7XG4gICAgfVxuICAgIGRlZmluZUVsZW1lbnQoZGVmaW5pdGlvbikge1xuICAgICAgICB0aGlzLmRlZmluaXRpb24gPSBuZXcgRkFTVEVsZW1lbnREZWZpbml0aW9uKHRoaXMudHlwZSwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBkZWZpbml0aW9uKSwgeyBuYW1lOiB0aGlzLm5hbWUgfSkpO1xuICAgIH1cbiAgICB0YWdGb3IodHlwZSkge1xuICAgICAgICByZXR1cm4gRGVzaWduU3lzdGVtLnRhZ0Zvcih0eXBlKTtcbiAgICB9XG59XG4vKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb24gKi9cbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbi8qKlxuICogVGhlIHRlbXBsYXRlIGZvciB0aGUge0BsaW5rIEBtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uI0RpdmlkZXJ9IGNvbXBvbmVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGRpdmlkZXJUZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBodG1sIGBcbiAgICA8dGVtcGxhdGUgcm9sZT1cIiR7eCA9PiB4LnJvbGV9XCIgYXJpYS1vcmllbnRhdGlvbj1cIiR7eCA9PiB4Lm9yaWVudGF0aW9ufVwiPjwvdGVtcGxhdGU+XG5gO1xuIiwiLyoqXG4gKiBEaXZpZGVyIHJvbGVzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBEaXZpZGVyUm9sZSA9IHtcbiAgICAvKipcbiAgICAgKiBUaGUgZGl2aWRlciBzZW1hbnRpY2FsbHkgc2VwYXJhdGVzIGNvbnRlbnRcbiAgICAgKi9cbiAgICBzZXBhcmF0b3I6IFwic2VwYXJhdG9yXCIsXG4gICAgLyoqXG4gICAgICogVGhlIGRpdmlkZXIgaGFzIG5vIHNlbWFudGljIHZhbHVlIGFuZCBpcyBmb3IgdmlzdWFsIHByZXNlbnRhdGlvbiBvbmx5LlxuICAgICAqL1xuICAgIHByZXNlbnRhdGlvbjogXCJwcmVzZW50YXRpb25cIixcbn07XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBPcmllbnRhdGlvbiB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3Qtd2ViLXV0aWxpdGllc1wiO1xuaW1wb3J0IHsgRm91bmRhdGlvbkVsZW1lbnQgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuaW1wb3J0IHsgRGl2aWRlclJvbGUgfSBmcm9tIFwiLi9kaXZpZGVyLm9wdGlvbnMuanNcIjtcbmV4cG9ydCB7IERpdmlkZXJSb2xlIH07XG4vKipcbiAqIEEgRGl2aWRlciBDdXN0b20gSFRNTCBFbGVtZW50LlxuICogSW1wbGVtZW50cyB0aGUge0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi93YWktYXJpYS0xLjEvI3NlcGFyYXRvciB8IEFSSUEgc2VwYXJhdG9yIH0gb3Ige0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi93YWktYXJpYS0xLjEvI3ByZXNlbnRhdGlvbiB8IEFSSUEgcHJlc2VudGF0aW9ufS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBEaXZpZGVyIGV4dGVuZHMgRm91bmRhdGlvbkVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHJvbGUgb2YgdGhlIGVsZW1lbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwdWJsaWNcbiAgICAgICAgICogQHJlbWFya3NcbiAgICAgICAgICogSFRNTCBBdHRyaWJ1dGU6IHJvbGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucm9sZSA9IERpdmlkZXJSb2xlLnNlcGFyYXRvcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvcmllbnRhdGlvbiBvZiB0aGUgZGl2aWRlci5cbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogb3JpZW50YXRpb25cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3JpZW50YXRpb24gPSBPcmllbnRhdGlvbi5ob3Jpem9udGFsO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIERpdmlkZXIucHJvdG90eXBlLCBcInJvbGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHJcbl0sIERpdmlkZXIucHJvdG90eXBlLCBcIm9yaWVudGF0aW9uXCIsIHZvaWQgMCk7XG4iLCJpbXBvcnQgeyBodG1sLCBzbG90dGVkIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBlbmRTbG90VGVtcGxhdGUsIHN0YXJ0U2xvdFRlbXBsYXRlIH0gZnJvbSBcIi4uL3BhdHRlcm5zL3N0YXJ0LWVuZC5qc1wiO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jKExpc3Rib3hPcHRpb246Y2xhc3MpfSBjb21wb25lbnQuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBsaXN0Ym94T3B0aW9uVGVtcGxhdGUgPSAoY29udGV4dCwgZGVmaW5pdGlvbikgPT4gaHRtbCBgXG4gICAgPHRlbXBsYXRlXG4gICAgICAgIGFyaWEtY2hlY2tlZD1cIiR7eCA9PiB4LmFyaWFDaGVja2VkfVwiXG4gICAgICAgIGFyaWEtZGlzYWJsZWQ9XCIke3ggPT4geC5hcmlhRGlzYWJsZWR9XCJcbiAgICAgICAgYXJpYS1wb3NpbnNldD1cIiR7eCA9PiB4LmFyaWFQb3NJblNldH1cIlxuICAgICAgICBhcmlhLXNlbGVjdGVkPVwiJHt4ID0+IHguYXJpYVNlbGVjdGVkfVwiXG4gICAgICAgIGFyaWEtc2V0c2l6ZT1cIiR7eCA9PiB4LmFyaWFTZXRTaXplfVwiXG4gICAgICAgIGNsYXNzPVwiJHt4ID0+IFt4LmNoZWNrZWQgJiYgXCJjaGVja2VkXCIsIHguc2VsZWN0ZWQgJiYgXCJzZWxlY3RlZFwiLCB4LmRpc2FibGVkICYmIFwiZGlzYWJsZWRcIl1cbiAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgLmpvaW4oXCIgXCIpfVwiXG4gICAgICAgIHJvbGU9XCJvcHRpb25cIlxuICAgID5cbiAgICAgICAgJHtzdGFydFNsb3RUZW1wbGF0ZShjb250ZXh0LCBkZWZpbml0aW9uKX1cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJjb250ZW50XCIgcGFydD1cImNvbnRlbnRcIj5cbiAgICAgICAgICAgIDxzbG90ICR7c2xvdHRlZChcImNvbnRlbnRcIil9Pjwvc2xvdD5cbiAgICAgICAgPC9zcGFuPlxuICAgICAgICAke2VuZFNsb3RUZW1wbGF0ZShjb250ZXh0LCBkZWZpbml0aW9uKX1cbiAgICA8L3RlbXBsYXRlPlxuYDtcbiIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGF0dHIsIERPTSwgbnVsbGFibGVOdW1iZXJDb252ZXJ0ZXIsIG9ic2VydmFibGUgfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IGluUmFuZ2UsIGtleUFycm93RG93biwga2V5QXJyb3dVcCwga2V5RW5kLCBrZXlFc2NhcGUsIGtleUhvbWUsIGtleVNwYWNlLCBrZXlUYWIsIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzXCI7XG5pbXBvcnQgeyBMaXN0Ym94IH0gZnJvbSBcIi4vbGlzdGJveC5qc1wiO1xuLyoqXG4gKiBBIExpc3Rib3ggQ3VzdG9tIEhUTUwgRWxlbWVudC5cbiAqIEltcGxlbWVudHMgdGhlIHtAbGluayBodHRwczovL3czYy5naXRodWIuaW8vYXJpYS8jbGlzdGJveCB8IEFSSUEgbGlzdGJveCB9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIExpc3Rib3hFbGVtZW50IGV4dGVuZHMgTGlzdGJveCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaW5kZXggb2YgdGhlIG1vc3QgcmVjZW50bHkgY2hlY2tlZCBvcHRpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBNdWx0aXBsZS1zZWxlY3Rpb24gbW9kZSBvbmx5LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hY3RpdmVJbmRleCA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHN0YXJ0IGluZGV4IHdoZW4gY2hlY2tpbmcgYSByYW5nZSBvZiBvcHRpb25zLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmFuZ2VTdGFydEluZGV4ID0gLTE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGxhc3QgY2hlY2tlZCBvcHRpb24uXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXQgYWN0aXZlT3B0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zW3RoaXMuYWN0aXZlSW5kZXhdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBsaXN0IG9mIGNoZWNrZWQgb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldCBjaGVja2VkT3B0aW9ucygpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5vcHRpb25zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZmlsdGVyKG8gPT4gby5jaGVja2VkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IHNlbGVjdGVkIG9wdGlvbi5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldCBmaXJzdFNlbGVjdGVkT3B0aW9uSW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuaW5kZXhPZih0aGlzLmZpcnN0U2VsZWN0ZWRPcHRpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBgYXJpYUFjdGl2ZURlc2NlbmRhbnRgIHByb3BlcnR5IHdoZW4gdGhlIGFjdGl2ZSBpbmRleCBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByZXYgLSB0aGUgcHJldmlvdXMgYWN0aXZlIGluZGV4XG4gICAgICogQHBhcmFtIG5leHQgLSB0aGUgbmV4dCBhY3RpdmUgaW5kZXhcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGFjdGl2ZUluZGV4Q2hhbmdlZChwcmV2LCBuZXh0KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHRoaXMuYXJpYUFjdGl2ZURlc2NlbmRhbnQgPSAoX2IgPSAoX2EgPSB0aGlzLm9wdGlvbnNbbmV4dF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pZCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgdGhpcy5mb2N1c0FuZFNjcm9sbE9wdGlvbkludG9WaWV3KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRvZ2dsZXMgdGhlIGNoZWNrZWQgc3RhdGUgZm9yIHRoZSBjdXJyZW50bHkgYWN0aXZlIG9wdGlvbi5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogTXVsdGlwbGUtc2VsZWN0aW9uIG1vZGUgb25seS5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNoZWNrQWN0aXZlSW5kZXgoKSB7XG4gICAgICAgIGlmICghdGhpcy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFjdGl2ZUl0ZW0gPSB0aGlzLmFjdGl2ZU9wdGlvbjtcbiAgICAgICAgaWYgKGFjdGl2ZUl0ZW0pIHtcbiAgICAgICAgICAgIGFjdGl2ZUl0ZW0uY2hlY2tlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgYWN0aXZlIGluZGV4IHRvIHRoZSBmaXJzdCBvcHRpb24gYW5kIG1hcmtzIGl0IGFzIGNoZWNrZWQuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIE11bHRpLXNlbGVjdGlvbiBtb2RlIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJlc2VydmVDaGVja2VkIC0gbWFyayBhbGwgb3B0aW9ucyB1bmNoZWNrZWQgYmVmb3JlIGNoYW5naW5nIHRoZSBhY3RpdmUgaW5kZXhcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNoZWNrRmlyc3RPcHRpb24ocHJlc2VydmVDaGVja2VkID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHByZXNlcnZlQ2hlY2tlZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmFuZ2VTdGFydEluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VTdGFydEluZGV4ID0gdGhpcy5hY3RpdmVJbmRleCArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaCgobywgaSkgPT4ge1xuICAgICAgICAgICAgICAgIG8uY2hlY2tlZCA9IGluUmFuZ2UoaSwgdGhpcy5yYW5nZVN0YXJ0SW5kZXgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVuY2hlY2tBbGxPcHRpb25zKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY3RpdmVJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuY2hlY2tBY3RpdmVJbmRleCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWNyZW1lbnRzIHRoZSBhY3RpdmUgaW5kZXggYW5kIHNldHMgdGhlIG1hdGNoaW5nIG9wdGlvbiBhcyBjaGVja2VkLlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBNdWx0aS1zZWxlY3Rpb24gbW9kZSBvbmx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHByZXNlcnZlQ2hlY2tlZCAtIG1hcmsgYWxsIG9wdGlvbnMgdW5jaGVja2VkIGJlZm9yZSBjaGFuZ2luZyB0aGUgYWN0aXZlIGluZGV4XG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjaGVja0xhc3RPcHRpb24ocHJlc2VydmVDaGVja2VkID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHByZXNlcnZlQ2hlY2tlZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmFuZ2VTdGFydEluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VTdGFydEluZGV4ID0gdGhpcy5hY3RpdmVJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChvLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgby5jaGVja2VkID0gaW5SYW5nZShpLCB0aGlzLnJhbmdlU3RhcnRJbmRleCwgdGhpcy5vcHRpb25zLmxlbmd0aCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudW5jaGVja0FsbE9wdGlvbnMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjdGl2ZUluZGV4ID0gdGhpcy5vcHRpb25zLmxlbmd0aCAtIDE7XG4gICAgICAgIHRoaXMuY2hlY2tBY3RpdmVJbmRleCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNvdXRcIiwgdGhpcy5mb2N1c291dEhhbmRsZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNvdXRcIiwgdGhpcy5mb2N1c291dEhhbmRsZXIpO1xuICAgICAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmNyZW1lbnRzIHRoZSBhY3RpdmUgaW5kZXggYW5kIG1hcmtzIHRoZSBtYXRjaGluZyBvcHRpb24gYXMgY2hlY2tlZC5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogTXVsdGlwbGUtc2VsZWN0aW9uIG1vZGUgb25seS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwcmVzZXJ2ZUNoZWNrZWQgLSBtYXJrIGFsbCBvcHRpb25zIHVuY2hlY2tlZCBiZWZvcmUgY2hhbmdpbmcgdGhlIGFjdGl2ZSBpbmRleFxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY2hlY2tOZXh0T3B0aW9uKHByZXNlcnZlQ2hlY2tlZCA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChwcmVzZXJ2ZUNoZWNrZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJhbmdlU3RhcnRJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJhbmdlU3RhcnRJbmRleCA9IHRoaXMuYWN0aXZlSW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaCgobywgaSkgPT4ge1xuICAgICAgICAgICAgICAgIG8uY2hlY2tlZCA9IGluUmFuZ2UoaSwgdGhpcy5yYW5nZVN0YXJ0SW5kZXgsIHRoaXMuYWN0aXZlSW5kZXggKyAxKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51bmNoZWNrQWxsT3B0aW9ucygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aXZlSW5kZXggKz0gdGhpcy5hY3RpdmVJbmRleCA8IHRoaXMub3B0aW9ucy5sZW5ndGggLSAxID8gMSA6IDA7XG4gICAgICAgIHRoaXMuY2hlY2tBY3RpdmVJbmRleCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWNyZW1lbnRzIHRoZSBhY3RpdmUgaW5kZXggYW5kIG1hcmtzIHRoZSBtYXRjaGluZyBvcHRpb24gYXMgY2hlY2tlZC5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogTXVsdGlwbGUtc2VsZWN0aW9uIG1vZGUgb25seS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwcmVzZXJ2ZUNoZWNrZWQgLSBtYXJrIGFsbCBvcHRpb25zIHVuY2hlY2tlZCBiZWZvcmUgY2hhbmdpbmcgdGhlIGFjdGl2ZSBpbmRleFxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY2hlY2tQcmV2aW91c09wdGlvbihwcmVzZXJ2ZUNoZWNrZWQgPSBmYWxzZSkge1xuICAgICAgICBpZiAocHJlc2VydmVDaGVja2VkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yYW5nZVN0YXJ0SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yYW5nZVN0YXJ0SW5kZXggPSB0aGlzLmFjdGl2ZUluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZE9wdGlvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yYW5nZVN0YXJ0SW5kZXggKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChvLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgby5jaGVja2VkID0gaW5SYW5nZShpLCB0aGlzLmFjdGl2ZUluZGV4LCB0aGlzLnJhbmdlU3RhcnRJbmRleCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudW5jaGVja0FsbE9wdGlvbnMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjdGl2ZUluZGV4IC09IHRoaXMuYWN0aXZlSW5kZXggPiAwID8gMSA6IDA7XG4gICAgICAgIHRoaXMuY2hlY2tBY3RpdmVJbmRleCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGNsaWNrIGV2ZW50cyBmb3IgbGlzdGJveCBvcHRpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIGUgLSB0aGUgZXZlbnQgb2JqZWN0XG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjbGlja0hhbmRsZXIoZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICghdGhpcy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmNsaWNrSGFuZGxlcihlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjYXB0dXJlZCA9IChfYSA9IGUudGFyZ2V0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2xvc2VzdChgW3JvbGU9b3B0aW9uXWApO1xuICAgICAgICBpZiAoIWNhcHR1cmVkIHx8IGNhcHR1cmVkLmRpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51bmNoZWNrQWxsT3B0aW9ucygpO1xuICAgICAgICB0aGlzLmFjdGl2ZUluZGV4ID0gdGhpcy5vcHRpb25zLmluZGV4T2YoY2FwdHVyZWQpO1xuICAgICAgICB0aGlzLmNoZWNrQWN0aXZlSW5kZXgoKTtcbiAgICAgICAgdGhpcy50b2dnbGVTZWxlY3RlZEZvckFsbENoZWNrZWRPcHRpb25zKCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBmb2N1c0FuZFNjcm9sbE9wdGlvbkludG9WaWV3KCkge1xuICAgICAgICBzdXBlci5mb2N1c0FuZFNjcm9sbE9wdGlvbkludG9WaWV3KHRoaXMuYWN0aXZlT3B0aW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW4gbXVsdGlwbGUtc2VsZWN0aW9uIG1vZGU6XG4gICAgICogSWYgYW55IG9wdGlvbnMgYXJlIHNlbGVjdGVkLCB0aGUgZmlyc3Qgc2VsZWN0ZWQgb3B0aW9uIGlzIGNoZWNrZWQgd2hlblxuICAgICAqIHRoZSBsaXN0Ym94IHJlY2VpdmVzIGZvY3VzLiBJZiBubyBvcHRpb25zIGFyZSBzZWxlY3RlZCwgdGhlIGZpcnN0XG4gICAgICogc2VsZWN0YWJsZSBvcHRpb24gaXMgY2hlY2tlZC5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGZvY3VzaW5IYW5kbGVyKGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuZm9jdXNpbkhhbmRsZXIoZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnNob3VsZFNraXBGb2N1cyAmJiBlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLnVuY2hlY2tBbGxPcHRpb25zKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUluZGV4ID1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maXJzdFNlbGVjdGVkT3B0aW9uSW5kZXggIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuZmlyc3RTZWxlY3RlZE9wdGlvbkluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICA6IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNoZWNrQWN0aXZlSW5kZXgoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRPcHRpb25zKCk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzQW5kU2Nyb2xsT3B0aW9uSW50b1ZpZXcoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNob3VsZFNraXBGb2N1cyA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbmNoZWNrcyBhbGwgb3B0aW9ucyB3aGVuIHRoZSBsaXN0Ym94IGxvc2VzIGZvY3VzLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZm9jdXNvdXRIYW5kbGVyKGUpIHtcbiAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcbiAgICAgICAgICAgIHRoaXMudW5jaGVja0FsbE9wdGlvbnMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGtleWRvd24gYWN0aW9ucyBmb3IgbGlzdGJveCBuYXZpZ2F0aW9uIGFuZCB0eXBlYWhlYWRcbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGtleWRvd25IYW5kbGVyKGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICByZXR1cm4gc3VwZXIua2V5ZG93bkhhbmRsZXIoZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsga2V5LCBzaGlmdEtleSB9ID0gZTtcbiAgICAgICAgdGhpcy5zaG91bGRTa2lwRm9jdXMgPSBmYWxzZTtcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgIC8vIFNlbGVjdCB0aGUgZmlyc3QgYXZhaWxhYmxlIG9wdGlvblxuICAgICAgICAgICAgY2FzZSBrZXlIb21lOiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja0ZpcnN0T3B0aW9uKHNoaWZ0S2V5KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBTZWxlY3QgdGhlIG5leHQgc2VsZWN0YWJsZSBvcHRpb25cbiAgICAgICAgICAgIGNhc2Uga2V5QXJyb3dEb3duOiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja05leHRPcHRpb24oc2hpZnRLZXkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNlbGVjdCB0aGUgcHJldmlvdXMgc2VsZWN0YWJsZSBvcHRpb25cbiAgICAgICAgICAgIGNhc2Uga2V5QXJyb3dVcDoge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tQcmV2aW91c09wdGlvbihzaGlmdEtleSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2VsZWN0IHRoZSBsYXN0IGF2YWlsYWJsZSBvcHRpb25cbiAgICAgICAgICAgIGNhc2Uga2V5RW5kOiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja0xhc3RPcHRpb24oc2hpZnRLZXkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2Uga2V5VGFiOiB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1c0FuZFNjcm9sbE9wdGlvbkludG9WaWV3KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIGtleUVzY2FwZToge1xuICAgICAgICAgICAgICAgIHRoaXMudW5jaGVja0FsbE9wdGlvbnMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrQWN0aXZlSW5kZXgoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2Uga2V5U3BhY2U6IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudHlwZUFoZWFkRXhwaXJlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVNlbGVjdGVkRm9yQWxsQ2hlY2tlZE9wdGlvbnMoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNlbmQga2V5IHRvIFR5cGVhaGVhZCBoYW5kbGVyXG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVUeXBlQWhlYWQoYCR7a2V5fWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcmV2ZW50cyBgZm9jdXNpbmAgZXZlbnRzIGZyb20gZmlyaW5nIGJlZm9yZSBgY2xpY2tgIGV2ZW50cyB3aGVuIHRoZVxuICAgICAqIGVsZW1lbnQgaXMgdW5mb2N1c2VkLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgbW91c2Vkb3duSGFuZGxlcihlKSB7XG4gICAgICAgIGlmIChlLm9mZnNldFggPj0gMCAmJiBlLm9mZnNldFggPD0gdGhpcy5zY3JvbGxXaWR0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLm1vdXNlZG93bkhhbmRsZXIoZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU3dpdGNoZXMgYmV0d2VlbiBzaW5nbGUtc2VsZWN0aW9uIGFuZCBtdWx0aS1zZWxlY3Rpb24gbW9kZS5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIG11bHRpcGxlQ2hhbmdlZChwcmV2LCBuZXh0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdGhpcy5hcmlhTXVsdGlTZWxlY3RhYmxlID0gbmV4dCA/IFwidHJ1ZVwiIDogbnVsbDtcbiAgICAgICAgKF9hID0gdGhpcy5vcHRpb25zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9yRWFjaChvID0+IHtcbiAgICAgICAgICAgIG8uY2hlY2tlZCA9IG5leHQgPyBmYWxzZSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRPcHRpb25zKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgYW4gb3B0aW9uIGFzIHNlbGVjdGVkIGFuZCBnaXZlcyBpdCBmb2N1cy5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBzZXRTZWxlY3RlZE9wdGlvbnMoKSB7XG4gICAgICAgIGlmICghdGhpcy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgc3VwZXIuc2V0U2VsZWN0ZWRPcHRpb25zKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkICYmIHRoaXMub3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMgPSB0aGlzLm9wdGlvbnMuZmlsdGVyKG8gPT4gby5zZWxlY3RlZCk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzQW5kU2Nyb2xsT3B0aW9uSW50b1ZpZXcoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnN1cmVzIHRoZSBzaXplIGlzIGEgcG9zaXRpdmUgaW50ZWdlciB3aGVuIHRoZSBwcm9wZXJ0eSBpcyB1cGRhdGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByZXYgLSB0aGUgcHJldmlvdXMgc2l6ZSB2YWx1ZVxuICAgICAqIEBwYXJhbSBuZXh0IC0gdGhlIGN1cnJlbnQgc2l6ZSB2YWx1ZVxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc2l6ZUNoYW5nZWQocHJldiwgbmV4dCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IHNpemUgPSBNYXRoLm1heCgwLCBwYXJzZUludCgoX2EgPSBuZXh0ID09PSBudWxsIHx8IG5leHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5leHQudG9GaXhlZCgpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiLCAxMCkpO1xuICAgICAgICBpZiAoc2l6ZSAhPT0gbmV4dCkge1xuICAgICAgICAgICAgRE9NLnF1ZXVlVXBkYXRlKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVG9nZ2xlcyB0aGUgc2VsZWN0ZWQgc3RhdGUgb2YgdGhlIHByb3ZpZGVkIG9wdGlvbnMuIElmIGFueSBwcm92aWRlZCBpdGVtc1xuICAgICAqIGFyZSBpbiBhbiB1bnNlbGVjdGVkIHN0YXRlLCBhbGwgaXRlbXMgYXJlIHNldCB0byBzZWxlY3RlZC4gSWYgZXZlcnlcbiAgICAgKiBwcm92aWRlZCBpdGVtIGlzIHNlbGVjdGVkLCB0aGV5IGFyZSBhbGwgdW5zZWxlY3RlZC5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRvZ2dsZVNlbGVjdGVkRm9yQWxsQ2hlY2tlZE9wdGlvbnMoKSB7XG4gICAgICAgIGNvbnN0IGVuYWJsZWRDaGVja2VkT3B0aW9ucyA9IHRoaXMuY2hlY2tlZE9wdGlvbnMuZmlsdGVyKG8gPT4gIW8uZGlzYWJsZWQpO1xuICAgICAgICBjb25zdCBmb3JjZSA9ICFlbmFibGVkQ2hlY2tlZE9wdGlvbnMuZXZlcnkobyA9PiBvLnNlbGVjdGVkKTtcbiAgICAgICAgZW5hYmxlZENoZWNrZWRPcHRpb25zLmZvckVhY2gobyA9PiAoby5zZWxlY3RlZCA9IGZvcmNlKSk7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IHRoaXMub3B0aW9ucy5pbmRleE9mKGVuYWJsZWRDaGVja2VkT3B0aW9uc1tlbmFibGVkQ2hlY2tlZE9wdGlvbnMubGVuZ3RoIC0gMV0pO1xuICAgICAgICB0aGlzLnNldFNlbGVjdGVkT3B0aW9ucygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0eXBlYWhlYWRCdWZmZXJDaGFuZ2VkKHByZXYsIG5leHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICBzdXBlci50eXBlYWhlYWRCdWZmZXJDaGFuZ2VkKHByZXYsIG5leHQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgY29uc3QgdHlwZWFoZWFkTWF0Y2hlcyA9IHRoaXMuZ2V0VHlwZWFoZWFkTWF0Y2hlcygpO1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlSW5kZXggPSB0aGlzLm9wdGlvbnMuaW5kZXhPZih0eXBlYWhlYWRNYXRjaGVzWzBdKTtcbiAgICAgICAgICAgIGlmIChhY3RpdmVJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJbmRleCA9IGFjdGl2ZUluZGV4O1xuICAgICAgICAgICAgICAgIHRoaXMudW5jaGVja0FsbE9wdGlvbnMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrQWN0aXZlSW5kZXgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudHlwZUFoZWFkRXhwaXJlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVuY2hlY2tzIGFsbCBvcHRpb25zLlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBNdWx0aXBsZS1zZWxlY3Rpb24gbW9kZSBvbmx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHByZXNlcnZlQ2hlY2tlZCAtIHJlc2V0IHRoZSByYW5nZVN0YXJ0SW5kZXhcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHVuY2hlY2tBbGxPcHRpb25zKHByZXNlcnZlQ2hlY2tlZCA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKG8gPT4gKG8uY2hlY2tlZCA9IHRoaXMubXVsdGlwbGUgPyBmYWxzZSA6IHVuZGVmaW5lZCkpO1xuICAgICAgICBpZiAoIXByZXNlcnZlQ2hlY2tlZCkge1xuICAgICAgICAgICAgdGhpcy5yYW5nZVN0YXJ0SW5kZXggPSAtMTtcbiAgICAgICAgfVxuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIExpc3Rib3hFbGVtZW50LnByb3RvdHlwZSwgXCJhY3RpdmVJbmRleFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IG1vZGU6IFwiYm9vbGVhblwiIH0pXG5dLCBMaXN0Ym94RWxlbWVudC5wcm90b3R5cGUsIFwibXVsdGlwbGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBjb252ZXJ0ZXI6IG51bGxhYmxlTnVtYmVyQ29udmVydGVyIH0pXG5dLCBMaXN0Ym94RWxlbWVudC5wcm90b3R5cGUsIFwic2l6ZVwiLCB2b2lkIDApO1xuIiwiaW1wb3J0IHsgaHRtbCwgd2hlbiB9IGZyb20gXCJAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudFwiO1xuY29uc3QgcHJvZ3Jlc3NTZWdtZW50cyA9IDQ0O1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jQmFzZVByb2dyZXNzfSBjb21wb25lbnQuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBwcm9ncmVzc1JpbmdUZW1wbGF0ZSA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBodG1sIGBcbiAgICA8dGVtcGxhdGVcbiAgICAgICAgcm9sZT1cInByb2dyZXNzYmFyXCJcbiAgICAgICAgYXJpYS12YWx1ZW5vdz1cIiR7eCA9PiB4LnZhbHVlfVwiXG4gICAgICAgIGFyaWEtdmFsdWVtaW49XCIke3ggPT4geC5taW59XCJcbiAgICAgICAgYXJpYS12YWx1ZW1heD1cIiR7eCA9PiB4Lm1heH1cIlxuICAgICAgICBjbGFzcz1cIiR7eCA9PiAoeC5wYXVzZWQgPyBcInBhdXNlZFwiIDogXCJcIil9XCJcbiAgICA+XG4gICAgICAgICR7d2hlbih4ID0+IHR5cGVvZiB4LnZhbHVlID09PSBcIm51bWJlclwiLCBodG1sIGBcbiAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwicHJvZ3Jlc3NcIlxuICAgICAgICAgICAgICAgICAgICBwYXJ0PVwicHJvZ3Jlc3NcIlxuICAgICAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDE2IDE2XCJcbiAgICAgICAgICAgICAgICAgICAgc2xvdD1cImRldGVybWluYXRlXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxjaXJjbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYmFja2dyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0PVwiYmFja2dyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjeD1cIjhweFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjeT1cIjhweFwiXG4gICAgICAgICAgICAgICAgICAgICAgICByPVwiN3B4XCJcbiAgICAgICAgICAgICAgICAgICAgPjwvY2lyY2xlPlxuICAgICAgICAgICAgICAgICAgICA8Y2lyY2xlXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImRldGVybWluYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQ9XCJkZXRlcm1pbmF0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT1cInN0cm9rZS1kYXNoYXJyYXk6ICR7eCA9PiAocHJvZ3Jlc3NTZWdtZW50cyAqIHgucGVyY2VudENvbXBsZXRlKSAvXG4gICAgMTAwfXB4ICR7cHJvZ3Jlc3NTZWdtZW50c31weFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjeD1cIjhweFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjeT1cIjhweFwiXG4gICAgICAgICAgICAgICAgICAgICAgICByPVwiN3B4XCJcbiAgICAgICAgICAgICAgICAgICAgPjwvY2lyY2xlPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgYCwgaHRtbCBgXG4gICAgICAgICAgICAgICAgPHNsb3QgbmFtZT1cImluZGV0ZXJtaW5hdGVcIiBzbG90PVwiaW5kZXRlcm1pbmF0ZVwiPlxuICAgICAgICAgICAgICAgICAgICAke2RlZmluaXRpb24uaW5kZXRlcm1pbmF0ZUluZGljYXRvciB8fCBcIlwifVxuICAgICAgICAgICAgICAgIDwvc2xvdD5cbiAgICAgICAgICAgIGApfVxuICAgIDwvdGVtcGxhdGU+XG5gO1xuIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgYXR0ciwgbnVsbGFibGVOdW1iZXJDb252ZXJ0ZXIsIG9ic2VydmFibGUsIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBGb3VuZGF0aW9uRWxlbWVudCwgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi1lbGVtZW50L2ZvdW5kYXRpb24tZWxlbWVudC5qc1wiO1xuLyoqXG4gKiBBbiBQcm9ncmVzcyBIVE1MIEVsZW1lbnQuXG4gKiBJbXBsZW1lbnRzIHRoZSB7QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLTEuMS8jcHJvZ3Jlc3NiYXIgfCBBUklBIHByb2dyZXNzYmFyIH0uXG4gKlxuICogQHNsb3QgaW5kZXRlcm1pbmF0ZSAtIFRoZSBzbG90IGZvciBhIGN1c3RvbSBpbmRldGVybWluYXRlIGluZGljYXRvclxuICogQGNzc3BhcnQgcHJvZ3Jlc3MgLSBSZXByZXNlbnRzIHRoZSBwcm9ncmVzcyBlbGVtZW50XG4gKiBAY3NzcGFydCBkZXRlcm1pbmF0ZSAtIFRoZSBkZXRlcm1pbmF0ZSBpbmRpY2F0b3JcbiAqIEBjc3NwYXJ0IGluZGV0ZXJtaW5hdGUgLSBUaGUgaW5kZXRlcm1pbmF0ZSBpbmRpY2F0b3JcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlUHJvZ3Jlc3MgZXh0ZW5kcyBGb3VuZGF0aW9uRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbmRpY2F0ZXMgcHJvZ3Jlc3MgaW4gJVxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGVyY2VudENvbXBsZXRlID0gMDtcbiAgICB9XG4gICAgdmFsdWVDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy4kZmFzdENvbnRyb2xsZXIuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUGVyY2VudENvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWluQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBlcmNlbnRDb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1heENoYW5nZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLiRmYXN0Q29udHJvbGxlci5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQZXJjZW50Q29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy51cGRhdGVQZXJjZW50Q29tcGxldGUoKTtcbiAgICB9XG4gICAgdXBkYXRlUGVyY2VudENvbXBsZXRlKCkge1xuICAgICAgICBjb25zdCBtaW4gPSB0eXBlb2YgdGhpcy5taW4gPT09IFwibnVtYmVyXCIgPyB0aGlzLm1pbiA6IDA7XG4gICAgICAgIGNvbnN0IG1heCA9IHR5cGVvZiB0aGlzLm1heCA9PT0gXCJudW1iZXJcIiA/IHRoaXMubWF4IDogMTAwO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHR5cGVvZiB0aGlzLnZhbHVlID09PSBcIm51bWJlclwiID8gdGhpcy52YWx1ZSA6IDA7XG4gICAgICAgIGNvbnN0IHJhbmdlID0gbWF4IC0gbWluO1xuICAgICAgICB0aGlzLnBlcmNlbnRDb21wbGV0ZSA9XG4gICAgICAgICAgICByYW5nZSA9PT0gMCA/IDAgOiBNYXRoLmZyb3VuZCgoKHZhbHVlIC0gbWluKSAvIHJhbmdlKSAqIDEwMCk7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGNvbnZlcnRlcjogbnVsbGFibGVOdW1iZXJDb252ZXJ0ZXIgfSlcbl0sIEJhc2VQcm9ncmVzcy5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBjb252ZXJ0ZXI6IG51bGxhYmxlTnVtYmVyQ29udmVydGVyIH0pXG5dLCBCYXNlUHJvZ3Jlc3MucHJvdG90eXBlLCBcIm1pblwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGNvbnZlcnRlcjogbnVsbGFibGVOdW1iZXJDb252ZXJ0ZXIgfSlcbl0sIEJhc2VQcm9ncmVzcy5wcm90b3R5cGUsIFwibWF4XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdHRyKHsgbW9kZTogXCJib29sZWFuXCIgfSlcbl0sIEJhc2VQcm9ncmVzcy5wcm90b3R5cGUsIFwicGF1c2VkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBCYXNlUHJvZ3Jlc3MucHJvdG90eXBlLCBcInBlcmNlbnRDb21wbGV0ZVwiLCB2b2lkIDApO1xuIiwiaW1wb3J0IHsgTGlzdGJveEVsZW1lbnQgfSBmcm9tIFwiLi4vbGlzdGJveC9saXN0Ym94LmVsZW1lbnQuanNcIjtcbmltcG9ydCB7IEZvcm1Bc3NvY2lhdGVkIH0gZnJvbSBcIi4uL2Zvcm0tYXNzb2NpYXRlZC9mb3JtLWFzc29jaWF0ZWQuanNcIjtcbmNsYXNzIF9TZWxlY3QgZXh0ZW5kcyBMaXN0Ym94RWxlbWVudCB7XG59XG4vKipcbiAqIEEgZm9ybS1hc3NvY2lhdGVkIGJhc2UgY2xhc3MgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jKFNlbGVjdDpjbGFzcyl9IGNvbXBvbmVudC5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIEZvcm1Bc3NvY2lhdGVkU2VsZWN0IGV4dGVuZHMgRm9ybUFzc29jaWF0ZWQoX1NlbGVjdCkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLnByb3h5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyLCBET00sIE9ic2VydmFibGUsIG9ic2VydmFibGUsIHZvbGF0aWxlIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC1lbGVtZW50XCI7XG5pbXBvcnQgeyBrZXlBcnJvd0Rvd24sIGtleUFycm93VXAsIGtleUVuZCwga2V5RW50ZXIsIGtleUVzY2FwZSwga2V5SG9tZSwga2V5U3BhY2UsIGtleVRhYiwgdW5pcXVlSWQsIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzXCI7XG5pbXBvcnQgeyBEZWxlZ2F0ZXNBUklBTGlzdGJveCwgTGlzdGJveCB9IGZyb20gXCIuLi9saXN0Ym94L2xpc3Rib3guanNcIjtcbmltcG9ydCB7IFN0YXJ0RW5kIH0gZnJvbSBcIi4uL3BhdHRlcm5zL3N0YXJ0LWVuZC5qc1wiO1xuaW1wb3J0IHsgYXBwbHlNaXhpbnMgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2FwcGx5LW1peGlucy5qc1wiO1xuaW1wb3J0IHsgRm9ybUFzc29jaWF0ZWRTZWxlY3QgfSBmcm9tIFwiLi9zZWxlY3QuZm9ybS1hc3NvY2lhdGVkLmpzXCI7XG5pbXBvcnQgeyBTZWxlY3RQb3NpdGlvbiB9IGZyb20gXCIuL3NlbGVjdC5vcHRpb25zLmpzXCI7XG4vKipcbiAqIEEgU2VsZWN0IEN1c3RvbSBIVE1MIEVsZW1lbnQuXG4gKiBJbXBsZW1lbnRzIHRoZSB7QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLTEuMS8jc2VsZWN0IHwgQVJJQSBzZWxlY3QgfS5cbiAqXG4gKiBAc2xvdCBzdGFydCAtIENvbnRlbnQgd2hpY2ggY2FuIGJlIHByb3ZpZGVkIGJlZm9yZSB0aGUgYnV0dG9uIGNvbnRlbnRcbiAqIEBzbG90IGVuZCAtIENvbnRlbnQgd2hpY2ggY2FuIGJlIHByb3ZpZGVkIGFmdGVyIHRoZSBidXR0b24gY29udGVudFxuICogQHNsb3QgYnV0dG9uLWNvbnRhaW5lciAtIFRoZSBlbGVtZW50IHJlcHJlc2VudGluZyB0aGUgc2VsZWN0IGJ1dHRvblxuICogQHNsb3Qgc2VsZWN0ZWQtdmFsdWUgLSBUaGUgc2VsZWN0ZWQgdmFsdWVcbiAqIEBzbG90IGluZGljYXRvciAtIFRoZSB2aXN1YWwgaW5kaWNhdG9yIGZvciB0aGUgZXhwYW5kL2NvbGxhcHNlIHN0YXRlIG9mIHRoZSBidXR0b25cbiAqIEBzbG90IC0gVGhlIGRlZmF1bHQgc2xvdCBmb3Igc2xvdHRlZCBvcHRpb25zXG4gKiBAY3NzcGFydCBjb250cm9sIC0gVGhlIGVsZW1lbnQgcmVwcmVzZW50aW5nIHRoZSBzZWxlY3QgaW52b2tpbmcgZWxlbWVudFxuICogQGNzc3BhcnQgc2VsZWN0ZWQtdmFsdWUgLSBUaGUgZWxlbWVudCB3cmFwcGluZyB0aGUgc2VsZWN0ZWQgdmFsdWVcbiAqIEBjc3NwYXJ0IGluZGljYXRvciAtIFRoZSBlbGVtZW50IHdyYXBwaW5nIHRoZSB2aXN1YWwgaW5kaWNhdG9yXG4gKiBAY3NzcGFydCBsaXN0Ym94IC0gVGhlIGxpc3Rib3ggZWxlbWVudFxuICogQGZpcmVzIGlucHV0IC0gRmlyZXMgYSBjdXN0b20gJ2lucHV0JyBldmVudCB3aGVuIHRoZSB2YWx1ZSB1cGRhdGVzXG4gKiBAZmlyZXMgY2hhbmdlIC0gRmlyZXMgYSBjdXN0b20gJ2NoYW5nZScgZXZlbnQgd2hlbiB0aGUgdmFsdWUgdXBkYXRlc1xuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFNlbGVjdCBleHRlbmRzIEZvcm1Bc3NvY2lhdGVkU2VsZWN0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvcGVuIGF0dHJpYnV0ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgKiBAcmVtYXJrc1xuICAgICAgICAgKiBIVE1MIEF0dHJpYnV0ZTogb3BlblxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbmRpY2F0ZXMgdGhlIGluaXRpYWwgc3RhdGUgb2YgdGhlIHBvc2l0aW9uIGF0dHJpYnV0ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZvcmNlZFBvc2l0aW9uID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdW5pcXVlIGlkIGZvciB0aGUgaW50ZXJuYWwgbGlzdGJveCBlbGVtZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGlzdGJveElkID0gdW5pcXVlSWQoXCJsaXN0Ym94LVwiKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtYXggaGVpZ2h0IGZvciB0aGUgbGlzdGJveCB3aGVuIG9wZW5lZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1heEhlaWdodCA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgZm9jdXMgYW5kIHN5bmNocm9uaXplcyBBUklBIGF0dHJpYnV0ZXMgd2hlbiB0aGUgb3BlbiBwcm9wZXJ0eSBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByZXYgLSB0aGUgcHJldmlvdXMgb3BlbiB2YWx1ZVxuICAgICAqIEBwYXJhbSBuZXh0IC0gdGhlIGN1cnJlbnQgb3BlbiB2YWx1ZVxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgb3BlbkNoYW5nZWQocHJldiwgbmV4dCkge1xuICAgICAgICBpZiAoIXRoaXMuY29sbGFwc2libGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vcGVuKSB7XG4gICAgICAgICAgICB0aGlzLmFyaWFDb250cm9scyA9IHRoaXMubGlzdGJveElkO1xuICAgICAgICAgICAgdGhpcy5hcmlhRXhwYW5kZWQgPSBcInRydWVcIjtcbiAgICAgICAgICAgIHRoaXMuc2V0UG9zaXRpb25pbmcoKTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNBbmRTY3JvbGxPcHRpb25JbnRvVmlldygpO1xuICAgICAgICAgICAgdGhpcy5pbmRleFdoZW5PcGVuZWQgPSB0aGlzLnNlbGVjdGVkSW5kZXg7XG4gICAgICAgICAgICAvLyBmb2N1cyBpcyBkaXJlY3RlZCB0byB0aGUgZWxlbWVudCB3aGVuIGBvcGVuYCBpcyBjaGFuZ2VkIHByb2dyYW1tYXRpY2FsbHlcbiAgICAgICAgICAgIERPTS5xdWV1ZVVwZGF0ZSgoKSA9PiB0aGlzLmZvY3VzKCkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXJpYUNvbnRyb2xzID0gXCJcIjtcbiAgICAgICAgdGhpcy5hcmlhRXhwYW5kZWQgPSBcImZhbHNlXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjb21wb25lbnQgaXMgY29sbGFwc2libGUgd2hlbiBpbiBzaW5nbGUtc2VsZWN0aW9uIG1vZGUgd2l0aCBubyBzaXplIGF0dHJpYnV0ZS5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldCBjb2xsYXBzaWJsZSgpIHtcbiAgICAgICAgcmV0dXJuICEodGhpcy5tdWx0aXBsZSB8fCB0eXBlb2YgdGhpcy5zaXplID09PSBcIm51bWJlclwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHZhbHVlIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgT2JzZXJ2YWJsZS50cmFjayh0aGlzLCBcInZhbHVlXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gICAgfVxuICAgIHNldCB2YWx1ZShuZXh0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZztcbiAgICAgICAgY29uc3QgcHJldiA9IGAke3RoaXMuX3ZhbHVlfWA7XG4gICAgICAgIGlmICgoX2EgPSB0aGlzLl9vcHRpb25zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZEluZGV4ID0gdGhpcy5fb3B0aW9ucy5maW5kSW5kZXgoZWwgPT4gZWwudmFsdWUgPT09IG5leHQpO1xuICAgICAgICAgICAgY29uc3QgcHJldlNlbGVjdGVkVmFsdWUgPSAoX2MgPSAoX2IgPSB0aGlzLl9vcHRpb25zW3RoaXMuc2VsZWN0ZWRJbmRleF0pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi52YWx1ZSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IG5leHRTZWxlY3RlZFZhbHVlID0gKF9lID0gKF9kID0gdGhpcy5fb3B0aW9uc1tzZWxlY3RlZEluZGV4XSkgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLnZhbHVlKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBudWxsO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkSW5kZXggPT09IC0xIHx8IHByZXZTZWxlY3RlZFZhbHVlICE9PSBuZXh0U2VsZWN0ZWRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIG5leHQgPSBcIlwiO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IHNlbGVjdGVkSW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXh0ID0gKF9nID0gKF9mID0gdGhpcy5maXJzdFNlbGVjdGVkT3B0aW9uKSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2YudmFsdWUpICE9PSBudWxsICYmIF9nICE9PSB2b2lkIDAgPyBfZyA6IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZXYgIT09IG5leHQpIHtcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gbmV4dDtcbiAgICAgICAgICAgIHN1cGVyLnZhbHVlQ2hhbmdlZChwcmV2LCBuZXh0KTtcbiAgICAgICAgICAgIE9ic2VydmFibGUubm90aWZ5KHRoaXMsIFwidmFsdWVcIik7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURpc3BsYXlWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHZhbHVlIGFuZCBkaXNwbGF5IHZhbHVlIHRvIG1hdGNoIHRoZSBmaXJzdCBzZWxlY3RlZCBvcHRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2hvdWxkRW1pdCAtIGlmIHRydWUsIHRoZSBpbnB1dCBhbmQgY2hhbmdlIGV2ZW50cyB3aWxsIGJlIGVtaXR0ZWRcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHVwZGF0ZVZhbHVlKHNob3VsZEVtaXQpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgaWYgKHRoaXMuJGZhc3RDb250cm9sbGVyLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gKF9iID0gKF9hID0gdGhpcy5maXJzdFNlbGVjdGVkT3B0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudmFsdWUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNob3VsZEVtaXQpIHtcbiAgICAgICAgICAgIHRoaXMuJGVtaXQoXCJpbnB1dFwiKTtcbiAgICAgICAgICAgIHRoaXMuJGVtaXQoXCJjaGFuZ2VcIiwgdGhpcywge1xuICAgICAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgICAgICAgY29tcG9zZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHByb3h5IHZhbHVlIHdoZW4gdGhlIHNlbGVjdGVkIGluZGV4IGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJldiAtIHRoZSBwcmV2aW91cyBzZWxlY3RlZCBpbmRleFxuICAgICAqIEBwYXJhbSBuZXh0IC0gdGhlIG5leHQgc2VsZWN0ZWQgaW5kZXhcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHNlbGVjdGVkSW5kZXhDaGFuZ2VkKHByZXYsIG5leHQpIHtcbiAgICAgICAgc3VwZXIuc2VsZWN0ZWRJbmRleENoYW5nZWQocHJldiwgbmV4dCk7XG4gICAgICAgIHRoaXMudXBkYXRlVmFsdWUoKTtcbiAgICB9XG4gICAgcG9zaXRpb25DaGFuZ2VkKHByZXYsIG5leHQpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbkF0dHJpYnV0ZSA9IG5leHQ7XG4gICAgICAgIHRoaXMuc2V0UG9zaXRpb25pbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIGFuZCBhcHBseSBsaXN0Ym94IHBvc2l0aW9uaW5nIGJhc2VkIG9uIGF2YWlsYWJsZSB2aWV3cG9ydCBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBzZXRQb3NpdGlvbmluZygpIHtcbiAgICAgICAgY29uc3QgY3VycmVudEJveCA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IHZpZXdwb3J0SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICBjb25zdCBhdmFpbGFibGVCb3R0b20gPSB2aWV3cG9ydEhlaWdodCAtIGN1cnJlbnRCb3guYm90dG9tO1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5mb3JjZWRQb3NpdGlvblxuICAgICAgICAgICAgPyB0aGlzLnBvc2l0aW9uQXR0cmlidXRlXG4gICAgICAgICAgICA6IGN1cnJlbnRCb3gudG9wID4gYXZhaWxhYmxlQm90dG9tXG4gICAgICAgICAgICAgICAgPyBTZWxlY3RQb3NpdGlvbi5hYm92ZVxuICAgICAgICAgICAgICAgIDogU2VsZWN0UG9zaXRpb24uYmVsb3c7XG4gICAgICAgIHRoaXMucG9zaXRpb25BdHRyaWJ1dGUgPSB0aGlzLmZvcmNlZFBvc2l0aW9uXG4gICAgICAgICAgICA/IHRoaXMucG9zaXRpb25BdHRyaWJ1dGVcbiAgICAgICAgICAgIDogdGhpcy5wb3NpdGlvbjtcbiAgICAgICAgdGhpcy5tYXhIZWlnaHQgPVxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9PT0gU2VsZWN0UG9zaXRpb24uYWJvdmUgPyB+fmN1cnJlbnRCb3gudG9wIDogfn5hdmFpbGFibGVCb3R0b207XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSB2YWx1ZSBkaXNwbGF5ZWQgb24gdGhlIGJ1dHRvbi5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXQgZGlzcGxheVZhbHVlKCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBPYnNlcnZhYmxlLnRyYWNrKHRoaXMsIFwiZGlzcGxheVZhbHVlXCIpO1xuICAgICAgICByZXR1cm4gKF9iID0gKF9hID0gdGhpcy5maXJzdFNlbGVjdGVkT3B0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudGV4dCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3luY2hyb25pemUgdGhlIGBhcmlhLWRpc2FibGVkYCBwcm9wZXJ0eSB3aGVuIHRoZSBgZGlzYWJsZWRgIHByb3BlcnR5IGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJldiAtIFRoZSBwcmV2aW91cyBkaXNhYmxlZCB2YWx1ZVxuICAgICAqIEBwYXJhbSBuZXh0IC0gVGhlIG5leHQgZGlzYWJsZWQgdmFsdWVcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGRpc2FibGVkQ2hhbmdlZChwcmV2LCBuZXh0KSB7XG4gICAgICAgIGlmIChzdXBlci5kaXNhYmxlZENoYW5nZWQpIHtcbiAgICAgICAgICAgIHN1cGVyLmRpc2FibGVkQ2hhbmdlZChwcmV2LCBuZXh0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFyaWFEaXNhYmxlZCA9IHRoaXMuZGlzYWJsZWQgPyBcInRydWVcIiA6IFwiZmFsc2VcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIGVsZW1lbnQgdG8gaXRzIGZpcnN0IHNlbGVjdGFibGUgb3B0aW9uIHdoZW4gaXRzIHBhcmVudCBmb3JtIGlzIHJlc2V0LlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZm9ybVJlc2V0Q2FsbGJhY2soKSB7XG4gICAgICAgIHRoaXMuc2V0UHJveHlPcHRpb25zKCk7XG4gICAgICAgIC8vIENhbGwgdGhlIGJhc2UgY2xhc3MncyBpbXBsZW1lbnRhdGlvbiBzZXREZWZhdWx0U2VsZWN0ZWRPcHRpb24gaW5zdGVhZCBvZiB0aGUgc2VsZWN0J3NcbiAgICAgICAgLy8gb3ZlcnJpZGUsIGluIG9yZGVyIHRvIHJlc2V0IHRoZSBzZWxlY3RlZEluZGV4IHdpdGhvdXQgdXNpbmcgdGhlIHZhbHVlIHByb3BlcnR5LlxuICAgICAgICBzdXBlci5zZXREZWZhdWx0U2VsZWN0ZWRPcHRpb24oKTtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIG9wZW5pbmcgYW5kIGNsb3NpbmcgdGhlIGxpc3Rib3ggd2hlbiB0aGUgc2VsZWN0IGlzIGNsaWNrZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZSAtIHRoZSBtb3VzZSBldmVudFxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNsaWNrSGFuZGxlcihlKSB7XG4gICAgICAgIC8vIGRvIG5vdGhpbmcgaWYgdGhlIHNlbGVjdCBpcyBkaXNhYmxlZFxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9wZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IGNhcHR1cmVkID0gZS50YXJnZXQuY2xvc2VzdChgb3B0aW9uLFtyb2xlPW9wdGlvbl1gKTtcbiAgICAgICAgICAgIGlmIChjYXB0dXJlZCAmJiBjYXB0dXJlZC5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdXBlci5jbGlja0hhbmRsZXIoZSk7XG4gICAgICAgIHRoaXMub3BlbiA9IHRoaXMuY29sbGFwc2libGUgJiYgIXRoaXMub3BlbjtcbiAgICAgICAgaWYgKCF0aGlzLm9wZW4gJiYgdGhpcy5pbmRleFdoZW5PcGVuZWQgIT09IHRoaXMuc2VsZWN0ZWRJbmRleCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyBmb2N1cyBzdGF0ZSB3aGVuIHRoZSBlbGVtZW50IG9yIGl0cyBjaGlsZHJlbiBsb3NlIGZvY3VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGUgLSBUaGUgZm9jdXMgZXZlbnRcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBmb2N1c291dEhhbmRsZXIoZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHN1cGVyLmZvY3Vzb3V0SGFuZGxlcihlKTtcbiAgICAgICAgaWYgKCF0aGlzLm9wZW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZvY3VzVGFyZ2V0ID0gZS5yZWxhdGVkVGFyZ2V0O1xuICAgICAgICBpZiAodGhpcy5pc1NhbWVOb2RlKGZvY3VzVGFyZ2V0KSkge1xuICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKChfYSA9IHRoaXMub3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmluY2x1ZGVzKGZvY3VzVGFyZ2V0KSkpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXhXaGVuT3BlbmVkICE9PSB0aGlzLnNlbGVjdGVkSW5kZXgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHZhbHVlIHdoZW4gYW4gb3B0aW9uJ3MgdmFsdWUgY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzb3VyY2UgLSB0aGUgc291cmNlIG9iamVjdFxuICAgICAqIEBwYXJhbSBwcm9wZXJ0eU5hbWUgLSB0aGUgcHJvcGVydHkgdG8gZXZhbHVhdGVcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGhhbmRsZUNoYW5nZShzb3VyY2UsIHByb3BlcnR5TmFtZSkge1xuICAgICAgICBzdXBlci5oYW5kbGVDaGFuZ2Uoc291cmNlLCBwcm9wZXJ0eU5hbWUpO1xuICAgICAgICBpZiAocHJvcGVydHlOYW1lID09PSBcInZhbHVlXCIpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTeW5jaHJvbml6ZSB0aGUgZm9ybS1hc3NvY2lhdGVkIHByb3h5IGFuZCB1cGRhdGVzIHRoZSB2YWx1ZSBwcm9wZXJ0eSBvZiB0aGUgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwcmV2IC0gdGhlIHByZXZpb3VzIGNvbGxlY3Rpb24gb2Ygc2xvdHRlZCBvcHRpb24gZWxlbWVudHNcbiAgICAgKiBAcGFyYW0gbmV4dCAtIHRoZSBuZXh0IGNvbGxlY3Rpb24gb2Ygc2xvdHRlZCBvcHRpb24gZWxlbWVudHNcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHNsb3R0ZWRPcHRpb25zQ2hhbmdlZChwcmV2LCBuZXh0KSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKG8gPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm90aWZpZXIgPSBPYnNlcnZhYmxlLmdldE5vdGlmaWVyKG8pO1xuICAgICAgICAgICAgbm90aWZpZXIudW5zdWJzY3JpYmUodGhpcywgXCJ2YWx1ZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHN1cGVyLnNsb3R0ZWRPcHRpb25zQ2hhbmdlZChwcmV2LCBuZXh0KTtcbiAgICAgICAgdGhpcy5vcHRpb25zLmZvckVhY2gobyA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3RpZmllciA9IE9ic2VydmFibGUuZ2V0Tm90aWZpZXIobyk7XG4gICAgICAgICAgICBub3RpZmllci5zdWJzY3JpYmUodGhpcywgXCJ2YWx1ZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2V0UHJveHlPcHRpb25zKCk7XG4gICAgICAgIHRoaXMudXBkYXRlVmFsdWUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJldmVudHMgZm9jdXMgd2hlbiBzaXplIGlzIHNldCBhbmQgYSBzY3JvbGxiYXIgaXMgY2xpY2tlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlIC0gdGhlIG1vdXNlIGV2ZW50IG9iamVjdFxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgbW91c2Vkb3duSGFuZGxlcihlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKGUub2Zmc2V0WCA+PSAwICYmIGUub2Zmc2V0WCA8PSAoKF9hID0gdGhpcy5saXN0Ym94KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2Nyb2xsV2lkdGgpKSB7XG4gICAgICAgICAgICByZXR1cm4gc3VwZXIubW91c2Vkb3duSGFuZGxlcihlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jb2xsYXBzaWJsZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgbXVsdGlwbGUgcHJvcGVydHkgb24gdGhlIHByb3h5IGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJldiAtIHRoZSBwcmV2aW91cyBtdWx0aXBsZSB2YWx1ZVxuICAgICAqIEBwYXJhbSBuZXh0IC0gdGhlIGN1cnJlbnQgbXVsdGlwbGUgdmFsdWVcbiAgICAgKi9cbiAgICBtdWx0aXBsZUNoYW5nZWQocHJldiwgbmV4dCkge1xuICAgICAgICBzdXBlci5tdWx0aXBsZUNoYW5nZWQocHJldiwgbmV4dCk7XG4gICAgICAgIGlmICh0aGlzLnByb3h5KSB7XG4gICAgICAgICAgICB0aGlzLnByb3h5Lm11bHRpcGxlID0gbmV4dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBzZWxlY3RlZG5lc3Mgb2YgZWFjaCBvcHRpb24gd2hlbiB0aGUgbGlzdCBvZiBzZWxlY3RlZCBvcHRpb25zIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJldiAtIHRoZSBwcmV2aW91cyBsaXN0IG9mIHNlbGVjdGVkIG9wdGlvbnNcbiAgICAgKiBAcGFyYW0gbmV4dCAtIHRoZSBjdXJyZW50IGxpc3Qgb2Ygc2VsZWN0ZWQgb3B0aW9uc1xuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc2VsZWN0ZWRPcHRpb25zQ2hhbmdlZChwcmV2LCBuZXh0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgc3VwZXIuc2VsZWN0ZWRPcHRpb25zQ2hhbmdlZChwcmV2LCBuZXh0KTtcbiAgICAgICAgKF9hID0gdGhpcy5vcHRpb25zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9yRWFjaCgobywgaSkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgY29uc3QgcHJveHlPcHRpb24gPSAoX2EgPSB0aGlzLnByb3h5KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eub3B0aW9ucy5pdGVtKGkpO1xuICAgICAgICAgICAgaWYgKHByb3h5T3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgcHJveHlPcHRpb24uc2VsZWN0ZWQgPSBvLnNlbGVjdGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgc2VsZWN0ZWQgaW5kZXggdG8gbWF0Y2ggdGhlIGZpcnN0IG9wdGlvbiB3aXRoIHRoZSBzZWxlY3RlZCBhdHRyaWJ1dGUsIG9yXG4gICAgICogdGhlIGZpcnN0IHNlbGVjdGFibGUgb3B0aW9uLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc2V0RGVmYXVsdFNlbGVjdGVkT3B0aW9uKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSAoX2EgPSB0aGlzLm9wdGlvbnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IEFycmF5LmZyb20odGhpcy5jaGlsZHJlbikuZmlsdGVyKExpc3Rib3guc2xvdHRlZE9wdGlvbkZpbHRlcik7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkSW5kZXggPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZmluZEluZGV4KGVsID0+IGVsLmhhc0F0dHJpYnV0ZShcInNlbGVjdGVkXCIpIHx8IGVsLnNlbGVjdGVkIHx8IGVsLnZhbHVlID09PSB0aGlzLnZhbHVlKTtcbiAgICAgICAgaWYgKHNlbGVjdGVkSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSBzZWxlY3RlZEluZGV4O1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyBhbmQgZmlsbHMgdGhlIHByb3h5IHRvIG1hdGNoIHRoZSBjb21wb25lbnQncyBvcHRpb25zLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc2V0UHJveHlPcHRpb25zKCkge1xuICAgICAgICBpZiAodGhpcy5wcm94eSBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50ICYmIHRoaXMub3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5wcm94eS5vcHRpb25zLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb3h5T3B0aW9uID0gb3B0aW9uLnByb3h5IHx8XG4gICAgICAgICAgICAgICAgICAgIChvcHRpb24gaW5zdGFuY2VvZiBIVE1MT3B0aW9uRWxlbWVudCA/IG9wdGlvbi5jbG9uZU5vZGUoKSA6IG51bGwpO1xuICAgICAgICAgICAgICAgIGlmIChwcm94eU9wdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3h5Lm9wdGlvbnMuYWRkKHByb3h5T3B0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUga2V5Ym9hcmQgaW50ZXJhY3Rpb24gZm9yIHRoZSBzZWxlY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZSAtIHRoZSBrZXlib2FyZCBldmVudFxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGtleWRvd25IYW5kbGVyKGUpIHtcbiAgICAgICAgc3VwZXIua2V5ZG93bkhhbmRsZXIoZSk7XG4gICAgICAgIGNvbnN0IGtleSA9IGUua2V5IHx8IGUua2V5LmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgICAgICBjYXNlIGtleVNwYWNlOiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbGxhcHNpYmxlICYmIHRoaXMudHlwZUFoZWFkRXhwaXJlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW4gPSAhdGhpcy5vcGVuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2Uga2V5SG9tZTpcbiAgICAgICAgICAgIGNhc2Uga2V5RW5kOiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBrZXlFbnRlcjoge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW4gPSAhdGhpcy5vcGVuO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBrZXlFc2NhcGU6IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb2xsYXBzaWJsZSAmJiB0aGlzLm9wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIGtleVRhYjoge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbGxhcHNpYmxlICYmIHRoaXMub3Blbikge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMub3BlbiAmJiB0aGlzLmluZGV4V2hlbk9wZW5lZCAhPT0gdGhpcy5zZWxlY3RlZEluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5pbmRleFdoZW5PcGVuZWQgPSB0aGlzLnNlbGVjdGVkSW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEoa2V5ID09PSBrZXlBcnJvd0Rvd24gfHwga2V5ID09PSBrZXlBcnJvd1VwKTtcbiAgICB9XG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMuZm9yY2VkUG9zaXRpb24gPSAhIXRoaXMucG9zaXRpb25BdHRyaWJ1dGU7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRlbnRjaGFuZ2VcIiwgdGhpcy51cGRhdGVEaXNwbGF5VmFsdWUpO1xuICAgIH1cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY29udGVudGNoYW5nZVwiLCB0aGlzLnVwZGF0ZURpc3BsYXlWYWx1ZSk7XG4gICAgICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHByb3h5J3Mgc2l6ZSBwcm9wZXJ0eSB3aGVuIHRoZSBzaXplIGF0dHJpYnV0ZSBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByZXYgLSB0aGUgcHJldmlvdXMgc2l6ZVxuICAgICAqIEBwYXJhbSBuZXh0IC0gdGhlIGN1cnJlbnQgc2l6ZVxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc2l6ZUNoYW5nZWQocHJldiwgbmV4dCkge1xuICAgICAgICBzdXBlci5zaXplQ2hhbmdlZChwcmV2LCBuZXh0KTtcbiAgICAgICAgaWYgKHRoaXMucHJveHkpIHtcbiAgICAgICAgICAgIHRoaXMucHJveHkuc2l6ZSA9IG5leHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB1cGRhdGVEaXNwbGF5VmFsdWUoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbGxhcHNpYmxlKSB7XG4gICAgICAgICAgICBPYnNlcnZhYmxlLm5vdGlmeSh0aGlzLCBcImRpc3BsYXlWYWx1ZVwiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIGF0dHIoeyBhdHRyaWJ1dGU6IFwib3BlblwiLCBtb2RlOiBcImJvb2xlYW5cIiB9KVxuXSwgU2VsZWN0LnByb3RvdHlwZSwgXCJvcGVuXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICB2b2xhdGlsZVxuXSwgU2VsZWN0LnByb3RvdHlwZSwgXCJjb2xsYXBzaWJsZVwiLCBudWxsKTtcbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIFNlbGVjdC5wcm90b3R5cGUsIFwiY29udHJvbFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXR0cih7IGF0dHJpYnV0ZTogXCJwb3NpdGlvblwiIH0pXG5dLCBTZWxlY3QucHJvdG90eXBlLCBcInBvc2l0aW9uQXR0cmlidXRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBTZWxlY3QucHJvdG90eXBlLCBcInBvc2l0aW9uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBvYnNlcnZhYmxlXG5dLCBTZWxlY3QucHJvdG90eXBlLCBcIm1heEhlaWdodFwiLCB2b2lkIDApO1xuLyoqXG4gKiBJbmNsdWRlcyBBUklBIHN0YXRlcyBhbmQgcHJvcGVydGllcyByZWxhdGluZyB0byB0aGUgQVJJQSBzZWxlY3Qgcm9sZS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWxlZ2F0ZXNBUklBU2VsZWN0IHtcbn1cbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIERlbGVnYXRlc0FSSUFTZWxlY3QucHJvdG90eXBlLCBcImFyaWFDb250cm9sc1wiLCB2b2lkIDApO1xuYXBwbHlNaXhpbnMoRGVsZWdhdGVzQVJJQVNlbGVjdCwgRGVsZWdhdGVzQVJJQUxpc3Rib3gpO1xuYXBwbHlNaXhpbnMoU2VsZWN0LCBTdGFydEVuZCwgRGVsZWdhdGVzQVJJQVNlbGVjdCk7XG4iLCJpbXBvcnQgeyBodG1sLCByZWYsIHNsb3R0ZWQsIHdoZW4gfSBmcm9tIFwiQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnRcIjtcbmltcG9ydCB7IExpc3Rib3ggfSBmcm9tIFwiLi4vbGlzdGJveC9saXN0Ym94LmpzXCI7XG5pbXBvcnQgeyBlbmRTbG90VGVtcGxhdGUsIHN0YXJ0U2xvdFRlbXBsYXRlIH0gZnJvbSBcIi4uL3BhdHRlcm5zL3N0YXJ0LWVuZC5qc1wiO1xuLyoqXG4gKiBUaGUgdGVtcGxhdGUgZm9yIHRoZSB7QGxpbmsgQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24jKFNlbGVjdDpjbGFzcyl9IGNvbXBvbmVudC5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IHNlbGVjdFRlbXBsYXRlID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IGh0bWwgYFxuICAgIDx0ZW1wbGF0ZVxuICAgICAgICBjbGFzcz1cIiR7eCA9PiBbXG4gICAgeC5jb2xsYXBzaWJsZSAmJiBcImNvbGxhcHNpYmxlXCIsXG4gICAgeC5jb2xsYXBzaWJsZSAmJiB4Lm9wZW4gJiYgXCJvcGVuXCIsXG4gICAgeC5kaXNhYmxlZCAmJiBcImRpc2FibGVkXCIsXG4gICAgeC5jb2xsYXBzaWJsZSAmJiB4LnBvc2l0aW9uLFxuXVxuICAgIC5maWx0ZXIoQm9vbGVhbilcbiAgICAuam9pbihcIiBcIil9XCJcbiAgICAgICAgYXJpYS1hY3RpdmVkZXNjZW5kYW50PVwiJHt4ID0+IHguYXJpYUFjdGl2ZURlc2NlbmRhbnR9XCJcbiAgICAgICAgYXJpYS1jb250cm9scz1cIiR7eCA9PiB4LmFyaWFDb250cm9sc31cIlxuICAgICAgICBhcmlhLWRpc2FibGVkPVwiJHt4ID0+IHguYXJpYURpc2FibGVkfVwiXG4gICAgICAgIGFyaWEtZXhwYW5kZWQ9XCIke3ggPT4geC5hcmlhRXhwYW5kZWR9XCJcbiAgICAgICAgYXJpYS1oYXNwb3B1cD1cIiR7eCA9PiAoeC5jb2xsYXBzaWJsZSA/IFwibGlzdGJveFwiIDogbnVsbCl9XCJcbiAgICAgICAgYXJpYS1tdWx0aXNlbGVjdGFibGU9XCIke3ggPT4geC5hcmlhTXVsdGlTZWxlY3RhYmxlfVwiXG4gICAgICAgID9vcGVuPVwiJHt4ID0+IHgub3Blbn1cIlxuICAgICAgICByb2xlPVwiY29tYm9ib3hcIlxuICAgICAgICB0YWJpbmRleD1cIiR7eCA9PiAoIXguZGlzYWJsZWQgPyBcIjBcIiA6IG51bGwpfVwiXG4gICAgICAgIEBjbGljaz1cIiR7KHgsIGMpID0+IHguY2xpY2tIYW5kbGVyKGMuZXZlbnQpfVwiXG4gICAgICAgIEBmb2N1c2luPVwiJHsoeCwgYykgPT4geC5mb2N1c2luSGFuZGxlcihjLmV2ZW50KX1cIlxuICAgICAgICBAZm9jdXNvdXQ9XCIkeyh4LCBjKSA9PiB4LmZvY3Vzb3V0SGFuZGxlcihjLmV2ZW50KX1cIlxuICAgICAgICBAa2V5ZG93bj1cIiR7KHgsIGMpID0+IHgua2V5ZG93bkhhbmRsZXIoYy5ldmVudCl9XCJcbiAgICAgICAgQG1vdXNlZG93bj1cIiR7KHgsIGMpID0+IHgubW91c2Vkb3duSGFuZGxlcihjLmV2ZW50KX1cIlxuICAgID5cbiAgICAgICAgJHt3aGVuKHggPT4geC5jb2xsYXBzaWJsZSwgaHRtbCBgXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImNvbnRyb2xcIlxuICAgICAgICAgICAgICAgICAgICBwYXJ0PVwiY29udHJvbFwiXG4gICAgICAgICAgICAgICAgICAgID9kaXNhYmxlZD1cIiR7eCA9PiB4LmRpc2FibGVkfVwiXG4gICAgICAgICAgICAgICAgICAgICR7cmVmKFwiY29udHJvbFwiKX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICR7c3RhcnRTbG90VGVtcGxhdGUoY29udGV4dCwgZGVmaW5pdGlvbil9XG4gICAgICAgICAgICAgICAgICAgIDxzbG90IG5hbWU9XCJidXR0b24tY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2VsZWN0ZWQtdmFsdWVcIiBwYXJ0PVwic2VsZWN0ZWQtdmFsdWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2xvdCBuYW1lPVwic2VsZWN0ZWQtdmFsdWVcIj4ke3ggPT4geC5kaXNwbGF5VmFsdWV9PC9zbG90PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGFyaWEtaGlkZGVuPVwidHJ1ZVwiIGNsYXNzPVwiaW5kaWNhdG9yXCIgcGFydD1cImluZGljYXRvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzbG90IG5hbWU9XCJpbmRpY2F0b3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtkZWZpbml0aW9uLmluZGljYXRvciB8fCBcIlwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2xvdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L3Nsb3Q+XG4gICAgICAgICAgICAgICAgICAgICR7ZW5kU2xvdFRlbXBsYXRlKGNvbnRleHQsIGRlZmluaXRpb24pfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYCl9XG4gICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzPVwibGlzdGJveFwiXG4gICAgICAgICAgICBpZD1cIiR7eCA9PiB4Lmxpc3Rib3hJZH1cIlxuICAgICAgICAgICAgcGFydD1cImxpc3Rib3hcIlxuICAgICAgICAgICAgcm9sZT1cImxpc3Rib3hcIlxuICAgICAgICAgICAgP2Rpc2FibGVkPVwiJHt4ID0+IHguZGlzYWJsZWR9XCJcbiAgICAgICAgICAgID9oaWRkZW49XCIke3ggPT4gKHguY29sbGFwc2libGUgPyAheC5vcGVuIDogZmFsc2UpfVwiXG4gICAgICAgICAgICAke3JlZihcImxpc3Rib3hcIil9XG4gICAgICAgID5cbiAgICAgICAgICAgIDxzbG90XG4gICAgICAgICAgICAgICAgJHtzbG90dGVkKHtcbiAgICBmaWx0ZXI6IExpc3Rib3guc2xvdHRlZE9wdGlvbkZpbHRlcixcbiAgICBmbGF0dGVuOiB0cnVlLFxuICAgIHByb3BlcnR5OiBcInNsb3R0ZWRPcHRpb25zXCIsXG59KX1cbiAgICAgICAgICAgID48L3Nsb3Q+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvdGVtcGxhdGU+XG5gO1xuIiwiLyoqXG4gKiBUaGUgQ1NTIHZhbHVlIGZvciBkaXNhYmxlZCBjdXJzb3JzLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgZGlzYWJsZWRDdXJzb3IgPSBcIm5vdC1hbGxvd2VkXCI7XG4iLCIvKipcbiAqIEEgQ1NTIGZyYWdtZW50IHRvIHNldCBgZGlzcGxheTogbm9uZTtgIHdoZW4gdGhlIGhvc3QgaXMgaGlkZGVuIHVzaW5nIHRoZSBbaGlkZGVuXSBhdHRyaWJ1dGUuXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBoaWRkZW4gPSBgOmhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX1gO1xuLyoqXG4gKiBBcHBsaWVzIGEgQ1NTIGRpc3BsYXkgcHJvcGVydHkuXG4gKiBBbHNvIGFkZHMgQ1NTIHJ1bGVzIHRvIG5vdCBkaXNwbGF5IHRoZSBlbGVtZW50IHdoZW4gdGhlIFtoaWRkZW5dIGF0dHJpYnV0ZSBpcyBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LlxuICogQHBhcmFtIGRpc3BsYXkgLSBUaGUgQ1NTIGRpc3BsYXkgcHJvcGVydHkgdmFsdWVcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXkoZGlzcGxheVZhbHVlKSB7XG4gICAgcmV0dXJuIGAke2hpZGRlbn06aG9zdHtkaXNwbGF5OiR7ZGlzcGxheVZhbHVlfX1gO1xufVxuIiwiaW1wb3J0IHsgY2FuVXNlRm9jdXNWaXNpYmxlIH0gZnJvbSBcIkBtaWNyb3NvZnQvZmFzdC13ZWItdXRpbGl0aWVzXCI7XG4vKipcbiAqIFRoZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBmb2N1cyBzZWxlY3RvciB0byBiZSB1c2VkLiBWYWx1ZVxuICogd2lsbCBiZSBcImZvY3VzLXZpc2libGVcIiB3aGVuIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9zZWxlY3RvcnMtNC8jdGhlLWZvY3VzLXZpc2libGUtcHNldWRvXG4gKiBpcyBzdXBwb3J0ZWQgYW5kIFwiZm9jdXNcIiB3aGVuIGl0IGlzIG5vdC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBmb2N1c1Zpc2libGUgPSBjYW5Vc2VGb2N1c1Zpc2libGUoKSA/IFwiZm9jdXMtdmlzaWJsZVwiIDogXCJmb2N1c1wiO1xuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG5pbXBvcnQgeyBEZXNpZ25TeXN0ZW0gfSBmcm9tICdAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbic7XG4vKipcbiAqIFByb3ZpZGVzIGEgZGVzaWduIHN5c3RlbSBmb3IgdGhlIHNwZWNpZmllZCBlbGVtZW50IGVpdGhlciBieSByZXR1cm5pbmcgb25lIHRoYXQgd2FzXG4gKiBhbHJlYWR5IGNyZWF0ZWQgZm9yIHRoYXQgZWxlbWVudCBvciBjcmVhdGluZyBvbmUuXG4gKiBAcGFyYW0gZWxlbWVudCAtIFRoZSBlbGVtZW50IHRvIHJvb3QgdGhlIGRlc2lnbiBzeXN0ZW0gYXQuIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIGJvZHkuXG4gKiBAcmV0dXJucyBBIFZTQ29kZSBEZXNpZ24gU3lzdGVtXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcm92aWRlVlNDb2RlRGVzaWduU3lzdGVtKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gRGVzaWduU3lzdGVtLmdldE9yQ3JlYXRlKGVsZW1lbnQpLndpdGhQcmVmaXgoJ3ZzY29kZScpO1xufVxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4vKipcbiAqIENvbmZpZ3VyZXMgYSBNdXRhdGlvbk9ic2VydmVyIHRvIHdhdGNoIGZvciBWaXN1YWwgU3R1ZGlvIENvZGUgdGhlbWUgY2hhbmdlcyBhbmRcbiAqIGFwcGxpZXMgdGhlIGN1cnJlbnQgVmlzdWFsIFN0dWRpbyBDb2RlIHRoZW1lIHRvIHRoZSB0b29sa2l0IGNvbXBvbmVudHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbml0VGhlbWVDaGFuZ2VMaXN0ZW5lcih0b2tlbk1hcHBpbmdzKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuICAgICAgICAgICAgYXBwbHlDdXJyZW50VGhlbWUodG9rZW5NYXBwaW5ncyk7XG4gICAgICAgIH0pO1xuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHRydWUsXG4gICAgICAgICAgICBhdHRyaWJ1dGVGaWx0ZXI6IFsnY2xhc3MnXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGFwcGx5Q3VycmVudFRoZW1lKHRva2VuTWFwcGluZ3MpO1xuICAgIH0pO1xufVxuLyoqXG4gKiBBcHBsaWVzIHRoZSBjdXJyZW50IFZpc3VhbCBTdHVkaW8gQ29kZSB0aGVtZSB0byB0aGUgdG9vbGtpdCBjb21wb25lbnRzLlxuICovXG5mdW5jdGlvbiBhcHBseUN1cnJlbnRUaGVtZSh0b2tlbk1hcHBpbmdzKSB7XG4gICAgLy8gR2V0IGFsbCB0aGUgc3R5bGVzIGFwcGxpZWQgdG8gdGhlIDxib2R5PiB0YWcgaW4gdGhlIHdlYnZpZXcgSFRNTFxuICAgIC8vIEltcG9ydGFudGx5IHRoaXMgaW5jbHVkZXMgYWxsIHRoZSBDU1MgdmFyaWFibGVzIGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAgICAvLyBjdXJyZW50IFZpc3VhbCBTdHVkaW8gQ29kZSB0aGVtZVxuICAgIGNvbnN0IHN0eWxlcyA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSk7XG4gICAgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcbiAgICBpZiAoYm9keSkge1xuICAgICAgICBjb25zdCB0aGVtZUtpbmQgPSBib2R5LmdldEF0dHJpYnV0ZSgnZGF0YS12c2NvZGUtdGhlbWUta2luZCcpO1xuICAgICAgICBmb3IgKGNvbnN0IFt2c2NvZGVUb2tlbk5hbWUsIHRvb2xraXRUb2tlbl0gb2YgdG9rZW5NYXBwaW5ncykge1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gc3R5bGVzLmdldFByb3BlcnR5VmFsdWUodnNjb2RlVG9rZW5OYW1lKS50b1N0cmluZygpO1xuICAgICAgICAgICAgLy8gSGFuZGxlIGEgY291cGxlIG9mIHN0eWxpbmcgZWRnZSBjYXNlcyB3aGVuIGEgaGlnaCBjb250cmFzdCB0aGVtZSBpcyBhcHBsaWVkXG4gICAgICAgICAgICBpZiAodGhlbWVLaW5kID09PSAndnNjb2RlLWhpZ2gtY29udHJhc3QnKSB7XG4gICAgICAgICAgICAgICAgLy8gRGV2ZWxvcGVyIG5vdGU6XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyBUaGVyZSBhcmUgYSBoYW5kZnVsIG9mIFZTIENvZGUgdGhlbWUgdG9rZW5zIHRoYXQgaGF2ZSBubyB2YWx1ZSB3aGVuIGEgaGlnaFxuICAgICAgICAgICAgICAgIC8vIGNvbnRyYXN0IHRoZW1lIGlzIGFwcGxpZWQuXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGFuIGlzc3VlIGJlY2F1c2Ugd2hlbiBubyB2YWx1ZSBpcyBzZXQgdGhlIHRvb2xraXQgdG9rZW5zIHdpbGwgZmFsbFxuICAgICAgICAgICAgICAgIC8vIGJhY2sgdG8gdGhlaXIgZGVmYXVsdCBjb2xvciB2YWx1ZXMgKGFrYSB0aGUgVlMgQ29kZSBkYXJrIHRoZW1lIGNvbG9yIHBhbGV0dGUpLlxuICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiB0aGUgYmFja2dyb3VuZHMgb2YgYSBjb3VwbGUgb2YgY29tcG9uZW50cyBoYXZpbmcgZGVmYXVsdCBkYXJrXG4gICAgICAgICAgICAgICAgLy8gdGhlbWUgY29sb3Jz4oCT4oCTdGh1cyBicmVha2luZyB0aGUgaGlnaCBjb250cmFzdCB0aGVtZS5cbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vIFRoZSBiZWxvdyBjb2RlLCBjYXRjaGVzIHRoZXNlIHRva2VucyB3aGljaCBoYXZlIG5vIHZhbHVlIGFuZCBhcmUgYWxzbyBiYWNrZ3JvdW5kXG4gICAgICAgICAgICAgICAgLy8gdG9rZW5zLCB0aGVuIG92ZXJyaWRlcyB0aGVpciB2YWx1ZSB0byBiZSB0cmFuc3BhcmVudC5cbiAgICAgICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoID09PSAwICYmXG4gICAgICAgICAgICAgICAgICAgIHRvb2xraXRUb2tlbi5uYW1lLmluY2x1ZGVzKCdiYWNrZ3JvdW5kJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAndHJhbnNwYXJlbnQnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBTZXQgaWNvbiBidXR0b24gaG92ZXIgdG8gYmUgdHJhbnNwYXJlbnQgaW4gaGlnaCBjb250cmFzdCB0aGVtZXNcbiAgICAgICAgICAgICAgICBpZiAodG9vbGtpdFRva2VuLm5hbWUgPT09ICdidXR0b24taWNvbi1ob3Zlci1iYWNrZ3JvdW5kJykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9ICd0cmFuc3BhcmVudCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhlbWVLaW5kID09PSAndnNjb2RlLWhpZ2gtY29udHJhc3QtbGlnaHQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCAmJlxuICAgICAgICAgICAgICAgICAgICB0b29sa2l0VG9rZW4ubmFtZS5pbmNsdWRlcygnYmFja2dyb3VuZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNldCBidXR0b24gdmFyaWFudCBob3ZlciBiYWNrZ3JvdW5kcyB0byBjb3JyZWN0IHZhbHVlcyBiYXNlZCBvbiBWUyBDb2RlIGNvcmUgc291cmNlOlxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L3ZzY29kZS9ibG9iL2ZkMGVlNGY3N2UzNTRkZTEwYWU1OTFjOWU5N2ZlNWFkNDFiMzk4ZmMvc3JjL3ZzL3BsYXRmb3JtL3RoZW1lL2NvbW1vbi9jb2xvclJlZ2lzdHJ5LnRzI0wyNzAtTDI3NlxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRvb2xraXRUb2tlbi5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdidXR0b24tcHJpbWFyeS1ob3Zlci1iYWNrZ3JvdW5kJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9ICcjMEY0QTg1JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2J1dHRvbi1zZWNvbmRhcnktaG92ZXItYmFja2dyb3VuZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAndHJhbnNwYXJlbnQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYnV0dG9uLWljb24taG92ZXItYmFja2dyb3VuZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAndHJhbnNwYXJlbnQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU2V0IGNvbnRyYXN0LWFjdGl2ZS1ib3JkZXIgdG9rZW4gdG8gYmUgdHJhbnNwYXJlbnQgaW4gbm9uLWhpZ2gtY29udHJhc3QgdGhlbWVzXG4gICAgICAgICAgICAgICAgaWYgKHRvb2xraXRUb2tlbi5uYW1lID09PSAnY29udHJhc3QtYWN0aXZlLWJvcmRlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAndHJhbnNwYXJlbnQnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRvb2xraXRUb2tlbi5zZXRWYWx1ZUZvcihib2R5LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbmltcG9ydCB7IERlc2lnblRva2VuIH0gZnJvbSAnQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24nO1xuaW1wb3J0IHsgaW5pdFRoZW1lQ2hhbmdlTGlzdGVuZXIgfSBmcm9tICcuLi90aGVtZS9hcHBseVRoZW1lLmpzJztcbi8qKlxuICogQSBtYXBwaW5nIG9mIGFsbCB0aGUgVmlzdWFsIFN0dWRpbyBDb2RlIHRoZW1lIENTUyB2YXJpYWJsZXMgbWFwcGVkIHRvIHRoZVxuICogdG9vbGtpdCBkZXNpZ24gdG9rZW5zLlxuICovXG5leHBvcnQgY29uc3QgdG9rZW5NYXBwaW5ncyA9IG5ldyBNYXAoKTtcbi8qKlxuICogQm9vbGVhbiBmbGFnIHRoYXQgZW5zdXJlcyB0aGUgVlMgQ29kZSB0aGVtZSBsaXN0ZW5lciBpcyBpbml0aWFsaXplZCBvbmNlLlxuICovXG5sZXQgaXNUaGVtZUxpc3RlbmVySW5pdGlhbGl6ZWQgPSBmYWxzZTtcbi8qKlxuICogR2l2ZW4gYSBkZXNpZ24gdG9rZW4gbmFtZSwgcmV0dXJuIGEgbmV3IEZBU1QgQ1NTRGVzaWduVG9rZW4uXG4gKlxuICogQHJlbWFya3MgQSBWUyBDb2RlIHRoZW1lIENTUyB2YXJpYWJsZSBjYW4gYmUgb3B0aW9uYWxseSBwYXNzZWQgdG8gYmVcbiAqIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGVzaWduIHRva2VuLlxuICpcbiAqIEByZW1hcmtzIE9uIHRoZSBmaXJzdCBleGVjdXRpb24gdGhlIFZTIENvZGUgdGhlbWUgbGlzdGVuZXIgd2lsbCBhbHNvIGJlXG4gKiBpbml0aWFsaXplZC5cbiAqXG4gKiBAcGFyYW0gbmFtZSBBIGRlc2lnbiB0b2tlbiBuYW1lLlxuICogQHBhcmFtIHZzY29kZVRoZW1lVmFyIEEgVlMgQ29kZSB0aGVtZSBDU1MgdmFyaWFibGUgbmFtZSB0byBiZSBhc3NvY2lhdGVkIHdpdGhcbiAqIHRoZSBkZXNpZ24gdG9rZW4uXG4gKiBAcmV0dXJucyBBIEZBU1QgQ1NTRGVzaWduVG9rZW4gdGhhdCBlbWl0cyBhIENTUyBjdXN0b20gcHJvcGVydHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUobmFtZSwgdnNjb2RlVGhlbWVWYXIpIHtcbiAgICBjb25zdCBkZXNpZ25Ub2tlbiA9IERlc2lnblRva2VuLmNyZWF0ZShuYW1lKTtcbiAgICBpZiAodnNjb2RlVGhlbWVWYXIpIHtcbiAgICAgICAgLy8gSWYgdGhlIGZha2UgdnNjb2RlIHRva2VuIGlzIHBhc3NlZCBpbiwgYXR0YWNoIGEgdW5pcXVlIElEIHRvIGl0IHNvIHRoYXQgaXQgY2FuXG4gICAgICAgIC8vIGJlIGFkZGVkIHRvIHRoZSB0b2tlbk1hcHBpbmdzIG1hcCB3aXRob3V0IG92ZXJyaWRpbmcgYSBwcmV2aW91cyBmYWtlIHRva2VuIHZhbHVlXG4gICAgICAgIGlmICh2c2NvZGVUaGVtZVZhci5pbmNsdWRlcygnLS1mYWtlLXZzY29kZS10b2tlbicpKSB7XG4gICAgICAgICAgICBjb25zdCB1bmlxdWVJZCA9ICdpZCcgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zbGljZSgyKTtcbiAgICAgICAgICAgIHZzY29kZVRoZW1lVmFyID0gYCR7dnNjb2RlVGhlbWVWYXJ9LSR7dW5pcXVlSWR9YDtcbiAgICAgICAgfVxuICAgICAgICB0b2tlbk1hcHBpbmdzLnNldCh2c2NvZGVUaGVtZVZhciwgZGVzaWduVG9rZW4pO1xuICAgIH1cbiAgICBpZiAoIWlzVGhlbWVMaXN0ZW5lckluaXRpYWxpemVkKSB7XG4gICAgICAgIGluaXRUaGVtZUNoYW5nZUxpc3RlbmVyKHRva2VuTWFwcGluZ3MpO1xuICAgICAgICBpc1RoZW1lTGlzdGVuZXJJbml0aWFsaXplZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBkZXNpZ25Ub2tlbjtcbn1cbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuaW1wb3J0IHsgY3JlYXRlIH0gZnJvbSAnLi91dGlsaXRpZXMvZGVzaWduLXRva2Vucy9jcmVhdGUuanMnO1xuLyoqXG4gKiBEZXZlbG9wZXIgbm90ZTpcbiAqXG4gKiBUaGVyZSBhcmUgc29tZSB0b2tlbnMgZGVmaW5lZCBpbiB0aGlzIGZpbGUgdGhhdCBtYWtlIHVzZSBvZiBgLS1mYWtlLXZzY29kZS10b2tlbmAuIFRoaXMgaXNcbiAqIGRvbmUgd2hlbiBhIHRvb2xraXQgdG9rZW4gc2hvdWxkIGJlIGFkZGVkIHRvIHRoZSB0b2tlbk1hcHBpbmdzIG1hcCAoYW5kIHN1YnNlcXVlbnRseSBhbHRlcmVkXG4gKiBpbiB0aGUgYXBwbHlUaGVtZSBmdW5jdGlvbikgYnV0IGRvZXMgbm90IGhhdmUgYSBjb3JyZXNwb25kaW5nIFZTIENvZGUgdG9rZW4gdGhhdCBjYW4gYmUgdXNlZC5cbiAqXG4gKiBBbiBleGFtcGxlIGlzIGJ1dHRvbkljb25Ib3ZlckJhY2tncm91bmQgdG9rZW4gd2hpY2ggZG9lcyBub3QgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgVlMgQ29kZSB0b2tlblxuICogYXQgdGhpcyB0aW1lIChpdCdzIGEgaGFyZGNvZGVkIHZhbHVlIGluIFZTIENvZGUpLCBidXQgbmVlZHMgdG8gYmUgYWRqdXN0ZWQgdG8gYmUgdHJhbnNwYXJlbnQgd2hlbiBhXG4gKiBoaWdoIGNvbnRyYXN0IHRoZW1lIGlzIGFwcGxpZWQuXG4gKlxuICogQXMgYSBydWxlIG9mIHRodW1iLCBpZiB0aGVyZSBhcmUgc3BlY2lhbCBjYXNlcyB3aGVyZSBhIHRva2VuIG5lZWRzIHRvIGJlIGFkanVzdGVkIGJhc2VkIG9uIHRoZVxuICogVlMgQ29kZSB0aGVtZSBhbmQgZG9lcyBub3QgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgVlMgQ29kZSB0b2tlbiwgYC0tZmFrZS12c2NvZGUtdG9rZW5gIGNhbiBiZSB1c2VkXG4gKiB0byBpbmRpY2F0ZSB0aGF0IGl0IHNob3VsZCBiZSBhZGRlZCB0byB0aGUgdG9rZW5NYXBwaW5ncyBtYXAgYW5kIHRodXMgbWFrZSBpdCBhY2Nlc3NpYmxlIHRvIHRoZVxuICogYXBwbHlUaGVtZSBmdW5jdGlvbiB3aGVyZSBpdCBjYW4gYmUgZHluYW1pY2FsbHkgYWRqdXN0ZWQuXG4gKi9cbi8qKlxuICogR2xvYmFsIGRlc2lnbiB0b2tlbnMuXG4gKi9cbmV4cG9ydCBjb25zdCBiYWNrZ3JvdW5kID0gY3JlYXRlKCdiYWNrZ3JvdW5kJywgJy0tdnNjb2RlLWVkaXRvci1iYWNrZ3JvdW5kJykud2l0aERlZmF1bHQoJyMxZTFlMWUnKTtcbmV4cG9ydCBjb25zdCBib3JkZXJXaWR0aCA9IGNyZWF0ZSgnYm9yZGVyLXdpZHRoJykud2l0aERlZmF1bHQoMSk7XG5leHBvcnQgY29uc3QgY29udHJhc3RBY3RpdmVCb3JkZXIgPSBjcmVhdGUoJ2NvbnRyYXN0LWFjdGl2ZS1ib3JkZXInLCAnLS12c2NvZGUtY29udHJhc3RBY3RpdmVCb3JkZXInKS53aXRoRGVmYXVsdCgnI2YzODUxOCcpO1xuZXhwb3J0IGNvbnN0IGNvbnRyYXN0Qm9yZGVyID0gY3JlYXRlKCdjb250cmFzdC1ib3JkZXInLCAnLS12c2NvZGUtY29udHJhc3RCb3JkZXInKS53aXRoRGVmYXVsdCgnIzZmYzNkZicpO1xuZXhwb3J0IGNvbnN0IGNvcm5lclJhZGl1cyA9IGNyZWF0ZSgnY29ybmVyLXJhZGl1cycpLndpdGhEZWZhdWx0KDApO1xuZXhwb3J0IGNvbnN0IGNvcm5lclJhZGl1c1JvdW5kID0gY3JlYXRlKCdjb3JuZXItcmFkaXVzLXJvdW5kJykud2l0aERlZmF1bHQoMik7XG5leHBvcnQgY29uc3QgZGVzaWduVW5pdCA9IGNyZWF0ZSgnZGVzaWduLXVuaXQnKS53aXRoRGVmYXVsdCg0KTtcbmV4cG9ydCBjb25zdCBkaXNhYmxlZE9wYWNpdHkgPSBjcmVhdGUoJ2Rpc2FibGVkLW9wYWNpdHknKS53aXRoRGVmYXVsdCgwLjQpO1xuZXhwb3J0IGNvbnN0IGZvY3VzQm9yZGVyID0gY3JlYXRlKCdmb2N1cy1ib3JkZXInLCAnLS12c2NvZGUtZm9jdXNCb3JkZXInKS53aXRoRGVmYXVsdCgnIzAwN2ZkNCcpO1xuZXhwb3J0IGNvbnN0IGZvbnRGYW1pbHkgPSBjcmVhdGUoJ2ZvbnQtZmFtaWx5JywgJy0tdnNjb2RlLWZvbnQtZmFtaWx5Jykud2l0aERlZmF1bHQoJy1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgU2Vnb2UgVUksIFJvYm90bywgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZiwgQXBwbGUgQ29sb3IgRW1vamksIFNlZ29lIFVJIEVtb2ppLCBTZWdvZSBVSSBTeW1ib2wnKTtcbmV4cG9ydCBjb25zdCBmb250V2VpZ2h0ID0gY3JlYXRlKCdmb250LXdlaWdodCcsICctLXZzY29kZS1mb250LXdlaWdodCcpLndpdGhEZWZhdWx0KCc0MDAnKTtcbmV4cG9ydCBjb25zdCBmb3JlZ3JvdW5kID0gY3JlYXRlKCdmb3JlZ3JvdW5kJywgJy0tdnNjb2RlLWZvcmVncm91bmQnKS53aXRoRGVmYXVsdCgnI2NjY2NjYycpO1xuZXhwb3J0IGNvbnN0IGlucHV0SGVpZ2h0ID0gY3JlYXRlKCdpbnB1dC1oZWlnaHQnKS53aXRoRGVmYXVsdCgnMjYnKTtcbmV4cG9ydCBjb25zdCBpbnB1dE1pbldpZHRoID0gY3JlYXRlKCdpbnB1dC1taW4td2lkdGgnKS53aXRoRGVmYXVsdCgnMTAwcHgnKTtcbmV4cG9ydCBjb25zdCB0eXBlUmFtcEJhc2VGb250U2l6ZSA9IGNyZWF0ZSgndHlwZS1yYW1wLWJhc2UtZm9udC1zaXplJywgJy0tdnNjb2RlLWZvbnQtc2l6ZScpLndpdGhEZWZhdWx0KCcxM3B4Jyk7XG5leHBvcnQgY29uc3QgdHlwZVJhbXBCYXNlTGluZUhlaWdodCA9IGNyZWF0ZSgndHlwZS1yYW1wLWJhc2UtbGluZS1oZWlnaHQnKS53aXRoRGVmYXVsdCgnbm9ybWFsJyk7XG5leHBvcnQgY29uc3QgdHlwZVJhbXBNaW51czFGb250U2l6ZSA9IGNyZWF0ZSgndHlwZS1yYW1wLW1pbnVzMS1mb250LXNpemUnKS53aXRoRGVmYXVsdCgnMTFweCcpO1xuZXhwb3J0IGNvbnN0IHR5cGVSYW1wTWludXMxTGluZUhlaWdodCA9IGNyZWF0ZSgndHlwZS1yYW1wLW1pbnVzMS1saW5lLWhlaWdodCcpLndpdGhEZWZhdWx0KCcxNnB4Jyk7XG5leHBvcnQgY29uc3QgdHlwZVJhbXBNaW51czJGb250U2l6ZSA9IGNyZWF0ZSgndHlwZS1yYW1wLW1pbnVzMi1mb250LXNpemUnKS53aXRoRGVmYXVsdCgnOXB4Jyk7XG5leHBvcnQgY29uc3QgdHlwZVJhbXBNaW51czJMaW5lSGVpZ2h0ID0gY3JlYXRlKCd0eXBlLXJhbXAtbWludXMyLWxpbmUtaGVpZ2h0Jykud2l0aERlZmF1bHQoJzE2cHgnKTtcbmV4cG9ydCBjb25zdCB0eXBlUmFtcFBsdXMxRm9udFNpemUgPSBjcmVhdGUoJ3R5cGUtcmFtcC1wbHVzMS1mb250LXNpemUnKS53aXRoRGVmYXVsdCgnMTZweCcpO1xuZXhwb3J0IGNvbnN0IHR5cGVSYW1wUGx1czFMaW5lSGVpZ2h0ID0gY3JlYXRlKCd0eXBlLXJhbXAtcGx1czEtbGluZS1oZWlnaHQnKS53aXRoRGVmYXVsdCgnMjRweCcpO1xuZXhwb3J0IGNvbnN0IHNjcm9sbGJhcldpZHRoID0gY3JlYXRlKCdzY3JvbGxiYXJXaWR0aCcpLndpdGhEZWZhdWx0KCcxMHB4Jyk7XG5leHBvcnQgY29uc3Qgc2Nyb2xsYmFySGVpZ2h0ID0gY3JlYXRlKCdzY3JvbGxiYXJIZWlnaHQnKS53aXRoRGVmYXVsdCgnMTBweCcpO1xuZXhwb3J0IGNvbnN0IHNjcm9sbGJhclNsaWRlckJhY2tncm91bmQgPSBjcmVhdGUoJ3Njcm9sbGJhci1zbGlkZXItYmFja2dyb3VuZCcsICctLXZzY29kZS1zY3JvbGxiYXJTbGlkZXItYmFja2dyb3VuZCcpLndpdGhEZWZhdWx0KCcjNzk3OTc5NjYnKTtcbmV4cG9ydCBjb25zdCBzY3JvbGxiYXJTbGlkZXJIb3ZlckJhY2tncm91bmQgPSBjcmVhdGUoJ3Njcm9sbGJhci1zbGlkZXItaG92ZXItYmFja2dyb3VuZCcsICctLXZzY29kZS1zY3JvbGxiYXJTbGlkZXItaG92ZXJCYWNrZ3JvdW5kJykud2l0aERlZmF1bHQoJyM2NDY0NjRiMycpO1xuZXhwb3J0IGNvbnN0IHNjcm9sbGJhclNsaWRlckFjdGl2ZUJhY2tncm91bmQgPSBjcmVhdGUoJ3Njcm9sbGJhci1zbGlkZXItYWN0aXZlLWJhY2tncm91bmQnLCAnLS12c2NvZGUtc2Nyb2xsYmFyU2xpZGVyLWFjdGl2ZUJhY2tncm91bmQnKS53aXRoRGVmYXVsdCgnI2JmYmZiZjY2Jyk7XG4vKipcbiAqIEJhZGdlIGRlc2lnbiB0b2tlbnMuXG4gKi9cbmV4cG9ydCBjb25zdCBiYWRnZUJhY2tncm91bmQgPSBjcmVhdGUoJ2JhZGdlLWJhY2tncm91bmQnLCAnLS12c2NvZGUtYmFkZ2UtYmFja2dyb3VuZCcpLndpdGhEZWZhdWx0KCcjNGQ0ZDRkJyk7XG5leHBvcnQgY29uc3QgYmFkZ2VGb3JlZ3JvdW5kID0gY3JlYXRlKCdiYWRnZS1mb3JlZ3JvdW5kJywgJy0tdnNjb2RlLWJhZGdlLWZvcmVncm91bmQnKS53aXRoRGVmYXVsdCgnI2ZmZmZmZicpO1xuLyoqXG4gKiBCdXR0b24gZGVzaWduIHRva2Vucy5cbiAqL1xuLy8gTm90ZTogQnV0dG9uIGJvcmRlciBpcyB1c2VkIG9ubHkgZm9yIGhpZ2ggY29udHJhc3QgdGhlbWVzIGFuZCBzaG91bGQgYmUgbGVmdCBhcyB0cmFuc3BhcmVudCBvdGhlcndpc2UuXG5leHBvcnQgY29uc3QgYnV0dG9uQm9yZGVyID0gY3JlYXRlKCdidXR0b24tYm9yZGVyJywgJy0tdnNjb2RlLWJ1dHRvbi1ib3JkZXInKS53aXRoRGVmYXVsdCgndHJhbnNwYXJlbnQnKTtcbmV4cG9ydCBjb25zdCBidXR0b25JY29uQmFja2dyb3VuZCA9IGNyZWF0ZSgnYnV0dG9uLWljb24tYmFja2dyb3VuZCcpLndpdGhEZWZhdWx0KCd0cmFuc3BhcmVudCcpO1xuZXhwb3J0IGNvbnN0IGJ1dHRvbkljb25Db3JuZXJSYWRpdXMgPSBjcmVhdGUoJ2J1dHRvbi1pY29uLWNvcm5lci1yYWRpdXMnKS53aXRoRGVmYXVsdCgnNXB4Jyk7XG5leHBvcnQgY29uc3QgYnV0dG9uSWNvbkZvY3VzQm9yZGVyT2Zmc2V0ID0gY3JlYXRlKCdidXR0b24taWNvbi1vdXRsaW5lLW9mZnNldCcpLndpdGhEZWZhdWx0KDApO1xuLy8gTm90ZSB1c2FnZSBvZiBgLS1mYWtlLXZzY29kZS10b2tlbmAgKHJlZmVyIHRvIGRvYyBjb21tZW50IGF0IHRvcCBvZiBmaWxlIGZvciBleHBsYW5hdGlvbikuXG5leHBvcnQgY29uc3QgYnV0dG9uSWNvbkhvdmVyQmFja2dyb3VuZCA9IGNyZWF0ZSgnYnV0dG9uLWljb24taG92ZXItYmFja2dyb3VuZCcsICctLWZha2UtdnNjb2RlLXRva2VuJykud2l0aERlZmF1bHQoJ3JnYmEoOTAsIDkzLCA5NCwgMC4zMSknKTtcbmV4cG9ydCBjb25zdCBidXR0b25JY29uUGFkZGluZyA9IGNyZWF0ZSgnYnV0dG9uLWljb24tcGFkZGluZycpLndpdGhEZWZhdWx0KCczcHgnKTtcbmV4cG9ydCBjb25zdCBidXR0b25QcmltYXJ5QmFja2dyb3VuZCA9IGNyZWF0ZSgnYnV0dG9uLXByaW1hcnktYmFja2dyb3VuZCcsICctLXZzY29kZS1idXR0b24tYmFja2dyb3VuZCcpLndpdGhEZWZhdWx0KCcjMGU2MzljJyk7XG5leHBvcnQgY29uc3QgYnV0dG9uUHJpbWFyeUZvcmVncm91bmQgPSBjcmVhdGUoJ2J1dHRvbi1wcmltYXJ5LWZvcmVncm91bmQnLCAnLS12c2NvZGUtYnV0dG9uLWZvcmVncm91bmQnKS53aXRoRGVmYXVsdCgnI2ZmZmZmZicpO1xuZXhwb3J0IGNvbnN0IGJ1dHRvblByaW1hcnlIb3ZlckJhY2tncm91bmQgPSBjcmVhdGUoJ2J1dHRvbi1wcmltYXJ5LWhvdmVyLWJhY2tncm91bmQnLCAnLS12c2NvZGUtYnV0dG9uLWhvdmVyQmFja2dyb3VuZCcpLndpdGhEZWZhdWx0KCcjMTE3N2JiJyk7XG5leHBvcnQgY29uc3QgYnV0dG9uU2Vjb25kYXJ5QmFja2dyb3VuZCA9IGNyZWF0ZSgnYnV0dG9uLXNlY29uZGFyeS1iYWNrZ3JvdW5kJywgJy0tdnNjb2RlLWJ1dHRvbi1zZWNvbmRhcnlCYWNrZ3JvdW5kJykud2l0aERlZmF1bHQoJyMzYTNkNDEnKTtcbmV4cG9ydCBjb25zdCBidXR0b25TZWNvbmRhcnlGb3JlZ3JvdW5kID0gY3JlYXRlKCdidXR0b24tc2Vjb25kYXJ5LWZvcmVncm91bmQnLCAnLS12c2NvZGUtYnV0dG9uLXNlY29uZGFyeUZvcmVncm91bmQnKS53aXRoRGVmYXVsdCgnI2ZmZmZmZicpO1xuZXhwb3J0IGNvbnN0IGJ1dHRvblNlY29uZGFyeUhvdmVyQmFja2dyb3VuZCA9IGNyZWF0ZSgnYnV0dG9uLXNlY29uZGFyeS1ob3Zlci1iYWNrZ3JvdW5kJywgJy0tdnNjb2RlLWJ1dHRvbi1zZWNvbmRhcnlIb3ZlckJhY2tncm91bmQnKS53aXRoRGVmYXVsdCgnIzQ1NDk0ZScpO1xuZXhwb3J0IGNvbnN0IGJ1dHRvblBhZGRpbmdIb3Jpem9udGFsID0gY3JlYXRlKCdidXR0b24tcGFkZGluZy1ob3Jpem9udGFsJykud2l0aERlZmF1bHQoJzExcHgnKTtcbmV4cG9ydCBjb25zdCBidXR0b25QYWRkaW5nVmVydGljYWwgPSBjcmVhdGUoJ2J1dHRvbi1wYWRkaW5nLXZlcnRpY2FsJykud2l0aERlZmF1bHQoJzRweCcpO1xuLyoqXG4gKiBDaGVja2JveCBkZXNpZ24gdG9rZW5zLlxuICovXG5leHBvcnQgY29uc3QgY2hlY2tib3hCYWNrZ3JvdW5kID0gY3JlYXRlKCdjaGVja2JveC1iYWNrZ3JvdW5kJywgJy0tdnNjb2RlLWNoZWNrYm94LWJhY2tncm91bmQnKS53aXRoRGVmYXVsdCgnIzNjM2MzYycpO1xuZXhwb3J0IGNvbnN0IGNoZWNrYm94Qm9yZGVyID0gY3JlYXRlKCdjaGVja2JveC1ib3JkZXInLCAnLS12c2NvZGUtY2hlY2tib3gtYm9yZGVyJykud2l0aERlZmF1bHQoJyMzYzNjM2MnKTtcbmV4cG9ydCBjb25zdCBjaGVja2JveENvcm5lclJhZGl1cyA9IGNyZWF0ZSgnY2hlY2tib3gtY29ybmVyLXJhZGl1cycpLndpdGhEZWZhdWx0KDMpO1xuZXhwb3J0IGNvbnN0IGNoZWNrYm94Rm9yZWdyb3VuZCA9IGNyZWF0ZSgnY2hlY2tib3gtZm9yZWdyb3VuZCcsICctLXZzY29kZS1jaGVja2JveC1mb3JlZ3JvdW5kJykud2l0aERlZmF1bHQoJyNmMGYwZjAnKTtcbi8qKlxuICogRGF0YSBHcmlkIGRlc2lnbiB0b2tlbnNcbiAqL1xuZXhwb3J0IGNvbnN0IGxpc3RBY3RpdmVTZWxlY3Rpb25CYWNrZ3JvdW5kID0gY3JlYXRlKCdsaXN0LWFjdGl2ZS1zZWxlY3Rpb24tYmFja2dyb3VuZCcsICctLXZzY29kZS1saXN0LWFjdGl2ZVNlbGVjdGlvbkJhY2tncm91bmQnKS53aXRoRGVmYXVsdCgnIzA5NDc3MScpO1xuZXhwb3J0IGNvbnN0IGxpc3RBY3RpdmVTZWxlY3Rpb25Gb3JlZ3JvdW5kID0gY3JlYXRlKCdsaXN0LWFjdGl2ZS1zZWxlY3Rpb24tZm9yZWdyb3VuZCcsICctLXZzY29kZS1saXN0LWFjdGl2ZVNlbGVjdGlvbkZvcmVncm91bmQnKS53aXRoRGVmYXVsdCgnI2ZmZmZmZicpO1xuZXhwb3J0IGNvbnN0IGxpc3RIb3ZlckJhY2tncm91bmQgPSBjcmVhdGUoJ2xpc3QtaG92ZXItYmFja2dyb3VuZCcsICctLXZzY29kZS1saXN0LWhvdmVyQmFja2dyb3VuZCcpLndpdGhEZWZhdWx0KCcjMmEyZDJlJyk7XG4vKipcbiAqIERpdmlkZXIgZGVzaWduIHRva2Vucy5cbiAqL1xuZXhwb3J0IGNvbnN0IGRpdmlkZXJCYWNrZ3JvdW5kID0gY3JlYXRlKCdkaXZpZGVyLWJhY2tncm91bmQnLCAnLS12c2NvZGUtc2V0dGluZ3MtZHJvcGRvd25MaXN0Qm9yZGVyJykud2l0aERlZmF1bHQoJyM0NTQ1NDUnKTtcbi8qKlxuICogRHJvcGRvd24gZGVzaWduIHRva2Vucy5cbiAqL1xuZXhwb3J0IGNvbnN0IGRyb3Bkb3duQmFja2dyb3VuZCA9IGNyZWF0ZSgnZHJvcGRvd24tYmFja2dyb3VuZCcsICctLXZzY29kZS1kcm9wZG93bi1iYWNrZ3JvdW5kJykud2l0aERlZmF1bHQoJyMzYzNjM2MnKTtcbmV4cG9ydCBjb25zdCBkcm9wZG93bkJvcmRlciA9IGNyZWF0ZSgnZHJvcGRvd24tYm9yZGVyJywgJy0tdnNjb2RlLWRyb3Bkb3duLWJvcmRlcicpLndpdGhEZWZhdWx0KCcjM2MzYzNjJyk7XG5leHBvcnQgY29uc3QgZHJvcGRvd25Gb3JlZ3JvdW5kID0gY3JlYXRlKCdkcm9wZG93bi1mb3JlZ3JvdW5kJywgJy0tdnNjb2RlLWRyb3Bkb3duLWZvcmVncm91bmQnKS53aXRoRGVmYXVsdCgnI2YwZjBmMCcpO1xuZXhwb3J0IGNvbnN0IGRyb3Bkb3duTGlzdE1heEhlaWdodCA9IGNyZWF0ZSgnZHJvcGRvd24tbGlzdC1tYXgtaGVpZ2h0Jykud2l0aERlZmF1bHQoJzIwMHB4Jyk7XG4vKipcbiAqIFRleHQgRmllbGQgJiBBcmVhIGRlc2lnbiB0b2tlbnMuXG4gKi9cbmV4cG9ydCBjb25zdCBpbnB1dEJhY2tncm91bmQgPSBjcmVhdGUoJ2lucHV0LWJhY2tncm91bmQnLCAnLS12c2NvZGUtaW5wdXQtYmFja2dyb3VuZCcpLndpdGhEZWZhdWx0KCcjM2MzYzNjJyk7XG5leHBvcnQgY29uc3QgaW5wdXRGb3JlZ3JvdW5kID0gY3JlYXRlKCdpbnB1dC1mb3JlZ3JvdW5kJywgJy0tdnNjb2RlLWlucHV0LWZvcmVncm91bmQnKS53aXRoRGVmYXVsdCgnI2NjY2NjYycpO1xuZXhwb3J0IGNvbnN0IGlucHV0UGxhY2Vob2xkZXJGb3JlZ3JvdW5kID0gY3JlYXRlKCdpbnB1dC1wbGFjZWhvbGRlci1mb3JlZ3JvdW5kJywgJy0tdnNjb2RlLWlucHV0LXBsYWNlaG9sZGVyRm9yZWdyb3VuZCcpLndpdGhEZWZhdWx0KCcjY2NjY2NjJyk7XG4vKipcbiAqIExpbmsgZGVzaWduIHRva2Vucy5cbiAqL1xuZXhwb3J0IGNvbnN0IGxpbmtBY3RpdmVGb3JlZ3JvdW5kID0gY3JlYXRlKCdsaW5rLWFjdGl2ZS1mb3JlZ3JvdW5kJywgJy0tdnNjb2RlLXRleHRMaW5rLWFjdGl2ZUZvcmVncm91bmQnKS53aXRoRGVmYXVsdCgnIzM3OTRmZicpO1xuZXhwb3J0IGNvbnN0IGxpbmtGb3JlZ3JvdW5kID0gY3JlYXRlKCdsaW5rLWZvcmVncm91bmQnLCAnLS12c2NvZGUtdGV4dExpbmstZm9yZWdyb3VuZCcpLndpdGhEZWZhdWx0KCcjMzc5NGZmJyk7XG4vKipcbiAqIFByb2dyZXNzIHJpbmcgZGVzaWduIHRva2Vucy5cbiAqL1xuZXhwb3J0IGNvbnN0IHByb2dyZXNzQmFja2dyb3VuZCA9IGNyZWF0ZSgncHJvZ3Jlc3MtYmFja2dyb3VuZCcsICctLXZzY29kZS1wcm9ncmVzc0Jhci1iYWNrZ3JvdW5kJykud2l0aERlZmF1bHQoJyMwZTcwYzAnKTtcbi8qKlxuICogUGFuZWxzIGRlc2lnbiB0b2tlbnMuXG4gKi9cbmV4cG9ydCBjb25zdCBwYW5lbFRhYkFjdGl2ZUJvcmRlciA9IGNyZWF0ZSgncGFuZWwtdGFiLWFjdGl2ZS1ib3JkZXInLCAnLS12c2NvZGUtcGFuZWxUaXRsZS1hY3RpdmVCb3JkZXInKS53aXRoRGVmYXVsdCgnI2U3ZTdlNycpO1xuZXhwb3J0IGNvbnN0IHBhbmVsVGFiQWN0aXZlRm9yZWdyb3VuZCA9IGNyZWF0ZSgncGFuZWwtdGFiLWFjdGl2ZS1mb3JlZ3JvdW5kJywgJy0tdnNjb2RlLXBhbmVsVGl0bGUtYWN0aXZlRm9yZWdyb3VuZCcpLndpdGhEZWZhdWx0KCcjZTdlN2U3Jyk7XG5leHBvcnQgY29uc3QgcGFuZWxUYWJGb3JlZ3JvdW5kID0gY3JlYXRlKCdwYW5lbC10YWItZm9yZWdyb3VuZCcsICctLXZzY29kZS1wYW5lbFRpdGxlLWluYWN0aXZlRm9yZWdyb3VuZCcpLndpdGhEZWZhdWx0KCcjZTdlN2U3OTknKTtcbmV4cG9ydCBjb25zdCBwYW5lbFZpZXdCYWNrZ3JvdW5kID0gY3JlYXRlKCdwYW5lbC12aWV3LWJhY2tncm91bmQnLCAnLS12c2NvZGUtcGFuZWwtYmFja2dyb3VuZCcpLndpdGhEZWZhdWx0KCcjMWUxZTFlJyk7XG5leHBvcnQgY29uc3QgcGFuZWxWaWV3Qm9yZGVyID0gY3JlYXRlKCdwYW5lbC12aWV3LWJvcmRlcicsICctLXZzY29kZS1wYW5lbC1ib3JkZXInKS53aXRoRGVmYXVsdCgnIzgwODA4MDU5Jyk7XG4vKipcbiAqIFRhZyBkZXNpZ24gdG9rZW5zLlxuICovXG5leHBvcnQgY29uc3QgdGFnQ29ybmVyUmFkaXVzID0gY3JlYXRlKCd0YWctY29ybmVyLXJhZGl1cycpLndpdGhEZWZhdWx0KCcycHgnKTtcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlLCBTdXBwcmVzc2VkRXJyb3IsIFN5bWJvbCwgSXRlcmF0b3IgKi9cblxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XG4gIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XG4gIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59XG5cbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcbiAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcbiAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0O1xuICB9XG4gIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcbiAgdmFyIHQgPSB7fTtcbiAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXG4gICAgICB0W3BdID0gc1twXTtcbiAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcbiAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XG4gICAgICB9XG4gIHJldHVybiB0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2VzRGVjb3JhdGUoY3RvciwgZGVzY3JpcHRvckluLCBkZWNvcmF0b3JzLCBjb250ZXh0SW4sIGluaXRpYWxpemVycywgZXh0cmFJbml0aWFsaXplcnMpIHtcbiAgZnVuY3Rpb24gYWNjZXB0KGYpIHsgaWYgKGYgIT09IHZvaWQgMCAmJiB0eXBlb2YgZiAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRnVuY3Rpb24gZXhwZWN0ZWRcIik7IHJldHVybiBmOyB9XG4gIHZhciBraW5kID0gY29udGV4dEluLmtpbmQsIGtleSA9IGtpbmQgPT09IFwiZ2V0dGVyXCIgPyBcImdldFwiIDoga2luZCA9PT0gXCJzZXR0ZXJcIiA/IFwic2V0XCIgOiBcInZhbHVlXCI7XG4gIHZhciB0YXJnZXQgPSAhZGVzY3JpcHRvckluICYmIGN0b3IgPyBjb250ZXh0SW5bXCJzdGF0aWNcIl0gPyBjdG9yIDogY3Rvci5wcm90b3R5cGUgOiBudWxsO1xuICB2YXIgZGVzY3JpcHRvciA9IGRlc2NyaXB0b3JJbiB8fCAodGFyZ2V0ID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGNvbnRleHRJbi5uYW1lKSA6IHt9KTtcbiAgdmFyIF8sIGRvbmUgPSBmYWxzZTtcbiAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHZhciBjb250ZXh0ID0ge307XG4gICAgICBmb3IgKHZhciBwIGluIGNvbnRleHRJbikgY29udGV4dFtwXSA9IHAgPT09IFwiYWNjZXNzXCIgPyB7fSA6IGNvbnRleHRJbltwXTtcbiAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluLmFjY2VzcykgY29udGV4dC5hY2Nlc3NbcF0gPSBjb250ZXh0SW4uYWNjZXNzW3BdO1xuICAgICAgY29udGV4dC5hZGRJbml0aWFsaXplciA9IGZ1bmN0aW9uIChmKSB7IGlmIChkb25lKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCBpbml0aWFsaXplcnMgYWZ0ZXIgZGVjb3JhdGlvbiBoYXMgY29tcGxldGVkXCIpOyBleHRyYUluaXRpYWxpemVycy5wdXNoKGFjY2VwdChmIHx8IG51bGwpKTsgfTtcbiAgICAgIHZhciByZXN1bHQgPSAoMCwgZGVjb3JhdG9yc1tpXSkoa2luZCA9PT0gXCJhY2Nlc3NvclwiID8geyBnZXQ6IGRlc2NyaXB0b3IuZ2V0LCBzZXQ6IGRlc2NyaXB0b3Iuc2V0IH0gOiBkZXNjcmlwdG9yW2tleV0sIGNvbnRleHQpO1xuICAgICAgaWYgKGtpbmQgPT09IFwiYWNjZXNzb3JcIikge1xuICAgICAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgY29udGludWU7XG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCB8fCB0eXBlb2YgcmVzdWx0ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5nZXQpKSBkZXNjcmlwdG9yLmdldCA9IF87XG4gICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LnNldCkpIGRlc2NyaXB0b3Iuc2V0ID0gXztcbiAgICAgICAgICBpZiAoXyA9IGFjY2VwdChyZXN1bHQuaW5pdCkpIGluaXRpYWxpemVycy51bnNoaWZ0KF8pO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoXyA9IGFjY2VwdChyZXN1bHQpKSB7XG4gICAgICAgICAgaWYgKGtpbmQgPT09IFwiZmllbGRcIikgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoXyk7XG4gICAgICAgICAgZWxzZSBkZXNjcmlwdG9yW2tleV0gPSBfO1xuICAgICAgfVxuICB9XG4gIGlmICh0YXJnZXQpIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGNvbnRleHRJbi5uYW1lLCBkZXNjcmlwdG9yKTtcbiAgZG9uZSA9IHRydWU7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19ydW5Jbml0aWFsaXplcnModGhpc0FyZywgaW5pdGlhbGl6ZXJzLCB2YWx1ZSkge1xuICB2YXIgdXNlVmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMjtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbml0aWFsaXplcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhbHVlID0gdXNlVmFsdWUgPyBpbml0aWFsaXplcnNbaV0uY2FsbCh0aGlzQXJnLCB2YWx1ZSkgOiBpbml0aWFsaXplcnNbaV0uY2FsbCh0aGlzQXJnKTtcbiAgfVxuICByZXR1cm4gdXNlVmFsdWUgPyB2YWx1ZSA6IHZvaWQgMDtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3Byb3BLZXkoeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09IFwic3ltYm9sXCIgPyB4IDogXCJcIi5jb25jYXQoeCk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19zZXRGdW5jdGlvbk5hbWUoZiwgbmFtZSwgcHJlZml4KSB7XG4gIGlmICh0eXBlb2YgbmFtZSA9PT0gXCJzeW1ib2xcIikgbmFtZSA9IG5hbWUuZGVzY3JpcHRpb24gPyBcIltcIi5jb25jYXQobmFtZS5kZXNjcmlwdGlvbiwgXCJdXCIpIDogXCJcIjtcbiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLCBcIm5hbWVcIiwgeyBjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiBwcmVmaXggPyBcIlwiLmNvbmNhdChwcmVmaXgsIFwiIFwiLCBuYW1lKSA6IG5hbWUgfSk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xuICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xuICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnID0gT2JqZWN0LmNyZWF0ZSgodHlwZW9mIEl0ZXJhdG9yID09PSBcImZ1bmN0aW9uXCIgPyBJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKTtcbiAgcmV0dXJuIGcubmV4dCA9IHZlcmIoMCksIGdbXCJ0aHJvd1wiXSA9IHZlcmIoMSksIGdbXCJyZXR1cm5cIl0gPSB2ZXJiKDIpLCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xuICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gIH1cbn1cblxuZXhwb3J0IHZhciBfX2NyZWF0ZUJpbmRpbmcgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XG4gIH1cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gIG9bazJdID0gbVtrXTtcbn0pO1xuXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIG8pIHtcbiAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xuICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xuICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcbiAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xuICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XG4gICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xuICAgICAgfVxuICB9O1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xuICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XG4gIGlmICghbSkgcmV0dXJuIG87XG4gIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xuICB0cnkge1xuICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XG4gIH1cbiAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XG4gIGZpbmFsbHkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcbiAgICAgIH1cbiAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxuICB9XG4gIHJldHVybiBhcjtcbn1cblxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XG4gIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxuICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xuICByZXR1cm4gYXI7XG59XG5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xuICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcbiAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxuICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXG4gICAgICAgICAgcltrXSA9IGFbal07XG4gIHJldHVybiByO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheSh0bywgZnJvbSwgcGFjaykge1xuICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xuICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XG4gICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xuICAgICAgfVxuICB9XG4gIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XG4gIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcbiAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcbiAgcmV0dXJuIGkgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgQXN5bmNJdGVyYXRvciA9PT0gXCJmdW5jdGlvblwiID8gQXN5bmNJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiLCBhd2FpdFJldHVybiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcbiAgZnVuY3Rpb24gYXdhaXRSZXR1cm4oZikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGYsIHJlamVjdCk7IH07IH1cbiAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlmIChnW25dKSB7IGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IGlmIChmKSBpW25dID0gZihpW25dKTsgfSB9XG4gIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cbiAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XG4gIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cbiAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxuICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcbiAgdmFyIGksIHA7XG4gIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XG4gIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IGZhbHNlIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcbiAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcbiAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xuICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XG4gIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XG4gIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XG4gIHJldHVybiBjb29rZWQ7XG59O1xuXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59O1xuXG52YXIgb3duS2V5cyA9IGZ1bmN0aW9uKG8pIHtcbiAgb3duS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHx8IGZ1bmN0aW9uIChvKSB7XG4gICAgdmFyIGFyID0gW107XG4gICAgZm9yICh2YXIgayBpbiBvKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIGspKSBhclthci5sZW5ndGhdID0gaztcbiAgICByZXR1cm4gYXI7XG4gIH07XG4gIHJldHVybiBvd25LZXlzKG8pO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcbiAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgPSBvd25LZXlzKG1vZCksIGkgPSAwOyBpIDwgay5sZW5ndGg7IGkrKykgaWYgKGtbaV0gIT09IFwiZGVmYXVsdFwiKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGtbaV0pO1xuICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xuICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcbiAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xuICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcbiAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xuICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XG4gIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcbiAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcbiAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4oc3RhdGUsIHJlY2VpdmVyKSB7XG4gIGlmIChyZWNlaXZlciA9PT0gbnVsbCB8fCAodHlwZW9mIHJlY2VpdmVyICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiByZWNlaXZlciAhPT0gXCJmdW5jdGlvblwiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB1c2UgJ2luJyBvcGVyYXRvciBvbiBub24tb2JqZWN0XCIpO1xuICByZXR1cm4gdHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciA9PT0gc3RhdGUgOiBzdGF0ZS5oYXMocmVjZWl2ZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hZGREaXNwb3NhYmxlUmVzb3VyY2UoZW52LCB2YWx1ZSwgYXN5bmMpIHtcbiAgaWYgKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB2b2lkIDApIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkLlwiKTtcbiAgICB2YXIgZGlzcG9zZSwgaW5uZXI7XG4gICAgaWYgKGFzeW5jKSB7XG4gICAgICBpZiAoIVN5bWJvbC5hc3luY0Rpc3Bvc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNEaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuYXN5bmNEaXNwb3NlXTtcbiAgICB9XG4gICAgaWYgKGRpc3Bvc2UgPT09IHZvaWQgMCkge1xuICAgICAgaWYgKCFTeW1ib2wuZGlzcG9zZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5kaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuZGlzcG9zZV07XG4gICAgICBpZiAoYXN5bmMpIGlubmVyID0gZGlzcG9zZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkaXNwb3NlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3Qgbm90IGRpc3Bvc2FibGUuXCIpO1xuICAgIGlmIChpbm5lcikgZGlzcG9zZSA9IGZ1bmN0aW9uKCkgeyB0cnkgeyBpbm5lci5jYWxsKHRoaXMpOyB9IGNhdGNoIChlKSB7IHJldHVybiBQcm9taXNlLnJlamVjdChlKTsgfSB9O1xuICAgIGVudi5zdGFjay5wdXNoKHsgdmFsdWU6IHZhbHVlLCBkaXNwb3NlOiBkaXNwb3NlLCBhc3luYzogYXN5bmMgfSk7XG4gIH1cbiAgZWxzZSBpZiAoYXN5bmMpIHtcbiAgICBlbnYuc3RhY2sucHVzaCh7IGFzeW5jOiB0cnVlIH0pO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxudmFyIF9TdXBwcmVzc2VkRXJyb3IgPSB0eXBlb2YgU3VwcHJlc3NlZEVycm9yID09PSBcImZ1bmN0aW9uXCIgPyBTdXBwcmVzc2VkRXJyb3IgOiBmdW5jdGlvbiAoZXJyb3IsIHN1cHByZXNzZWQsIG1lc3NhZ2UpIHtcbiAgdmFyIGUgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19kaXNwb3NlUmVzb3VyY2VzKGVudikge1xuICBmdW5jdGlvbiBmYWlsKGUpIHtcbiAgICBlbnYuZXJyb3IgPSBlbnYuaGFzRXJyb3IgPyBuZXcgX1N1cHByZXNzZWRFcnJvcihlLCBlbnYuZXJyb3IsIFwiQW4gZXJyb3Igd2FzIHN1cHByZXNzZWQgZHVyaW5nIGRpc3Bvc2FsLlwiKSA6IGU7XG4gICAgZW52Lmhhc0Vycm9yID0gdHJ1ZTtcbiAgfVxuICB2YXIgciwgcyA9IDA7XG4gIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgd2hpbGUgKHIgPSBlbnYuc3RhY2sucG9wKCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghci5hc3luYyAmJiBzID09PSAxKSByZXR1cm4gcyA9IDAsIGVudi5zdGFjay5wdXNoKHIpLCBQcm9taXNlLnJlc29sdmUoKS50aGVuKG5leHQpO1xuICAgICAgICBpZiAoci5kaXNwb3NlKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IHIuZGlzcG9zZS5jYWxsKHIudmFsdWUpO1xuICAgICAgICAgIGlmIChyLmFzeW5jKSByZXR1cm4gcyB8PSAyLCBQcm9taXNlLnJlc29sdmUocmVzdWx0KS50aGVuKG5leHQsIGZ1bmN0aW9uKGUpIHsgZmFpbChlKTsgcmV0dXJuIG5leHQoKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBzIHw9IDE7XG4gICAgICB9XG4gICAgICBjYXRjaCAoZSkge1xuICAgICAgICBmYWlsKGUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocyA9PT0gMSkgcmV0dXJuIGVudi5oYXNFcnJvciA/IFByb21pc2UucmVqZWN0KGVudi5lcnJvcikgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICBpZiAoZW52Lmhhc0Vycm9yKSB0aHJvdyBlbnYuZXJyb3I7XG4gIH1cbiAgcmV0dXJuIG5leHQoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uKHBhdGgsIHByZXNlcnZlSnN4KSB7XG4gIGlmICh0eXBlb2YgcGF0aCA9PT0gXCJzdHJpbmdcIiAmJiAvXlxcLlxcLj9cXC8vLnRlc3QocGF0aCkpIHtcbiAgICAgIHJldHVybiBwYXRoLnJlcGxhY2UoL1xcLih0c3gpJHwoKD86XFwuZCk/KSgoPzpcXC5bXi4vXSs/KT8pXFwuKFtjbV0/KXRzJC9pLCBmdW5jdGlvbiAobSwgdHN4LCBkLCBleHQsIGNtKSB7XG4gICAgICAgICAgcmV0dXJuIHRzeCA/IHByZXNlcnZlSnN4ID8gXCIuanN4XCIgOiBcIi5qc1wiIDogZCAmJiAoIWV4dCB8fCAhY20pID8gbSA6IChkICsgZXh0ICsgXCIuXCIgKyBjbS50b0xvd2VyQ2FzZSgpICsgXCJqc1wiKTtcbiAgICAgIH0pO1xuICB9XG4gIHJldHVybiBwYXRoO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIF9fZXh0ZW5kcyxcbiAgX19hc3NpZ24sXG4gIF9fcmVzdCxcbiAgX19kZWNvcmF0ZSxcbiAgX19wYXJhbSxcbiAgX19lc0RlY29yYXRlLFxuICBfX3J1bkluaXRpYWxpemVycyxcbiAgX19wcm9wS2V5LFxuICBfX3NldEZ1bmN0aW9uTmFtZSxcbiAgX19tZXRhZGF0YSxcbiAgX19hd2FpdGVyLFxuICBfX2dlbmVyYXRvcixcbiAgX19jcmVhdGVCaW5kaW5nLFxuICBfX2V4cG9ydFN0YXIsXG4gIF9fdmFsdWVzLFxuICBfX3JlYWQsXG4gIF9fc3ByZWFkLFxuICBfX3NwcmVhZEFycmF5cyxcbiAgX19zcHJlYWRBcnJheSxcbiAgX19hd2FpdCxcbiAgX19hc3luY0dlbmVyYXRvcixcbiAgX19hc3luY0RlbGVnYXRvcixcbiAgX19hc3luY1ZhbHVlcyxcbiAgX19tYWtlVGVtcGxhdGVPYmplY3QsXG4gIF9faW1wb3J0U3RhcixcbiAgX19pbXBvcnREZWZhdWx0LFxuICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0LFxuICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0LFxuICBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4sXG4gIF9fYWRkRGlzcG9zYWJsZVJlc291cmNlLFxuICBfX2Rpc3Bvc2VSZXNvdXJjZXMsXG4gIF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uLFxufTtcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuaW1wb3J0IHsgY3NzIH0gZnJvbSAnQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnQnO1xuaW1wb3J0IHsgZGlzYWJsZWRDdXJzb3IsIGRpc3BsYXksIGZvY3VzVmlzaWJsZSwgfSBmcm9tICdAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbic7XG5pbXBvcnQgeyBib3JkZXJXaWR0aCwgYnV0dG9uQm9yZGVyLCBidXR0b25JY29uQmFja2dyb3VuZCwgYnV0dG9uSWNvbkNvcm5lclJhZGl1cywgYnV0dG9uSWNvbkZvY3VzQm9yZGVyT2Zmc2V0LCBidXR0b25JY29uSG92ZXJCYWNrZ3JvdW5kLCBidXR0b25JY29uUGFkZGluZywgYnV0dG9uUGFkZGluZ0hvcml6b250YWwsIGJ1dHRvblBhZGRpbmdWZXJ0aWNhbCwgYnV0dG9uUHJpbWFyeUJhY2tncm91bmQsIGJ1dHRvblByaW1hcnlGb3JlZ3JvdW5kLCBidXR0b25QcmltYXJ5SG92ZXJCYWNrZ3JvdW5kLCBidXR0b25TZWNvbmRhcnlCYWNrZ3JvdW5kLCBidXR0b25TZWNvbmRhcnlGb3JlZ3JvdW5kLCBidXR0b25TZWNvbmRhcnlIb3ZlckJhY2tncm91bmQsIGNvbnRyYXN0QWN0aXZlQm9yZGVyLCBjb3JuZXJSYWRpdXNSb3VuZCwgZGVzaWduVW5pdCwgZGlzYWJsZWRPcGFjaXR5LCBmb2N1c0JvcmRlciwgZm9udEZhbWlseSwgZm9yZWdyb3VuZCwgdHlwZVJhbXBCYXNlRm9udFNpemUsIHR5cGVSYW1wQmFzZUxpbmVIZWlnaHQsIH0gZnJvbSAnLi4vZGVzaWduLXRva2Vucy5qcyc7XG4vKipcbiAqIERldmVsb3BlciBub3RlOlxuICpcbiAqIFRoZSBwcmV0dGllci1pZ25vcmUgY29tbWFuZCBpcyB1c2VkIG9uIHRoaXMgYmxvY2sgb2YgY29kZSBiZWNhdXNlIHdoZW4gcmVtb3ZlZCB0aGVcbiAqICcuY29udHJvbDoke2ZvY3VzVmlzaWJsZX0nIENTUyBzZWxlY3RvciB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgcmVmb3JtYXR0ZWQgdG9cbiAqICcuY29udHJvbDogJHtmb2N1c1Zpc2libGV9JyAobm90ZSB0aGUgc3BhY2UgYmV0d2VlbiB0aGUgY29sb24gYW5kIGRvbGxhciBzaWduKS5cbiAqXG4gKiBUaGlzIHJlc3VsdHMgaW4gbm9uLXZhbGlkIENTUyB0aGF0IHdpbGwgbm90IHJlbmRlciBhIGZvY3VzIG91dGxpbmUgb24gYmFzZSBidXR0b25zLlxuICpcbiAqIEFkZGl0aW9uYWxseSwgdGhpcyBwcmV0dGllciBjb21tYW5kIG11c3QgYmUgZGVjbGFyZWQgb24gdGhlIGVudGlyZSBjb2RlIGJsb2NrIGFuZCBub3RcbiAqIGRpcmVjdGx5IGFib3ZlIHRoZSBDU1Mgc2VsZWN0b3IgbGluZSBiZWNhdXNlIHRoZSBiZWxvdyBjb2RlIGJsb2NrIGlzIGEgdGVtcGxhdGUgbGl0ZXJhbFxuICogc3RyaW5nIHdoaWNoIHdpbGwgZW5kIHVwIGJlaW5nIHVzZWQgZGlyZWN0bHkgaW4gdGhlIGZpbmFsIGNvbXBvbmVudCBDU1MuXG4gKlxuICogVGh1cyBoYXZpbmcgJy8vIHByZXR0aWVyLWlnbm9yZScgZGlyZWN0bHkgaW4gdGhlIGZpbmFsIENTUyB3aWxsIGFsc28gYnJlYWsgdGhlIGNvbXBvbmVudFxuICogc3R5bGluZy5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuLy8gcHJldHRpZXItaWdub3JlXG5jb25zdCBCYXNlQnV0dG9uU3R5bGVzID0gY3NzIGBcblx0JHtkaXNwbGF5KCdpbmxpbmUtZmxleCcpfSA6aG9zdCB7XG5cdFx0b3V0bGluZTogbm9uZTtcblx0XHRmb250LWZhbWlseTogJHtmb250RmFtaWx5fTtcblx0XHRmb250LXNpemU6ICR7dHlwZVJhbXBCYXNlRm9udFNpemV9O1xuXHRcdGxpbmUtaGVpZ2h0OiAke3R5cGVSYW1wQmFzZUxpbmVIZWlnaHR9O1xuXHRcdGNvbG9yOiAke2J1dHRvblByaW1hcnlGb3JlZ3JvdW5kfTtcblx0XHRiYWNrZ3JvdW5kOiAke2J1dHRvblByaW1hcnlCYWNrZ3JvdW5kfTtcblx0XHRib3JkZXItcmFkaXVzOiBjYWxjKCR7Y29ybmVyUmFkaXVzUm91bmR9ICogMXB4KTtcblx0XHRmaWxsOiBjdXJyZW50Q29sb3I7XG5cdFx0Y3Vyc29yOiBwb2ludGVyO1xuXHR9XG5cdC5jb250cm9sIHtcblx0XHRiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcblx0XHRoZWlnaHQ6IGluaGVyaXQ7XG5cdFx0ZmxleC1ncm93OiAxO1xuXHRcdGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG5cdFx0ZGlzcGxheTogaW5saW5lLWZsZXg7XG5cdFx0anVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG5cdFx0YWxpZ24taXRlbXM6IGNlbnRlcjtcblx0XHRwYWRkaW5nOiAke2J1dHRvblBhZGRpbmdWZXJ0aWNhbH0gJHtidXR0b25QYWRkaW5nSG9yaXpvbnRhbH07XG5cdFx0d2hpdGUtc3BhY2U6IHdyYXA7XG5cdFx0b3V0bGluZTogbm9uZTtcblx0XHR0ZXh0LWRlY29yYXRpb246IG5vbmU7XG5cdFx0Ym9yZGVyOiBjYWxjKCR7Ym9yZGVyV2lkdGh9ICogMXB4KSBzb2xpZCAke2J1dHRvbkJvcmRlcn07XG5cdFx0Y29sb3I6IGluaGVyaXQ7XG5cdFx0Ym9yZGVyLXJhZGl1czogaW5oZXJpdDtcblx0XHRmaWxsOiBpbmhlcml0O1xuXHRcdGN1cnNvcjogaW5oZXJpdDtcblx0XHRmb250LWZhbWlseTogaW5oZXJpdDtcblx0fVxuXHQ6aG9zdCg6aG92ZXIpIHtcblx0XHRiYWNrZ3JvdW5kOiAke2J1dHRvblByaW1hcnlIb3ZlckJhY2tncm91bmR9O1xuXHR9XG5cdDpob3N0KDphY3RpdmUpIHtcblx0XHRiYWNrZ3JvdW5kOiAke2J1dHRvblByaW1hcnlCYWNrZ3JvdW5kfTtcblx0fVxuXHQuY29udHJvbDoke2ZvY3VzVmlzaWJsZX0ge1xuXHRcdG91dGxpbmU6IGNhbGMoJHtib3JkZXJXaWR0aH0gKiAxcHgpIHNvbGlkICR7Zm9jdXNCb3JkZXJ9O1xuXHRcdG91dGxpbmUtb2Zmc2V0OiBjYWxjKCR7Ym9yZGVyV2lkdGh9ICogMnB4KTtcblx0fVxuXHQuY29udHJvbDo6LW1vei1mb2N1cy1pbm5lciB7XG5cdFx0Ym9yZGVyOiAwO1xuXHR9XG5cdDpob3N0KFtkaXNhYmxlZF0pIHtcblx0XHRvcGFjaXR5OiAke2Rpc2FibGVkT3BhY2l0eX07XG5cdFx0YmFja2dyb3VuZDogJHtidXR0b25QcmltYXJ5QmFja2dyb3VuZH07XG5cdFx0Y3Vyc29yOiAke2Rpc2FibGVkQ3Vyc29yfTtcblx0fVxuXHQuY29udGVudCB7XG5cdFx0ZGlzcGxheTogZmxleDtcblx0fVxuXHQuc3RhcnQge1xuXHRcdGRpc3BsYXk6IGZsZXg7XG5cdH1cblx0OjpzbG90dGVkKHN2ZyksXG5cdDo6c2xvdHRlZChzcGFuKSB7XG5cdFx0d2lkdGg6IGNhbGMoJHtkZXNpZ25Vbml0fSAqIDRweCk7XG5cdFx0aGVpZ2h0OiBjYWxjKCR7ZGVzaWduVW5pdH0gKiA0cHgpO1xuXHR9XG5cdC5zdGFydCB7XG5cdFx0bWFyZ2luLWlubGluZS1lbmQ6IDhweDtcblx0fVxuYDtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmNvbnN0IFByaW1hcnlCdXR0b25TdHlsZXMgPSBjc3MgYFxuXHQ6aG9zdChbYXBwZWFyYW5jZT0ncHJpbWFyeSddKSB7XG5cdFx0YmFja2dyb3VuZDogJHtidXR0b25QcmltYXJ5QmFja2dyb3VuZH07XG5cdFx0Y29sb3I6ICR7YnV0dG9uUHJpbWFyeUZvcmVncm91bmR9O1xuXHR9XG5cdDpob3N0KFthcHBlYXJhbmNlPSdwcmltYXJ5J106aG92ZXIpIHtcblx0XHRiYWNrZ3JvdW5kOiAke2J1dHRvblByaW1hcnlIb3ZlckJhY2tncm91bmR9O1xuXHR9XG5cdDpob3N0KFthcHBlYXJhbmNlPSdwcmltYXJ5J106YWN0aXZlKSAuY29udHJvbDphY3RpdmUge1xuXHRcdGJhY2tncm91bmQ6ICR7YnV0dG9uUHJpbWFyeUJhY2tncm91bmR9O1xuXHR9XG5cdDpob3N0KFthcHBlYXJhbmNlPSdwcmltYXJ5J10pIC5jb250cm9sOiR7Zm9jdXNWaXNpYmxlfSB7XG5cdFx0b3V0bGluZTogY2FsYygke2JvcmRlcldpZHRofSAqIDFweCkgc29saWQgJHtmb2N1c0JvcmRlcn07XG5cdFx0b3V0bGluZS1vZmZzZXQ6IGNhbGMoJHtib3JkZXJXaWR0aH0gKiAycHgpO1xuXHR9XG5cdDpob3N0KFthcHBlYXJhbmNlPSdwcmltYXJ5J11bZGlzYWJsZWRdKSB7XG5cdFx0YmFja2dyb3VuZDogJHtidXR0b25QcmltYXJ5QmFja2dyb3VuZH07XG5cdH1cbmA7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5jb25zdCBTZWNvbmRhcnlCdXR0b25TdHlsZXMgPSBjc3MgYFxuXHQ6aG9zdChbYXBwZWFyYW5jZT0nc2Vjb25kYXJ5J10pIHtcblx0XHRiYWNrZ3JvdW5kOiAke2J1dHRvblNlY29uZGFyeUJhY2tncm91bmR9O1xuXHRcdGNvbG9yOiAke2J1dHRvblNlY29uZGFyeUZvcmVncm91bmR9O1xuXHR9XG5cdDpob3N0KFthcHBlYXJhbmNlPSdzZWNvbmRhcnknXTpob3Zlcikge1xuXHRcdGJhY2tncm91bmQ6ICR7YnV0dG9uU2Vjb25kYXJ5SG92ZXJCYWNrZ3JvdW5kfTtcblx0fVxuXHQ6aG9zdChbYXBwZWFyYW5jZT0nc2Vjb25kYXJ5J106YWN0aXZlKSAuY29udHJvbDphY3RpdmUge1xuXHRcdGJhY2tncm91bmQ6ICR7YnV0dG9uU2Vjb25kYXJ5QmFja2dyb3VuZH07XG5cdH1cblx0Omhvc3QoW2FwcGVhcmFuY2U9J3NlY29uZGFyeSddKSAuY29udHJvbDoke2ZvY3VzVmlzaWJsZX0ge1xuXHRcdG91dGxpbmU6IGNhbGMoJHtib3JkZXJXaWR0aH0gKiAxcHgpIHNvbGlkICR7Zm9jdXNCb3JkZXJ9O1xuXHRcdG91dGxpbmUtb2Zmc2V0OiBjYWxjKCR7Ym9yZGVyV2lkdGh9ICogMnB4KTtcblx0fVxuXHQ6aG9zdChbYXBwZWFyYW5jZT0nc2Vjb25kYXJ5J11bZGlzYWJsZWRdKSB7XG5cdFx0YmFja2dyb3VuZDogJHtidXR0b25TZWNvbmRhcnlCYWNrZ3JvdW5kfTtcblx0fVxuYDtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmNvbnN0IEljb25CdXR0b25TdHlsZXMgPSBjc3MgYFxuXHQ6aG9zdChbYXBwZWFyYW5jZT0naWNvbiddKSB7XG5cdFx0YmFja2dyb3VuZDogJHtidXR0b25JY29uQmFja2dyb3VuZH07XG5cdFx0Ym9yZGVyLXJhZGl1czogJHtidXR0b25JY29uQ29ybmVyUmFkaXVzfTtcblx0XHRjb2xvcjogJHtmb3JlZ3JvdW5kfTtcblx0fVxuXHQ6aG9zdChbYXBwZWFyYW5jZT0naWNvbiddOmhvdmVyKSB7XG5cdFx0YmFja2dyb3VuZDogJHtidXR0b25JY29uSG92ZXJCYWNrZ3JvdW5kfTtcblx0XHRvdXRsaW5lOiAxcHggZG90dGVkICR7Y29udHJhc3RBY3RpdmVCb3JkZXJ9O1xuXHRcdG91dGxpbmUtb2Zmc2V0OiAtMXB4O1xuXHR9XG5cdDpob3N0KFthcHBlYXJhbmNlPSdpY29uJ10pIC5jb250cm9sIHtcblx0XHRwYWRkaW5nOiAke2J1dHRvbkljb25QYWRkaW5nfTtcblx0XHRib3JkZXI6IG5vbmU7XG5cdH1cblx0Omhvc3QoW2FwcGVhcmFuY2U9J2ljb24nXTphY3RpdmUpIC5jb250cm9sOmFjdGl2ZSB7XG5cdFx0YmFja2dyb3VuZDogJHtidXR0b25JY29uSG92ZXJCYWNrZ3JvdW5kfTtcblx0fVxuXHQ6aG9zdChbYXBwZWFyYW5jZT0naWNvbiddKSAuY29udHJvbDoke2ZvY3VzVmlzaWJsZX0ge1xuXHRcdG91dGxpbmU6IGNhbGMoJHtib3JkZXJXaWR0aH0gKiAxcHgpIHNvbGlkICR7Zm9jdXNCb3JkZXJ9O1xuXHRcdG91dGxpbmUtb2Zmc2V0OiAke2J1dHRvbkljb25Gb2N1c0JvcmRlck9mZnNldH07XG5cdH1cblx0Omhvc3QoW2FwcGVhcmFuY2U9J2ljb24nXVtkaXNhYmxlZF0pIHtcblx0XHRiYWNrZ3JvdW5kOiAke2J1dHRvbkljb25CYWNrZ3JvdW5kfTtcblx0fVxuYDtcbmV4cG9ydCBjb25zdCBidXR0b25TdHlsZXMgPSAoY29udGV4dCwgZGVmaW5pdGlvbikgPT4gY3NzIGBcblx0JHtCYXNlQnV0dG9uU3R5bGVzfVxuXHQke1ByaW1hcnlCdXR0b25TdHlsZXN9XG5cdCR7U2Vjb25kYXJ5QnV0dG9uU3R5bGVzfVxuXHQke0ljb25CdXR0b25TdHlsZXN9XG5gO1xuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG5pbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBhdHRyIH0gZnJvbSAnQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnQnO1xuaW1wb3J0IHsgQnV0dG9uIGFzIEZvdW5kYXRpb25CdXR0b24sIGJ1dHRvblRlbXBsYXRlIGFzIHRlbXBsYXRlLCB9IGZyb20gJ0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uJztcbmltcG9ydCB7IGJ1dHRvblN0eWxlcyBhcyBzdHlsZXMgfSBmcm9tICcuL2J1dHRvbi5zdHlsZXMuanMnO1xuLyoqXG4gKiBUaGUgVmlzdWFsIFN0dWRpbyBDb2RlIGJ1dHRvbiBjbGFzcy5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBCdXR0b24gZXh0ZW5kcyBGb3VuZGF0aW9uQnV0dG9uIHtcbiAgICAvKipcbiAgICAgKiBDb21wb25lbnQgbGlmZWN5Y2xlIG1ldGhvZCB0aGF0IHJ1bnMgd2hlbiB0aGUgY29tcG9uZW50IGlzIGluc2VydGVkXG4gICAgICogaW50byB0aGUgRE9NLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIC8vIElmIHRoZSBhcHBlYXJhbmNlIHByb3BlcnR5IGhhcyBub3QgYmVlbiBzZXQsIHNldCBpdCB0byB0aGVcbiAgICAgICAgLy8gdmFsdWUgb2YgdGhlIGFwcGVhcmFuY2UgYXR0cmlidXRlLlxuICAgICAgICBpZiAoIXRoaXMuYXBwZWFyYW5jZSkge1xuICAgICAgICAgICAgY29uc3QgYXBwZWFyYW5jZVZhbHVlID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2FwcGVhcmFuY2UnKTtcbiAgICAgICAgICAgIHRoaXMuYXBwZWFyYW5jZSA9IGFwcGVhcmFuY2VWYWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wb25lbnQgbGlmZWN5Y2xlIG1ldGhvZCB0aGF0IHJ1bnMgd2hlbiBhbiBhdHRyaWJ1dGUgb2YgdGhlXG4gICAgICogZWxlbWVudCBpcyBjaGFuZ2VkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGF0dHJOYW1lIC0gVGhlIGF0dHJpYnV0ZSB0aGF0IHdhcyBjaGFuZ2VkXG4gICAgICogQHBhcmFtIG9sZFZhbCAtIFRoZSBvbGQgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAqIEBwYXJhbSBuZXdWYWwgLSBUaGUgbmV3IHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhhdHRyTmFtZSwgb2xkVmFsLCBuZXdWYWwpIHtcbiAgICAgICAgLy8gSW4gdGhlIGNhc2Ugd2hlbiBhbiBpY29uIG9ubHkgYnV0dG9uIGlzIGNyZWF0ZWQgYWRkIGEgZGVmYXVsdCBBUklBXG4gICAgICAgIC8vIGxhYmVsIHRvIHRoZSBidXR0b24gc2luY2UgdGhlcmUgaXMgbm8gbG9uZ2VyIGJ1dHRvbiB0ZXh0IHRvIHVzZVxuICAgICAgICAvLyBhcyB0aGUgbGFiZWxcbiAgICAgICAgaWYgKGF0dHJOYW1lID09PSAnYXBwZWFyYW5jZScgJiYgbmV3VmFsID09PSAnaWNvbicpIHtcbiAgICAgICAgICAgIC8vIE9ubHkgc2V0IHRoZSBBUklBIGxhYmVsIHRvIHRoZSBkZWZhdWx0IHRleHQgaWYgYW4gYXJpYS1sYWJlbCBhdHRyaWJ1dGVcbiAgICAgICAgICAgIC8vIGRvZXMgbm90IGV4aXN0IG9uIHRoZSBidXR0b25cbiAgICAgICAgICAgIGNvbnN0IGFyaWFMYWJlbFZhbHVlID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKTtcbiAgICAgICAgICAgIGlmICghYXJpYUxhYmVsVmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFyaWFMYWJlbCA9ICdJY29uIEJ1dHRvbic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSW4gdGhlIGNhc2Ugd2hlbiB0aGUgYXJpYS1sYWJlbCBhdHRyaWJ1dGUgaGFzIGJlZW4gZGVmaW5lZCBvbiB0aGVcbiAgICAgICAgLy8gPHZzY29kZS1idXR0b24+LCB0aGlzIHdpbGwgcHJvZ3JhbW1hdGljYWxseSBwcm9wb2dhdGUgdGhlIHZhbHVlIHRvXG4gICAgICAgIC8vIHRoZSA8YnV0dG9uPiBIVE1MIGVsZW1lbnQgdGhhdCBsaXZlcyBpbiB0aGUgU2hhZG93IERPTVxuICAgICAgICBpZiAoYXR0ck5hbWUgPT09ICdhcmlhLWxhYmVsJykge1xuICAgICAgICAgICAgdGhpcy5hcmlhTGFiZWwgPSBuZXdWYWw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF0dHJOYW1lID09PSAnZGlzYWJsZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVkID0gbmV3VmFsICE9PSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgYXR0clxuXSwgQnV0dG9uLnByb3RvdHlwZSwgXCJhcHBlYXJhbmNlXCIsIHZvaWQgMCk7XG4vKipcbiAqIFRoZSBWaXN1YWwgU3R1ZGlvIENvZGUgYnV0dG9uIGNvbXBvbmVudCByZWdpc3RyYXRpb24uXG4gKlxuICogQHJlbWFya3NcbiAqIEhUTUwgRWxlbWVudDogYDx2c2NvZGUtYnV0dG9uPmBcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCB2c0NvZGVCdXR0b24gPSBCdXR0b24uY29tcG9zZSh7XG4gICAgYmFzZU5hbWU6ICdidXR0b24nLFxuICAgIHRlbXBsYXRlLFxuICAgIHN0eWxlcyxcbiAgICBzaGFkb3dPcHRpb25zOiB7XG4gICAgICAgIGRlbGVnYXRlc0ZvY3VzOiB0cnVlLFxuICAgIH0sXG59KTtcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuaW1wb3J0IHsgY3NzIH0gZnJvbSAnQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnQnO1xuaW1wb3J0IHsgZGlzYWJsZWRDdXJzb3IsIGRpc3BsYXksIGZvY3VzVmlzaWJsZSwgfSBmcm9tICdAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbic7XG5pbXBvcnQgeyBib3JkZXJXaWR0aCwgY2hlY2tib3hCYWNrZ3JvdW5kLCBjaGVja2JveEJvcmRlciwgY2hlY2tib3hDb3JuZXJSYWRpdXMsIGRlc2lnblVuaXQsIGRpc2FibGVkT3BhY2l0eSwgZm9jdXNCb3JkZXIsIGZvbnRGYW1pbHksIGZvcmVncm91bmQsIHR5cGVSYW1wQmFzZUZvbnRTaXplLCB0eXBlUmFtcEJhc2VMaW5lSGVpZ2h0LCB9IGZyb20gJy4uL2Rlc2lnbi10b2tlbnMuanMnO1xuZXhwb3J0IGNvbnN0IGNoZWNrYm94U3R5bGVzID0gKGNvbnRleHQsIGRlZmludGlpb24pID0+IGNzcyBgXG5cdCR7ZGlzcGxheSgnaW5saW5lLWZsZXgnKX0gOmhvc3Qge1xuXHRcdGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cdFx0b3V0bGluZTogbm9uZTtcblx0XHRtYXJnaW46IGNhbGMoJHtkZXNpZ25Vbml0fSAqIDFweCkgMDtcblx0XHR1c2VyLXNlbGVjdDogbm9uZTtcblx0XHRmb250LXNpemU6ICR7dHlwZVJhbXBCYXNlRm9udFNpemV9O1xuXHRcdGxpbmUtaGVpZ2h0OiAke3R5cGVSYW1wQmFzZUxpbmVIZWlnaHR9O1xuXHR9XG5cdC5jb250cm9sIHtcblx0XHRwb3NpdGlvbjogcmVsYXRpdmU7XG5cdFx0d2lkdGg6IGNhbGMoJHtkZXNpZ25Vbml0fSAqIDRweCArIDJweCk7XG5cdFx0aGVpZ2h0OiBjYWxjKCR7ZGVzaWduVW5pdH0gKiA0cHggKyAycHgpO1xuXHRcdGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG5cdFx0Ym9yZGVyLXJhZGl1czogY2FsYygke2NoZWNrYm94Q29ybmVyUmFkaXVzfSAqIDFweCk7XG5cdFx0Ym9yZGVyOiBjYWxjKCR7Ym9yZGVyV2lkdGh9ICogMXB4KSBzb2xpZCAke2NoZWNrYm94Qm9yZGVyfTtcblx0XHRiYWNrZ3JvdW5kOiAke2NoZWNrYm94QmFja2dyb3VuZH07XG5cdFx0b3V0bGluZTogbm9uZTtcblx0XHRjdXJzb3I6IHBvaW50ZXI7XG5cdH1cblx0LmxhYmVsIHtcblx0XHRmb250LWZhbWlseTogJHtmb250RmFtaWx5fTtcblx0XHRjb2xvcjogJHtmb3JlZ3JvdW5kfTtcblx0XHRwYWRkaW5nLWlubGluZS1zdGFydDogY2FsYygke2Rlc2lnblVuaXR9ICogMnB4ICsgMnB4KTtcblx0XHRtYXJnaW4taW5saW5lLWVuZDogY2FsYygke2Rlc2lnblVuaXR9ICogMnB4ICsgMnB4KTtcblx0XHRjdXJzb3I6IHBvaW50ZXI7XG5cdH1cblx0LmxhYmVsX19oaWRkZW4ge1xuXHRcdGRpc3BsYXk6IG5vbmU7XG5cdFx0dmlzaWJpbGl0eTogaGlkZGVuO1xuXHR9XG5cdC5jaGVja2VkLWluZGljYXRvciB7XG5cdFx0d2lkdGg6IDEwMCU7XG5cdFx0aGVpZ2h0OiAxMDAlO1xuXHRcdGRpc3BsYXk6IGJsb2NrO1xuXHRcdGZpbGw6ICR7Zm9yZWdyb3VuZH07XG5cdFx0b3BhY2l0eTogMDtcblx0XHRwb2ludGVyLWV2ZW50czogbm9uZTtcblx0fVxuXHQuaW5kZXRlcm1pbmF0ZS1pbmRpY2F0b3Ige1xuXHRcdGJvcmRlci1yYWRpdXM6IDJweDtcblx0XHRiYWNrZ3JvdW5kOiAke2ZvcmVncm91bmR9O1xuXHRcdHBvc2l0aW9uOiBhYnNvbHV0ZTtcblx0XHR0b3A6IDUwJTtcblx0XHRsZWZ0OiA1MCU7XG5cdFx0d2lkdGg6IDUwJTtcblx0XHRoZWlnaHQ6IDUwJTtcblx0XHR0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcblx0XHRvcGFjaXR5OiAwO1xuXHR9XG5cdDpob3N0KDplbmFibGVkKSAuY29udHJvbDpob3ZlciB7XG5cdFx0YmFja2dyb3VuZDogJHtjaGVja2JveEJhY2tncm91bmR9O1xuXHRcdGJvcmRlci1jb2xvcjogJHtjaGVja2JveEJvcmRlcn07XG5cdH1cblx0Omhvc3QoOmVuYWJsZWQpIC5jb250cm9sOmFjdGl2ZSB7XG5cdFx0YmFja2dyb3VuZDogJHtjaGVja2JveEJhY2tncm91bmR9O1xuXHRcdGJvcmRlci1jb2xvcjogJHtmb2N1c0JvcmRlcn07XG5cdH1cblx0Omhvc3QoOiR7Zm9jdXNWaXNpYmxlfSkgLmNvbnRyb2wge1xuXHRcdGJvcmRlcjogY2FsYygke2JvcmRlcldpZHRofSAqIDFweCkgc29saWQgJHtmb2N1c0JvcmRlcn07XG5cdH1cblx0Omhvc3QoLmRpc2FibGVkKSAubGFiZWwsXG5cdDpob3N0KC5yZWFkb25seSkgLmxhYmVsLFxuXHQ6aG9zdCgucmVhZG9ubHkpIC5jb250cm9sLFxuXHQ6aG9zdCguZGlzYWJsZWQpIC5jb250cm9sIHtcblx0XHRjdXJzb3I6ICR7ZGlzYWJsZWRDdXJzb3J9O1xuXHR9XG5cdDpob3N0KC5jaGVja2VkOm5vdCguaW5kZXRlcm1pbmF0ZSkpIC5jaGVja2VkLWluZGljYXRvcixcblx0Omhvc3QoLmluZGV0ZXJtaW5hdGUpIC5pbmRldGVybWluYXRlLWluZGljYXRvciB7XG5cdFx0b3BhY2l0eTogMTtcblx0fVxuXHQ6aG9zdCguZGlzYWJsZWQpIHtcblx0XHRvcGFjaXR5OiAke2Rpc2FibGVkT3BhY2l0eX07XG5cdH1cbmA7XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbmltcG9ydCB7IENoZWNrYm94IGFzIEZvdW5kYXRpb25DaGVja2JveCwgY2hlY2tib3hUZW1wbGF0ZSBhcyB0ZW1wbGF0ZSwgfSBmcm9tICdAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbic7XG5pbXBvcnQgeyBjaGVja2JveFN0eWxlcyBhcyBzdHlsZXMgfSBmcm9tICcuL2NoZWNrYm94LnN0eWxlcy5qcyc7XG4vKipcbiAqIFRoZSBWaXN1YWwgU3R1ZGlvIENvZGUgY2hlY2tib3ggY2xhc3MuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgQ2hlY2tib3ggZXh0ZW5kcyBGb3VuZGF0aW9uQ2hlY2tib3gge1xuICAgIC8qKlxuICAgICAqIENvbXBvbmVudCBsaWZlY3ljbGUgbWV0aG9kIHRoYXQgcnVucyB3aGVuIHRoZSBjb21wb25lbnQgaXMgaW5zZXJ0ZWRcbiAgICAgKiBpbnRvIHRoZSBET00uXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgaWYgKHRoaXMudGV4dENvbnRlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgdGhpcy50ZXh0Q29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBGYWxsYmFjayB0byB0aGUgbGFiZWwgaWYgdGhlcmUgaXMgbm8gdGV4dCBjb250ZW50XG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdDaGVja2JveCcpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgVmlzdWFsIFN0dWRpbyBDb2RlIGNoZWNrYm94IGNvbXBvbmVudCByZWdpc3RyYXRpb24uXG4gKlxuICogQHJlbWFya3NcbiAqIEhUTUwgRWxlbWVudDogYDx2c2NvZGUtY2hlY2tib3g+YFxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IHZzQ29kZUNoZWNrYm94ID0gQ2hlY2tib3guY29tcG9zZSh7XG4gICAgYmFzZU5hbWU6ICdjaGVja2JveCcsXG4gICAgdGVtcGxhdGUsXG4gICAgc3R5bGVzLFxuICAgIGNoZWNrZWRJbmRpY2F0b3I6IGBcblx0XHQ8c3ZnIFxuXHRcdFx0cGFydD1cImNoZWNrZWQtaW5kaWNhdG9yXCJcblx0XHRcdGNsYXNzPVwiY2hlY2tlZC1pbmRpY2F0b3JcIlxuXHRcdFx0d2lkdGg9XCIxNlwiIFxuXHRcdFx0aGVpZ2h0PVwiMTZcIiBcblx0XHRcdHZpZXdCb3g9XCIwIDAgMTYgMTZcIiBcblx0XHRcdHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBcblx0XHRcdGZpbGw9XCJjdXJyZW50Q29sb3JcIlxuXHRcdD5cblx0XHRcdDxwYXRoIFxuXHRcdFx0XHRmaWxsLXJ1bGU9XCJldmVub2RkXCIgXG5cdFx0XHRcdGNsaXAtcnVsZT1cImV2ZW5vZGRcIiBcblx0XHRcdFx0ZD1cIk0xNC40MzEgMy4zMjNsLTguNDcgMTAtLjc5LS4wMzYtMy4zNS00Ljc3LjgxOC0uNTc0IDIuOTc4IDQuMjQgOC4wNTEtOS41MDYuNzY0LjY0NnpcIlxuXHRcdFx0Lz5cblx0XHQ8L3N2Zz5cblx0YCxcbiAgICBpbmRldGVybWluYXRlSW5kaWNhdG9yOiBgXG5cdFx0PGRpdiBwYXJ0PVwiaW5kZXRlcm1pbmF0ZS1pbmRpY2F0b3JcIiBjbGFzcz1cImluZGV0ZXJtaW5hdGUtaW5kaWNhdG9yXCI+PC9kaXY+XG5cdGAsXG59KTtcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuaW1wb3J0IHsgY3NzIH0gZnJvbSAnQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnQnO1xuaW1wb3J0IHsgZGlzcGxheSwgfSBmcm9tICdAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbic7XG5pbXBvcnQgeyBib3JkZXJXaWR0aCwgZGVzaWduVW5pdCwgZGl2aWRlckJhY2tncm91bmQgfSBmcm9tICcuLi9kZXNpZ24tdG9rZW5zLmpzJztcbmV4cG9ydCBjb25zdCBkaXZpZGVyU3R5bGVzID0gKGNvbnRleHQsIGRlZmluaXRpb24pID0+IGNzcyBgXG5cdCR7ZGlzcGxheSgnYmxvY2snKX0gOmhvc3Qge1xuXHRcdGJvcmRlcjogbm9uZTtcblx0XHRib3JkZXItdG9wOiBjYWxjKCR7Ym9yZGVyV2lkdGh9ICogMXB4KSBzb2xpZCAke2RpdmlkZXJCYWNrZ3JvdW5kfTtcblx0XHRib3gtc2l6aW5nOiBjb250ZW50LWJveDtcblx0XHRoZWlnaHQ6IDA7XG5cdFx0bWFyZ2luOiBjYWxjKCR7ZGVzaWduVW5pdH0gKiAxcHgpIDA7XG5cdFx0d2lkdGg6IDEwMCU7XG5cdH1cbmA7XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbmltcG9ydCB7IERpdmlkZXJSb2xlLCBEaXZpZGVyIGFzIEZvdW5kYXRpb25EaXZpZGVyLCBkaXZpZGVyVGVtcGxhdGUgYXMgdGVtcGxhdGUsIH0gZnJvbSAnQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24nO1xuaW1wb3J0IHsgZGl2aWRlclN0eWxlcyBhcyBzdHlsZXMgfSBmcm9tICcuL2RpdmlkZXIuc3R5bGVzLmpzJztcbmV4cG9ydCB7IERpdmlkZXJSb2xlIH07XG4vKipcbiAqIFRoZSBWaXN1YWwgU3R1ZGlvIENvZGUgZGl2aWRlciBjbGFzcy5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBEaXZpZGVyIGV4dGVuZHMgRm91bmRhdGlvbkRpdmlkZXIge1xufVxuLyoqXG4gKiBUaGUgVmlzdWFsIFN0dWRpbyBDb2RlIGRpdmlkZXIgY29tcG9uZW50IHJlZ2lzdHJhdGlvbi5cbiAqXG4gKiBAcmVtYXJrc1xuICogSFRNTCBFbGVtZW50OiBgPHZzY29kZS1kaXZpZGVyPmBcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCB2c0NvZGVEaXZpZGVyID0gRGl2aWRlci5jb21wb3NlKHtcbiAgICBiYXNlTmFtZTogJ2RpdmlkZXInLFxuICAgIHRlbXBsYXRlLFxuICAgIHN0eWxlcyxcbn0pO1xuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG5pbXBvcnQgeyBjc3MgfSBmcm9tICdAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudCc7XG5pbXBvcnQgeyBkaXNhYmxlZEN1cnNvciwgZGlzcGxheSwgZm9jdXNWaXNpYmxlLCB9IGZyb20gJ0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uJztcbmltcG9ydCB7IGJvcmRlcldpZHRoLCBjb3JuZXJSYWRpdXNSb3VuZCwgZGVzaWduVW5pdCwgZGlzYWJsZWRPcGFjaXR5LCBkcm9wZG93bkJhY2tncm91bmQsIGRyb3Bkb3duQm9yZGVyLCBkcm9wZG93bkxpc3RNYXhIZWlnaHQsIGZvY3VzQm9yZGVyLCBmb250RmFtaWx5LCBmb3JlZ3JvdW5kLCBpbnB1dEhlaWdodCwgaW5wdXRNaW5XaWR0aCwgbGlzdEFjdGl2ZVNlbGVjdGlvbkJhY2tncm91bmQsIGxpc3RBY3RpdmVTZWxlY3Rpb25Gb3JlZ3JvdW5kLCB0eXBlUmFtcEJhc2VGb250U2l6ZSwgdHlwZVJhbXBCYXNlTGluZUhlaWdodCwgfSBmcm9tICcuLi9kZXNpZ24tdG9rZW5zLmpzJztcbmV4cG9ydCBjb25zdCBkcm9wZG93blN0eWxlcyA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBjc3MgYFxuXHQke2Rpc3BsYXkoJ2lubGluZS1mbGV4Jyl9IDpob3N0IHtcblx0XHRiYWNrZ3JvdW5kOiAke2Ryb3Bkb3duQmFja2dyb3VuZH07XG5cdFx0Ym9yZGVyLXJhZGl1czogY2FsYygke2Nvcm5lclJhZGl1c1JvdW5kfSAqIDFweCk7XG5cdFx0Ym94LXNpemluZzogYm9yZGVyLWJveDtcblx0XHRjb2xvcjogJHtmb3JlZ3JvdW5kfTtcblx0XHRjb250YWluOiBjb250ZW50cztcblx0XHRmb250LWZhbWlseTogJHtmb250RmFtaWx5fTtcblx0XHRoZWlnaHQ6IGNhbGMoJHtpbnB1dEhlaWdodH0gKiAxcHgpO1xuXHRcdHBvc2l0aW9uOiByZWxhdGl2ZTtcblx0XHR1c2VyLXNlbGVjdDogbm9uZTtcblx0XHRtaW4td2lkdGg6ICR7aW5wdXRNaW5XaWR0aH07XG5cdFx0b3V0bGluZTogbm9uZTtcblx0XHR2ZXJ0aWNhbC1hbGlnbjogdG9wO1xuXHR9XG5cdC5jb250cm9sIHtcblx0XHRhbGlnbi1pdGVtczogY2VudGVyO1xuXHRcdGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG5cdFx0Ym9yZGVyOiBjYWxjKCR7Ym9yZGVyV2lkdGh9ICogMXB4KSBzb2xpZCAke2Ryb3Bkb3duQm9yZGVyfTtcblx0XHRib3JkZXItcmFkaXVzOiBjYWxjKCR7Y29ybmVyUmFkaXVzUm91bmR9ICogMXB4KTtcblx0XHRjdXJzb3I6IHBvaW50ZXI7XG5cdFx0ZGlzcGxheTogZmxleDtcblx0XHRmb250LWZhbWlseTogaW5oZXJpdDtcblx0XHRmb250LXNpemU6ICR7dHlwZVJhbXBCYXNlRm9udFNpemV9O1xuXHRcdGxpbmUtaGVpZ2h0OiAke3R5cGVSYW1wQmFzZUxpbmVIZWlnaHR9O1xuXHRcdG1pbi1oZWlnaHQ6IDEwMCU7XG5cdFx0cGFkZGluZzogMnB4IDZweCAycHggOHB4O1xuXHRcdHdpZHRoOiAxMDAlO1xuXHR9XG5cdC5saXN0Ym94IHtcblx0XHRiYWNrZ3JvdW5kOiAke2Ryb3Bkb3duQmFja2dyb3VuZH07XG5cdFx0Ym9yZGVyOiBjYWxjKCR7Ym9yZGVyV2lkdGh9ICogMXB4KSBzb2xpZCAke2ZvY3VzQm9yZGVyfTtcblx0XHRib3JkZXItcmFkaXVzOiBjYWxjKCR7Y29ybmVyUmFkaXVzUm91bmR9ICogMXB4KTtcblx0XHRib3gtc2l6aW5nOiBib3JkZXItYm94O1xuXHRcdGRpc3BsYXk6IGlubGluZS1mbGV4O1xuXHRcdGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG5cdFx0bGVmdDogMDtcblx0XHRtYXgtaGVpZ2h0OiAke2Ryb3Bkb3duTGlzdE1heEhlaWdodH07XG5cdFx0cGFkZGluZzogMDtcblx0XHRvdmVyZmxvdy15OiBhdXRvO1xuXHRcdHBvc2l0aW9uOiBhYnNvbHV0ZTtcblx0XHR3aWR0aDogMTAwJTtcblx0XHR6LWluZGV4OiAxO1xuXHR9XG5cdC5saXN0Ym94W2hpZGRlbl0ge1xuXHRcdGRpc3BsYXk6IG5vbmU7XG5cdH1cblx0Omhvc3QoOiR7Zm9jdXNWaXNpYmxlfSkgLmNvbnRyb2wge1xuXHRcdGJvcmRlci1jb2xvcjogJHtmb2N1c0JvcmRlcn07XG5cdH1cblx0Omhvc3QoOm5vdChbZGlzYWJsZWRdKTpob3Zlcikge1xuXHRcdGJhY2tncm91bmQ6ICR7ZHJvcGRvd25CYWNrZ3JvdW5kfTtcblx0XHRib3JkZXItY29sb3I6ICR7ZHJvcGRvd25Cb3JkZXJ9O1xuXHR9XG5cdDpob3N0KDoke2ZvY3VzVmlzaWJsZX0pIDo6c2xvdHRlZChbYXJpYS1zZWxlY3RlZD1cInRydWVcIl1bcm9sZT1cIm9wdGlvblwiXTpub3QoW2Rpc2FibGVkXSkpIHtcblx0XHRiYWNrZ3JvdW5kOiAke2xpc3RBY3RpdmVTZWxlY3Rpb25CYWNrZ3JvdW5kfTtcblx0XHRib3JkZXI6IGNhbGMoJHtib3JkZXJXaWR0aH0gKiAxcHgpIHNvbGlkIHRyYW5zcGFyZW50O1xuXHRcdGNvbG9yOiAke2xpc3RBY3RpdmVTZWxlY3Rpb25Gb3JlZ3JvdW5kfTtcblx0fVxuXHQ6aG9zdChbZGlzYWJsZWRdKSB7XG5cdFx0Y3Vyc29yOiAke2Rpc2FibGVkQ3Vyc29yfTtcblx0XHRvcGFjaXR5OiAke2Rpc2FibGVkT3BhY2l0eX07XG5cdH1cblx0Omhvc3QoW2Rpc2FibGVkXSkgLmNvbnRyb2wge1xuXHRcdGN1cnNvcjogJHtkaXNhYmxlZEN1cnNvcn07XG5cdFx0dXNlci1zZWxlY3Q6IG5vbmU7XG5cdH1cblx0Omhvc3QoW2Rpc2FibGVkXTpob3Zlcikge1xuXHRcdGJhY2tncm91bmQ6ICR7ZHJvcGRvd25CYWNrZ3JvdW5kfTtcblx0XHRjb2xvcjogJHtmb3JlZ3JvdW5kfTtcblx0XHRmaWxsOiBjdXJyZW50Y29sb3I7XG5cdH1cblx0Omhvc3QoOm5vdChbZGlzYWJsZWRdKSkgLmNvbnRyb2w6YWN0aXZlIHtcblx0XHRib3JkZXItY29sb3I6ICR7Zm9jdXNCb3JkZXJ9O1xuXHR9XG5cdDpob3N0KDplbXB0eSkgLmxpc3Rib3gge1xuXHRcdGRpc3BsYXk6IG5vbmU7XG5cdH1cblx0Omhvc3QoW29wZW5dKSAuY29udHJvbCB7XG5cdFx0Ym9yZGVyLWNvbG9yOiAke2ZvY3VzQm9yZGVyfTtcblx0fVxuXHQ6aG9zdChbb3Blbl1bcG9zaXRpb249J2Fib3ZlJ10pIC5saXN0Ym94IHtcblx0XHRib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAwO1xuXHRcdGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAwO1xuXHR9XG5cdDpob3N0KFtvcGVuXVtwb3NpdGlvbj0nYmVsb3cnXSkgLmxpc3Rib3gge1xuXHRcdGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDA7XG5cdFx0Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDA7XG5cdH1cblx0Omhvc3QoW29wZW5dW3Bvc2l0aW9uPSdhYm92ZSddKSAubGlzdGJveCB7XG5cdFx0Ym90dG9tOiBjYWxjKCR7aW5wdXRIZWlnaHR9ICogMXB4KTtcblx0fVxuXHQ6aG9zdChbb3Blbl1bcG9zaXRpb249J2JlbG93J10pIC5saXN0Ym94IHtcblx0XHR0b3A6IGNhbGMoJHtpbnB1dEhlaWdodH0gKiAxcHgpO1xuXHR9XG5cdC5zZWxlY3RlZC12YWx1ZSB7XG5cdFx0ZmxleDogMSAxIGF1dG87XG5cdFx0Zm9udC1mYW1pbHk6IGluaGVyaXQ7XG5cdFx0b3ZlcmZsb3c6IGhpZGRlbjtcblx0XHR0ZXh0LWFsaWduOiBzdGFydDtcblx0XHR0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcblx0XHR3aGl0ZS1zcGFjZTogbm93cmFwO1xuXHR9XG5cdC5pbmRpY2F0b3Ige1xuXHRcdGZsZXg6IDAgMCBhdXRvO1xuXHRcdG1hcmdpbi1pbmxpbmUtc3RhcnQ6IDFlbTtcblx0fVxuXHRzbG90W25hbWU9J2xpc3Rib3gnXSB7XG5cdFx0ZGlzcGxheTogbm9uZTtcblx0XHR3aWR0aDogMTAwJTtcblx0fVxuXHQ6aG9zdChbb3Blbl0pIHNsb3RbbmFtZT0nbGlzdGJveCddIHtcblx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdHBvc2l0aW9uOiBhYnNvbHV0ZTtcblx0fVxuXHQuZW5kIHtcblx0XHRtYXJnaW4taW5saW5lLXN0YXJ0OiBhdXRvO1xuXHR9XG5cdC5zdGFydCxcblx0LmVuZCxcblx0LmluZGljYXRvcixcblx0LnNlbGVjdC1pbmRpY2F0b3IsXG5cdDo6c2xvdHRlZChzdmcpLFxuXHQ6OnNsb3R0ZWQoc3Bhbikge1xuXHRcdGZpbGw6IGN1cnJlbnRjb2xvcjtcblx0XHRoZWlnaHQ6IDFlbTtcblx0XHRtaW4taGVpZ2h0OiBjYWxjKCR7ZGVzaWduVW5pdH0gKiA0cHgpO1xuXHRcdG1pbi13aWR0aDogY2FsYygke2Rlc2lnblVuaXR9ICogNHB4KTtcblx0XHR3aWR0aDogMWVtO1xuXHR9XG5cdDo6c2xvdHRlZChbcm9sZT0nb3B0aW9uJ10pLFxuXHQ6OnNsb3R0ZWQob3B0aW9uKSB7XG5cdFx0ZmxleDogMCAwIGF1dG87XG5cdH1cbmA7XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbmltcG9ydCB7IFNlbGVjdFBvc2l0aW9uIGFzIERyb3Bkb3duUG9zaXRpb24sIFNlbGVjdCBhcyBGb3VuZGF0aW9uU2VsZWN0LCBzZWxlY3RUZW1wbGF0ZSBhcyB0ZW1wbGF0ZSwgfSBmcm9tICdAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbic7XG5pbXBvcnQgeyBkcm9wZG93blN0eWxlcyBhcyBzdHlsZXMgfSBmcm9tICcuL2Ryb3Bkb3duLnN0eWxlcy5qcyc7XG5leHBvcnQgeyBEcm9wZG93blBvc2l0aW9uIH07XG4vKipcbiAqIFRoZSBWaXN1YWwgU3R1ZGlvIENvZGUgZHJvcGRvd24gY2xhc3MuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgRHJvcGRvd24gZXh0ZW5kcyBGb3VuZGF0aW9uU2VsZWN0IHtcbn1cbi8qKlxuICogVGhlIFZpc3VhbCBTdHVkaW8gQ29kZSBsaW5rIGRyb3Bkb3duIHJlZ2lzdHJhdGlvbi5cbiAqXG4gKiBAcmVtYXJrc1xuICogSFRNTCBFbGVtZW50OiBgPHZzY29kZS1kcm9wZG93bj5gXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgdnNDb2RlRHJvcGRvd24gPSBEcm9wZG93bi5jb21wb3NlKHtcbiAgICBiYXNlTmFtZTogJ2Ryb3Bkb3duJyxcbiAgICB0ZW1wbGF0ZSxcbiAgICBzdHlsZXMsXG4gICAgaW5kaWNhdG9yOiBgXG5cdFx0PHN2ZyBcblx0XHRcdGNsYXNzPVwic2VsZWN0LWluZGljYXRvclwiXG5cdFx0XHRwYXJ0PVwic2VsZWN0LWluZGljYXRvclwiXG5cdFx0XHR3aWR0aD1cIjE2XCIgXG5cdFx0XHRoZWlnaHQ9XCIxNlwiIFxuXHRcdFx0dmlld0JveD1cIjAgMCAxNiAxNlwiIFxuXHRcdFx0eG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIFxuXHRcdFx0ZmlsbD1cImN1cnJlbnRDb2xvclwiXG5cdFx0PlxuXHRcdFx0PHBhdGggXG5cdFx0XHRcdGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBcblx0XHRcdFx0Y2xpcC1ydWxlPVwiZXZlbm9kZFwiIFxuXHRcdFx0XHRkPVwiTTcuOTc2IDEwLjA3Mmw0LjM1Ny00LjM1Ny42Mi42MThMOC4yODQgMTFoLS42MThMMyA2LjMzM2wuNjE5LS42MTggNC4zNTcgNC4zNTd6XCJcblx0XHRcdC8+XG5cdFx0PC9zdmc+XG5cdGAsXG59KTtcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuaW1wb3J0IHsgY3NzIH0gZnJvbSAnQG1pY3Jvc29mdC9mYXN0LWVsZW1lbnQnO1xuaW1wb3J0IHsgZGlzYWJsZWRDdXJzb3IsIGRpc3BsYXksIGZvY3VzVmlzaWJsZSwgfSBmcm9tICdAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbic7XG5pbXBvcnQgeyBib3JkZXJXaWR0aCwgY29ybmVyUmFkaXVzLCBkZXNpZ25Vbml0LCBkaXNhYmxlZE9wYWNpdHksIGZvY3VzQm9yZGVyLCBmb3JlZ3JvdW5kLCBsaXN0QWN0aXZlU2VsZWN0aW9uQmFja2dyb3VuZCwgbGlzdEFjdGl2ZVNlbGVjdGlvbkZvcmVncm91bmQsIHR5cGVSYW1wQmFzZUZvbnRTaXplLCB0eXBlUmFtcEJhc2VMaW5lSGVpZ2h0LCB9IGZyb20gJy4uL2Rlc2lnbi10b2tlbnMuanMnO1xuZXhwb3J0IGNvbnN0IG9wdGlvblN0eWxlcyA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBjc3MgYFxuXHQke2Rpc3BsYXkoJ2lubGluZS1mbGV4Jyl9IDpob3N0IHtcblx0XHRmb250LWZhbWlseTogdmFyKC0tYm9keS1mb250KTtcblx0XHRib3JkZXItcmFkaXVzOiAke2Nvcm5lclJhZGl1c307XG5cdFx0Ym9yZGVyOiBjYWxjKCR7Ym9yZGVyV2lkdGh9ICogMXB4KSBzb2xpZCB0cmFuc3BhcmVudDtcblx0XHRib3gtc2l6aW5nOiBib3JkZXItYm94O1xuXHRcdGNvbG9yOiAke2ZvcmVncm91bmR9O1xuXHRcdGN1cnNvcjogcG9pbnRlcjtcblx0XHRmaWxsOiBjdXJyZW50Y29sb3I7XG5cdFx0Zm9udC1zaXplOiAke3R5cGVSYW1wQmFzZUZvbnRTaXplfTtcblx0XHRsaW5lLWhlaWdodDogJHt0eXBlUmFtcEJhc2VMaW5lSGVpZ2h0fTtcblx0XHRtYXJnaW46IDA7XG5cdFx0b3V0bGluZTogbm9uZTtcblx0XHRvdmVyZmxvdzogaGlkZGVuO1xuXHRcdHBhZGRpbmc6IDAgY2FsYygoJHtkZXNpZ25Vbml0fSAvIDIpICogMXB4KVxuXHRcdFx0Y2FsYygoJHtkZXNpZ25Vbml0fSAvIDQpICogMXB4KTtcblx0XHR1c2VyLXNlbGVjdDogbm9uZTtcblx0XHR3aGl0ZS1zcGFjZTogbm93cmFwO1xuXHR9XG5cdDpob3N0KDoke2ZvY3VzVmlzaWJsZX0pIHtcblx0XHRib3JkZXItY29sb3I6ICR7Zm9jdXNCb3JkZXJ9O1xuXHRcdGJhY2tncm91bmQ6ICR7bGlzdEFjdGl2ZVNlbGVjdGlvbkJhY2tncm91bmR9O1xuXHRcdGNvbG9yOiAke2ZvcmVncm91bmR9O1xuXHR9XG5cdDpob3N0KFthcmlhLXNlbGVjdGVkPSd0cnVlJ10pIHtcblx0XHRiYWNrZ3JvdW5kOiAke2xpc3RBY3RpdmVTZWxlY3Rpb25CYWNrZ3JvdW5kfTtcblx0XHRib3JkZXI6IGNhbGMoJHtib3JkZXJXaWR0aH0gKiAxcHgpIHNvbGlkIHRyYW5zcGFyZW50O1xuXHRcdGNvbG9yOiAke2xpc3RBY3RpdmVTZWxlY3Rpb25Gb3JlZ3JvdW5kfTtcblx0fVxuXHQ6aG9zdCg6YWN0aXZlKSB7XG5cdFx0YmFja2dyb3VuZDogJHtsaXN0QWN0aXZlU2VsZWN0aW9uQmFja2dyb3VuZH07XG5cdFx0Y29sb3I6ICR7bGlzdEFjdGl2ZVNlbGVjdGlvbkZvcmVncm91bmR9O1xuXHR9XG5cdDpob3N0KDpub3QoW2FyaWEtc2VsZWN0ZWQ9J3RydWUnXSk6aG92ZXIpIHtcblx0XHRiYWNrZ3JvdW5kOiAke2xpc3RBY3RpdmVTZWxlY3Rpb25CYWNrZ3JvdW5kfTtcblx0XHRib3JkZXI6IGNhbGMoJHtib3JkZXJXaWR0aH0gKiAxcHgpIHNvbGlkIHRyYW5zcGFyZW50O1xuXHRcdGNvbG9yOiAke2xpc3RBY3RpdmVTZWxlY3Rpb25Gb3JlZ3JvdW5kfTtcblx0fVxuXHQ6aG9zdCg6bm90KFthcmlhLXNlbGVjdGVkPSd0cnVlJ10pOmFjdGl2ZSkge1xuXHRcdGJhY2tncm91bmQ6ICR7bGlzdEFjdGl2ZVNlbGVjdGlvbkJhY2tncm91bmR9O1xuXHRcdGNvbG9yOiAke2ZvcmVncm91bmR9O1xuXHR9XG5cdDpob3N0KFtkaXNhYmxlZF0pIHtcblx0XHRjdXJzb3I6ICR7ZGlzYWJsZWRDdXJzb3J9O1xuXHRcdG9wYWNpdHk6ICR7ZGlzYWJsZWRPcGFjaXR5fTtcblx0fVxuXHQ6aG9zdChbZGlzYWJsZWRdOmhvdmVyKSB7XG5cdFx0YmFja2dyb3VuZC1jb2xvcjogaW5oZXJpdDtcblx0fVxuXHQuY29udGVudCB7XG5cdFx0Z3JpZC1jb2x1bW4tc3RhcnQ6IDI7XG5cdFx0anVzdGlmeS1zZWxmOiBzdGFydDtcblx0XHRvdmVyZmxvdzogaGlkZGVuO1xuXHRcdHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuXHR9XG5gO1xuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG5pbXBvcnQgeyBMaXN0Ym94T3B0aW9uIGFzIEZvdW5kYXRpb25MaXN0Ym94T3B0aW9uLCBsaXN0Ym94T3B0aW9uVGVtcGxhdGUgYXMgdGVtcGxhdGUsIH0gZnJvbSAnQG1pY3Jvc29mdC9mYXN0LWZvdW5kYXRpb24nO1xuaW1wb3J0IHsgb3B0aW9uU3R5bGVzIGFzIHN0eWxlcyB9IGZyb20gJy4vb3B0aW9uLnN0eWxlcy5qcyc7XG4vKipcbiAqIFRoZSBWaXN1YWwgU3R1ZGlvIENvZGUgb3B0aW9uIGNsYXNzLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIE9wdGlvbiBleHRlbmRzIEZvdW5kYXRpb25MaXN0Ym94T3B0aW9uIHtcbiAgICAvKipcbiAgICAgKiBDb21wb25lbnQgbGlmZWN5Y2xlIG1ldGhvZCB0aGF0IHJ1bnMgd2hlbiB0aGUgY29tcG9uZW50IGlzIGluc2VydGVkXG4gICAgICogaW50byB0aGUgRE9NLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIGlmICh0aGlzLnRleHRDb250ZW50KSB7XG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHRoaXMudGV4dENvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gdGhlIGxhYmVsIGlmIHRoZXJlIGlzIG5vIHRleHQgY29udGVudFxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnT3B0aW9uJyk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFRoZSBWaXN1YWwgU3R1ZGlvIENvZGUgb3B0aW9uIGNvbXBvbmVudCByZWdpc3RyYXRpb24uXG4gKlxuICogQHJlbWFya3NcbiAqIEhUTUwgRWxlbWVudDogYDx2c2NvZGUtb3B0aW9uPmBcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCB2c0NvZGVPcHRpb24gPSBPcHRpb24uY29tcG9zZSh7XG4gICAgYmFzZU5hbWU6ICdvcHRpb24nLFxuICAgIHRlbXBsYXRlLFxuICAgIHN0eWxlcyxcbn0pO1xuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG5pbXBvcnQgeyBjc3MgfSBmcm9tICdAbWljcm9zb2Z0L2Zhc3QtZWxlbWVudCc7XG5pbXBvcnQgeyBkaXNwbGF5LCB9IGZyb20gJ0BtaWNyb3NvZnQvZmFzdC1mb3VuZGF0aW9uJztcbmltcG9ydCB7IGRlc2lnblVuaXQsIHByb2dyZXNzQmFja2dyb3VuZCB9IGZyb20gJy4uL2Rlc2lnbi10b2tlbnMuanMnO1xuZXhwb3J0IGNvbnN0IHByb2dyZXNzUmluZ1N0eWxlcyA9IChjb250ZXh0LCBkZWZpbml0aW9uKSA9PiBjc3MgYFxuXHQke2Rpc3BsYXkoJ2ZsZXgnKX0gOmhvc3Qge1xuXHRcdGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cdFx0b3V0bGluZTogbm9uZTtcblx0XHRoZWlnaHQ6IGNhbGMoJHtkZXNpZ25Vbml0fSAqIDdweCk7XG5cdFx0d2lkdGg6IGNhbGMoJHtkZXNpZ25Vbml0fSAqIDdweCk7XG5cdFx0bWFyZ2luOiAwO1xuXHR9XG5cdC5wcm9ncmVzcyB7XG5cdFx0aGVpZ2h0OiAxMDAlO1xuXHRcdHdpZHRoOiAxMDAlO1xuXHR9XG5cdC5iYWNrZ3JvdW5kIHtcblx0XHRmaWxsOiBub25lO1xuXHRcdHN0cm9rZTogdHJhbnNwYXJlbnQ7XG5cdFx0c3Ryb2tlLXdpZHRoOiBjYWxjKCR7ZGVzaWduVW5pdH0gLyAyICogMXB4KTtcblx0fVxuXHQuaW5kZXRlcm1pbmF0ZS1pbmRpY2F0b3ItMSB7XG5cdFx0ZmlsbDogbm9uZTtcblx0XHRzdHJva2U6ICR7cHJvZ3Jlc3NCYWNrZ3JvdW5kfTtcblx0XHRzdHJva2Utd2lkdGg6IGNhbGMoJHtkZXNpZ25Vbml0fSAvIDIgKiAxcHgpO1xuXHRcdHN0cm9rZS1saW5lY2FwOiBzcXVhcmU7XG5cdFx0dHJhbnNmb3JtLW9yaWdpbjogNTAlIDUwJTtcblx0XHR0cmFuc2Zvcm06IHJvdGF0ZSgtOTBkZWcpO1xuXHRcdHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2UtaW4tb3V0O1xuXHRcdGFuaW1hdGlvbjogc3Bpbi1pbmZpbml0ZSAycyBsaW5lYXIgaW5maW5pdGU7XG5cdH1cblx0QGtleWZyYW1lcyBzcGluLWluZmluaXRlIHtcblx0XHQwJSB7XG5cdFx0XHRzdHJva2UtZGFzaGFycmF5OiAwLjAxcHggNDMuOTdweDtcblx0XHRcdHRyYW5zZm9ybTogcm90YXRlKDBkZWcpO1xuXHRcdH1cblx0XHQ1MCUge1xuXHRcdFx0c3Ryb2tlLWRhc2hhcnJheTogMjEuOTlweCAyMS45OXB4O1xuXHRcdFx0dHJhbnNmb3JtOiByb3RhdGUoNDUwZGVnKTtcblx0XHR9XG5cdFx0MTAwJSB7XG5cdFx0XHRzdHJva2UtZGFzaGFycmF5OiAwLjAxcHggNDMuOTdweDtcblx0XHRcdHRyYW5zZm9ybTogcm90YXRlKDEwODBkZWcpO1xuXHRcdH1cblx0fVxuYDtcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuaW1wb3J0IHsgQmFzZVByb2dyZXNzLCBwcm9ncmVzc1JpbmdUZW1wbGF0ZSBhcyB0ZW1wbGF0ZSwgfSBmcm9tICdAbWljcm9zb2Z0L2Zhc3QtZm91bmRhdGlvbic7XG5pbXBvcnQgeyBwcm9ncmVzc1JpbmdTdHlsZXMgYXMgc3R5bGVzIH0gZnJvbSAnLi9wcm9ncmVzcy1yaW5nLnN0eWxlcy5qcyc7XG4vKipcbiAqIFRoZSBWaXN1YWwgU3R1ZGlvIENvZGUgcHJvZ3Jlc3MgcmluZyBjbGFzcy5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBQcm9ncmVzc1JpbmcgZXh0ZW5kcyBCYXNlUHJvZ3Jlc3Mge1xuICAgIC8qKlxuICAgICAqIENvbXBvbmVudCBsaWZlY3ljbGUgbWV0aG9kIHRoYXQgcnVucyB3aGVuIHRoZSBjb21wb25lbnQgaXMgaW5zZXJ0ZWRcbiAgICAgKiBpbnRvIHRoZSBET00uXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgLy8gVGhpcyB3aWxsIG92ZXJyaWRlIGFueSB1c2FnZSBvZiB0aGUgcGF1c2VkIGF0dHJpYnV0ZVxuICAgICAgICAvLyBpbmhlcml0ZWQgYnkgdGhlIEZBU1QgRm91bmRhdGlvbiBCYXNlUHJvZ3Jlc3MgY29tcG9uZW50XG4gICAgICAgIC8vIHNvIHRoYXQgVlNDb2RlUHJvZ3Jlc3NSaW5nIGNhbiBuZXZlciBiZSBwYXVzZWRcbiAgICAgICAgaWYgKHRoaXMucGF1c2VkKSB7XG4gICAgICAgICAgICB0aGlzLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIERlZmluZXMgYSBkZWZhdWx0IGFyaWEgbGFiZWwgdGhhdCBzY3JlZW4gcmVhZGVycyBjYW4gYWNjZXNzXG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0xvYWRpbmcnKTtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGl2ZScsICdhc3NlcnRpdmUnKTtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnYWxlcnQnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcG9uZW50IGxpZmVjeWNsZSBtZXRob2QgdGhhdCBydW5zIHdoZW4gYW4gYXR0cmlidXRlIG9mIHRoZVxuICAgICAqIGVsZW1lbnQgaXMgY2hhbmdlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhdHRyTmFtZSAtIFRoZSBhdHRyaWJ1dGUgdGhhdCB3YXMgY2hhbmdlZFxuICAgICAqIEBwYXJhbSBvbGRWYWwgLSBUaGUgb2xkIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgKiBAcGFyYW0gbmV3VmFsIC0gVGhlIG5ldyB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soYXR0ck5hbWUsIG9sZFZhbCwgbmV3VmFsKSB7XG4gICAgICAgIGlmIChhdHRyTmFtZSA9PT0gJ3ZhbHVlJykge1xuICAgICAgICAgICAgLy8gVGhpcyB3aWxsIG92ZXJyaWRlIGFueSB1c2FnZSBvZiB0aGUgdmFsdWUgYXR0cmlidXRlXG4gICAgICAgICAgICAvLyBpbmhlcml0ZWQgYnkgdGhlIEZBU1QgRm91bmRhdGlvbiBCYXNlUHJvZ3Jlc3MgY29tcG9uZW50XG4gICAgICAgICAgICAvLyBzbyB0aGF0IFZTQ29kZVByb2dyZXNzUmluZyBjYW4gbmV2ZXIgc2V0IHRvIGJlIGFcbiAgICAgICAgICAgIC8vIGRldGVybWluYXRlIHN0YXRlXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZSgndmFsdWUnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogVGhlIFZpc3VhbCBTdHVkaW8gQ29kZSBwcm9ncmVzcyByaW5nIGNvbXBvbmVudCByZWdpc3RyYXRpb24uXG4gKlxuICogQHJlbWFya3NcbiAqIEhUTUwgRWxlbWVudDogYDx2c2NvZGUtcHJvZ3Jlc3MtcmluZz5gXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgdnNDb2RlUHJvZ3Jlc3NSaW5nID0gUHJvZ3Jlc3NSaW5nLmNvbXBvc2Uoe1xuICAgIGJhc2VOYW1lOiAncHJvZ3Jlc3MtcmluZycsXG4gICAgdGVtcGxhdGUsXG4gICAgc3R5bGVzLFxuICAgIGluZGV0ZXJtaW5hdGVJbmRpY2F0b3I6IGBcblx0XHQ8c3ZnIGNsYXNzPVwicHJvZ3Jlc3NcIiBwYXJ0PVwicHJvZ3Jlc3NcIiB2aWV3Qm94PVwiMCAwIDE2IDE2XCI+XG5cdFx0XHQ8Y2lyY2xlXG5cdFx0XHRcdGNsYXNzPVwiYmFja2dyb3VuZFwiXG5cdFx0XHRcdHBhcnQ9XCJiYWNrZ3JvdW5kXCJcblx0XHRcdFx0Y3g9XCI4cHhcIlxuXHRcdFx0XHRjeT1cIjhweFwiXG5cdFx0XHRcdHI9XCI3cHhcIlxuXHRcdFx0PjwvY2lyY2xlPlxuXHRcdFx0PGNpcmNsZVxuXHRcdFx0XHRjbGFzcz1cImluZGV0ZXJtaW5hdGUtaW5kaWNhdG9yLTFcIlxuXHRcdFx0XHRwYXJ0PVwiaW5kZXRlcm1pbmF0ZS1pbmRpY2F0b3ItMVwiXG5cdFx0XHRcdGN4PVwiOHB4XCJcblx0XHRcdFx0Y3k9XCI4cHhcIlxuXHRcdFx0XHRyPVwiN3B4XCJcblx0XHRcdD48L2NpcmNsZT5cblx0XHQ8L3N2Zz5cblx0YCxcbn0pO1xuIiwiLy8gQ29weXJpZ2h0IChDKSAyMDIzIGJ5IFBvc2l0IFNvZnR3YXJlLCBQQkMuXG5cbmltcG9ydCB7IEFnZW50RXJyb3IgfSBmcm9tIFwiLi9lcnJvclwiO1xuaW1wb3J0IHsgQ29ubmVjdENvbmZpZyB9IGZyb20gXCIuL2Nvbm5lY3RcIjtcbmltcG9ydCB7IFNjaGVtYVVSTCB9IGZyb20gXCIuL3NjaGVtYVwiO1xuaW1wb3J0IHsgSW50ZXJwcmV0ZXJEZWZhdWx0cyB9IGZyb20gXCIuL2ludGVycHJldGVyc1wiO1xuXG5leHBvcnQgdHlwZSBDb25maWd1cmF0aW9uTG9jYXRpb24gPSB7XG4gIGNvbmZpZ3VyYXRpb25OYW1lOiBzdHJpbmc7XG4gIGNvbmZpZ3VyYXRpb25QYXRoOiBzdHJpbmc7XG4gIGNvbmZpZ3VyYXRpb25SZWxQYXRoOiBzdHJpbmc7XG4gIHByb2plY3REaXI6IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIENvbmZpZ3VyYXRpb25FcnJvciA9IHtcbiAgZXJyb3I6IEFnZW50RXJyb3I7XG59ICYgQ29uZmlndXJhdGlvbkxvY2F0aW9uO1xuXG5leHBvcnQgdHlwZSBDb25maWd1cmF0aW9uID0ge1xuICBjb25maWd1cmF0aW9uOiBDb25maWd1cmF0aW9uRGV0YWlscztcbn0gJiBDb25maWd1cmF0aW9uTG9jYXRpb247XG5cbmV4cG9ydCB0eXBlIENvbmZpZ3VyYXRpb25JbnNwZWN0aW9uUmVzdWx0ID0ge1xuICBjb25maWd1cmF0aW9uOiBDb25maWd1cmF0aW9uRGV0YWlscztcbiAgcHJvamVjdERpcjogc3RyaW5nO1xufTtcblxuZXhwb3J0IGNvbnN0IGFyZUluc3BlY3Rpb25SZXN1bHRzU2ltaWxhckVub3VnaCA9IChcbiAgaW5zcGVjdDE6IENvbmZpZ3VyYXRpb25JbnNwZWN0aW9uUmVzdWx0LFxuICBpbnNwZWN0MjogQ29uZmlndXJhdGlvbkluc3BlY3Rpb25SZXN1bHQsXG4pID0+IHtcbiAgLy8gTm90IGNvbXBhcmluZyBBTEwgYXR0cmlidXRlcywganVzdCBlbm91Z2ggdG8gbWFpbnRhaW4gdW5pcXVlbmVzcyBhbmRcbiAgLy8gY29uZmlkZW5jZSB0aGF0IHRoaXMgaXMgYSBcInNpbWlsYXJcIiBpbnNwZWN0aW9uIHJlc3VsdFxuICByZXR1cm4gKFxuICAgIGluc3BlY3QxLnByb2plY3REaXIgPT09IGluc3BlY3QyLnByb2plY3REaXIgJiZcbiAgICBpbnNwZWN0MS5jb25maWd1cmF0aW9uLmVudHJ5cG9pbnQgPT09IGluc3BlY3QyLmNvbmZpZ3VyYXRpb24uZW50cnlwb2ludCAmJlxuICAgIGluc3BlY3QxLmNvbmZpZ3VyYXRpb24udHlwZSA9PT0gaW5zcGVjdDIuY29uZmlndXJhdGlvbi50eXBlXG4gICk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gaXNDb25maWd1cmF0aW9uRXJyb3IoXG4gIGNmZzogQ29uZmlndXJhdGlvbiB8IENvbmZpZ3VyYXRpb25FcnJvcixcbik6IGNmZyBpcyBDb25maWd1cmF0aW9uRXJyb3Ige1xuICByZXR1cm4gKGNmZyBhcyBDb25maWd1cmF0aW9uRXJyb3IpLmVycm9yICE9PSB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBlbnVtIENvbnRlbnRUeXBlIHtcbiAgSFRNTCA9IFwiaHRtbFwiLFxuICBKVVBZVEVSX05PVEVCT09LID0gXCJqdXB5dGVyLW5vdGVib29rXCIsXG4gIEpVUFlURVJfVk9JTEEgPSBcImp1cHl0ZXItdm9pbGFcIixcbiAgUFlUSE9OX0JPS0VIID0gXCJweXRob24tYm9rZWhcIixcbiAgUFlUSE9OX0RBU0ggPSBcInB5dGhvbi1kYXNoXCIsXG4gIFBZVEhPTl9GQVNUQVBJID0gXCJweXRob24tZmFzdGFwaVwiLFxuICBQWVRIT05fRkxBU0sgPSBcInB5dGhvbi1mbGFza1wiLFxuICBQWVRIT05fU0hJTlkgPSBcInB5dGhvbi1zaGlueVwiLFxuICBQWVRIT05fU1RSRUFNTElUID0gXCJweXRob24tc3RyZWFtbGl0XCIsXG4gIFBZVEhPTl9HUkFESU8gPSBcInB5dGhvbi1ncmFkaW9cIixcbiAgUVVBUlRPX1NISU5ZID0gXCJxdWFydG8tc2hpbnlcIixcbiAgUVVBUlRPID0gXCJxdWFydG9cIixcbiAgUVVBUlRPX1NUQVRJQyA9IFwicXVhcnRvLXN0YXRpY1wiLFxuICBSX1BMVU1CRVIgPSBcInItcGx1bWJlclwiLFxuICBSX1NISU5ZID0gXCJyLXNoaW55XCIsXG4gIFJNRF9TSElOWSA9IFwicm1kLXNoaW55XCIsXG4gIFJNRCA9IFwicm1kXCIsXG4gIFVOS05PV04gPSBcInVua25vd25cIixcbn1cblxuZXhwb3J0IGNvbnN0IGFsbFZhbGlkQ29udGVudFR5cGVzOiBDb250ZW50VHlwZVtdID0gW1xuICBDb250ZW50VHlwZS5IVE1MLFxuICBDb250ZW50VHlwZS5KVVBZVEVSX05PVEVCT09LLFxuICBDb250ZW50VHlwZS5KVVBZVEVSX1ZPSUxBLFxuICBDb250ZW50VHlwZS5QWVRIT05fQk9LRUgsXG4gIENvbnRlbnRUeXBlLlBZVEhPTl9EQVNILFxuICBDb250ZW50VHlwZS5QWVRIT05fRkFTVEFQSSxcbiAgQ29udGVudFR5cGUuUFlUSE9OX0ZMQVNLLFxuICBDb250ZW50VHlwZS5QWVRIT05fU0hJTlksXG4gIENvbnRlbnRUeXBlLlBZVEhPTl9TVFJFQU1MSVQsXG4gIENvbnRlbnRUeXBlLlBZVEhPTl9HUkFESU8sXG4gIENvbnRlbnRUeXBlLlFVQVJUT19TSElOWSxcbiAgQ29udGVudFR5cGUuUVVBUlRPLFxuICBDb250ZW50VHlwZS5RVUFSVE9fU1RBVElDLFxuICBDb250ZW50VHlwZS5SX1BMVU1CRVIsXG4gIENvbnRlbnRUeXBlLlJfU0hJTlksXG4gIENvbnRlbnRUeXBlLlJNRF9TSElOWSxcbiAgQ29udGVudFR5cGUuUk1ELFxuXTtcblxuZXhwb3J0IGNvbnN0IGNvbnRlbnRUeXBlU3RyaW5ncyA9IHtcbiAgW0NvbnRlbnRUeXBlLkhUTUxdOiBcInNlcnZlIHByZS1yZW5kZXJlZCBIVE1MXCIsXG4gIFtDb250ZW50VHlwZS5KVVBZVEVSX05PVEVCT09LXTogXCJyZW5kZXIgd2l0aCBKdXB5dGVyIG5iY29udmVydFwiLFxuICBbQ29udGVudFR5cGUuSlVQWVRFUl9WT0lMQV06IFwicnVuIHdpdGggSnVweXRlciBWb2lsYVwiLFxuICBbQ29udGVudFR5cGUuUFlUSE9OX0JPS0VIXTogXCJydW4gd2l0aCBCb2tlaFwiLFxuICBbQ29udGVudFR5cGUuUFlUSE9OX0RBU0hdOiBcInJ1biB3aXRoIERhc2hcIixcbiAgW0NvbnRlbnRUeXBlLlBZVEhPTl9GQVNUQVBJXTogXCJydW4gd2l0aCBGYXN0QVBJXCIsXG4gIFtDb250ZW50VHlwZS5QWVRIT05fRkxBU0tdOiBcInJ1biB3aXRoIEZsYXNrXCIsXG4gIFtDb250ZW50VHlwZS5QWVRIT05fU0hJTlldOiBcInJ1biB3aXRoIFB5dGhvbiBTaGlueVwiLFxuICBbQ29udGVudFR5cGUuUFlUSE9OX1NUUkVBTUxJVF06IFwicnVuIHdpdGggU3RyZWFtbGl0XCIsXG4gIFtDb250ZW50VHlwZS5QWVRIT05fR1JBRElPXTogXCJydW4gd2l0aCBHcmFkaW9cIixcbiAgW0NvbnRlbnRUeXBlLlFVQVJUT19TSElOWV06IFwicmVuZGVyIHdpdGggUXVhcnRvIGFuZCBydW4gZW1iZWRkZWQgU2hpbnkgYXBwXCIsXG4gIFtDb250ZW50VHlwZS5RVUFSVE9dOiBcInJlbmRlciB3aXRoIFF1YXJ0b1wiLFxuICBbQ29udGVudFR5cGUuUVVBUlRPX1NUQVRJQ106IFwicmVuZGVyIHdpdGggUXVhcnRvXCIsXG4gIFtDb250ZW50VHlwZS5SX1BMVU1CRVJdOiBcInJ1biB3aXRoIFBsdW1iZXJcIixcbiAgW0NvbnRlbnRUeXBlLlJfU0hJTlldOiBcInJ1biB3aXRoIFIgU2hpbnlcIixcbiAgW0NvbnRlbnRUeXBlLlJNRF9TSElOWV06XG4gICAgXCJyZW5kZXIgd2l0aCBybWFya2Rvd24va25pdHIgYW5kIHJ1biBlbWJlZGRlZCBTaGlueSBhcHBcIixcbiAgW0NvbnRlbnRUeXBlLlJNRF06IFwicmVuZGVyIHdpdGggcm1hcmtkb3duL2tuaXRyXCIsXG4gIFtDb250ZW50VHlwZS5VTktOT1dOXTpcbiAgICBcInVua25vd24gY29udGVudCB0eXBlOyBtYW51YWwgc2VsZWN0aW9uIG5lZWRlZCB0byBkZXBsb3lcIixcbn07XG5cbmV4cG9ydCB0eXBlIENvbmZpZ3VyYXRpb25EZXRhaWxzID0ge1xuICAkc2NoZW1hOiBTY2hlbWFVUkw7XG4gIHR5cGU6IENvbnRlbnRUeXBlO1xuICBlbnRyeXBvaW50Pzogc3RyaW5nO1xuICB0aXRsZT86IHN0cmluZztcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIHRodW1ibmFpbD86IHN0cmluZztcbiAgdGFncz86IHN0cmluZ1tdO1xuICBweXRob24/OiBQeXRob25Db25maWc7XG4gIHI/OiBSQ29uZmlnO1xuICBxdWFydG8/OiBRdWFydG9Db25maWc7XG4gIGVudmlyb25tZW50PzogRW52aXJvbm1lbnRDb25maWc7XG4gIHZhbGlkYXRlOiBib29sZWFuO1xuICBmaWxlcz86IHN0cmluZ1tdO1xuICBzZWNyZXRzPzogc3RyaW5nW107XG4gIHNjaGVkdWxlcz86IFNjaGVkdWxlQ29uZmlnW107XG4gIGFjY2Vzcz86IEFjY2Vzc0NvbmZpZztcbiAgY29ubmVjdD86IENvbm5lY3RDb25maWc7XG59O1xuXG5leHBvcnQgdHlwZSBQeXRob25Db25maWcgPSB7XG4gIHZlcnNpb246IHN0cmluZztcbiAgcGFja2FnZUZpbGU6IHN0cmluZztcbiAgcGFja2FnZU1hbmFnZXI6IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIFJDb25maWcgPSB7XG4gIHZlcnNpb246IHN0cmluZztcbiAgcGFja2FnZUZpbGU6IHN0cmluZztcbiAgcGFja2FnZU1hbmFnZXI6IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIFF1YXJ0b0NvbmZpZyA9IHtcbiAgdmVyc2lvbjogc3RyaW5nO1xuICBlbmdpbmVzPzogc3RyaW5nW107XG59O1xuXG5leHBvcnQgdHlwZSBFbnZpcm9ubWVudENvbmZpZyA9IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG5cbmV4cG9ydCB0eXBlIFNjaGVkdWxlQ29uZmlnID0ge1xuICBzdGFydDogc3RyaW5nO1xuICByZWN1cnJlbmNlOiBzdHJpbmc7XG59O1xuXG5leHBvcnQgZW51bSBBY2Nlc3NUeXBlIHtcbiAgQU5PTllNT1VTID0gXCJhbGxcIixcbiAgTE9HR0VEX0lOID0gXCJsb2dnZWQtaW5cIixcbiAgQUNMID0gXCJhY2xcIixcbn1cblxuZXhwb3J0IHR5cGUgQWNjZXNzQ29uZmlnID0ge1xuICB0eXBlOiBBY2Nlc3NUeXBlO1xuICB1c2Vycz86IFVzZXJbXTtcbiAgZ3JvdXBzPzogR3JvdXBbXTtcbn07XG5cbmV4cG9ydCB0eXBlIFVzZXIgPSB7XG4gIGlkPzogc3RyaW5nO1xuICBndWlkPzogc3RyaW5nO1xuICBuYW1lPzogc3RyaW5nO1xuICBwZXJtaXNzaW9uczogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgR3JvdXAgPSB7XG4gIGlkPzogc3RyaW5nO1xuICBndWlkPzogc3RyaW5nO1xuICBuYW1lPzogc3RyaW5nO1xuICBwZXJtaXNzaW9uczogc3RyaW5nO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIFVwZGF0ZUFsbENvbmZpZ3NXaXRoRGVmYXVsdHMoXG4gIGNvbmZpZ3M6IChDb25maWd1cmF0aW9uIHwgQ29uZmlndXJhdGlvbkVycm9yKVtdLFxuICBkZWZhdWx0czogSW50ZXJwcmV0ZXJEZWZhdWx0cyxcbikge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbmZpZ3MubGVuZ3RoOyBpKyspIHtcbiAgICBjb25maWdzW2ldID0gVXBkYXRlQ29uZmlnV2l0aERlZmF1bHRzKGNvbmZpZ3NbaV0sIGRlZmF1bHRzKTtcbiAgfVxuICByZXR1cm4gY29uZmlncztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFVwZGF0ZUNvbmZpZ1dpdGhEZWZhdWx0cyhcbiAgY29uZmlnOiBDb25maWd1cmF0aW9uIHwgQ29uZmlndXJhdGlvbkVycm9yLFxuICBkZWZhdWx0czogSW50ZXJwcmV0ZXJEZWZhdWx0cyxcbikge1xuICBpZiAoaXNDb25maWd1cmF0aW9uRXJyb3IoY29uZmlnKSkge1xuICAgIHJldHVybiBjb25maWc7XG4gIH1cblxuICAvLyBGaWxsIGluIGVtcHR5IGRlZmluaXRpb25zIHdpdGggdGhlIGN1cnJlbnQgZGVmYXVsdHNcbiAgLy8gYnV0IG9ubHkgaWYgdGhlIHNlY3Rpb24gaXMgZGVmaW5lZCAod2hpY2ggaW5kaWNhdGVzIHRoZSBkZXBlbmRlbmN5KVxuICBpZiAoY29uZmlnLmNvbmZpZ3VyYXRpb24uciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKGNvbmZpZy5jb25maWd1cmF0aW9uLnIudmVyc2lvbiA9PT0gXCJcIikge1xuICAgICAgY29uZmlnLmNvbmZpZ3VyYXRpb24uci52ZXJzaW9uID0gZGVmYXVsdHMuci52ZXJzaW9uO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmNvbmZpZ3VyYXRpb24uci5wYWNrYWdlRmlsZSA9PT0gXCJcIikge1xuICAgICAgY29uZmlnLmNvbmZpZ3VyYXRpb24uci5wYWNrYWdlRmlsZSA9IGRlZmF1bHRzLnIucGFja2FnZUZpbGU7XG4gICAgfVxuICAgIGlmIChjb25maWcuY29uZmlndXJhdGlvbi5yLnBhY2thZ2VNYW5hZ2VyID09PSBcIlwiKSB7XG4gICAgICBjb25maWcuY29uZmlndXJhdGlvbi5yLnBhY2thZ2VNYW5hZ2VyID0gZGVmYXVsdHMuci5wYWNrYWdlTWFuYWdlcjtcbiAgICB9XG4gIH1cbiAgaWYgKGNvbmZpZy5jb25maWd1cmF0aW9uLnB5dGhvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKGNvbmZpZy5jb25maWd1cmF0aW9uLnB5dGhvbi52ZXJzaW9uID09PSBcIlwiKSB7XG4gICAgICBjb25maWcuY29uZmlndXJhdGlvbi5weXRob24udmVyc2lvbiA9IGRlZmF1bHRzLnB5dGhvbi52ZXJzaW9uO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmNvbmZpZ3VyYXRpb24ucHl0aG9uLnBhY2thZ2VGaWxlID09PSBcIlwiKSB7XG4gICAgICBjb25maWcuY29uZmlndXJhdGlvbi5weXRob24ucGFja2FnZUZpbGUgPSBkZWZhdWx0cy5weXRob24ucGFja2FnZUZpbGU7XG4gICAgfVxuICAgIGlmIChjb25maWcuY29uZmlndXJhdGlvbi5weXRob24ucGFja2FnZU1hbmFnZXIgPT09IFwiXCIpIHtcbiAgICAgIGNvbmZpZy5jb25maWd1cmF0aW9uLnB5dGhvbi5wYWNrYWdlTWFuYWdlciA9XG4gICAgICAgIGRlZmF1bHRzLnB5dGhvbi5wYWNrYWdlTWFuYWdlcjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNvbmZpZztcbn1cbiIsIi8vIENvcHlyaWdodCAoQykgMjAyMyBieSBQb3NpdCBTb2Z0d2FyZSwgUEJDLlxuXG5pbXBvcnQgeyBBZ2VudEVycm9yIH0gZnJvbSBcIi4vZXJyb3JcIjtcbmltcG9ydCB7XG4gIENvbmZpZ3VyYXRpb24sXG4gIENvbmZpZ3VyYXRpb25Mb2NhdGlvbixcbiAgQ29udGVudFR5cGUsXG59IGZyb20gXCIuL2NvbmZpZ3VyYXRpb25zXCI7XG5pbXBvcnQgeyBTY2hlbWFVUkwgfSBmcm9tIFwiLi9zY2hlbWFcIjtcblxuZXhwb3J0IGVudW0gU2VydmVyVHlwZSB7XG4gIENPTk5FQ1QgPSBcImNvbm5lY3RcIixcbiAgU0hJTllfQVBQUyA9IFwic2hpbnlhcHBzXCIsXG4gIENMT1VEID0gXCJjbG91ZFwiLFxuICBTTk9XRkxBS0UgPSBcInNub3dmbGFrZVwiLFxufVxuXG5leHBvcnQgZW51bSBDb250ZW50UmVjb3JkU3RhdGUge1xuICBORVcgPSBcIm5ld1wiLFxuICBERVBMT1lFRCA9IFwiZGVwbG95ZWRcIixcbiAgRVJST1IgPSBcImVycm9yXCIsXG59XG5cbmV4cG9ydCB0eXBlIENvbnRlbnRSZWNvcmRMb2NhdGlvbiA9IHtcbiAgZGVwbG95bWVudE5hbWU6IHN0cmluZztcbiAgZGVwbG95bWVudFBhdGg6IHN0cmluZztcbiAgcHJvamVjdERpcjogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgQ29udGVudFJlY29yZEVycm9yID0ge1xuICBlcnJvcjogQWdlbnRFcnJvcjtcbiAgc3RhdGU6IENvbnRlbnRSZWNvcmRTdGF0ZS5FUlJPUjtcbn0gJiBDb250ZW50UmVjb3JkTG9jYXRpb247XG5cbnR5cGUgT3B0aW9uYWxQcmVEZXBsb3ltZW50RmllbGRzID0ge1xuICBpZD86IHN0cmluZztcbiAgYnVuZGxlVXJsPzogc3RyaW5nO1xuICBkYXNoYm9hcmRVcmw/OiBzdHJpbmc7XG4gIGRpcmVjdFVybD86IHN0cmluZztcbn07XG5cbnR5cGUgQ29udGVudFJlY29yZFJlY29yZCA9IHtcbiAgJHNjaGVtYTogU2NoZW1hVVJMO1xuICBzZXJ2ZXJUeXBlOiBTZXJ2ZXJUeXBlO1xuICBzZXJ2ZXJVcmw6IHN0cmluZztcbiAgc2F2ZU5hbWU6IHN0cmluZztcbiAgY3JlYXRlZEF0OiBzdHJpbmc7XG4gIGRpc21pc3NlZEF0OiBzdHJpbmc7XG4gIGNvbmZpZ3VyYXRpb25OYW1lOiBzdHJpbmc7XG4gIHR5cGU6IENvbnRlbnRUeXBlO1xuICBkZXBsb3ltZW50RXJyb3I6IEFnZW50RXJyb3IgfCBudWxsO1xufSAmIENvbnRlbnRSZWNvcmRMb2NhdGlvbjtcblxuZXhwb3J0IHR5cGUgUHJlQ29udGVudFJlY29yZCA9IHtcbiAgc3RhdGU6IENvbnRlbnRSZWNvcmRTdGF0ZS5ORVc7XG59ICYgQ29udGVudFJlY29yZFJlY29yZCAmXG4gIE9wdGlvbmFsUHJlRGVwbG95bWVudEZpZWxkcztcblxuZXhwb3J0IHR5cGUgUHJlQ29udGVudFJlY29yZFdpdGhDb25maWcgPSBQcmVDb250ZW50UmVjb3JkICZcbiAgQ29uZmlndXJhdGlvbkxvY2F0aW9uO1xuXG5leHBvcnQgdHlwZSBDb250ZW50UmVjb3JkID0ge1xuICBpZDogc3RyaW5nO1xuICBidW5kbGVJZDogc3RyaW5nO1xuICBidW5kbGVVcmw6IHN0cmluZztcbiAgZGFzaGJvYXJkVXJsOiBzdHJpbmc7XG4gIGRpcmVjdFVybDogc3RyaW5nO1xuICBsb2dzVXJsOiBzdHJpbmc7XG4gIGZpbGVzOiBzdHJpbmdbXTtcbiAgZGVwbG95ZWRBdDogc3RyaW5nO1xuICBzdGF0ZTogQ29udGVudFJlY29yZFN0YXRlLkRFUExPWUVEO1xufSAmIENvbnRlbnRSZWNvcmRSZWNvcmQgJlxuICBDb25maWd1cmF0aW9uO1xuXG5leHBvcnQgdHlwZSBBbGxDb250ZW50UmVjb3JkVHlwZXMgPVxuICB8IENvbnRlbnRSZWNvcmRcbiAgfCBQcmVDb250ZW50UmVjb3JkXG4gIHwgUHJlQ29udGVudFJlY29yZFdpdGhDb25maWdcbiAgfCBDb250ZW50UmVjb3JkRXJyb3I7XG5cbmV4cG9ydCB0eXBlIEVudmlyb25tZW50ID0gQXJyYXk8c3RyaW5nPjtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzU3VjY2Vzc2Z1bChcbiAgZDogQWxsQ29udGVudFJlY29yZFR5cGVzIHwgdW5kZWZpbmVkLFxuKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gIGlmIChkID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGlmIChpc0NvbnRlbnRSZWNvcmRFcnJvcihkKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gQm9vbGVhbighZC5kZXBsb3ltZW50RXJyb3IpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNVbnN1Y2Nlc3NmdWwoXG4gIGQ6IEFsbENvbnRlbnRSZWNvcmRUeXBlcyB8IHVuZGVmaW5lZCxcbik6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICBjb25zdCByZXN1bHQgPSBpc1N1Y2Nlc3NmdWwoZCk7XG4gIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuICFyZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0NvbnRlbnRSZWNvcmRFcnJvcihcbiAgZDogQWxsQ29udGVudFJlY29yZFR5cGVzIHwgdW5kZWZpbmVkLFxuKTogZCBpcyBDb250ZW50UmVjb3JkRXJyb3Ige1xuICByZXR1cm4gQm9vbGVhbihkICYmIGQuc3RhdGUgPT09IENvbnRlbnRSZWNvcmRTdGF0ZS5FUlJPUik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ByZUNvbnRlbnRSZWNvcmQoXG4gIGQ6IEFsbENvbnRlbnRSZWNvcmRUeXBlcyB8IHVuZGVmaW5lZCxcbik6IGQgaXMgUHJlQ29udGVudFJlY29yZCB7XG4gIHJldHVybiBCb29sZWFuKGQgJiYgZC5zdGF0ZSA9PT0gQ29udGVudFJlY29yZFN0YXRlLk5FVyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ByZUNvbnRlbnRSZWNvcmRXaXRoQ29uZmlnKFxuICBkOiBBbGxDb250ZW50UmVjb3JkVHlwZXMgfCB1bmRlZmluZWQsXG4pOiBkIGlzIFByZUNvbnRlbnRSZWNvcmRXaXRoQ29uZmlnIHtcbiAgcmV0dXJuIEJvb2xlYW4oXG4gICAgZCAmJlxuICAgICAgZC5zdGF0ZSA9PT0gQ29udGVudFJlY29yZFN0YXRlLk5FVyAmJlxuICAgICAgKGQgYXMgUHJlQ29udGVudFJlY29yZFdpdGhDb25maWcpLmNvbmZpZ3VyYXRpb25OYW1lICE9PSB1bmRlZmluZWQsXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1N1Y2Nlc3NmdWxQcmVDb250ZW50UmVjb3JkKFxuICBkOiBBbGxDb250ZW50UmVjb3JkVHlwZXMgfCB1bmRlZmluZWQsXG4pOiBkIGlzIFByZUNvbnRlbnRSZWNvcmQge1xuICBpZiAoaXNQcmVDb250ZW50UmVjb3JkKGQpKSB7XG4gICAgY29uc3Qgc3VjY2VzcyA9IGlzU3VjY2Vzc2Z1bChkKTtcbiAgICBpZiAoc3VjY2VzcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gc3VjY2VzcztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNVbnN1Y2Nlc3NmdWxQcmVDb250ZW50UmVjb3JkKFxuICBkOiBBbGxDb250ZW50UmVjb3JkVHlwZXMgfCB1bmRlZmluZWQsXG4pOiBkIGlzIFByZUNvbnRlbnRSZWNvcmQge1xuICBpZiAoaXNQcmVDb250ZW50UmVjb3JkKGQpKSB7XG4gICAgY29uc3QgZmFpbHVyZSA9IGlzVW5zdWNjZXNzZnVsKGQpO1xuICAgIGlmIChmYWlsdXJlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWlsdXJlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0NvbnRlbnRSZWNvcmQoXG4gIGQ6IEFsbENvbnRlbnRSZWNvcmRUeXBlcyB8IHVuZGVmaW5lZCxcbik6IGQgaXMgQ29udGVudFJlY29yZCB7XG4gIHJldHVybiBCb29sZWFuKGQgJiYgZC5zdGF0ZSA9PT0gQ29udGVudFJlY29yZFN0YXRlLkRFUExPWUVEKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU3VjY2Vzc2Z1bENvbnRlbnRSZWNvcmQoXG4gIGQ6IEFsbENvbnRlbnRSZWNvcmRUeXBlcyB8IHVuZGVmaW5lZCxcbik6IGQgaXMgQ29udGVudFJlY29yZCB7XG4gIGlmIChpc0NvbnRlbnRSZWNvcmQoZCkpIHtcbiAgICBjb25zdCBzdWNjZXNzID0gaXNTdWNjZXNzZnVsKGQpO1xuICAgIGlmIChzdWNjZXNzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1Vuc3VjY2Vzc2Z1bENvbnRlbnRSZWNvcmQoXG4gIGQ6IEFsbENvbnRlbnRSZWNvcmRUeXBlcyB8IHVuZGVmaW5lZCxcbik6IGQgaXMgQ29udGVudFJlY29yZCB7XG4gIGlmIChpc0NvbnRlbnRSZWNvcmQoZCkpIHtcbiAgICBjb25zdCBmYWlsdXJlID0gaXNVbnN1Y2Nlc3NmdWwoZCk7XG4gICAgaWYgKGZhaWx1cmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGZhaWx1cmU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsIi8vIENvcHlyaWdodCAoQykgMjAyMyBieSBQb3NpdCBTb2Z0d2FyZSwgUEJDLlxuXG5leHBvcnQgZW51bSBDb250ZW50UmVjb3JkRmlsZVR5cGUge1xuICBSRUdVTEFSID0gXCJSRUdVTEFSXCIsXG4gIERJUkVDVE9SWSA9IFwiRElSXCIsXG59XG5cbmV4cG9ydCB0eXBlIENvbnRlbnRSZWNvcmRGaWxlID0ge1xuICBpZDogc3RyaW5nO1xuICBmaWxlVHlwZTogQ29udGVudFJlY29yZEZpbGVUeXBlO1xuICBiYXNlOiBzdHJpbmc7XG4gIHJlYXNvbjogRmlsZU1hdGNoIHwgbnVsbDsgLy8gcGF0dGVybiB0aGF0IG1hdGNoZWQgYSBmaWxlLCBudWxsIGlmIG5vIG1hdGNoXG4gIGZpbGVzOiBDb250ZW50UmVjb3JkRmlsZVtdO1xuICBpc0RpcjogYm9vbGVhbjtcbiAgaXNGaWxlOiBib29sZWFuO1xuICBtb2RpZmllZERhdGV0aW1lOiBzdHJpbmc7XG4gIHJlbDogc3RyaW5nO1xuICByZWxEaXI6IHN0cmluZztcbiAgc2l6ZTogbnVtYmVyO1xuICBmaWxlQ291bnQ6IG51bWJlcjtcbiAgYWJzOiBzdHJpbmc7XG59O1xuXG5leHBvcnQgZW51bSBGaWxlTWF0Y2hTb3VyY2Uge1xuICBGSUxFID0gXCJmaWxlXCIsXG4gIEJVSUxUX0lOID0gXCJidWlsdC1pblwiLFxuICBQRVJNSVNTSU9OU19FUlJPUiA9IFwicGVybWlzc2lvbnNcIixcbn1cblxuZXhwb3J0IHR5cGUgRmlsZU1hdGNoID0ge1xuICBzb3VyY2U6IEZpbGVNYXRjaFNvdXJjZTtcbiAgcGF0dGVybjogc3RyaW5nO1xuICBmaWxlTmFtZTogc3RyaW5nO1xuICBmaWxlUGF0aDogc3RyaW5nO1xuICBleGNsdWRlOiBib29sZWFuO1xufTtcblxuZXhwb3J0IGVudW0gRmlsZUFjdGlvbiB7XG4gIElOQ0xVREUgPSBcImluY2x1ZGVcIixcbiAgRVhDTFVERSA9IFwiZXhjbHVkZVwiLFxufVxuIiwiLy8gQ29weXJpZ2h0IChDKSAyMDI0IGJ5IFBvc2l0IFNvZnR3YXJlLCBQQkMuXG5cbmV4cG9ydCBlbnVtIEVycm9yTWVzc2FnZUFjdGlvbklkcyB7XG4gIEVkaXRDb25maWd1cmF0aW9uLFxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNFcnJvck1lc3NhZ2VBY3Rpb25JZChcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgc2VhcmNoVmFsdWU6IGFueSxcbik6IHNlYXJjaFZhbHVlIGlzIEVycm9yTWVzc2FnZUFjdGlvbklkcyB7XG4gIHJldHVybiBPYmplY3QudmFsdWVzKEVycm9yTWVzc2FnZUFjdGlvbklkcykuaW5jbHVkZXMoc2VhcmNoVmFsdWUpO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVycm9yTWVzc2FnZVNwbGl0T3B0aW9uIHtcbiAgZGV0ZWN0aW9uU3RyOiBzdHJpbmc7XG4gIGFuY2hvclN0cj86IHN0cmluZztcbiAgYnV0dG9uU3RyPzogc3RyaW5nO1xuICBhY3Rpb25JZDogRXJyb3JNZXNzYWdlQWN0aW9uSWRzO1xufVxuXG5leHBvcnQgY29uc3QgRXJyb3JNZXNzYWdlU3BsaXRPcHRpb25zOiBFcnJvck1lc3NhZ2VTcGxpdE9wdGlvbltdID0gW1xuICB7XG4gICAgZGV0ZWN0aW9uU3RyOiBcImVkaXRpbmcgeW91ciBjb25maWd1cmF0aW9uXCIsXG4gICAgYW5jaG9yU3RyOiBcImVkaXRpbmdcIixcbiAgICBidXR0b25TdHI6IFwiRWRpdCBDb25maWd1cmF0aW9uXCIsXG4gICAgYWN0aW9uSWQ6IEVycm9yTWVzc2FnZUFjdGlvbklkcy5FZGl0Q29uZmlndXJhdGlvbixcbiAgfSxcbl07XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kRXJyb3JNZXNzYWdlU3BsaXRPcHRpb24oXG4gIGFjdGlvbklkOiBFcnJvck1lc3NhZ2VBY3Rpb25JZHMsXG4pOiBFcnJvck1lc3NhZ2VTcGxpdE9wdGlvbiB8IHVuZGVmaW5lZDtcbmV4cG9ydCBmdW5jdGlvbiBmaW5kRXJyb3JNZXNzYWdlU3BsaXRPcHRpb24oXG4gIGVycm9yTWVzc2FnZTogc3RyaW5nLFxuKTogRXJyb3JNZXNzYWdlU3BsaXRPcHRpb24gfCB1bmRlZmluZWQ7XG5leHBvcnQgZnVuY3Rpb24gZmluZEVycm9yTWVzc2FnZVNwbGl0T3B0aW9uKFxuICB0YXJnZXQ6IEVycm9yTWVzc2FnZUFjdGlvbklkcyB8IHN0cmluZyxcbik6IEVycm9yTWVzc2FnZVNwbGl0T3B0aW9uIHwgdW5kZWZpbmVkIHtcbiAgcmV0dXJuIEVycm9yTWVzc2FnZVNwbGl0T3B0aW9ucy5maW5kKChvcHRpb24pID0+IHtcbiAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIHRhcmdldC5pbmNsdWRlcyhvcHRpb24uZGV0ZWN0aW9uU3RyKTtcbiAgICB9XG4gICAgaWYgKGlzRXJyb3JNZXNzYWdlQWN0aW9uSWQodGFyZ2V0KSkge1xuICAgICAgcmV0dXJuIG9wdGlvbi5hY3Rpb25JZCA9PT0gdGFyZ2V0O1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xufVxuIiwiLy8gQ29weXJpZ2h0IChDKSAyMDI0IGJ5IFBvc2l0IFNvZnR3YXJlLCBQQkMuXG5cbmltcG9ydCB7IERlcGxveW1lbnRTZWxlY3RvciB9IGZyb20gXCIuLi9zaGFyZWRcIjtcblxuZXhwb3J0IGVudW0gV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlIHtcbiAgLy8gU2VudCBmcm9tIHdlYnZpZXdWaWV3IHRvIGhvc3RcbiAgREVQTE9ZID0gXCJkZXBsb3lcIixcbiAgSU5JVElBTElaSU5HID0gXCJpbml0aWFsaXppbmdcIixcbiAgRURJVF9DT05GSUdVUkFUSU9OID0gXCJlZGl0Q29uZmlndXJhdGlvblwiLFxuICBTSE9XX1NFTEVDVF9DT05GSUdVUkFUSU9OID0gXCJzaG93U2VsZWN0Q29uZmlndXJhdGlvblwiLFxuICBOQVZJR0FURSA9IFwibmF2aWdhdGVcIixcbiAgU0FWRV9TRUxFQ1RJT05fU1RBVEUgPSBcInNhdmVTZWxlY3Rpb25TdGF0ZVwiLFxuICBWU0NPREVfT1BFTiA9IFwidnNDb2RlT3BlblwiLFxuICBJTkNMVURFX0ZJTEUgPSBcImluY2x1ZGVGaWxlXCIsXG4gIEVYQ0xVREVfRklMRSA9IFwiZXhjbHVkZUZpbGVcIixcbiAgUkVRVUVTVF9GSUxFU19MSVNUUyA9IFwicmVxdWVzdEZpbGVzTGlzdHNcIixcbiAgUkVRVUVTVF9DUkVERU5USUFMUyA9IFwicmVxdWVzdENyZWRlbnRpYWxzXCIsXG4gIFZTQ09ERV9PUEVOX1JFTEFUSVZFID0gXCJWU0NvZGVPcGVuUmVsYXRpdmVNc2dcIixcbiAgQUREX1NFQ1JFVCA9IFwiYWRkU2VjcmV0XCIsXG4gIFJFRlJFU0hfUFlUSE9OX1BBQ0tBR0VTID0gXCJSZWZyZXNoUHl0aG9uUGFja2FnZXNNc2dcIixcbiAgU0NBTl9QWVRIT05fUEFDS0FHRV9SRVFVSVJFTUVOVFMgPSBcIlNjYW5QeXRob25QYWNrYWdlUmVxdWlyZW1lbnRzTXNnXCIsXG4gIFJFRlJFU0hfUl9QQUNLQUdFUyA9IFwiUmVmcmVzaFJQYWNrYWdlc01zZ1wiLFxuICBTQ0FOX1JfUEFDS0FHRV9SRVFVSVJFTUVOVFMgPSBcIlNjYW5SUGFja2FnZVJlcXVpcmVtZW50c01zZ1wiLFxuICBTRUxFQ1RfREVQTE9ZTUVOVCA9IFwic2VsZWN0RGVwbG95bWVudFwiLFxuICBORVdfREVQTE9ZTUVOVCA9IFwibmV3RGVwbG95bWVudFwiLFxuICBORVdfQ1JFREVOVElBTF9GT1JfREVQTE9ZTUVOVCA9IFwibmV3Q3JlZGVudGlhbEZvckRlcGxveW1lbnRcIixcbiAgTkVXX0NSRURFTlRJQUwgPSBcIm5ld0NyZWRlbnRpYWxcIixcbiAgVklFV19QVUJMSVNISU5HX0xPRyA9IFwidmlld1B1Ymxpc2hpbmdMb2dcIixcbiAgU0hPV19BU1NPQ0lBVEVfR1VJRCA9IFwiU2hvd0Fzc29jaWF0ZUdVSURcIixcbiAgVVBEQVRFX1NFTEVDVElPTl9DUkVERU5USUFMX1NUQVRFID0gXCJVcGRhdGVTZWxlY3Rpb25DcmVkZW50aWFsU3RhdGVNc2dcIixcbiAgVVBEQVRFX1NFTEVDVElPTl9JU19QUkVfQ09OVEVOVF9SRUNPUkQgPSBcIlVwZGF0ZVNlbGVjdGlvbklzUHJlQ29udGVudFJlY29yZE1zZ1wiLFxufVxuXG5leHBvcnQgdHlwZSBBbnlXZWJ2aWV3VG9Ib3N0TWVzc2FnZTxcbiAgVCBleHRlbmRzIFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZSxcbiAgVSBleHRlbmRzIG9iamVjdCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCxcbj4gPSBVIGV4dGVuZHMgdW5kZWZpbmVkXG4gID8geyBraW5kOiBUIH1cbiAgOiB7XG4gICAgICBraW5kOiBUO1xuICAgICAgY29udGVudDogVTtcbiAgICB9O1xuXG5leHBvcnQgdHlwZSBXZWJ2aWV3VG9Ib3N0TWVzc2FnZSA9XG4gIHwgRGVwbG95TXNnXG4gIHwgSW5pdGlhbGl6aW5nTXNnXG4gIHwgRWRpdENvbmZpZ3VyYXRpb25Nc2dcbiAgfCBTaG93U2VsZWN0Q29uZmlndXJhdGlvbk1zZ1xuICB8IE5hdmlnYXRlTXNnXG4gIHwgU2F2ZVNlbGVjdGlvblN0YXRlZE1zZ1xuICB8IFZTQ29kZU9wZW5Nc2dcbiAgfCBJbmNsdWRlRmlsZU1zZ1xuICB8IEV4Y2x1ZGVGaWxlTXNnXG4gIHwgUmVxdWVzdEZpbGVzTGlzdHNNc2dcbiAgfCBSZXF1ZXN0Q3JlZGVudGlhbHNNc2dcbiAgfCBBZGRTZWNyZXRNc2dcbiAgfCBSZWZyZXNoUHl0aG9uUGFja2FnZXNNc2dcbiAgfCBWU0NvZGVPcGVuUmVsYXRpdmVNc2dcbiAgfCBTY2FuUHl0aG9uUGFja2FnZVJlcXVpcmVtZW50c01zZ1xuICB8IFJlZnJlc2hSUGFja2FnZXNNc2dcbiAgfCBTY2FuUlBhY2thZ2VSZXF1aXJlbWVudHNNc2dcbiAgfCBTZWxlY3REZXBsb3ltZW50TXNnXG4gIHwgTmV3RGVwbG95bWVudE1zZ1xuICB8IE5ld0NyZWRlbnRpYWxGb3JEZXBsb3ltZW50TXNnXG4gIHwgTmV3Q3JlZGVudGlhbE1zZ1xuICB8IFZpZXdQdWJsaXNoaW5nTG9nXG4gIHwgU2hvd0Fzc29jaWF0ZUdVSURNc2dcbiAgfCBVcGRhdGVTZWxlY3Rpb25DcmVkZW50aWFsU3RhdGVNc2dcbiAgfCBVcGRhdGVTZWxlY3Rpb25Jc1ByZUNvbnRlbnRSZWNvcmRNc2c7XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgZnVuY3Rpb24gaXNXZWJ2aWV3VG9Ib3N0TWVzc2FnZShtc2c6IGFueSk6IG1zZyBpcyBXZWJ2aWV3VG9Ib3N0TWVzc2FnZSB7XG4gIHJldHVybiAoXG4gICAgbXNnLmtpbmQgPT09IFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5ERVBMT1kgfHxcbiAgICBtc2cua2luZCA9PT0gV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLkVESVRfQ09ORklHVVJBVElPTiB8fFxuICAgIG1zZy5raW5kID09PSBXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuSU5JVElBTElaSU5HIHx8XG4gICAgbXNnLmtpbmQgPT09IFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5OQVZJR0FURSB8fFxuICAgIG1zZy5raW5kID09PSBXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuU0hPV19TRUxFQ1RfQ09ORklHVVJBVElPTiB8fFxuICAgIG1zZy5raW5kID09PSBXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuU0FWRV9TRUxFQ1RJT05fU1RBVEUgfHxcbiAgICBtc2cua2luZCA9PT0gV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLlZTQ09ERV9PUEVOIHx8XG4gICAgbXNnLmtpbmQgPT09IFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5JTkNMVURFX0ZJTEUgfHxcbiAgICBtc2cua2luZCA9PT0gV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLkVYQ0xVREVfRklMRSB8fFxuICAgIG1zZy5raW5kID09PSBXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuUkVRVUVTVF9GSUxFU19MSVNUUyB8fFxuICAgIG1zZy5raW5kID09PSBXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuUkVRVUVTVF9DUkVERU5USUFMUyB8fFxuICAgIG1zZy5raW5kID09PSBXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuQUREX1NFQ1JFVCB8fFxuICAgIG1zZy5raW5kID09PSBXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuUkVGUkVTSF9QWVRIT05fUEFDS0FHRVMgfHxcbiAgICBtc2cua2luZCA9PT0gV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLlZTQ09ERV9PUEVOX1JFTEFUSVZFIHx8XG4gICAgbXNnLmtpbmQgPT09IFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5TQ0FOX1BZVEhPTl9QQUNLQUdFX1JFUVVJUkVNRU5UUyB8fFxuICAgIG1zZy5raW5kID09PSBXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuUkVGUkVTSF9SX1BBQ0tBR0VTIHx8XG4gICAgbXNnLmtpbmQgPT09IFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5TQ0FOX1JfUEFDS0FHRV9SRVFVSVJFTUVOVFMgfHxcbiAgICBtc2cua2luZCA9PT0gV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLlNFTEVDVF9ERVBMT1lNRU5UIHx8XG4gICAgbXNnLmtpbmQgPT09IFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5ORVdfREVQTE9ZTUVOVCB8fFxuICAgIG1zZy5raW5kID09PSBXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuTkVXX0NSRURFTlRJQUxfRk9SX0RFUExPWU1FTlQgfHxcbiAgICBtc2cua2luZCA9PT0gV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLk5FV19DUkVERU5USUFMIHx8XG4gICAgbXNnLmtpbmQgPT09IFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5WSUVXX1BVQkxJU0hJTkdfTE9HIHx8XG4gICAgbXNnLmtpbmQgPT09IFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5TSE9XX0FTU09DSUFURV9HVUlEIHx8XG4gICAgbXNnLmtpbmQgPT09IFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5VUERBVEVfU0VMRUNUSU9OX0NSRURFTlRJQUxfU1RBVEUgfHxcbiAgICBtc2cua2luZCA9PT0gV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLlVQREFURV9TRUxFQ1RJT05fSVNfUFJFX0NPTlRFTlRfUkVDT1JEXG4gICk7XG59XG5cbmV4cG9ydCB0eXBlIERlcGxveU1zZyA9IEFueVdlYnZpZXdUb0hvc3RNZXNzYWdlPFxuICBXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuREVQTE9ZLFxuICB7XG4gICAgZGVwbG95bWVudE5hbWU6IHN0cmluZztcbiAgICBjcmVkZW50aWFsTmFtZTogc3RyaW5nO1xuICAgIGNvbmZpZ3VyYXRpb25OYW1lOiBzdHJpbmc7XG4gICAgcHJvamVjdERpcjogc3RyaW5nO1xuICAgIHNlY3JldHM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICB9XG4+O1xuXG5leHBvcnQgdHlwZSBJbml0aWFsaXppbmdNc2cgPVxuICBBbnlXZWJ2aWV3VG9Ib3N0TWVzc2FnZTxXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuSU5JVElBTElaSU5HPjtcblxuZXhwb3J0IHR5cGUgRWRpdENvbmZpZ3VyYXRpb25TZWxlY3Rpb24gPSB7XG4gIC8vIG51bWJlcnMgYmVsb3cgYXJlIGJhc2UtemVyb1xuICBzdGFydDoge1xuICAgIGxpbmU6IG51bWJlcjtcbiAgICBjaGFyYWN0ZXI6IG51bWJlcjtcbiAgfTtcbiAgZW5kPzoge1xuICAgIGxpbmU6IG51bWJlcjtcbiAgICBjaGFyYWN0ZXI6IG51bWJlcjtcbiAgfTtcbn07XG5cbmV4cG9ydCB0eXBlIEVkaXRDb25maWd1cmF0aW9uTXNnID0gQW55V2Vidmlld1RvSG9zdE1lc3NhZ2U8XG4gIFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5FRElUX0NPTkZJR1VSQVRJT04sXG4gIHtcbiAgICBjb25maWd1cmF0aW9uUGF0aDogc3RyaW5nO1xuICAgIHNlbGVjdGlvbj86IEVkaXRDb25maWd1cmF0aW9uU2VsZWN0aW9uO1xuICB9XG4+O1xuXG5leHBvcnQgdHlwZSBTaG93U2VsZWN0Q29uZmlndXJhdGlvbk1zZyA9XG4gIEFueVdlYnZpZXdUb0hvc3RNZXNzYWdlPFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5TSE9XX1NFTEVDVF9DT05GSUdVUkFUSU9OPjtcblxuZXhwb3J0IHR5cGUgTmF2aWdhdGVNc2cgPSBBbnlXZWJ2aWV3VG9Ib3N0TWVzc2FnZTxcbiAgV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLk5BVklHQVRFLFxuICB7XG4gICAgdXJpUGF0aDogc3RyaW5nO1xuICB9XG4+O1xuXG5leHBvcnQgdHlwZSBTYXZlU2VsZWN0aW9uU3RhdGVkTXNnID0gQW55V2Vidmlld1RvSG9zdE1lc3NhZ2U8XG4gIFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5TQVZFX1NFTEVDVElPTl9TVEFURSxcbiAge1xuICAgIHN0YXRlOiBEZXBsb3ltZW50U2VsZWN0b3I7XG4gIH1cbj47XG5cbmV4cG9ydCB0eXBlIFZTQ29kZU9wZW5Nc2cgPSBBbnlXZWJ2aWV3VG9Ib3N0TWVzc2FnZTxcbiAgV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLlZTQ09ERV9PUEVOLFxuICB7XG4gICAgdXJpOiBzdHJpbmc7XG4gIH1cbj47XG5cbmV4cG9ydCB0eXBlIEluY2x1ZGVGaWxlTXNnID0gQW55V2Vidmlld1RvSG9zdE1lc3NhZ2U8XG4gIFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5JTkNMVURFX0ZJTEUsXG4gIHtcbiAgICBwYXRoOiBzdHJpbmc7XG4gIH1cbj47XG5cbmV4cG9ydCB0eXBlIEV4Y2x1ZGVGaWxlTXNnID0gQW55V2Vidmlld1RvSG9zdE1lc3NhZ2U8XG4gIFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5FWENMVURFX0ZJTEUsXG4gIHtcbiAgICBwYXRoOiBzdHJpbmc7XG4gIH1cbj47XG5cbmV4cG9ydCB0eXBlIFJlcXVlc3RGaWxlc0xpc3RzTXNnID1cbiAgQW55V2Vidmlld1RvSG9zdE1lc3NhZ2U8V2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLlJFUVVFU1RfRklMRVNfTElTVFM+O1xuXG5leHBvcnQgdHlwZSBSZXF1ZXN0Q3JlZGVudGlhbHNNc2cgPVxuICBBbnlXZWJ2aWV3VG9Ib3N0TWVzc2FnZTxXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuUkVRVUVTVF9DUkVERU5USUFMUz47XG5cbmV4cG9ydCB0eXBlIEFkZFNlY3JldE1zZyA9XG4gIEFueVdlYnZpZXdUb0hvc3RNZXNzYWdlPFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5BRERfU0VDUkVUPjtcblxuZXhwb3J0IHR5cGUgUmVmcmVzaFB5dGhvblBhY2thZ2VzTXNnID1cbiAgQW55V2Vidmlld1RvSG9zdE1lc3NhZ2U8V2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLlJFRlJFU0hfUFlUSE9OX1BBQ0tBR0VTPjtcblxuZXhwb3J0IHR5cGUgVlNDb2RlT3BlblJlbGF0aXZlTXNnID0gQW55V2Vidmlld1RvSG9zdE1lc3NhZ2U8XG4gIFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5WU0NPREVfT1BFTl9SRUxBVElWRSxcbiAge1xuICAgIHJlbGF0aXZlUGF0aDogc3RyaW5nO1xuICB9XG4+O1xuXG5leHBvcnQgdHlwZSBTY2FuUHl0aG9uUGFja2FnZVJlcXVpcmVtZW50c01zZyA9XG4gIEFueVdlYnZpZXdUb0hvc3RNZXNzYWdlPFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5TQ0FOX1BZVEhPTl9QQUNLQUdFX1JFUVVJUkVNRU5UUz47XG5cbmV4cG9ydCB0eXBlIFJlZnJlc2hSUGFja2FnZXNNc2cgPVxuICBBbnlXZWJ2aWV3VG9Ib3N0TWVzc2FnZTxXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuUkVGUkVTSF9SX1BBQ0tBR0VTPjtcblxuZXhwb3J0IHR5cGUgU2NhblJQYWNrYWdlUmVxdWlyZW1lbnRzTXNnID1cbiAgQW55V2Vidmlld1RvSG9zdE1lc3NhZ2U8V2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLlNDQU5fUl9QQUNLQUdFX1JFUVVJUkVNRU5UUz47XG5cbmV4cG9ydCB0eXBlIFNlbGVjdERlcGxveW1lbnRNc2cgPVxuICBBbnlXZWJ2aWV3VG9Ib3N0TWVzc2FnZTxXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuU0VMRUNUX0RFUExPWU1FTlQ+O1xuXG5leHBvcnQgdHlwZSBOZXdEZXBsb3ltZW50TXNnID1cbiAgQW55V2Vidmlld1RvSG9zdE1lc3NhZ2U8V2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLk5FV19ERVBMT1lNRU5UPjtcblxuZXhwb3J0IHR5cGUgTmV3Q3JlZGVudGlhbEZvckRlcGxveW1lbnRNc2cgPVxuICBBbnlXZWJ2aWV3VG9Ib3N0TWVzc2FnZTxXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuTkVXX0NSRURFTlRJQUxfRk9SX0RFUExPWU1FTlQ+O1xuXG5leHBvcnQgdHlwZSBOZXdDcmVkZW50aWFsTXNnID1cbiAgQW55V2Vidmlld1RvSG9zdE1lc3NhZ2U8V2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLk5FV19DUkVERU5USUFMPjtcblxuZXhwb3J0IHR5cGUgVmlld1B1Ymxpc2hpbmdMb2cgPVxuICBBbnlXZWJ2aWV3VG9Ib3N0TWVzc2FnZTxXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuVklFV19QVUJMSVNISU5HX0xPRz47XG5cbmV4cG9ydCB0eXBlIFNob3dBc3NvY2lhdGVHVUlETXNnID1cbiAgQW55V2Vidmlld1RvSG9zdE1lc3NhZ2U8V2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLlNIT1dfQVNTT0NJQVRFX0dVSUQ+O1xuXG5leHBvcnQgdHlwZSBVcGRhdGVTZWxlY3Rpb25DcmVkZW50aWFsU3RhdGVNc2cgPSBBbnlXZWJ2aWV3VG9Ib3N0TWVzc2FnZTxcbiAgV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLlVQREFURV9TRUxFQ1RJT05fQ1JFREVOVElBTF9TVEFURSxcbiAge1xuICAgIHN0YXRlOiBzdHJpbmc7XG4gIH1cbj47XG5cbmV4cG9ydCB0eXBlIFVwZGF0ZVNlbGVjdGlvbklzUHJlQ29udGVudFJlY29yZE1zZyA9IEFueVdlYnZpZXdUb0hvc3RNZXNzYWdlPFxuICBXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuVVBEQVRFX1NFTEVDVElPTl9JU19QUkVfQ09OVEVOVF9SRUNPUkQsXG4gIHtcbiAgICBzdGF0ZTogc3RyaW5nO1xuICB9XG4+O1xuIiwiLy8gQ29weXJpZ2h0IChDKSAyMDI0IGJ5IFBvc2l0IFNvZnR3YXJlLCBQQkMuXG5cbmltcG9ydCB7XG4gIENvbmZpZ3VyYXRpb24sXG4gIENvbmZpZ3VyYXRpb25FcnJvcixcbiAgQ29udGVudFJlY29yZCxcbiAgaXNDb25maWd1cmF0aW9uRXJyb3IsXG4gIFByZUNvbnRlbnRSZWNvcmQsXG59IGZyb20gXCIuLi9hcGlcIjtcblxuZXhwb3J0IGNvbnN0IGNhbGN1bGF0ZVRpdGxlID0gKFxuICBjb250ZW50UmVjb3JkOiBDb250ZW50UmVjb3JkIHwgUHJlQ29udGVudFJlY29yZCxcbiAgY29uZmlnPzogQ29uZmlndXJhdGlvbiB8IENvbmZpZ3VyYXRpb25FcnJvcixcbik6IHtcbiAgdGl0bGU6IHN0cmluZztcbiAgcHJvYmxlbTogYm9vbGVhbjtcbn0gPT4ge1xuICBsZXQgdGl0bGUgPVxuICAgIGNvbmZpZyAmJiBpc0NvbmZpZ3VyYXRpb25FcnJvcihjb25maWcpXG4gICAgICA/IHVuZGVmaW5lZFxuICAgICAgOiBjb25maWc/LmNvbmZpZ3VyYXRpb24udGl0bGU7XG4gIGlmICh0aXRsZSkge1xuICAgIHJldHVybiB7XG4gICAgICB0aXRsZSxcbiAgICAgIHByb2JsZW06IGZhbHNlLFxuICAgIH07XG4gIH1cbiAgLy8gTm8gdGl0bGUuLi4gZGV0ZXJtaW5lIHdoYXQgaW5mbyB3ZSBjYW4gcHJvdmlkZVxuICBpZiAoIWNvbnRlbnRSZWNvcmQuY29uZmlndXJhdGlvbk5hbWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGl0bGU6IGBVbmtub3duIFRpdGxlIER1ZSBUbyBNaXNzaW5nIENvbmZpZyBFbnRyeSBpbiAke2NvbnRlbnRSZWNvcmQuc2F2ZU5hbWV9YCxcbiAgICAgIHByb2JsZW06IHRydWUsXG4gICAgfTtcbiAgfVxuICBpZiAoIWNvbmZpZykge1xuICAgIC8vIGlmIHdlIGhhZCBhIGNvbnRlbnRSZWNvcmQgY29uZmlndXJhdGlvbiBuYW1lLCAgYnV0IGRvIG5vdCBoYXZlIGEgY29uZmlnIG9iamVjdCxcbiAgICAvLyB0aGVuIHRoZSBjb25maWcgZmlsZSBpcyBtaXNzaW5nLlxuICAgIHJldHVybiB7XG4gICAgICB0aXRsZTogYFVua25vd24gVGl0bGUgRHVlIHRvIE1pc3NpbmcgQ29uZmlnICR7Y29udGVudFJlY29yZC5jb25maWd1cmF0aW9uTmFtZX1gLFxuICAgICAgcHJvYmxlbTogdHJ1ZSxcbiAgICB9O1xuICB9XG5cbiAgaWYgKGlzQ29uZmlndXJhdGlvbkVycm9yKGNvbmZpZykpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGl0bGU6IGBVbmtub3duIFRpdGxlIOKAoiBFcnJvciBpbiAke2NvbmZpZy5jb25maWd1cmF0aW9uTmFtZX1gLFxuICAgICAgcHJvYmxlbTogdHJ1ZSxcbiAgICB9O1xuICB9XG5cbiAgbGV0IGNvbmZpZ05hbWUgPSBjb25maWcuY29uZmlndXJhdGlvbk5hbWU7XG4gIGlmICghY29uZmlnTmFtZSkge1xuICAgIC8vIHdlJ3JlIGd1YXJhbnRlZWQgdG8gaGF2ZSBhIHZhbHVlIGJlY2F1c2Ugb2YgdGhlIGNoZWNrIGFib3ZlXG4gICAgY29uZmlnTmFtZSA9IGNvbnRlbnRSZWNvcmQuY29uZmlndXJhdGlvbk5hbWU7XG4gIH1cbiAgaWYgKGNvbmZpZ05hbWUpIHtcbiAgICB0aXRsZSA9IGBObyBUaXRsZSAoaW4gJHtjb25maWdOYW1lfSlgO1xuICB9IGVsc2Uge1xuICAgIHRpdGxlID0gYE5vIFRpdGxlIGF2YWlsYWJsZWA7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB0aXRsZSxcbiAgICBwcm9ibGVtOiB0cnVlLFxuICB9O1xufTtcbiIsIi8vIENvcHlyaWdodCAoQykgMjAyMyBieSBQb3NpdCBTb2Z0d2FyZSwgUEJDLlxuXG4vLyBkZXBlbmRpbmcgb24gaW5jbHVkZVRpbWUgcGFyYW0sIHByb2R1Y2VzOlxuLy8gaW5jbHVkZVRpbWUgPSBmYWxzZTogXCJEZWMgMjAsIDIwMjNcIlxuLy8gaW5jbHVkZVRpbWUgPSB0cnVlOiBcIkRlYyAyMCwgMjAyMyBhdCAxMjozOSBQTVwiXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZVN0cmluZyhcbiAgZGF0ZVN0cmluZzogc3RyaW5nLFxuICB7IGluY2x1ZGVUaW1lIH0gPSB7IGluY2x1ZGVUaW1lOiB0cnVlIH0sXG4pIHtcbiAgY29uc3QgZGF0ZVJlc3VsdCA9IG5ldyBEYXRlKGAke2RhdGVTdHJpbmd9YCkudG9Mb2NhbGVEYXRlU3RyaW5nKFwiZW4tVVNcIiwge1xuICAgIGRheTogXCIyLWRpZ2l0XCIsXG4gICAgbW9udGg6IFwic2hvcnRcIixcbiAgICB5ZWFyOiBcIm51bWVyaWNcIixcbiAgfSk7XG4gIGlmICghaW5jbHVkZVRpbWUpIHtcbiAgICByZXR1cm4gZGF0ZVJlc3VsdDtcbiAgfVxuICBjb25zdCB0aW1lUmVzdWx0ID0gZm9ybWF0VGltZVN0cmluZyhkYXRlU3RyaW5nKTtcbiAgcmV0dXJuIGAke2RhdGVSZXN1bHR9IGF0ICR7dGltZVJlc3VsdH1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0VGltZVN0cmluZyhcbiAgZGF0ZVN0cmluZzogc3RyaW5nLFxuICB7IGluY2x1ZGVTZWNvbmRzIH0gPSB7IGluY2x1ZGVTZWNvbmRzOiBmYWxzZSB9LFxuKSB7XG4gIGNvbnN0IG9wdGlvbnM6IEludGwuRGF0ZVRpbWVGb3JtYXRPcHRpb25zID0ge1xuICAgIGhvdXI6IFwiMi1kaWdpdFwiLFxuICAgIG1pbnV0ZTogXCIyLWRpZ2l0XCIsXG4gIH07XG4gIGlmIChpbmNsdWRlU2Vjb25kcykge1xuICAgIG9wdGlvbnMuc2Vjb25kID0gXCIyLWRpZ2l0XCI7XG4gIH1cbiAgcmV0dXJuIG5ldyBEYXRlKGAke2RhdGVTdHJpbmd9YCkudG9Mb2NhbGVUaW1lU3RyaW5nKFwiZW4tVVNcIiwgb3B0aW9ucyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzb3J0QnlEYXRlU3RyaW5nKGE6IHN0cmluZywgYjogc3RyaW5nKSB7XG4gIHJldHVybiBEYXRlLnBhcnNlKGEpID4gRGF0ZS5wYXJzZShiKSA/IC0xIDogMTtcbn1cbiIsIi8vIENvcHlyaWdodCAoQykgMjAyNCBieSBQb3NpdCBTb2Z0d2FyZSwgUEJDLlxuXG5pbXBvcnQge1xuICBDb25maWd1cmF0aW9uLFxuICBDb25maWd1cmF0aW9uRXJyb3IsXG4gIENvbmZpZ3VyYXRpb25JbnNwZWN0aW9uUmVzdWx0LFxuICBDb250ZW50VHlwZSxcbiAgaXNDb25maWd1cmF0aW9uRXJyb3IsXG59IGZyb20gXCIuLi9hcGlcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlckluc3BlY3Rpb25SZXN1bHRzVG9UeXBlKFxuICBpbnNwZWN0aW9uUmVzdWx0czogQ29uZmlndXJhdGlvbkluc3BlY3Rpb25SZXN1bHRbXSxcbiAgdHlwZTogQ29udGVudFR5cGUgfCB1bmRlZmluZWQsXG4pOiBDb25maWd1cmF0aW9uSW5zcGVjdGlvblJlc3VsdFtdIHtcbiAgaWYgKCF0eXBlIHx8IHR5cGUgPT09IENvbnRlbnRUeXBlLlVOS05PV04pIHtcbiAgICByZXR1cm4gaW5zcGVjdGlvblJlc3VsdHM7XG4gIH1cbiAgcmV0dXJuIGluc3BlY3Rpb25SZXN1bHRzLmZpbHRlcigoY2ZnKSA9PiBpc0luc3BlY3Rpb25SZXN1bHRPZlR5cGUoY2ZnLCB0eXBlKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0luc3BlY3Rpb25SZXN1bHRPZlR5cGUoXG4gIGluc3BlY3Rpb25SZXN1bHQ6IENvbmZpZ3VyYXRpb25JbnNwZWN0aW9uUmVzdWx0LFxuICB0eXBlPzogQ29udGVudFR5cGUsXG4pOiBib29sZWFuIHtcbiAgaWYgKHR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gaW5zcGVjdGlvblJlc3VsdC5jb25maWd1cmF0aW9uLnR5cGUgPT09IHR5cGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJDb25maWd1cmF0aW9uc1RvVmFsaWRBbmRUeXBlKFxuICBjb25maWdzOiAoQ29uZmlndXJhdGlvbiB8IENvbmZpZ3VyYXRpb25FcnJvcilbXSxcbiAgdHlwZTogQ29udGVudFR5cGUgfCB1bmRlZmluZWQsXG4pOiBDb25maWd1cmF0aW9uW10ge1xuICBsZXQgcmVzdWx0ID0gY29uZmlncy5maWx0ZXIoXG4gICAgKGNmZyk6IGNmZyBpcyBDb25maWd1cmF0aW9uID0+ICFpc0NvbmZpZ3VyYXRpb25FcnJvcihjZmcpLFxuICApO1xuICBpZiAodHlwZSAmJiB0eXBlICE9PSBDb250ZW50VHlwZS5VTktOT1dOKSB7XG4gICAgcmVzdWx0ID0gcmVzdWx0LmZpbHRlcigoY2ZnKSA9PiBpc0NvbmZpZ3VyYXRpb25PZlR5cGUoY2ZnLCB0eXBlKSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ29uZmlndXJhdGlvbk9mVHlwZShcbiAgY29uZmlnOiBDb25maWd1cmF0aW9uLFxuICB0eXBlPzogQ29udGVudFR5cGUsXG4pOiBib29sZWFuIHtcbiAgaWYgKHR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gY29uZmlnLmNvbmZpZ3VyYXRpb24udHlwZSA9PT0gdHlwZTtcbn1cbiIsIi8vIENvcHlyaWdodCAoQykgMjAyNCBieSBQb3NpdCBTb2Z0d2FyZSwgUEJDLlxuXG5pbXBvcnQgeyBSUGFja2FnZSB9IGZyb20gXCIuLi8uLi9hcGkvdHlwZXMvcGFja2FnZXNcIjtcbmltcG9ydCB7XG4gIENyZWRlbnRpYWwsXG4gIENvbmZpZ3VyYXRpb24sXG4gIENvbnRlbnRSZWNvcmQsXG4gIENvbnRlbnRSZWNvcmRGaWxlLFxuICBQcmVDb250ZW50UmVjb3JkLFxuICBDb25maWd1cmF0aW9uRXJyb3IsXG59IGZyb20gXCIuLi8uLi9hcGlcIjtcbmltcG9ydCB7IERlcGxveW1lbnRTZWxlY3RvciB9IGZyb20gXCIuLi9zaGFyZWRcIjtcblxuZXhwb3J0IGVudW0gSG9zdFRvV2Vidmlld01lc3NhZ2VUeXBlIHtcbiAgLy8gU2VudCBmcm9tIGhvc3QgdG8gd2Vidmlld1ZpZXdcbiAgSU5JVElBTElaSU5HX1JFUVVFU1RfQ09NUExFVEUgPSBcImluaXRpYWxpemluZ1JlcXVlc3RDb21wbGV0ZVwiLFxuICBSRUZSRVNIX0NPTlRFTlRSRUNPUkRfREFUQSA9IFwicmVmcmVzaENvbnRlbnRSZWNvcmREYXRhXCIsXG4gIFJFRlJFU0hfQ09ORklHX0RBVEEgPSBcInJlZnJlc2hDb25maWdEYXRhXCIsXG4gIFJFRlJFU0hfQ1JFREVOVElBTF9EQVRBID0gXCJyZWZyZXNoQ3JlZGVudGlhbERhdGFcIixcbiAgUFVCTElTSF9TVEFSVCA9IFwicHVibGlzaFN0YXJ0XCIsXG4gIFBVQkxJU0hfRklOSVNIX1NVQ0NFU1MgPSBcInB1Ymxpc2hGaW5pc2hTdWNjZXNzXCIsXG4gIFBVQkxJU0hfRklOSVNIX0ZBSUxVUkUgPSBcInB1Ymxpc2hGaW5pc2hGYWlsdXJlXCIsXG4gIFVQREFURV9DT05URU5UUkVDT1JEX1NFTEVDVElPTiA9IFwidXBkYXRlQ29udGVudFJlY29yZFNlbGVjdGlvblwiLFxuICBTQVZFX1NFTEVDVElPTiA9IFwic2F2ZVNlbGVjdGlvblwiLFxuICBSRUZSRVNIX0ZJTEVTID0gXCJyZWZyZXNoRmlsZXNcIixcbiAgVVBEQVRFX1BZVEhPTl9QQUNLQUdFUyA9IFwidXBkYXRlUHl0aG9uUGFja2FnZXNcIixcbiAgVVBEQVRFX1JfUEFDS0FHRVMgPSBcInVwZGF0ZVJQYWNrYWdlc1wiLFxuICBTSE9XX0RJU0FCTEVfT1ZFUkxBWSA9IFwic2hvd0Rpc2FibGVPdmVybGF5XCIsXG4gIEhJREVfRElTQUJMRV9PVkVSTEFZID0gXCJoaWRlRGlzYWJsZU92ZXJsYXlcIixcbiAgU0VUX1BBVEhfU0VQQVJBVE9SID0gXCJzZXRQYXRoU2VwYXJhdG9yXCIsXG4gIFVQREFURV9TRVJWRVJfRU5WSVJPTk1FTlQgPSBcInVwZGF0ZVNlcnZlckVudmlyb25tZW50XCIsXG59XG5cbmV4cG9ydCB0eXBlIEFueUhvc3RUb1dlYnZpZXdNZXNzYWdlPFxuICBUIGV4dGVuZHMgSG9zdFRvV2Vidmlld01lc3NhZ2VUeXBlLFxuICBVIGV4dGVuZHMgb2JqZWN0IHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuPiA9IFUgZXh0ZW5kcyB1bmRlZmluZWRcbiAgPyB7IGtpbmQ6IFQgfVxuICA6IHtcbiAgICAgIGtpbmQ6IFQ7XG4gICAgICBjb250ZW50OiBVO1xuICAgIH07XG5cbmV4cG9ydCB0eXBlIEhvc3RUb1dlYnZpZXdNZXNzYWdlID1cbiAgfCBJbml0aWFsaXppbmdSZXF1ZXN0Q29tcGxldGVcbiAgfCBSZWZyZXNoQ29udGVudFJlY29yZERhdGFNc2dcbiAgfCBSZWZyZXNoQ29uZmlnRGF0YU1zZ1xuICB8IFJlZnJlc2hDcmVkZW50aWFsRGF0YU1zZ1xuICB8IFB1Ymxpc2hTdGFydE1zZ1xuICB8IFB1Ymxpc2hGaW5pc2hTdWNjZXNzTXNnXG4gIHwgUHVibGlzaEZpbmlzaEZhaWx1cmVNc2dcbiAgfCBVcGRhdGVDb250ZW50UmVjb3JkU2VsZWN0aW9uTXNnXG4gIHwgU2F2ZVNlbGVjdGlvbk1zZ1xuICB8IFJlZnJlc2hGaWxlc01zZ1xuICB8IFVwZGF0ZVB5dGhvblBhY2thZ2VzXG4gIHwgVXBkYXRlUlBhY2thZ2VzXG4gIHwgU2hvd0Rpc2FibGVPdmVybGF5TXNnXG4gIHwgSGlkZURpc2FibGVPdmVybGF5TXNnXG4gIHwgU2V0UGF0aFNlcGFyYXRvck1zZ1xuICB8IFVwZGF0ZVNlcnZlckVudmlyb25tZW50TXNnO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGZ1bmN0aW9uIGlzSG9zdFRvV2Vidmlld01lc3NhZ2UobXNnOiBhbnkpOiBtc2cgaXMgSG9zdFRvV2Vidmlld01lc3NhZ2Uge1xuICByZXR1cm4gKFxuICAgIG1zZy5raW5kID09PSBIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuSU5JVElBTElaSU5HX1JFUVVFU1RfQ09NUExFVEUgfHxcbiAgICBtc2cua2luZCA9PT0gSG9zdFRvV2Vidmlld01lc3NhZ2VUeXBlLlJFRlJFU0hfQ09OVEVOVFJFQ09SRF9EQVRBIHx8XG4gICAgbXNnLmtpbmQgPT09IEhvc3RUb1dlYnZpZXdNZXNzYWdlVHlwZS5SRUZSRVNIX0NPTkZJR19EQVRBIHx8XG4gICAgbXNnLmtpbmQgPT09IEhvc3RUb1dlYnZpZXdNZXNzYWdlVHlwZS5SRUZSRVNIX0NSRURFTlRJQUxfREFUQSB8fFxuICAgIG1zZy5raW5kID09PSBIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuUFVCTElTSF9TVEFSVCB8fFxuICAgIG1zZy5raW5kID09PSBIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuUFVCTElTSF9GSU5JU0hfU1VDQ0VTUyB8fFxuICAgIG1zZy5raW5kID09PSBIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuUFVCTElTSF9GSU5JU0hfRkFJTFVSRSB8fFxuICAgIG1zZy5raW5kID09PSBIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuVVBEQVRFX0NPTlRFTlRSRUNPUkRfU0VMRUNUSU9OIHx8XG4gICAgbXNnLmtpbmQgPT09IEhvc3RUb1dlYnZpZXdNZXNzYWdlVHlwZS5TQVZFX1NFTEVDVElPTiB8fFxuICAgIG1zZy5raW5kID09PSBIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuUkVGUkVTSF9GSUxFUyB8fFxuICAgIG1zZy5raW5kID09PSBIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuVVBEQVRFX1BZVEhPTl9QQUNLQUdFUyB8fFxuICAgIG1zZy5raW5kID09PSBIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuVVBEQVRFX1JfUEFDS0FHRVMgfHxcbiAgICBtc2cua2luZCA9PT0gSG9zdFRvV2Vidmlld01lc3NhZ2VUeXBlLlNIT1dfRElTQUJMRV9PVkVSTEFZIHx8XG4gICAgbXNnLmtpbmQgPT09IEhvc3RUb1dlYnZpZXdNZXNzYWdlVHlwZS5ISURFX0RJU0FCTEVfT1ZFUkxBWSB8fFxuICAgIG1zZy5raW5kID09PSBIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuU0VUX1BBVEhfU0VQQVJBVE9SIHx8XG4gICAgbXNnLmtpbmQgPT09IEhvc3RUb1dlYnZpZXdNZXNzYWdlVHlwZS5VUERBVEVfU0VSVkVSX0VOVklST05NRU5UXG4gICk7XG59XG5cbmV4cG9ydCB0eXBlIEluaXRpYWxpemluZ1JlcXVlc3RDb21wbGV0ZSA9XG4gIEFueUhvc3RUb1dlYnZpZXdNZXNzYWdlPEhvc3RUb1dlYnZpZXdNZXNzYWdlVHlwZS5JTklUSUFMSVpJTkdfUkVRVUVTVF9DT01QTEVURT47XG5cbmV4cG9ydCB0eXBlIFJlZnJlc2hDb250ZW50UmVjb3JkRGF0YU1zZyA9IEFueUhvc3RUb1dlYnZpZXdNZXNzYWdlPFxuICBIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuUkVGUkVTSF9DT05URU5UUkVDT1JEX0RBVEEsXG4gIHtcbiAgICBjb250ZW50UmVjb3JkczogKENvbnRlbnRSZWNvcmQgfCBQcmVDb250ZW50UmVjb3JkKVtdO1xuICAgIGRlcGxveW1lbnRTZWxlY3RlZD86IERlcGxveW1lbnRTZWxlY3RvciB8IG51bGw7XG4gIH1cbj47XG5leHBvcnQgdHlwZSBSZWZyZXNoQ29uZmlnRGF0YU1zZyA9IEFueUhvc3RUb1dlYnZpZXdNZXNzYWdlPFxuICBIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuUkVGUkVTSF9DT05GSUdfREFUQSxcbiAge1xuICAgIGNvbmZpZ3VyYXRpb25zOiBDb25maWd1cmF0aW9uW107XG4gICAgY29uZmlndXJhdGlvbnNJbkVycm9yOiBDb25maWd1cmF0aW9uRXJyb3JbXTtcbiAgfVxuPjtcbmV4cG9ydCB0eXBlIFJlZnJlc2hDcmVkZW50aWFsRGF0YU1zZyA9IEFueUhvc3RUb1dlYnZpZXdNZXNzYWdlPFxuICBIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuUkVGUkVTSF9DUkVERU5USUFMX0RBVEEsXG4gIHtcbiAgICBjcmVkZW50aWFsczogQ3JlZGVudGlhbFtdO1xuICB9XG4+O1xuZXhwb3J0IHR5cGUgUHVibGlzaFN0YXJ0TXNnID1cbiAgQW55SG9zdFRvV2Vidmlld01lc3NhZ2U8SG9zdFRvV2Vidmlld01lc3NhZ2VUeXBlLlBVQkxJU0hfU1RBUlQ+O1xuZXhwb3J0IHR5cGUgUHVibGlzaEZpbmlzaFN1Y2Nlc3NNc2cgPVxuICBBbnlIb3N0VG9XZWJ2aWV3TWVzc2FnZTxIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuUFVCTElTSF9GSU5JU0hfU1VDQ0VTUz47XG5leHBvcnQgdHlwZSBQdWJsaXNoRmluaXNoRmFpbHVyZU1zZyA9IEFueUhvc3RUb1dlYnZpZXdNZXNzYWdlPFxuICBIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuUFVCTElTSF9GSU5JU0hfRkFJTFVSRSxcbiAge1xuICAgIGRhdGE6IHtcbiAgICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICB9O1xuICB9XG4+O1xuZXhwb3J0IHR5cGUgVXBkYXRlQ29udGVudFJlY29yZFNlbGVjdGlvbk1zZyA9IEFueUhvc3RUb1dlYnZpZXdNZXNzYWdlPFxuICBIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuVVBEQVRFX0NPTlRFTlRSRUNPUkRfU0VMRUNUSU9OLFxuICB7XG4gICAgcHJlQ29udGVudFJlY29yZDogUHJlQ29udGVudFJlY29yZDtcbiAgICBzYXZlU2VsZWN0aW9uPzogYm9vbGVhbjtcbiAgfVxuPjtcbmV4cG9ydCB0eXBlIFNhdmVTZWxlY3Rpb25Nc2cgPVxuICBBbnlIb3N0VG9XZWJ2aWV3TWVzc2FnZTxIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuU0FWRV9TRUxFQ1RJT04+O1xuXG5leHBvcnQgdHlwZSBSZWZyZXNoRmlsZXNNc2cgPSBBbnlIb3N0VG9XZWJ2aWV3TWVzc2FnZTxcbiAgSG9zdFRvV2Vidmlld01lc3NhZ2VUeXBlLlJFRlJFU0hfRklMRVMsXG4gIHtcbiAgICBmaWxlczogQ29udGVudFJlY29yZEZpbGU7XG4gIH1cbj47XG5cbmV4cG9ydCB0eXBlIFVwZGF0ZVB5dGhvblBhY2thZ2VzID0gQW55SG9zdFRvV2Vidmlld01lc3NhZ2U8XG4gIEhvc3RUb1dlYnZpZXdNZXNzYWdlVHlwZS5VUERBVEVfUFlUSE9OX1BBQ0tBR0VTLFxuICB7XG4gICAgcHl0aG9uUHJvamVjdDogYm9vbGVhbjtcbiAgICBmaWxlPzogc3RyaW5nO1xuICAgIG1hbmFnZXI/OiBzdHJpbmc7XG4gICAgcGFja2FnZXM/OiBzdHJpbmdbXTtcbiAgfVxuPjtcblxuZXhwb3J0IHR5cGUgVXBkYXRlUlBhY2thZ2VzID0gQW55SG9zdFRvV2Vidmlld01lc3NhZ2U8XG4gIEhvc3RUb1dlYnZpZXdNZXNzYWdlVHlwZS5VUERBVEVfUl9QQUNLQUdFUyxcbiAge1xuICAgIHJQcm9qZWN0OiBib29sZWFuO1xuICAgIGZpbGU/OiBzdHJpbmc7XG4gICAgbWFuYWdlcj86IHN0cmluZztcbiAgICByVmVyc2lvbj86IHN0cmluZztcbiAgICBwYWNrYWdlcz86IFJQYWNrYWdlW107XG4gIH1cbj47XG5cbmV4cG9ydCB0eXBlIFNob3dEaXNhYmxlT3ZlcmxheU1zZyA9XG4gIEFueUhvc3RUb1dlYnZpZXdNZXNzYWdlPEhvc3RUb1dlYnZpZXdNZXNzYWdlVHlwZS5TSE9XX0RJU0FCTEVfT1ZFUkxBWT47XG5cbmV4cG9ydCB0eXBlIEhpZGVEaXNhYmxlT3ZlcmxheU1zZyA9XG4gIEFueUhvc3RUb1dlYnZpZXdNZXNzYWdlPEhvc3RUb1dlYnZpZXdNZXNzYWdlVHlwZS5ISURFX0RJU0FCTEVfT1ZFUkxBWT47XG5cbmV4cG9ydCB0eXBlIFNldFBhdGhTZXBhcmF0b3JNc2cgPSBBbnlIb3N0VG9XZWJ2aWV3TWVzc2FnZTxcbiAgSG9zdFRvV2Vidmlld01lc3NhZ2VUeXBlLlNFVF9QQVRIX1NFUEFSQVRPUixcbiAge1xuICAgIHNlcGFyYXRvcjogc3RyaW5nO1xuICB9XG4+O1xuXG5leHBvcnQgdHlwZSBVcGRhdGVTZXJ2ZXJFbnZpcm9ubWVudE1zZyA9IEFueUhvc3RUb1dlYnZpZXdNZXNzYWdlPFxuICBIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuVVBEQVRFX1NFUlZFUl9FTlZJUk9OTUVOVCxcbiAge1xuICAgIGVudmlyb25tZW50OiBzdHJpbmdbXTtcbiAgfVxuPjtcbiIsIi8vIENvcHlyaWdodCAoQykgMjAyNCBieSBQb3NpdCBTb2Z0d2FyZSwgUEJDLlxuXG5pbXBvcnQgeyBIb3N0VG9XZWJ2aWV3TWVzc2FnZUNCIH0gZnJvbSBcIi4uLy4uLy4uLy4uL3NyYy90eXBlcy9tZXNzYWdlcy9jb25kdWl0XCI7XG5pbXBvcnQgeyBXZWJ2aWV3QXBpIH0gZnJvbSBcInZzY29kZS13ZWJ2aWV3XCI7XG5pbXBvcnQgeyBpc0hvc3RUb1dlYnZpZXdNZXNzYWdlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL3NyYy90eXBlcy9tZXNzYWdlcy9ob3N0VG9XZWJ2aWV3TWVzc2FnZXNcIjtcbmltcG9ydCB7IFdlYnZpZXdUb0hvc3RNZXNzYWdlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL3NyYy90eXBlcy9tZXNzYWdlcy93ZWJ2aWV3VG9Ib3N0TWVzc2FnZXNcIjtcblxuLy8gQSBIb3N0Q29uZHVpdCBpcyB1c2VkIGJ5IGEgd2VidmlldyB0byBjb25uZWN0IHRvIGEgaG9zdFxuLy8gYSB3ZWJ2aWV3IHNlbmRzIFdlYnZpZXdUb0hvc3RNZXNzYWdlXG4vLyBhbmQgcmVjZWl2ZXMgSG9zdFRvV2Vidmlld01lc3NhZ2VcblxuZXhwb3J0IGNsYXNzIEhvc3RDb25kdWl0IHtcbiAgcHJpdmF0ZSBleHRlcm5hbE1zZ0NCOiBIb3N0VG9XZWJ2aWV3TWVzc2FnZUNCIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgd2luZG93OiBXaW5kb3csXG4gICAgcHJpdmF0ZSByZWFkb25seSB2c0NvZGVBcGk6IFdlYnZpZXdBcGk8dW5rbm93bj4sXG4gICkge31cblxuICBwcml2YXRlIHJhd01zZ0NCID0gKGU6IE1lc3NhZ2VFdmVudCkgPT4ge1xuICAgIGlmICh0aGlzLmV4dGVybmFsTXNnQ0IpIHtcbiAgICAgIGNvbnN0IG9iaiA9IEpTT04ucGFyc2UoZS5kYXRhKTtcbiAgICAgIGlmIChpc0hvc3RUb1dlYnZpZXdNZXNzYWdlKG9iaikpIHtcbiAgICAgICAgdGhpcy5leHRlcm5hbE1zZ0NCKG9iaik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIGBIb3N0Q29uZHVpdDo6cmF3TXNnQ0IsIE5vbkNvbmR1aXRNZXNzYWdlIFJlY2VpdmVkOiAke0pTT04uc3RyaW5naWZ5KGUpfWAsXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcHVibGljIG9uTXNnID0gKGNiOiBIb3N0VG9XZWJ2aWV3TWVzc2FnZUNCKSA9PiB7XG4gICAgdGhpcy5leHRlcm5hbE1zZ0NCID0gY2I7XG4gICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgdGhpcy5yYXdNc2dDQik7XG4gIH07XG5cbiAgcHVibGljIGRlYWN0aXZhdGUoKSB7XG4gICAgdGhpcy53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgdGhpcy5yYXdNc2dDQik7XG4gIH1cblxuICBwdWJsaWMgc2VuZE1zZyA9IChtc2c6IFdlYnZpZXdUb0hvc3RNZXNzYWdlKSA9PiB7XG4gICAgY29uc3QgZSA9IEpTT04uc3RyaW5naWZ5KG1zZyk7XG4gICAgdGhpcy52c0NvZGVBcGkucG9zdE1lc3NhZ2UoZSk7XG4gIH07XG59XG4iLCIvLyBDb3B5cmlnaHQgKEMpIDIwMjQgYnkgUG9zaXQgU29mdHdhcmUsIFBCQy5cblxuZXhwb3J0IGNvbnN0IGZvcm1hdFVSTCA9IChpbnB1dDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgLy8gY2hlY2sgaWYgdGhlIFVSTCBzdGFydHMgd2l0aCBhIHNjaGVtZVxuICBpZiAoL15bYS16QS1aXSs6XFwvXFwvLy50ZXN0KGlucHV0KSkge1xuICAgIHJldHVybiBpbnB1dDtcbiAgfVxuICByZXR1cm4gYGh0dHBzOi8vJHtpbnB1dH1gO1xufTtcblxuLy8gQ3VycmVudGx5IGp1c3QgYWRkcyBhIHRyYWlsaW5nIHNsYXNoXG5leHBvcnQgY29uc3Qgbm9ybWFsaXplVVJMID0gKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICBsZXQgcmVzdWx0ID0gaW5wdXQ7XG4gIGlmICghcmVzdWx0LmVuZHNXaXRoKFwiL1wiKSkge1xuICAgIHJlc3VsdCArPSBcIi9cIjtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufTtcbiIsIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbi8vIENvcHlyaWdodCAoQykgMjAyMyBieSBQb3NpdCBTb2Z0d2FyZSwgUEJDLlxuXG5pbXBvcnQgeyBFcnJvckNvZGUgfSBmcm9tIFwiLi4vLi4vdXRpbHMvZXJyb3JUeXBlc1wiO1xuXG50eXBlIEFnZW50RXJyb3JCYXNlID0ge1xuICBjb2RlOiBFcnJvckNvZGU7XG4gIG1zZzogc3RyaW5nO1xuICBvcGVyYXRpb246IHN0cmluZztcbn07XG5cbmV4cG9ydCBjb25zdCBpc0FnZW50RXJyb3IgPSAoZTogYW55KTogZSBpcyBBZ2VudEVycm9yID0+IHtcbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGUpO1xuICBpZiAoa2V5cy5sZW5ndGgpIHtcbiAgICBpZiAoXG4gICAgICBrZXlzLmluY2x1ZGVzKFwiY29kZVwiKSAmJlxuICAgICAga2V5cy5pbmNsdWRlcyhcIm1zZ1wiKSAmJlxuICAgICAga2V5cy5pbmNsdWRlcyhcIm9wZXJhdGlvblwiKVxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmV4cG9ydCB0eXBlIEFnZW50RXJyb3IgPVxuICB8IEFnZW50RXJyb3JCYXNlXG4gIHwgQWdlbnRFcnJvclR5cGVVbmtub3duXG4gIHwgQWdlbnRFcnJvckludmFsaWRUT01MXG4gIHwgQWdlbnRFcnJvckNvbnRlbnROb3RSdW5uaW5nO1xuXG5leHBvcnQgdHlwZSBBZ2VudEVycm9yVHlwZVVua25vd24gPSBBZ2VudEVycm9yQmFzZSAmIHtcbiAgZGF0YToge1xuICAgIFtrZXk6IHN0cmluZ106IHVua25vd247XG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgaXNBZ2VudEVycm9yQmFzZSA9IChlOiBhbnkpOiBlIGlzIEFnZW50RXJyb3JCYXNlID0+IHtcbiAgaWYgKGlzQWdlbnRFcnJvcihlKSkge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhlKTtcbiAgICBpZiAoa2V5cy5sZW5ndGgpIHtcbiAgICAgIGlmIChrZXlzLmluY2x1ZGVzKFwiZGF0YVwiKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLy8gVGhpcyByZXByZXNlbnRzIHRoZSBBZ2VudCBFcnJvcnMgd2UgaGF2ZW4ndCBiZWVuIGFibGUgdG9cbi8vIG5hcnJvdyBkb3duIHRvIGEgc3BlY2lmaWMgdHlwZS5cbmV4cG9ydCBjb25zdCBpc0FnZW50RXJyb3JUeXBlVW5rbm93biA9IChlOiBhbnkpOiBlIGlzIEFnZW50RXJyb3JUeXBlVW5rbm93biA9PiB7XG4gIHJldHVybiAoXG4gICAgaXNBZ2VudEVycm9yQmFzZShlKSAmJlxuICAgICFpc0FnZW50RXJyb3JJbnZhbGlkVE9NTChlKSAmJlxuICAgICFpc0FnZW50RXJyb3JEZXBsb3llZENvbnRlbnROb3RSdW5uaW5nKGUpXG4gICk7XG59O1xuXG5leHBvcnQgdHlwZSBBZ2VudEVycm9ySW52YWxpZFRPTUwgPSBBZ2VudEVycm9yQmFzZSAmIHtcbiAgZGF0YToge1xuICAgIHByb2JsZW06IHN0cmluZztcbiAgICBmaWxlOiBzdHJpbmc7XG4gICAgbGluZTogbnVtYmVyO1xuICAgIGNvbHVtbjogbnVtYmVyO1xuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGlzQWdlbnRFcnJvckludmFsaWRUT01MID0gKGU6IGFueSk6IGUgaXMgQWdlbnRFcnJvckludmFsaWRUT01MID0+IHtcbiAgcmV0dXJuIChcbiAgICBpc0FnZW50RXJyb3JCYXNlKGUpICYmXG4gICAgKGUuY29kZSA9PT0gXCJpbnZhbGlkVE9NTFwiIHx8IGUuY29kZSA9PT0gXCJ1bmtub3duVE9NTEtleVwiKVxuICApO1xufTtcblxuZXhwb3J0IHR5cGUgQWdlbnRFcnJvckNvbnRlbnROb3RSdW5uaW5nID0gQWdlbnRFcnJvckJhc2U7XG5cbmV4cG9ydCBjb25zdCBpc0FnZW50RXJyb3JEZXBsb3llZENvbnRlbnROb3RSdW5uaW5nID0gKFxuICBlOiBhbnksXG4pOiBlIGlzIEFnZW50RXJyb3JDb250ZW50Tm90UnVubmluZyA9PiB7XG4gIHJldHVybiBpc0FnZW50RXJyb3JCYXNlKGUpICYmIGUuY29kZSA9PT0gXCJkZXBsb3llZENvbnRlbnROb3RSdW5uaW5nXCI7XG59O1xuIiwiaW1wb3J0IHsgY29tcHV0ZWQsIHJlZiwgd2F0Y2ggfSBmcm9tIFwidnVlXCI7XG5pbXBvcnQgeyBkZWZpbmVTdG9yZSB9IGZyb20gXCJwaW5pYVwiO1xuaW1wb3J0IHsgdXNlSG9zdENvbmR1aXRTZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL3NyYy9Ib3N0Q29uZHVpdFNlcnZpY2VcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZVVSTCB9IGZyb20gXCIuLi8uLi8uLi8uLi9zcmMvdXRpbHMvdXJsXCI7XG5cbmltcG9ydCB7XG4gIENyZWRlbnRpYWwsXG4gIENvbnRlbnRSZWNvcmQsXG4gIFByZUNvbnRlbnRSZWNvcmQsXG4gIENvbmZpZ3VyYXRpb24sXG4gIENvbmZpZ3VyYXRpb25FcnJvcixcbiAgaXNQcmVDb250ZW50UmVjb3JkLFxufSBmcm9tIFwiLi4vLi4vLi4vLi4vc3JjL2FwaVwiO1xuaW1wb3J0IHsgaXNDb25maWd1cmF0aW9uRXJyb3IgfSBmcm9tIFwiLi4vLi4vLi4vLi4vc3JjL2FwaS90eXBlcy9jb25maWd1cmF0aW9uc1wiO1xuaW1wb3J0IHsgV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL3NyYy90eXBlcy9tZXNzYWdlcy93ZWJ2aWV3VG9Ib3N0TWVzc2FnZXNcIjtcbmltcG9ydCB7IFJQYWNrYWdlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL3NyYy9hcGkvdHlwZXMvcGFja2FnZXNcIjtcbmltcG9ydCB7IERlcGxveW1lbnRTZWxlY3RvciB9IGZyb20gXCIuLi8uLi8uLi8uLi9zcmMvdHlwZXMvc2hhcmVkXCI7XG5pbXBvcnQge1xuICBpc0FnZW50RXJyb3JJbnZhbGlkVE9NTCxcbiAgaXNBZ2VudEVycm9yVHlwZVVua25vd24sXG59IGZyb20gXCIuLi8uLi8uLi8uLi9zcmMvYXBpL3R5cGVzL2Vycm9yXCI7XG5cbmV4cG9ydCBjb25zdCB1c2VIb21lU3RvcmUgPSBkZWZpbmVTdG9yZShcImhvbWVcIiwgKCkgPT4ge1xuICBjb25zdCBwbGF0Zm9ybUZpbGVTZXBhcmF0b3IgPSByZWY8c3RyaW5nPihcIi9cIik7XG4gIGNvbnN0IHB1Ymxpc2hJblByb2dyZXNzID0gcmVmKGZhbHNlKTtcblxuICBjb25zdCBjb250ZW50UmVjb3JkcyA9IHJlZjwoQ29udGVudFJlY29yZCB8IFByZUNvbnRlbnRSZWNvcmQpW10+KFtdKTtcbiAgY29uc3QgY29uZmlndXJhdGlvbnMgPSByZWY8Q29uZmlndXJhdGlvbltdPihbXSk7XG4gIGNvbnN0IGNvbmZpZ3VyYXRpb25zSW5FcnJvciA9IHJlZjxDb25maWd1cmF0aW9uRXJyb3JbXT4oW10pO1xuICBjb25zdCBjcmVkZW50aWFscyA9IHJlZjxDcmVkZW50aWFsW10+KFtdKTtcbiAgY29uc3Qgc29ydGVkQ3JlZGVudGlhbHMgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgcmV0dXJuIGNyZWRlbnRpYWxzLnZhbHVlLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xuICB9KTtcblxuICBjb25zdCBzZXJ2ZXJTZWNyZXRzID0gcmVmPFNldDxzdHJpbmc+PihuZXcgU2V0KCkpO1xuICBjb25zdCBzZWNyZXRzID0gcmVmKG5ldyBNYXA8c3RyaW5nLCBzdHJpbmcgfCB1bmRlZmluZWQ+KCkpO1xuXG4gIGNvbnN0IGVudmlyb25tZW50ID0gY29tcHV0ZWQoKCk6IE1hcDxzdHJpbmcsIHN0cmluZz4gPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCk7XG4gICAgY29uc3QgY29uZmlnID0gc2VsZWN0ZWRDb25maWd1cmF0aW9uLnZhbHVlO1xuXG4gICAgaWYgKGNvbmZpZyA9PT0gdW5kZWZpbmVkIHx8IGlzQ29uZmlndXJhdGlvbkVycm9yKGNvbmZpZykpIHtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgT2JqZWN0LmVudHJpZXMoY29uZmlnLmNvbmZpZ3VyYXRpb24uZW52aXJvbm1lbnQgfHwge30pLmZvckVhY2goXG4gICAgICAoW25hbWUsIHZhbHVlXSkgPT4ge1xuICAgICAgICByZXN1bHQuc2V0KG5hbWUsIHZhbHVlKTtcbiAgICAgIH0sXG4gICAgKTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0pO1xuXG4gIGNvbnN0IGR1cGxpY2F0ZWRFbnZpcm9ubWVudFZhcmlhYmxlcyA9IGNvbXB1dGVkKCgpOiBzdHJpbmdbXSA9PiB7XG4gICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuICAgIHNlY3JldHMudmFsdWUuZm9yRWFjaCgoXywgbmFtZSkgPT4ge1xuICAgICAgaWYgKGVudmlyb25tZW50LnZhbHVlLmhhcyhuYW1lKSkge1xuICAgICAgICByZXN1bHQucHVzaChuYW1lKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9KTtcblxuICBjb25zdCBzaG93RGlzYWJsZWRPdmVybGF5ID0gcmVmKGZhbHNlKTtcblxuICBjb25zdCBzZWxlY3RlZENvbnRlbnRSZWNvcmQgPSByZWY8Q29udGVudFJlY29yZCB8IFByZUNvbnRlbnRSZWNvcmQ+KCk7XG5cbiAgLy8gQWx3YXlzIHVzZSB0aGUgY29udGVudCByZWNvcmQgYXMgdGhlIHNvdXJjZSBvZiB0cnV0aCBmb3IgdGhlXG4gIC8vIGNvbmZpZ3VyYXRpb24uIENhbiBiZSB1bmRlZmluZWQgaWYgYSBDb25maWd1cmF0aW9uIGlzIG5vdCBzcGVjaWZpZWQgb3JcbiAgLy8gZm91bmQuXG4gIGNvbnN0IHNlbGVjdGVkQ29uZmlndXJhdGlvbiA9IGNvbXB1dGVkKFxuICAgICgpOiBDb25maWd1cmF0aW9uIHwgQ29uZmlndXJhdGlvbkVycm9yIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGlmICghc2VsZWN0ZWRDb250ZW50UmVjb3JkLnZhbHVlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBjb25zdCB7IGNvbmZpZ3VyYXRpb25OYW1lLCBwcm9qZWN0RGlyIH0gPSBzZWxlY3RlZENvbnRlbnRSZWNvcmQudmFsdWU7XG4gICAgICBsZXQgcmVzdWx0O1xuICAgICAgcmVzdWx0ID0gY29uZmlndXJhdGlvbnMudmFsdWUuZmluZChcbiAgICAgICAgKGNmZykgPT5cbiAgICAgICAgICBjZmcuY29uZmlndXJhdGlvbk5hbWUgPT09IGNvbmZpZ3VyYXRpb25OYW1lICYmXG4gICAgICAgICAgY2ZnLnByb2plY3REaXIgPT09IHByb2plY3REaXIsXG4gICAgICApO1xuICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgcmVzdWx0ID0gY29uZmlndXJhdGlvbnNJbkVycm9yLnZhbHVlLmZpbmQoXG4gICAgICAgICAgKGNmZykgPT5cbiAgICAgICAgICAgIGNmZy5jb25maWd1cmF0aW9uTmFtZSA9PT0gY29uZmlndXJhdGlvbk5hbWUgJiZcbiAgICAgICAgICAgIGNmZy5wcm9qZWN0RGlyID09PSBwcm9qZWN0RGlyLFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuICApO1xuXG4gIHdhdGNoKFxuICAgIFtzZWxlY3RlZENvbnRlbnRSZWNvcmQsIHNlbGVjdGVkQ29uZmlndXJhdGlvbl0sXG4gICAgKFtjb250ZW50UmVjb3JkLCBjb25maWddLCBbcHJldkNvbnRlbnRSZWNvcmRdKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nIHwgdW5kZWZpbmVkPigpO1xuXG4gICAgICBpZiAoY29uZmlnID09PSB1bmRlZmluZWQgfHwgaXNDb25maWd1cmF0aW9uRXJyb3IoY29uZmlnKSkge1xuICAgICAgICBzZWNyZXRzLnZhbHVlID0gcmVzdWx0O1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlzU2FtZUNvbnRlbnRSZWNvcmQgPSBCb29sZWFuKFxuICAgICAgICBjb250ZW50UmVjb3JkPy5zYXZlTmFtZSA9PT0gcHJldkNvbnRlbnRSZWNvcmQ/LnNhdmVOYW1lLFxuICAgICAgKTtcblxuICAgICAgY29uZmlnLmNvbmZpZ3VyYXRpb24uc2VjcmV0cz8uZm9yRWFjaCgoc2VjcmV0KSA9PiB7XG4gICAgICAgIGlmIChpc1NhbWVDb250ZW50UmVjb3JkICYmIHNlY3JldHMudmFsdWU/LmhhcyhzZWNyZXQpKSB7XG4gICAgICAgICAgcmVzdWx0LnNldChzZWNyZXQsIHNlY3JldHMudmFsdWUuZ2V0KHNlY3JldCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdC5zZXQoc2VjcmV0LCB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgc2VjcmV0cy52YWx1ZSA9IHJlc3VsdDtcbiAgICB9LFxuICAgIHsgaW1tZWRpYXRlOiB0cnVlIH0sXG4gICk7XG5cbiAgLy8gQWx3YXlzIHVzZSB0aGUgY29udGVudCByZWNvcmQgYXMgdGhlIHNvdXJjZSBvZiB0cnV0aCBmb3IgdGhlXG4gIC8vIGNyZWRlbnRpYWwuIENhbiBiZSB1bmRlZmluZWQgaWYgYSBDcmVkZW50aWFsIGlzIG5vdCBzcGVjaWZpZWQgb3IgZm91bmQuXG4gIGNvbnN0IHNlcnZlckNyZWRlbnRpYWwgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgcmV0dXJuIGNyZWRlbnRpYWxzLnZhbHVlLmZpbmQoKGNmZykgPT4ge1xuICAgICAgY29uc3QgY3JlZGVudGlhbFVybCA9IGNmZy51cmwudG9Mb3dlckNhc2UoKTtcbiAgICAgIGNvbnN0IHJlY29yZFVybCA9IHNlbGVjdGVkQ29udGVudFJlY29yZC52YWx1ZT8uc2VydmVyVXJsLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoIXJlY29yZFVybCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gbm9ybWFsaXplVVJMKGNyZWRlbnRpYWxVcmwpID09PSBub3JtYWxpemVVUkwocmVjb3JkVXJsKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgY29uc3QgbGFzdENvbnRlbnRSZWNvcmRSZXN1bHQgPSByZWY8c3RyaW5nPigpO1xuICBjb25zdCBsYXN0Q29udGVudFJlY29yZE1zZyA9IHJlZjxzdHJpbmc+KCk7XG5cbiAgY29uc3QgcHl0aG9uUHJvamVjdCA9IHJlZjxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IHB5dGhvblBhY2thZ2VzID0gcmVmPHN0cmluZ1tdPigpO1xuICBjb25zdCBweXRob25QYWNrYWdlRmlsZSA9IHJlZjxzdHJpbmc+KCk7XG4gIGNvbnN0IHB5dGhvblBhY2thZ2VNYW5hZ2VyID0gcmVmPHN0cmluZz4oKTtcblxuICBjb25zdCByUHJvamVjdCA9IHJlZjxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IHJQYWNrYWdlcyA9IHJlZjxSUGFja2FnZVtdPigpO1xuICBjb25zdCByUGFja2FnZUZpbGUgPSByZWY8c3RyaW5nPigpO1xuICBjb25zdCByUGFja2FnZU1hbmFnZXIgPSByZWY8c3RyaW5nPigpO1xuICBjb25zdCByVmVyc2lvbiA9IHJlZjxzdHJpbmc+KCk7XG5cbiAgY29uc3QgaW5pdGlhbGl6aW5nUmVxdWVzdENvbXBsZXRlID0gcmVmPGJvb2xlYW4+KGZhbHNlKTtcblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgc2VsZWN0ZWQgY29udGVudFJlY29yZCB0byBvbmUgd2l0aCB0aGUgZ2l2ZW4gbmFtZS5cbiAgICogSWYgdGhlIG5hbWVkIGNvbnRlbnRSZWNvcmQgaXMgbm90IGZvdW5kLCB0aGUgc2VsZWN0ZWQgY29udGVudFJlY29yZCBpcyBzZXQgdG8gdW5kZWZpbmVkLlxuICAgKlxuICAgKiBAcGFyYW0gbmFtZSB0aGUgbmFtZSBvZiB0aGUgbmV3IGNvbnRlbnRSZWNvcmQgdG8gc2VsZWN0XG4gICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHNlbGVjdGVkIGNvbnRlbnRSZWNvcmQgd2FzIHRoZSBzYW1lLCBmYWxzZSBpZiBub3RcbiAgICovXG4gIGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdGVkQ29udGVudFJlY29yZEJ5U2VsZWN0b3IoXG4gICAgc2VsZWN0b3I/OiBEZXBsb3ltZW50U2VsZWN0b3IsXG4gICkge1xuICAgIGNvbnN0IHByZXZpb3VzU2VsZWN0ZWRDb250ZW50UmVjb3JkID0gc2VsZWN0ZWRDb250ZW50UmVjb3JkLnZhbHVlO1xuICAgIGNvbnN0IHByZXZpb3VzU2VsZWN0ZWRDb25maWcgPSBzZWxlY3RlZENvbmZpZ3VyYXRpb24udmFsdWU7XG5cbiAgICBjb25zdCBjb250ZW50UmVjb3JkID0gY29udGVudFJlY29yZHMudmFsdWUuZmluZChcbiAgICAgIChkKSA9PiBkLmRlcGxveW1lbnRQYXRoID09PSBzZWxlY3Rvcj8uZGVwbG95bWVudFBhdGgsXG4gICAgKTtcblxuICAgIHNlbGVjdGVkQ29udGVudFJlY29yZC52YWx1ZSA9IGNvbnRlbnRSZWNvcmQ7XG5cbiAgICByZXR1cm4gKFxuICAgICAgcHJldmlvdXNTZWxlY3RlZENvbnRlbnRSZWNvcmQgPT09IHNlbGVjdGVkQ29udGVudFJlY29yZC52YWx1ZSAmJlxuICAgICAgcHJldmlvdXNTZWxlY3RlZENvbmZpZyA9PT0gc2VsZWN0ZWRDb25maWd1cmF0aW9uLnZhbHVlXG4gICAgKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdGVkQ29udGVudFJlY29yZEJ5T2JqZWN0KFxuICAgIGNvbnRlbnRSZWNvcmQ6IENvbnRlbnRSZWNvcmQgfCBQcmVDb250ZW50UmVjb3JkLFxuICApIHtcbiAgICBjb250ZW50UmVjb3Jkcy52YWx1ZS5wdXNoKGNvbnRlbnRSZWNvcmQpO1xuICAgIHNlbGVjdGVkQ29udGVudFJlY29yZC52YWx1ZSA9IGNvbnRlbnRSZWNvcmQ7XG4gIH1cblxuICB3YXRjaChbc2VydmVyQ3JlZGVudGlhbF0sICgpID0+IHVwZGF0ZVNlbGVjdGlvbkNyZWRlbnRpYWxTdGF0dXMoKSk7XG5cbiAgY29uc3QgdXBkYXRlU2VsZWN0aW9uQ3JlZGVudGlhbFN0YXR1cyA9ICgpID0+IHtcbiAgICBjb25zdCBob3N0Q29uZHVpdCA9IHVzZUhvc3RDb25kdWl0U2VydmljZSgpO1xuICAgIGhvc3RDb25kdWl0LnNlbmRNc2coe1xuICAgICAga2luZDogV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLlVQREFURV9TRUxFQ1RJT05fQ1JFREVOVElBTF9TVEFURSxcbiAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgc3RhdGU6IHNlcnZlckNyZWRlbnRpYWwudmFsdWUgIT09IHVuZGVmaW5lZCA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfTtcblxuICB3YXRjaChbc2VsZWN0ZWRDb250ZW50UmVjb3JkXSwgKCkgPT5cbiAgICB1cGRhdGVTZWxlY3Rpb25Jc1ByZUNvbnRlbnRSZWNvcmRTdGF0ZSgpLFxuICApO1xuXG4gIGNvbnN0IHVwZGF0ZVNlbGVjdGlvbklzUHJlQ29udGVudFJlY29yZFN0YXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IGhvc3RDb25kdWl0ID0gdXNlSG9zdENvbmR1aXRTZXJ2aWNlKCk7XG4gICAgaG9zdENvbmR1aXQuc2VuZE1zZyh7XG4gICAgICBraW5kOiBXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuVVBEQVRFX1NFTEVDVElPTl9JU19QUkVfQ09OVEVOVF9SRUNPUkQsXG4gICAgICBjb250ZW50OiB7XG4gICAgICAgIHN0YXRlOiBpc1ByZUNvbnRlbnRSZWNvcmQoc2VsZWN0ZWRDb250ZW50UmVjb3JkLnZhbHVlKVxuICAgICAgICAgID8gXCJ0cnVlXCJcbiAgICAgICAgICA6IFwiZmFsc2VcIixcbiAgICAgIH0sXG4gICAgfSk7XG4gIH07XG5cbiAgd2F0Y2goW3NlbGVjdGVkQ29uZmlndXJhdGlvbl0sICgpID0+IHVwZGF0ZVBhcmVudFZpZXdTZWxlY3Rpb25TdGF0ZSgpKTtcblxuICBjb25zdCB1cGRhdGVQYXJlbnRWaWV3U2VsZWN0aW9uU3RhdGUgPSAoKSA9PiB7XG4gICAgY29uc3QgaG9zdENvbmR1aXQgPSB1c2VIb3N0Q29uZHVpdFNlcnZpY2UoKTtcbiAgICAvLyBza2lwIHNhdmluZyB0aGUgc2VsZWN0aW9uIGlmIHdlIGhhdmUgbm90IHlldFxuICAgIC8vIHNlbGVjdGVkIGEgY29udGVudCByZWNvcmQuIFRoaXMgaXMgcHJvYmFibHkgYW4gaW5pdFxuICAgIC8vIHNlcXVlbmNlLlxuICAgIGlmIChzZWxlY3RlZENvbnRlbnRSZWNvcmQudmFsdWUpIHtcbiAgICAgIGNvbnN0IHN0YXRlID0ge1xuICAgICAgICBkZXBsb3ltZW50TmFtZTogc2VsZWN0ZWRDb250ZW50UmVjb3JkLnZhbHVlLnNhdmVOYW1lLFxuICAgICAgICBwcm9qZWN0RGlyOiBzZWxlY3RlZENvbnRlbnRSZWNvcmQudmFsdWUucHJvamVjdERpcixcbiAgICAgICAgY29uZmlndXJhdGlvbk5hbWU6IHNlbGVjdGVkQ29uZmlndXJhdGlvbi52YWx1ZT8uY29uZmlndXJhdGlvbk5hbWUsXG4gICAgICAgIGRlcGxveW1lbnRQYXRoOiBzZWxlY3RlZENvbnRlbnRSZWNvcmQudmFsdWUuZGVwbG95bWVudFBhdGgsXG4gICAgICB9O1xuICAgICAgaG9zdENvbmR1aXQuc2VuZE1zZyh7XG4gICAgICAgIGtpbmQ6IFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5TQVZFX1NFTEVDVElPTl9TVEFURSxcbiAgICAgICAgY29udGVudDoge1xuICAgICAgICAgIHN0YXRlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHVwZGF0ZVB5dGhvblBhY2thZ2VzID0gKFxuICAgIGlzcHl0aG9uUHJvamVjdDogYm9vbGVhbixcbiAgICBwYWNrYWdlcz86IHN0cmluZ1tdLFxuICAgIGZpbGU/OiBzdHJpbmcsXG4gICAgbWFuYWdlcj86IHN0cmluZyxcbiAgKSA9PiB7XG4gICAgcHl0aG9uUHJvamVjdC52YWx1ZSA9IGlzcHl0aG9uUHJvamVjdDtcbiAgICBweXRob25QYWNrYWdlcy52YWx1ZSA9IHBhY2thZ2VzO1xuICAgIHB5dGhvblBhY2thZ2VGaWxlLnZhbHVlID0gZmlsZTtcbiAgICBweXRob25QYWNrYWdlTWFuYWdlci52YWx1ZSA9IG1hbmFnZXI7XG4gIH07XG5cbiAgY29uc3QgdXBkYXRlUlBhY2thZ2VzID0gKFxuICAgIGlzUlByb2plY3Q6IGJvb2xlYW4sXG4gICAgcGFja2FnZXM/OiBSUGFja2FnZVtdLFxuICAgIGZpbGU/OiBzdHJpbmcsXG4gICAgbWFuYWdlcj86IHN0cmluZyxcbiAgICB2ZXJzaW9uPzogc3RyaW5nLFxuICApID0+IHtcbiAgICByUHJvamVjdC52YWx1ZSA9IGlzUlByb2plY3Q7XG4gICAgclBhY2thZ2VzLnZhbHVlID0gcGFja2FnZXM7XG4gICAgclBhY2thZ2VGaWxlLnZhbHVlID0gZmlsZTtcbiAgICByUGFja2FnZU1hbmFnZXIudmFsdWUgPSBtYW5hZ2VyO1xuICAgIHJWZXJzaW9uLnZhbHVlID0gdmVyc2lvbjtcbiAgfTtcblxuICBjb25zdCBjbGVhclNlY3JldFZhbHVlcyA9ICgpID0+IHtcbiAgICBjb25zdCBjbGVhcmVkID0gbmV3IE1hcCgpO1xuXG4gICAgc2VjcmV0cy52YWx1ZS5mb3JFYWNoKChfLCBrZXkpID0+IHtcbiAgICAgIGNsZWFyZWQuc2V0KGtleSwgdW5kZWZpbmVkKTtcbiAgICB9KTtcblxuICAgIHNlY3JldHMudmFsdWUgPSBjbGVhcmVkO1xuICB9O1xuXG4gIGNvbnN0IHNlY3JldHNXaXRoVmFsdWVDb3VudCA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShzZWNyZXRzLnZhbHVlLnZhbHVlcygpKS5maWx0ZXIoKHYpID0+IHYgIT09IHVuZGVmaW5lZClcbiAgICAgIC5sZW5ndGg7XG4gIH0pO1xuXG4gIGNvbnN0IHB5dGhvbiA9IHtcbiAgICBhY3RpdmU6IHtcbiAgICAgIGlzRW1wdHlSZXF1aXJlbWVudHM6IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBweXRob25Qcm9qZWN0LnZhbHVlICYmXG4gICAgICAgICAgcHl0aG9uUGFja2FnZUZpbGUudmFsdWUgJiZcbiAgICAgICAgICBweXRob25QYWNrYWdlcy52YWx1ZSAmJlxuICAgICAgICAgIHB5dGhvblBhY2thZ2VzLnZhbHVlLmxlbmd0aCA9PT0gMFxuICAgICAgICApO1xuICAgICAgfSksXG4gICAgICBpc01pc3NpbmdSZXF1aXJlbWVudHM6IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIHB5dGhvblByb2plY3QudmFsdWUgJiYgIXB5dGhvblBhY2thZ2VGaWxlLnZhbHVlO1xuICAgICAgfSksXG4gICAgICBpc0FsZXJ0QWN0aXZlOiBjb21wdXRlZCgoKTogYm9vbGVhbiA9PiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgcHl0aG9uLmFjdGl2ZS5pc0VtcHR5UmVxdWlyZW1lbnRzLnZhbHVlIHx8XG4gICAgICAgICAgcHl0aG9uLmFjdGl2ZS5pc01pc3NpbmdSZXF1aXJlbWVudHMudmFsdWVcbiAgICAgICAgKTtcbiAgICAgIH0pLFxuICAgICAgaXNJblByb2plY3Q6IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIHB5dGhvblByb2plY3QudmFsdWU7XG4gICAgICB9KSxcbiAgICB9LFxuICB9O1xuXG4gIGNvbnN0IHIgPSB7XG4gICAgYWN0aXZlOiB7XG4gICAgICBpc01pc3NpbmdQYWNrYWdlRmlsZTogY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICByZXR1cm4gclByb2plY3QudmFsdWUgJiYgIXJQYWNrYWdlRmlsZS52YWx1ZTtcbiAgICAgIH0pLFxuXG4gICAgICBpc0VtcHR5UmVxdWlyZW1lbnRzOiBjb21wdXRlZCgoKSA9PiB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKFxuICAgICAgICAgIHJQcm9qZWN0LnZhbHVlICYmXG4gICAgICAgICAgICByUGFja2FnZUZpbGUudmFsdWUgJiZcbiAgICAgICAgICAgIHJQYWNrYWdlcy52YWx1ZSAmJlxuICAgICAgICAgICAgclBhY2thZ2VzLnZhbHVlLmxlbmd0aCA9PT0gMCxcbiAgICAgICAgKTtcbiAgICAgIH0pLFxuXG4gICAgICBpc0FsZXJ0QWN0aXZlOiBjb21wdXRlZCgoKTogYm9vbGVhbiA9PiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgci5hY3RpdmUuaXNNaXNzaW5nUGFja2FnZUZpbGUudmFsdWUgfHxcbiAgICAgICAgICByLmFjdGl2ZS5pc0VtcHR5UmVxdWlyZW1lbnRzLnZhbHVlXG4gICAgICAgICk7XG4gICAgICB9KSxcblxuICAgICAgaXNJblByb2plY3Q6IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIHJQcm9qZWN0LnZhbHVlO1xuICAgICAgfSksXG4gICAgfSxcbiAgfTtcblxuICBjb25zdCBjcmVkZW50aWFsID0ge1xuICAgIGlzQXZhaWxhYmxlOiBjb21wdXRlZCgoKSA9PiB7XG4gICAgICByZXR1cm4gQm9vbGVhbihzb3J0ZWRDcmVkZW50aWFscy52YWx1ZS5sZW5ndGgpO1xuICAgIH0pLFxuXG4gICAgYWN0aXZlOiB7XG4gICAgICBpc01pc3Npbmc6IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy5hY3RpdmUuaXNDcmVkZW50aWFsTWlzc2luZy52YWx1ZTtcbiAgICAgIH0pLFxuXG4gICAgICBpc0FsZXJ0QWN0aXZlOiBjb21wdXRlZCgoKTogYm9vbGVhbiA9PiB7XG4gICAgICAgIHJldHVybiBjcmVkZW50aWFsLmFjdGl2ZS5pc01pc3NpbmcudmFsdWU7XG4gICAgICB9KSxcbiAgICB9LFxuICB9O1xuXG4gIGNvbnN0IGFueUFjdGl2ZUFsZXJ0cyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgIWNvbmZpZy5hY3RpdmUuaXNBbGVydEFjdGl2ZS52YWx1ZSAmJlxuICAgICAgKGNyZWRlbnRpYWwuYWN0aXZlLmlzQWxlcnRBY3RpdmUudmFsdWUgfHxcbiAgICAgICAgci5hY3RpdmUuaXNBbGVydEFjdGl2ZS52YWx1ZSB8fFxuICAgICAgICBweXRob24uYWN0aXZlLmlzQWxlcnRBY3RpdmUudmFsdWUpXG4gICAgKTtcbiAgfSk7XG5cbiAgY29uc3QgY29uZmlnID0ge1xuICAgIGFjdGl2ZToge1xuICAgICAgaXNFbnRyeU1pc3Npbmc6IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4oXG4gICAgICAgICAgc2VsZWN0ZWRDb250ZW50UmVjb3JkLnZhbHVlICYmXG4gICAgICAgICAgICAhc2VsZWN0ZWRDb250ZW50UmVjb3JkLnZhbHVlLmNvbmZpZ3VyYXRpb25OYW1lLFxuICAgICAgICApO1xuICAgICAgfSksXG5cbiAgICAgIGlzTWlzc2luZzogY29tcHV0ZWQoKCk6IGJvb2xlYW4gPT4ge1xuICAgICAgICByZXR1cm4gQm9vbGVhbihcbiAgICAgICAgICBzZWxlY3RlZENvbnRlbnRSZWNvcmQudmFsdWUgJiZcbiAgICAgICAgICAgICFzZWxlY3RlZENvbmZpZ3VyYXRpb24udmFsdWUgJiZcbiAgICAgICAgICAgICFjb25maWcuYWN0aXZlLmlzSW5FcnJvckxpc3QoXG4gICAgICAgICAgICAgIHNlbGVjdGVkQ29udGVudFJlY29yZC52YWx1ZT8uY29uZmlndXJhdGlvbk5hbWUsXG4gICAgICAgICAgICApICYmXG4gICAgICAgICAgICAhY29uZmlnLmFjdGl2ZS5pc0VudHJ5TWlzc2luZy52YWx1ZSxcbiAgICAgICAgKTtcbiAgICAgIH0pLFxuXG4gICAgICBpc1RPTUxFcnJvcjogY29tcHV0ZWQoKCk6IGJvb2xlYW4gPT4ge1xuICAgICAgICByZXR1cm4gQm9vbGVhbihcbiAgICAgICAgICBzZWxlY3RlZENvbmZpZ3VyYXRpb24udmFsdWUgJiZcbiAgICAgICAgICAgIGlzQ29uZmlndXJhdGlvbkVycm9yKHNlbGVjdGVkQ29uZmlndXJhdGlvbi52YWx1ZSkgJiZcbiAgICAgICAgICAgIGlzQWdlbnRFcnJvckludmFsaWRUT01MKHNlbGVjdGVkQ29uZmlndXJhdGlvbi52YWx1ZS5lcnJvciksXG4gICAgICAgICk7XG4gICAgICB9KSxcblxuICAgICAgaXNVbmtub3duVHlwZTogY29tcHV0ZWQoKCk6IGJvb2xlYW4gPT4ge1xuICAgICAgICByZXR1cm4gQm9vbGVhbihcbiAgICAgICAgICBzZWxlY3RlZENvbmZpZ3VyYXRpb24udmFsdWUgJiZcbiAgICAgICAgICAgICFpc0NvbmZpZ3VyYXRpb25FcnJvcihzZWxlY3RlZENvbmZpZ3VyYXRpb24udmFsdWUpICYmXG4gICAgICAgICAgICBzZWxlY3RlZENvbmZpZ3VyYXRpb24udmFsdWUuY29uZmlndXJhdGlvbi50eXBlID09PSBcInVua25vd25cIixcbiAgICAgICAgKTtcbiAgICAgIH0pLFxuXG4gICAgICBpc1Vua25vd25FcnJvcjogY29tcHV0ZWQoKCk6IGJvb2xlYW4gPT4ge1xuICAgICAgICByZXR1cm4gQm9vbGVhbihcbiAgICAgICAgICBzZWxlY3RlZENvbmZpZ3VyYXRpb24udmFsdWUgJiZcbiAgICAgICAgICAgIGlzQ29uZmlndXJhdGlvbkVycm9yKHNlbGVjdGVkQ29uZmlndXJhdGlvbi52YWx1ZSkgJiZcbiAgICAgICAgICAgIGlzQWdlbnRFcnJvclR5cGVVbmtub3duKHNlbGVjdGVkQ29uZmlndXJhdGlvbi52YWx1ZS5lcnJvciksXG4gICAgICAgICk7XG4gICAgICB9KSxcblxuICAgICAgaXNJbkVycm9yTGlzdDogKGNvbmZpZ05hbWU/OiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgICAgICAgaWYgKCFjb25maWdOYW1lKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBCb29sZWFuKFxuICAgICAgICAgIGNvbmZpZ3VyYXRpb25zSW5FcnJvci52YWx1ZS5maW5kKFxuICAgICAgICAgICAgKGNvbmZpZykgPT5cbiAgICAgICAgICAgICAgY29uZmlnLmNvbmZpZ3VyYXRpb25OYW1lID09PVxuICAgICAgICAgICAgICBzZWxlY3RlZENvbnRlbnRSZWNvcmQudmFsdWU/LmNvbmZpZ3VyYXRpb25OYW1lLFxuICAgICAgICAgICksXG4gICAgICAgICk7XG4gICAgICB9LFxuXG4gICAgICBpc0NyZWRlbnRpYWxNaXNzaW5nOiBjb21wdXRlZCgoKTogYm9vbGVhbiA9PiB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKHNlbGVjdGVkQ29udGVudFJlY29yZC52YWx1ZSAmJiAhc2VydmVyQ3JlZGVudGlhbC52YWx1ZSk7XG4gICAgICB9KSxcblxuICAgICAgaXNBbGVydEFjdGl2ZTogY29tcHV0ZWQoKCk6IGJvb2xlYW4gPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGNvbmZpZy5hY3RpdmUuaXNFbnRyeU1pc3NpbmcudmFsdWUgfHxcbiAgICAgICAgICBjb25maWcuYWN0aXZlLmlzTWlzc2luZy52YWx1ZSB8fFxuICAgICAgICAgIGNvbmZpZy5hY3RpdmUuaXNUT01MRXJyb3IudmFsdWUgfHxcbiAgICAgICAgICBjb25maWcuYWN0aXZlLmlzVW5rbm93bkVycm9yLnZhbHVlIHx8XG4gICAgICAgICAgY29uZmlnLmFjdGl2ZS5pc0NyZWRlbnRpYWxNaXNzaW5nLnZhbHVlXG4gICAgICAgICk7XG4gICAgICB9KSxcbiAgICB9LFxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgcGxhdGZvcm1GaWxlU2VwYXJhdG9yLFxuICAgIHNob3dEaXNhYmxlZE92ZXJsYXksXG4gICAgcHVibGlzaEluUHJvZ3Jlc3MsXG4gICAgY29udGVudFJlY29yZHMsXG4gICAgY29uZmlndXJhdGlvbnMsXG4gICAgY29uZmlndXJhdGlvbnNJbkVycm9yLFxuICAgIGNyZWRlbnRpYWxzLFxuICAgIHNvcnRlZENyZWRlbnRpYWxzLFxuICAgIHNlcnZlclNlY3JldHMsXG4gICAgc2VjcmV0cyxcbiAgICBlbnZpcm9ubWVudCxcbiAgICBkdXBsaWNhdGVkRW52aXJvbm1lbnRWYXJpYWJsZXMsXG4gICAgc2VsZWN0ZWRDb250ZW50UmVjb3JkLFxuICAgIHNlbGVjdGVkQ29uZmlndXJhdGlvbixcbiAgICBzZXJ2ZXJDcmVkZW50aWFsLFxuICAgIGluaXRpYWxpemluZ1JlcXVlc3RDb21wbGV0ZSxcbiAgICBsYXN0Q29udGVudFJlY29yZFJlc3VsdCxcbiAgICBsYXN0Q29udGVudFJlY29yZE1zZyxcbiAgICBweXRob25Qcm9qZWN0LFxuICAgIHB5dGhvblBhY2thZ2VzLFxuICAgIHB5dGhvblBhY2thZ2VGaWxlLFxuICAgIHB5dGhvblBhY2thZ2VNYW5hZ2VyLFxuICAgIHJQcm9qZWN0LFxuICAgIHJQYWNrYWdlcyxcbiAgICByUGFja2FnZUZpbGUsXG4gICAgYW55QWN0aXZlQWxlcnRzLFxuICAgIHVwZGF0ZVNlbGVjdGVkQ29udGVudFJlY29yZEJ5U2VsZWN0b3IsXG4gICAgdXBkYXRlU2VsZWN0ZWRDb250ZW50UmVjb3JkQnlPYmplY3QsXG4gICAgdXBkYXRlUGFyZW50Vmlld1NlbGVjdGlvblN0YXRlLFxuICAgIHVwZGF0ZVB5dGhvblBhY2thZ2VzLFxuICAgIHVwZGF0ZVJQYWNrYWdlcyxcbiAgICBjbGVhclNlY3JldFZhbHVlcyxcbiAgICBzZWNyZXRzV2l0aFZhbHVlQ291bnQsXG4gICAgcHl0aG9uLFxuICAgIHIsXG4gICAgY29uZmlnLFxuICAgIGNyZWRlbnRpYWwsXG4gIH07XG59KTtcbiIsImltcG9ydCB7IENvbnRlbnRSZWNvcmRGaWxlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL3NyYy9hcGlcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGNhbkZpbGVCZUluY2x1ZGVkKGZpbGU6IENvbnRlbnRSZWNvcmRGaWxlKTogYm9vbGVhbiB7XG4gIHJldHVybiBCb29sZWFuKGZpbGUucmVhc29uPy5leGNsdWRlICYmIGZpbGUucmVhc29uPy5zb3VyY2UgIT09IFwiYnVpbHQtaW5cIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYW5GaWxlQmVFeGNsdWRlZChmaWxlOiBDb250ZW50UmVjb3JkRmlsZSk6IGJvb2xlYW4ge1xuICByZXR1cm4gQm9vbGVhbighZmlsZS5yZWFzb24/LmV4Y2x1ZGUpO1xufVxuXG5leHBvcnQgdHlwZSBGbGF0RmlsZSA9IE9taXQ8Q29udGVudFJlY29yZEZpbGUsIFwiZmlsZXNcIj4gJiB7XG4gIGluZGVudDogbnVtYmVyO1xuICBwYXJlbnQ/OiBzdHJpbmc7XG59O1xuXG4vKipcbiAqIEZsYXR0ZW5zIGEgQ29udGVudFJlY29yZEZpbGVbXSBpbnRvIGEgRmxhdEZpbGVbXSBhcnJheVxuICpcbiAqIEBwYXJhbSBmaWxlcyBUaGUgQ29udGVudFJlY29yZEZpbGVbXSB0byBmbGF0dGVuXG4gKiBAcGFyYW0gZXhwYW5kZWREaXJzIFRoZSBTZXQgb2YgZXhwYW5kZWQgZGlyZWN0b3JpZXNcbiAqIEBwYXJhbSBhcnIgVGhlIGFycmF5IHRvIHB1c2ggdGhlIGZsYXR0ZW5lZCBmaWxlcyB0b1xuICogQHBhcmFtIGluZGVudCBUaGUgY3VycmVudCBpbmRlbnQgbGV2ZWxcbiAqIEBwYXJhbSBwYXJlbnRGaWxlIFRoZSBwYXJlbnQgZmlsZSBvZiB0aGUgZGlyZWN0b3J5IGJlaW5nIGZsYXR0ZW5lZFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZsYXR0ZW5GaWxlcyhcbiAgZmlsZXM6IENvbnRlbnRSZWNvcmRGaWxlW10sXG4gIGV4cGFuZGVkRGlyczogU2V0PHN0cmluZz4sXG4gIGFyciA9IG5ldyBBcnJheTxGbGF0RmlsZT4oKSxcbiAgaW5kZW50ID0gMCxcbiAgcGFyZW50RmlsZT86IHN0cmluZyxcbik6IEZsYXRGaWxlW10ge1xuICBmaWxlcy5mb3JFYWNoKChmaWxlKSA9PiB7XG4gICAgY29uc3QgeyBmaWxlcywgLi4ucmVzdCB9ID0gZmlsZTtcbiAgICBjb25zdCBmbGF0RmlsZSA9IHtcbiAgICAgIC4uLnJlc3QsXG4gICAgICBpbmRlbnQ6IGluZGVudCxcbiAgICAgIHBhcmVudDogcGFyZW50RmlsZSxcbiAgICB9O1xuICAgIGFyci5wdXNoKGZsYXRGaWxlKTtcbiAgICBpZiAoZmlsZS5maWxlcy5sZW5ndGggPiAwICYmIGV4cGFuZGVkRGlycy5oYXMoZmlsZS5pZCkpIHtcbiAgICAgIGZsYXR0ZW5GaWxlcyhmaWxlLmZpbGVzLCBleHBhbmRlZERpcnMsIGFyciwgaW5kZW50ICsgMSwgZmlsZS5pZCk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gYXJyO1xufVxuIiwiaW1wb3J0IHsgZGVmaW5lU3RvcmUgfSBmcm9tIFwicGluaWFcIjtcbmltcG9ydCB7IGNvbXB1dGVkLCByZWYgfSBmcm9tIFwidnVlXCI7XG5cbmltcG9ydCB7IHVzZUhvbWVTdG9yZSB9IGZyb20gXCJzcmMvc3RvcmVzL2hvbWVcIjtcbmltcG9ydCB7IHVzZUhvc3RDb25kdWl0U2VydmljZSB9IGZyb20gXCJzcmMvSG9zdENvbmR1aXRTZXJ2aWNlXCI7XG5pbXBvcnQgeyBmbGF0dGVuRmlsZXMgfSBmcm9tIFwic3JjL3V0aWxzL2ZpbGVzXCI7XG5cbmltcG9ydCB7IENvbnRlbnRSZWNvcmRGaWxlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL3NyYy9hcGkvdHlwZXMvZmlsZXNcIjtcbmltcG9ydCB7IFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZSB9IGZyb20gXCIuLi8uLi8uLi8uLi9zcmMvdHlwZXMvbWVzc2FnZXMvd2Vidmlld1RvSG9zdE1lc3NhZ2VzXCI7XG5cbmV4cG9ydCBjb25zdCB1c2VGaWxlU3RvcmUgPSBkZWZpbmVTdG9yZShcImZpbGVcIiwgKCkgPT4ge1xuICBjb25zdCBob21lID0gdXNlSG9tZVN0b3JlKCk7XG4gIGNvbnN0IHsgc2VuZE1zZyB9ID0gdXNlSG9zdENvbmR1aXRTZXJ2aWNlKCk7XG5cbiAgY29uc3QgZmlsZXMgPSByZWY8Q29udGVudFJlY29yZEZpbGU+KCk7XG5cbiAgY29uc3QgZXhwYW5kZWREaXJzID0gcmVmPFNldDxzdHJpbmc+PihuZXcgU2V0KCkpO1xuXG4gIGNvbnN0IGZsYXRGaWxlcyA9IGNvbXB1dGVkKCgpID0+XG4gICAgZmxhdHRlbkZpbGVzKGZpbGVzLnZhbHVlPy5maWxlcyB8fCBbXSwgZXhwYW5kZWREaXJzLnZhbHVlKSxcbiAgKTtcblxuICBjb25zdCBsYXN0RGVwbG95ZWRGaWxlcyA9IGNvbXB1dGVkKCgpOiBTZXQ8c3RyaW5nPiA9PiB7XG4gICAgaWYgKGhvbWUuc2VsZWN0ZWRDb250ZW50UmVjb3JkPy5zdGF0ZSAhPT0gXCJuZXdcIikge1xuICAgICAgcmV0dXJuIG5ldyBTZXQoaG9tZS5zZWxlY3RlZENvbnRlbnRSZWNvcmQ/LmZpbGVzKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTZXQoKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gcmVmcmVzaEZpbGVzKCkge1xuICAgIHNlbmRNc2coeyBraW5kOiBXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuUkVRVUVTVF9GSUxFU19MSVNUUyB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluY2x1ZGVGaWxlKHsgaWQgfTogUGljazxDb250ZW50UmVjb3JkRmlsZSwgXCJpZFwiPikge1xuICAgIHNlbmRNc2coe1xuICAgICAga2luZDogV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLklOQ0xVREVfRklMRSxcbiAgICAgIGNvbnRlbnQ6IHsgcGF0aDogaWQgfSxcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV4Y2x1ZGVGaWxlKHsgaWQgfTogUGljazxDb250ZW50UmVjb3JkRmlsZSwgXCJpZFwiPikge1xuICAgIHNlbmRNc2coe1xuICAgICAga2luZDogV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLkVYQ0xVREVfRklMRSxcbiAgICAgIGNvbnRlbnQ6IHsgcGF0aDogaWQgfSxcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9wZW5GaWxlKHsgaWQgfTogUGljazxDb250ZW50UmVjb3JkRmlsZSwgXCJpZFwiPikge1xuICAgIHNlbmRNc2coe1xuICAgICAga2luZDogV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLlZTQ09ERV9PUEVOX1JFTEFUSVZFLFxuICAgICAgY29udGVudDogeyByZWxhdGl2ZVBhdGg6IGlkIH0sXG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBleHBhbmREaXIoeyBpZCB9OiBQaWNrPENvbnRlbnRSZWNvcmRGaWxlLCBcImlkXCI+KSB7XG4gICAgZXhwYW5kZWREaXJzLnZhbHVlLmFkZChpZCk7XG4gIH1cblxuICBmdW5jdGlvbiBjb2xsYXBzZURpcih7IGlkIH06IFBpY2s8Q29udGVudFJlY29yZEZpbGUsIFwiaWRcIj4pIHtcbiAgICBleHBhbmRlZERpcnMudmFsdWUuZGVsZXRlKGlkKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZmlsZXMsXG4gICAgZXhwYW5kZWREaXJzLFxuICAgIGxhc3REZXBsb3llZEZpbGVzLFxuICAgIGZsYXRGaWxlcyxcbiAgICByZWZyZXNoRmlsZXMsXG4gICAgaW5jbHVkZUZpbGUsXG4gICAgZXhjbHVkZUZpbGUsXG4gICAgb3BlbkZpbGUsXG4gICAgZXhwYW5kRGlyLFxuICAgIGNvbGxhcHNlRGlyLFxuICB9O1xufSk7XG4iLCIvLyBDb3B5cmlnaHQgKEMpIDIwMjQgYnkgUG9zaXQgU29mdHdhcmUsIFBCQy5cblxuaW1wb3J0IHsgV2Vidmlld0FwaSB9IGZyb20gXCJ2c2NvZGUtd2Vidmlld1wiO1xuXG5sZXQgYXBpSW5zdGFuY2U6IFdlYnZpZXdBcGk8dW5rbm93bj4gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbmV4cG9ydCBjb25zdCB2c2NvZGVBUEkgPSAoKTogV2Vidmlld0FwaTx1bmtub3duPiA9PiB7XG4gIGlmICghYXBpSW5zdGFuY2UpIHtcbiAgICBhcGlJbnN0YW5jZSA9IGFjcXVpcmVWc0NvZGVBcGkoKTtcbiAgfVxuICByZXR1cm4gYXBpSW5zdGFuY2U7XG59O1xuIiwiLy8gQ29weXJpZ2h0IChDKSAyMDI0IGJ5IFBvc2l0IFNvZnR3YXJlLCBQQkMuXG5cbmltcG9ydCB7IG9uTW91bnRlZCwgb25Vbm1vdW50ZWQgfSBmcm9tIFwidnVlXCI7XG5pbXBvcnQgeyBIb3N0Q29uZHVpdCB9IGZyb20gXCIuL3V0aWxzL2hvc3RDb25kdWl0XCI7XG5pbXBvcnQge1xuICBIb3N0VG9XZWJ2aWV3TWVzc2FnZSxcbiAgSG9zdFRvV2Vidmlld01lc3NhZ2VUeXBlLFxuICBQdWJsaXNoRmluaXNoRmFpbHVyZU1zZyxcbiAgUmVmcmVzaENvbmZpZ0RhdGFNc2csXG4gIFJlZnJlc2hDcmVkZW50aWFsRGF0YU1zZyxcbiAgUmVmcmVzaENvbnRlbnRSZWNvcmREYXRhTXNnLFxuICBVcGRhdGVDb250ZW50UmVjb3JkU2VsZWN0aW9uTXNnLFxuICBVcGRhdGVQeXRob25QYWNrYWdlcyxcbiAgVXBkYXRlUlBhY2thZ2VzLFxuICBSZWZyZXNoRmlsZXNNc2csXG4gIFNldFBhdGhTZXBhcmF0b3JNc2csXG4gIFVwZGF0ZVNlcnZlckVudmlyb25tZW50TXNnLFxufSBmcm9tIFwiLi4vLi4vLi4vc3JjL3R5cGVzL21lc3NhZ2VzL2hvc3RUb1dlYnZpZXdNZXNzYWdlc1wiO1xuaW1wb3J0IHtcbiAgV2Vidmlld1RvSG9zdE1lc3NhZ2UsXG4gIFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZSxcbn0gZnJvbSBcIi4uLy4uLy4uL3NyYy90eXBlcy9tZXNzYWdlcy93ZWJ2aWV3VG9Ib3N0TWVzc2FnZXNcIjtcbmltcG9ydCB7IHVzZUZpbGVTdG9yZSB9IGZyb20gXCJzcmMvc3RvcmVzL2ZpbGVcIjtcbmltcG9ydCB7IHVzZUhvbWVTdG9yZSB9IGZyb20gXCJzcmMvc3RvcmVzL2hvbWVcIjtcbmltcG9ydCB7IHZzY29kZUFQSSB9IGZyb20gXCJzcmMvdnNjb2RlXCI7XG5cbmxldCBob3N0Q29uZHVpdDogSG9zdENvbmR1aXQgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbmNvbnN0IHZzQ29kZUFwaSA9IHZzY29kZUFQSSgpO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlSG9zdENvbmR1aXRTZXJ2aWNlKCkge1xuICBpZiAoIWhvc3RDb25kdWl0KSB7XG4gICAgaG9zdENvbmR1aXQgPSBuZXcgSG9zdENvbmR1aXQod2luZG93LCB2c0NvZGVBcGkpO1xuICAgIG9uTW91bnRlZCgoKSA9PiBob3N0Q29uZHVpdCAmJiBob3N0Q29uZHVpdC5vbk1zZyhvbk1lc3NhZ2VGcm9tSG9zdCkpO1xuICAgIG9uVW5tb3VudGVkKCgpID0+IGhvc3RDb25kdWl0ICYmIGhvc3RDb25kdWl0LmRlYWN0aXZhdGUoKSk7XG4gICAgdXNlSG9tZVN0b3JlKCkuaW5pdGlhbGl6aW5nUmVxdWVzdENvbXBsZXRlID0gZmFsc2U7XG4gICAgaG9zdENvbmR1aXQuc2VuZE1zZyh7XG4gICAgICBraW5kOiBXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuSU5JVElBTElaSU5HLFxuICAgIH0pO1xuICB9XG5cbiAgY29uc3Qgc2VuZE1zZyA9IChtc2c6IFdlYnZpZXdUb0hvc3RNZXNzYWdlKSA9PiB7XG4gICAgaWYgKCFob3N0Q29uZHVpdCkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYEhvc3RDb25kaXV0U2VydmljZTo6c2VuZE1zZyBhdHRlbXB0ZWQgYWhlYWQgb2YgY2FsbCB0byB1c2VIb3N0Q29uZHVpdFNlcnZpY2UuIE1lc3NhZ2UgRHJvcHBlZDogJHtKU09OLnN0cmluZ2lmeShtc2cpfWAsXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zb2xlLmRlYnVnKGBIb3N0Q29uZHVpdFNlcnZpY2UgLSBTZW5kaW5nIE1zZzogJHtKU09OLnN0cmluZ2lmeShtc2cpfWApO1xuICAgIHJldHVybiBob3N0Q29uZHVpdC5zZW5kTXNnKG1zZyk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBzZW5kTXNnLFxuICB9O1xufVxuXG5jb25zdCBvbk1lc3NhZ2VGcm9tSG9zdCA9IChtc2c6IEhvc3RUb1dlYnZpZXdNZXNzYWdlKTogdm9pZCA9PiB7XG4gIGNvbnNvbGUuZGVidWcoYEhvc3RDb25kdWl0U2VydmljZSAtIFJlY2VpdmluZyBNc2c6ICR7SlNPTi5zdHJpbmdpZnkobXNnKX1gKTtcbiAgc3dpdGNoIChtc2cua2luZCkge1xuICAgIGNhc2UgSG9zdFRvV2Vidmlld01lc3NhZ2VUeXBlLklOSVRJQUxJWklOR19SRVFVRVNUX0NPTVBMRVRFOlxuICAgICAgcmV0dXJuIG9uSW5pdGlhbGl6aW5nUmVxdWVzdENvbXBsZXRlTXNnKCk7XG4gICAgY2FzZSBIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuUkVGUkVTSF9DT05URU5UUkVDT1JEX0RBVEE6XG4gICAgICByZXR1cm4gb25SZWZyZXNoQ29udGVudFJlY29yZERhdGFNc2cobXNnKTtcbiAgICBjYXNlIEhvc3RUb1dlYnZpZXdNZXNzYWdlVHlwZS5SRUZSRVNIX0NPTkZJR19EQVRBOlxuICAgICAgcmV0dXJuIG9uUmVmcmVzaENvbmZpZ0RhdGFNc2cobXNnKTtcbiAgICBjYXNlIEhvc3RUb1dlYnZpZXdNZXNzYWdlVHlwZS5SRUZSRVNIX0NSRURFTlRJQUxfREFUQTpcbiAgICAgIHJldHVybiBvblJlZnJlc2hDcmVkZW50aWFsRGF0YU1zZyhtc2cpO1xuICAgIGNhc2UgSG9zdFRvV2Vidmlld01lc3NhZ2VUeXBlLlBVQkxJU0hfU1RBUlQ6XG4gICAgICByZXR1cm4gb25QdWJsaXNoU3RhcnRNc2coKTtcbiAgICBjYXNlIEhvc3RUb1dlYnZpZXdNZXNzYWdlVHlwZS5QVUJMSVNIX0ZJTklTSF9TVUNDRVNTOlxuICAgICAgcmV0dXJuIG9uUHVibGlzaEZpbmlzaFN1Y2Nlc3NNc2coKTtcbiAgICBjYXNlIEhvc3RUb1dlYnZpZXdNZXNzYWdlVHlwZS5QVUJMSVNIX0ZJTklTSF9GQUlMVVJFOlxuICAgICAgcmV0dXJuIG9uUHVibGlzaEZpbmlzaEZhaWx1cmVNc2cobXNnKTtcbiAgICBjYXNlIEhvc3RUb1dlYnZpZXdNZXNzYWdlVHlwZS5VUERBVEVfQ09OVEVOVFJFQ09SRF9TRUxFQ1RJT046XG4gICAgICByZXR1cm4gb25VcGRhdGVDb250ZW50UmVjb3JkU2VsZWN0aW9uTXNnKG1zZyk7XG4gICAgY2FzZSBIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuU0FWRV9TRUxFQ1RJT046XG4gICAgICByZXR1cm4gb25TYXZlU2VsZWN0aW9uTXNnKCk7XG4gICAgY2FzZSBIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuUkVGUkVTSF9GSUxFUzpcbiAgICAgIHJldHVybiBvblJlZnJlc2hGaWxlc01zZyhtc2cpO1xuICAgIGNhc2UgSG9zdFRvV2Vidmlld01lc3NhZ2VUeXBlLlVQREFURV9QWVRIT05fUEFDS0FHRVM6XG4gICAgICByZXR1cm4gb25VcGRhdGVQeXRob25QYWNrYWdlcyhtc2cpO1xuICAgIGNhc2UgSG9zdFRvV2Vidmlld01lc3NhZ2VUeXBlLlVQREFURV9SX1BBQ0tBR0VTOlxuICAgICAgcmV0dXJuIG9uVXBkYXRlUlBhY2thZ2VzKG1zZyk7XG4gICAgY2FzZSBIb3N0VG9XZWJ2aWV3TWVzc2FnZVR5cGUuU0hPV19ESVNBQkxFX09WRVJMQVk6XG4gICAgICByZXR1cm4gb25TaG93RGlzYWJsZU92ZXJsYXlNc2coKTtcbiAgICBjYXNlIEhvc3RUb1dlYnZpZXdNZXNzYWdlVHlwZS5ISURFX0RJU0FCTEVfT1ZFUkxBWTpcbiAgICAgIHJldHVybiBvbkhpZGVEaXNhYmxlT3ZlcmxheU1zZygpO1xuICAgIGNhc2UgSG9zdFRvV2Vidmlld01lc3NhZ2VUeXBlLlNFVF9QQVRIX1NFUEFSQVRPUjpcbiAgICAgIHJldHVybiBvblNldFBhdGhTZXBhcmF0b3JNc2cobXNnKTtcbiAgICBjYXNlIEhvc3RUb1dlYnZpZXdNZXNzYWdlVHlwZS5VUERBVEVfU0VSVkVSX0VOVklST05NRU5UOlxuICAgICAgcmV0dXJuIG9uVXBkYXRlU2VydmVyRW52aXJvbm1lbnRNc2cobXNnKTtcbiAgICBkZWZhdWx0OlxuICAgICAgY29uc29sZS53YXJuKGB1bmV4cGVjdGVkIGNvbW1hbmQ6ICR7SlNPTi5zdHJpbmdpZnkobXNnKX1gKTtcbiAgfVxufTtcblxuY29uc3Qgb25TZXRQYXRoU2VwYXJhdG9yTXNnID0gKG1zZzogU2V0UGF0aFNlcGFyYXRvck1zZykgPT4ge1xuICB1c2VIb21lU3RvcmUoKS5wbGF0Zm9ybUZpbGVTZXBhcmF0b3IgPSBtc2cuY29udGVudC5zZXBhcmF0b3I7XG59O1xuXG5jb25zdCBvbkluaXRpYWxpemluZ1JlcXVlc3RDb21wbGV0ZU1zZyA9ICgpID0+IHtcbiAgdXNlSG9tZVN0b3JlKCkuaW5pdGlhbGl6aW5nUmVxdWVzdENvbXBsZXRlID0gdHJ1ZTtcbn07XG5cbmNvbnN0IG9uU2hvd0Rpc2FibGVPdmVybGF5TXNnID0gKCkgPT4ge1xuICB1c2VIb21lU3RvcmUoKS5zaG93RGlzYWJsZWRPdmVybGF5ID0gdHJ1ZTtcbn07XG5cbmNvbnN0IG9uSGlkZURpc2FibGVPdmVybGF5TXNnID0gKCkgPT4ge1xuICB1c2VIb21lU3RvcmUoKS5zaG93RGlzYWJsZWRPdmVybGF5ID0gZmFsc2U7XG59O1xuXG4vKipcbiAqIFdoZW4gZ2V0dGluZyBuZXcgY29udGVudFJlY29yZHMgc2V0IHRoZSBuZXcgbmFtZSBpZiBnaXZlbiBvbmUsXG4gKiB1bnNldCB0aGUgY29udGVudFJlY29yZCBpZiB0b2xkIHRvIGRvIHNvIHdpdGggbnVsbCxcbiAqIG9yIGtlZXAgdGhlIHNlbGVjdGVkIGNvbnRlbnRSZWNvcmQgd2l0aCB1cGRhdGVkIGRhdGEuXG4gKi9cbmNvbnN0IG9uUmVmcmVzaENvbnRlbnRSZWNvcmREYXRhTXNnID0gKG1zZzogUmVmcmVzaENvbnRlbnRSZWNvcmREYXRhTXNnKSA9PiB7XG4gIGNvbnN0IGhvbWUgPSB1c2VIb21lU3RvcmUoKTtcbiAgaG9tZS5jb250ZW50UmVjb3JkcyA9IG1zZy5jb250ZW50LmNvbnRlbnRSZWNvcmRzO1xuXG4gIGNvbnN0IHNlbGVjdG9yID0gbXNnLmNvbnRlbnQuZGVwbG95bWVudFNlbGVjdGVkO1xuICBpZiAoc2VsZWN0b3IgPT09IG51bGwpIHtcbiAgICBob21lLnNlbGVjdGVkQ29udGVudFJlY29yZCA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBJZiB0aGUgc2VsZWN0b3IgaXMgdW5kZWZpbmVkIGRvbid0IGNoYW5nZSB0aGUgc2VsZWN0aW9uLCBidXQgdXBkYXRlXG4gIC8vIHRoZSBkYXRhXG4gIGlmIChzZWxlY3RvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKGhvbWUuc2VsZWN0ZWRDb250ZW50UmVjb3JkKSB7XG4gICAgICBob21lLnVwZGF0ZVNlbGVjdGVkQ29udGVudFJlY29yZEJ5U2VsZWN0b3Ioe1xuICAgICAgICBkZXBsb3ltZW50UGF0aDogaG9tZS5zZWxlY3RlZENvbnRlbnRSZWNvcmQuZGVwbG95bWVudFBhdGgsXG4gICAgICAgIGRlcGxveW1lbnROYW1lOiBob21lLnNlbGVjdGVkQ29udGVudFJlY29yZC5kZXBsb3ltZW50TmFtZSxcbiAgICAgICAgcHJvamVjdERpcjogaG9tZS5zZWxlY3RlZENvbnRlbnRSZWNvcmQucHJvamVjdERpcixcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBBdCB0aGlzIHBvaW50IHdlIGhhdmUgYSBzZWxlY3Rvciwgc28gdXBkYXRlIHRoZSBzZWxlY3Rpb25cbiAgaG9tZS51cGRhdGVTZWxlY3RlZENvbnRlbnRSZWNvcmRCeVNlbGVjdG9yKHNlbGVjdG9yKTtcbn07XG5cbi8qKlxuICogV2hlbiBnZXR0aW5nIG5ldyBjb25maWd1cmF0aW9ucyBzZXQgdGhlIG5ldyBuYW1lIGlmIGdpdmVuIG9uZSxcbiAqIHVuc2V0IHRoZSBjb25maWd1cmF0aW9uIGlmIHRvbGQgdG8gZG8gc28gd2l0aCBudWxsLFxuICoga2VlcCB0aGUgc2VsZWN0ZWQgY29uZmlndXJhdGlvbiB3aXRoIHVwZGF0ZWQgZGF0YSxcbiAqIG9yIHNldCB0aGUgc2VsZWN0ZWQgY29uZmlndXJhdGlvbiB0byB0aGUgb25lIGZyb20gdGhlIHNlbGVjdGVkIGNvbnRlbnRSZWNvcmQuXG4gKi9cbmNvbnN0IG9uUmVmcmVzaENvbmZpZ0RhdGFNc2cgPSAobXNnOiBSZWZyZXNoQ29uZmlnRGF0YU1zZykgPT4ge1xuICBjb25zdCBob21lID0gdXNlSG9tZVN0b3JlKCk7XG4gIGhvbWUuY29uZmlndXJhdGlvbnMgPSBtc2cuY29udGVudC5jb25maWd1cmF0aW9ucztcbiAgaG9tZS5jb25maWd1cmF0aW9uc0luRXJyb3IgPSBtc2cuY29udGVudC5jb25maWd1cmF0aW9uc0luRXJyb3I7XG59O1xuXG4vKipcbiAqIFdoZW4gZ2V0dGluZyBuZXcgY3JlZGVudGlhbHMgc2V0IHRoZSBuZXcgbmFtZSBpZiBnaXZlbiBvbmUsXG4gKiB1bnNldCB0aGUgY3JlZGVudGlhbCBpZiB0b2xkIHRvIGRvIHNvIHdpdGggbnVsbCxcbiAqIG9yIGtlZXAgdGhlIHNlbGVjdGVkIGNyZWRlbnRpYWwgd2l0aCB1cGRhdGVkIGRhdGEuXG4gKi9cbmNvbnN0IG9uUmVmcmVzaENyZWRlbnRpYWxEYXRhTXNnID0gKG1zZzogUmVmcmVzaENyZWRlbnRpYWxEYXRhTXNnKSA9PiB7XG4gIGNvbnN0IGhvbWUgPSB1c2VIb21lU3RvcmUoKTtcbiAgaG9tZS5jcmVkZW50aWFscyA9IG1zZy5jb250ZW50LmNyZWRlbnRpYWxzO1xufTtcbmNvbnN0IG9uUHVibGlzaFN0YXJ0TXNnID0gKCkgPT4ge1xuICBjb25zdCBob21lID0gdXNlSG9tZVN0b3JlKCk7XG4gIGhvbWUucHVibGlzaEluUHJvZ3Jlc3MgPSB0cnVlO1xufTtcbmNvbnN0IG9uUHVibGlzaEZpbmlzaFN1Y2Nlc3NNc2cgPSAoKSA9PiB7XG4gIGNvbnN0IGhvbWUgPSB1c2VIb21lU3RvcmUoKTtcbiAgaG9tZS5jbGVhclNlY3JldFZhbHVlcygpO1xuICBob21lLnB1Ymxpc2hJblByb2dyZXNzID0gZmFsc2U7XG4gIGhvbWUubGFzdENvbnRlbnRSZWNvcmRSZXN1bHQgPSBgTGFzdCBEZXBsb3ltZW50IHdhcyBTdWNjZXNzZnVsYDtcbiAgaG9tZS5sYXN0Q29udGVudFJlY29yZE1zZyA9IFwiXCI7XG59O1xuY29uc3Qgb25QdWJsaXNoRmluaXNoRmFpbHVyZU1zZyA9IChtc2c6IFB1Ymxpc2hGaW5pc2hGYWlsdXJlTXNnKSA9PiB7XG4gIGNvbnN0IGhvbWUgPSB1c2VIb21lU3RvcmUoKTtcbiAgaG9tZS5wdWJsaXNoSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICBob21lLmxhc3RDb250ZW50UmVjb3JkUmVzdWx0ID0gYExhc3QgRGVwbG95bWVudCBGYWlsZWRgO1xuICBob21lLmxhc3RDb250ZW50UmVjb3JkTXNnID0gbXNnLmNvbnRlbnQuZGF0YS5tZXNzYWdlO1xufTtcbmNvbnN0IG9uVXBkYXRlQ29udGVudFJlY29yZFNlbGVjdGlvbk1zZyA9IChcbiAgbXNnOiBVcGRhdGVDb250ZW50UmVjb3JkU2VsZWN0aW9uTXNnLFxuKSA9PiB7XG4gIGNvbnN0IGhvbWUgPSB1c2VIb21lU3RvcmUoKTtcbiAgaG9tZS51cGRhdGVTZWxlY3RlZENvbnRlbnRSZWNvcmRCeU9iamVjdChtc2cuY29udGVudC5wcmVDb250ZW50UmVjb3JkKTtcbiAgaWYgKG1zZy5jb250ZW50LnNhdmVTZWxlY3Rpb24pIHtcbiAgICBob21lLnVwZGF0ZVBhcmVudFZpZXdTZWxlY3Rpb25TdGF0ZSgpO1xuICB9XG59O1xuXG5jb25zdCBvblNhdmVTZWxlY3Rpb25Nc2cgPSAoKSA9PiB7XG4gIGNvbnN0IGhvbWUgPSB1c2VIb21lU3RvcmUoKTtcbiAgaG9tZS51cGRhdGVQYXJlbnRWaWV3U2VsZWN0aW9uU3RhdGUoKTtcbn07XG5cbmNvbnN0IG9uUmVmcmVzaEZpbGVzTXNnID0gKG1zZzogUmVmcmVzaEZpbGVzTXNnKSA9PiB7XG4gIGNvbnN0IGZpbGVTdG9yZSA9IHVzZUZpbGVTdG9yZSgpO1xuXG4gIC8vIElmIHRoZSByb290IGZpbGUgaGFzIGNoYW5nZWQsIHJlc2V0IHRoZSBleHBhbmRlZCBkaXJlY3Rvcmllc1xuICBpZiAobXNnLmNvbnRlbnQuZmlsZXMuYWJzICE9PSBmaWxlU3RvcmUuZmlsZXM/LmFicykge1xuICAgIGZpbGVTdG9yZS5leHBhbmRlZERpcnMgPSBuZXcgU2V0KCk7XG4gIH1cblxuICBmaWxlU3RvcmUuZmlsZXMgPSBtc2cuY29udGVudC5maWxlcztcbn07XG5cbmNvbnN0IG9uVXBkYXRlUHl0aG9uUGFja2FnZXMgPSAobXNnOiBVcGRhdGVQeXRob25QYWNrYWdlcykgPT4ge1xuICBjb25zdCBob21lID0gdXNlSG9tZVN0b3JlKCk7XG4gIGhvbWUudXBkYXRlUHl0aG9uUGFja2FnZXMoXG4gICAgbXNnLmNvbnRlbnQucHl0aG9uUHJvamVjdCxcbiAgICBtc2cuY29udGVudC5wYWNrYWdlcyxcbiAgICBtc2cuY29udGVudC5maWxlLFxuICAgIG1zZy5jb250ZW50Lm1hbmFnZXIsXG4gICk7XG59O1xuXG5jb25zdCBvblVwZGF0ZVJQYWNrYWdlcyA9IChtc2c6IFVwZGF0ZVJQYWNrYWdlcykgPT4ge1xuICBjb25zdCBob21lID0gdXNlSG9tZVN0b3JlKCk7XG4gIGhvbWUudXBkYXRlUlBhY2thZ2VzKFxuICAgIG1zZy5jb250ZW50LnJQcm9qZWN0LFxuICAgIG1zZy5jb250ZW50LnBhY2thZ2VzLFxuICAgIG1zZy5jb250ZW50LmZpbGUsXG4gICAgbXNnLmNvbnRlbnQubWFuYWdlcixcbiAgICBtc2cuY29udGVudC5yVmVyc2lvbixcbiAgKTtcbn07XG5cbmNvbnN0IG9uVXBkYXRlU2VydmVyRW52aXJvbm1lbnRNc2cgPSAobXNnOiBVcGRhdGVTZXJ2ZXJFbnZpcm9ubWVudE1zZykgPT4ge1xuICBjb25zdCBob21lID0gdXNlSG9tZVN0b3JlKCk7XG4gIGhvbWUuc2VydmVyU2VjcmV0cyA9IG5ldyBTZXQobXNnLmNvbnRlbnQuZW52aXJvbm1lbnQpO1xufTtcbiIsIjwhLS0gQ29weXJpZ2h0IChDKSAyMDI0IGJ5IFBvc2l0IFNvZnR3YXJlLCBQQkMuIC0tPlxuXG48dGVtcGxhdGU+XG4gIDxkaXYgY2xhc3M9XCJxdWljay1waWNrLW9wdGlvblwiPlxuICAgIDxkaXYgY2xhc3M9XCJxdWljay1waWNrLXJvd1wiPlxuICAgICAgPGRpdiB2LWlmPVwiY29kaWNvblwiIGNsYXNzPVwicXVpY2stcGljay1pY29uIGNvZGljb25cIiA6Y2xhc3M9XCJjb2RpY29uXCIgLz5cbiAgICAgIDxkaXYgY2xhc3M9XCJxdWljay1waWNrLWxhYmVsLWNvbnRhaW5lclwiPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInF1aWNrLXBpY2stbGFiZWxcIj57eyBsYWJlbCB9fTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gdi1pZj1cImRlc2NyaXB0aW9uXCIgY2xhc3M9XCJxdWljay1waWNrLWRlc2NyaXB0aW9uXCI+XG4gICAgICAgICAge3sgZGVzY3JpcHRpb24gfX1cbiAgICAgICAgPC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiB2LWZvcj1cImRldGFpbCBpbiBkZXRhaWxzXCIgY2xhc3M9XCJxdWljay1waWNrLXJvd1wiPlxuICAgICAgPGRpdiB2LWlmPVwiaXNJY29uRGV0YWlsKGRldGFpbClcIiBjbGFzcz1cInF1aWNrLXBpY2stZGV0YWlsXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJxdWljay1waWNrLWljb24gY29kaWNvblwiIDpjbGFzcz1cImRldGFpbC5pY29uXCIgLz5cbiAgICAgICAgPHNwYW4+e3sgZGV0YWlsLnRleHQgfX08L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxzcGFuIHYtZWxzZSBjbGFzcz1cInF1aWNrLXBpY2stZGV0YWlsXCI+e3sgZGV0YWlsIH19PC9zcGFuPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQgc2V0dXAgbGFuZz1cInRzXCI+XG5leHBvcnQgdHlwZSBJY29uRGV0YWlsID0geyBpY29uOiBzdHJpbmc7IHRleHQ6IHN0cmluZyB9O1xuXG5jb25zdCBpc0ljb25EZXRhaWwgPSAoZGV0YWlsOiBzdHJpbmcgfCBJY29uRGV0YWlsKTogZGV0YWlsIGlzIEljb25EZXRhaWwgPT5cbiAgdHlwZW9mIGRldGFpbCA9PT0gXCJvYmplY3RcIiAmJiBcImljb25cIiBpbiBkZXRhaWwgJiYgXCJ0ZXh0XCIgaW4gZGV0YWlsO1xuXG5kZWZpbmVQcm9wczx7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBkZXRhaWxzOiBBcnJheTxzdHJpbmcgfCBJY29uRGV0YWlsPjtcbiAgY29kaWNvbj86IHN0cmluZztcbn0+KCk7XG48L3NjcmlwdD5cblxuPHN0eWxlIGxhbmc9XCJzY3NzXCIgc2NvcGVkPlxuLnF1aWNrLXBpY2stb3B0aW9uIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleDogMTtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG5cbiAgLnF1aWNrLXBpY2stcm93IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cbiAgICAmOm5vdCg6b25seS1jaGlsZCkge1xuICAgICAgLnF1aWNrLXBpY2stbGFiZWwtY29udGFpbmVyIHtcbiAgICAgICAgLnF1aWNrLXBpY2stbGFiZWwge1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgJjpub3QoOmxhc3QtY2hpbGQpIHtcbiAgICAgIC5xdWljay1waWNrLWRldGFpbCB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDJweDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAucXVpY2stcGljay1pY29uIHtcbiAgICAgIHZlcnRpY2FsLWFsaWduOiB0ZXh0LWJvdHRvbTtcbiAgICAgIHBhZGRpbmctcmlnaHQ6IDZweDtcbiAgICB9XG5cbiAgICAucXVpY2stcGljay1sYWJlbC1jb250YWluZXIge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXg6IDE7XG4gICAgICBhbGlnbi1pdGVtczogYmFzZWxpbmU7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG5cbiAgICAgIC5xdWljay1waWNrLWxhYmVsIHtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDIycHg7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBwcmU7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICBmbGV4OiAyIDE7XG4gICAgICAgIG1heC13aWR0aDogZml0LWNvbnRlbnQ7XG4gICAgICB9XG5cbiAgICAgIC5xdWljay1waWNrLWRlc2NyaXB0aW9uIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDAuNWVtO1xuICAgICAgICBvcGFjaXR5OiAwLjc7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBwcmU7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIGZsZXg6IDEgMTtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLnF1aWNrLXBpY2stZGV0YWlsIHtcbiAgICAgIGxpbmUtaGVpZ2h0OiBub3JtYWw7XG4gICAgICBvcGFjaXR5OiAwLjc7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICB3aGl0ZS1zcGFjZTogcHJlO1xuXG4gICAgICAucXVpY2stcGljay1pY29uIHtcbiAgICAgICAgZm9udC1zaXplOiB2YXIoLS12c2NvZGUtZm9udC1zaXplKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbjwvc3R5bGU+XG4iLCI8dGVtcGxhdGU+XG4gIDxkaXYgY2xhc3M9XCJtb25hY28tYWN0aW9uLWJhclwiPlxuICAgIDx1bFxuICAgICAgY2xhc3M9XCJhY3Rpb25zLWNvbnRhaW5lclwiXG4gICAgICByb2xlPVwidG9vbGJhclwiXG4gICAgICA6YXJpYS1sYWJlbD1cImAke3RpdGxlfSBhY3Rpb25zYFwiXG4gICAgPlxuICAgICAgPGxpXG4gICAgICAgIHYtZm9yPVwiYWN0aW9uIGluIGFjdGlvbnNcIlxuICAgICAgICBjbGFzcz1cImFjdGlvbi1pdGVtIG1lbnUtZW50cnlcIlxuICAgICAgICByb2xlPVwicHJlc2VudGF0aW9uXCJcbiAgICAgID5cbiAgICAgICAgPGFcbiAgICAgICAgICBjbGFzcz1cImFjdGlvbi1sYWJlbCBjb2RpY29uXCJcbiAgICAgICAgICA6Y2xhc3M9XCJhY3Rpb24uY29kaWNvblwiXG4gICAgICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICAgICAgOnRpdGxlPVwiYWN0aW9uLmxhYmVsXCJcbiAgICAgICAgICA6YXJpYS1sYWJlbD1cImFjdGlvbi5sYWJlbFwiXG4gICAgICAgICAgdGFiaW5kZXg9XCIwXCJcbiAgICAgICAgICBAY2xpY2suc3RvcD1cImFjdGlvbi5mblwiXG4gICAgICAgICAgQGtleWRvd24uZW50ZXI9XCJhY3Rpb24uZm5cIlxuICAgICAgICA+PC9hPlxuICAgICAgPC9saT5cblxuICAgICAgPGxpXG4gICAgICAgIHYtaWY9XCJjb250ZXh0TWVudVwiXG4gICAgICAgIHJlZj1cImNvbnRleHRNZW51QnV0dG9uXCJcbiAgICAgICAgOmRhdGEtdnNjb2RlLWNvbnRleHQ9XCJ2c2NvZGVDb250ZXh0XCJcbiAgICAgICAgY2xhc3M9XCJhY3Rpb24taXRlbSBtZW51LWVudHJ5XCJcbiAgICAgICAgcm9sZT1cInByZXNlbnRhdGlvblwiXG4gICAgICA+XG4gICAgICAgIDxhXG4gICAgICAgICAgY2xhc3M9XCJhY3Rpb24tbGFiZWwgY29kaWNvbiBjb2RpY29uLWVsbGlwc2lzXCJcbiAgICAgICAgICByb2xlPVwiYnV0dG9uXCJcbiAgICAgICAgICA6dGl0bGU9XCJgTW9yZSAke3RpdGxlfSBhY3Rpb25zYFwiXG4gICAgICAgICAgOmFyaWEtbGFiZWw9XCJgTW9yZSAke3RpdGxlfSBhY3Rpb25zYFwiXG4gICAgICAgICAgdGFiaW5kZXg9XCIwXCJcbiAgICAgICAgICBAY2xpY2suc3RvcC5wcmV2ZW50PVwib3BlbkNvbnRleHRNZW51XCJcbiAgICAgICAgICBAa2V5ZG93bi5lbnRlcj1cIm9wZW5Db250ZXh0TWVudVwiXG4gICAgICAgID5cbiAgICAgICAgPC9hPlxuICAgICAgPC9saT5cbiAgICA8L3VsPlxuICA8L2Rpdj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQgc2V0dXAgbGFuZz1cInRzXCI+XG5pbXBvcnQgeyBjb21wdXRlZCwgcmVmIH0gZnJvbSBcInZ1ZVwiO1xuXG5leHBvcnQgdHlwZSBBY3Rpb25CdXR0b24gPSB7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIGNvZGljb246IHN0cmluZztcbiAgZm46ICgpID0+IHZvaWQ7XG59O1xuXG5jb25zdCBwcm9wcyA9IGRlZmluZVByb3BzPHtcbiAgdGl0bGU6IHN0cmluZztcbiAgYWN0aW9ucz86IEFjdGlvbkJ1dHRvbltdO1xuICBjb250ZXh0TWVudT86IHN0cmluZztcbn0+KCk7XG5cbmNvbnN0IGNvbnRleHRNZW51QnV0dG9uID0gcmVmPEhUTUxBbmNob3JFbGVtZW50IHwgbnVsbD4obnVsbCk7XG5cbmNvbnN0IG9wZW5Db250ZXh0TWVudSA9IChlOiBFdmVudCkgPT4ge1xuICBpZiAoZSBpbnN0YW5jZW9mIFBvaW50ZXJFdmVudCkge1xuICAgIGUudGFyZ2V0Py5kaXNwYXRjaEV2ZW50KFxuICAgICAgbmV3IE1vdXNlRXZlbnQoXCJjb250ZXh0bWVudVwiLCB7XG4gICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgIGNsaWVudFg6IGUuY2xpZW50WCxcbiAgICAgICAgY2xpZW50WTogZS5jbGllbnRZLFxuICAgICAgfSksXG4gICAgKTtcbiAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgS2V5Ym9hcmRFdmVudCkge1xuICAgIGUudGFyZ2V0Py5kaXNwYXRjaEV2ZW50KFxuICAgICAgbmV3IE1vdXNlRXZlbnQoXCJjb250ZXh0bWVudVwiLCB7XG4gICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgIGNsaWVudFg6IGNvbnRleHRNZW51QnV0dG9uLnZhbHVlPy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS54LFxuICAgICAgICBjbGllbnRZOiBjb250ZXh0TWVudUJ1dHRvbi52YWx1ZT8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tLFxuICAgICAgfSksXG4gICAgKTtcbiAgfVxufTtcblxuY29uc3QgdnNjb2RlQ29udGV4dCA9IGNvbXB1dGVkKCgpID0+IHtcbiAgaWYgKCFwcm9wcy5jb250ZXh0TWVudSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgIHdlYnZpZXdTZWN0aW9uOiBwcm9wcy5jb250ZXh0TWVudSxcbiAgICBwcmV2ZW50RGVmYXVsdENvbnRleHRNZW51SXRlbXM6IHRydWUsXG4gIH0pO1xufSk7XG48L3NjcmlwdD5cblxuPHN0eWxlIGxhbmc9XCJzY3NzXCIgc2NvcGVkPlxuLm1vbmFjby1hY3Rpb24tYmFyIHtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgaGVpZ2h0OiAxMDAlO1xuXG4gIC5hY3Rpb25zLWNvbnRhaW5lciB7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBtYXJnaW46IDAgYXV0bztcbiAgICBwYWRkaW5nOiAwO1xuICAgIHdpZHRoOiAxMDAlO1xuXG4gICAgLmFjdGlvbi1pdGVtIHtcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuXG4gICAgICAuYWN0aW9uLWxhYmVsIHtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICBwYWRkaW5nOiAycHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgICB3aWR0aDogMjBweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXZzY29kZS1pY29uLWZvcmVncm91bmQpO1xuXG4gICAgICAgICY6Zm9jdXMge1xuICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgICAgb3V0bGluZS1jb2xvcjogdmFyKC0tdnNjb2RlLWZvY3VzQm9yZGVyKTtcbiAgICAgICAgICBvdXRsaW5lLW9mZnNldDogLTFweDtcbiAgICAgICAgICBvdXRsaW5lLXN0eWxlOiBzb2xpZDtcbiAgICAgICAgICBvdXRsaW5lLXdpZHRoOiAxcHg7XG4gICAgICAgIH1cblxuICAgICAgICAmOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS12c2NvZGUtdG9vbGJhci1ob3ZlckJhY2tncm91bmQpO1xuICAgICAgICAgIG91dGxpbmU6IDFweCBkYXNoZWQgdmFyKC0tdnNjb2RlLXRvb2xiYXItaG92ZXJPdXRsaW5lKTtcbiAgICAgICAgICBvdXRsaW5lLW9mZnNldDogLTFweDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuPC9zdHlsZT5cbiIsIjx0ZW1wbGF0ZT5cbiAgPHZzY29kZS1idXR0b25cbiAgICA6ZGF0YS1hdXRvbWF0aW9uPVwiYGRlcGxveS1idXR0b25gXCJcbiAgICA6ZGlzYWJsZWQ9XCIhaGF2ZVJlc291cmNlcyB8fCBob21lLnB1Ymxpc2hJblByb2dyZXNzXCJcbiAgICBAY2xpY2s9XCJkZXBsb3lcIlxuICA+XG4gICAgRGVwbG95IFlvdXIgUHJvamVjdFxuICA8L3ZzY29kZS1idXR0b24+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0IHNldHVwIGxhbmc9XCJ0c1wiPlxuaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tIFwidnVlXCI7XG5cbmltcG9ydCB7IHVzZUhvbWVTdG9yZSB9IGZyb20gXCJzcmMvc3RvcmVzL2hvbWVcIjtcbmltcG9ydCB7IHVzZUhvc3RDb25kdWl0U2VydmljZSB9IGZyb20gXCJzcmMvSG9zdENvbmR1aXRTZXJ2aWNlXCI7XG5cbmltcG9ydCB7IFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZSB9IGZyb20gXCIuLi8uLi8uLi8uLi9zcmMvdHlwZXMvbWVzc2FnZXMvd2Vidmlld1RvSG9zdE1lc3NhZ2VzXCI7XG5cbmNvbnN0IGhvbWUgPSB1c2VIb21lU3RvcmUoKTtcbmNvbnN0IGhvc3RDb25kdWl0ID0gdXNlSG9zdENvbmR1aXRTZXJ2aWNlKCk7XG5cbmNvbnN0IGhhdmVSZXNvdXJjZXMgPSBjb21wdXRlZChcbiAgKCkgPT5cbiAgICBCb29sZWFuKGhvbWUuc2VsZWN0ZWRDb250ZW50UmVjb3JkKSAmJlxuICAgIEJvb2xlYW4oaG9tZS5zZWxlY3RlZENvbmZpZ3VyYXRpb24pICYmXG4gICAgQm9vbGVhbihob21lLnNlcnZlckNyZWRlbnRpYWwpLFxuKTtcblxuY29uc3QgZGVwbG95ID0gKCkgPT4ge1xuICBpZiAoXG4gICAgIWhvbWUuc2VsZWN0ZWRDb250ZW50UmVjb3JkIHx8XG4gICAgIWhvbWUuc2VsZWN0ZWRDb25maWd1cmF0aW9uIHx8XG4gICAgIWhvbWUuc2VydmVyQ3JlZGVudGlhbFxuICApIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgXCJEZXBsb3lCdXR0b246OmRlcGxveSB0cnlpbmcgdG8gc2VuZCBtZXNzYWdlIHdpdGggdW5kZWZpbmVkIHZhbHVlcy4gQWN0aW9uIGlnbm9yZWQuXCIsXG4gICAgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBPbmx5IHNlbmQgdXAgc2VjcmV0cyB0aGF0IGhhdmUgdmFsdWVzXG4gIGNvbnN0IHNlY3JldHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgaG9tZS5zZWNyZXRzLmZvckVhY2goKHZhbHVlLCBuYW1lKSA9PiB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICBzZWNyZXRzW25hbWVdID0gdmFsdWU7XG4gICAgfVxuICB9KTtcblxuICBob3N0Q29uZHVpdC5zZW5kTXNnKHtcbiAgICBraW5kOiBXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuREVQTE9ZLFxuICAgIGNvbnRlbnQ6IHtcbiAgICAgIGRlcGxveW1lbnROYW1lOiBob21lLnNlbGVjdGVkQ29udGVudFJlY29yZC5zYXZlTmFtZSxcbiAgICAgIGNvbmZpZ3VyYXRpb25OYW1lOiBob21lLnNlbGVjdGVkQ29uZmlndXJhdGlvbi5jb25maWd1cmF0aW9uTmFtZSxcbiAgICAgIGNyZWRlbnRpYWxOYW1lOiBob21lLnNlcnZlckNyZWRlbnRpYWwubmFtZSxcbiAgICAgIHByb2plY3REaXI6IGhvbWUuc2VsZWN0ZWRDb250ZW50UmVjb3JkLnByb2plY3REaXIsXG4gICAgICBzZWNyZXRzOiBzZWNyZXRzLFxuICAgIH0sXG4gIH0pO1xufTtcbjwvc2NyaXB0PlxuIiwiPHRlbXBsYXRlPlxuICA8c3BhbiB2LWlmPVwiYWN0aXZlT3B0aW9uXCIgOmNsYXNzPVwiJGF0dHJzLmNsYXNzXCI+XG4gICAge3sgbWVzc2FnZVBhcnRzWzBdIH19XG4gICAgPGEgY2xhc3M9XCJ3ZWJ2aWV3LWxpbmtcIiByb2xlPVwiYnV0dG9uXCIgQGNsaWNrPVwib25DbGljaygpXCI+XG4gICAgICB7eyBhY3RpdmVPcHRpb24/LmFuY2hvclN0ciB9fVxuICAgIDwvYT5cbiAgICB7eyBtZXNzYWdlUGFydHNbMV0gfX1cbiAgPC9zcGFuPlxuICA8c3BhbiB2LWVsc2UgOmNsYXNzPVwiJGF0dHJzLmNsYXNzXCI+XG4gICAge3sgbWVzc2FnZSB9fVxuICA8L3NwYW4+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0IHNldHVwIGxhbmc9XCJ0c1wiPlxuaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tIFwidnVlXCI7XG5pbXBvcnQge1xuICBFcnJvck1lc3NhZ2VTcGxpdE9wdGlvbixcbiAgZmluZEVycm9yTWVzc2FnZVNwbGl0T3B0aW9uLFxufSBmcm9tIFwiLi4vLi4vLi4vLi4vc3JjL3V0aWxzL2Vycm9yRW5oYW5jZXJcIjtcblxuY29uc3QgZW1pdCA9IGRlZmluZUVtaXRzPHtcbiAgLy8gPGV2ZW50TmFtZT46IDxleHBlY3RlZCBhcmd1bWVudHM+XG4gIGNsaWNrOiBbc3BsaXRPcHRpb25JZDogbnVtYmVyXTsgLy8gbmFtZWQgdHVwbGUgc3ludGF4XG59PigpO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIHNwbGl0T3B0aW9uczogRXJyb3JNZXNzYWdlU3BsaXRPcHRpb25bXTtcbn1cblxuY29uc3QgcHJvcHMgPSBkZWZpbmVQcm9wczxQcm9wcz4oKTtcblxuY29uc3QgYWN0aXZlT3B0aW9uID0gY29tcHV0ZWQoKCkgPT4ge1xuICByZXR1cm4gZmluZEVycm9yTWVzc2FnZVNwbGl0T3B0aW9uKHByb3BzLm1lc3NhZ2UpO1xufSk7XG5cbmNvbnN0IG1lc3NhZ2VQYXJ0cyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgaWYgKGFjdGl2ZU9wdGlvbi52YWx1ZSAhPT0gdW5kZWZpbmVkICYmIGFjdGl2ZU9wdGlvbi52YWx1ZS5hbmNob3JTdHIpIHtcbiAgICBjb25zdCBwYXJ0cyA9IHByb3BzLm1lc3NhZ2Uuc3BsaXQoYWN0aXZlT3B0aW9uLnZhbHVlLmFuY2hvclN0cik7XG4gICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgcmV0dXJuIHBhcnRzO1xuICAgIH1cbiAgfVxuICByZXR1cm4gW1wiXCIsIFwiXCJdO1xufSk7XG5cbmNvbnN0IG9uQ2xpY2sgPSAoKSA9PiB7XG4gIGlmIChhY3RpdmVPcHRpb24udmFsdWUpIHtcbiAgICBlbWl0KFwiY2xpY2tcIiwgYWN0aXZlT3B0aW9uLnZhbHVlLmFjdGlvbklkKTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuIiwiPCEtLSBDb3B5cmlnaHQgKEMpIDIwMjQgYnkgUG9zaXQgU29mdHdhcmUsIFBCQy4gLS0+XG5cbjx0ZW1wbGF0ZT5cbiAgPGRpdlxuICAgIHYtaWY9XCJob21lLmluaXRpYWxpemluZ1JlcXVlc3RDb21wbGV0ZVwiXG4gICAgZGF0YS1hdXRvbWF0aW9uPVwicHVibGlzaGVyLWRlcGxveW1lbnQtc2VjdGlvblwiXG4gID5cbiAgICA8ZGl2IGNsYXNzPVwibGFiZWxcIj5cbiAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1zbSB0ZXh0LXNpZGViYXItc2VjdGlvbi1oZWFkZXJcIj5ERVBMT1lNRU5UPC9zcGFuPlxuXG4gICAgICA8QWN0aW9uVG9vbGJhclxuICAgICAgICB0aXRsZT1cIkRlcGxveW1lbnRcIlxuICAgICAgICA6YWN0aW9ucz1cInRvb2xiYXJBY3Rpb25zXCJcbiAgICAgICAgOmNvbnRleHQtbWVudT1cIlxuICAgICAgICAgIGhvbWUuc2VsZWN0ZWRDb250ZW50UmVjb3JkID8gY29udGV4dE1lbnVDb250ZXh0IDogdW5kZWZpbmVkXG4gICAgICAgIFwiXG4gICAgICAvPlxuICAgIDwvZGl2PlxuXG4gICAgPHRlbXBsYXRlIHYtaWY9XCJob21lLnNlbGVjdGVkQ29udGVudFJlY29yZFwiPlxuICAgICAgPGRpdiBjbGFzcz1cImRlcGxveW1lbnQtY29udHJvbFwiIHYtb249XCJ7IGNsaWNrOiBvblNlbGVjdERlcGxveW1lbnQgfVwiPlxuICAgICAgICA8UXVpY2tQaWNrSXRlbVxuICAgICAgICAgIDpsYWJlbD1cImRlcGxveW1lbnRUaXRsZVwiXG4gICAgICAgICAgOmRldGFpbHM9XCJkZXBsb3ltZW50RGV0YWlsc1wiXG4gICAgICAgICAgOnRpdGxlPVwidG9vbFRpcFRleHRcIlxuICAgICAgICAgIGRhdGEtYXV0b21hdGlvbj1cImVudHJ5cG9pbnQtbGFiZWxcIlxuICAgICAgICAvPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3M9XCJzZWxlY3QtaW5kaWNhdG9yIGNvZGljb24gY29kaWNvbi1jaGV2cm9uLXJpZ2h0XCJcbiAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDx0ZW1wbGF0ZSB2LWlmPVwiaG9tZS5kdXBsaWNhdGVkRW52aXJvbm1lbnRWYXJpYWJsZXMubGVuZ3RoXCI+XG4gICAgICAgIDxwPlxuICAgICAgICAgIDx0ZW1wbGF0ZSB2LWlmPVwiaG9tZS5kdXBsaWNhdGVkRW52aXJvbm1lbnRWYXJpYWJsZXMubGVuZ3RoID09PSAxXCI+XG4gICAgICAgICAgICBBIHZhcmlhYmxlIHdhcyBzZXQgYXMgYm90aCBhIHNlY3JldCBhbmQgZW52aXJvbm1lbnQgdmFyaWFibGUuIEl0XG4gICAgICAgICAgICBtdXN0IG9ubHkgYmUgc2V0IGFzIG9uZSBvciB0aGUgb3RoZXIuXG4gICAgICAgICAgPC90ZW1wbGF0ZT5cbiAgICAgICAgICA8dGVtcGxhdGUgdi1pZj1cImhvbWUuZHVwbGljYXRlZEVudmlyb25tZW50VmFyaWFibGVzLmxlbmd0aCA+IDFcIj5cbiAgICAgICAgICAgIFZhcmlhYmxlcyB3ZXJlIHNldCBhcyBib3RoIHNlY3JldHMgYW5kIGVudmlyb25tZW50IHZhcmlhYmxlcy4gVGhleVxuICAgICAgICAgICAgbXVzdCBvbmx5IGJlIHNldCBhcyBvbmUgb3IgdGhlIG90aGVyLlxuICAgICAgICAgIDwvdGVtcGxhdGU+XG4gICAgICAgICAgPGFcbiAgICAgICAgICAgIGNsYXNzPVwid2Vidmlldy1saW5rXCJcbiAgICAgICAgICAgIHJvbGU9XCJidXR0b25cIlxuICAgICAgICAgICAgQGNsaWNrPVwiXG4gICAgICAgICAgICAgIG9uRWRpdENvbmZpZ3VyYXRpb24oaG9tZS5zZWxlY3RlZENvbmZpZ3VyYXRpb24hLmNvbmZpZ3VyYXRpb25QYXRoKVxuICAgICAgICAgICAgXCJcbiAgICAgICAgICAgID5FZGl0IHRoZSBDb25maWd1cmF0aW9uPC9hXG4gICAgICAgICAgPi5cbiAgICAgICAgPC9wPlxuICAgICAgICA8cD57eyBob21lLmR1cGxpY2F0ZWRFbnZpcm9ubWVudFZhcmlhYmxlcy5qb2luKFwiLCBcIikgfX08L3A+XG4gICAgICAgIDxwPjwvcD5cbiAgICAgIDwvdGVtcGxhdGU+XG5cbiAgICAgIDxwIHYtaWY9XCJob21lLmNvbmZpZy5hY3RpdmUuaXNFbnRyeU1pc3NpbmdcIj5cbiAgICAgICAgTm8gQ29uZmlnIEVudHJ5IGluIERlcGxveW1lbnQgcmVjb3JkIC1cbiAgICAgICAge3sgaG9tZS5zZWxlY3RlZENvbnRlbnRSZWNvcmQ/LnNhdmVOYW1lIH19LlxuICAgICAgICA8YSBjbGFzcz1cIndlYnZpZXctbGlua1wiIHJvbGU9XCJidXR0b25cIiBAY2xpY2s9XCJzZWxlY3RDb25maWd1cmF0aW9uXCI+e3tcbiAgICAgICAgICBwcm9tcHRGb3JDb25maWdTZWxlY3Rpb25cbiAgICAgICAgfX08L2FcbiAgICAgICAgPi5cbiAgICAgIDwvcD5cbiAgICAgIDxwIHYtaWY9XCJob21lLmNvbmZpZy5hY3RpdmUuaXNNaXNzaW5nXCIgZGF0YS1hdXRvbWF0aW9uPVwibWlzc2luZy1jb25maWdcIj5cbiAgICAgICAgVGhlIGxhc3QgQ29uZmlndXJhdGlvbiB1c2VkIGZvciB0aGlzIERlcGxveW1lbnQgd2FzIG5vdCBmb3VuZC5cbiAgICAgICAgPGFcbiAgICAgICAgICBjbGFzcz1cIndlYnZpZXctbGlua1wiXG4gICAgICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICAgICAgQGNsaWNrPVwic2VsZWN0Q29uZmlndXJhdGlvblwiXG4gICAgICAgICAgZGF0YS1hdXRvbWF0aW9uPVwiY29uZmlnLWJ1dHRvblwiXG4gICAgICAgICAgPnt7IHByb21wdEZvckNvbmZpZ1NlbGVjdGlvbiB9fTwvYVxuICAgICAgICA+LlxuICAgICAgPC9wPlxuICAgICAgPHAgdi1pZj1cImhvbWUuY29uZmlnLmFjdGl2ZS5pc1RPTUxFcnJvclwiIGRhdGEtYXV0b21hdGlvbj1cImVkaXQtY29uZmlnXCI+XG4gICAgICAgIFRoZSBzZWxlY3RlZCBDb25maWd1cmF0aW9uIGhhcyBhIHNjaGVtYSBlcnJvclxuICAgICAgICB7eyBnZXRBY3RpdmVDb25maWdUT01MRXJyb3JEZXRhaWxzIH19LlxuICAgICAgICA8YVxuICAgICAgICAgIGNsYXNzPVwid2Vidmlldy1saW5rXCJcbiAgICAgICAgICByb2xlPVwiYnV0dG9uXCJcbiAgICAgICAgICBAY2xpY2s9XCJvbkVkaXRDb25maWd1cmF0aW9uV2l0aFRPTUxFcnJvcigpXCJcbiAgICAgICAgICBkYXRhLWF1dG9tYXRpb249XCJlZGl0LWNvbmZpZy1idXR0b25cIlxuICAgICAgICAgID5FZGl0IHRoZSBDb25maWd1cmF0aW9uPC9hXG4gICAgICAgID4uXG4gICAgICA8L3A+XG5cbiAgICAgIDxwIHYtaWY9XCJob21lLmNvbmZpZy5hY3RpdmUuaXNVbmtub3duVHlwZVwiPlxuICAgICAgICBQbGVhc2Ugc2V0IHRoZSBmcmFtZXdvcmsgeW91IGFyZSB1c2luZywgZm9yIGV4YW1wbGVcbiAgICAgICAgPGNvZGU+dHlwZSA9ICdweXRob24tc2hpbnknPC9jb2RlPi5cbiAgICAgICAgPGFcbiAgICAgICAgICBjbGFzcz1cIndlYnZpZXctbGlua1wiXG4gICAgICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICAgICAgQGNsaWNrPVwiXG4gICAgICAgICAgICBvbkVkaXRDb25maWd1cmF0aW9uKGhvbWUuc2VsZWN0ZWRDb25maWd1cmF0aW9uIS5jb25maWd1cmF0aW9uUGF0aClcbiAgICAgICAgICBcIlxuICAgICAgICAgID5FZGl0IHRoZSBDb25maWd1cmF0aW9uPC9hXG4gICAgICAgID4uXG4gICAgICA8L3A+XG5cbiAgICAgIDxwIHYtaWY9XCJob21lLmNvbmZpZy5hY3RpdmUuaXNVbmtub3duRXJyb3JcIj5cbiAgICAgICAgVGhlIHNlbGVjdGVkIENvbmZpZ3VyYXRpb24gaGFzIGFuIGVycm9yLlxuICAgICAgICA8YVxuICAgICAgICAgIGNsYXNzPVwid2Vidmlldy1saW5rXCJcbiAgICAgICAgICByb2xlPVwiYnV0dG9uXCJcbiAgICAgICAgICBAY2xpY2s9XCJcbiAgICAgICAgICAgIG9uRWRpdENvbmZpZ3VyYXRpb24oaG9tZS5zZWxlY3RlZENvbmZpZ3VyYXRpb24hLmNvbmZpZ3VyYXRpb25QYXRoKVxuICAgICAgICAgIFwiXG4gICAgICAgICAgPkVkaXQgdGhlIENvbmZpZ3VyYXRpb248L2FcbiAgICAgICAgPi5cbiAgICAgIDwvcD5cblxuICAgICAgPHBcbiAgICAgICAgdi1pZj1cImhvbWUuY29uZmlnLmFjdGl2ZS5pc0NyZWRlbnRpYWxNaXNzaW5nXCJcbiAgICAgICAgZGF0YS1hdXRvbWF0aW9uPVwibWlzc2luZy1jcmVkc1wiXG4gICAgICA+XG4gICAgICAgIEEgQ3JlZGVudGlhbCBmb3IgdGhlIERlcGxveW1lbnQncyBzZXJ2ZXIgVVJMIHdhcyBub3QgZm91bmQuXG4gICAgICAgIDxhXG4gICAgICAgICAgY2xhc3M9XCJ3ZWJ2aWV3LWxpbmtcIlxuICAgICAgICAgIHJvbGU9XCJidXR0b25cIlxuICAgICAgICAgIEBjbGljaz1cIm5ld0NyZWRlbnRpYWxcIlxuICAgICAgICAgIGRhdGEtYXV0b21hdGlvbj1cImNyZWRzLWJ1dHRvblwiXG4gICAgICAgICAgPkNyZWF0ZSBhIG5ldyBDcmVkZW50aWFsPC9hXG4gICAgICAgID4uXG4gICAgICA8L3A+XG5cbiAgICAgIDxEZXBsb3lCdXR0b24gY2xhc3M9XCJ3LWZ1bGxcIiAvPlxuICAgIDwvdGVtcGxhdGU+XG4gICAgPGRpdiB2LWVsc2UgY2xhc3M9XCJkZXBsb3ltZW50LWNvbnRyb2xcIiB2LW9uPVwieyBjbGljazogb25TZWxlY3REZXBsb3ltZW50IH1cIj5cbiAgICAgIDxRdWlja1BpY2tJdGVtXG4gICAgICAgIGxhYmVsPVwiU2VsZWN0Li4uXCJcbiAgICAgICAgOmRldGFpbHM9XCJbJyhuZXcgb3IgZXhpc3RpbmcpJ11cIlxuICAgICAgICBkYXRhLWF1dG9tYXRpb249XCJzZWxlY3QtZGVwbG95bWVudFwiXG4gICAgICAvPlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzcz1cInNlbGVjdC1pbmRpY2F0b3IgY29kaWNvbiBjb2RpY29uLWNoZXZyb24tZG93blwiXG4gICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgICAvPlxuICAgIDwvZGl2PlxuICAgIDx0ZW1wbGF0ZVxuICAgICAgdi1pZj1cImhvbWUuc2VsZWN0ZWRDb250ZW50UmVjb3JkICYmIGhvbWUuc2VsZWN0ZWRDb250ZW50UmVjb3JkLnNlcnZlclR5cGVcIlxuICAgID5cbiAgICAgIDx2c2NvZGUtZGl2aWRlciBjbGFzcz1cImhvbWUtdmlldy1kaXZpZGVyXCIgLz5cblxuICAgICAgPGRpdlxuICAgICAgICB2LWlmPVwiaG9tZS5wdWJsaXNoSW5Qcm9ncmVzc1wiXG4gICAgICAgIGNsYXNzPVwiZGVwbG95bWVudC1pbi1wcm9ncmVzcy1jb250YWluZXJcIlxuICAgICAgPlxuICAgICAgICA8dnNjb2RlLXByb2dyZXNzLXJpbmcgY2xhc3M9XCJwcm9ncmVzcy1yaW5nXCIgLz5cbiAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgtZ3Jvd1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXBsb3ltZW50LXN1bW1hcnktY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy1kZXNjXCI+XG4gICAgICAgICAgICAgICAgPGg0XG4gICAgICAgICAgICAgICAgICBkYXRhLWF1dG9tYXRpb249XCJkZXBsb3ltZW50LXByb2dyZXNzXCJcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZGVwbG95bWVudC1zdW1tYXJ5LXRpdGxlXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBEZXBsb3ltZW50IGluIFByb2dyZXNzLi4uXG4gICAgICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxBY3Rpb25Ub29sYmFyXG4gICAgICAgICAgICAgIHRpdGxlPVwiTG9nc1wiXG4gICAgICAgICAgICAgIDphY3Rpb25zPVwiW11cIlxuICAgICAgICAgICAgICA6Y29udGV4dC1tZW51PVwiY29udGV4dE1lbnVWU0NvZGVDb250ZXh0XCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPHAgY2xhc3M9XCJwcm9ncmVzcy1sb2ctYW5jaG9yXCI+XG4gICAgICAgICAgICA8YSBjbGFzcz1cIndlYnZpZXctbGlua1wiIHJvbGU9XCJidXR0b25cIiBAY2xpY2s9XCJvblZpZXdQdWJsaXNoaW5nTG9nXCI+XG4gICAgICAgICAgICAgIFZpZXcgTG9nXG4gICAgICAgICAgICA8L2E+XG4gICAgICAgICAgPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiB2LWVsc2U+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzcz1cImRlcGxveW1lbnQtc3VtbWFyeS1jb250YWluZXJcIlxuICAgICAgICAgIGRhdGEtYXV0b21hdGlvbj1cImRlcGxveS1zdGF0dXNcIlxuICAgICAgICA+XG4gICAgICAgICAgPGg0IGNsYXNzPVwiZGVwbG95bWVudC1zdW1tYXJ5LXRpdGxlXCI+XG4gICAgICAgICAgICB7eyBsYXN0U3RhdHVzRGVzY3JpcHRpb24gfX1cbiAgICAgICAgICA8L2g0PlxuICAgICAgICAgIDxBY3Rpb25Ub29sYmFyXG4gICAgICAgICAgICB0aXRsZT1cIkxvZ3NcIlxuICAgICAgICAgICAgOmFjdGlvbnM9XCJbXVwiXG4gICAgICAgICAgICA6Y29udGV4dC1tZW51PVwiY29udGV4dE1lbnVWU0NvZGVDb250ZXh0XCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPHRlbXBsYXRlIHYtaWY9XCJpc0Rpc21pc3NlZENvbnRlbnRSZWNvcmRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF0ZS10aW1lXCI+XG4gICAgICAgICAgICB7eyBmb3JtYXREYXRlU3RyaW5nKGhvbWUuc2VsZWN0ZWRDb250ZW50UmVjb3JkLmRpc21pc3NlZEF0KSB9fVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L3RlbXBsYXRlPlxuICAgICAgICA8dGVtcGxhdGUgdi1lbHNlPlxuICAgICAgICAgIDxkaXYgdi1pZj1cImlzUHJlQ29udGVudFJlY29yZFdpdGhvdXRJRFwiPlxuICAgICAgICAgICAgSXMgdGhpcyBhbHJlYWR5IGRlcGxveWVkIHRvIGEgQ29ubmVjdCBzZXJ2ZXI/IFlvdSBjYW5cbiAgICAgICAgICAgIDxhIGNsYXNzPVwid2Vidmlldy1saW5rXCIgcm9sZT1cImJ1dHRvblwiIEBjbGljaz1cIm9uQXNzb2NpYXRlRGVwbG95bWVudFwiXG4gICAgICAgICAgICAgID51cGRhdGUgdGhhdCBwcmV2aW91cyBkZXBsb3ltZW50PC9hXG4gICAgICAgICAgICA+LlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgdi1pZj1cImlzUHJlQ29udGVudFJlY29yZFdpdGhJRFwiPlxuICAgICAgICAgICAgPGEgY2xhc3M9XCJ3ZWJ2aWV3LWxpbmtcIiByb2xlPVwiYnV0dG9uXCIgQGNsaWNrPVwidmlld0NvbnRlbnRcIlxuICAgICAgICAgICAgICA+VGhpcyBkZXBsb3ltZW50PC9hXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICB3aWxsIGJlIHVwZGF0ZWQgd2hlbiBkZXBsb3llZC5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICB2LWlmPVwiIWlzUHJlQ29udGVudFJlY29yZChob21lLnNlbGVjdGVkQ29udGVudFJlY29yZClcIlxuICAgICAgICAgICAgY2xhc3M9XCJkYXRlLXRpbWVcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIHt7IGZvcm1hdERhdGVTdHJpbmcoaG9tZS5zZWxlY3RlZENvbnRlbnRSZWNvcmQuZGVwbG95ZWRBdCkgfX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICB2LWlmPVwiaG9tZS5zZWxlY3RlZENvbnRlbnRSZWNvcmQuZGVwbG95bWVudEVycm9yXCJcbiAgICAgICAgICAgIGNsYXNzPVwibGFzdC1kZXBsb3ltZW50LWRldGFpbHMgbGFzdC1kZXBsb3ltZW50LWVycm9yXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWxlcnQtYm9yZGVyIGJvcmRlci13YXJuaW5nIHRleHQtd2FybmluZ1wiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNvZGljb24gY29kaWNvbi1hbGVydFwiIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxUZXh0U3RyaW5nV2l0aEFuY2hvclxuICAgICAgICAgICAgICA6bWVzc2FnZT1cImhvbWUuc2VsZWN0ZWRDb250ZW50UmVjb3JkPy5kZXBsb3ltZW50RXJyb3I/Lm1zZ1wiXG4gICAgICAgICAgICAgIDpzcGxpdE9wdGlvbnM9XCJFcnJvck1lc3NhZ2VTcGxpdE9wdGlvbnNcIlxuICAgICAgICAgICAgICBjbGFzcz1cImVycm9yLW1lc3NhZ2UgdGV4dC1kZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgIEBjbGljaz1cIm9uRXJyb3JNZXNzYWdlQW5jaG9yQ2xpY2tcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC90ZW1wbGF0ZT5cbiAgICAgICAgPGRpdiB2LWlmPVwic2hvd0NvbnRlbnRCdXR0b25cIiBjbGFzcz1cImxhc3QtZGVwbG95bWVudC1kZXRhaWxzXCI+XG4gICAgICAgICAgPHZzY29kZS1idXR0b25cbiAgICAgICAgICAgIGFwcGVhcmFuY2U9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgICAgQGNsaWNrPVwidmlld0NvbnRlbnRcIlxuICAgICAgICAgICAgY2xhc3M9XCJ3LWZ1bGxcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIHt7IGRlcGxveWVkQ29udGVudEJ1dHRvbkxhYmVsIH19XG4gICAgICAgICAgPC92c2NvZGUtYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvdGVtcGxhdGU+XG4gIDwvZGl2PlxuICA8ZGl2IHYtZWxzZT5cbiAgICA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtY29udGFpbmVyXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtZGVzY1wiPlxuICAgICAgICA8ZGl2PlNjYW5uaW5nIGRpcmVjdG9yaWVzLi4uPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0IHNldHVwIGxhbmc9XCJ0c1wiPlxuaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tIFwidnVlXCI7XG5pbXBvcnQge1xuICBDb25maWd1cmF0aW9uLFxuICBpc1ByZUNvbnRlbnRSZWNvcmQsXG4gIGlzQ29uZmlndXJhdGlvbkVycm9yLFxufSBmcm9tIFwiLi4vLi4vLi4vLi4vc3JjL2FwaVwiO1xuaW1wb3J0IHtcbiAgRXJyb3JNZXNzYWdlQWN0aW9uSWRzLFxuICBFcnJvck1lc3NhZ2VTcGxpdE9wdGlvbnMsXG59IGZyb20gXCIuLi8uLi8uLi8uLi9zcmMvdXRpbHMvZXJyb3JFbmhhbmNlclwiO1xuaW1wb3J0IHtcbiAgRWRpdENvbmZpZ3VyYXRpb25TZWxlY3Rpb24sXG4gIFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZSxcbn0gZnJvbSBcIi4uLy4uLy4uLy4uL3NyYy90eXBlcy9tZXNzYWdlcy93ZWJ2aWV3VG9Ib3N0TWVzc2FnZXNcIjtcbmltcG9ydCB7IGNhbGN1bGF0ZVRpdGxlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL3NyYy91dGlscy90aXRsZXNcIjtcbmltcG9ydCB7IGZvcm1hdERhdGVTdHJpbmcgfSBmcm9tIFwic3JjL3V0aWxzL2RhdGVcIjtcbmltcG9ydCB7IGZpbHRlckNvbmZpZ3VyYXRpb25zVG9WYWxpZEFuZFR5cGUgfSBmcm9tIFwiLi4vLi4vLi4vLi4vc3JjL3V0aWxzL2ZpbHRlcnNcIjtcblxuaW1wb3J0IHsgdXNlSG9zdENvbmR1aXRTZXJ2aWNlIH0gZnJvbSBcInNyYy9Ib3N0Q29uZHVpdFNlcnZpY2VcIjtcbmltcG9ydCB7IHVzZUhvbWVTdG9yZSB9IGZyb20gXCJzcmMvc3RvcmVzL2hvbWVcIjtcblxuaW1wb3J0IFF1aWNrUGlja0l0ZW0sIHsgSWNvbkRldGFpbCB9IGZyb20gXCJzcmMvY29tcG9uZW50cy9RdWlja1BpY2tJdGVtLnZ1ZVwiO1xuaW1wb3J0IEFjdGlvblRvb2xiYXIgZnJvbSBcInNyYy9jb21wb25lbnRzL0FjdGlvblRvb2xiYXIudnVlXCI7XG5pbXBvcnQgRGVwbG95QnV0dG9uIGZyb20gXCJzcmMvY29tcG9uZW50cy9EZXBsb3lCdXR0b24udnVlXCI7XG5pbXBvcnQgVGV4dFN0cmluZ1dpdGhBbmNob3IgZnJvbSBcIi4vVGV4dFN0cmluZ1dpdGhBbmNob3IudnVlXCI7XG5pbXBvcnQge1xuICBBZ2VudEVycm9yLFxuICBpc0FnZW50RXJyb3JJbnZhbGlkVE9NTCxcbiAgaXNBZ2VudEVycm9yRGVwbG95ZWRDb250ZW50Tm90UnVubmluZyxcbn0gZnJvbSBcIi4uLy4uLy4uLy4uL3NyYy9hcGkvdHlwZXMvZXJyb3JcIjtcblxuY29uc3QgaG9tZSA9IHVzZUhvbWVTdG9yZSgpO1xuY29uc3QgaG9zdENvbmR1aXQgPSB1c2VIb3N0Q29uZHVpdFNlcnZpY2UoKTtcblxuY29uc3QgdG9vbGJhckFjdGlvbnMgPSBjb21wdXRlZCgoKSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICByZXN1bHQucHVzaCh7XG4gICAgbGFiZWw6IFwiQWRkIERlcGxveW1lbnRcIixcbiAgICBjb2RpY29uOiBcImNvZGljb24tYWRkXCIsXG4gICAgZm46IG9uQWRkRGVwbG95bWVudCxcbiAgfSk7XG5cbiAgaWYgKGhvbWUuc2VsZWN0ZWRDb25maWd1cmF0aW9uKSB7XG4gICAgcmVzdWx0LnB1c2goe1xuICAgICAgbGFiZWw6IFwiRWRpdCBDb25maWd1cmF0aW9uXCIsXG4gICAgICBjb2RpY29uOiBcImNvZGljb24tZWRpdFwiLFxuICAgICAgZm46ICgpID0+XG4gICAgICAgIG9uRWRpdENvbmZpZ3VyYXRpb24oaG9tZS5zZWxlY3RlZENvbmZpZ3VyYXRpb24hLmNvbmZpZ3VyYXRpb25QYXRoKSxcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufSk7XG5cbmNvbnN0IG9uU2VsZWN0RGVwbG95bWVudCA9ICgpID0+IHtcbiAgaG9zdENvbmR1aXQuc2VuZE1zZyh7XG4gICAga2luZDogV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLlNFTEVDVF9ERVBMT1lNRU5ULFxuICB9KTtcbn07XG5cbmNvbnN0IG9uQWRkRGVwbG95bWVudCA9ICgpID0+IHtcbiAgaG9zdENvbmR1aXQuc2VuZE1zZyh7XG4gICAga2luZDogV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLk5FV19ERVBMT1lNRU5ULFxuICB9KTtcbn07XG5cbmNvbnN0IG9uRWRpdENvbmZpZ3VyYXRpb24gPSAoXG4gIGZ1bGxQYXRoOiBzdHJpbmcsXG4gIHNlbGVjdGlvbj86IEVkaXRDb25maWd1cmF0aW9uU2VsZWN0aW9uLFxuKSA9PiB7XG4gIGhvc3RDb25kdWl0LnNlbmRNc2coe1xuICAgIGtpbmQ6IFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5FRElUX0NPTkZJR1VSQVRJT04sXG4gICAgY29udGVudDoge1xuICAgICAgY29uZmlndXJhdGlvblBhdGg6IGZ1bGxQYXRoLFxuICAgICAgc2VsZWN0aW9uLFxuICAgIH0sXG4gIH0pO1xufTtcblxuY29uc3Qgb25WaWV3UHVibGlzaGluZ0xvZyA9ICgpID0+IHtcbiAgaG9zdENvbmR1aXQuc2VuZE1zZyh7XG4gICAga2luZDogV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLlZJRVdfUFVCTElTSElOR19MT0csXG4gIH0pO1xufTtcblxuY29uc3QgZmlsdGVyZWRDb25maWdzID0gY29tcHV0ZWQoKCk6IENvbmZpZ3VyYXRpb25bXSA9PiB7XG4gIHJldHVybiBmaWx0ZXJDb25maWd1cmF0aW9uc1RvVmFsaWRBbmRUeXBlKFxuICAgIGhvbWUuY29uZmlndXJhdGlvbnMsXG4gICAgaG9tZS5zZWxlY3RlZENvbnRlbnRSZWNvcmQ/LnR5cGUsXG4gICk7XG59KTtcblxuY29uc3QgY29udGV4dE1lbnVDb250ZXh0ID0gY29tcHV0ZWQoKCk6IHN0cmluZyA9PiB7XG4gIHJldHVybiBmaWx0ZXJlZENvbmZpZ3MudmFsdWUubGVuZ3RoID4gMFxuICAgID8gXCJldmVuLWVhc2llci1kZXBsb3ktbW9yZS1tZW51LW1hdGNoaW5nLWNvbmZpZ3NcIlxuICAgIDogXCJldmVuLWVhc2llci1kZXBsb3ktbW9yZS1tZW51LW5vLW1hdGNoaW5nLWNvbmZpZ3NcIjtcbn0pO1xuXG5jb25zdCBwcm9tcHRGb3JDb25maWdTZWxlY3Rpb24gPSBjb21wdXRlZCgoKTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIGZpbHRlcmVkQ29uZmlncy52YWx1ZS5sZW5ndGggPiAwXG4gICAgPyBcIlNlbGVjdCBhIENvbmZpZ3VyYXRpb25cIlxuICAgIDogXCJDcmVhdGUgYSBDb25maWd1cmF0aW9uXCI7XG59KTtcblxuY29uc3QgY29udGV4dE1lbnVWU0NvZGVDb250ZXh0ID0gY29tcHV0ZWQoKCk6IHN0cmluZyA9PiB7XG4gIHJldHVybiBob21lLnB1Ymxpc2hJblByb2dyZXNzIHx8XG4gICAgaXNQcmVDb250ZW50UmVjb3JkKGhvbWUuc2VsZWN0ZWRDb250ZW50UmVjb3JkKVxuICAgID8gXCJob21ldmlldy1hY3RpdmUtY29udGVudFJlY29yZC1tb3JlLW1lbnVcIlxuICAgIDogXCJob21ldmlldy1sYXN0LWNvbnRlbnRSZWNvcmQtbW9yZS1tZW51XCI7XG59KTtcblxuY29uc3QgZGVwbG95bWVudFRpdGxlID0gY29tcHV0ZWQoKCkgPT4ge1xuICBpZiAoIWhvbWUuc2VsZWN0ZWRDb250ZW50UmVjb3JkKSB7XG4gICAgLy8gbm8gdGl0bGUgaWYgdGhlcmUgaXMgbm8gc2VsZWN0ZWQgY29udGVudFJlY29yZFxuICAgIHJldHVybiBcIlwiO1xuICB9XG5cbiAgY29uc3QgcmVzdWx0ID0gY2FsY3VsYXRlVGl0bGUoXG4gICAgaG9tZS5zZWxlY3RlZENvbnRlbnRSZWNvcmQsXG4gICAgaG9tZS5zZWxlY3RlZENvbmZpZ3VyYXRpb24sXG4gICk7XG4gIHJldHVybiByZXN1bHQudGl0bGU7XG59KTtcblxuY29uc3QgZGVwbG95bWVudERldGFpbHMgPSBjb21wdXRlZCgoKSA9PiB7XG4gIGNvbnN0IGRldGFpbHM6IEljb25EZXRhaWxbXSA9IFtdO1xuICBkZXRhaWxzLnB1c2goeyBpY29uOiBcImNvZGljb24tc2VydmVyXCIsIHRleHQ6IGNyZWRlbnRpYWxTdWJUaXRsZS52YWx1ZSB9KTtcbiAgaWYgKGVudHJ5cG9pbnRTdWJUaXRsZS52YWx1ZSkge1xuICAgIGRldGFpbHMucHVzaCh7IGljb246IFwiY29kaWNvbi1maWxlXCIsIHRleHQ6IGVudHJ5cG9pbnRTdWJUaXRsZS52YWx1ZSB9KTtcbiAgfVxuICByZXR1cm4gZGV0YWlscztcbn0pO1xuXG5jb25zdCBjcmVkZW50aWFsU3ViVGl0bGUgPSBjb21wdXRlZCgoKSA9PiB7XG4gIGlmIChob21lLnNlcnZlckNyZWRlbnRpYWw/Lm5hbWUpIHtcbiAgICByZXR1cm4gYCR7aG9tZS5zZXJ2ZXJDcmVkZW50aWFsLm5hbWV9YDtcbiAgfVxuICByZXR1cm4gYE1pc3NpbmcgQ3JlZGVudGlhbCBmb3IgJHtob21lLnNlbGVjdGVkQ29udGVudFJlY29yZD8uc2VydmVyVXJsfWA7XG59KTtcblxuY29uc3QgZW50cnlwb2ludFN1YlRpdGxlID0gY29tcHV0ZWQoKCkgPT4ge1xuICBpZiAoXG4gICAgaG9tZS5zZWxlY3RlZENvbmZpZ3VyYXRpb24gJiZcbiAgICAhaXNDb25maWd1cmF0aW9uRXJyb3IoaG9tZS5zZWxlY3RlZENvbmZpZ3VyYXRpb24pXG4gICkge1xuICAgIGNvbnN0IGNvbnRlbnRSZWNvcmQgPSBob21lLnNlbGVjdGVkQ29udGVudFJlY29yZDtcbiAgICBjb25zdCBjb25maWcgPSBob21lLnNlbGVjdGVkQ29uZmlndXJhdGlvbjtcbiAgICBpZiAoY29udGVudFJlY29yZCkge1xuICAgICAgbGV0IHN1YlRpdGxlID0gXCJcIjtcbiAgICAgIGlmIChjb250ZW50UmVjb3JkLnByb2plY3REaXIgIT09IFwiLlwiKSB7XG4gICAgICAgIHN1YlRpdGxlID0gYCR7Y29udGVudFJlY29yZC5wcm9qZWN0RGlyfSR7aG9tZS5wbGF0Zm9ybUZpbGVTZXBhcmF0b3J9YDtcbiAgICAgIH1cbiAgICAgIGlmICghaG9tZS5jb25maWcuYWN0aXZlLmlzVW5rbm93bkVycm9yKSB7XG4gICAgICAgIHN1YlRpdGxlICs9IGNvbmZpZy5jb25maWd1cmF0aW9uLmVudHJ5cG9pbnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3ViVGl0bGU7XG4gICAgfVxuICB9XG4gIHJldHVybiBcIlByb2plY3REaXIgYW5kIEVudHJ5cG9pbnQgbm90IGRldGVybWluZWRcIjtcbn0pO1xuXG5jb25zdCBzZWxlY3RDb25maWd1cmF0aW9uID0gKCkgPT4ge1xuICBob3N0Q29uZHVpdC5zZW5kTXNnKHtcbiAgICBraW5kOiBXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuU0hPV19TRUxFQ1RfQ09ORklHVVJBVElPTixcbiAgfSk7XG59O1xuXG5jb25zdCBsYXN0U3RhdHVzRGVzY3JpcHRpb24gPSBjb21wdXRlZCgoKSA9PiB7XG4gIGlmICghaG9tZS5zZWxlY3RlZENvbnRlbnRSZWNvcmQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGlmIChpc0Rpc21pc3NlZENvbnRlbnRSZWNvcmQudmFsdWUpIHtcbiAgICByZXR1cm4gXCJMYXN0IERlcGxveW1lbnQgRGlzbWlzc2VkXCI7XG4gIH1cbiAgaWYgKGhvbWUuc2VsZWN0ZWRDb250ZW50UmVjb3JkLmRlcGxveW1lbnRFcnJvcikge1xuICAgIHJldHVybiBcIkxhc3QgRGVwbG95bWVudCBGYWlsZWRcIjtcbiAgfVxuICBpZiAoaXNQcmVDb250ZW50UmVjb3JkKGhvbWUuc2VsZWN0ZWRDb250ZW50UmVjb3JkKSkge1xuICAgIHJldHVybiBpc1ByZUNvbnRlbnRSZWNvcmRXaXRoSUQudmFsdWVcbiAgICAgID8gXCJOb3QgWWV0IFVwZGF0ZWRcIlxuICAgICAgOiBcIk5vdCBZZXQgRGVwbG95ZWRcIjtcbiAgfVxuICByZXR1cm4gXCJMYXN0IERlcGxveW1lbnQgU3VjY2Vzc2Z1bFwiO1xufSk7XG5cbmNvbnN0IGlzUHJlQ29udGVudFJlY29yZFdpdGhJRCA9IGNvbXB1dGVkKCgpID0+IHtcbiAgcmV0dXJuIChcbiAgICBpc1ByZUNvbnRlbnRSZWNvcmQoaG9tZS5zZWxlY3RlZENvbnRlbnRSZWNvcmQpICYmXG4gICAgQm9vbGVhbihob21lLnNlbGVjdGVkQ29udGVudFJlY29yZC5pZClcbiAgKTtcbn0pO1xuXG5jb25zdCBpc1ByZUNvbnRlbnRSZWNvcmRXaXRob3V0SUQgPSBjb21wdXRlZCgoKSA9PiB7XG4gIHJldHVybiAoXG4gICAgaXNQcmVDb250ZW50UmVjb3JkKGhvbWUuc2VsZWN0ZWRDb250ZW50UmVjb3JkKSAmJlxuICAgICFpc1ByZUNvbnRlbnRSZWNvcmRXaXRoSUQudmFsdWVcbiAgKTtcbn0pO1xuXG5jb25zdCBpc0Rpc21pc3NlZENvbnRlbnRSZWNvcmQgPSBjb21wdXRlZCgoKSA9PiB7XG4gIHJldHVybiBCb29sZWFuKGhvbWUuc2VsZWN0ZWRDb250ZW50UmVjb3JkPy5kaXNtaXNzZWRBdCk7XG59KTtcblxuY29uc3QgdG9vbFRpcFRleHQgPSBjb21wdXRlZCgoKSA9PiB7XG4gIGxldCBlbnRyeXBvaW50ID0gXCJ1bmtub3duXCI7XG4gIGlmIChcbiAgICBob21lLnNlbGVjdGVkQ29uZmlndXJhdGlvbiAmJlxuICAgICFpc0NvbmZpZ3VyYXRpb25FcnJvcihob21lLnNlbGVjdGVkQ29uZmlndXJhdGlvbikgJiZcbiAgICBob21lLnNlbGVjdGVkQ29uZmlndXJhdGlvbi5jb25maWd1cmF0aW9uLmVudHJ5cG9pbnRcbiAgKSB7XG4gICAgZW50cnlwb2ludCA9IGhvbWUuc2VsZWN0ZWRDb25maWd1cmF0aW9uLmNvbmZpZ3VyYXRpb24uZW50cnlwb2ludDtcbiAgfVxuICByZXR1cm4gYERlcGxveW1lbnQgRGV0YWlsc1xuLSBEZXBsb3ltZW50IFJlY29yZDogJHtob21lLnNlbGVjdGVkQ29udGVudFJlY29yZD8uc2F2ZU5hbWUgfHwgXCI8dW5kZWZpbmVkPlwifVxuLSBDb25maWd1cmF0aW9uIEZpbGU6ICR7aG9tZS5zZWxlY3RlZENvbmZpZ3VyYXRpb24/LmNvbmZpZ3VyYXRpb25OYW1lIHx8IFwiPHVuZGVmaW5lZD5cIn1cbi0gQ3JlZGVudGlhbCBJbiBVc2U6ICR7aG9tZS5zZXJ2ZXJDcmVkZW50aWFsPy5uYW1lIHx8IFwiPHVuZGVmaW5lZD5cIn1cbi0gUHJvamVjdCBEaXI6ICR7aG9tZS5zZWxlY3RlZENvbnRlbnRSZWNvcmQ/LnByb2plY3REaXIgfHwgXCI8dW5kZWZpbmVkPlwifVxuLSBFbnRyeXBvaW50OiAke2VudHJ5cG9pbnR9XG4tIFNlcnZlciBVUkw6ICR7aG9tZS5zZXJ2ZXJDcmVkZW50aWFsPy51cmwgfHwgXCI8dW5kZWZpbmVkPlwifWA7XG59KTtcblxuY29uc3QgZ2V0QWN0aXZlQ29uZmlnRXJyb3IgPSBjb21wdXRlZCgoKTogQWdlbnRFcnJvciB8IHVuZGVmaW5lZCA9PiB7XG4gIGlmIChcbiAgICBob21lLnNlbGVjdGVkQ29uZmlndXJhdGlvbiAmJlxuICAgIGlzQ29uZmlndXJhdGlvbkVycm9yKGhvbWUuc2VsZWN0ZWRDb25maWd1cmF0aW9uKSAmJlxuICAgIGlzQWdlbnRFcnJvckludmFsaWRUT01MKGhvbWUuc2VsZWN0ZWRDb25maWd1cmF0aW9uLmVycm9yKVxuICApIHtcbiAgICByZXR1cm4gaG9tZS5zZWxlY3RlZENvbmZpZ3VyYXRpb24uZXJyb3I7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn0pO1xuXG5jb25zdCBnZXRBY3RpdmVDb25maWdUT01MRXJyb3JEZXRhaWxzID0gY29tcHV0ZWQoKCkgPT4ge1xuICBjb25zdCBhZ2VudEVycm9yID0gZ2V0QWN0aXZlQ29uZmlnRXJyb3IudmFsdWU7XG4gIGlmIChhZ2VudEVycm9yICYmIGlzQWdlbnRFcnJvckludmFsaWRUT01MKGFnZW50RXJyb3IpKSB7XG4gICAgcmV0dXJuIGBvbiBsaW5lICR7YWdlbnRFcnJvci5kYXRhLmxpbmV9YDtcbiAgfVxuICByZXR1cm4gXCJcIjtcbn0pO1xuXG5jb25zdCBpc0RlcGxveWVkQ29udGVudE9uRXJyb3IgPSBjb21wdXRlZCgoKTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IGRlcGxveW1lbnRFcnJvciA9IGhvbWUuc2VsZWN0ZWRDb250ZW50UmVjb3JkPy5kZXBsb3ltZW50RXJyb3I7XG4gIHJldHVybiBCb29sZWFuKFxuICAgIGRlcGxveW1lbnRFcnJvciAmJiBpc0FnZW50RXJyb3JEZXBsb3llZENvbnRlbnROb3RSdW5uaW5nKGRlcGxveW1lbnRFcnJvciksXG4gICk7XG59KTtcblxuY29uc3QgZGVwbG95ZWRDb250ZW50QnV0dG9uTGFiZWwgPSBjb21wdXRlZCgoKTogc3RyaW5nID0+IHtcbiAgaWYgKGlzRGVwbG95ZWRDb250ZW50T25FcnJvci52YWx1ZSkge1xuICAgIHJldHVybiBcIlZpZXcgRGVwbG95bWVudCBMb2dzXCI7XG4gIH1cbiAgcmV0dXJuIFwiVmlldyBDb250ZW50XCI7XG59KTtcblxuY29uc3Qgb25FZGl0Q29uZmlndXJhdGlvbldpdGhUT01MRXJyb3IgPSAoKSA9PiB7XG4gIGNvbnN0IGFnZW50RXJyb3IgPSBnZXRBY3RpdmVDb25maWdFcnJvci52YWx1ZTtcbiAgaWYgKGFnZW50RXJyb3IgJiYgaXNBZ2VudEVycm9ySW52YWxpZFRPTUwoYWdlbnRFcnJvcikpIHtcbiAgICBvbkVkaXRDb25maWd1cmF0aW9uKGhvbWUuc2VsZWN0ZWRDb25maWd1cmF0aW9uIS5jb25maWd1cmF0aW9uUGF0aCwge1xuICAgICAgc3RhcnQ6IHtcbiAgICAgICAgbGluZTogYWdlbnRFcnJvci5kYXRhLmxpbmUgLSAxLFxuICAgICAgICBjaGFyYWN0ZXI6IGFnZW50RXJyb3IuZGF0YS5jb2x1bW4gLSAxLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuICBjb25zb2xlLmVycm9yKFxuICAgIFwiRXZlbkVhc2llckRlcGxveTo6b25FZGl0Q29uZmlndXJhdGlvbldpdGhUT01MRXJyb3IsIGVycm9yIGlzIG5vdCBleHBlY3RlZCB0eXBlLiBJZ25vcmluZy5cIixcbiAgKTtcbiAgcmV0dXJuO1xufTtcblxuY29uc3Qgb25FcnJvck1lc3NhZ2VBbmNob3JDbGljayA9IChzcGxpdE9wdGlvbklkOiBudW1iZXIpID0+IHtcbiAgY29uc3Qgb3B0aW9uID0gRXJyb3JNZXNzYWdlU3BsaXRPcHRpb25zLmZpbmQoXG4gICAgKG9wdGlvbikgPT4gb3B0aW9uLmFjdGlvbklkID09PSBzcGxpdE9wdGlvbklkLFxuICApO1xuICBpZiAoIW9wdGlvbikge1xuICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICBcIkV2ZW5FYXNpZXJEZXBsb3k6Om9uRXJyb3JNZXNzYWdlQW5jaG9yQ2xpY2ssIGV2ZW50IGRvZXMgbm90IG1hdGNoIG9wdGlvbnMuIElnbm9yaW5nLlwiLFxuICAgICk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChvcHRpb24uYWN0aW9uSWQgPT09IEVycm9yTWVzc2FnZUFjdGlvbklkcy5FZGl0Q29uZmlndXJhdGlvbikge1xuICAgIG9uRWRpdENvbmZpZ3VyYXRpb24oaG9tZS5zZWxlY3RlZENvbmZpZ3VyYXRpb24hLmNvbmZpZ3VyYXRpb25QYXRoKTtcbiAgICByZXR1cm47XG4gIH1cbn07XG5cbmNvbnN0IG5hdmlnYXRlVG9VcmwgPSAodXJsOiBzdHJpbmcpID0+IHtcbiAgaG9zdENvbmR1aXQuc2VuZE1zZyh7XG4gICAga2luZDogV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLk5BVklHQVRFLFxuICAgIGNvbnRlbnQ6IHtcbiAgICAgIHVyaVBhdGg6IHVybCxcbiAgICB9LFxuICB9KTtcbn07XG5cbmNvbnN0IG5ld0NyZWRlbnRpYWwgPSAoKSA9PiB7XG4gIGhvc3RDb25kdWl0LnNlbmRNc2coe1xuICAgIGtpbmQ6IFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5ORVdfQ1JFREVOVElBTF9GT1JfREVQTE9ZTUVOVCxcbiAgfSk7XG59O1xuXG5jb25zdCBvbkFzc29jaWF0ZURlcGxveW1lbnQgPSAoKSA9PiB7XG4gIGhvc3RDb25kdWl0LnNlbmRNc2coe1xuICAgIGtpbmQ6IFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5TSE9XX0FTU09DSUFURV9HVUlELFxuICB9KTtcbn07XG5cbmNvbnN0IHNob3dDb250ZW50QnV0dG9uID0gY29tcHV0ZWQoKCkgPT4ge1xuICBjb25zdCByZWNvcmQgPSBob21lLnNlbGVjdGVkQ29udGVudFJlY29yZDtcbiAgaWYgKCFyZWNvcmQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcmV0dXJuIChcbiAgICByZWNvcmQ/LmRhc2hib2FyZFVybCB8fCAoIWlzUHJlQ29udGVudFJlY29yZChyZWNvcmQpICYmIHJlY29yZC5sb2dzVXJsKVxuICApO1xufSk7XG5cbmNvbnN0IHZpZXdDb250ZW50ID0gKCkgPT4ge1xuICBjb25zdCByZWNvcmQgPSBob21lLnNlbGVjdGVkQ29udGVudFJlY29yZDtcbiAgaWYgKCFyZWNvcmQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGlzRGVwbG95ZWRDb250ZW50T25FcnJvci52YWx1ZSAmJiAhaXNQcmVDb250ZW50UmVjb3JkKHJlY29yZCkpIHtcbiAgICBuYXZpZ2F0ZVRvVXJsKHJlY29yZC5sb2dzVXJsKTtcbiAgfSBlbHNlIGlmIChyZWNvcmQuZGFzaGJvYXJkVXJsKSB7XG4gICAgbmF2aWdhdGVUb1VybChyZWNvcmQuZGFzaGJvYXJkVXJsKTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuXG48c3R5bGUgbGFuZz1cInNjc3NcIiBzY29wZWQ+XG4ubGFiZWwge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gIGZsZXgtd3JhcDogbm93cmFwO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuXG4uZGVwbG95bWVudC1pbi1wcm9ncmVzcy1jb250YWluZXIge1xuICBkaXNwbGF5OiBmbGV4O1xufVxuXG4uZGVwbG95bWVudC1zdW1tYXJ5LWNvbnRhaW5lciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgYWxpZ24taXRlbXM6IGJhc2VsaW5lO1xufVxuXG4uZGVwbG95bWVudC1jb250cm9sIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcblxuICBjdXJzb3I6IHBvaW50ZXI7XG4gIG1hcmdpbjogMC41cmVtIDA7XG4gIHBhZGRpbmc6IDJweCA2cHggNnB4IDhweDtcbiAgYmFja2dyb3VuZDogdmFyKC0tZHJvcGRvd24tYmFja2dyb3VuZCk7XG4gIGJvcmRlcjogY2FsYyh2YXIoLS1ib3JkZXItd2lkdGgpICogMXB4KSBzb2xpZCB2YXIoLS1kcm9wZG93bi1ib3JkZXIpO1xuICBib3JkZXItcmFkaXVzOiBjYWxjKHZhcigtLWNvcm5lci1yYWRpdXMtcm91bmQpICogMXB4KTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgb3V0bGluZTogbm9uZTtcblxuICAmW29wZW5dLFxuICAmOmFjdGl2ZTpub3QoW2Rpc2FibGVkXSkge1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tZm9jdXMtYm9yZGVyKTtcbiAgfVxuXG4gICZbZGlzYWJsZWRdIHtcbiAgICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xuICAgIG9wYWNpdHk6IHZhcigtLWRpc2FibGVkLW9wYWNpdHkpO1xuICB9XG5cbiAgLnNlbGVjdC1pbmRpY2F0b3Ige1xuICAgIGZsZXg6IG5vbmU7XG4gICAgbWFyZ2luLWlubGluZS1zdGFydDogMWVtO1xuICB9XG59XG5cbjpkZWVwKC5hY3Rpb24taXRlbSkge1xuICBtYXJnaW4tcmlnaHQ6IDRweDtcbn1cblxuLmFkZC1kZXBsb3ltZW50LWJ0biB7XG4gIG1hcmdpbjogMC41cmVtIDAgMXJlbTtcbn1cblxuLmhvbWUtdmlldy1kaXZpZGVyIHtcbiAgbWFyZ2luLXRvcDogMS4zM2VtO1xufVxuXG4uZGVwbG95bWVudC1zdW1tYXJ5LXRpdGxlIHtcbiAgbWFyZ2luLWJsb2NrLXN0YXJ0OiAxLjMzZW07XG4gIG1hcmdpbi1ib3R0b206IDVweDtcbn1cblxuLmRhdGUtdGltZSB7XG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XG59XG5cbi5sYXN0LWRlcGxveW1lbnQtZGV0YWlscyB7XG4gIG1hcmdpbi10b3A6IDEwcHg7XG59XG5cbi5sYXN0LWRlcGxveW1lbnQtZXJyb3Ige1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogc3RyZXRjaDtcblxuICAuYWxlcnQtYm9yZGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgYm9yZGVyLXJpZ2h0LXdpZHRoOiAxcHg7XG4gICAgYm9yZGVyLXJpZ2h0LXN0eWxlOiBzb2xpZDtcbiAgICBwYWRkaW5nLXJpZ2h0OiA1cHg7XG4gICAgbWFyZ2luLXJpZ2h0OiA3cHg7XG4gIH1cbn1cblxuLmVycm9yLWljb24ge1xuICBmbGV4OiAwO1xufVxuXG4uZXJyb3ItbWVzc2FnZSB7XG4gIG1pbi13aWR0aDogMDtcbiAgd29yZC13cmFwOiBicmVhay13b3JkO1xufVxuXG4ucHJvZ3Jlc3MtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cblxuLnByb2dyZXNzLXJpbmcge1xuICBmbGV4LWdyb3c6IDA7XG4gIG1hcmdpbi10b3A6IDEuMzNlbTtcbiAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xufVxuXG4ucHJvZ3Jlc3MtZGVzYyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xufVxuXG4ucHJvZ3Jlc3MtbG9nLWFuY2hvciB7XG4gIG1hcmdpbi10b3A6IDA7XG4gIG1hcmdpbi1ib3R0b206IDA7XG59XG48L3N0eWxlPlxuIiwiPHRlbXBsYXRlPlxuICA8ZGl2IGNsYXNzPVwicGFuZVwiIDpjbGFzcz1cInsgZXhwYW5kZWQ6IGV4cGFuZGVkIH1cIj5cbiAgICA8ZGl2XG4gICAgICBjbGFzcz1cInBhbmUtaGVhZGVyXCJcbiAgICAgIHRhYmluZGV4PVwiMFwiXG4gICAgICA6Y2xhc3M9XCJ7IGV4cGFuZGVkOiBleHBhbmRlZCB9XCJcbiAgICAgIEBrZXlkb3duLmVudGVyLnNlbGY9XCJ0b2dnbGVFeHBhbmRlZFwiXG4gICAgPlxuICAgICAgPGRpdiBjbGFzcz1cInBhbmUtaGVhZGVyLXRpdGxlLWNvbnRhaW5lclwiIEBjbGljaz1cInRvZ2dsZUV4cGFuZGVkXCI+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzcz1cInR3aXN0eS1jb250YWluZXIgY29kaWNvblwiXG4gICAgICAgICAgOmNsYXNzPVwiZXhwYW5kZWQgPyAnY29kaWNvbi1jaGV2cm9uLWRvd24nIDogJ2NvZGljb24tY2hldnJvbi1yaWdodCdcIlxuICAgICAgICAvPlxuICAgICAgICA8aDMgY2xhc3M9XCJ0aXRsZVwiPnt7IHRpdGxlIH19PC9oMz5cbiAgICAgICAgPHNwYW4gdi1pZj1cIiRzbG90cy5kZXNjcmlwdGlvblwiIGNsYXNzPVwiZGVzY3JpcHRpb25cIj5cbiAgICAgICAgICA8c2xvdCBuYW1lPVwiZGVzY3JpcHRpb25cIiAvPlxuICAgICAgICA8L3NwYW4+XG4gICAgICAgIDxzcGFuIHYtZWxzZS1pZj1cImRlc2NyaXB0aW9uXCIgY2xhc3M9XCJkZXNjcmlwdGlvblwiPlxuICAgICAgICAgIHt7IGRlc2NyaXB0aW9uIH19XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIHYtaWY9XCJjb2RpY29uICYmICFleHBhbmRlZFwiXG4gICAgICAgICAgY2xhc3M9XCJ0cmVlLXNlY3Rpb24taWNvbiBjb2RpY29uXCJcbiAgICAgICAgICA6Y2xhc3M9XCJjb2RpY29uXCJcbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiB2LWlmPVwiYWN0aW9uc1wiIGNsYXNzPVwiYWN0aW9uc1wiPlxuICAgICAgICA8QWN0aW9uVG9vbGJhciA6dGl0bGU9XCJ0aXRsZVwiIDphY3Rpb25zPVwiYWN0aW9uc1wiIC8+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgdi1pZj1cImNvdW50XCIgY2xhc3M9XCJjb3VudFwiPlxuICAgICAgICA8Q291bnRCYWRnZSA6Y291bnQ9XCJjb3VudFwiIC8+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IHYtc2hvdz1cImV4cGFuZGVkXCIgY2xhc3M9XCJwYW5lLWJvZHlcIj5cbiAgICAgIDxzbG90IC8+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdCBzZXR1cCBsYW5nPVwidHNcIj5cbmltcG9ydCBBY3Rpb25Ub29sYmFyLCB7IEFjdGlvbkJ1dHRvbiB9IGZyb20gXCJzcmMvY29tcG9uZW50cy9BY3Rpb25Ub29sYmFyLnZ1ZVwiO1xuaW1wb3J0IENvdW50QmFkZ2UgZnJvbSBcInNyYy9jb21wb25lbnRzL0NvdW50QmFkZ2UudnVlXCI7XG5cbmNvbnN0IGV4cGFuZGVkID0gZGVmaW5lTW9kZWwoXCJleHBhbmRlZFwiLCB7IHJlcXVpcmVkOiBmYWxzZSwgZGVmYXVsdDogZmFsc2UgfSk7XG5cbmRlZmluZVByb3BzPHtcbiAgdGl0bGU6IHN0cmluZztcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIGNvZGljb24/OiBzdHJpbmc7XG4gIGFjdGlvbnM/OiBBY3Rpb25CdXR0b25bXTtcbiAgY291bnQ/OiBudW1iZXI7XG59PigpO1xuXG5jb25zdCB0b2dnbGVFeHBhbmRlZCA9ICgpID0+IHtcbiAgZXhwYW5kZWQudmFsdWUgPSAhZXhwYW5kZWQudmFsdWU7XG59O1xuPC9zY3JpcHQ+XG5cbjxzdHlsZSBsYW5nPVwic2Nzc1wiIHNjb3BlZD5cbi5wYW5lIHtcbiAgLmFjdGlvbnMge1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gIH1cblxuICAudHJlZS1zZWN0aW9uLWljb24ge1xuICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICBtYXJnaW4tcmlnaHQ6IDRweDtcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcbiAgfVxuXG4gICYuZXhwYW5kZWQ6aG92ZXIgLmFjdGlvbnMsXG4gICYuZXhwYW5kZWQ6Zm9jdXMtd2l0aGluIC5hY3Rpb25zIHtcbiAgICBkaXNwbGF5OiBpbml0aWFsO1xuICB9XG5cbiAgJi5leHBhbmRlZDpob3ZlclxuICAgIDpkZWVwKC50cmVlLWl0ZW0gLnRyZWUtaXRlbS1jb250YWluZXI6bm90KDpob3ZlcikgLmluZGVudCAuaW5kZW50LWd1aWRlKSxcbiAgJi5leHBhbmRlZDpmb2N1cy13aXRoaW5cbiAgICA6ZGVlcCgudHJlZS1pdGVtIC50cmVlLWl0ZW0tY29udGFpbmVyOm5vdCg6aG92ZXIpIC5pbmRlbnQgLmluZGVudC1ndWlkZSkge1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tdnNjb2RlLXRyZWUtaW5hY3RpdmVJbmRlbnRHdWlkZXNTdHJva2UpO1xuICB9XG59XG5cbi5wYW5lLWhlYWRlciB7XG4gIGxpbmUtaGVpZ2h0OiAyMnB4O1xuICBjb2xvcjogdmFyKC0tdnNjb2RlLXNpZGVCYXJTZWN0aW9uSGVhZGVyLWZvcmVncm91bmQpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS12c2NvZGUtc2lkZUJhclNlY3Rpb25IZWFkZXItYmFja2dyb3VuZCk7XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS12c2NvZGUtc2lkZUJhclNlY3Rpb25IZWFkZXItYm9yZGVyKTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgZm9udC1zaXplOiAxMXB4O1xuICBmb250LXdlaWdodDogNzAwO1xuICBoZWlnaHQ6IDIycHg7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHVzZXItc2VsZWN0OiBub25lO1xuXG4gICY6Zm9jdXMge1xuICAgIG9wYWNpdHk6IDE7XG4gICAgb3V0bGluZS1jb2xvcjogdmFyKC0tdnNjb2RlLWZvY3VzQm9yZGVyKTtcbiAgICBvdXRsaW5lLW9mZnNldDogLTFweDtcbiAgICBvdXRsaW5lLXN0eWxlOiBzb2xpZDtcbiAgICBvdXRsaW5lLXdpZHRoOiAxcHg7XG4gIH1cblxuICAucGFuZS1oZWFkZXItdGl0bGUtY29udGFpbmVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIG1pbi13aWR0aDogMDtcbiAgICBmbGV4OiAxO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cbiAgICAudHdpc3R5LWNvbnRhaW5lciB7XG4gICAgICBtYXJnaW46IDAgMnB4O1xuICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgY29sb3I6IHZhcigtLXZzY29kZS1pY29uLWZvcmVncm91bmQpO1xuICAgIH1cblxuICAgIC50aXRsZSB7XG4gICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICBtaW4td2lkdGg6IDNjaDtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgLXdlYmtpdC1tYXJnaW4tYmVmb3JlOiAwO1xuICAgICAgLXdlYmtpdC1tYXJnaW4tYWZ0ZXI6IDA7XG4gICAgfVxuXG4gICAgLmRlc2NyaXB0aW9uIHtcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgY29sb3I6IHZhcigtLXZzY29kZS1zaWRlQmFyU2VjdGlvbkhlYWRlci1mb3JlZ3JvdW5kKTtcbiAgICAgIGZsZXgtc2hyaW5rOiAxMDAwMDA7XG4gICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgbWFyZ2luOiAwO1xuICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gICAgICBvcGFjaXR5OiAwLjY7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICB0ZXh0LXRyYW5zZm9ybTogbm9uZTtcbiAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgfVxuICB9XG5cbiAgJiA6ZGVlcCguYWN0aW9uLWl0ZW0pIHtcbiAgICBtYXJnaW4tcmlnaHQ6IDRweDtcbiAgfVxuXG4gIC5jb3VudCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBtYXJnaW4tbGVmdDogMnB4O1xuICAgIHBhZGRpbmctcmlnaHQ6IDEycHg7XG4gIH1cbn1cblxuLnBhbmUtYm9keSB7XG4gIGZsZXg6IDE7XG4gIG92ZXJmbG93OiBoaWRkZW47XG59XG48L3N0eWxlPlxuIiwiPHRlbXBsYXRlPlxuICA8ZGl2XG4gICAgY2xhc3M9XCJ0cmVlLWl0ZW1cIlxuICAgIDpjbGFzcz1cIntcbiAgICAgICdhbGlnbi1pY29uLXdpdGgtdHdpc3R5JzogYWxpZ25JY29uV2l0aFR3aXN0eSxcbiAgICAgIGNvbGxhcHNpYmxlOiBpc0V4cGFuZGFibGUsXG4gICAgICAndGV4dC1saXN0LWVtcGhhc2l6ZWQnOiBsaXN0U3R5bGUgPT09ICdlbXBoYXNpemVkJyxcbiAgICAgICd0ZXh0LWZvcmVncm91bmQnOiBsaXN0U3R5bGUgPT09ICdkZWZhdWx0JyxcbiAgICAgICd0ZXh0LWxpc3QtZGVlbXBoYXNpemVkJzogbGlzdFN0eWxlID09PSAnZGVlbXBoYXNpemVkJyxcbiAgICB9XCJcbiAgPlxuICAgIDxkaXZcbiAgICAgIGNsYXNzPVwidHJlZS1pdGVtLWNvbnRhaW5lclwiXG4gICAgICA6Y2xhc3M9XCJ2aXJ0dWFsaXplZCA/ICdjbGFzcy1ob3ZlcicgOiB1bmRlZmluZWRcIlxuICAgICAgOnRpdGxlPVwidG9vbHRpcFwiXG4gICAgPlxuICAgICAgPGRpdiBjbGFzcz1cImluZGVudFwiPlxuICAgICAgICA8ZGl2IHYtZm9yPVwiXyBpbiBpbmRlbnRMZXZlbCAtIDFcIiBjbGFzcz1cImluZGVudC1ndWlkZVwiPjwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzPVwidHdpc3R5LWNvbnRhaW5lciB0ZXh0LWljb25cIlxuICAgICAgICA6Y2xhc3M9XCJbXG4gICAgICAgICAgeyBjb2RpY29uOiBpc0V4cGFuZGFibGUgfSxcbiAgICAgICAgICBleHBhbmRhYmxlIHx8ICRzbG90cy5kZWZhdWx0XG4gICAgICAgICAgICA/IGV4cGFuZGVkXG4gICAgICAgICAgICAgID8gJ2NvZGljb24tY2hldnJvbi1kb3duJ1xuICAgICAgICAgICAgICA6ICdjb2RpY29uLWNoZXZyb24tcmlnaHQnXG4gICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgXVwiXG4gICAgICAgIHYtb249XCJ7XG4gICAgICAgICAgY2xpY2s6IGlzRXhwYW5kYWJsZSA/IHRvZ2dsZUV4cGFuZGVkIDogdW5kZWZpbmVkLFxuICAgICAgICB9XCJcbiAgICAgIC8+XG4gICAgICA8dnNjb2RlLWNoZWNrYm94XG4gICAgICAgIDpjaGVja2VkPVwiY2hlY2tlZFwiXG4gICAgICAgIDpkaXNhYmxlZD1cImRpc2FibGVkXCJcbiAgICAgICAgY2xhc3M9XCJ0cmVlLWl0ZW0tY2hlY2tib3hcIlxuICAgICAgICA6Y2xhc3M9XCJ7ICdvcGFjaXR5LTEwMCc6IGRpc2FibGVPcGFjaXR5IH1cIlxuICAgICAgICBAY2xpY2s9XCJjaGVja2VkID8gJGVtaXQoJ3VuY2hlY2snKSA6ICRlbWl0KCdjaGVjaycpXCJcbiAgICAgID5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJ0cmVlLWl0ZW0tdGl0bGVcIj57eyB0aXRsZSB9fTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gdi1pZj1cImRlc2NyaXB0aW9uXCIgY2xhc3M9XCJ0cmVlLWl0ZW0tZGVzY3JpcHRpb25cIj5cbiAgICAgICAgICB7eyBkZXNjcmlwdGlvbiB9fVxuICAgICAgICA8L3NwYW4+XG4gICAgICA8L3ZzY29kZS1jaGVja2JveD5cbiAgICAgIDxkaXYgdi1pZj1cImFjdGlvbnNcIiBjbGFzcz1cImFjdGlvbnNcIj5cbiAgICAgICAgPEFjdGlvblRvb2xiYXIgOnRpdGxlPVwidGl0bGVcIiA6YWN0aW9ucz1cImFjdGlvbnNcIiAvPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IHYtaWY9XCIkc2xvdHMucG9zdERlY29yXCI+XG4gICAgICAgIDxzbG90IG5hbWU9XCJwb3N0RGVjb3JcIiAvPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IHYtc2hvdz1cImlzRXhwYW5kYWJsZSAmJiBleHBhbmRlZFwiIGNsYXNzPVwidHJlZS1pdGVtLWNoaWxkcmVuXCI+XG4gICAgICA8c2xvdCA6aW5kZW50LWxldmVsPVwiaW5kZW50TGV2ZWwgKyAxXCIgLz5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0IHNldHVwIGxhbmc9XCJ0c1wiPlxuaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tIFwidnVlXCI7XG5cbmltcG9ydCBBY3Rpb25Ub29sYmFyLCB7IEFjdGlvbkJ1dHRvbiB9IGZyb20gXCJzcmMvY29tcG9uZW50cy9BY3Rpb25Ub29sYmFyLnZ1ZVwiO1xuXG5leHBvcnQgdHlwZSBUcmVlSXRlbVN0eWxlID0gXCJlbXBoYXNpemVkXCIgfCBcImRlZmF1bHRcIiB8IFwiZGVlbXBoYXNpemVkXCI7XG5cbmNvbnN0IGV4cGFuZGVkID0gZGVmaW5lTW9kZWwoXCJleHBhbmRlZFwiLCB7IHJlcXVpcmVkOiBmYWxzZSwgZGVmYXVsdDogZmFsc2UgfSk7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGNoZWNrZWQ6IGJvb2xlYW47XG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbiAgbGlzdFN0eWxlPzogVHJlZUl0ZW1TdHlsZTtcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIHRvb2x0aXA/OiBzdHJpbmc7XG4gIGFsaWduSWNvbldpdGhUd2lzdHk/OiBib29sZWFuO1xuICBhY3Rpb25zPzogQWN0aW9uQnV0dG9uW107XG4gIGluZGVudExldmVsPzogbnVtYmVyO1xuICBleHBhbmRhYmxlPzogYm9vbGVhbjtcbiAgdmlydHVhbGl6ZWQ/OiBib29sZWFuO1xuICBkaXNhYmxlT3BhY2l0eT86IGJvb2xlYW47XG59XG5cbmNvbnN0IHByb3BzID0gd2l0aERlZmF1bHRzKGRlZmluZVByb3BzPFByb3BzPigpLCB7XG4gIGxpc3RTdHlsZTogXCJkZWZhdWx0XCIsXG4gIGluZGVudExldmVsOiAxLFxuICBleHBhbmRhYmxlOiBmYWxzZSxcbiAgdmlydHVhbGl6ZWQ6IGZhbHNlLFxuICBkaXNhYmxlT3BhY2l0eTogZmFsc2UsXG59KTtcblxuY29uc3Qgc2xvdHMgPSBkZWZpbmVTbG90czx7XG4gIGRlZmF1bHQ/KHByb3BzOiB7IGluZGVudExldmVsOiBudW1iZXIgfSk6IGFueTtcbiAgcG9zdERlY29yPygpOiBhbnk7XG59PigpO1xuXG5jb25zdCBlbWl0cyA9IGRlZmluZUVtaXRzKFtcImNoZWNrXCIsIFwidW5jaGVja1wiLCBcImV4cGFuZFwiLCBcImNvbGxhcHNlXCJdKTtcblxuY29uc3QgdG9nZ2xlRXhwYW5kZWQgPSAoKSA9PiB7XG4gIGV4cGFuZGVkLnZhbHVlID0gIWV4cGFuZGVkLnZhbHVlO1xuICBlbWl0cyhleHBhbmRlZC52YWx1ZSA/IFwiZXhwYW5kXCIgOiBcImNvbGxhcHNlXCIpO1xufTtcblxuY29uc3QgaXNFeHBhbmRhYmxlID0gY29tcHV0ZWQoKCk6IEJvb2xlYW4gPT4ge1xuICByZXR1cm4gQm9vbGVhbihzbG90cy5kZWZhdWx0IHx8IHByb3BzLmV4cGFuZGFibGUpO1xufSk7XG48L3NjcmlwdD5cblxuPHN0eWxlIGxhbmc9XCJzY3NzXCIgc2NvcGVkPlxuLnRyZWUtaXRlbSB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcblxuICAmLmFsaWduLWljb24td2l0aC10d2lzdHk6bm90KC5jb2xsYXBzaWJsZSkgLnR3aXN0eS1jb250YWluZXIge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IG5vbmUgIWltcG9ydGFudDtcbiAgICBwYWRkaW5nLXJpZ2h0OiAwICFpbXBvcnRhbnQ7XG4gICAgdmlzaWJpbGl0eTogaGlkZGVuO1xuICAgIHdpZHRoOiAwICFpbXBvcnRhbnQ7XG4gIH1cblxuICAudHJlZS1pdGVtLWNvbnRhaW5lciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgcGFkZGluZy1sZWZ0OiBjYWxjKHYtYmluZChpbmRlbnRMZXZlbCkgKiA4cHgpO1xuICAgIHBhZGRpbmctcmlnaHQ6IDEycHg7XG4gICAgdG91Y2gtYWN0aW9uOiBub25lO1xuICAgIHVzZXItc2VsZWN0OiBub25lO1xuXG4gICAgLmluZGVudCB7XG4gICAgICB3aWR0aDogY2FsYyh2LWJpbmQoaW5kZW50TGV2ZWwpICogOHB4KTtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogMDtcbiAgICAgIGxlZnQ6IDE2cHg7XG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcblxuICAgICAgLmluZGVudC1ndWlkZSB7XG4gICAgICAgIHdpZHRoOiA4cHg7XG4gICAgICAgIHRyYW5zaXRpb246IGJvcmRlci1jb2xvciAwLjFzIGxpbmVhcjtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLnR3aXN0eS1jb250YWluZXIge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAyMnB4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICBwYWRkaW5nLXJpZ2h0OiA2cHg7XG4gICAgICB3aWR0aDogMjJweDtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB9XG5cbiAgICAudHJlZS1pdGVtLWNoZWNrYm94IHtcbiAgICAgIGZsZXg6IDE7XG4gICAgICBtaW4td2lkdGg6IDA7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICBtYXJnaW46IDA7XG5cbiAgICAgICY6OnBhcnQoY29udHJvbCkge1xuICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgIH1cblxuICAgICAgJjo6cGFydChsYWJlbCkge1xuICAgICAgICBmbGV4LWdyb3c6IDE7XG4gICAgICAgIGNvbG9yOiBpbmhlcml0O1xuICAgICAgICBtYXJnaW4taW5saW5lLWVuZDogMDtcbiAgICAgIH1cblxuICAgICAgLnRyZWUtaXRlbS10aXRsZSB7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAyMnB4O1xuICAgICAgICBjb2xvcjogaW5oZXJpdDtcbiAgICAgICAgd2hpdGUtc3BhY2U6IHByZTtcbiAgICAgIH1cblxuICAgICAgLnRyZWUtaXRlbS1kZXNjcmlwdGlvbiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAwLjVlbTtcbiAgICAgICAgb3BhY2l0eTogMC43O1xuICAgICAgICB3aGl0ZS1zcGFjZTogcHJlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC5hY3Rpb25zIHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICBtYXgtd2lkdGg6IGZpdC1jb250ZW50O1xuICAgICAgZmxleC1ncm93OiAxMDA7XG4gICAgfVxuXG4gICAgLmhvdmVyICYuY2xhc3MtaG92ZXIsXG4gICAgJjpub3QoLmNsYXNzLWhvdmVyKTpob3ZlciB7XG4gICAgICBjb2xvcjogdmFyKC0tdnNjb2RlLWxpc3QtaG92ZXJGb3JlZ3JvdW5kLCB2YXIoLS12c2NvZGUtZm9yZWdyb3VuZCkpO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdnNjb2RlLWxpc3QtaG92ZXJCYWNrZ3JvdW5kKTtcblxuICAgICAgLmluZGVudCAuaW5kZW50LWd1aWRlIHtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS12c2NvZGUtdHJlZS1pbmFjdGl2ZUluZGVudEd1aWRlc1N0cm9rZSk7XG4gICAgICB9XG5cbiAgICAgIC50cmVlLWl0ZW0tdGl0bGUge1xuICAgICAgICBjb2xvcjogdmFyKC0tdnNjb2RlLWxpc3QtaG92ZXJGb3JlZ3JvdW5kLCB2YXIoLS12c2NvZGUtZm9yZWdyb3VuZCkpO1xuICAgICAgfVxuXG4gICAgICAudHJlZS1pdGVtLWRlc2NyaXB0aW9uIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXZzY29kZS1saXN0LWhvdmVyRm9yZWdyb3VuZCwgdmFyKC0tdnNjb2RlLWZvcmVncm91bmQpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAuaG92ZXIgJi5jbGFzcy1ob3ZlciAuYWN0aW9ucyxcbiAgICAmOm5vdCguY2xhc3MtaG92ZXIpOmhvdmVyIC5hY3Rpb25zLFxuICAgICY6Zm9jdXMtd2l0aGluIC5hY3Rpb25zIHtcbiAgICAgIGRpc3BsYXk6IGluaXRpYWw7XG4gICAgfVxuICB9XG59XG48L3N0eWxlPlxuIiwiaW1wb3J0IHtcbiAgQ29udGVudFJlY29yZEZpbGUsXG4gIEZpbGVNYXRjaFNvdXJjZSxcbn0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9hcGkvdHlwZXMvZmlsZXNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGluY2x1ZGVkRmlsZVRvb2x0aXAoXG4gIGZpbGU6IFBpY2s8Q29udGVudFJlY29yZEZpbGUsIFwicmVsXCIgfCBcInJlYXNvblwiPixcbiAge1xuICAgIGlzRW50cnlwb2ludCA9IGZhbHNlLFxuICAgIGlzUGFja2FnZUZpbGUgPSBmYWxzZSxcbiAgfTogeyBpc0VudHJ5cG9pbnQ/OiBib29sZWFuOyBpc1BhY2thZ2VGaWxlPzogYm9vbGVhbiB9ID0ge30sXG4pIHtcbiAgbGV0IHRvb2x0aXAgPSBgJHtmaWxlLnJlbH0gd2lsbCBiZSBpbmNsdWRlZCBpbiB0aGUgbmV4dCBkZXBsb3ltZW50LmA7XG4gIGlmIChmaWxlLnJlYXNvbikge1xuICAgIHRvb2x0aXAgKz0gYFxcblRoZSBjb25maWd1cmF0aW9uIGZpbGUgJHtmaWxlLnJlYXNvbj8uZmlsZU5hbWV9IGlzIGluY2x1ZGluZyBpdCB3aXRoIHRoZSBwYXR0ZXJuICcke2ZpbGUucmVhc29uPy5wYXR0ZXJufSdgO1xuICB9XG4gIGlmIChpc0VudHJ5cG9pbnQpIHtcbiAgICB0b29sdGlwICs9IGBcXG4ke2ZpbGUucmVsfSBpcyB0aGUgZW50cnlwb2ludC4gRW50cnlwb2ludHMgbXVzdCBiZSBpbmNsdWRlZCBpbiB0aGUgY29uZmlndXJhdGlvbiAnZmlsZXMnIGxpc3QuYDtcbiAgfVxuICBpZiAoaXNQYWNrYWdlRmlsZSkge1xuICAgIHRvb2x0aXAgKz0gYFxcbiR7ZmlsZS5yZWx9IGlzIGEgcGFja2FnZSBmaWxlLiBQYWNrYWdlIGZpbGVzIG11c3QgYmUgaW5jbHVkZWQgaW4gdGhlIGNvbmZpZ3VyYXRpb24gJ2ZpbGVzJyBsaXN0LmA7XG4gIH1cbiAgcmV0dXJuIHRvb2x0aXA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleGNsdWRlZEZpbGVUb29sdGlwKFxuICBmaWxlOiBQaWNrPENvbnRlbnRSZWNvcmRGaWxlLCBcInJlbFwiIHwgXCJyZWFzb25cIj4sXG4pIHtcbiAgbGV0IHRvb2x0aXAgPSBgJHtmaWxlLnJlbH0gd2lsbCBiZSBleGNsdWRlZCBpbiB0aGUgbmV4dCBkZXBsb3ltZW50LmA7XG4gIGlmIChmaWxlLnJlYXNvbikge1xuICAgIGlmIChmaWxlLnJlYXNvbi5zb3VyY2UgPT09IEZpbGVNYXRjaFNvdXJjZS5CVUlMVF9JTikge1xuICAgICAgdG9vbHRpcCArPSBgXFxuVGhpcyBpcyBhIGJ1aWx0LWluIGV4Y2x1c2lvbiBmb3IgdGhlIHBhdHRlcm46ICcke2ZpbGUucmVhc29uLnBhdHRlcm59JyBhbmQgY2Fubm90IGJlIG92ZXJyaWRkZW4uYDtcbiAgICB9IGVsc2UgaWYgKGZpbGUucmVhc29uLnNvdXJjZSA9PT0gRmlsZU1hdGNoU291cmNlLlBFUk1JU1NJT05TX0VSUk9SKSB7XG4gICAgICB0b29sdGlwICs9IFwiXFxuWW91IGRvbid0IGhhdmUgcGVybWlzc2lvbiB0byBhY2Nlc3MgdGhpcyBkaXJlY3RvcnkuXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRvb2x0aXAgKz0gYFxcblRoZSBjb25maWd1cmF0aW9uIGZpbGUgJHtmaWxlLnJlYXNvbj8uZmlsZU5hbWV9IGlzIGV4Y2x1ZGluZyBpdCB3aXRoIHRoZSBwYXR0ZXJuICcke2ZpbGUucmVhc29uPy5wYXR0ZXJufSdgO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0b29sdGlwICs9IGBcXG5JdCBkaWQgbm90IG1hdGNoIGFueSBwYXR0ZXJuIGluIHRoZSBjb25maWd1cmF0aW9uICdmaWxlcycgbGlzdC5gO1xuICB9XG4gIHJldHVybiB0b29sdGlwO1xufVxuIiwiPHRlbXBsYXRlPlxuICA8VHJlZUl0ZW1DaGVja2JveFxuICAgIDp0aXRsZT1cImZpbGUuYmFzZVwiXG4gICAgOmNoZWNrZWQ9XCJpc0luY2x1ZGVkXCJcbiAgICA6ZGlzYWJsZWQ9XCJpc0Rpc2FibGVkXCJcbiAgICA6bGlzdC1zdHlsZT1cImxpc3RTdHlsZVwiXG4gICAgOmRpc2FibGUtb3BhY2l0eT1cImlzRW50cnlwb2ludCB8fCBpc1BhY2thZ2VGaWxlXCJcbiAgICA6aW5kZW50LWxldmVsPVwiZmlsZS5pbmRlbnQgKyAxXCJcbiAgICA6ZXhwYW5kYWJsZT1cImZpbGUuaXNEaXJcIlxuICAgIDp0b29sdGlwPVwidG9vbHRpcFwiXG4gICAgOmFjdGlvbnM9XCJhY3Rpb25zXCJcbiAgICA6dmlydHVhbGl6ZWQ9XCJ0cnVlXCJcbiAgICBAY2hlY2s9XCJmaWxlU3RvcmUuaW5jbHVkZUZpbGUoZmlsZSlcIlxuICAgIEB1bmNoZWNrPVwiZmlsZVN0b3JlLmV4Y2x1ZGVGaWxlKGZpbGUpXCJcbiAgICBAZXhwYW5kPVwiZmlsZVN0b3JlLmV4cGFuZERpcihmaWxlKVwiXG4gICAgQGNvbGxhcHNlPVwiZmlsZVN0b3JlLmNvbGxhcHNlRGlyKGZpbGUpXCJcbiAgPlxuICAgIDx0ZW1wbGF0ZSAjcG9zdERlY29yPlxuICAgICAgPFBvc3REZWNvclxuICAgICAgICB2LWlmPVwiaXNCZWluZ0FkZGVkXCJcbiAgICAgICAgY2xhc3M9XCJ0ZXh0LWdpdC1hZGRlZFwiXG4gICAgICAgIDpkYXRhLWF1dG9tYXRpb249XCJgJHtmaWxlLmlkfS1kZWNvcmF0b3JgXCJcbiAgICAgID5cbiAgICAgICAgQVxuICAgICAgPC9Qb3N0RGVjb3I+XG4gICAgICA8UG9zdERlY29yIHYtaWY9XCJpc0JlaW5nUmVtb3ZlZFwiIGNsYXNzPVwidGV4dC1naXQtZGVsZXRlZFwiPlI8L1Bvc3REZWNvcj5cbiAgICA8L3RlbXBsYXRlPlxuICA8L1RyZWVJdGVtQ2hlY2tib3g+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0IHNldHVwIGxhbmc9XCJ0c1wiPlxuaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tIFwidnVlXCI7XG5cbmltcG9ydCBUcmVlSXRlbUNoZWNrYm94IGZyb20gXCJzcmMvY29tcG9uZW50cy90cmVlL1RyZWVJdGVtQ2hlY2tib3gudnVlXCI7XG5pbXBvcnQgeyBBY3Rpb25CdXR0b24gfSBmcm9tIFwic3JjL2NvbXBvbmVudHMvQWN0aW9uVG9vbGJhci52dWVcIjtcbmltcG9ydCB7IHVzZUhvbWVTdG9yZSB9IGZyb20gXCJzcmMvc3RvcmVzL2hvbWVcIjtcbmltcG9ydCB7IHVzZUZpbGVTdG9yZSB9IGZyb20gXCJzcmMvc3RvcmVzL2ZpbGVcIjtcbmltcG9ydCB7IEZsYXRGaWxlIH0gZnJvbSBcInNyYy91dGlscy9maWxlc1wiO1xuaW1wb3J0IHtcbiAgZXhjbHVkZWRGaWxlVG9vbHRpcCxcbiAgaW5jbHVkZWRGaWxlVG9vbHRpcCxcbn0gZnJvbSBcInNyYy9jb21wb25lbnRzL3ZpZXdzL3Byb2plY3RGaWxlcy90b29sdGlwc1wiO1xuaW1wb3J0IHsgaXNDb25maWd1cmF0aW9uRXJyb3IgfSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2FwaVwiO1xuXG4vKipcbiAqIFRoaXMgY29tcG9uZW50IGlzIHVzZWQgZm9yIGxpc3QgdmlydHVhbGl6YXRpb24uIEl0IG11c3QgYmUgcmVhY3RpdmUgdG8gdGhlXG4gKiBpdGVtIHByb3AgYmVpbmcgdXBkYXRlZCB3aXRob3V0IGJlaW5nIHJlLWNyZWF0ZWQuXG4gKiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9Ba3J5dW0vdnVlLXZpcnR1YWwtc2Nyb2xsZXIvYmxvYi9tYXN0ZXIvcGFja2FnZXMvdnVlLXZpcnR1YWwtc2Nyb2xsZXIvUkVBRE1FLm1kI2ltcG9ydGFudC1ub3Rlc1xuICovXG5pbnRlcmZhY2UgUHJvcHMge1xuICBmaWxlOiBGbGF0RmlsZTtcbn1cblxuY29uc3QgcHJvcHMgPSBkZWZpbmVQcm9wczxQcm9wcz4oKTtcblxuY29uc3QgaG9tZSA9IHVzZUhvbWVTdG9yZSgpO1xuY29uc3QgZmlsZVN0b3JlID0gdXNlRmlsZVN0b3JlKCk7XG5cbmNvbnN0IGlzRGlzYWJsZWQgPSBjb21wdXRlZCgoKTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IHNvdXJjZSA9IHByb3BzLmZpbGUucmVhc29uPy5zb3VyY2U7XG4gIHJldHVybiAoXG4gICAgKGlzRW50cnlwb2ludC52YWx1ZSAmJiBpc0luY2x1ZGVkLnZhbHVlKSB8fFxuICAgIChpc1BhY2thZ2VGaWxlLnZhbHVlICYmIGlzSW5jbHVkZWQudmFsdWUpIHx8XG4gICAgc291cmNlID09PSBcImJ1aWx0LWluXCIgfHxcbiAgICBzb3VyY2UgPT09IFwicGVybWlzc2lvbnNcIlxuICApO1xufSk7XG5cbmNvbnN0IGlzSW5jbHVkZWQgPSBjb21wdXRlZCgoKTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBCb29sZWFuKHByb3BzLmZpbGUucmVhc29uPy5leGNsdWRlID09PSBmYWxzZSk7XG59KTtcblxuY29uc3QgaW5MYXN0RGVwbG95ZWQgPSBjb21wdXRlZCgoKSA9PiB7XG4gIHJldHVybiBmaWxlU3RvcmUubGFzdERlcGxveWVkRmlsZXMuaGFzKHByb3BzLmZpbGUuaWQpO1xufSk7XG5cbmNvbnN0IGlzQmVpbmdBZGRlZCA9IGNvbXB1dGVkKCgpID0+IHtcbiAgcmV0dXJuIHByb3BzLmZpbGUuaXNGaWxlICYmIGlzSW5jbHVkZWQudmFsdWUgJiYgIWluTGFzdERlcGxveWVkLnZhbHVlO1xufSk7XG5cbmNvbnN0IGlzQmVpbmdSZW1vdmVkID0gY29tcHV0ZWQoKCkgPT4ge1xuICByZXR1cm4gcHJvcHMuZmlsZS5pc0ZpbGUgJiYgIWlzSW5jbHVkZWQudmFsdWUgJiYgaW5MYXN0RGVwbG95ZWQudmFsdWU7XG59KTtcblxuY29uc3QgaXNFbnRyeXBvaW50ID0gY29tcHV0ZWQoKCk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBjb25maWcgPSBob21lLnNlbGVjdGVkQ29uZmlndXJhdGlvbjtcbiAgaWYgKGNvbmZpZyAhPSB1bmRlZmluZWQgJiYgIWlzQ29uZmlndXJhdGlvbkVycm9yKGNvbmZpZykpIHtcbiAgICByZXR1cm4gcHJvcHMuZmlsZS5pZCA9PT0gY29uZmlnLmNvbmZpZ3VyYXRpb24uZW50cnlwb2ludDtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59KTtcblxuY29uc3QgaXNQYWNrYWdlRmlsZSA9IGNvbXB1dGVkKCgpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIGlzUHl0aG9uUGFja2FnZUZpbGUudmFsdWUgfHwgaXNSUGFja2FnZUZpbGUudmFsdWU7XG59KTtcblxuY29uc3QgaXNQeXRob25QYWNrYWdlRmlsZSA9IGNvbXB1dGVkKCgpOiBib29sZWFuID0+IHtcbiAgY29uc3QgY29uZmlnID0gaG9tZS5zZWxlY3RlZENvbmZpZ3VyYXRpb247XG4gIGlmIChjb25maWcgIT0gdW5kZWZpbmVkICYmICFpc0NvbmZpZ3VyYXRpb25FcnJvcihjb25maWcpKSB7XG4gICAgcmV0dXJuIHByb3BzLmZpbGUuaWQgPT09IGNvbmZpZy5jb25maWd1cmF0aW9uLnB5dGhvbj8ucGFja2FnZUZpbGU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufSk7XG5cbmNvbnN0IGlzUlBhY2thZ2VGaWxlID0gY29tcHV0ZWQoKCk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBjb25maWcgPSBob21lLnNlbGVjdGVkQ29uZmlndXJhdGlvbjtcbiAgaWYgKGNvbmZpZyAhPSB1bmRlZmluZWQgJiYgIWlzQ29uZmlndXJhdGlvbkVycm9yKGNvbmZpZykpIHtcbiAgICByZXR1cm4gcHJvcHMuZmlsZS5pZCA9PT0gY29uZmlnLmNvbmZpZ3VyYXRpb24ucj8ucGFja2FnZUZpbGU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufSk7XG5cbmNvbnN0IGxpc3RTdHlsZSA9IGNvbXB1dGVkKCgpOiBcImVtcGhhc2l6ZWRcIiB8IFwiZGVmYXVsdFwiIHwgXCJkZWVtcGhhc2l6ZWRcIiA9PiB7XG4gIHJldHVybiBpc0VudHJ5cG9pbnQudmFsdWVcbiAgICA/IFwiZW1waGFzaXplZFwiXG4gICAgOiBpc0luY2x1ZGVkLnZhbHVlXG4gICAgICA/IFwiZGVmYXVsdFwiXG4gICAgICA6IFwiZGVlbXBoYXNpemVkXCI7XG59KTtcblxuY29uc3QgdG9vbHRpcCA9IGNvbXB1dGVkKCgpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gaXNJbmNsdWRlZC52YWx1ZVxuICAgID8gaW5jbHVkZWRGaWxlVG9vbHRpcChwcm9wcy5maWxlLCB7XG4gICAgICAgIGlzRW50cnlwb2ludDogaXNFbnRyeXBvaW50LnZhbHVlLFxuICAgICAgICBpc1BhY2thZ2VGaWxlOiBpc1BhY2thZ2VGaWxlLnZhbHVlLFxuICAgICAgfSlcbiAgICA6IGV4Y2x1ZGVkRmlsZVRvb2x0aXAocHJvcHMuZmlsZSk7XG59KTtcblxuY29uc3QgYWN0aW9ucyA9IGNvbXB1dGVkKCgpOiBBY3Rpb25CdXR0b25bXSA9PiB7XG4gIGxldCBhY3Rpb25zOiBBY3Rpb25CdXR0b25bXSA9IFtdO1xuXG4gIGlmIChwcm9wcy5maWxlLmlzRmlsZSkge1xuICAgIGFjdGlvbnMucHVzaCh7XG4gICAgICBsYWJlbDogXCJPcGVuIGZpbGVcIixcbiAgICAgIGNvZGljb246IFwiY29kaWNvbi1saW5rLWV4dGVybmFsXCIsXG4gICAgICBmbjogKCkgPT4ge1xuICAgICAgICBmaWxlU3RvcmUub3BlbkZpbGUocHJvcHMuZmlsZSk7XG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGFjdGlvbnM7XG59KTtcbjwvc2NyaXB0PlxuIiwiPHRlbXBsYXRlPlxuICA8VHJlZVNlY3Rpb25cbiAgICBkYXRhLWF1dG9tYXRpb249XCJwcm9qZWN0LWZpbGVzXCJcbiAgICB0aXRsZT1cIlByb2plY3QgRmlsZXNcIlxuICAgIDphY3Rpb25zPVwiW1xuICAgICAge1xuICAgICAgICBsYWJlbDogJ1JlZnJlc2ggUHJvamVjdCBGaWxlcycsXG4gICAgICAgIGNvZGljb246ICdjb2RpY29uLXJlZnJlc2gnLFxuICAgICAgICBmbjogKCkgPT4gZmlsZVN0b3JlLnJlZnJlc2hGaWxlcyxcbiAgICAgIH0sXG4gICAgXVwiXG4gID5cbiAgICA8dGVtcGxhdGUgdi1pZj1cImZpbGVTdG9yZS5mbGF0RmlsZXMubGVuZ3RoXCI+XG4gICAgICA8UmVjeWNsZVNjcm9sbGVyXG4gICAgICAgIGNsYXNzPVwic2Nyb2xsZXJcIlxuICAgICAgICA6aXRlbXM9XCJmaWxlU3RvcmUuZmxhdEZpbGVzXCJcbiAgICAgICAgOml0ZW0tc2l6ZT1cIjIyXCJcbiAgICAgICAgdi1zbG90PVwieyBpdGVtIH1cIlxuICAgICAgPlxuICAgICAgICA8UHJvamVjdEZpbGUgOmZpbGU9XCJpdGVtXCIgLz5cbiAgICAgIDwvUmVjeWNsZVNjcm9sbGVyPlxuICAgIDwvdGVtcGxhdGU+XG4gICAgPHAgdi1lbHNlPk5vIGZpbGVzIGZvdW5kPC9wPlxuICA8L1RyZWVTZWN0aW9uPlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdCBzZXR1cCBsYW5nPVwidHNcIj5cbmltcG9ydCBUcmVlU2VjdGlvbiBmcm9tIFwic3JjL2NvbXBvbmVudHMvdHJlZS9UcmVlU2VjdGlvbi52dWVcIjtcbmltcG9ydCB7IHVzZUZpbGVTdG9yZSB9IGZyb20gXCJzcmMvc3RvcmVzL2ZpbGVcIjtcbmltcG9ydCBQcm9qZWN0RmlsZSBmcm9tIFwic3JjL2NvbXBvbmVudHMvdmlld3MvcHJvamVjdEZpbGVzL1Byb2plY3RGaWxlLnZ1ZVwiO1xuXG5jb25zdCBmaWxlU3RvcmUgPSB1c2VGaWxlU3RvcmUoKTtcbjwvc2NyaXB0PlxuXG48c3R5bGUgbGFuZz1cInNjc3NcIiBzY29wZWQ+XG4uc2Nyb2xsZXIge1xuICBtYXgtaGVpZ2h0OiA1MDBweDtcbn1cbjwvc3R5bGU+XG4iLCI8dGVtcGxhdGU+XG4gIDxkaXYgY2xhc3M9XCJ3ZWxjb21lLXZpZXdcIj5cbiAgICA8c2xvdCAvPlxuICA8L2Rpdj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQgc2V0dXAgbGFuZz1cInRzXCI+PC9zY3JpcHQ+XG5cbjxzdHlsZSBsYW5nPVwic2Nzc1wiPlxuLndlbGNvbWUtdmlldyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGNvbG9yOiB2YXIoLS12c2NvZGUtZm9yZWdyb3VuZCk7XG4gIGxpbmUtaGVpZ2h0OiAxLjRlbTtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgcGFkZGluZzogMCAyMHB4IDFlbTtcblxuICAqIHtcbiAgICBtYXJnaW4tYmxvY2stZW5kOiAwO1xuICAgIG1hcmdpbi1ibG9jay1zdGFydDogMWVtO1xuICAgIG1hcmdpbi1pbmxpbmUtZW5kOiAwO1xuICAgIG1hcmdpbi1pbmxpbmUtc3RhcnQ6IDA7XG4gIH1cblxuICB2c2NvZGUtYnV0dG9uIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBtYXgtd2lkdGg6IDMwMHB4O1xuICB9XG59XG48L3N0eWxlPlxuIiwiPHRlbXBsYXRlPlxuICA8ZGl2XG4gICAgY2xhc3M9XCJ0cmVlLWl0ZW1cIlxuICAgIDpjbGFzcz1cIntcbiAgICAgICdhbGlnbi1pY29uLXdpdGgtdHdpc3R5JzogYWxpZ25JY29uV2l0aFR3aXN0eSxcbiAgICAgIGNvbGxhcHNpYmxlOiBpc0V4cGFuZGFibGUsXG4gICAgICAndGV4dC1saXN0LWVtcGhhc2l6ZWQnOiBsaXN0U3R5bGUgPT09ICdlbXBoYXNpemVkJyxcbiAgICAgICd0ZXh0LWZvcmVncm91bmQnOiBsaXN0U3R5bGUgPT09ICdkZWZhdWx0JyxcbiAgICAgICd0ZXh0LWxpc3QtZGVlbXBoYXNpemVkJzogbGlzdFN0eWxlID09PSAnZGVlbXBoYXNpemVkJyxcbiAgICB9XCJcbiAgPlxuICAgIDxkaXZcbiAgICAgIGNsYXNzPVwidHJlZS1pdGVtLWNvbnRhaW5lclwiXG4gICAgICA6Y2xhc3M9XCJ2aXJ0dWFsaXplZCA/ICdjbGFzcy1ob3ZlcicgOiB1bmRlZmluZWRcIlxuICAgICAgOnRpdGxlPVwidG9vbHRpcFwiXG4gICAgICB2LW9uPVwie1xuICAgICAgICBjbGljazogaXNFeHBhbmRhYmxlID8gdG9nZ2xlRXhwYW5kZWQgOiB1bmRlZmluZWQsXG4gICAgICB9XCJcbiAgICA+XG4gICAgICA8ZGl2IGNsYXNzPVwiaW5kZW50XCI+XG4gICAgICAgIDxkaXYgdi1mb3I9XCJfIGluIGluZGVudExldmVsIC0gMVwiIGNsYXNzPVwiaW5kZW50LWd1aWRlXCI+PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3M9XCJ0d2lzdHktY29udGFpbmVyIHRleHQtaWNvblwiXG4gICAgICAgIDpjbGFzcz1cIltcbiAgICAgICAgICB7IGNvZGljb246IGlzRXhwYW5kYWJsZSB9LFxuICAgICAgICAgIGV4cGFuZGFibGUgfHwgJHNsb3RzLmRlZmF1bHRcbiAgICAgICAgICAgID8gZXhwYW5kZWRcbiAgICAgICAgICAgICAgPyAnY29kaWNvbi1jaGV2cm9uLWRvd24nXG4gICAgICAgICAgICAgIDogJ2NvZGljb24tY2hldnJvbi1yaWdodCdcbiAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICBdXCJcbiAgICAgIC8+XG4gICAgICA8ZGl2XG4gICAgICAgIHYtaWY9XCJjb2RpY29uXCJcbiAgICAgICAgY2xhc3M9XCJ0cmVlLWl0ZW0taWNvbiB0ZXh0LWljb24gY29kaWNvblwiXG4gICAgICAgIDpjbGFzcz1cImNvZGljb25cIlxuICAgICAgLz5cbiAgICAgIDxkaXYgY2xhc3M9XCJ0cmVlLWl0ZW0tbGFiZWwtY29udGFpbmVyXCI+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwidHJlZS1pdGVtLXRpdGxlXCIgZGF0YS1hdXRvbWF0aW9uPVwicmVxXCI+e3sgdGl0bGUgfX08L3NwYW4+XG4gICAgICAgIDxzcGFuIHYtaWY9XCIkc2xvdHMuZGVzY3JpcHRpb25cIiBjbGFzcz1cInRyZWUtaXRlbS1kZXNjcmlwdGlvblwiPlxuICAgICAgICAgIDxzbG90IG5hbWU9XCJkZXNjcmlwdGlvblwiIC8+XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPHNwYW4gdi1lbHNlLWlmPVwiZGVzY3JpcHRpb25cIiBjbGFzcz1cInRyZWUtaXRlbS1kZXNjcmlwdGlvblwiPlxuICAgICAgICAgIHt7IGRlc2NyaXB0aW9uIH19XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiB2LWlmPVwiYWN0aW9uc1wiIGNsYXNzPVwiYWN0aW9uc1wiPlxuICAgICAgICA8QWN0aW9uVG9vbGJhciA6dGl0bGU9XCJ0aXRsZVwiIDphY3Rpb25zPVwiYWN0aW9uc1wiIC8+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgdi1pZj1cIiRzbG90cy5wb3N0RGVjb3JcIj5cbiAgICAgICAgPHNsb3QgbmFtZT1cInBvc3REZWNvclwiIC8+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgdi1zaG93PVwiaXNFeHBhbmRhYmxlICYmIGV4cGFuZGVkXCIgY2xhc3M9XCJ0cmVlLWl0ZW0tY2hpbGRyZW5cIj5cbiAgICAgIDxzbG90IDppbmRlbnQtbGV2ZWw9XCJpbmRlbnRMZXZlbCArIDFcIiAvPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQgc2V0dXAgbGFuZz1cInRzXCI+XG5pbXBvcnQgeyBjb21wdXRlZCB9IGZyb20gXCJ2dWVcIjtcblxuaW1wb3J0IEFjdGlvblRvb2xiYXIsIHsgQWN0aW9uQnV0dG9uIH0gZnJvbSBcInNyYy9jb21wb25lbnRzL0FjdGlvblRvb2xiYXIudnVlXCI7XG5cbmV4cG9ydCB0eXBlIFRyZWVJdGVtU3R5bGUgPSBcImVtcGhhc2l6ZWRcIiB8IFwiZGVmYXVsdFwiIHwgXCJkZWVtcGhhc2l6ZWRcIjtcblxuY29uc3QgZXhwYW5kZWQgPSBkZWZpbmVNb2RlbChcImV4cGFuZGVkXCIsIHsgcmVxdWlyZWQ6IGZhbHNlLCBkZWZhdWx0OiBmYWxzZSB9KTtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgdGl0bGU6IHN0cmluZztcbiAgbGlzdFN0eWxlPzogVHJlZUl0ZW1TdHlsZTtcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIHRvb2x0aXA/OiBzdHJpbmc7XG4gIGFsaWduSWNvbldpdGhUd2lzdHk/OiBib29sZWFuO1xuICBjb2RpY29uPzogc3RyaW5nO1xuICBhY3Rpb25zPzogQWN0aW9uQnV0dG9uW107XG4gIGluZGVudExldmVsPzogbnVtYmVyO1xuICBleHBhbmRhYmxlPzogYm9vbGVhbjtcbiAgdmlydHVhbGl6ZWQ/OiBib29sZWFuO1xufVxuXG5jb25zdCBwcm9wcyA9IHdpdGhEZWZhdWx0cyhkZWZpbmVQcm9wczxQcm9wcz4oKSwge1xuICBsaXN0U3R5bGU6IFwiZGVmYXVsdFwiLFxuICBpbmRlbnRMZXZlbDogMSxcbiAgZXhwYW5kYWJsZTogZmFsc2UsXG4gIHZpcnR1YWxpemVkOiBmYWxzZSxcbn0pO1xuXG5jb25zdCBzbG90cyA9IGRlZmluZVNsb3RzPHtcbiAgZGVmYXVsdD8ocHJvcHM6IHsgaW5kZW50TGV2ZWw6IG51bWJlciB9KTogYW55O1xuICBkZXNjcmlwdGlvbj8oKTogYW55O1xuICBwb3N0RGVjb3I/KCk6IGFueTtcbn0+KCk7XG5cbmNvbnN0IGVtaXRzID0gZGVmaW5lRW1pdHMoW1wiZXhwYW5kXCIsIFwiY29sbGFwc2VcIl0pO1xuXG5jb25zdCB0b2dnbGVFeHBhbmRlZCA9ICgpID0+IHtcbiAgZXhwYW5kZWQudmFsdWUgPSAhZXhwYW5kZWQudmFsdWU7XG4gIGVtaXRzKGV4cGFuZGVkLnZhbHVlID8gXCJleHBhbmRcIiA6IFwiY29sbGFwc2VcIik7XG59O1xuXG5jb25zdCBpc0V4cGFuZGFibGUgPSBjb21wdXRlZCgoKTogQm9vbGVhbiA9PiB7XG4gIHJldHVybiBCb29sZWFuKHNsb3RzLmRlZmF1bHQgfHwgcHJvcHMuZXhwYW5kYWJsZSk7XG59KTtcbjwvc2NyaXB0PlxuXG48c3R5bGUgbGFuZz1cInNjc3NcIiBzY29wZWQ+XG4udHJlZS1pdGVtIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuXG4gICYuYWxpZ24taWNvbi13aXRoLXR3aXN0eTpub3QoLmNvbGxhcHNpYmxlKSAudHdpc3R5LWNvbnRhaW5lciB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbm9uZSAhaW1wb3J0YW50O1xuICAgIHBhZGRpbmctcmlnaHQ6IDAgIWltcG9ydGFudDtcbiAgICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gICAgd2lkdGg6IDAgIWltcG9ydGFudDtcbiAgfVxuXG4gIC50cmVlLWl0ZW0tY29udGFpbmVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICBwYWRkaW5nLWxlZnQ6IGNhbGModi1iaW5kKGluZGVudExldmVsKSAqIDhweCk7XG4gICAgcGFkZGluZy1yaWdodDogMTJweDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgdG91Y2gtYWN0aW9uOiBub25lO1xuICAgIHVzZXItc2VsZWN0OiBub25lO1xuXG4gICAgLmluZGVudCB7XG4gICAgICB3aWR0aDogY2FsYyh2LWJpbmQoaW5kZW50TGV2ZWwpICogOHB4KTtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogMDtcbiAgICAgIGxlZnQ6IDE2cHg7XG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcblxuICAgICAgLmluZGVudC1ndWlkZSB7XG4gICAgICAgIHdpZHRoOiA4cHg7XG4gICAgICAgIHRyYW5zaXRpb246IGJvcmRlci1jb2xvciAwLjFzIGxpbmVhcjtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLnR3aXN0eS1jb250YWluZXIge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAyMnB4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICBwYWRkaW5nLXJpZ2h0OiA2cHg7XG4gICAgICB3aWR0aDogMjJweDtcbiAgICB9XG5cbiAgICAudHJlZS1pdGVtLWljb24ge1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IDA7XG4gICAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICAgICAgYmFja2dyb3VuZC1zaXplOiAxNnB4O1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGhlaWdodDogMjJweDtcbiAgICAgIHdpZHRoOiAyMnB4O1xuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICBwYWRkaW5nLXJpZ2h0OiA2cHg7XG4gICAgICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiBhbnRpYWxpYXNlZDtcbiAgICB9XG5cbiAgICAudHJlZS1pdGVtLWxhYmVsLWNvbnRhaW5lciB7XG4gICAgICBmbGV4OiAxO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIG1pbi13aWR0aDogMDtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcblxuICAgICAgLnRyZWUtaXRlbS10aXRsZSB7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAyMnB4O1xuICAgICAgICBjb2xvcjogaW5oZXJpdDtcbiAgICAgICAgd2hpdGUtc3BhY2U6IHByZTtcbiAgICAgICAgbWluLXdpZHRoOiAwO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgIH1cblxuICAgICAgLnRyZWUtaXRlbS1kZXNjcmlwdGlvbiB7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAyMnB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBtYXJnaW4tbGVmdDogMC41ZW07XG4gICAgICAgIGZsZXgtc2hyaW5rOiAxMDAwMDA7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBwcmU7XG4gICAgICAgIG1pbi13aWR0aDogMDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG5cbiAgICAgICAgJjpub3QoOmhhcyhpbnB1dCkpIHtcbiAgICAgICAgICBvcGFjaXR5OiAwLjc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAuYWN0aW9ucyB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgbWF4LXdpZHRoOiBmaXQtY29udGVudDtcbiAgICAgIGZsZXgtZ3JvdzogMTAwO1xuICAgIH1cblxuICAgIC5ob3ZlciAmLmNsYXNzLWhvdmVyLFxuICAgICY6bm90KC5jbGFzcy1ob3Zlcik6aG92ZXIge1xuICAgICAgY29sb3I6IHZhcigtLXZzY29kZS1saXN0LWhvdmVyRm9yZWdyb3VuZCwgdmFyKC0tdnNjb2RlLWZvcmVncm91bmQpKTtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXZzY29kZS1saXN0LWhvdmVyQmFja2dyb3VuZCk7XG5cbiAgICAgIC5pbmRlbnQgLmluZGVudC1ndWlkZSB7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tdnNjb2RlLXRyZWUtaW5hY3RpdmVJbmRlbnRHdWlkZXNTdHJva2UpO1xuICAgICAgfVxuXG4gICAgICAudHJlZS1pdGVtLXRpdGxlIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXZzY29kZS1saXN0LWhvdmVyRm9yZWdyb3VuZCwgdmFyKC0tdnNjb2RlLWZvcmVncm91bmQpKTtcbiAgICAgIH1cblxuICAgICAgLnRyZWUtaXRlbS1kZXNjcmlwdGlvbiB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS12c2NvZGUtbGlzdC1ob3ZlckZvcmVncm91bmQsIHZhcigtLXZzY29kZS1mb3JlZ3JvdW5kKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLmhvdmVyICYuY2xhc3MtaG92ZXIgLmFjdGlvbnMsXG4gICAgJjpub3QoLmNsYXNzLWhvdmVyKTpob3ZlciAuYWN0aW9ucyxcbiAgICAmOmZvY3VzLXdpdGhpbiAuYWN0aW9ucyB7XG4gICAgICBkaXNwbGF5OiBpbml0aWFsO1xuICAgIH1cbiAgfVxufVxuPC9zdHlsZT5cbiIsIjx0ZW1wbGF0ZT5cbiAgPGlucHV0XG4gICAgdi1tb2RlbD1cIm1vZGVsXCJcbiAgICByZWY9XCJpbnB1dFwiXG4gICAgY2xhc3M9XCJzaWRlYmFyLWlucHV0XCJcbiAgICA6YXJpYS1sYWJlbD1cImFyaWFMYWJlbFwiXG4gICAgQGtleWRvd24ucHJldmVudC5lbnRlcj1cIiRlbWl0KCdzdWJtaXQnKVwiXG4gICAgQGtleWRvd24uZXNjYXBlPVwiJGVtaXQoJ2NhbmNlbCcpXCJcbiAgLz5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQgc2V0dXAgbGFuZz1cInRzXCI+XG5pbXBvcnQgeyBjb21wdXRlZCwgcmVmIH0gZnJvbSBcInZ1ZVwiO1xuY29uc3QgbW9kZWwgPSBkZWZpbmVNb2RlbCgpO1xuXG5jb25zdCBwcm9wcyA9IGRlZmluZVByb3BzPHtcbiAgbGFiZWw6IHN0cmluZztcbn0+KCk7XG5cbmRlZmluZUVtaXRzKFtcInN1Ym1pdFwiLCBcImNhbmNlbFwiXSk7XG5cbmNvbnN0IGlucHV0ID0gcmVmPEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsPihudWxsKTtcblxuY29uc3QgYXJpYUxhYmVsID0gY29tcHV0ZWQoXG4gICgpID0+IGAke3Byb3BzLmxhYmVsfS4gUHJlc3MgRW50ZXIgdG8gY29uZmlybSBvciBFc2NhcGUgdG8gY2FuY2VsLmAsXG4pO1xuXG5jb25zdCBzZWxlY3QgPSAoKSA9PiB7XG4gIGlucHV0LnZhbHVlPy5zZWxlY3QoKTtcbn07XG5cbmRlZmluZUV4cG9zZSh7IHNlbGVjdCB9KTtcbjwvc2NyaXB0PlxuXG48c3R5bGUgbGFuZz1cInNjc3NcIiBzY29wZWQ+XG4uc2lkZWJhci1pbnB1dCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXZzY29kZS1pbnB1dC1iYWNrZ3JvdW5kKTtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tdnNjb2RlLWlucHV0LWJvcmRlciwgdHJhbnNwYXJlbnQpO1xuICBjb2xvcjogdmFyKC0tdnNjb2RlLWlucHV0LWZvcmVncm91bmQpO1xuICBsaW5lLWhlaWdodDogMjBweDtcbiAgcGFkZGluZzogMDtcbiAgb3V0bGluZS1jb2xvcjogdmFyKC0tdnNjb2RlLWZvY3VzQm9yZGVyKTtcbiAgb3V0bGluZS1vZmZzZXQ6IC0xcHg7XG4gIG91dGxpbmUtc3R5bGU6IHNvbGlkO1xuICBvdXRsaW5lLXdpZHRoOiAxcHg7XG59XG48L3N0eWxlPlxuIiwiPHRlbXBsYXRlPlxuICA8VHJlZUl0ZW1cbiAgICA6dGl0bGU9XCJuYW1lXCJcbiAgICA6YWN0aW9ucz1cImFjdGlvbnNcIlxuICAgIDpjb2RpY29uPVwiXG4gICAgICBuZWVkc1ZhbHVlXG4gICAgICAgID8gJ2NvZGljb24td2FybmluZydcbiAgICAgICAgOiBzZWNyZXRWYWx1ZVxuICAgICAgICAgID8gJ2NvZGljb24tY2xvdWQtdXBsb2FkJ1xuICAgICAgICAgIDogJ2NvZGljb24tY2hlY2snXG4gICAgXCJcbiAgICA6bGlzdC1zdHlsZT1cIlxuICAgICAgbmVlZHNWYWx1ZSB8fCBzZWNyZXRWYWx1ZSB8fCBpc0VkaXRpbmcgPyAnZGVmYXVsdCcgOiAnZGVlbXBoYXNpemVkJ1xuICAgIFwiXG4gICAgOnRvb2x0aXA9XCJ0b29sdGlwXCJcbiAgICBhbGlnbi1pY29uLXdpdGgtdHdpc3R5XG4gICAgOmRhdGEtdnNjb2RlLWNvbnRleHQ9XCJ2c2NvZGVDb250ZXh0XCJcbiAgPlxuICAgIDx0ZW1wbGF0ZSAjZGVzY3JpcHRpb24+XG4gICAgICA8U2lkZWJhcklucHV0XG4gICAgICAgIHYtaWY9XCJpc0VkaXRpbmdcIlxuICAgICAgICByZWY9XCJpbnB1dFwiXG4gICAgICAgIHYtbW9kZWw9XCJpbnB1dFZhbHVlXCJcbiAgICAgICAgY2xhc3M9XCJ3LWZ1bGxcIlxuICAgICAgICBsYWJlbD1cIlR5cGUgc2VjcmV0IHZhbHVlXCJcbiAgICAgICAgQHN1Ym1pdD1cInVwZGF0ZVNlY3JldFwiXG4gICAgICAgIEBjYW5jZWw9XCJpc0VkaXRpbmcgPSBmYWxzZVwiXG4gICAgICAvPlxuICAgICAgPHRlbXBsYXRlIHYtZWxzZS1pZj1cIiFuZWVkc1ZhbHVlXCI+4oCi4oCi4oCi4oCi4oCi4oCiPC90ZW1wbGF0ZT5cbiAgICA8L3RlbXBsYXRlPlxuICA8L1RyZWVJdGVtPlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdCBzZXR1cCBsYW5nPVwidHNcIj5cbmltcG9ydCB7IGNvbXB1dGVkLCByZWYsIG5leHRUaWNrIH0gZnJvbSBcInZ1ZVwiO1xuXG5pbXBvcnQgVHJlZUl0ZW0gZnJvbSBcInNyYy9jb21wb25lbnRzL3RyZWUvVHJlZUl0ZW0udnVlXCI7XG5pbXBvcnQgU2lkZWJhcklucHV0IGZyb20gXCJzcmMvY29tcG9uZW50cy9TaWRlYmFySW5wdXQudnVlXCI7XG5pbXBvcnQgeyB1c2VIb21lU3RvcmUgfSBmcm9tIFwic3JjL3N0b3Jlcy9ob21lXCI7XG5pbXBvcnQgeyBBY3Rpb25CdXR0b24gfSBmcm9tIFwic3JjL2NvbXBvbmVudHMvQWN0aW9uVG9vbGJhci52dWVcIjtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgbmFtZTogc3RyaW5nO1xufVxuXG5jb25zdCBwcm9wcyA9IGRlZmluZVByb3BzPFByb3BzPigpO1xuXG5jb25zdCBpbnB1dCA9IHJlZjxJbnN0YW5jZVR5cGU8dHlwZW9mIFNpZGViYXJJbnB1dD4gfCBudWxsPihudWxsKTtcbmNvbnN0IGlzRWRpdGluZyA9IHJlZihmYWxzZSk7XG5jb25zdCBpbnB1dFZhbHVlID0gcmVmPHN0cmluZz4oKTtcblxuY29uc3QgaG9tZSA9IHVzZUhvbWVTdG9yZSgpO1xuXG5jb25zdCBzZWNyZXRWYWx1ZSA9IGNvbXB1dGVkKCgpID0+IGhvbWUuc2VjcmV0cy5nZXQocHJvcHMubmFtZSkpO1xuXG5jb25zdCBvblNlcnZlciA9IGNvbXB1dGVkKCgpID0+IGhvbWUuc2VydmVyU2VjcmV0cy5oYXMocHJvcHMubmFtZSkpO1xuXG5jb25zdCBuZWVkc1ZhbHVlID0gY29tcHV0ZWQoKCkgPT4gIXNlY3JldFZhbHVlLnZhbHVlICYmICFvblNlcnZlci52YWx1ZSk7XG5cbmNvbnN0IGlucHV0U2VjcmV0ID0gKCkgPT4ge1xuICAvLyBVcGRhdGUgaW5wdXRWYWx1ZSBpbiBjYXNlIHRoZSBzZWNyZXQgdmFsdWUgaGFzIGNoYW5nZWQgb3IgYmVlbiBjbGVhcmVkXG4gIGlucHV0VmFsdWUudmFsdWUgPSBzZWNyZXRWYWx1ZS52YWx1ZTtcbiAgaXNFZGl0aW5nLnZhbHVlID0gdHJ1ZTtcbiAgLy8gV2FpdCBmb3IgbmV4dCB0aWNrIHRvIGVuc3VyZSB0aGUgaW5wdXQgaXMgcmVuZGVyZWRcbiAgbmV4dFRpY2soKCkgPT4gaW5wdXQudmFsdWU/LnNlbGVjdCgpKTtcbn07XG5cbmNvbnN0IHVwZGF0ZVNlY3JldCA9ICgpID0+IHtcbiAgaG9tZS5zZWNyZXRzLnNldChwcm9wcy5uYW1lLCBpbnB1dFZhbHVlLnZhbHVlKTtcbiAgaXNFZGl0aW5nLnZhbHVlID0gZmFsc2U7XG59O1xuXG5jb25zdCB0b29sdGlwID0gY29tcHV0ZWQoKCkgPT4ge1xuICBpZiAob25TZXJ2ZXIudmFsdWUpIHtcbiAgICBpZiAoc2VjcmV0VmFsdWUudmFsdWUpIHtcbiAgICAgIHJldHVybiBcIk9uIHRoZSBuZXh0IGRlcGxveSB0aGUgc2VjcmV0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2l0aCB0aGUgbmV3IHZhbHVlLlwiO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gXCJUaGUgdmFsdWUgaXMgc2V0IG9uIHRoZSBzZXJ2ZXIuIFNldCBhIG5ldyB2YWx1ZSB0byBvdmVyd3JpdGUgaXQgb24gdGhlIG5leHQgZGVwbG95LlwiO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoc2VjcmV0VmFsdWUudmFsdWUpIHtcbiAgICAgIHJldHVybiBcIk9uIHRoZSBuZXh0IGRlcGxveSB0aGUgc2VjcmV0IHdpbGwgYmUgc2V0LlwiO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gXCJUaGUgc2VjcmV0IHdpbGwgbm90IGJlIGNyZWF0ZWQgb24gdGhlIG5leHQgZGVwbG95IHdpdGhvdXQgYSB2YWx1ZS4gU2V0IGEgdmFsdWUgdG8gc2V0IGl0LlwiO1xuICAgIH1cbiAgfVxufSk7XG5cbmNvbnN0IGFjdGlvbnMgPSBjb21wdXRlZDxBY3Rpb25CdXR0b25bXT4oKCkgPT4ge1xuICAvLyBTaG93IG5vIGFjdGlvbnMgd2hpbGUgdGhlIHZhbHVlIGlzIGJlaW5nIGVkaXRlZFxuICBpZiAoaXNFZGl0aW5nLnZhbHVlKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgY29uc3QgcmVzdWx0ID0gW1xuICAgIHtcbiAgICAgIGxhYmVsOiBcIkVkaXQgVmFsdWVcIixcbiAgICAgIGNvZGljb246IFwiY29kaWNvbi1zeW1ib2wtc3RyaW5nXCIsXG4gICAgICBmbjogaW5wdXRTZWNyZXQsXG4gICAgfSxcbiAgXTtcblxuICBpZiAoc2VjcmV0VmFsdWUudmFsdWUpIHtcbiAgICByZXN1bHQucHVzaCh7XG4gICAgICBsYWJlbDogXCJDbGVhciBWYWx1ZVwiLFxuICAgICAgY29kaWNvbjogXCJjb2RpY29uLXJlbW92ZVwiLFxuICAgICAgZm46ICgpID0+IHtcbiAgICAgICAgaG9tZS5zZWNyZXRzLnNldChwcm9wcy5uYW1lLCB1bmRlZmluZWQpO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59KTtcblxuY29uc3QgdnNjb2RlQ29udGV4dCA9IGNvbXB1dGVkKCgpID0+IHtcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICBuYW1lOiBwcm9wcy5uYW1lLFxuICAgIHdlYnZpZXdTZWN0aW9uOiBcInNlY3JldHMtdHJlZS1pdGVtXCIsXG4gICAgcHJldmVudERlZmF1bHRDb250ZXh0TWVudUl0ZW1zOiB0cnVlLFxuICB9KTtcbn0pO1xuPC9zY3JpcHQ+XG4iLCI8dGVtcGxhdGU+XG4gIDxUcmVlU2VjdGlvblxuICAgIHRpdGxlPVwiU2VjcmV0c1wiXG4gICAgOmFjdGlvbnM9XCJzZWN0aW9uQWN0aW9uc1wiXG4gICAgOmNvdW50PVwiaG9tZS5zZWNyZXRzV2l0aFZhbHVlQ291bnRcIlxuICA+XG4gICAgPHRlbXBsYXRlIHYtaWY9XCJob21lLnNlY3JldHMuc2l6ZVwiPlxuICAgICAgPFNlY3JldCB2LWZvcj1cIltuYW1lXSBpbiBob21lLnNlY3JldHNcIiA6bmFtZT1cIm5hbWVcIiA6a2V5PVwibmFtZVwiIC8+XG4gICAgPC90ZW1wbGF0ZT5cbiAgICA8V2VsY29tZVZpZXcgdi1lbHNlPlxuICAgICAgPHA+Tm8gc2VjcmV0cyBoYXZlIGJlZW4gYWRkZWQgdG8gdGhlIGNvbmZpZ3VyYXRpb24uPC9wPlxuICAgIDwvV2VsY29tZVZpZXc+XG4gIDwvVHJlZVNlY3Rpb24+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0IHNldHVwIGxhbmc9XCJ0c1wiPlxuaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tIFwidnVlXCI7XG5cbmltcG9ydCB7IEFjdGlvbkJ1dHRvbiB9IGZyb20gXCJzcmMvY29tcG9uZW50cy9BY3Rpb25Ub29sYmFyLnZ1ZVwiO1xuaW1wb3J0IFRyZWVTZWN0aW9uIGZyb20gXCJzcmMvY29tcG9uZW50cy90cmVlL1RyZWVTZWN0aW9uLnZ1ZVwiO1xuaW1wb3J0IFdlbGNvbWVWaWV3IGZyb20gXCJzcmMvY29tcG9uZW50cy9XZWxjb21lVmlldy52dWVcIjtcbmltcG9ydCB7IHVzZUhvbWVTdG9yZSB9IGZyb20gXCJzcmMvc3RvcmVzL2hvbWVcIjtcbmltcG9ydCBTZWNyZXQgZnJvbSBcInNyYy9jb21wb25lbnRzL3ZpZXdzL3NlY3JldHMvU2VjcmV0LnZ1ZVwiO1xuaW1wb3J0IHsgdXNlSG9zdENvbmR1aXRTZXJ2aWNlIH0gZnJvbSBcInNyYy9Ib3N0Q29uZHVpdFNlcnZpY2VcIjtcblxuaW1wb3J0IHsgV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlIH0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy90eXBlcy9tZXNzYWdlcy93ZWJ2aWV3VG9Ib3N0TWVzc2FnZXNcIjtcblxuY29uc3QgaG9tZSA9IHVzZUhvbWVTdG9yZSgpO1xuY29uc3QgeyBzZW5kTXNnIH0gPSB1c2VIb3N0Q29uZHVpdFNlcnZpY2UoKTtcblxuY29uc3Qgc2VjdGlvbkFjdGlvbnMgPSBjb21wdXRlZDxBY3Rpb25CdXR0b25bXT4oKCkgPT4ge1xuICBjb25zdCByZXN1bHQ6IEFjdGlvbkJ1dHRvbltdID0gW1xuICAgIHtcbiAgICAgIGxhYmVsOiBcIkFkZCBTZWNyZXRcIixcbiAgICAgIGNvZGljb246IFwiY29kaWNvbi1hZGRcIixcbiAgICAgIGZuOiAoKSA9PiB7XG4gICAgICAgIHNlbmRNc2coe1xuICAgICAgICAgIGtpbmQ6IFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5BRERfU0VDUkVULFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfSxcbiAgXTtcblxuICBpZiAoaG9tZS5zZWNyZXRzV2l0aFZhbHVlQ291bnQgPiAwKSB7XG4gICAgcmVzdWx0LnB1c2goe1xuICAgICAgbGFiZWw6IFwiQ2xlYXIgVmFsdWVzIGZvciBhbGwgU2VjcmV0c1wiLFxuICAgICAgY29kaWNvbjogXCJjb2RpY29uLWNsZWFyLWFsbFwiLFxuICAgICAgZm46ICgpID0+IHtcbiAgICAgICAgaG9tZS5zZWNyZXRzLmZvckVhY2goKF8sIGtleSkgPT4ge1xuICAgICAgICAgIGhvbWUuc2VjcmV0cy5zZXQoa2V5LCB1bmRlZmluZWQpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufSk7XG48L3NjcmlwdD5cbiIsIjx0ZW1wbGF0ZT5cbiAgPFRyZWVTZWN0aW9uXG4gICAgdGl0bGU9XCJQeXRob24gUGFja2FnZXNcIlxuICAgIGRhdGEtYXV0b21hdGlvbj1cInB5dGhvbi1wYWNrYWdlc1wiXG4gICAgOmFjdGlvbnM9XCJweXRob25QYWNrYWdlQWN0aW9uc1wiXG4gICAgOmNvZGljb249XCJob21lLnB5dGhvbi5hY3RpdmUuaXNBbGVydEFjdGl2ZSA/IGBjb2RpY29uLWFsZXJ0YCA6IGBgXCJcbiAgPlxuICAgIDxXZWxjb21lVmlldyB2LWlmPVwic2hvd1dlbGNvbWVWaWV3XCI+XG4gICAgICA8dGVtcGxhdGUgdi1pZj1cImhvbWUucHl0aG9uLmFjdGl2ZS5pc01pc3NpbmdSZXF1aXJlbWVudHNcIj5cbiAgICAgICAgPHA+XG4gICAgICAgICAgVG8gZGVwbG95IFB5dGhvbiBjb250ZW50LCB5b3UgbmVlZCBhIHBhY2thZ2UgZmlsZSBsaXN0aW5nIGFueSBwYWNrYWdlXG4gICAgICAgICAgZGVwZW5kZW5jaWVzLCBidXQgdGhlIGZpbGUgZG9lcyBub3QgZXhpc3QuIENsaWNrIFNjYW4gdG8gY3JlYXRlIG9uZVxuICAgICAgICAgIGJhc2VkIG9uIHRoZSBmaWxlcyBpbiB5b3VyIHByb2plY3QgYW5kIHlvdXIgY29uZmlndXJhdGlvbi5cbiAgICAgICAgPC9wPlxuICAgICAgICA8dnNjb2RlLWJ1dHRvbiBAY2xpY2s9XCJvblNjYW5Gb3JQYWNrYWdlUmVxdWlyZW1lbnRzKClcIj5cbiAgICAgICAgICBTY2FuXG4gICAgICAgIDwvdnNjb2RlLWJ1dHRvbj5cbiAgICAgIDwvdGVtcGxhdGU+XG4gICAgICA8dGVtcGxhdGUgdi1lbHNlLWlmPVwiIWhvbWUucHl0aG9uLmFjdGl2ZS5pc0luUHJvamVjdFwiPlxuICAgICAgICA8cD5cbiAgICAgICAgICBUaGlzIHByb2plY3QgaXMgbm90IGNvbmZpZ3VyZWQgdG8gdXNlIFB5dGhvbi4gVG8gY29uZmlndXJlIFB5dGhvbiwgYWRkXG4gICAgICAgICAgYSBbcHl0aG9uXSBzZWN0aW9uIHRvIHlvdXIgY29uZmlndXJhdGlvbiBmaWxlLlxuICAgICAgICA8L3A+XG4gICAgICA8L3RlbXBsYXRlPlxuICAgICAgPHRlbXBsYXRlIHYtZWxzZS1pZj1cImhvbWUucHl0aG9uLmFjdGl2ZS5pc0VtcHR5UmVxdWlyZW1lbnRzXCI+XG4gICAgICAgIDxwPlxuICAgICAgICAgIFRoaXMgcHJvamVjdCBjdXJyZW50bHkgaGFzIG5vIFB5dGhvbiBwYWNrYWdlIHJlcXVpcmVtZW50cy4gSWYgdGhpcyBpc1xuICAgICAgICAgIG5vdCBhY2N1cmF0ZSwgY2xpY2sgU2NhbiB0byB1cGRhdGUgYmFzZWQgb24gdGhlIGZpbGVzIGluIHlvdXIgcHJvamVjdFxuICAgICAgICAgIGFuZCBjb25maWd1cmF0aW9uLlxuICAgICAgICA8L3A+XG4gICAgICAgIDx2c2NvZGUtYnV0dG9uIEBjbGljaz1cIm9uU2NhbkZvclBhY2thZ2VSZXF1aXJlbWVudHMoKVwiPlxuICAgICAgICAgIFNjYW5cbiAgICAgICAgPC92c2NvZGUtYnV0dG9uPlxuICAgICAgPC90ZW1wbGF0ZT5cbiAgICA8L1dlbGNvbWVWaWV3PlxuICAgIDx0ZW1wbGF0ZSB2LWVsc2U+XG4gICAgICA8VHJlZUl0ZW1cbiAgICAgICAgdi1mb3I9XCJwa2cgaW4gaG9tZS5weXRob25QYWNrYWdlc1wiXG4gICAgICAgIDprZXk9XCJwa2dcIlxuICAgICAgICA6dGl0bGU9XCJwa2dcIlxuICAgICAgICBjb2RpY29uPVwiY29kaWNvbi1wYWNrYWdlXCJcbiAgICAgICAgYWxpZ24taWNvbi13aXRoLXR3aXN0eVxuICAgICAgLz5cbiAgICA8L3RlbXBsYXRlPlxuICA8L1RyZWVTZWN0aW9uPlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdCBzZXR1cCBsYW5nPVwidHNcIj5cbmltcG9ydCBUcmVlSXRlbSBmcm9tIFwic3JjL2NvbXBvbmVudHMvdHJlZS9UcmVlSXRlbS52dWVcIjtcbmltcG9ydCBUcmVlU2VjdGlvbiBmcm9tIFwic3JjL2NvbXBvbmVudHMvdHJlZS9UcmVlU2VjdGlvbi52dWVcIjtcbmltcG9ydCBXZWxjb21lVmlldyBmcm9tIFwic3JjL2NvbXBvbmVudHMvV2VsY29tZVZpZXcudnVlXCI7XG5cbmltcG9ydCB7IGNvbXB1dGVkIH0gZnJvbSBcInZ1ZVwiO1xuXG5pbXBvcnQgeyB1c2VIb21lU3RvcmUgfSBmcm9tIFwic3JjL3N0b3Jlcy9ob21lXCI7XG5pbXBvcnQgeyB1c2VIb3N0Q29uZHVpdFNlcnZpY2UgfSBmcm9tIFwic3JjL0hvc3RDb25kdWl0U2VydmljZVwiO1xuaW1wb3J0IHsgV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlIH0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uL3NyYy90eXBlcy9tZXNzYWdlcy93ZWJ2aWV3VG9Ib3N0TWVzc2FnZXNcIjtcbmltcG9ydCB7IEFjdGlvbkJ1dHRvbiB9IGZyb20gXCIuLi9BY3Rpb25Ub29sYmFyLnZ1ZVwiO1xuXG5jb25zdCBob21lID0gdXNlSG9tZVN0b3JlKCk7XG5jb25zdCBob3N0Q29uZHVpdCA9IHVzZUhvc3RDb25kdWl0U2VydmljZSgpO1xuXG5jb25zdCBvblJlZnJlc2ggPSAoKSA9PiB7XG4gIGhvc3RDb25kdWl0LnNlbmRNc2coe1xuICAgIGtpbmQ6IFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5SRUZSRVNIX1BZVEhPTl9QQUNLQUdFUyxcbiAgfSk7XG59O1xuXG5jb25zdCBvblNjYW5Gb3JQYWNrYWdlUmVxdWlyZW1lbnRzID0gKCkgPT4ge1xuICBob3N0Q29uZHVpdC5zZW5kTXNnKHtcbiAgICBraW5kOiBXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuU0NBTl9QWVRIT05fUEFDS0FHRV9SRVFVSVJFTUVOVFMsXG4gIH0pO1xufTtcblxuY29uc3Qgb25FZGl0UmVxdWlyZW1lbnRzRmlsZSA9ICgpID0+IHtcbiAgaWYgKCFob21lLnB5dGhvblBhY2thZ2VGaWxlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGhvc3RDb25kdWl0LnNlbmRNc2coe1xuICAgIGtpbmQ6IFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5WU0NPREVfT1BFTl9SRUxBVElWRSxcbiAgICBjb250ZW50OiB7XG4gICAgICByZWxhdGl2ZVBhdGg6IGhvbWUucHl0aG9uUGFja2FnZUZpbGUsXG4gICAgfSxcbiAgfSk7XG59O1xuXG5jb25zdCBweXRob25QYWNrYWdlQWN0aW9ucyA9IGNvbXB1dGVkKCgpOiBBY3Rpb25CdXR0b25bXSA9PiB7XG4gIGNvbnN0IHJlc3VsdDogQWN0aW9uQnV0dG9uW10gPSBbXTtcbiAgLy8gaWYgd2UgaGF2ZSBubyByZXF1aXJlbWVudHMgZmlsZSwgc28gd2UgY2FuJ3QgZWRpdCBvciBzY2FuXG4gIGlmIChCb29sZWFuKGhvbWUucHl0aG9uUGFja2FnZUZpbGUpKSB7XG4gICAgcmVzdWx0LnB1c2goe1xuICAgICAgbGFiZWw6IFwiRWRpdCBQYWNrYWdlIFJlcXVpcmVtZW50cyBGaWxlXCIsXG4gICAgICBjb2RpY29uOiBcImNvZGljb24tZWRpdFwiLFxuICAgICAgZm46IG9uRWRpdFJlcXVpcmVtZW50c0ZpbGUsXG4gICAgfSk7XG4gIH1cbiAgcmVzdWx0LnB1c2goe1xuICAgIGxhYmVsOiBcIlJlZnJlc2ggUGFja2FnZXNcIixcbiAgICBjb2RpY29uOiBcImNvZGljb24tcmVmcmVzaFwiLFxuICAgIGZuOiBvblJlZnJlc2gsXG4gIH0pO1xuICBpZiAoQm9vbGVhbihob21lLnB5dGhvblBhY2thZ2VGaWxlKSkge1xuICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgIGxhYmVsOiBcIlNjYW4gRm9yIFBhY2thZ2UgUmVxdWlyZW1lbnRzXCIsXG4gICAgICBjb2RpY29uOiBcImNvZGljb24tZXllXCIsXG4gICAgICBmbjogb25TY2FuRm9yUGFja2FnZVJlcXVpcmVtZW50cyxcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufSk7XG5cbmNvbnN0IHNob3dXZWxjb21lVmlldyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgcmV0dXJuIChcbiAgICAhaG9tZS5weXRob24uYWN0aXZlLmlzSW5Qcm9qZWN0IHx8XG4gICAgaG9tZS5weXRob24uYWN0aXZlLmlzRW1wdHlSZXF1aXJlbWVudHMgfHxcbiAgICBob21lLnB5dGhvbi5hY3RpdmUuaXNNaXNzaW5nUmVxdWlyZW1lbnRzXG4gICk7XG59KTtcbjwvc2NyaXB0PlxuIiwiPHRlbXBsYXRlPlxuICA8VHJlZVNlY3Rpb25cbiAgICB0aXRsZT1cIlIgUGFja2FnZXNcIlxuICAgIGRhdGEtYXV0b21hdGlvbj1cInItcGFja2FnZXNcIlxuICAgIDphY3Rpb25zPVwiclBhY2thZ2VBY3Rpb25zXCJcbiAgICA6Y29kaWNvbj1cImhvbWUuci5hY3RpdmUuaXNBbGVydEFjdGl2ZSA/IGBjb2RpY29uLWFsZXJ0YCA6IGBgXCJcbiAgPlxuICAgIDxXZWxjb21lVmlldyB2LWlmPVwic2hvd1dlbGNvbWVWaWV3XCI+XG4gICAgICA8dGVtcGxhdGUgdi1pZj1cIm1pc3NpbmdPckludmFsaWRQYWNrYWdlRmlsZVwiPlxuICAgICAgICA8cD5cbiAgICAgICAgICBUbyBkZXBsb3kgUiBjb250ZW50LCB5b3UgbmVlZCBhIHBhY2thZ2UgZmlsZSBsaXN0aW5nIGFueSBwYWNrYWdlXG4gICAgICAgICAgZGVwZW5kZW5jaWVzLCBidXQgdGhlIGZpbGUgKHt7IHJQYWNrYWdlRmlsZSB9fSkgaXMgbWlzc2luZywgZW1wdHkgb3JcbiAgICAgICAgICBpbnZhbGlkLlxuICAgICAgICAgIDxhIGNsYXNzPVwid2Vidmlldy1saW5rXCIgcm9sZT1cImJ1dHRvblwiIEBjbGljaz1cIm9uVmlld1JlbnZEb2NcIj5cbiAgICAgICAgICAgIFNlZSB0aGUgcmVudiBkb2N1bWVudGF0aW9uIGZvciBtb3JlIGRldGFpbHMuPC9hXG4gICAgICAgICAgPlxuICAgICAgICA8L3A+XG4gICAgICA8L3RlbXBsYXRlPlxuICAgICAgPHRlbXBsYXRlIHYtaWY9XCIhaG9tZS5yLmFjdGl2ZS5pc0luUHJvamVjdFwiPlxuICAgICAgICA8cCBkYXRhLWF1dG9tYXRpb249XCJyLW5vdC1jb25maWd1cmVkXCI+XG4gICAgICAgICAgVGhpcyBwcm9qZWN0IGlzIG5vdCBjb25maWd1cmVkIHRvIHVzZSBSLiBUbyBjb25maWd1cmUgUiwgYWRkIGFuIFtyXVxuICAgICAgICAgIHNlY3Rpb24gdG8geW91ciBjb25maWd1cmF0aW9uIGZpbGUuXG4gICAgICAgIDwvcD5cbiAgICAgIDwvdGVtcGxhdGU+XG4gICAgPC9XZWxjb21lVmlldz5cbiAgICA8dGVtcGxhdGUgdi1lbHNlPlxuICAgICAgPFRyZWVJdGVtXG4gICAgICAgIHYtZm9yPVwicGtnIGluIGhvbWUuclBhY2thZ2VzXCJcbiAgICAgICAgOmtleT1cInBrZy5wYWNrYWdlXCJcbiAgICAgICAgOnRpdGxlPVwicGtnLnBhY2thZ2VcIlxuICAgICAgICA6ZGVzY3JpcHRpb249XCJwa2cudmVyc2lvblwiXG4gICAgICAgIDp0b29sdGlwPVwicGtnLnNvdXJjZSArICc6ICcgKyBwa2cucmVwb3NpdG9yeVwiXG4gICAgICAgIGNvZGljb249XCJjb2RpY29uLXBhY2thZ2VcIlxuICAgICAgICBhbGlnbi1pY29uLXdpdGgtdHdpc3R5XG4gICAgICAvPlxuICAgIDwvdGVtcGxhdGU+XG4gIDwvVHJlZVNlY3Rpb24+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0IHNldHVwIGxhbmc9XCJ0c1wiPlxuaW1wb3J0IFRyZWVJdGVtIGZyb20gXCJzcmMvY29tcG9uZW50cy90cmVlL1RyZWVJdGVtLnZ1ZVwiO1xuaW1wb3J0IFRyZWVTZWN0aW9uIGZyb20gXCJzcmMvY29tcG9uZW50cy90cmVlL1RyZWVTZWN0aW9uLnZ1ZVwiO1xuaW1wb3J0IFdlbGNvbWVWaWV3IGZyb20gXCJzcmMvY29tcG9uZW50cy9XZWxjb21lVmlldy52dWVcIjtcblxuaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tIFwidnVlXCI7XG5cbmltcG9ydCB7IHVzZUhvbWVTdG9yZSB9IGZyb20gXCJzcmMvc3RvcmVzL2hvbWVcIjtcbmltcG9ydCB7IHVzZUhvc3RDb25kdWl0U2VydmljZSB9IGZyb20gXCJzcmMvSG9zdENvbmR1aXRTZXJ2aWNlXCI7XG5pbXBvcnQgeyBXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUgfSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vc3JjL3R5cGVzL21lc3NhZ2VzL3dlYnZpZXdUb0hvc3RNZXNzYWdlc1wiO1xuaW1wb3J0IHsgQWN0aW9uQnV0dG9uIH0gZnJvbSBcIi4uL0FjdGlvblRvb2xiYXIudnVlXCI7XG5pbXBvcnQgeyBpc0NvbmZpZ3VyYXRpb25FcnJvciB9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi9zcmMvYXBpXCI7XG5cbmNvbnN0IGhvbWUgPSB1c2VIb21lU3RvcmUoKTtcblxuY29uc3QgaG9zdENvbmR1aXQgPSB1c2VIb3N0Q29uZHVpdFNlcnZpY2UoKTtcblxuY29uc3Qgb25SZWZyZXNoID0gKCkgPT4ge1xuICBob3N0Q29uZHVpdC5zZW5kTXNnKHtcbiAgICBraW5kOiBXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuUkVGUkVTSF9SX1BBQ0tBR0VTLFxuICB9KTtcbn07XG5cbmNvbnN0IG9uRWRpdFJlcXVpcmVtZW50c0ZpbGUgPSAoKSA9PiB7XG4gIGlmICghaG9tZS5yUGFja2FnZUZpbGUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaG9zdENvbmR1aXQuc2VuZE1zZyh7XG4gICAga2luZDogV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLlZTQ09ERV9PUEVOX1JFTEFUSVZFLFxuICAgIGNvbnRlbnQ6IHtcbiAgICAgIHJlbGF0aXZlUGF0aDogaG9tZS5yUGFja2FnZUZpbGUsXG4gICAgfSxcbiAgfSk7XG59O1xuXG5jb25zdCBvblZpZXdSZW52RG9jID0gKCkgPT4ge1xuICBob3N0Q29uZHVpdC5zZW5kTXNnKHtcbiAgICBraW5kOiBXZWJ2aWV3VG9Ib3N0TWVzc2FnZVR5cGUuTkFWSUdBVEUsXG4gICAgY29udGVudDoge1xuICAgICAgdXJpUGF0aDogXCJodHRwczovL3JzdHVkaW8uZ2l0aHViLmlvL3JlbnYvYXJ0aWNsZXMvcmVudi5odG1sXCIsXG4gICAgfSxcbiAgfSk7XG59O1xuXG5jb25zdCByUGFja2FnZUFjdGlvbnMgPSBjb21wdXRlZCgoKTogQWN0aW9uQnV0dG9uW10gPT4ge1xuICBjb25zdCByZXN1bHQ6IEFjdGlvbkJ1dHRvbltdID0gW107XG4gIC8vIGlmIHdlIGhhdmUgbm8gcmVxdWlyZW1lbnRzIGZpbGUsIHNvIHdlIGNhbid0IGVkaXQgb3Igc2NhblxuICBpZiAoQm9vbGVhbihob21lLnJQYWNrYWdlRmlsZSkpIHtcbiAgICByZXN1bHQucHVzaCh7XG4gICAgICBsYWJlbDogXCJFZGl0IFBhY2thZ2UgUmVxdWlyZW1lbnRzIEZpbGVcIixcbiAgICAgIGNvZGljb246IFwiY29kaWNvbi1lZGl0XCIsXG4gICAgICBmbjogb25FZGl0UmVxdWlyZW1lbnRzRmlsZSxcbiAgICB9KTtcbiAgfVxuICByZXN1bHQucHVzaCh7XG4gICAgbGFiZWw6IFwiUmVmcmVzaCBQYWNrYWdlc1wiLFxuICAgIGNvZGljb246IFwiY29kaWNvbi1yZWZyZXNoXCIsXG4gICAgZm46IG9uUmVmcmVzaCxcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59KTtcblxuY29uc3Qgc2hvd1dlbGNvbWVWaWV3ID0gY29tcHV0ZWQoKCkgPT4ge1xuICByZXR1cm4gKFxuICAgICFob21lLnIuYWN0aXZlLmlzSW5Qcm9qZWN0IHx8XG4gICAgaG9tZS5yLmFjdGl2ZS5pc0VtcHR5UmVxdWlyZW1lbnRzIHx8XG4gICAgaG9tZS5yLmFjdGl2ZS5pc01pc3NpbmdQYWNrYWdlRmlsZVxuICApO1xufSk7XG5cbmNvbnN0IHJQYWNrYWdlRmlsZSA9IGNvbXB1dGVkKCgpID0+IHtcbiAgaWYgKFxuICAgIGhvbWUuc2VsZWN0ZWRDb25maWd1cmF0aW9uICYmXG4gICAgIWlzQ29uZmlndXJhdGlvbkVycm9yKGhvbWUuc2VsZWN0ZWRDb25maWd1cmF0aW9uKVxuICApIHtcbiAgICByZXR1cm4gKFxuICAgICAgaG9tZS5zZWxlY3RlZENvbmZpZ3VyYXRpb24uY29uZmlndXJhdGlvbi5yPy5wYWNrYWdlRmlsZSB8fCBcInJlbnYubG9ja1wiXG4gICAgKTtcbiAgfVxufSk7XG5cbmNvbnN0IG1pc3NpbmdPckludmFsaWRQYWNrYWdlRmlsZSA9IGNvbXB1dGVkKCgpID0+IHtcbiAgcmV0dXJuIChcbiAgICBob21lLnIuYWN0aXZlLmlzTWlzc2luZ1BhY2thZ2VGaWxlIHx8IGhvbWUuci5hY3RpdmUuaXNFbXB0eVJlcXVpcmVtZW50c1xuICApO1xufSk7XG48L3NjcmlwdD5cbiIsIjx0ZW1wbGF0ZT5cbiAgPFRyZWVTZWN0aW9uXG4gICAgdGl0bGU9XCJDcmVkZW50aWFsc1wiXG4gICAgZGF0YS1hdXRvbWF0aW9uPVwicHVibGlzaGVyLWNyZWRlbnRpYWxzLXNlY3Rpb25cIlxuICAgIDphY3Rpb25zPVwic2VjdGlvbkFjdGlvbnNcIlxuICAgIDpjb2RpY29uPVwiaG9tZS5jcmVkZW50aWFsLmFjdGl2ZS5pc0FsZXJ0QWN0aXZlID8gYGNvZGljb24tYWxlcnRgIDogYGBcIlxuICA+XG4gICAgPFdlbGNvbWVWaWV3IHYtaWY9XCIhaG9tZS5jcmVkZW50aWFsLmlzQXZhaWxhYmxlXCI+XG4gICAgICA8cD5ObyBjcmVkZW50aWFscyBoYXZlIGJlZW4gYWRkZWQgeWV0LjwvcD5cbiAgICA8L1dlbGNvbWVWaWV3PlxuICAgIDxUcmVlSXRlbVxuICAgICAgdi1lbHNlXG4gICAgICB2LWZvcj1cImNyZWRlbnRpYWwgaW4gaG9tZS5zb3J0ZWRDcmVkZW50aWFsc1wiXG4gICAgICA6dGl0bGU9XCJjcmVkZW50aWFsLm5hbWVcIlxuICAgICAgOmRlc2NyaXB0aW9uPVwiY3JlZGVudGlhbC51cmxcIlxuICAgICAgOmRhdGEtYXV0b21hdGlvbj1cImAke2NyZWRlbnRpYWwubmFtZX0tbGlzdGBcIlxuICAgICAgY29kaWNvbj1cImNvZGljb24ta2V5XCJcbiAgICAgIGFsaWduLWljb24td2l0aC10d2lzdHlcbiAgICAgIDpkYXRhLXZzY29kZS1jb250ZXh0PVwidnNjb2RlQ29udGV4dChjcmVkZW50aWFsKVwiXG4gICAgLz5cbiAgPC9UcmVlU2VjdGlvbj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQgc2V0dXAgbGFuZz1cInRzXCI+XG5pbXBvcnQgeyBjb21wdXRlZCB9IGZyb20gXCJ2dWVcIjtcblxuaW1wb3J0IFRyZWVTZWN0aW9uIGZyb20gXCJzcmMvY29tcG9uZW50cy90cmVlL1RyZWVTZWN0aW9uLnZ1ZVwiO1xuaW1wb3J0IFRyZWVJdGVtIGZyb20gXCJzcmMvY29tcG9uZW50cy90cmVlL1RyZWVJdGVtLnZ1ZVwiO1xuaW1wb3J0IFdlbGNvbWVWaWV3IGZyb20gXCJzcmMvY29tcG9uZW50cy9XZWxjb21lVmlldy52dWVcIjtcbmltcG9ydCB7IHVzZUhvbWVTdG9yZSB9IGZyb20gXCJzcmMvc3RvcmVzL2hvbWVcIjtcbmltcG9ydCB7IHVzZUhvc3RDb25kdWl0U2VydmljZSB9IGZyb20gXCJzcmMvSG9zdENvbmR1aXRTZXJ2aWNlXCI7XG5cbmltcG9ydCB7IENyZWRlbnRpYWwgfSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vc3JjL2FwaVwiO1xuaW1wb3J0IHsgV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlIH0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uL3NyYy90eXBlcy9tZXNzYWdlcy93ZWJ2aWV3VG9Ib3N0TWVzc2FnZXNcIjtcblxuY29uc3QgaG9tZSA9IHVzZUhvbWVTdG9yZSgpO1xuXG5jb25zdCB7IHNlbmRNc2cgfSA9IHVzZUhvc3RDb25kdWl0U2VydmljZSgpO1xuXG5jb25zdCBzZWN0aW9uQWN0aW9ucyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBsYWJlbDogXCJOZXcgQ3JlZGVudGlhbFwiLFxuICAgICAgY29kaWNvbjogXCJjb2RpY29uLWFkZFwiLFxuICAgICAgZm46ICgpID0+IHtcbiAgICAgICAgc2VuZE1zZyh7XG4gICAgICAgICAga2luZDogV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLk5FV19DUkVERU5USUFMLFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICBsYWJlbDogXCJSZWZyZXNoIENyZWRlbnRpYWxzXCIsXG4gICAgICBjb2RpY29uOiBcImNvZGljb24tcmVmcmVzaFwiLFxuICAgICAgZm46ICgpID0+IHtcbiAgICAgICAgc2VuZE1zZyh7IGtpbmQ6IFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5SRVFVRVNUX0NSRURFTlRJQUxTIH0pO1xuICAgICAgfSxcbiAgICB9LFxuICBdO1xufSk7XG5cbmNvbnN0IHZzY29kZUNvbnRleHQgPSAoY3JlZGVudGlhbDogQ3JlZGVudGlhbCkgPT4ge1xuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgIGNyZWRlbnRpYWxHVUlEOiBjcmVkZW50aWFsLmd1aWQsXG4gICAgY3JlZGVudGlhbE5hbWU6IGNyZWRlbnRpYWwubmFtZSxcbiAgICB3ZWJ2aWV3U2VjdGlvbjogXCJjcmVkZW50aWFscy10cmVlLWl0ZW1cIixcbiAgICBwcmV2ZW50RGVmYXVsdENvbnRleHRNZW51SXRlbXM6IHRydWUsXG4gIH0pO1xufTtcbjwvc2NyaXB0PlxuIiwiPHRlbXBsYXRlPlxuICA8VHJlZVNlY3Rpb25cbiAgICB0aXRsZT1cIkhlbHAgYW5kIEZlZWRiYWNrXCJcbiAgICBkYXRhLWF1dG9tYXRpb249XCJwdWJsaXNoZXItaGVscC1zZWN0aW9uXCJcbiAgPlxuICAgIDxUcmVlSXRlbVxuICAgICAgdGl0bGU9XCJHZXQgU3RhcnRlZCB3aXRoIFBvc2l0IFB1Ymxpc2hlclwiXG4gICAgICB0b29sdGlwPVwiT3BlbiBHZXR0aW5nIFN0YXJ0ZWQgRG9jdW1lbnRhdGlvblwiXG4gICAgICBhbGlnbi1pY29uLXdpdGgtdHdpc3R5XG4gICAgICBAY2xpY2s9XCJcbiAgICAgICAgaG9zdENvbmR1aXQuc2VuZE1zZyh7XG4gICAgICAgICAga2luZDogV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlLk5BVklHQVRFLFxuICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgIHVyaVBhdGg6XG4gICAgICAgICAgICAgICdodHRwczovL2dpdGh1Yi5jb20vcG9zaXQtZGV2L3B1Ymxpc2hlci9ibG9iL21haW4vZG9jcy9pbmRleC5tZCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgIFwiXG4gICAgLz5cbiAgICA8VHJlZUl0ZW1cbiAgICAgIHRpdGxlPVwiUHJvdmlkZSBGZWVkYmFja1wiXG4gICAgICB0b29sdGlwPVwiT3BlbiBHaXRIdWIgRGlzY3Vzc2lvbnNcIlxuICAgICAgYWxpZ24taWNvbi13aXRoLXR3aXN0eVxuICAgICAgQGNsaWNrPVwiXG4gICAgICAgIGhvc3RDb25kdWl0LnNlbmRNc2coe1xuICAgICAgICAgIGtpbmQ6IFdlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZS5OQVZJR0FURSxcbiAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICB1cmlQYXRoOiAnaHR0cHM6Ly9naXRodWIuY29tL3Bvc2l0LWRldi9wdWJsaXNoZXIvZGlzY3Vzc2lvbnMnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICBcIlxuICAgIC8+XG4gIDwvVHJlZVNlY3Rpb24+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0IHNldHVwIGxhbmc9XCJ0c1wiPlxuaW1wb3J0IFRyZWVTZWN0aW9uIGZyb20gXCJzcmMvY29tcG9uZW50cy90cmVlL1RyZWVTZWN0aW9uLnZ1ZVwiO1xuaW1wb3J0IFRyZWVJdGVtIGZyb20gXCJzcmMvY29tcG9uZW50cy90cmVlL1RyZWVJdGVtLnZ1ZVwiO1xuaW1wb3J0IHsgdXNlSG9zdENvbmR1aXRTZXJ2aWNlIH0gZnJvbSBcInNyYy9Ib3N0Q29uZHVpdFNlcnZpY2VcIjtcblxuaW1wb3J0IHsgV2Vidmlld1RvSG9zdE1lc3NhZ2VUeXBlIH0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uL3NyYy90eXBlcy9tZXNzYWdlcy93ZWJ2aWV3VG9Ib3N0TWVzc2FnZXNcIjtcblxuY29uc3QgaG9zdENvbmR1aXQgPSB1c2VIb3N0Q29uZHVpdFNlcnZpY2UoKTtcbjwvc2NyaXB0PlxuIiwiPCEtLSBDb3B5cmlnaHQgKEMpIDIwMjQgYnkgUG9zaXQgU29mdHdhcmUsIFBCQy4gLS0+XG5cbjx0ZW1wbGF0ZT5cbiAgPG1haW4+XG4gICAgPE92ZXJsYXlhYmxlVmlldyA6YWN0aXZhdGVPdmVybGF5PVwiaG9tZS5zaG93RGlzYWJsZWRPdmVybGF5XCI+XG4gICAgICA8RXZlbkVhc2llckRlcGxveSBjbGFzcz1cImVhc3ktZGVwbG95LWNvbnRhaW5lclwiIC8+XG4gICAgICA8dGVtcGxhdGVcbiAgICAgICAgdi1pZj1cIlxuICAgICAgICAgIGhvbWUuc2VsZWN0ZWRDb25maWd1cmF0aW9uICYmXG4gICAgICAgICAgIWlzQ29uZmlndXJhdGlvbkVycm9yKGhvbWUuc2VsZWN0ZWRDb25maWd1cmF0aW9uKVxuICAgICAgICBcIlxuICAgICAgPlxuICAgICAgICA8UHJvamVjdEZpbGVzIHYtbW9kZWw6ZXhwYW5kZWQ9XCJwcm9qZWN0RmlsZXNFeHBhbmRlZFwiIC8+XG4gICAgICAgIDxTZWNyZXRzIC8+XG4gICAgICAgIDxQeXRob25QYWNrYWdlcyAvPlxuICAgICAgICA8UlBhY2thZ2VzIC8+XG4gICAgICA8L3RlbXBsYXRlPlxuICAgICAgPENyZWRlbnRpYWxzIC8+XG4gICAgICA8SGVscEFuZEZlZWRiYWNrIC8+XG4gICAgPC9PdmVybGF5YWJsZVZpZXc+XG4gIDwvbWFpbj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQgc2V0dXAgbGFuZz1cInRzXCI+XG5pbXBvcnQgeyByZWYgfSBmcm9tIFwidnVlXCI7XG5cbmltcG9ydCBPdmVybGF5YWJsZVZpZXcgZnJvbSBcInNyYy9jb21wb25lbnRzL092ZXJsYXlhYmxlVmlldy52dWVcIjtcbmltcG9ydCBFdmVuRWFzaWVyRGVwbG95IGZyb20gXCJzcmMvY29tcG9uZW50cy9FdmVuRWFzaWVyRGVwbG95LnZ1ZVwiO1xuaW1wb3J0IFByb2plY3RGaWxlcyBmcm9tIFwic3JjL2NvbXBvbmVudHMvdmlld3MvcHJvamVjdEZpbGVzL1Byb2plY3RGaWxlcy52dWVcIjtcbmltcG9ydCBTZWNyZXRzIGZyb20gXCJzcmMvY29tcG9uZW50cy92aWV3cy9zZWNyZXRzL1NlY3JldHMudnVlXCI7XG5pbXBvcnQgUHl0aG9uUGFja2FnZXMgZnJvbSBcInNyYy9jb21wb25lbnRzL3ZpZXdzL1B5dGhvblBhY2thZ2VzLnZ1ZVwiO1xuaW1wb3J0IFJQYWNrYWdlcyBmcm9tIFwic3JjL2NvbXBvbmVudHMvdmlld3MvUlBhY2thZ2VzLnZ1ZVwiO1xuaW1wb3J0IENyZWRlbnRpYWxzIGZyb20gXCJzcmMvY29tcG9uZW50cy92aWV3cy9DcmVkZW50aWFscy52dWVcIjtcbmltcG9ydCBIZWxwQW5kRmVlZGJhY2sgZnJvbSBcInNyYy9jb21wb25lbnRzL3ZpZXdzL0hlbHBBbmRGZWVkYmFjay52dWVcIjtcblxuaW1wb3J0IHsgdXNlSG9zdENvbmR1aXRTZXJ2aWNlIH0gZnJvbSBcInNyYy9Ib3N0Q29uZHVpdFNlcnZpY2VcIjtcbmltcG9ydCB7IHVzZUhvbWVTdG9yZSB9IGZyb20gXCIuL3N0b3Jlcy9ob21lXCI7XG5pbXBvcnQgeyBpc0NvbmZpZ3VyYXRpb25FcnJvciB9IGZyb20gXCIuLi8uLi8uLi9zcmMvYXBpXCI7XG5cbnVzZUhvc3RDb25kdWl0U2VydmljZSgpO1xuXG5jb25zdCBob21lID0gdXNlSG9tZVN0b3JlKCk7XG5cbmNvbnN0IHByb2plY3RGaWxlc0V4cGFuZGVkID0gcmVmKHRydWUpO1xuPC9zY3JpcHQ+XG5cbjxzdHlsZSBsYW5nPVwic2Nzc1wiIHNjb3BlZD5cbi5lYXN5LWRlcGxveS1jb250YWluZXIge1xuICBwYWRkaW5nOiAwIDIwcHg7XG4gIG1hcmdpbi1ibG9jay1lbmQ6IDFyZW07XG59XG48L3N0eWxlPlxuIiwiLy8gQ29weXJpZ2h0IChDKSAyMDI0IGJ5IFBvc2l0IFNvZnR3YXJlLCBQQkMuXG5cbmltcG9ydCB7IGNyZWF0ZUFwcCB9IGZyb20gXCJ2dWVcIjtcbmltcG9ydCB7IFJlY3ljbGVTY3JvbGxlciB9IGZyb20gXCJ2dWUtdmlydHVhbC1zY3JvbGxlclwiO1xuaW1wb3J0IHsgY3JlYXRlUGluaWEgfSBmcm9tIFwicGluaWFcIjtcbmltcG9ydCB7XG4gIHByb3ZpZGVWU0NvZGVEZXNpZ25TeXN0ZW0sXG4gIHZzQ29kZUJ1dHRvbixcbiAgdnNDb2RlRHJvcGRvd24sXG4gIHZzQ29kZU9wdGlvbixcbiAgdnNDb2RlUHJvZ3Jlc3NSaW5nLFxuICB2c0NvZGVEaXZpZGVyLFxuICB2c0NvZGVDaGVja2JveCxcbn0gZnJvbSBcIkB2c2NvZGUvd2Vidmlldy11aS10b29sa2l0XCI7XG5cbmltcG9ydCBBcHAgZnJvbSBcInNyYy9BcHAudnVlXCI7XG5cbmltcG9ydCBcInZ1ZS12aXJ0dWFsLXNjcm9sbGVyL2Rpc3QvdnVlLXZpcnR1YWwtc2Nyb2xsZXIuY3NzXCI7XG5cbmltcG9ydCBcInNyYy9zdHlsZS5jc3NcIjtcblxuLy8gSW4gb3JkZXIgdG8gdXNlIHRoZSBXZWJ2aWV3IFVJIFRvb2xraXQgd2ViIGNvbXBvbmVudHMgdGhleVxuLy8gbXVzdCBiZSByZWdpc3RlcmVkIHdpdGggdGhlIGJyb3dzZXIgKGkuZS4gd2VidmlldykgdXNpbmcgdGhlXG4vLyBzeW50YXggYmVsb3cuXG5wcm92aWRlVlNDb2RlRGVzaWduU3lzdGVtKCkucmVnaXN0ZXIoXG4gIHZzQ29kZUJ1dHRvbigpLFxuICB2c0NvZGVEcm9wZG93bigpLFxuICB2c0NvZGVPcHRpb24oKSxcbiAgdnNDb2RlUHJvZ3Jlc3NSaW5nKCksXG4gIHZzQ29kZURpdmlkZXIoKSxcbiAgdnNDb2RlQ2hlY2tib3goKSxcbik7XG5cbmNvbnN0IHBpbmlhID0gY3JlYXRlUGluaWEoKTtcblxuY29uc3QgYXBwID0gY3JlYXRlQXBwKEFwcCk7XG5hcHAudXNlKHBpbmlhKTtcbmFwcC5jb21wb25lbnQoXCJSZWN5Y2xlU2Nyb2xsZXJcIiwgUmVjeWNsZVNjcm9sbGVyKTtcblxuYXBwLm1vdW50KFwiI2FwcFwiKTtcbiJdLCJuYW1lcyI6WyJtYWtlTWFwIiwic3RyIiwibWFwIiwia2V5IiwidmFsIiwiRU1QVFlfT0JKIiwiRU1QVFlfQVJSIiwiTk9PUCIsIk5PIiwiaXNPbiIsImlzTW9kZWxMaXN0ZW5lciIsImV4dGVuZCIsInJlbW92ZSIsImFyciIsImVsIiwiaSIsImhhc093blByb3BlcnR5IiwiaGFzT3duIiwiaXNBcnJheSIsImlzTWFwIiwidG9UeXBlU3RyaW5nIiwiaXNTZXQiLCJpc0Z1bmN0aW9uIiwiaXNTdHJpbmciLCJpc1N5bWJvbCIsImlzT2JqZWN0IiwiaXNQcm9taXNlIiwib2JqZWN0VG9TdHJpbmciLCJ2YWx1ZSIsInRvUmF3VHlwZSIsImlzUGxhaW5PYmplY3QiLCJpc0ludGVnZXJLZXkiLCJpc1Jlc2VydmVkUHJvcCIsImNhY2hlU3RyaW5nRnVuY3Rpb24iLCJmbiIsImNhY2hlIiwiY2FtZWxpemVSRSIsImNhbWVsaXplIiwiXyIsImMiLCJoeXBoZW5hdGVSRSIsImh5cGhlbmF0ZSIsImNhcGl0YWxpemUiLCJ0b0hhbmRsZXJLZXkiLCJoYXNDaGFuZ2VkIiwib2xkVmFsdWUiLCJpbnZva2VBcnJheUZucyIsImZucyIsImFyZyIsImRlZiIsIm9iaiIsIndyaXRhYmxlIiwibG9vc2VUb051bWJlciIsIm4iLCJfZ2xvYmFsVGhpcyIsImdldEdsb2JhbFRoaXMiLCJub3JtYWxpemVTdHlsZSIsInJlcyIsIml0ZW0iLCJub3JtYWxpemVkIiwicGFyc2VTdHJpbmdTdHlsZSIsImxpc3REZWxpbWl0ZXJSRSIsInByb3BlcnR5RGVsaW1pdGVyUkUiLCJzdHlsZUNvbW1lbnRSRSIsImNzc1RleHQiLCJyZXQiLCJ0bXAiLCJub3JtYWxpemVDbGFzcyIsIm5hbWUiLCJzcGVjaWFsQm9vbGVhbkF0dHJzIiwiaXNTcGVjaWFsQm9vbGVhbkF0dHIiLCJpbmNsdWRlQm9vbGVhbkF0dHIiLCJpc1JlZiIsInRvRGlzcGxheVN0cmluZyIsInJlcGxhY2VyIiwiX2tleSIsImVudHJpZXMiLCJ2YWwyIiwic3RyaW5naWZ5U3ltYm9sIiwidiIsIl9hIiwiYWN0aXZlRWZmZWN0U2NvcGUiLCJFZmZlY3RTY29wZSIsImRldGFjaGVkIiwibCIsImN1cnJlbnRFZmZlY3RTY29wZSIsImZyb21QYXJlbnQiLCJsYXN0IiwiZWZmZWN0U2NvcGUiLCJnZXRDdXJyZW50U2NvcGUiLCJvblNjb3BlRGlzcG9zZSIsImZhaWxTaWxlbnRseSIsImFjdGl2ZVN1YiIsInBhdXNlZFF1ZXVlRWZmZWN0cyIsIlJlYWN0aXZlRWZmZWN0IiwiYmF0Y2giLCJjbGVhbnVwRWZmZWN0IiwicHJlcGFyZURlcHMiLCJwcmV2RWZmZWN0IiwicHJldlNob3VsZFRyYWNrIiwic2hvdWxkVHJhY2siLCJjbGVhbnVwRGVwcyIsImxpbmsiLCJyZW1vdmVTdWIiLCJpc0RpcnR5IiwiYmF0Y2hEZXB0aCIsImJhdGNoZWRTdWIiLCJiYXRjaGVkQ29tcHV0ZWQiLCJzdWIiLCJpc0NvbXB1dGVkIiwic3RhcnRCYXRjaCIsImVuZEJhdGNoIiwibmV4dCIsImVycm9yIiwiZXJyIiwiaGVhZCIsInRhaWwiLCJwcmV2IiwicmVtb3ZlRGVwIiwicmVmcmVzaENvbXB1dGVkIiwiY29tcHV0ZWQiLCJnbG9iYWxWZXJzaW9uIiwiZGVwIiwicHJldlN1YiIsInNvZnQiLCJuZXh0U3ViIiwicHJldkRlcCIsIm5leHREZXAiLCJ0cmFja1N0YWNrIiwicGF1c2VUcmFja2luZyIsInJlc2V0VHJhY2tpbmciLCJlIiwiY2xlYW51cCIsIkxpbmsiLCJEZXAiLCJkZWJ1Z0luZm8iLCJhZGRTdWIiLCJjdXJyZW50VGFpbCIsInRhcmdldE1hcCIsIklURVJBVEVfS0VZIiwiTUFQX0tFWV9JVEVSQVRFX0tFWSIsIkFSUkFZX0lURVJBVEVfS0VZIiwidHJhY2siLCJ0YXJnZXQiLCJ0eXBlIiwiZGVwc01hcCIsInRyaWdnZXIiLCJuZXdWYWx1ZSIsIm9sZFRhcmdldCIsInJ1biIsInRhcmdldElzQXJyYXkiLCJpc0FycmF5SW5kZXgiLCJuZXdMZW5ndGgiLCJrZXkyIiwiZ2V0RGVwRnJvbVJlYWN0aXZlIiwib2JqZWN0IiwiZGVwTWFwIiwicmVhY3RpdmVSZWFkQXJyYXkiLCJhcnJheSIsInJhdyIsInRvUmF3IiwiaXNTaGFsbG93IiwidG9SZWFjdGl2ZSIsInNoYWxsb3dSZWFkQXJyYXkiLCJhcnJheUluc3RydW1lbnRhdGlvbnMiLCJpdGVyYXRvciIsImFyZ3MiLCJ4IiwidGhpc0FyZyIsImFwcGx5Iiwic2VhcmNoUHJveHkiLCJzZXBhcmF0b3IiLCJub1RyYWNraW5nIiwicmVkdWNlIiwiY29tcGFyZXIiLCJzZWxmIiwibWV0aG9kIiwid3JhcFZhbHVlIiwiaXRlciIsInJlc3VsdCIsImFycmF5UHJvdG8iLCJ3cmFwcGVkUmV0Rm4iLCJuZWVkc1dyYXAiLCJtZXRob2RGbiIsInJlc3VsdDIiLCJ3cmFwcGVkRm4iLCJpbmRleCIsImFjYyIsImlzUHJveHkiLCJpc05vblRyYWNrYWJsZUtleXMiLCJidWlsdEluU3ltYm9scyIsIkJhc2VSZWFjdGl2ZUhhbmRsZXIiLCJfaXNSZWFkb25seSIsIl9pc1NoYWxsb3ciLCJyZWNlaXZlciIsImlzUmVhZG9ubHkyIiwiaXNTaGFsbG93MiIsInNoYWxsb3dSZWFkb25seU1hcCIsInJlYWRvbmx5TWFwIiwic2hhbGxvd1JlYWN0aXZlTWFwIiwicmVhY3RpdmVNYXAiLCJyZWFkb25seSIsInJlYWN0aXZlIiwiTXV0YWJsZVJlYWN0aXZlSGFuZGxlciIsImlzT2xkVmFsdWVSZWFkb25seSIsImlzUmVhZG9ubHkiLCJoYWRLZXkiLCJSZWFkb25seVJlYWN0aXZlSGFuZGxlciIsIm11dGFibGVIYW5kbGVycyIsInJlYWRvbmx5SGFuZGxlcnMiLCJzaGFsbG93UmVhY3RpdmVIYW5kbGVycyIsInRvU2hhbGxvdyIsImdldFByb3RvIiwiY3JlYXRlSXRlcmFibGVNZXRob2QiLCJyYXdUYXJnZXQiLCJ0YXJnZXRJc01hcCIsImlzUGFpciIsImlzS2V5T25seSIsImlubmVySXRlcmF0b3IiLCJ3cmFwIiwidG9SZWFkb25seSIsImRvbmUiLCJjcmVhdGVSZWFkb25seU1ldGhvZCIsImNyZWF0ZUluc3RydW1lbnRhdGlvbnMiLCJzaGFsbG93IiwiaW5zdHJ1bWVudGF0aW9ucyIsInJhd0tleSIsImhhcyIsImNhbGxiYWNrIiwib2JzZXJ2ZWQiLCJnZXQiLCJoYWRJdGVtcyIsImNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlciIsIm11dGFibGVDb2xsZWN0aW9uSGFuZGxlcnMiLCJzaGFsbG93Q29sbGVjdGlvbkhhbmRsZXJzIiwicmVhZG9ubHlDb2xsZWN0aW9uSGFuZGxlcnMiLCJ0YXJnZXRUeXBlTWFwIiwicmF3VHlwZSIsImdldFRhcmdldFR5cGUiLCJjcmVhdGVSZWFjdGl2ZU9iamVjdCIsInNoYWxsb3dSZWFjdGl2ZSIsImJhc2VIYW5kbGVycyIsImNvbGxlY3Rpb25IYW5kbGVycyIsInByb3h5TWFwIiwidGFyZ2V0VHlwZSIsImV4aXN0aW5nUHJveHkiLCJwcm94eSIsImlzUmVhY3RpdmUiLCJtYXJrUmF3IiwiciIsInJlZiIsImNyZWF0ZVJlZiIsInJhd1ZhbHVlIiwiUmVmSW1wbCIsInVzZURpcmVjdFZhbHVlIiwidW5yZWYiLCJyZWYyIiwic2hhbGxvd1Vud3JhcEhhbmRsZXJzIiwicHJveHlSZWZzIiwib2JqZWN0V2l0aFJlZnMiLCJDdXN0b21SZWZJbXBsIiwiZmFjdG9yeSIsInNldCIsIm5ld1ZhbCIsImN1c3RvbVJlZiIsInRvUmVmcyIsInByb3BlcnR5VG9SZWYiLCJPYmplY3RSZWZJbXBsIiwiX29iamVjdCIsIl9kZWZhdWx0VmFsdWUiLCJzb3VyY2UiLCJkZWZhdWx0VmFsdWUiLCJDb21wdXRlZFJlZkltcGwiLCJzZXR0ZXIiLCJpc1NTUiIsImdldHRlck9yT3B0aW9ucyIsImRlYnVnT3B0aW9ucyIsImdldHRlciIsIklOSVRJQUxfV0FUQ0hFUl9WQUxVRSIsImNsZWFudXBNYXAiLCJhY3RpdmVXYXRjaGVyIiwib25XYXRjaGVyQ2xlYW51cCIsImNsZWFudXBGbiIsIm93bmVyIiwiY2xlYW51cHMiLCJ3YXRjaCIsImNiIiwib3B0aW9ucyIsImltbWVkaWF0ZSIsImRlZXAiLCJvbmNlIiwic2NoZWR1bGVyIiwiYXVnbWVudEpvYiIsImNhbGwiLCJyZWFjdGl2ZUdldHRlciIsInNvdXJjZTIiLCJ0cmF2ZXJzZSIsImVmZmVjdCIsImJvdW5kQ2xlYW51cCIsImZvcmNlVHJpZ2dlciIsImlzTXVsdGlTb3VyY2UiLCJzIiwiY3VycmVudEVmZmVjdCIsImJhc2VHZXR0ZXIiLCJkZXB0aCIsInNjb3BlIiwid2F0Y2hIYW5kbGUiLCJfY2IiLCJqb2IiLCJpbW1lZGlhdGVGaXJzdFJ1biIsImN1cnJlbnRXYXRjaGVyIiwiY2xlYW51cDIiLCJzZWVuIiwiY2FsbFdpdGhFcnJvckhhbmRsaW5nIiwiaW5zdGFuY2UiLCJoYW5kbGVFcnJvciIsImNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nIiwidmFsdWVzIiwidGhyb3dJbkRldiIsImNvbnRleHRWTm9kZSIsImVycm9ySGFuZGxlciIsInRocm93VW5oYW5kbGVkRXJyb3JJblByb2R1Y3Rpb24iLCJjdXIiLCJleHBvc2VkSW5zdGFuY2UiLCJlcnJvckluZm8iLCJlcnJvckNhcHR1cmVkSG9va3MiLCJsb2dFcnJvciIsInRocm93SW5Qcm9kIiwicXVldWUiLCJmbHVzaEluZGV4IiwicGVuZGluZ1Bvc3RGbHVzaENicyIsImFjdGl2ZVBvc3RGbHVzaENicyIsInBvc3RGbHVzaEluZGV4IiwicmVzb2x2ZWRQcm9taXNlIiwiY3VycmVudEZsdXNoUHJvbWlzZSIsIm5leHRUaWNrIiwicCIsImZpbmRJbnNlcnRpb25JbmRleCIsImlkIiwic3RhcnQiLCJlbmQiLCJtaWRkbGUiLCJtaWRkbGVKb2IiLCJtaWRkbGVKb2JJZCIsImdldElkIiwicXVldWVKb2IiLCJqb2JJZCIsImxhc3RKb2IiLCJxdWV1ZUZsdXNoIiwiZmx1c2hKb2JzIiwicXVldWVQb3N0Rmx1c2hDYiIsImZsdXNoUHJlRmx1c2hDYnMiLCJmbHVzaFBvc3RGbHVzaENicyIsImRlZHVwZWQiLCJhIiwiYiIsImN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSIsImN1cnJlbnRTY29wZUlkIiwic2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlIiwicHVzaFNjb3BlSWQiLCJwb3BTY29wZUlkIiwid2l0aFNjb3BlSWQiLCJfaWQiLCJ3aXRoQ3R4IiwiY3R4IiwiaXNOb25TY29wZWRTbG90IiwicmVuZGVyRm5XaXRoQ29udGV4dCIsInNldEJsb2NrVHJhY2tpbmciLCJwcmV2SW5zdGFuY2UiLCJ3aXRoRGlyZWN0aXZlcyIsInZub2RlIiwiZGlyZWN0aXZlcyIsImdldENvbXBvbmVudFB1YmxpY0luc3RhbmNlIiwiYmluZGluZ3MiLCJkaXIiLCJtb2RpZmllcnMiLCJpbnZva2VEaXJlY3RpdmVIb29rIiwicHJldlZOb2RlIiwib2xkQmluZGluZ3MiLCJiaW5kaW5nIiwiaG9vayIsIlRlbGVwb3J0RW5kS2V5IiwiaXNUZWxlcG9ydCIsInNldFRyYW5zaXRpb25Ib29rcyIsImhvb2tzIiwiZGVmaW5lQ29tcG9uZW50IiwiZXh0cmFPcHRpb25zIiwibWFya0FzeW5jQm91bmRhcnkiLCJzZXRSZWYiLCJyYXdSZWYiLCJvbGRSYXdSZWYiLCJwYXJlbnRTdXNwZW5zZSIsImlzVW5tb3VudCIsImlzQXN5bmNXcmFwcGVyIiwicmVmVmFsdWUiLCJvbGRSZWYiLCJyZWZzIiwic2V0dXBTdGF0ZSIsInJhd1NldHVwU3RhdGUiLCJjYW5TZXRTZXR1cFJlZiIsIl9pc1N0cmluZyIsIl9pc1JlZiIsImRvU2V0IiwiZXhpc3RpbmciLCJxdWV1ZVBvc3RSZW5kZXJFZmZlY3QiLCJpc0tlZXBBbGl2ZSIsIm9uQWN0aXZhdGVkIiwicmVnaXN0ZXJLZWVwQWxpdmVIb29rIiwib25EZWFjdGl2YXRlZCIsImN1cnJlbnRJbnN0YW5jZSIsIndyYXBwZWRIb29rIiwiY3VycmVudCIsImluamVjdEhvb2siLCJpbmplY3RUb0tlZXBBbGl2ZVJvb3QiLCJrZWVwQWxpdmVSb290IiwiaW5qZWN0ZWQiLCJvblVubW91bnRlZCIsInByZXBlbmQiLCJyZXNldCIsInNldEN1cnJlbnRJbnN0YW5jZSIsImNyZWF0ZUhvb2siLCJsaWZlY3ljbGUiLCJpc0luU1NSQ29tcG9uZW50U2V0dXAiLCJvbkJlZm9yZU1vdW50Iiwib25Nb3VudGVkIiwib25CZWZvcmVVcGRhdGUiLCJvblVwZGF0ZWQiLCJvbkJlZm9yZVVubW91bnQiLCJvblNlcnZlclByZWZldGNoIiwib25SZW5kZXJUcmlnZ2VyZWQiLCJvblJlbmRlclRyYWNrZWQiLCJvbkVycm9yQ2FwdHVyZWQiLCJDT01QT05FTlRTIiwiRElSRUNUSVZFUyIsInJlc29sdmVDb21wb25lbnQiLCJtYXliZVNlbGZSZWZlcmVuY2UiLCJyZXNvbHZlQXNzZXQiLCJOVUxMX0RZTkFNSUNfQ09NUE9ORU5UIiwicmVzb2x2ZUR5bmFtaWNDb21wb25lbnQiLCJjb21wb25lbnQiLCJyZXNvbHZlRGlyZWN0aXZlIiwid2Fybk1pc3NpbmciLCJDb21wb25lbnQiLCJzZWxmTmFtZSIsImdldENvbXBvbmVudE5hbWUiLCJyZXNvbHZlIiwicmVnaXN0cnkiLCJyZW5kZXJMaXN0IiwicmVuZGVySXRlbSIsImNhY2hlZCIsInNvdXJjZUlzQXJyYXkiLCJzb3VyY2VJc1JlYWN0aXZlQXJyYXkiLCJpc1JlYWRvbmx5U291cmNlIiwia2V5cyIsInJlbmRlclNsb3QiLCJzbG90cyIsInByb3BzIiwiZmFsbGJhY2siLCJub1Nsb3R0ZWQiLCJvcGVuQmxvY2siLCJjcmVhdGVCbG9jayIsIkZyYWdtZW50IiwiY3JlYXRlVk5vZGUiLCJzbG90IiwidmFsaWRTbG90Q29udGVudCIsImVuc3VyZVZhbGlkVk5vZGUiLCJzbG90S2V5IiwicmVuZGVyZWQiLCJ2bm9kZXMiLCJjaGlsZCIsImlzVk5vZGUiLCJDb21tZW50IiwidG9IYW5kbGVycyIsInByZXNlcnZlQ2FzZUlmTmVjZXNzYXJ5IiwiZ2V0UHVibGljSW5zdGFuY2UiLCJpc1N0YXRlZnVsQ29tcG9uZW50IiwicHVibGljUHJvcGVydGllc01hcCIsInJlc29sdmVNZXJnZWRPcHRpb25zIiwiaW5zdGFuY2VXYXRjaCIsImhhc1NldHVwQmluZGluZyIsInN0YXRlIiwiUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzIiwiZGF0YSIsImFjY2Vzc0NhY2hlIiwiYXBwQ29udGV4dCIsIm5vcm1hbGl6ZWRQcm9wcyIsInNob3VsZENhY2hlQWNjZXNzIiwicHVibGljR2V0dGVyIiwiY3NzTW9kdWxlIiwiZ2xvYmFsUHJvcGVydGllcyIsInByb3BzT3B0aW9ucyIsImRlc2NyaXB0b3IiLCJ1c2VTbG90cyIsImdldENvbnRleHQiLCJnZXRDdXJyZW50SW5zdGFuY2UiLCJjcmVhdGVTZXR1cENvbnRleHQiLCJub3JtYWxpemVQcm9wc09yRW1pdHMiLCJtZXJnZU1vZGVscyIsImFwcGx5T3B0aW9ucyIsInB1YmxpY1RoaXMiLCJjYWxsSG9vayIsImRhdGFPcHRpb25zIiwiY29tcHV0ZWRPcHRpb25zIiwibWV0aG9kcyIsIndhdGNoT3B0aW9ucyIsInByb3ZpZGVPcHRpb25zIiwiaW5qZWN0T3B0aW9ucyIsImNyZWF0ZWQiLCJiZWZvcmVNb3VudCIsIm1vdW50ZWQiLCJiZWZvcmVVcGRhdGUiLCJ1cGRhdGVkIiwiYWN0aXZhdGVkIiwiZGVhY3RpdmF0ZWQiLCJiZWZvcmVEZXN0cm95IiwiYmVmb3JlVW5tb3VudCIsImRlc3Ryb3llZCIsInVubW91bnRlZCIsInJlbmRlciIsInJlbmRlclRyYWNrZWQiLCJyZW5kZXJUcmlnZ2VyZWQiLCJlcnJvckNhcHR1cmVkIiwic2VydmVyUHJlZmV0Y2giLCJleHBvc2UiLCJpbmhlcml0QXR0cnMiLCJjb21wb25lbnRzIiwiZmlsdGVycyIsInJlc29sdmVJbmplY3Rpb25zIiwibWV0aG9kSGFuZGxlciIsIm9wdCIsImNyZWF0ZVdhdGNoZXIiLCJwcm92aWRlcyIsInByb3ZpZGUiLCJyZWdpc3RlckxpZmVjeWNsZUhvb2siLCJyZWdpc3RlciIsIl9ob29rIiwiZXhwb3NlZCIsImNoZWNrRHVwbGljYXRlUHJvcGVydGllcyIsIm5vcm1hbGl6ZUluamVjdCIsImluamVjdCIsImgiLCJjcmVhdGVQYXRoR2V0dGVyIiwiaGFuZGxlciIsImJhc2UiLCJtaXhpbnMiLCJleHRlbmRzT3B0aW9ucyIsImdsb2JhbE1peGlucyIsIm9wdGlvbk1lcmdlU3RyYXRlZ2llcyIsInJlc29sdmVkIiwibSIsIm1lcmdlT3B0aW9ucyIsInRvIiwiZnJvbSIsInN0cmF0cyIsImFzTWl4aW4iLCJzdHJhdCIsImludGVybmFsT3B0aW9uTWVyZ2VTdHJhdHMiLCJtZXJnZURhdGFGbiIsIm1lcmdlRW1pdHNPclByb3BzT3B0aW9ucyIsIm1lcmdlT2JqZWN0T3B0aW9ucyIsIm1lcmdlQXNBcnJheSIsIm1lcmdlV2F0Y2hPcHRpb25zIiwibWVyZ2VJbmplY3QiLCJtZXJnZWQiLCJjcmVhdGVBcHBDb250ZXh0IiwidWlkJDEiLCJjcmVhdGVBcHBBUEkiLCJoeWRyYXRlIiwicm9vdENvbXBvbmVudCIsInJvb3RQcm9wcyIsImNvbnRleHQiLCJpbnN0YWxsZWRQbHVnaW5zIiwicGx1Z2luQ2xlYW51cEZucyIsImlzTW91bnRlZCIsImFwcCIsInZlcnNpb24iLCJwbHVnaW4iLCJtaXhpbiIsImRpcmVjdGl2ZSIsInJvb3RDb250YWluZXIiLCJpc0h5ZHJhdGUiLCJuYW1lc3BhY2UiLCJsYXN0QXBwIiwiY3VycmVudEFwcCIsInBhcmVudFByb3ZpZGVzIiwidHJlYXREZWZhdWx0QXNGYWN0b3J5IiwiaGFzSW5qZWN0aW9uQ29udGV4dCIsImludGVybmFsT2JqZWN0UHJvdG8iLCJjcmVhdGVJbnRlcm5hbE9iamVjdCIsImlzSW50ZXJuYWxPYmplY3QiLCJpbml0UHJvcHMiLCJyYXdQcm9wcyIsImlzU3RhdGVmdWwiLCJhdHRycyIsInNldEZ1bGxQcm9wcyIsInVwZGF0ZVByb3BzIiwicmF3UHJldlByb3BzIiwib3B0aW1pemVkIiwicGF0Y2hGbGFnIiwicmF3Q3VycmVudFByb3BzIiwiaGFzQXR0cnNDaGFuZ2VkIiwicHJvcHNUb1VwZGF0ZSIsImlzRW1pdExpc3RlbmVyIiwiY2FtZWxpemVkS2V5IiwicmVzb2x2ZVByb3BWYWx1ZSIsImtlYmFiS2V5IiwibmVlZENhc3RLZXlzIiwicmF3Q2FzdFZhbHVlcyIsImNhbWVsS2V5IiwiY2FzdFZhbHVlcyIsImlzQWJzZW50IiwiaGFzRGVmYXVsdCIsInByb3BzRGVmYXVsdHMiLCJtaXhpblByb3BzQ2FjaGUiLCJub3JtYWxpemVQcm9wc09wdGlvbnMiLCJjb21wIiwiaGFzRXh0ZW5kcyIsImV4dGVuZFByb3BzIiwicmF3MiIsIm5vcm1hbGl6ZWRLZXkiLCJ2YWxpZGF0ZVByb3BOYW1lIiwicHJvcCIsInByb3BUeXBlIiwic2hvdWxkQ2FzdCIsInNob3VsZENhc3RUcnVlIiwidHlwZU5hbWUiLCJpc0ludGVybmFsS2V5Iiwibm9ybWFsaXplU2xvdFZhbHVlIiwibm9ybWFsaXplVk5vZGUiLCJub3JtYWxpemVTbG90IiwicmF3U2xvdCIsIm5vcm1hbGl6ZU9iamVjdFNsb3RzIiwicmF3U2xvdHMiLCJub3JtYWxpemVWTm9kZVNsb3RzIiwiY2hpbGRyZW4iLCJhc3NpZ25TbG90cyIsImluaXRTbG90cyIsInVwZGF0ZVNsb3RzIiwibmVlZERlbGV0aW9uQ2hlY2siLCJkZWxldGlvbkNvbXBhcmlzb25UYXJnZXQiLCJxdWV1ZUVmZmVjdFdpdGhTdXNwZW5zZSIsImNyZWF0ZVJlbmRlcmVyIiwiYmFzZUNyZWF0ZVJlbmRlcmVyIiwiY3JlYXRlSHlkcmF0aW9uRm5zIiwiaG9zdEluc2VydCIsImhvc3RSZW1vdmUiLCJob3N0UGF0Y2hQcm9wIiwiaG9zdENyZWF0ZUVsZW1lbnQiLCJob3N0Q3JlYXRlVGV4dCIsImhvc3RDcmVhdGVDb21tZW50IiwiaG9zdFNldFRleHQiLCJob3N0U2V0RWxlbWVudFRleHQiLCJob3N0UGFyZW50Tm9kZSIsImhvc3ROZXh0U2libGluZyIsImhvc3RTZXRTY29wZUlkIiwiaG9zdEluc2VydFN0YXRpY0NvbnRlbnQiLCJwYXRjaCIsIm4xIiwibjIiLCJjb250YWluZXIiLCJhbmNob3IiLCJwYXJlbnRDb21wb25lbnQiLCJzbG90U2NvcGVJZHMiLCJpc1NhbWVWTm9kZVR5cGUiLCJnZXROZXh0SG9zdE5vZGUiLCJ1bm1vdW50Iiwic2hhcGVGbGFnIiwiVGV4dCIsInByb2Nlc3NUZXh0IiwicHJvY2Vzc0NvbW1lbnROb2RlIiwiU3RhdGljIiwibW91bnRTdGF0aWNOb2RlIiwicHJvY2Vzc0ZyYWdtZW50IiwicHJvY2Vzc0VsZW1lbnQiLCJwcm9jZXNzQ29tcG9uZW50IiwiaW50ZXJuYWxzIiwibW92ZVN0YXRpY05vZGUiLCJuZXh0U2libGluZyIsInJlbW92ZVN0YXRpY05vZGUiLCJtb3VudEVsZW1lbnQiLCJwYXRjaEVsZW1lbnQiLCJ2bm9kZUhvb2siLCJ0cmFuc2l0aW9uIiwiZGlycyIsIm1vdW50Q2hpbGRyZW4iLCJyZXNvbHZlQ2hpbGRyZW5OYW1lc3BhY2UiLCJzZXRTY29wZUlkIiwiaW52b2tlVk5vZGVIb29rIiwibmVlZENhbGxUcmFuc2l0aW9uSG9va3MiLCJuZWVkVHJhbnNpdGlvbiIsInNjb3BlSWQiLCJzdWJUcmVlIiwiaXNTdXNwZW5zZSIsInBhcmVudFZOb2RlIiwiY2xvbmVJZk1vdW50ZWQiLCJkeW5hbWljQ2hpbGRyZW4iLCJvbGRQcm9wcyIsIm5ld1Byb3BzIiwidG9nZ2xlUmVjdXJzZSIsInBhdGNoQmxvY2tDaGlsZHJlbiIsInBhdGNoQ2hpbGRyZW4iLCJwYXRjaFByb3BzIiwib2xkQ2hpbGRyZW4iLCJuZXdDaGlsZHJlbiIsImZhbGxiYWNrQ29udGFpbmVyIiwib2xkVk5vZGUiLCJuZXdWTm9kZSIsImZyYWdtZW50U3RhcnRBbmNob3IiLCJmcmFnbWVudEVuZEFuY2hvciIsImZyYWdtZW50U2xvdFNjb3BlSWRzIiwidHJhdmVyc2VTdGF0aWNDaGlsZHJlbiIsIm1vdW50Q29tcG9uZW50IiwidXBkYXRlQ29tcG9uZW50IiwiaW5pdGlhbFZOb2RlIiwiY3JlYXRlQ29tcG9uZW50SW5zdGFuY2UiLCJzZXR1cENvbXBvbmVudCIsInNldHVwUmVuZGVyRWZmZWN0IiwicGxhY2Vob2xkZXIiLCJzaG91bGRVcGRhdGVDb21wb25lbnQiLCJ1cGRhdGVDb21wb25lbnRQcmVSZW5kZXIiLCJjb21wb25lbnRVcGRhdGVGbiIsImJ1IiwidSIsInBhcmVudCIsIm5vbkh5ZHJhdGVkQXN5bmNSb290IiwibG9jYXRlTm9uSHlkcmF0ZWRBc3luY1Jvb3QiLCJvcmlnaW5OZXh0IiwibmV4dFRyZWUiLCJyZW5kZXJDb21wb25lbnRSb290IiwicHJldlRyZWUiLCJ1cGRhdGVIT0NIb3N0RWwiLCJibSIsInJvb3QiLCJpc0FzeW5jV3JhcHBlclZOb2RlIiwic2NvcGVkSW5pdGlhbFZOb2RlIiwidXBkYXRlIiwibmV4dFZOb2RlIiwicHJldlByb3BzIiwiYzEiLCJwcmV2U2hhcGVGbGFnIiwiYzIiLCJwYXRjaEtleWVkQ2hpbGRyZW4iLCJwYXRjaFVua2V5ZWRDaGlsZHJlbiIsInVubW91bnRDaGlsZHJlbiIsIm9sZExlbmd0aCIsImNvbW1vbkxlbmd0aCIsIm5leHRDaGlsZCIsInBhcmVudEFuY2hvciIsImwyIiwiZTEiLCJlMiIsIm5leHRQb3MiLCJzMSIsInMyIiwia2V5VG9OZXdJbmRleE1hcCIsImoiLCJwYXRjaGVkIiwidG9CZVBhdGNoZWQiLCJtb3ZlZCIsIm1heE5ld0luZGV4U29GYXIiLCJuZXdJbmRleFRvT2xkSW5kZXhNYXAiLCJwcmV2Q2hpbGQiLCJuZXdJbmRleCIsImluY3JlYXNpbmdOZXdJbmRleFNlcXVlbmNlIiwiZ2V0U2VxdWVuY2UiLCJuZXh0SW5kZXgiLCJtb3ZlIiwibW92ZVR5cGUiLCJsZWF2ZSIsImRlbGF5TGVhdmUiLCJhZnRlckxlYXZlIiwicmVtb3ZlMiIsInBlcmZvcm1MZWF2ZSIsImRvUmVtb3ZlIiwiY2FjaGVJbmRleCIsInNob3VsZEludm9rZURpcnMiLCJzaG91bGRJbnZva2VWbm9kZUhvb2siLCJ1bm1vdW50Q29tcG9uZW50IiwicmVtb3ZlRnJhZ21lbnQiLCJwZXJmb3JtUmVtb3ZlIiwiYnVtIiwidW0iLCJzbG90Q2FjaGVLZXlzIiwiaW52YWxpZGF0ZU1vdW50IiwidGVsZXBvcnRFbmQiLCJpc0ZsdXNoaW5nIiwiY3VycmVudE5hbWVzcGFjZSIsImFsbG93ZWQiLCJjaDEiLCJjaDIiLCJsZW4iLCJhcnJJIiwic3ViQ29tcG9uZW50Iiwic3NyQ29udGV4dEtleSIsInVzZVNTUkNvbnRleHQiLCJ3YXRjaFN5bmNFZmZlY3QiLCJkb1dhdGNoIiwiZmx1c2giLCJiYXNlV2F0Y2hPcHRpb25zIiwicnVuc0ltbWVkaWF0ZWx5Iiwic3NyQ2xlYW51cCIsIndhdGNoU3RvcEhhbmRsZSIsImlzUHJlIiwiaXNGaXJzdFJ1biIsIndhdGNoJDEiLCJwYXRoIiwic2VnbWVudHMiLCJ1c2VNb2RlbCIsImNhbWVsaXplZE5hbWUiLCJoeXBoZW5hdGVkTmFtZSIsImdldE1vZGVsTW9kaWZpZXJzIiwibG9jYWxWYWx1ZSIsInByZXZTZXRWYWx1ZSIsInByZXZFbWl0dGVkVmFsdWUiLCJwcm9wVmFsdWUiLCJlbWl0dGVkVmFsdWUiLCJpMiIsIm1vZGVsTmFtZSIsImVtaXQiLCJldmVudCIsInJhd0FyZ3MiLCJoYW5kbGVyTmFtZSIsIm9uY2VIYW5kbGVyIiwibm9ybWFsaXplRW1pdHNPcHRpb25zIiwiZXh0ZW5kRW1pdHMiLCJub3JtYWxpemVkRnJvbUV4dGVuZCIsIndpdGhQcm94eSIsInJlbmRlckNhY2hlIiwiZmFsbHRocm91Z2hBdHRycyIsInByb3h5VG9Vc2UiLCJ0aGlzUHJveHkiLCJyZW5kZXIyIiwiZ2V0RnVuY3Rpb25hbEZhbGx0aHJvdWdoIiwiYmxvY2tTdGFjayIsImZpbHRlck1vZGVsTGlzdGVuZXJzIiwiY2xvbmVWTm9kZSIsInByZXZDaGlsZHJlbiIsIm5leHRQcm9wcyIsIm5leHRDaGlsZHJlbiIsImVtaXRzIiwiaGFzUHJvcHNDaGFuZ2VkIiwiZHluYW1pY1Byb3BzIiwiZW1pdHNPcHRpb25zIiwibmV4dEtleXMiLCJzdXNwZW5zZSIsImN1cnJlbnRCbG9jayIsImRpc2FibGVUcmFja2luZyIsImNsb3NlQmxvY2siLCJpc0Jsb2NrVHJlZUVuYWJsZWQiLCJpblZPbmNlIiwic2V0dXBCbG9jayIsImNyZWF0ZUVsZW1lbnRCbG9jayIsImNyZWF0ZUJhc2VWTm9kZSIsIm5vcm1hbGl6ZUtleSIsIm5vcm1hbGl6ZVJlZiIsInJlZl9rZXkiLCJyZWZfZm9yIiwiaXNCbG9ja05vZGUiLCJuZWVkRnVsbENoaWxkcmVuTm9ybWFsaXphdGlvbiIsIm5vcm1hbGl6ZUNoaWxkcmVuIiwiX2NyZWF0ZVZOb2RlIiwiY2xvbmVkIiwiaXNDbGFzc0NvbXBvbmVudCIsImd1YXJkUmVhY3RpdmVQcm9wcyIsImtsYXNzIiwic3R5bGUiLCJleHRyYVByb3BzIiwibWVyZ2VSZWYiLCJjbG9uZVRyYW5zaXRpb24iLCJtZXJnZWRQcm9wcyIsIm1lcmdlUHJvcHMiLCJjcmVhdGVUZXh0Vk5vZGUiLCJ0ZXh0IiwiZmxhZyIsImNyZWF0ZUNvbW1lbnRWTm9kZSIsImFzQmxvY2siLCJzbG90RmxhZyIsInRvTWVyZ2UiLCJpbmNvbWluZyIsImVtcHR5QXBwQ29udGV4dCIsInVpZCIsImludGVybmFsU2V0Q3VycmVudEluc3RhbmNlIiwic2V0SW5TU1JTZXR1cFN0YXRlIiwiZyIsInJlZ2lzdGVyR2xvYmFsU2V0dGVyIiwic2V0dGVycyIsInVuc2V0Q3VycmVudEluc3RhbmNlIiwic2V0dXBSZXN1bHQiLCJzZXR1cFN0YXRlZnVsQ29tcG9uZW50Iiwic2V0dXAiLCJzZXR1cENvbnRleHQiLCJpc0FzeW5jU2V0dXAiLCJyZXNvbHZlZFJlc3VsdCIsImhhbmRsZVNldHVwUmVzdWx0IiwiZmluaXNoQ29tcG9uZW50U2V0dXAiLCJza2lwT3B0aW9ucyIsImF0dHJzUHJveHlIYW5kbGVycyIsImluY2x1ZGVJbmZlcnJlZCIsImNvbXB1dGVkJDEiLCJwb2xpY3kiLCJ0dCIsInVuc2FmZVRvVHJ1c3RlZEhUTUwiLCJzdmdOUyIsIm1hdGhtbE5TIiwiZG9jIiwidGVtcGxhdGVDb250YWluZXIiLCJub2RlT3BzIiwidGFnIiwiaXMiLCJub2RlIiwic2VsZWN0b3IiLCJjb250ZW50IiwiYmVmb3JlIiwidGVtcGxhdGUiLCJ3cmFwcGVyIiwidnRjS2V5IiwicGF0Y2hDbGFzcyIsImlzU1ZHIiwidHJhbnNpdGlvbkNsYXNzZXMiLCJ2U2hvd09yaWdpbmFsRGlzcGxheSIsInZTaG93SGlkZGVuIiwidlNob3ciLCJzZXREaXNwbGF5IiwiQ1NTX1ZBUl9URVhUIiwidXNlQ3NzVmFycyIsInVwZGF0ZVRlbGVwb3J0cyIsInZhcnMiLCJzZXRWYXJzT25Ob2RlIiwic2V0VmFycyIsInNldFZhcnNPblZOb2RlIiwib2IiLCJkaXNwbGF5UkUiLCJwYXRjaFN0eWxlIiwiaXNDc3NTdHJpbmciLCJoYXNDb250cm9sbGVkRGlzcGxheSIsInByZXZTdHlsZSIsInNldFN0eWxlIiwiY3NzVmFyVGV4dCIsImltcG9ydGFudFJFIiwicHJlZml4ZWQiLCJhdXRvUHJlZml4IiwicHJlZml4ZXMiLCJwcmVmaXhDYWNoZSIsInJhd05hbWUiLCJ4bGlua05TIiwicGF0Y2hBdHRyIiwiaXNCb29sZWFuIiwicGF0Y2hET01Qcm9wIiwiYXR0ck5hbWUiLCJuZWVkUmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ2ZWlLZXkiLCJwYXRjaEV2ZW50IiwicHJldlZhbHVlIiwibmV4dFZhbHVlIiwiaW52b2tlcnMiLCJleGlzdGluZ0ludm9rZXIiLCJwYXJzZU5hbWUiLCJpbnZva2VyIiwiY3JlYXRlSW52b2tlciIsIm9wdGlvbnNNb2RpZmllclJFIiwiY2FjaGVkTm93IiwiZ2V0Tm93IiwiaW5pdGlhbFZhbHVlIiwicGF0Y2hTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJvcmlnaW5hbFN0b3AiLCJpc05hdGl2ZU9uIiwicGF0Y2hQcm9wIiwic2hvdWxkU2V0QXNQcm9wIiwiY2FtZWxpemUkMSIsImdldE1vZGVsQXNzaWduZXIiLCJvbkNvbXBvc2l0aW9uU3RhcnQiLCJvbkNvbXBvc2l0aW9uRW5kIiwiYXNzaWduS2V5Iiwidk1vZGVsVGV4dCIsImxhenkiLCJ0cmltIiwibnVtYmVyIiwiY2FzdFRvTnVtYmVyIiwiZG9tVmFsdWUiLCJlbFZhbHVlIiwic3lzdGVtTW9kaWZpZXJzIiwibW9kaWZpZXJHdWFyZHMiLCJ3aXRoTW9kaWZpZXJzIiwiY2FjaGVLZXkiLCJndWFyZCIsImtleU5hbWVzIiwid2l0aEtleXMiLCJldmVudEtleSIsImsiLCJyZW5kZXJlck9wdGlvbnMiLCJyZW5kZXJlciIsImVuc3VyZVJlbmRlcmVyIiwiY3JlYXRlQXBwIiwibW91bnQiLCJjb250YWluZXJPclNlbGVjdG9yIiwibm9ybWFsaXplQ29udGFpbmVyIiwicmVzb2x2ZVJvb3ROYW1lc3BhY2UiLCJnZXRJbnRlcm5ldEV4cGxvcmVyVmVyc2lvbiIsInVhIiwibXNpZSIsInRyaWRlbnQiLCJydiIsImVkZ2UiLCJpc0lFIiwiaW5pdENvbXBhdCIsInNjcmlwdCIsIl93aXRoSWQiLCJfaG9pc3RlZF8xIiwiX2N0eCIsIl9jYWNoZSIsIiRwcm9wcyIsIiRzZXR1cCIsIiRkYXRhIiwiJG9wdGlvbnMiLCJfdHlwZW9mIiwiX2NsYXNzQ2FsbENoZWNrIiwiQ29uc3RydWN0b3IiLCJfZGVmaW5lUHJvcGVydGllcyIsIl9jcmVhdGVDbGFzcyIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl90b0NvbnN1bWFibGVBcnJheSIsIl9hcnJheVdpdGhvdXRIb2xlcyIsIl9pdGVyYWJsZVRvQXJyYXkiLCJfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkiLCJfbm9uSXRlcmFibGVTcHJlYWQiLCJfYXJyYXlMaWtlVG9BcnJheSIsIm8iLCJtaW5MZW4iLCJhcnIyIiwicHJvY2Vzc09wdGlvbnMiLCJ0aHJvdHRsZSIsImRlbGF5IiwidGltZW91dCIsImxhc3RTdGF0ZSIsImN1cnJlbnRBcmdzIiwidGhyb3R0bGVkIiwiX2xlbiIsImxlYWRpbmciLCJkZWVwRXF1YWwiLCJ2YWwxIiwiVmlzaWJpbGl0eVN0YXRlIiwiX3RoaXMiLCJlbnRyeSIsIl9yZWYiLCJfbGVhZGluZyIsImludGVyc2VjdGluZ0VudHJ5IiwiX3JlZjIiLCJfcmVmMyIsIk9ic2VydmVWaXNpYmlsaXR5IiwiY29uZmlnIiwicmVnZXgiLCJwYXJlbnRzIiwicHMiLCJvdmVyZmxvdyIsInNjcm9sbCIsImdldFNjcm9sbFBhcmVudCIsInNpbXBsZUFycmF5Iiwic3VwcG9ydHNQYXNzaXZlIiwib3B0cyIsInNjcmlwdCQyIiwiUmVzaXplT2JzZXJ2ZXIkMSIsInNpemVzIiwiaXRlbXMiLCJmaWVsZCIsIm1pbkl0ZW1TaXplIiwiY29tcHV0ZWRNaW5TaXplIiwiYWNjdW11bGF0b3IiLCJrZXlGaWVsZCIsImxhc3RQb3NpdGlvbiIsInBvb2wiLCJuciIsInZpZXciLCJmYWtlIiwidW51c2VkVmlld3MiLCJ1bnVzZWRQb29sIiwicmVxdWVzdFVwZGF0ZSIsImNvbnRpbnVvdXMiLCJpc1Zpc2libGUiLCJjaGVja0l0ZW0iLCJjaGVja1Bvc2l0aW9uRGlmZiIsIml0ZW1TaXplIiwiZ3JpZEl0ZW1zIiwiaXRlbVNlY29uZGFyeVNpemUiLCJ0eXBlRmllbGQiLCJjb3VudCIsInZpZXdzIiwiaXRlbUluZGV4QnlLZXkiLCJzdGFydEluZGV4IiwiZW5kSW5kZXgiLCJ0b3RhbFNpemUiLCJ2aXNpYmxlU3RhcnRJbmRleCIsInZpc2libGVFbmRJbmRleCIsInBvc2l0aW9uRGlmZiIsImJ1ZmZlciIsImJlZm9yZVNpemUiLCJhZnRlclNpemUiLCJvbGRJIiwicmVtYWluZXIiLCJ1bnVzZWRJbmRleCIsIm5ld2x5VXNlZFZpZXciLCJkaXJlY3Rpb24iLCJpc1ZlcnRpY2FsIiwic2Nyb2xsU3RhdGUiLCJib3VuZHMiLCJib3VuZHNTaXplIiwic2l6ZSIsInBvc2l0aW9uIiwidmlld3BvcnQiLCJzY3JvbGxEaXJlY3Rpb24iLCJzY3JvbGxEaXN0YW5jZSIsInZpZXdwb3J0RWwiLCJzY3JvbGxUb3AiLCJzY3JvbGxlclBvc2l0aW9uIiwidmlld0EiLCJ2aWV3QiIsIl9ob2lzdGVkXzIiLCJyZW5kZXIkMSIsIl9jb21wb25lbnRfUmVzaXplT2JzZXJ2ZXIiLCJfZGlyZWN0aXZlX29ic2VydmVfdmlzaWJpbGl0eSIsImFjdGl2ZVBpbmlhIiwic2V0QWN0aXZlUGluaWEiLCJwaW5pYSIsInBpbmlhU3ltYm9sIiwiTXV0YXRpb25UeXBlIiwiY3JlYXRlUGluaWEiLCJfcCIsInRvQmVJbnN0YWxsZWQiLCJub29wIiwiYWRkU3Vic2NyaXB0aW9uIiwic3Vic2NyaXB0aW9ucyIsIm9uQ2xlYW51cCIsInJlbW92ZVN1YnNjcmlwdGlvbiIsImlkeCIsInRyaWdnZXJTdWJzY3JpcHRpb25zIiwiZmFsbGJhY2tSdW5XaXRoQ29udGV4dCIsIkFDVElPTl9NQVJLRVIiLCJBQ1RJT05fTkFNRSIsIm1lcmdlUmVhY3RpdmVPYmplY3RzIiwicGF0Y2hUb0FwcGx5Iiwic3ViUGF0Y2giLCJ0YXJnZXRWYWx1ZSIsInNraXBIeWRyYXRlU3ltYm9sIiwic2hvdWxkSHlkcmF0ZSIsImFzc2lnbiIsImNyZWF0ZU9wdGlvbnNTdG9yZSIsImhvdCIsImFjdGlvbnMiLCJnZXR0ZXJzIiwiaW5pdGlhbFN0YXRlIiwic3RvcmUiLCJsb2NhbFN0YXRlIiwiY29tcHV0ZWRHZXR0ZXJzIiwiY3JlYXRlU2V0dXBTdG9yZSIsIiRpZCIsImlzT3B0aW9uc1N0b3JlIiwib3B0aW9uc0ZvclBsdWdpbiIsIiRzdWJzY3JpYmVPcHRpb25zIiwiaXNMaXN0ZW5pbmciLCJpc1N5bmNMaXN0ZW5pbmciLCJhY3Rpb25TdWJzY3JpcHRpb25zIiwiZGVidWdnZXJFdmVudHMiLCJhY3RpdmVMaXN0ZW5lciIsIiRwYXRjaCIsInBhcnRpYWxTdGF0ZU9yTXV0YXRvciIsInN1YnNjcmlwdGlvbk11dGF0aW9uIiwibXlMaXN0ZW5lcklkIiwiJHJlc2V0IiwibmV3U3RhdGUiLCIkc3RhdGUiLCIkZGlzcG9zZSIsImFjdGlvbiIsIndyYXBwZWRBY3Rpb24iLCJhZnRlckNhbGxiYWNrTGlzdCIsIm9uRXJyb3JDYWxsYmFja0xpc3QiLCJhZnRlciIsIm9uRXJyb3IiLCJwYXJ0aWFsU3RvcmUiLCJzdG9wV2F0Y2hlciIsInNldHVwU3RvcmUiLCJhY3Rpb25WYWx1ZSIsImV4dGVuZGVyIiwiZGVmaW5lU3RvcmUiLCJpZE9yT3B0aW9ucyIsInNldHVwT3B0aW9ucyIsImlzU2V0dXBTdG9yZSIsInVzZVN0b3JlIiwiaGFzQ29udGV4dCIsIiRnbG9iYWwiLCJwcm9wQ29uZmlnIiwiRkFTVCIsInN0b3JhZ2UiLCJpbml0aWFsaXplIiwiZm91bmQiLCJlbXB0eUFycmF5IiwiY3JlYXRlTWV0YWRhdGFMb2NhdG9yIiwibWV0YWRhdGFMb29rdXAiLCJtZXRhZGF0YSIsImN1cnJlbnRUYXJnZXQiLCJ1cGRhdGVRdWV1ZSIsInRhc2tzIiwicGVuZGluZ0Vycm9ycyIsInRocm93Rmlyc3RFcnJvciIsInRyeVJ1blRhc2siLCJ0YXNrIiwicHJvY2VzcyIsInNjYW4iLCJlbnF1ZXVlIiwiY2FsbGFibGUiLCJmYXN0SFRNTFBvbGljeSIsImh0bWwiLCJodG1sUG9saWN5IiwibWFya2VyIiwiX2ludGVycG9sYXRpb25TdGFydCIsIl9pbnRlcnBvbGF0aW9uRW5kIiwiRE9NIiwiYXR0cmlidXRlTmFtZSIsImVsZW1lbnQiLCJmcmFnbWVudCIsIlN1YnNjcmliZXJTZXQiLCJpbml0aWFsU3Vic2NyaWJlciIsInN1YnNjcmliZXIiLCJzcGlsbG92ZXIiLCJzdWIxIiwic3ViMiIsImlpIiwiUHJvcGVydHlDaGFuZ2VOb3RpZmllciIsInByb3BlcnR5TmFtZSIsInN1YnNjcmliZXJzIiwicHJvcGVydHlUb1dhdGNoIiwicHJvcGVydHlUb1Vud2F0Y2giLCJPYnNlcnZhYmxlIiwidm9sYXRpbGVSZWdleCIsIm5vdGlmaWVyTG9va3VwIiwicXVldWVVcGRhdGUiLCJ3YXRjaGVyIiwiY3JlYXRlQXJyYXlPYnNlcnZlciIsImdldE5vdGlmaWVyIiwiZ2V0QWNjZXNzb3JzIiwiRGVmYXVsdE9ic2VydmFibGVBY2Nlc3NvciIsIkJpbmRpbmdPYnNlcnZlckltcGxlbWVudGF0aW9uIiwiaXNWb2xhdGlsZUJpbmRpbmciLCJwcmV2aW91c1dhdGNoZXIiLCJwcm9wZXJ0eVNvdXJjZSIsIm5vdGlmaWVyIiwibmFtZU9yQWNjZXNzb3IiLCJvYnNlcnZhYmxlIiwidm9sYXRpbGUiLCJjb250ZXh0RXZlbnQiLCJFeGVjdXRpb25Db250ZXh0IiwiZGVmYXVsdEV4ZWN1dGlvbkNvbnRleHQiLCJIVE1MRGlyZWN0aXZlIiwiVGFyZ2V0ZWRIVE1MRGlyZWN0aXZlIiwiQXR0YWNoZWRCZWhhdmlvckhUTUxEaXJlY3RpdmUiLCJiZWhhdmlvciIsIm5vcm1hbEJpbmQiLCJ0cmlnZ2VyQmluZCIsIm5vcm1hbFVuYmluZCIsImNvbnRlbnRVbmJpbmQiLCJ0cmlnZ2VyVW5iaW5kIiwidXBkYXRlQXR0cmlidXRlVGFyZ2V0IiwidXBkYXRlQm9vbGVhbkF0dHJpYnV0ZVRhcmdldCIsInVwZGF0ZUNvbnRlbnRUYXJnZXQiLCJ1cGRhdGVQcm9wZXJ0eVRhcmdldCIsInVwZGF0ZUNsYXNzVGFyZ2V0IiwiY2xhc3NWZXJzaW9ucyIsIm5hbWVzIiwiY3VycmVudE5hbWUiLCJIVE1MQmluZGluZ0RpcmVjdGl2ZSIsIkJpbmRpbmdCZWhhdmlvciIsImlzQmluZGluZ1ZvbGF0aWxlIiwiYmluZCIsInVuYmluZCIsInVwZGF0ZVRhcmdldCIsInRhcmdldE5hbWUiLCJzaGFyZWRDb250ZXh0IiwiQ29tcGlsYXRpb25Db250ZXh0Iiwic2hhcmVhYmxlIiwiY3JlYXRlQWdncmVnYXRlQmluZGluZyIsInBhcnRzIiwicGFydENvdW50IiwiZmluYWxQYXJ0cyIsIm91dHB1dCIsImludGVycG9sYXRpb25FbmRMZW5ndGgiLCJwYXJzZUNvbnRlbnQiLCJ2YWx1ZVBhcnRzIiwiYmluZGluZ1BhcnRzIiwibGl0ZXJhbCIsImRpcmVjdGl2ZUluZGV4IiwiY29tcGlsZUF0dHJpYnV0ZXMiLCJpbmNsdWRlQmFzaWNWYWx1ZXMiLCJhdHRyaWJ1dGVzIiwiYXR0ciIsImF0dHJWYWx1ZSIsInBhcnNlUmVzdWx0IiwiY29tcGlsZUNvbnRlbnQiLCJ3YWxrZXIiLCJsYXN0Tm9kZSIsImN1cnJlbnRQYXJ0IiwiY3VycmVudE5vZGUiLCJjb21waWxlVGVtcGxhdGUiLCJob3N0QmVoYXZpb3JGYWN0b3JpZXMiLCJ0YXJnZXRPZmZzZXQiLCJ2aWV3QmVoYXZpb3JGYWN0b3JpZXMiLCJyYW5nZSIsIkhUTUxWaWV3IiwiYmVoYXZpb3JzIiwicGFyZW50Tm9kZSIsIm9sZFNvdXJjZSIsImpqIiwiVmlld1RlbXBsYXRlIiwiaG9zdEJpbmRpbmdUYXJnZXQiLCJmZWMiLCJ2aWV3RmFjdG9yaWVzIiwiYmVoYXZpb3JJbmRleCIsInRhcmdldEluZGV4IiwiZmFjdG9yeUluZGV4IiwiaG9zdEZhY3RvcmllcyIsImhvc3QiLCJsYXN0QXR0cmlidXRlTmFtZVJlZ2V4Iiwic3RyaW5ncyIsImN1cnJlbnRTdHJpbmciLCJtYXRjaCIsIkVsZW1lbnRTdHlsZXMiLCJzdHlsZVNoZWV0Q2FjaGUiLCJzdHlsZXMiLCJBZG9wdGVkU3R5bGVTaGVldHNTdHlsZXMiLCJTdHlsZUVsZW1lbnRTdHlsZXMiLCJyZWR1Y2VTdHlsZXMiLCJjdXJyIiwicmVkdWNlQmVoYXZpb3JzIiwicHJlcGVuZFRvQWRvcHRlZFN0eWxlU2hlZXRzU3ltYm9sIiwic2VwYXJhdGVTaGVldHNUb1ByZXBlbmQiLCJzaGVldHMiLCJhcHBlbmQiLCJhZGRBZG9wdGVkU3R5bGVTaGVldHMiLCJyZW1vdmVBZG9wdGVkU3R5bGVTaGVldHMiLCJzaGVldCIsInN0eWxlQ2xhc3NJZCIsImdldE5leHRTdHlsZUNsYXNzIiwic3R5bGVTaGVldHMiLCJzdHlsZUNsYXNzIiwiQXR0cmlidXRlQ29uZmlndXJhdGlvbiIsImJvb2xlYW5Db252ZXJ0ZXIiLCJudWxsYWJsZU51bWJlckNvbnZlcnRlciIsIkF0dHJpYnV0ZURlZmluaXRpb24iLCJPd25lciIsImF0dHJpYnV0ZSIsIm1vZGUiLCJjb252ZXJ0ZXIiLCJndWFyZHMiLCJsYXRlc3RWYWx1ZSIsImF0dHJpYnV0ZUxpc3RzIiwibGlzdCIsImNvbmZpZ09yVGFyZ2V0IiwiZGVjb3JhdG9yIiwiJHRhcmdldCIsIiRwcm9wIiwiZGVmYXVsdFNoYWRvd09wdGlvbnMiLCJkZWZhdWx0RWxlbWVudE9wdGlvbnMiLCJmYXN0UmVnaXN0cnkiLCJ0eXBlVG9EZWZpbml0aW9uIiwiZGVmaW5pdGlvbiIsIkZBU1RFbGVtZW50RGVmaW5pdGlvbiIsIm5hbWVPckNvbmZpZyIsIm9ic2VydmVkQXR0cmlidXRlcyIsInByb3BlcnR5TG9va3VwIiwiYXR0cmlidXRlTG9va3VwIiwicHJvdG8iLCJzaGFkb3dSb290cyIsImRlZmF1bHRFdmVudE9wdGlvbnMiLCJnZXRTaGFkb3dSb290IiwiQ29udHJvbGxlciIsInNoYWRvd09wdGlvbnMiLCJzaGFkb3dSb290IiwiYWNjZXNzb3JzIiwiYm91bmRPYnNlcnZhYmxlcyIsInNvdXJjZUJlaGF2aW9ycyIsInRhcmdldEJlaGF2aW9ycyIsImxlbmd0aCIsImJlaGF2aW9yc1RvQmluZCIsImZvcmNlIiwiYmVoYXZpb3JzVG9VbmJpbmQiLCJhdHRyRGVmIiwiZGV0YWlsIiwicHJvcGVydHlOYW1lcyIsImNvbnRyb2xsZXIiLCJjcmVhdGVGQVNURWxlbWVudCIsIkJhc2VUeXBlIiwiRkFTVEVsZW1lbnQiLCJuYW1lT3JEZWYiLCJDU1NEaXJlY3RpdmUiLCJjb2xsZWN0U3R5bGVzIiwiY3NzU3RyaW5nIiwiY3NzIiwiZWxlbWVudFN0eWxlcyIsIlJlZkJlaGF2aW9yIiwibm9UZW1wbGF0ZSIsIm5vcm1hbGl6ZUJpbmRpbmciLCJ3aGVuIiwidGVtcGxhdGVPclRlbXBsYXRlQmluZGluZyIsImVsc2VUZW1wbGF0ZU9yVGVtcGxhdGVCaW5kaW5nIiwiZGF0YUJpbmRpbmciLCJ0ZW1wbGF0ZUJpbmRpbmciLCJlbHNlQmluZGluZyIsIk5vZGVPYnNlcnZhdGlvbkJlaGF2aW9yIiwibm9kZXMiLCJTbG90dGVkQmVoYXZpb3IiLCJzbG90dGVkIiwicHJvcGVydHlPck9wdGlvbnMiLCJTdGFydEVuZCIsImVuZFNsb3RUZW1wbGF0ZSIsInN0YXJ0U2xvdFRlbXBsYXRlIiwiX19kZWNvcmF0ZSIsImRlY29yYXRvcnMiLCJkZXNjIiwiZCIsIm1ldGFkYXRhQnlUYXJnZXQiLCJSZXNvbHZlckJ1aWxkZXIiLCJjYWNoZUNhbGxiYWNrUmVzdWx0IiwiZGVzdGluYXRpb25LZXkiLCJzdHJhdGVneSIsIlJlc29sdmVySW1wbCIsImNsb25lQXJyYXlXaXRoUG9zc2libGVQcm9wcyIsImNsb25lIiwiRGVmYXVsdFJlc29sdmVyIiwiQ29udGFpbmVyQ29uZmlndXJhdGlvbiIsImRlcGVuZGVuY3lMb29rdXAiLCJnZXRQYXJhbVR5cGVzIiwiVHlwZSIsInJvb3RET01Db250YWluZXIiLCJESSIsIkNvbnRhaW5lckltcGwiLCJvd25lZCIsIkRJTG9jYXRlUGFyZW50RXZlbnRUeXBlIiwiYW5ub3RhdGlvblBhcmFtdHlwZXMiLCJkZXBlbmRlbmNpZXMiLCJkZXNpZ25QYXJhbXR5cGVzIiwiUHJvdG8iLCJhdUFubm90YXRpb25QYXJhbXR5cGUiLCJyZXNwZWN0Q29ubmVjdGlvbiIsImRpUHJvcGVydHlLZXkiLCJoYW5kbGVDaGFuZ2UiLCJuYW1lQ29uZmlnT3JDYWxsYmFjayIsImNvbmZpZ3Vyb3IiLCJjb25maWd1cmUiLCJmcmllbmRseU5hbWUiLCJkZWZhdWx0RnJpZW5kbHlOYW1lIiwiSW50ZXJmYWNlIiwicHJvcGVydHkiLCJSZWdpc3RyYXRpb24iLCJkZWZhdWx0U2luZ2xldG9uT3B0aW9ucyIsIkNvbnRhaW5lciIsInJlcXVlc3RvciIsIl9iIiwiX2MiLCJjb250YWluZXJHZXRLZXkiLCJ0cmFuc2Zvcm1JbnN0YW5jZSIsImluc3QiLCJ0cmFuc2Zvcm0iLCJGYWN0b3J5SW1wbCIsImR5bmFtaWNEZXBlbmRlbmNpZXMiLCJ0cmFuc2Zvcm1lciIsImNvbnRhaW5lclJlc29sdmVyIiwiaXNSZWdpc3RyeSIsImlzU2VsZlJlZ2lzdHJ5IiwiaXNSZWdpc3RlckluUmVxdWVzdGVyIiwiaXNDbGFzcyIsIkluc3RyaW5zaWNUeXBlTmFtZXMiLCJmYWN0b3JpZXMiLCJwYXJhbXMiLCJyZXNvbHZlciIsInZhbGlkYXRlS2V5IiwicmVzb2x2ZXJzIiwiYXV0b1JlZ2lzdGVyIiwic2VhcmNoQW5jZXN0b3JzIiwicmVzb2x1dGlvbnMiLCJidWlsZEFsbFJlc3BvbnNlIiwiaXNOYXRpdmVGdW5jdGlvbiIsImtleUFzVmFsdWUiLCJyZWdpc3RyYXRpb25SZXNvbHZlciIsIm5ld1Jlc29sdmVyIiwiZnVuIiwidCIsIm9yaWdpbmFsS2V5IiwiYWxpYXNLZXkiLCJyZXN1bHRzIiwibG9va3VwIiwiaXNOYXRpdmUiLCJzb3VyY2VUZXh0IiwiaXNOdW1lcmljTG9va3VwIiwiY2giLCJwcmVzZW50YXRpb25LZXlGcm9tVGFnIiwidGFnTmFtZSIsInByZXNlbnRhdGlvblJlZ2lzdHJ5IiwiQ29tcG9uZW50UHJlc2VudGF0aW9uIiwicHJlc2VudGF0aW9uIiwiRGVmYXVsdENvbXBvbmVudFByZXNlbnRhdGlvbiIsIkZvdW5kYXRpb25FbGVtZW50IiwiZWxlbWVudERlZmluaXRpb24iLCJvdmVycmlkZURlZmluaXRpb24iLCJGb3VuZGF0aW9uRWxlbWVudFJlZ2lzdHJ5IiwicmVzb2x2ZU9wdGlvbiIsIm9wdGlvbiIsImFwcGx5TWl4aW5zIiwiZGVyaXZlZEN0b3IiLCJiYXNlQ3RvcnMiLCJkZXJpdmVkQXR0cmlidXRlcyIsImJhc2VDdG9yIiwiT3JpZW50YXRpb24iLCJmaW5kTGFzdEluZGV4IiwicHJlZGljYXRlIiwiY2FuVXNlRE9NIiwiaXNIVE1MRWxlbWVudCIsImdldE5vbmNlIiwiX2NhblVzZUZvY3VzVmlzaWJsZSIsImNhblVzZUZvY3VzVmlzaWJsZSIsInN0eWxlRWxlbWVudCIsInN0eWxlTm9uY2UiLCJLZXlDb2RlcyIsImtleUFycm93RG93biIsImtleUFycm93VXAiLCJrZXlFbnRlciIsImtleUVzY2FwZSIsImtleUhvbWUiLCJrZXlFbmQiLCJrZXlTcGFjZSIsImtleVRhYiIsImluUmFuZ2UiLCJtaW4iLCJtYXgiLCJ1bmlxdWVJZENvdW50ZXIiLCJ1bmlxdWVJZCIsInByZWZpeCIsIkFSSUFHbG9iYWxTdGF0ZXNBbmRQcm9wZXJ0aWVzIiwiYnV0dG9uVGVtcGxhdGUiLCJwcm94eVNsb3ROYW1lIiwiRWxlbWVudEludGVybmFsc0tleSIsInN1cHBvcnRzRWxlbWVudEludGVybmFscyIsIkludGVybmFsc01hcCIsIkZvcm1Bc3NvY2lhdGVkIiwiQmFzZUN0b3IiLCJDIiwicGFyZW50TGFiZWxzIiwiZm9yTGFiZWxzIiwibGFiZWxzIiwicHJldmlvdXMiLCJmbGFncyIsIm1lc3NhZ2UiLCJkaXNhYmxlZCIsImRlZmF1bHRCdXR0b24iLCJDaGVja2FibGVGb3JtQXNzb2NpYXRlZCIsIkQiLCJfQnV0dG9uIiwiRm9ybUFzc29jaWF0ZWRCdXR0b24iLCJhdHRhY2hlZCIsImVsZW1lbnRzIiwic3BhbiIsIkJ1dHRvbiIsIkRlbGVnYXRlc0FSSUFCdXR0b24iLCJjaGVja2JveFRlbXBsYXRlIiwiX0NoZWNrYm94IiwiRm9ybUFzc29jaWF0ZWRDaGVja2JveCIsIkNoZWNrYm94IiwiaXNMaXN0Ym94T3B0aW9uIiwiTGlzdGJveE9wdGlvbiIsImRlZmF1bHRTZWxlY3RlZCIsInNlbGVjdGVkIiwiRGVsZWdhdGVzQVJJQUxpc3Rib3hPcHRpb24iLCJMaXN0Ym94IiwiY2FwdHVyZWQiLCJvcHRpb25Ub0ZvY3VzIiwicGF0dGVybiIsInJlIiwicG90ZW50aWFsRGlyZWN0aW9uIiwibmV4dFNlbGVjdGFibGVPcHRpb24iLCJ0aGlzT3B0aW9uIiwic2VsZWN0YWJsZUluZGV4IiwibmV3TmV4dCIsImZpbHRlcmVkTmV4dCIsInNldFNpemUiLCJ0eXBlYWhlYWRNYXRjaGVzIiwic2VsZWN0ZWRJbmRleCIsIkRlbGVnYXRlc0FSSUFMaXN0Ym94IiwiU2VsZWN0UG9zaXRpb24iLCJjb21wb3NlZFBhcmVudCIsInJvb3ROb2RlIiwiY29tcG9zZWRDb250YWlucyIsInJlZmVyZW5jZSIsInRlc3QiLCJkZWZhdWx0RWxlbWVudCIsImlzRmFzdEVsZW1lbnQiLCJRdWV1ZWRTdHlsZVNoZWV0VGFyZ2V0IiwiQ29uc3RydWN0YWJsZVN0eWxlU2hlZXRUYXJnZXQiLCJEb2N1bWVudFN0eWxlU2hlZXRUYXJnZXQiLCJIZWFkU3R5bGVFbGVtZW50U3R5bGVTaGVldFRhcmdldCIsIlN0eWxlRWxlbWVudFN0eWxlU2hlZXRUYXJnZXQiLCJFbGVtZW50U3R5bGVTaGVldFRhcmdldCIsIlJvb3RTdHlsZVNoZWV0VGFyZ2V0IiwiUHJvcGVydHlUYXJnZXRNYW5hZ2VyIiwicm9vdHMiLCJwcm9wZXJ0eVRhcmdldENhY2hlIiwicHJvcGVydHlUYXJnZXRDdG9yIiwiRGVzaWduVG9rZW5JbXBsIiwiY29uZmlndXJhdGlvbiIsInRva2VuIiwiRGVzaWduVG9rZW5Ob2RlIiwic3Vic2NyaWJlclNldCIsInJlY29yZCIsIkN1c3RvbVByb3BlcnR5UmVmbGVjdG9yIiwiRGVzaWduVG9rZW5CaW5kaW5nT2JzZXJ2ZXIiLCJTdG9yZSIsIm5vZGVDYWNoZSIsImNoaWxkVG9QYXJlbnQiLCJyZWZsZWN0aW5nIiwicGFyZW50VmFsdWUiLCJzb3VyY2VWYWx1ZSIsInVwc3RyZWFtIiwicmVQYXJlbnQiLCJjaGlsZEluZGV4IiwiZGVsZXRlZCIsIm9ic2VydmVyIiwiY3JlYXRlIiwiRGVzaWduVG9rZW4iLCJFbGVtZW50RGlzYW1iaWd1YXRpb24iLCJlbGVtZW50VHlwZXNCeVRhZyIsImVsZW1lbnRUYWdzQnlUeXBlIiwicm9vdERlc2lnblN5c3RlbSIsImRlc2lnblN5c3RlbUtleSIsIkRlZmF1bHREZXNpZ25TeXN0ZW0iLCJEZXNpZ25TeXN0ZW0iLCJzeXN0ZW0iLCJleHRyYWN0VHJ5RGVmaW5lRWxlbWVudFBhcmFtcyIsImVsZW1lbnREZWZpbml0aW9uVHlwZSIsImVsZW1lbnREZWZpbml0aW9uQ2FsbGJhY2siLCJyZWdpc3RyYXRpb25zIiwiZWxlbWVudERlZmluaXRpb25FbnRyaWVzIiwiZGlzYW1iaWd1YXRlIiwic2hhZG93Um9vdE1vZGUiLCJleHRyYWN0ZWRQYXJhbXMiLCJiYXNlQ2xhc3MiLCJlbGVtZW50TmFtZSIsInR5cGVGb3VuZEJ5TmFtZSIsIm5lZWRzRGVmaW5lIiwiRWxlbWVudERlZmluaXRpb25FbnRyeSIsIndpbGxEZWZpbmUiLCJkaXZpZGVyVGVtcGxhdGUiLCJEaXZpZGVyUm9sZSIsIkRpdmlkZXIiLCJsaXN0Ym94T3B0aW9uVGVtcGxhdGUiLCJMaXN0Ym94RWxlbWVudCIsImFjdGl2ZUl0ZW0iLCJwcmVzZXJ2ZUNoZWNrZWQiLCJzaGlmdEtleSIsImVuYWJsZWRDaGVja2VkT3B0aW9ucyIsImFjdGl2ZUluZGV4IiwicHJvZ3Jlc3NTZWdtZW50cyIsInByb2dyZXNzUmluZ1RlbXBsYXRlIiwiQmFzZVByb2dyZXNzIiwiX1NlbGVjdCIsIkZvcm1Bc3NvY2lhdGVkU2VsZWN0IiwiU2VsZWN0IiwiX2QiLCJfZSIsIl9mIiwiX2ciLCJwcmV2U2VsZWN0ZWRWYWx1ZSIsIm5leHRTZWxlY3RlZFZhbHVlIiwic2hvdWxkRW1pdCIsImN1cnJlbnRCb3giLCJhdmFpbGFibGVCb3R0b20iLCJmb2N1c1RhcmdldCIsInByb3h5T3B0aW9uIiwiRGVsZWdhdGVzQVJJQVNlbGVjdCIsInNlbGVjdFRlbXBsYXRlIiwiZGlzYWJsZWRDdXJzb3IiLCJoaWRkZW4iLCJkaXNwbGF5IiwiZGlzcGxheVZhbHVlIiwiZm9jdXNWaXNpYmxlIiwicHJvdmlkZVZTQ29kZURlc2lnblN5c3RlbSIsImluaXRUaGVtZUNoYW5nZUxpc3RlbmVyIiwidG9rZW5NYXBwaW5ncyIsImFwcGx5Q3VycmVudFRoZW1lIiwiYm9keSIsInRoZW1lS2luZCIsInZzY29kZVRva2VuTmFtZSIsInRvb2xraXRUb2tlbiIsImlzVGhlbWVMaXN0ZW5lckluaXRpYWxpemVkIiwidnNjb2RlVGhlbWVWYXIiLCJkZXNpZ25Ub2tlbiIsImJhY2tncm91bmQiLCJib3JkZXJXaWR0aCIsImNvbnRyYXN0QWN0aXZlQm9yZGVyIiwiY29ybmVyUmFkaXVzIiwiY29ybmVyUmFkaXVzUm91bmQiLCJkZXNpZ25Vbml0IiwiZGlzYWJsZWRPcGFjaXR5IiwiZm9jdXNCb3JkZXIiLCJmb250RmFtaWx5IiwiZm9yZWdyb3VuZCIsImlucHV0SGVpZ2h0IiwiaW5wdXRNaW5XaWR0aCIsInR5cGVSYW1wQmFzZUZvbnRTaXplIiwidHlwZVJhbXBCYXNlTGluZUhlaWdodCIsInR5cGVSYW1wTWludXMxRm9udFNpemUiLCJ0eXBlUmFtcE1pbnVzMUxpbmVIZWlnaHQiLCJzY3JvbGxiYXJXaWR0aCIsInNjcm9sbGJhckhlaWdodCIsInNjcm9sbGJhclNsaWRlckJhY2tncm91bmQiLCJzY3JvbGxiYXJTbGlkZXJIb3ZlckJhY2tncm91bmQiLCJzY3JvbGxiYXJTbGlkZXJBY3RpdmVCYWNrZ3JvdW5kIiwiYmFkZ2VCYWNrZ3JvdW5kIiwiYmFkZ2VGb3JlZ3JvdW5kIiwiYnV0dG9uQm9yZGVyIiwiYnV0dG9uSWNvbkJhY2tncm91bmQiLCJidXR0b25JY29uQ29ybmVyUmFkaXVzIiwiYnV0dG9uSWNvbkZvY3VzQm9yZGVyT2Zmc2V0IiwiYnV0dG9uSWNvbkhvdmVyQmFja2dyb3VuZCIsImJ1dHRvbkljb25QYWRkaW5nIiwiYnV0dG9uUHJpbWFyeUJhY2tncm91bmQiLCJidXR0b25QcmltYXJ5Rm9yZWdyb3VuZCIsImJ1dHRvblByaW1hcnlIb3ZlckJhY2tncm91bmQiLCJidXR0b25TZWNvbmRhcnlCYWNrZ3JvdW5kIiwiYnV0dG9uU2Vjb25kYXJ5Rm9yZWdyb3VuZCIsImJ1dHRvblNlY29uZGFyeUhvdmVyQmFja2dyb3VuZCIsImJ1dHRvblBhZGRpbmdIb3Jpem9udGFsIiwiYnV0dG9uUGFkZGluZ1ZlcnRpY2FsIiwiY2hlY2tib3hCYWNrZ3JvdW5kIiwiY2hlY2tib3hCb3JkZXIiLCJjaGVja2JveENvcm5lclJhZGl1cyIsImxpc3RBY3RpdmVTZWxlY3Rpb25CYWNrZ3JvdW5kIiwibGlzdEFjdGl2ZVNlbGVjdGlvbkZvcmVncm91bmQiLCJsaXN0SG92ZXJCYWNrZ3JvdW5kIiwiZGl2aWRlckJhY2tncm91bmQiLCJkcm9wZG93bkJhY2tncm91bmQiLCJkcm9wZG93bkJvcmRlciIsImRyb3Bkb3duTGlzdE1heEhlaWdodCIsImlucHV0QmFja2dyb3VuZCIsImlucHV0Rm9yZWdyb3VuZCIsImxpbmtBY3RpdmVGb3JlZ3JvdW5kIiwibGlua0ZvcmVncm91bmQiLCJwcm9ncmVzc0JhY2tncm91bmQiLCJwYW5lbFRhYkFjdGl2ZUJvcmRlciIsInBhbmVsVGFiQWN0aXZlRm9yZWdyb3VuZCIsInBhbmVsVGFiRm9yZWdyb3VuZCIsInRhZ0Nvcm5lclJhZGl1cyIsIkJhc2VCdXR0b25TdHlsZXMiLCJQcmltYXJ5QnV0dG9uU3R5bGVzIiwiU2Vjb25kYXJ5QnV0dG9uU3R5bGVzIiwiSWNvbkJ1dHRvblN0eWxlcyIsImJ1dHRvblN0eWxlcyIsIkZvdW5kYXRpb25CdXR0b24iLCJhcHBlYXJhbmNlVmFsdWUiLCJvbGRWYWwiLCJ2c0NvZGVCdXR0b24iLCJjaGVja2JveFN0eWxlcyIsImRlZmludGlpb24iLCJGb3VuZGF0aW9uQ2hlY2tib3giLCJ2c0NvZGVDaGVja2JveCIsImRpdmlkZXJTdHlsZXMiLCJGb3VuZGF0aW9uRGl2aWRlciIsInZzQ29kZURpdmlkZXIiLCJkcm9wZG93blN0eWxlcyIsIkRyb3Bkb3duIiwiRm91bmRhdGlvblNlbGVjdCIsInZzQ29kZURyb3Bkb3duIiwib3B0aW9uU3R5bGVzIiwiRm91bmRhdGlvbkxpc3Rib3hPcHRpb24iLCJ2c0NvZGVPcHRpb24iLCJPcHRpb24iLCJwcm9ncmVzc1JpbmdTdHlsZXMiLCJQcm9ncmVzc1JpbmciLCJ2c0NvZGVQcm9ncmVzc1JpbmciLCJpc0NvbmZpZ3VyYXRpb25FcnJvciIsImNmZyIsIkNvbnRlbnRUeXBlIiwiaXNQcmVDb250ZW50UmVjb3JkIiwiRmlsZU1hdGNoU291cmNlIiwiRXJyb3JNZXNzYWdlQWN0aW9uSWRzIiwiRXJyb3JNZXNzYWdlQWN0aW9uSWRzMiIsImlzRXJyb3JNZXNzYWdlQWN0aW9uSWQiLCJzZWFyY2hWYWx1ZSIsIkVycm9yTWVzc2FnZVNwbGl0T3B0aW9ucyIsImZpbmRFcnJvck1lc3NhZ2VTcGxpdE9wdGlvbiIsIldlYnZpZXdUb0hvc3RNZXNzYWdlVHlwZSIsImNhbGN1bGF0ZVRpdGxlIiwiY29udGVudFJlY29yZCIsInRpdGxlIiwiY29uZmlnTmFtZSIsImZvcm1hdERhdGVTdHJpbmciLCJkYXRlU3RyaW5nIiwiaW5jbHVkZVRpbWUiLCJkYXRlUmVzdWx0IiwidGltZVJlc3VsdCIsImZvcm1hdFRpbWVTdHJpbmciLCJpbmNsdWRlU2Vjb25kcyIsImZpbHRlckNvbmZpZ3VyYXRpb25zVG9WYWxpZEFuZFR5cGUiLCJjb25maWdzIiwiaXNDb25maWd1cmF0aW9uT2ZUeXBlIiwiSG9zdFRvV2Vidmlld01lc3NhZ2VUeXBlIiwiaXNIb3N0VG9XZWJ2aWV3TWVzc2FnZSIsIm1zZyIsIkhvc3RDb25kdWl0Iiwid2luZG93IiwidnNDb2RlQXBpIiwiX19wdWJsaWNGaWVsZCIsIm5vcm1hbGl6ZVVSTCIsImlucHV0IiwiaXNBZ2VudEVycm9yIiwiaXNBZ2VudEVycm9yQmFzZSIsImlzQWdlbnRFcnJvclR5cGVVbmtub3duIiwiaXNBZ2VudEVycm9ySW52YWxpZFRPTUwiLCJpc0FnZW50RXJyb3JEZXBsb3llZENvbnRlbnROb3RSdW5uaW5nIiwidXNlSG9tZVN0b3JlIiwicGxhdGZvcm1GaWxlU2VwYXJhdG9yIiwicHVibGlzaEluUHJvZ3Jlc3MiLCJjb250ZW50UmVjb3JkcyIsImNvbmZpZ3VyYXRpb25zIiwiY29uZmlndXJhdGlvbnNJbkVycm9yIiwiY3JlZGVudGlhbHMiLCJzb3J0ZWRDcmVkZW50aWFscyIsInNlcnZlclNlY3JldHMiLCJzZWNyZXRzIiwiZW52aXJvbm1lbnQiLCJzZWxlY3RlZENvbmZpZ3VyYXRpb24iLCJkdXBsaWNhdGVkRW52aXJvbm1lbnRWYXJpYWJsZXMiLCJzaG93RGlzYWJsZWRPdmVybGF5Iiwic2VsZWN0ZWRDb250ZW50UmVjb3JkIiwiY29uZmlndXJhdGlvbk5hbWUiLCJwcm9qZWN0RGlyIiwicHJldkNvbnRlbnRSZWNvcmQiLCJpc1NhbWVDb250ZW50UmVjb3JkIiwic2VjcmV0Iiwic2VydmVyQ3JlZGVudGlhbCIsImNyZWRlbnRpYWxVcmwiLCJyZWNvcmRVcmwiLCJsYXN0Q29udGVudFJlY29yZFJlc3VsdCIsImxhc3RDb250ZW50UmVjb3JkTXNnIiwicHl0aG9uUHJvamVjdCIsInB5dGhvblBhY2thZ2VzIiwicHl0aG9uUGFja2FnZUZpbGUiLCJweXRob25QYWNrYWdlTWFuYWdlciIsInJQcm9qZWN0IiwiclBhY2thZ2VzIiwiclBhY2thZ2VGaWxlIiwiclBhY2thZ2VNYW5hZ2VyIiwiclZlcnNpb24iLCJpbml0aWFsaXppbmdSZXF1ZXN0Q29tcGxldGUiLCJ1cGRhdGVTZWxlY3RlZENvbnRlbnRSZWNvcmRCeVNlbGVjdG9yIiwicHJldmlvdXNTZWxlY3RlZENvbnRlbnRSZWNvcmQiLCJwcmV2aW91c1NlbGVjdGVkQ29uZmlnIiwidXBkYXRlU2VsZWN0ZWRDb250ZW50UmVjb3JkQnlPYmplY3QiLCJ1cGRhdGVTZWxlY3Rpb25DcmVkZW50aWFsU3RhdHVzIiwidXNlSG9zdENvbmR1aXRTZXJ2aWNlIiwidXBkYXRlU2VsZWN0aW9uSXNQcmVDb250ZW50UmVjb3JkU3RhdGUiLCJ1cGRhdGVQYXJlbnRWaWV3U2VsZWN0aW9uU3RhdGUiLCJob3N0Q29uZHVpdCIsInVwZGF0ZVB5dGhvblBhY2thZ2VzIiwiaXNweXRob25Qcm9qZWN0IiwicGFja2FnZXMiLCJmaWxlIiwibWFuYWdlciIsInVwZGF0ZVJQYWNrYWdlcyIsImlzUlByb2plY3QiLCJjbGVhclNlY3JldFZhbHVlcyIsImNsZWFyZWQiLCJzZWNyZXRzV2l0aFZhbHVlQ291bnQiLCJweXRob24iLCJjcmVkZW50aWFsIiwiYW55QWN0aXZlQWxlcnRzIiwiZmxhdHRlbkZpbGVzIiwiZmlsZXMiLCJleHBhbmRlZERpcnMiLCJpbmRlbnQiLCJwYXJlbnRGaWxlIiwicmVzdCIsImZsYXRGaWxlIiwidXNlRmlsZVN0b3JlIiwiaG9tZSIsInNlbmRNc2ciLCJmbGF0RmlsZXMiLCJsYXN0RGVwbG95ZWRGaWxlcyIsInJlZnJlc2hGaWxlcyIsImluY2x1ZGVGaWxlIiwiZXhjbHVkZUZpbGUiLCJvcGVuRmlsZSIsImV4cGFuZERpciIsImNvbGxhcHNlRGlyIiwiYXBpSW5zdGFuY2UiLCJ2c2NvZGVBUEkiLCJvbk1lc3NhZ2VGcm9tSG9zdCIsIm9uSW5pdGlhbGl6aW5nUmVxdWVzdENvbXBsZXRlTXNnIiwib25SZWZyZXNoQ29udGVudFJlY29yZERhdGFNc2ciLCJvblJlZnJlc2hDb25maWdEYXRhTXNnIiwib25SZWZyZXNoQ3JlZGVudGlhbERhdGFNc2ciLCJvblB1Ymxpc2hTdGFydE1zZyIsIm9uUHVibGlzaEZpbmlzaFN1Y2Nlc3NNc2ciLCJvblB1Ymxpc2hGaW5pc2hGYWlsdXJlTXNnIiwib25VcGRhdGVDb250ZW50UmVjb3JkU2VsZWN0aW9uTXNnIiwib25TYXZlU2VsZWN0aW9uTXNnIiwib25SZWZyZXNoRmlsZXNNc2ciLCJvblVwZGF0ZVB5dGhvblBhY2thZ2VzIiwib25VcGRhdGVSUGFja2FnZXMiLCJvblNob3dEaXNhYmxlT3ZlcmxheU1zZyIsIm9uSGlkZURpc2FibGVPdmVybGF5TXNnIiwib25TZXRQYXRoU2VwYXJhdG9yTXNnIiwib25VcGRhdGVTZXJ2ZXJFbnZpcm9ubWVudE1zZyIsImZpbGVTdG9yZSIsImlzSWNvbkRldGFpbCIsIl9fcHJvcHMiLCJjb250ZXh0TWVudUJ1dHRvbiIsIm9wZW5Db250ZXh0TWVudSIsInZzY29kZUNvbnRleHQiLCJoYXZlUmVzb3VyY2VzIiwiZGVwbG95IiwiX19lbWl0IiwiYWN0aXZlT3B0aW9uIiwibWVzc2FnZVBhcnRzIiwib25DbGljayIsInRvb2xiYXJBY3Rpb25zIiwib25BZGREZXBsb3ltZW50Iiwib25FZGl0Q29uZmlndXJhdGlvbiIsIm9uU2VsZWN0RGVwbG95bWVudCIsImZ1bGxQYXRoIiwic2VsZWN0aW9uIiwib25WaWV3UHVibGlzaGluZ0xvZyIsImZpbHRlcmVkQ29uZmlncyIsImNvbnRleHRNZW51Q29udGV4dCIsInByb21wdEZvckNvbmZpZ1NlbGVjdGlvbiIsImNvbnRleHRNZW51VlNDb2RlQ29udGV4dCIsImRlcGxveW1lbnRUaXRsZSIsImRlcGxveW1lbnREZXRhaWxzIiwiZGV0YWlscyIsImNyZWRlbnRpYWxTdWJUaXRsZSIsImVudHJ5cG9pbnRTdWJUaXRsZSIsInN1YlRpdGxlIiwic2VsZWN0Q29uZmlndXJhdGlvbiIsImxhc3RTdGF0dXNEZXNjcmlwdGlvbiIsImlzRGlzbWlzc2VkQ29udGVudFJlY29yZCIsImlzUHJlQ29udGVudFJlY29yZFdpdGhJRCIsImlzUHJlQ29udGVudFJlY29yZFdpdGhvdXRJRCIsInRvb2xUaXBUZXh0IiwiZW50cnlwb2ludCIsImdldEFjdGl2ZUNvbmZpZ0Vycm9yIiwiZ2V0QWN0aXZlQ29uZmlnVE9NTEVycm9yRGV0YWlscyIsImFnZW50RXJyb3IiLCJpc0RlcGxveWVkQ29udGVudE9uRXJyb3IiLCJkZXBsb3ltZW50RXJyb3IiLCJkZXBsb3llZENvbnRlbnRCdXR0b25MYWJlbCIsIm9uRWRpdENvbmZpZ3VyYXRpb25XaXRoVE9NTEVycm9yIiwib25FcnJvck1lc3NhZ2VBbmNob3JDbGljayIsInNwbGl0T3B0aW9uSWQiLCJuYXZpZ2F0ZVRvVXJsIiwidXJsIiwibmV3Q3JlZGVudGlhbCIsIm9uQXNzb2NpYXRlRGVwbG95bWVudCIsInNob3dDb250ZW50QnV0dG9uIiwidmlld0NvbnRlbnQiLCJleHBhbmRlZCIsIl91c2VNb2RlbCIsInRvZ2dsZUV4cGFuZGVkIiwiX3VzZVNsb3RzIiwiaXNFeHBhbmRhYmxlIiwiaW5jbHVkZWRGaWxlVG9vbHRpcCIsImlzRW50cnlwb2ludCIsImlzUGFja2FnZUZpbGUiLCJ0b29sdGlwIiwiZXhjbHVkZWRGaWxlVG9vbHRpcCIsImlzRGlzYWJsZWQiLCJpc0luY2x1ZGVkIiwiaW5MYXN0RGVwbG95ZWQiLCJpc0JlaW5nQWRkZWQiLCJpc0JlaW5nUmVtb3ZlZCIsImlzUHl0aG9uUGFja2FnZUZpbGUiLCJpc1JQYWNrYWdlRmlsZSIsImxpc3RTdHlsZSIsIl9vcGVuQmxvY2siLCJfY3JlYXRlRWxlbWVudEJsb2NrIiwiX3JlbmRlclNsb3QiLCJtb2RlbCIsImFyaWFMYWJlbCIsIl9fZXhwb3NlIiwiaXNFZGl0aW5nIiwiaW5wdXRWYWx1ZSIsInNlY3JldFZhbHVlIiwib25TZXJ2ZXIiLCJuZWVkc1ZhbHVlIiwiaW5wdXRTZWNyZXQiLCJ1cGRhdGVTZWNyZXQiLCJzZWN0aW9uQWN0aW9ucyIsIm9uUmVmcmVzaCIsIm9uU2NhbkZvclBhY2thZ2VSZXF1aXJlbWVudHMiLCJvbkVkaXRSZXF1aXJlbWVudHNGaWxlIiwicHl0aG9uUGFja2FnZUFjdGlvbnMiLCJzaG93V2VsY29tZVZpZXciLCJvblZpZXdSZW52RG9jIiwiclBhY2thZ2VBY3Rpb25zIiwibWlzc2luZ09ySW52YWxpZFBhY2thZ2VGaWxlIiwicHJvamVjdEZpbGVzRXhwYW5kZWQiLCJBcHAiLCJSZWN5Y2xlU2Nyb2xsZXIiXSwibWFwcGluZ3MiOiIrMkJBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxHQUtBLDJCQUVBLFNBQVNBLEdBQVFDLEVBQUssQ0FDZCxNQUFBQyxFQUE2QixPQUFBLE9BQU8sSUFBSSxFQUM5QyxVQUFXQyxLQUFPRixFQUFJLE1BQU0sR0FBRyxFQUFHQyxFQUFJQyxDQUFHLEVBQUksRUFDdEMsT0FBQ0MsR0FBUUEsS0FBT0YsQ0FDekIsQ0FFQSxNQUFNRyxHQUE0RSxDQUFDLEVBQzdFQyxHQUE0RSxDQUFDLEVBQzdFQyxHQUFPLElBQU0sQ0FDbkIsRUFDTUMsR0FBSyxJQUFNLEdBQ1hDLEdBQVFOLEdBQVFBLEVBQUks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QUcsRUFBSSxhQUN6Q0EsRUFBU0EsRUFBUyxVQUFlLEdBQUcsRUFBSSxZQUN4Q0EsRUFBU0EsRUFBUyxVQUFlLEdBQUcsRUFBSSxZQUN4Q0EsRUFBU0EsRUFBUyxVQUFlLEdBQUcsRUFBSSxZQUN4Q0EsRUFBU0EsRUFBUyxVQUFlLEdBQUcsRUFBSSxZQUN4Q0EsRUFBU0EsRUFBUyxVQUFlLEdBQUcsRUFBSSxZQUN4Q0EsRUFBU0EsRUFBUyxVQUFlLEdBQUcsRUFBSSxZQUN4Q0EsRUFBU0EsRUFBUyxVQUFlLEdBQUcsRUFBSSxZQUN4Q0EsRUFBU0EsRUFBUyxVQUFlLEdBQUcsRUFBSSxZQUN4Q0EsRUFBU0EsRUFBUyxLQUFVLEVBQUUsRUFBSSxPQUNsQ0EsRUFBU0EsRUFBUyxPQUFZLEVBQUUsRUFBSSxTQUNwQ0EsRUFBU0EsRUFBUyxLQUFVLEVBQUUsRUFBSSxPQUNsQ0EsRUFBU0EsRUFBUyxNQUFXLEdBQUcsRUFBSSxRQUNwQ0EsRUFBU0EsRUFBUyxPQUFZLEdBQUcsRUFBSSxTQUNyQ0EsRUFBU0EsRUFBUyxRQUFhLEdBQUcsRUFBSSxVQUN0Q0EsRUFBU0EsRUFBUyxRQUFhLEVBQUUsRUFBSSxVQUNyQ0EsRUFBU0EsRUFBUyxRQUFhLEVBQUUsRUFBSSxVQUNyQ0EsRUFBU0EsRUFBUyxRQUFhLEVBQUUsRUFBSSxVQUNyQ0EsRUFBU0EsRUFBUyxRQUFhLEVBQUUsRUFBSSxVQUNyQ0EsRUFBU0EsRUFBUyxRQUFhLEdBQUcsRUFBSSxVQUN0Q0EsRUFBU0EsRUFBUyxRQUFhLEdBQUcsRUFBSSxVQUN0Q0EsRUFBU0EsRUFBUyxRQUFhLEdBQUcsRUFBSSxVQUN0Q0EsRUFBU0EsRUFBUyxRQUFhLEdBQUcsRUFBSSxVQUN0Q0EsRUFBU0EsRUFBUyxRQUFhLEdBQUcsRUFBSSxVQUN0Q0EsRUFBU0EsRUFBUyxRQUFhLEdBQUcsRUFBSSxVQUN0Q0EsRUFBU0EsRUFBUyxhQUFrQixHQUFHLEVBQUksZUFDM0NBLEVBQVNBLEVBQVMsVUFBZSxHQUFHLEVBQUksWUFDeENBLEVBQVNBLEVBQVMsWUFBaUIsR0FBRyxFQUFJ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OEJ4MUQsRUFBUyxJQUV6Q2l1RCxFQUFLLEVBQUUsT0FBTyxzQkFBd0JBLEVBQUssRUFBRSxPQUFPLG1CQUV2RCx1OUJDekZELE1BQU1BLEVBQU9qRSxHQUFhLEVBRXBCLENBQUUsUUFBQWtFLENBQVEsRUFBSTFCLEdBQXNCLEVBRXBDd0ksRUFBaUJoMUQsRUFBUyxJQUN2QixDQUNMLENBQ0UsTUFBTyxpQkFDUCxRQUFTLGNBQ1QsR0FBSSxJQUFNLENBQ0FrdUQsRUFBQSxDQUNOLEtBQU0vRixHQUF5QixjQUFBLENBQ2hDLENBQUEsQ0FFTCxFQUNBLENBQ0UsTUFBTyxzQkFDUCxRQUFTLGtCQUNULEdBQUksSUFBTSxDQUNSK0YsRUFBUSxDQUFFLEtBQU0vRixHQUF5QixtQkFBQSxDQUFxQixDQUFBLENBQ2hFLENBRUosQ0FDRCxFQUVLZ0ksRUFBaUI1QyxHQUNkLEtBQUssVUFBVSxDQUNwQixlQUFnQkEsRUFBVyxLQUMzQixlQUFnQkEsRUFBVyxLQUMzQixlQUFnQix3QkFDaEIsK0JBQWdDLEVBQUEsQ0FDakMsK3JCQ3hCSCxNQUFNWixFQUFjSCxHQUFzQix3b0JDSHBCQSxHQUFBLEVBRXRCLE1BQU15QixFQUFPakUsR0FBYSxFQUVwQnlMLEVBQXVCdnRELEdBQUksRUFBSSw0YkNuQnJDdzVDLEdBQUEsRUFBNEIsU0FDMUIyRSxHQUFhLEVBQ2JXLEdBQWUsRUFDZkcsR0FBYSxFQUNiSSxHQUFtQixFQUNuQlgsR0FBYyxFQUNkSCxHQUFlLENBQ2pCLEVBRUEsTUFBTTduQixHQUFRRyxHQUFZLEVBRXBCemlCLEdBQU1vYSxHQUFVZy9CLEVBQUcsRUFDekJwNUMsR0FBSSxJQUFJc2lCLEVBQUssRUFDYnRpQixHQUFJLFVBQVUsa0JBQW1CcTVDLEVBQWUsRUFFaERyNUMsR0FBSSxNQUFNLE1BQU0iLCJ4X2dvb2dsZV9pZ25vcmVMaXN0IjpbMCwxLDIsMyw0LDUsNiw3LDgsOSwxMCwxMSwxMiwxMywxNCwxNSwxNiwxNywxOCwxOSwyMCwyMSwyMiwyMywyNCwyNSwyNiwyNywyOCwyOSwzMCwzMSwzMiwzMywzNCwzNSwzNiwzNywzOCwzOSw0MCw0MSw0Miw0Myw0NCw0NSw0Niw0Nyw0OCw0OSw1MCw1MSw1Miw1Myw1NCw1NSw1Niw1Nyw1OCw1OSw2MCw2MSw2Miw2Myw2NCw2NSw2Niw2Nyw2OCw2OSw3MCw3MSw3Miw3Myw3NCw3NSw3Niw3Nyw3OCw3OSw4MCw4MSw4Miw4Myw4NCw4NSw4Niw4N119
