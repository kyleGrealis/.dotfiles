#!/usr/bin/env bash

#=================================================================
# tailscale-protect
# Purpose: Enables Tailscale exit node protection for untrusted networks
# Author: Kyle Grealis
# Date: October 10, 2025
#=================================================================

PI5_IP="100.125.173.109"
echo "üõ°Ô∏è Switching to protection mode..."
sudo tailscale up --exit-node=$PI5_IP

# Verification logic
STATUS=$(tailscale status)
if echo "$STATUS" | grep -q "; exit node;"; then
  echo "‚ö†Ô∏è -------------------- WARNING!! ---------------------"
  echo "‚úÖ Exit node protection ENABLED!! All traffic now routes through your Tailnet."
  echo "‚ö†Ô∏è ----------------------------------------------------"
else
  echo "‚ùå Something went wrong. Please check tailscale status."
fi
